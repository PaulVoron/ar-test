(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();function cR(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var ZA={},a6={get exports(){return ZA},set exports(i){ZA=i}},ux={},Zt={},l6={get exports(){return Zt},set exports(i){Zt=i}},gr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I0=Symbol.for("react.element"),c6=Symbol.for("react.portal"),u6=Symbol.for("react.fragment"),h6=Symbol.for("react.strict_mode"),d6=Symbol.for("react.profiler"),f6=Symbol.for("react.provider"),p6=Symbol.for("react.context"),m6=Symbol.for("react.forward_ref"),g6=Symbol.for("react.suspense"),A6=Symbol.for("react.memo"),v6=Symbol.for("react.lazy"),t3=Symbol.iterator;function y6(i){return i===null||typeof i!="object"?null:(i=t3&&i[t3]||i["@@iterator"],typeof i=="function"?i:null)}var uR={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},hR=Object.assign,dR={};function tg(i,e,t){this.props=i,this.context=e,this.refs=dR,this.updater=t||uR}tg.prototype.isReactComponent={};tg.prototype.setState=function(i,e){if(typeof i!="object"&&typeof i!="function"&&i!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,i,e,"setState")};tg.prototype.forceUpdate=function(i){this.updater.enqueueForceUpdate(this,i,"forceUpdate")};function fR(){}fR.prototype=tg.prototype;function $w(i,e,t){this.props=i,this.context=e,this.refs=dR,this.updater=t||uR}var eC=$w.prototype=new fR;eC.constructor=$w;hR(eC,tg.prototype);eC.isPureReactComponent=!0;var n3=Array.isArray,pR=Object.prototype.hasOwnProperty,tC={current:null},mR={key:!0,ref:!0,__self:!0,__source:!0};function gR(i,e,t){var r,o={},a=null,l=null;if(e!=null)for(r in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(a=""+e.key),e)pR.call(e,r)&&!mR.hasOwnProperty(r)&&(o[r]=e[r]);var d=arguments.length-2;if(d===1)o.children=t;else if(1<d){for(var c=Array(d),h=0;h<d;h++)c[h]=arguments[h+2];o.children=c}if(i&&i.defaultProps)for(r in d=i.defaultProps,d)o[r]===void 0&&(o[r]=d[r]);return{$$typeof:I0,type:i,key:a,ref:l,props:o,_owner:tC.current}}function x6(i,e){return{$$typeof:I0,type:i.type,key:e,ref:i.ref,props:i.props,_owner:i._owner}}function nC(i){return typeof i=="object"&&i!==null&&i.$$typeof===I0}function E6(i){var e={"=":"=0",":":"=2"};return"$"+i.replace(/[=:]/g,function(t){return e[t]})}var i3=/\/+/g;function e_(i,e){return typeof i=="object"&&i!==null&&i.key!=null?E6(""+i.key):e.toString(36)}function u1(i,e,t,r,o){var a=typeof i;(a==="undefined"||a==="boolean")&&(i=null);var l=!1;if(i===null)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(i.$$typeof){case I0:case c6:l=!0}}if(l)return l=i,o=o(l),i=r===""?"."+e_(l,0):r,n3(o)?(t="",i!=null&&(t=i.replace(i3,"$&/")+"/"),u1(o,e,t,"",function(h){return h})):o!=null&&(nC(o)&&(o=x6(o,t+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(i3,"$&/")+"/")+i)),e.push(o)),1;if(l=0,r=r===""?".":r+":",n3(i))for(var d=0;d<i.length;d++){a=i[d];var c=r+e_(a,d);l+=u1(a,e,t,c,o)}else if(c=y6(i),typeof c=="function")for(i=c.call(i),d=0;!(a=i.next()).done;)a=a.value,c=r+e_(a,d++),l+=u1(a,e,t,c,o);else if(a==="object")throw e=String(i),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function ry(i,e,t){if(i==null)return i;var r=[],o=0;return u1(i,r,"","",function(a){return e.call(t,a,o++)}),r}function _6(i){if(i._status===-1){var e=i._result;e=e(),e.then(function(t){(i._status===0||i._status===-1)&&(i._status=1,i._result=t)},function(t){(i._status===0||i._status===-1)&&(i._status=2,i._result=t)}),i._status===-1&&(i._status=0,i._result=e)}if(i._status===1)return i._result.default;throw i._result}var _a={current:null},h1={transition:null},w6={ReactCurrentDispatcher:_a,ReactCurrentBatchConfig:h1,ReactCurrentOwner:tC};gr.Children={map:ry,forEach:function(i,e,t){ry(i,function(){e.apply(this,arguments)},t)},count:function(i){var e=0;return ry(i,function(){e++}),e},toArray:function(i){return ry(i,function(e){return e})||[]},only:function(i){if(!nC(i))throw Error("React.Children.only expected to receive a single React element child.");return i}};gr.Component=tg;gr.Fragment=u6;gr.Profiler=d6;gr.PureComponent=$w;gr.StrictMode=h6;gr.Suspense=g6;gr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=w6;gr.cloneElement=function(i,e,t){if(i==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+i+".");var r=hR({},i.props),o=i.key,a=i.ref,l=i._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,l=tC.current),e.key!==void 0&&(o=""+e.key),i.type&&i.type.defaultProps)var d=i.type.defaultProps;for(c in e)pR.call(e,c)&&!mR.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&d!==void 0?d[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=t;else if(1<c){d=Array(c);for(var h=0;h<c;h++)d[h]=arguments[h+2];r.children=d}return{$$typeof:I0,type:i.type,key:o,ref:a,props:r,_owner:l}};gr.createContext=function(i){return i={$$typeof:p6,_currentValue:i,_currentValue2:i,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},i.Provider={$$typeof:f6,_context:i},i.Consumer=i};gr.createElement=gR;gr.createFactory=function(i){var e=gR.bind(null,i);return e.type=i,e};gr.createRef=function(){return{current:null}};gr.forwardRef=function(i){return{$$typeof:m6,render:i}};gr.isValidElement=nC;gr.lazy=function(i){return{$$typeof:v6,_payload:{_status:-1,_result:i},_init:_6}};gr.memo=function(i,e){return{$$typeof:A6,type:i,compare:e===void 0?null:e}};gr.startTransition=function(i){var e=h1.transition;h1.transition={};try{i()}finally{h1.transition=e}};gr.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};gr.useCallback=function(i,e){return _a.current.useCallback(i,e)};gr.useContext=function(i){return _a.current.useContext(i)};gr.useDebugValue=function(){};gr.useDeferredValue=function(i){return _a.current.useDeferredValue(i)};gr.useEffect=function(i,e){return _a.current.useEffect(i,e)};gr.useId=function(){return _a.current.useId()};gr.useImperativeHandle=function(i,e,t){return _a.current.useImperativeHandle(i,e,t)};gr.useInsertionEffect=function(i,e){return _a.current.useInsertionEffect(i,e)};gr.useLayoutEffect=function(i,e){return _a.current.useLayoutEffect(i,e)};gr.useMemo=function(i,e){return _a.current.useMemo(i,e)};gr.useReducer=function(i,e,t){return _a.current.useReducer(i,e,t)};gr.useRef=function(i){return _a.current.useRef(i)};gr.useState=function(i){return _a.current.useState(i)};gr.useSyncExternalStore=function(i,e,t){return _a.current.useSyncExternalStore(i,e,t)};gr.useTransition=function(){return _a.current.useTransition()};gr.version="18.2.0";(function(i){i.exports=gr})(l6);const BA=cR(Zt);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C6=Zt,M6=Symbol.for("react.element"),b6=Symbol.for("react.fragment"),S6=Object.prototype.hasOwnProperty,T6=C6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,I6={key:!0,ref:!0,__self:!0,__source:!0};function AR(i,e,t){var r,o={},a=null,l=null;t!==void 0&&(a=""+t),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(l=e.ref);for(r in e)S6.call(e,r)&&!I6.hasOwnProperty(r)&&(o[r]=e[r]);if(i&&i.defaultProps)for(r in e=i.defaultProps,e)o[r]===void 0&&(o[r]=e[r]);return{$$typeof:M6,type:i,key:a,ref:l,props:o,_owner:T6.current}}ux.Fragment=b6;ux.jsx=AR;ux.jsxs=AR;(function(i){i.exports=ux})(a6);const R1=ZA.Fragment,sr=ZA.jsx,Ga=ZA.jsxs;var f2={},p2={},R6={get exports(){return p2},set exports(i){p2=i}},Al={},m2={},B6={get exports(){return m2},set exports(i){m2=i}},vR={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(i){function e(X,W){var ce=X.length;X.push(W);e:for(;0<ce;){var he=ce-1>>>1,xe=X[he];if(0<o(xe,W))X[he]=W,X[ce]=xe,ce=he;else break e}}function t(X){return X.length===0?null:X[0]}function r(X){if(X.length===0)return null;var W=X[0],ce=X.pop();if(ce!==W){X[0]=ce;e:for(var he=0,xe=X.length,ve=xe>>>1;he<ve;){var Fe=2*(he+1)-1,je=X[Fe],rt=Fe+1,He=X[rt];if(0>o(je,ce))rt<xe&&0>o(He,je)?(X[he]=He,X[rt]=ce,he=rt):(X[he]=je,X[Fe]=ce,he=Fe);else if(rt<xe&&0>o(He,ce))X[he]=He,X[rt]=ce,he=rt;else break e}}return W}function o(X,W){var ce=X.sortIndex-W.sortIndex;return ce!==0?ce:X.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;i.unstable_now=function(){return a.now()}}else{var l=Date,d=l.now();i.unstable_now=function(){return l.now()-d}}var c=[],h=[],m=1,p=null,A=3,v=!1,y=!1,x=!1,C=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(X){for(var W=t(h);W!==null;){if(W.callback===null)r(h);else if(W.startTime<=X)r(h),W.sortIndex=W.expirationTime,e(c,W);else break;W=t(h)}}function S(X){if(x=!1,_(X),!y)if(t(c)!==null)y=!0,ee(R);else{var W=t(h);W!==null&&ne(S,W.startTime-X)}}function R(X,W){y=!1,x&&(x=!1,g(D),D=-1),v=!0;var ce=A;try{for(_(W),p=t(c);p!==null&&(!(p.expirationTime>W)||X&&!H());){var he=p.callback;if(typeof he=="function"){p.callback=null,A=p.priorityLevel;var xe=he(p.expirationTime<=W);W=i.unstable_now(),typeof xe=="function"?p.callback=xe:p===t(c)&&r(c),_(W)}else r(c);p=t(c)}if(p!==null)var ve=!0;else{var Fe=t(h);Fe!==null&&ne(S,Fe.startTime-W),ve=!1}return ve}finally{p=null,A=ce,v=!1}}var P=!1,O=null,D=-1,L=5,N=-1;function H(){return!(i.unstable_now()-N<L)}function J(){if(O!==null){var X=i.unstable_now();N=X;var W=!0;try{W=O(!0,X)}finally{W?K():(P=!1,O=null)}}else P=!1}var K;if(typeof b=="function")K=function(){b(J)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,ae=se.port2;se.port1.onmessage=J,K=function(){ae.postMessage(null)}}else K=function(){C(J,0)};function ee(X){O=X,P||(P=!0,K())}function ne(X,W){D=C(function(){X(i.unstable_now())},W)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(X){X.callback=null},i.unstable_continueExecution=function(){y||v||(y=!0,ee(R))},i.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<X?Math.floor(1e3/X):5},i.unstable_getCurrentPriorityLevel=function(){return A},i.unstable_getFirstCallbackNode=function(){return t(c)},i.unstable_next=function(X){switch(A){case 1:case 2:case 3:var W=3;break;default:W=A}var ce=A;A=W;try{return X()}finally{A=ce}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(X,W){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var ce=A;A=X;try{return W()}finally{A=ce}},i.unstable_scheduleCallback=function(X,W,ce){var he=i.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?he+ce:he):ce=he,X){case 1:var xe=-1;break;case 2:xe=250;break;case 5:xe=1073741823;break;case 4:xe=1e4;break;default:xe=5e3}return xe=ce+xe,X={id:m++,callback:W,priorityLevel:X,startTime:ce,expirationTime:xe,sortIndex:-1},ce>he?(X.sortIndex=ce,e(h,X),t(c)===null&&X===t(h)&&(x?(g(D),D=-1):x=!0,ne(S,ce-he))):(X.sortIndex=xe,e(c,X),y||v||(y=!0,ee(R))),X},i.unstable_shouldYield=H,i.unstable_wrapCallback=function(X){var W=A;return function(){var ce=A;A=W;try{return X.apply(this,arguments)}finally{A=ce}}}})(vR);(function(i){i.exports=vR})(B6);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yR=Zt,gl=m2;function mn(i){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+i,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+i+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var xR=new Set,$A={};function Kf(i,e){Fm(i,e),Fm(i+"Capture",e)}function Fm(i,e){for($A[i]=e,i=0;i<e.length;i++)xR.add(e[i])}var Xu=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g2=Object.prototype.hasOwnProperty,L6=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,r3={},s3={};function D6(i){return g2.call(s3,i)?!0:g2.call(r3,i)?!1:L6.test(i)?s3[i]=!0:(r3[i]=!0,!1)}function P6(i,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function O6(i,e,t,r){if(e===null||typeof e>"u"||P6(i,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function wa(i,e,t,r,o,a,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=t,this.propertyName=i,this.type=e,this.sanitizeURL=a,this.removeEmptyString=l}var Go={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){Go[i]=new wa(i,0,!1,i,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var e=i[0];Go[e]=new wa(e,1,!1,i[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(i){Go[i]=new wa(i,2,!1,i.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){Go[i]=new wa(i,2,!1,i,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){Go[i]=new wa(i,3,!1,i.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(i){Go[i]=new wa(i,3,!0,i,null,!1,!1)});["capture","download"].forEach(function(i){Go[i]=new wa(i,4,!1,i,null,!1,!1)});["cols","rows","size","span"].forEach(function(i){Go[i]=new wa(i,6,!1,i,null,!1,!1)});["rowSpan","start"].forEach(function(i){Go[i]=new wa(i,5,!1,i.toLowerCase(),null,!1,!1)});var iC=/[\-:]([a-z])/g;function rC(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var e=i.replace(iC,rC);Go[e]=new wa(e,1,!1,i,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var e=i.replace(iC,rC);Go[e]=new wa(e,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(i){var e=i.replace(iC,rC);Go[e]=new wa(e,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(i){Go[i]=new wa(i,1,!1,i.toLowerCase(),null,!1,!1)});Go.xlinkHref=new wa("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(i){Go[i]=new wa(i,1,!1,i.toLowerCase(),null,!0,!0)});function sC(i,e,t,r){var o=Go.hasOwnProperty(e)?Go[e]:null;(o!==null?o.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(O6(e,t,o,r)&&(t=null),r||o===null?D6(e)&&(t===null?i.removeAttribute(e):i.setAttribute(e,""+t)):o.mustUseProperty?i[o.propertyName]=t===null?o.type===3?!1:"":t:(e=o.attributeName,r=o.attributeNamespace,t===null?i.removeAttribute(e):(o=o.type,t=o===3||o===4&&t===!0?"":""+t,r?i.setAttributeNS(r,e,t):i.setAttribute(e,t))))}var eh=yR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,sy=Symbol.for("react.element"),hm=Symbol.for("react.portal"),dm=Symbol.for("react.fragment"),oC=Symbol.for("react.strict_mode"),A2=Symbol.for("react.profiler"),ER=Symbol.for("react.provider"),_R=Symbol.for("react.context"),aC=Symbol.for("react.forward_ref"),v2=Symbol.for("react.suspense"),y2=Symbol.for("react.suspense_list"),lC=Symbol.for("react.memo"),Oh=Symbol.for("react.lazy"),wR=Symbol.for("react.offscreen"),o3=Symbol.iterator;function lA(i){return i===null||typeof i!="object"?null:(i=o3&&i[o3]||i["@@iterator"],typeof i=="function"?i:null)}var bs=Object.assign,t_;function LA(i){if(t_===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);t_=e&&e[1]||""}return`
`+t_+i}var n_=!1;function i_(i,e){if(!i||n_)return"";n_=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(i,[],e)}else{try{e.call()}catch(h){r=h}i.call(e.prototype)}else{try{throw Error()}catch(h){r=h}i()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var o=h.stack.split(`
`),a=r.stack.split(`
`),l=o.length-1,d=a.length-1;1<=l&&0<=d&&o[l]!==a[d];)d--;for(;1<=l&&0<=d;l--,d--)if(o[l]!==a[d]){if(l!==1||d!==1)do if(l--,d--,0>d||o[l]!==a[d]){var c=`
`+o[l].replace(" at new "," at ");return i.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",i.displayName)),c}while(1<=l&&0<=d);break}}}finally{n_=!1,Error.prepareStackTrace=t}return(i=i?i.displayName||i.name:"")?LA(i):""}function F6(i){switch(i.tag){case 5:return LA(i.type);case 16:return LA("Lazy");case 13:return LA("Suspense");case 19:return LA("SuspenseList");case 0:case 2:case 15:return i=i_(i.type,!1),i;case 11:return i=i_(i.type.render,!1),i;case 1:return i=i_(i.type,!0),i;default:return""}}function x2(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case dm:return"Fragment";case hm:return"Portal";case A2:return"Profiler";case oC:return"StrictMode";case v2:return"Suspense";case y2:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case _R:return(i.displayName||"Context")+".Consumer";case ER:return(i._context.displayName||"Context")+".Provider";case aC:var e=i.render;return i=i.displayName,i||(i=e.displayName||e.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case lC:return e=i.displayName||null,e!==null?e:x2(i.type)||"Memo";case Oh:e=i._payload,i=i._init;try{return x2(i(e))}catch{}}return null}function N6(i){var e=i.type;switch(i.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=e.render,i=i.displayName||i.name||"",e.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return x2(e);case 8:return e===oC?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ed(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function CR(i){var e=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function k6(i){var e=CR(i)?"checked":"value",t=Object.getOwnPropertyDescriptor(i.constructor.prototype,e),r=""+i[e];if(!i.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var o=t.get,a=t.set;return Object.defineProperty(i,e,{configurable:!0,get:function(){return o.call(this)},set:function(l){r=""+l,a.call(this,l)}}),Object.defineProperty(i,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){i._valueTracker=null,delete i[e]}}}}function oy(i){i._valueTracker||(i._valueTracker=k6(i))}function MR(i){if(!i)return!1;var e=i._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return i&&(r=CR(i)?i.checked?"true":"false":i.value),i=r,i!==t?(e.setValue(i),!0):!1}function B1(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function E2(i,e){var t=e.checked;return bs({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??i._wrapperState.initialChecked})}function a3(i,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=ed(e.value!=null?e.value:t),i._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function bR(i,e){e=e.checked,e!=null&&sC(i,"checked",e,!1)}function _2(i,e){bR(i,e);var t=ed(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&i.value===""||i.value!=t)&&(i.value=""+t):i.value!==""+t&&(i.value=""+t);else if(r==="submit"||r==="reset"){i.removeAttribute("value");return}e.hasOwnProperty("value")?w2(i,e.type,t):e.hasOwnProperty("defaultValue")&&w2(i,e.type,ed(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(i.defaultChecked=!!e.defaultChecked)}function l3(i,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+i._wrapperState.initialValue,t||e===i.value||(i.value=e),i.defaultValue=e}t=i.name,t!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,t!==""&&(i.name=t)}function w2(i,e,t){(e!=="number"||B1(i.ownerDocument)!==i)&&(t==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+t&&(i.defaultValue=""+t))}var DA=Array.isArray;function bm(i,e,t,r){if(i=i.options,e){e={};for(var o=0;o<t.length;o++)e["$"+t[o]]=!0;for(t=0;t<i.length;t++)o=e.hasOwnProperty("$"+i[t].value),i[t].selected!==o&&(i[t].selected=o),o&&r&&(i[t].defaultSelected=!0)}else{for(t=""+ed(t),e=null,o=0;o<i.length;o++){if(i[o].value===t){i[o].selected=!0,r&&(i[o].defaultSelected=!0);return}e!==null||i[o].disabled||(e=i[o])}e!==null&&(e.selected=!0)}}function C2(i,e){if(e.dangerouslySetInnerHTML!=null)throw Error(mn(91));return bs({},e,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function c3(i,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(mn(92));if(DA(t)){if(1<t.length)throw Error(mn(93));t=t[0]}e=t}e==null&&(e=""),t=e}i._wrapperState={initialValue:ed(t)}}function SR(i,e){var t=ed(e.value),r=ed(e.defaultValue);t!=null&&(t=""+t,t!==i.value&&(i.value=t),e.defaultValue==null&&i.defaultValue!==t&&(i.defaultValue=t)),r!=null&&(i.defaultValue=""+r)}function u3(i){var e=i.textContent;e===i._wrapperState.initialValue&&e!==""&&e!==null&&(i.value=e)}function TR(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function M2(i,e){return i==null||i==="http://www.w3.org/1999/xhtml"?TR(e):i==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var ay,IR=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,o){MSApp.execUnsafeLocalFunction(function(){return i(e,t,r,o)})}:i}(function(i,e){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=e;else{for(ay=ay||document.createElement("div"),ay.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ay.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;e.firstChild;)i.appendChild(e.firstChild)}});function e0(i,e){if(e){var t=i.firstChild;if(t&&t===i.lastChild&&t.nodeType===3){t.nodeValue=e;return}}i.textContent=e}var UA={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},U6=["Webkit","ms","Moz","O"];Object.keys(UA).forEach(function(i){U6.forEach(function(e){e=e+i.charAt(0).toUpperCase()+i.substring(1),UA[e]=UA[i]})});function RR(i,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||UA.hasOwnProperty(i)&&UA[i]?(""+e).trim():e+"px"}function BR(i,e){i=i.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,o=RR(t,e[t],r);t==="float"&&(t="cssFloat"),r?i.setProperty(t,o):i[t]=o}}var z6=bs({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function b2(i,e){if(e){if(z6[i]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(mn(137,i));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(mn(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(mn(61))}if(e.style!=null&&typeof e.style!="object")throw Error(mn(62))}}function S2(i,e){if(i.indexOf("-")===-1)return typeof e.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var T2=null;function cC(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var I2=null,Sm=null,Tm=null;function h3(i){if(i=L0(i)){if(typeof I2!="function")throw Error(mn(280));var e=i.stateNode;e&&(e=mx(e),I2(i.stateNode,i.type,e))}}function LR(i){Sm?Tm?Tm.push(i):Tm=[i]:Sm=i}function DR(){if(Sm){var i=Sm,e=Tm;if(Tm=Sm=null,h3(i),e)for(i=0;i<e.length;i++)h3(e[i])}}function PR(i,e){return i(e)}function OR(){}var r_=!1;function FR(i,e,t){if(r_)return i(e,t);r_=!0;try{return PR(i,e,t)}finally{r_=!1,(Sm!==null||Tm!==null)&&(OR(),DR())}}function t0(i,e){var t=i.stateNode;if(t===null)return null;var r=mx(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(i=i.type,r=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!r;break e;default:i=!1}if(i)return null;if(t&&typeof t!="function")throw Error(mn(231,e,typeof t));return t}var R2=!1;if(Xu)try{var cA={};Object.defineProperty(cA,"passive",{get:function(){R2=!0}}),window.addEventListener("test",cA,cA),window.removeEventListener("test",cA,cA)}catch{R2=!1}function G6(i,e,t,r,o,a,l,d,c){var h=Array.prototype.slice.call(arguments,3);try{e.apply(t,h)}catch(m){this.onError(m)}}var zA=!1,L1=null,D1=!1,B2=null,H6={onError:function(i){zA=!0,L1=i}};function V6(i,e,t,r,o,a,l,d,c){zA=!1,L1=null,G6.apply(H6,arguments)}function Q6(i,e,t,r,o,a,l,d,c){if(V6.apply(this,arguments),zA){if(zA){var h=L1;zA=!1,L1=null}else throw Error(mn(198));D1||(D1=!0,B2=h)}}function Yf(i){var e=i,t=i;if(i.alternate)for(;e.return;)e=e.return;else{i=e;do e=i,e.flags&4098&&(t=e.return),i=e.return;while(i)}return e.tag===3?t:null}function NR(i){if(i.tag===13){var e=i.memoizedState;if(e===null&&(i=i.alternate,i!==null&&(e=i.memoizedState)),e!==null)return e.dehydrated}return null}function d3(i){if(Yf(i)!==i)throw Error(mn(188))}function W6(i){var e=i.alternate;if(!e){if(e=Yf(i),e===null)throw Error(mn(188));return e!==i?null:i}for(var t=i,r=e;;){var o=t.return;if(o===null)break;var a=o.alternate;if(a===null){if(r=o.return,r!==null){t=r;continue}break}if(o.child===a.child){for(a=o.child;a;){if(a===t)return d3(o),i;if(a===r)return d3(o),e;a=a.sibling}throw Error(mn(188))}if(t.return!==r.return)t=o,r=a;else{for(var l=!1,d=o.child;d;){if(d===t){l=!0,t=o,r=a;break}if(d===r){l=!0,r=o,t=a;break}d=d.sibling}if(!l){for(d=a.child;d;){if(d===t){l=!0,t=a,r=o;break}if(d===r){l=!0,r=a,t=o;break}d=d.sibling}if(!l)throw Error(mn(189))}}if(t.alternate!==r)throw Error(mn(190))}if(t.tag!==3)throw Error(mn(188));return t.stateNode.current===t?i:e}function kR(i){return i=W6(i),i!==null?UR(i):null}function UR(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var e=UR(i);if(e!==null)return e;i=i.sibling}return null}var zR=gl.unstable_scheduleCallback,f3=gl.unstable_cancelCallback,j6=gl.unstable_shouldYield,X6=gl.unstable_requestPaint,Ws=gl.unstable_now,K6=gl.unstable_getCurrentPriorityLevel,uC=gl.unstable_ImmediatePriority,GR=gl.unstable_UserBlockingPriority,P1=gl.unstable_NormalPriority,Y6=gl.unstable_LowPriority,HR=gl.unstable_IdlePriority,hx=null,ou=null;function q6(i){if(ou&&typeof ou.onCommitFiberRoot=="function")try{ou.onCommitFiberRoot(hx,i,void 0,(i.current.flags&128)===128)}catch{}}var gc=Math.clz32?Math.clz32:$6,J6=Math.log,Z6=Math.LN2;function $6(i){return i>>>=0,i===0?32:31-(J6(i)/Z6|0)|0}var ly=64,cy=4194304;function PA(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function O1(i,e){var t=i.pendingLanes;if(t===0)return 0;var r=0,o=i.suspendedLanes,a=i.pingedLanes,l=t&268435455;if(l!==0){var d=l&~o;d!==0?r=PA(d):(a&=l,a!==0&&(r=PA(a)))}else l=t&~o,l!==0?r=PA(l):a!==0&&(r=PA(a));if(r===0)return 0;if(e!==0&&e!==r&&!(e&o)&&(o=r&-r,a=e&-e,o>=a||o===16&&(a&4194240)!==0))return e;if(r&4&&(r|=t&16),e=i.entangledLanes,e!==0)for(i=i.entanglements,e&=r;0<e;)t=31-gc(e),o=1<<t,r|=i[t],e&=~o;return r}function eF(i,e){switch(i){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tF(i,e){for(var t=i.suspendedLanes,r=i.pingedLanes,o=i.expirationTimes,a=i.pendingLanes;0<a;){var l=31-gc(a),d=1<<l,c=o[l];c===-1?(!(d&t)||d&r)&&(o[l]=eF(d,e)):c<=e&&(i.expiredLanes|=d),a&=~d}}function L2(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function VR(){var i=ly;return ly<<=1,!(ly&4194240)&&(ly=64),i}function s_(i){for(var e=[],t=0;31>t;t++)e.push(i);return e}function R0(i,e,t){i.pendingLanes|=e,e!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,e=31-gc(e),i[e]=t}function nF(i,e){var t=i.pendingLanes&~e;i.pendingLanes=e,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=e,i.mutableReadLanes&=e,i.entangledLanes&=e,e=i.entanglements;var r=i.eventTimes;for(i=i.expirationTimes;0<t;){var o=31-gc(t),a=1<<o;e[o]=0,r[o]=-1,i[o]=-1,t&=~a}}function hC(i,e){var t=i.entangledLanes|=e;for(i=i.entanglements;t;){var r=31-gc(t),o=1<<r;o&e|i[r]&e&&(i[r]|=e),t&=~o}}var Yr=0;function QR(i){return i&=-i,1<i?4<i?i&268435455?16:536870912:4:1}var WR,dC,jR,XR,KR,D2=!1,uy=[],Wh=null,jh=null,Xh=null,n0=new Map,i0=new Map,Uh=[],iF="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function p3(i,e){switch(i){case"focusin":case"focusout":Wh=null;break;case"dragenter":case"dragleave":jh=null;break;case"mouseover":case"mouseout":Xh=null;break;case"pointerover":case"pointerout":n0.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":i0.delete(e.pointerId)}}function uA(i,e,t,r,o,a){return i===null||i.nativeEvent!==a?(i={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:a,targetContainers:[o]},e!==null&&(e=L0(e),e!==null&&dC(e)),i):(i.eventSystemFlags|=r,e=i.targetContainers,o!==null&&e.indexOf(o)===-1&&e.push(o),i)}function rF(i,e,t,r,o){switch(e){case"focusin":return Wh=uA(Wh,i,e,t,r,o),!0;case"dragenter":return jh=uA(jh,i,e,t,r,o),!0;case"mouseover":return Xh=uA(Xh,i,e,t,r,o),!0;case"pointerover":var a=o.pointerId;return n0.set(a,uA(n0.get(a)||null,i,e,t,r,o)),!0;case"gotpointercapture":return a=o.pointerId,i0.set(a,uA(i0.get(a)||null,i,e,t,r,o)),!0}return!1}function YR(i){var e=Ef(i.target);if(e!==null){var t=Yf(e);if(t!==null){if(e=t.tag,e===13){if(e=NR(t),e!==null){i.blockedOn=e,KR(i.priority,function(){jR(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){i.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}i.blockedOn=null}function d1(i){if(i.blockedOn!==null)return!1;for(var e=i.targetContainers;0<e.length;){var t=P2(i.domEventName,i.eventSystemFlags,e[0],i.nativeEvent);if(t===null){t=i.nativeEvent;var r=new t.constructor(t.type,t);T2=r,t.target.dispatchEvent(r),T2=null}else return e=L0(t),e!==null&&dC(e),i.blockedOn=t,!1;e.shift()}return!0}function m3(i,e,t){d1(i)&&t.delete(e)}function sF(){D2=!1,Wh!==null&&d1(Wh)&&(Wh=null),jh!==null&&d1(jh)&&(jh=null),Xh!==null&&d1(Xh)&&(Xh=null),n0.forEach(m3),i0.forEach(m3)}function hA(i,e){i.blockedOn===e&&(i.blockedOn=null,D2||(D2=!0,gl.unstable_scheduleCallback(gl.unstable_NormalPriority,sF)))}function r0(i){function e(o){return hA(o,i)}if(0<uy.length){hA(uy[0],i);for(var t=1;t<uy.length;t++){var r=uy[t];r.blockedOn===i&&(r.blockedOn=null)}}for(Wh!==null&&hA(Wh,i),jh!==null&&hA(jh,i),Xh!==null&&hA(Xh,i),n0.forEach(e),i0.forEach(e),t=0;t<Uh.length;t++)r=Uh[t],r.blockedOn===i&&(r.blockedOn=null);for(;0<Uh.length&&(t=Uh[0],t.blockedOn===null);)YR(t),t.blockedOn===null&&Uh.shift()}var Im=eh.ReactCurrentBatchConfig,F1=!0;function oF(i,e,t,r){var o=Yr,a=Im.transition;Im.transition=null;try{Yr=1,fC(i,e,t,r)}finally{Yr=o,Im.transition=a}}function aF(i,e,t,r){var o=Yr,a=Im.transition;Im.transition=null;try{Yr=4,fC(i,e,t,r)}finally{Yr=o,Im.transition=a}}function fC(i,e,t,r){if(F1){var o=P2(i,e,t,r);if(o===null)m_(i,e,r,N1,t),p3(i,r);else if(rF(o,i,e,t,r))r.stopPropagation();else if(p3(i,r),e&4&&-1<iF.indexOf(i)){for(;o!==null;){var a=L0(o);if(a!==null&&WR(a),a=P2(i,e,t,r),a===null&&m_(i,e,r,N1,t),a===o)break;o=a}o!==null&&r.stopPropagation()}else m_(i,e,r,null,t)}}var N1=null;function P2(i,e,t,r){if(N1=null,i=cC(r),i=Ef(i),i!==null)if(e=Yf(i),e===null)i=null;else if(t=e.tag,t===13){if(i=NR(e),i!==null)return i;i=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;i=null}else e!==i&&(i=null);return N1=i,null}function qR(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(K6()){case uC:return 1;case GR:return 4;case P1:case Y6:return 16;case HR:return 536870912;default:return 16}default:return 16}}var Gh=null,pC=null,f1=null;function JR(){if(f1)return f1;var i,e=pC,t=e.length,r,o="value"in Gh?Gh.value:Gh.textContent,a=o.length;for(i=0;i<t&&e[i]===o[i];i++);var l=t-i;for(r=1;r<=l&&e[t-r]===o[a-r];r++);return f1=o.slice(i,1<r?1-r:void 0)}function p1(i){var e=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&e===13&&(i=13)):i=e,i===10&&(i=13),32<=i||i===13?i:0}function hy(){return!0}function g3(){return!1}function vl(i){function e(t,r,o,a,l){this._reactName=t,this._targetInst=o,this.type=r,this.nativeEvent=a,this.target=l,this.currentTarget=null;for(var d in i)i.hasOwnProperty(d)&&(t=i[d],this[d]=t?t(a):a[d]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?hy:g3,this.isPropagationStopped=g3,this}return bs(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=hy)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=hy)},persist:function(){},isPersistent:hy}),e}var ng={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mC=vl(ng),B0=bs({},ng,{view:0,detail:0}),lF=vl(B0),o_,a_,dA,dx=bs({},B0,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gC,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==dA&&(dA&&i.type==="mousemove"?(o_=i.screenX-dA.screenX,a_=i.screenY-dA.screenY):a_=o_=0,dA=i),o_)},movementY:function(i){return"movementY"in i?i.movementY:a_}}),A3=vl(dx),cF=bs({},dx,{dataTransfer:0}),uF=vl(cF),hF=bs({},B0,{relatedTarget:0}),l_=vl(hF),dF=bs({},ng,{animationName:0,elapsedTime:0,pseudoElement:0}),fF=vl(dF),pF=bs({},ng,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),mF=vl(pF),gF=bs({},ng,{data:0}),v3=vl(gF),AF={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vF={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yF={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xF(i){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(i):(i=yF[i])?!!e[i]:!1}function gC(){return xF}var EF=bs({},B0,{key:function(i){if(i.key){var e=AF[i.key]||i.key;if(e!=="Unidentified")return e}return i.type==="keypress"?(i=p1(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?vF[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gC,charCode:function(i){return i.type==="keypress"?p1(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?p1(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),_F=vl(EF),wF=bs({},dx,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),y3=vl(wF),CF=bs({},B0,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gC}),MF=vl(CF),bF=bs({},ng,{propertyName:0,elapsedTime:0,pseudoElement:0}),SF=vl(bF),TF=bs({},dx,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),IF=vl(TF),RF=[9,13,27,32],AC=Xu&&"CompositionEvent"in window,GA=null;Xu&&"documentMode"in document&&(GA=document.documentMode);var BF=Xu&&"TextEvent"in window&&!GA,ZR=Xu&&(!AC||GA&&8<GA&&11>=GA),x3=String.fromCharCode(32),E3=!1;function $R(i,e){switch(i){case"keyup":return RF.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function eB(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var fm=!1;function LF(i,e){switch(i){case"compositionend":return eB(e);case"keypress":return e.which!==32?null:(E3=!0,x3);case"textInput":return i=e.data,i===x3&&E3?null:i;default:return null}}function DF(i,e){if(fm)return i==="compositionend"||!AC&&$R(i,e)?(i=JR(),f1=pC=Gh=null,fm=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ZR&&e.locale!=="ko"?null:e.data;default:return null}}var PF={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _3(i){var e=i&&i.nodeName&&i.nodeName.toLowerCase();return e==="input"?!!PF[i.type]:e==="textarea"}function tB(i,e,t,r){LR(r),e=k1(e,"onChange"),0<e.length&&(t=new mC("onChange","change",null,t,r),i.push({event:t,listeners:e}))}var HA=null,s0=null;function OF(i){dB(i,0)}function fx(i){var e=gm(i);if(MR(e))return i}function FF(i,e){if(i==="change")return e}var nB=!1;if(Xu){var c_;if(Xu){var u_="oninput"in document;if(!u_){var w3=document.createElement("div");w3.setAttribute("oninput","return;"),u_=typeof w3.oninput=="function"}c_=u_}else c_=!1;nB=c_&&(!document.documentMode||9<document.documentMode)}function C3(){HA&&(HA.detachEvent("onpropertychange",iB),s0=HA=null)}function iB(i){if(i.propertyName==="value"&&fx(s0)){var e=[];tB(e,s0,i,cC(i)),FR(OF,e)}}function NF(i,e,t){i==="focusin"?(C3(),HA=e,s0=t,HA.attachEvent("onpropertychange",iB)):i==="focusout"&&C3()}function kF(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return fx(s0)}function UF(i,e){if(i==="click")return fx(e)}function zF(i,e){if(i==="input"||i==="change")return fx(e)}function GF(i,e){return i===e&&(i!==0||1/i===1/e)||i!==i&&e!==e}var yc=typeof Object.is=="function"?Object.is:GF;function o0(i,e){if(yc(i,e))return!0;if(typeof i!="object"||i===null||typeof e!="object"||e===null)return!1;var t=Object.keys(i),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var o=t[r];if(!g2.call(e,o)||!yc(i[o],e[o]))return!1}return!0}function M3(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function b3(i,e){var t=M3(i);i=0;for(var r;t;){if(t.nodeType===3){if(r=i+t.textContent.length,i<=e&&r>=e)return{node:t,offset:e-i};i=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=M3(t)}}function rB(i,e){return i&&e?i===e?!0:i&&i.nodeType===3?!1:e&&e.nodeType===3?rB(i,e.parentNode):"contains"in i?i.contains(e):i.compareDocumentPosition?!!(i.compareDocumentPosition(e)&16):!1:!1}function sB(){for(var i=window,e=B1();e instanceof i.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)i=e.contentWindow;else break;e=B1(i.document)}return e}function vC(i){var e=i&&i.nodeName&&i.nodeName.toLowerCase();return e&&(e==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||e==="textarea"||i.contentEditable==="true")}function HF(i){var e=sB(),t=i.focusedElem,r=i.selectionRange;if(e!==t&&t&&t.ownerDocument&&rB(t.ownerDocument.documentElement,t)){if(r!==null&&vC(t)){if(e=r.start,i=r.end,i===void 0&&(i=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(i,t.value.length);else if(i=(e=t.ownerDocument||document)&&e.defaultView||window,i.getSelection){i=i.getSelection();var o=t.textContent.length,a=Math.min(r.start,o);r=r.end===void 0?a:Math.min(r.end,o),!i.extend&&a>r&&(o=r,r=a,a=o),o=b3(t,a);var l=b3(t,r);o&&l&&(i.rangeCount!==1||i.anchorNode!==o.node||i.anchorOffset!==o.offset||i.focusNode!==l.node||i.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(o.node,o.offset),i.removeAllRanges(),a>r?(i.addRange(e),i.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),i.addRange(e)))}}for(e=[],i=t;i=i.parentNode;)i.nodeType===1&&e.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)i=e[t],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var VF=Xu&&"documentMode"in document&&11>=document.documentMode,pm=null,O2=null,VA=null,F2=!1;function S3(i,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;F2||pm==null||pm!==B1(r)||(r=pm,"selectionStart"in r&&vC(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),VA&&o0(VA,r)||(VA=r,r=k1(O2,"onSelect"),0<r.length&&(e=new mC("onSelect","select",null,e,t),i.push({event:e,listeners:r}),e.target=pm)))}function dy(i,e){var t={};return t[i.toLowerCase()]=e.toLowerCase(),t["Webkit"+i]="webkit"+e,t["Moz"+i]="moz"+e,t}var mm={animationend:dy("Animation","AnimationEnd"),animationiteration:dy("Animation","AnimationIteration"),animationstart:dy("Animation","AnimationStart"),transitionend:dy("Transition","TransitionEnd")},h_={},oB={};Xu&&(oB=document.createElement("div").style,"AnimationEvent"in window||(delete mm.animationend.animation,delete mm.animationiteration.animation,delete mm.animationstart.animation),"TransitionEvent"in window||delete mm.transitionend.transition);function px(i){if(h_[i])return h_[i];if(!mm[i])return i;var e=mm[i],t;for(t in e)if(e.hasOwnProperty(t)&&t in oB)return h_[i]=e[t];return i}var aB=px("animationend"),lB=px("animationiteration"),cB=px("animationstart"),uB=px("transitionend"),hB=new Map,T3="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ad(i,e){hB.set(i,e),Kf(e,[i])}for(var d_=0;d_<T3.length;d_++){var f_=T3[d_],QF=f_.toLowerCase(),WF=f_[0].toUpperCase()+f_.slice(1);ad(QF,"on"+WF)}ad(aB,"onAnimationEnd");ad(lB,"onAnimationIteration");ad(cB,"onAnimationStart");ad("dblclick","onDoubleClick");ad("focusin","onFocus");ad("focusout","onBlur");ad(uB,"onTransitionEnd");Fm("onMouseEnter",["mouseout","mouseover"]);Fm("onMouseLeave",["mouseout","mouseover"]);Fm("onPointerEnter",["pointerout","pointerover"]);Fm("onPointerLeave",["pointerout","pointerover"]);Kf("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Kf("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Kf("onBeforeInput",["compositionend","keypress","textInput","paste"]);Kf("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Kf("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Kf("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var OA="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jF=new Set("cancel close invalid load scroll toggle".split(" ").concat(OA));function I3(i,e,t){var r=i.type||"unknown-event";i.currentTarget=t,Q6(r,e,void 0,i),i.currentTarget=null}function dB(i,e){e=(e&4)!==0;for(var t=0;t<i.length;t++){var r=i[t],o=r.event;r=r.listeners;e:{var a=void 0;if(e)for(var l=r.length-1;0<=l;l--){var d=r[l],c=d.instance,h=d.currentTarget;if(d=d.listener,c!==a&&o.isPropagationStopped())break e;I3(o,d,h),a=c}else for(l=0;l<r.length;l++){if(d=r[l],c=d.instance,h=d.currentTarget,d=d.listener,c!==a&&o.isPropagationStopped())break e;I3(o,d,h),a=c}}}if(D1)throw i=B2,D1=!1,B2=null,i}function as(i,e){var t=e[G2];t===void 0&&(t=e[G2]=new Set);var r=i+"__bubble";t.has(r)||(fB(e,i,2,!1),t.add(r))}function p_(i,e,t){var r=0;e&&(r|=4),fB(t,i,r,e)}var fy="_reactListening"+Math.random().toString(36).slice(2);function a0(i){if(!i[fy]){i[fy]=!0,xR.forEach(function(t){t!=="selectionchange"&&(jF.has(t)||p_(t,!1,i),p_(t,!0,i))});var e=i.nodeType===9?i:i.ownerDocument;e===null||e[fy]||(e[fy]=!0,p_("selectionchange",!1,e))}}function fB(i,e,t,r){switch(qR(e)){case 1:var o=oF;break;case 4:o=aF;break;default:o=fC}t=o.bind(null,e,t,i),o=void 0,!R2||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(o=!0),r?o!==void 0?i.addEventListener(e,t,{capture:!0,passive:o}):i.addEventListener(e,t,!0):o!==void 0?i.addEventListener(e,t,{passive:o}):i.addEventListener(e,t,!1)}function m_(i,e,t,r,o){var a=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var d=r.stateNode.containerInfo;if(d===o||d.nodeType===8&&d.parentNode===o)break;if(l===4)for(l=r.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===o||c.nodeType===8&&c.parentNode===o))return;l=l.return}for(;d!==null;){if(l=Ef(d),l===null)return;if(c=l.tag,c===5||c===6){r=a=l;continue e}d=d.parentNode}}r=r.return}FR(function(){var h=a,m=cC(t),p=[];e:{var A=hB.get(i);if(A!==void 0){var v=mC,y=i;switch(i){case"keypress":if(p1(t)===0)break e;case"keydown":case"keyup":v=_F;break;case"focusin":y="focus",v=l_;break;case"focusout":y="blur",v=l_;break;case"beforeblur":case"afterblur":v=l_;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=A3;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=uF;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=MF;break;case aB:case lB:case cB:v=fF;break;case uB:v=SF;break;case"scroll":v=lF;break;case"wheel":v=IF;break;case"copy":case"cut":case"paste":v=mF;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=y3}var x=(e&4)!==0,C=!x&&i==="scroll",g=x?A!==null?A+"Capture":null:A;x=[];for(var b=h,_;b!==null;){_=b;var S=_.stateNode;if(_.tag===5&&S!==null&&(_=S,g!==null&&(S=t0(b,g),S!=null&&x.push(l0(b,S,_)))),C)break;b=b.return}0<x.length&&(A=new v(A,y,null,t,m),p.push({event:A,listeners:x}))}}if(!(e&7)){e:{if(A=i==="mouseover"||i==="pointerover",v=i==="mouseout"||i==="pointerout",A&&t!==T2&&(y=t.relatedTarget||t.fromElement)&&(Ef(y)||y[Ku]))break e;if((v||A)&&(A=m.window===m?m:(A=m.ownerDocument)?A.defaultView||A.parentWindow:window,v?(y=t.relatedTarget||t.toElement,v=h,y=y?Ef(y):null,y!==null&&(C=Yf(y),y!==C||y.tag!==5&&y.tag!==6)&&(y=null)):(v=null,y=h),v!==y)){if(x=A3,S="onMouseLeave",g="onMouseEnter",b="mouse",(i==="pointerout"||i==="pointerover")&&(x=y3,S="onPointerLeave",g="onPointerEnter",b="pointer"),C=v==null?A:gm(v),_=y==null?A:gm(y),A=new x(S,b+"leave",v,t,m),A.target=C,A.relatedTarget=_,S=null,Ef(m)===h&&(x=new x(g,b+"enter",y,t,m),x.target=_,x.relatedTarget=C,S=x),C=S,v&&y)t:{for(x=v,g=y,b=0,_=x;_;_=kp(_))b++;for(_=0,S=g;S;S=kp(S))_++;for(;0<b-_;)x=kp(x),b--;for(;0<_-b;)g=kp(g),_--;for(;b--;){if(x===g||g!==null&&x===g.alternate)break t;x=kp(x),g=kp(g)}x=null}else x=null;v!==null&&R3(p,A,v,x,!1),y!==null&&C!==null&&R3(p,C,y,x,!0)}}e:{if(A=h?gm(h):window,v=A.nodeName&&A.nodeName.toLowerCase(),v==="select"||v==="input"&&A.type==="file")var R=FF;else if(_3(A))if(nB)R=zF;else{R=kF;var P=NF}else(v=A.nodeName)&&v.toLowerCase()==="input"&&(A.type==="checkbox"||A.type==="radio")&&(R=UF);if(R&&(R=R(i,h))){tB(p,R,t,m);break e}P&&P(i,A,h),i==="focusout"&&(P=A._wrapperState)&&P.controlled&&A.type==="number"&&w2(A,"number",A.value)}switch(P=h?gm(h):window,i){case"focusin":(_3(P)||P.contentEditable==="true")&&(pm=P,O2=h,VA=null);break;case"focusout":VA=O2=pm=null;break;case"mousedown":F2=!0;break;case"contextmenu":case"mouseup":case"dragend":F2=!1,S3(p,t,m);break;case"selectionchange":if(VF)break;case"keydown":case"keyup":S3(p,t,m)}var O;if(AC)e:{switch(i){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else fm?$R(i,t)&&(D="onCompositionEnd"):i==="keydown"&&t.keyCode===229&&(D="onCompositionStart");D&&(ZR&&t.locale!=="ko"&&(fm||D!=="onCompositionStart"?D==="onCompositionEnd"&&fm&&(O=JR()):(Gh=m,pC="value"in Gh?Gh.value:Gh.textContent,fm=!0)),P=k1(h,D),0<P.length&&(D=new v3(D,i,null,t,m),p.push({event:D,listeners:P}),O?D.data=O:(O=eB(t),O!==null&&(D.data=O)))),(O=BF?LF(i,t):DF(i,t))&&(h=k1(h,"onBeforeInput"),0<h.length&&(m=new v3("onBeforeInput","beforeinput",null,t,m),p.push({event:m,listeners:h}),m.data=O))}dB(p,e)})}function l0(i,e,t){return{instance:i,listener:e,currentTarget:t}}function k1(i,e){for(var t=e+"Capture",r=[];i!==null;){var o=i,a=o.stateNode;o.tag===5&&a!==null&&(o=a,a=t0(i,t),a!=null&&r.unshift(l0(i,a,o)),a=t0(i,e),a!=null&&r.push(l0(i,a,o))),i=i.return}return r}function kp(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function R3(i,e,t,r,o){for(var a=e._reactName,l=[];t!==null&&t!==r;){var d=t,c=d.alternate,h=d.stateNode;if(c!==null&&c===r)break;d.tag===5&&h!==null&&(d=h,o?(c=t0(t,a),c!=null&&l.unshift(l0(t,c,d))):o||(c=t0(t,a),c!=null&&l.push(l0(t,c,d)))),t=t.return}l.length!==0&&i.push({event:e,listeners:l})}var XF=/\r\n?/g,KF=/\u0000|\uFFFD/g;function B3(i){return(typeof i=="string"?i:""+i).replace(XF,`
`).replace(KF,"")}function py(i,e,t){if(e=B3(e),B3(i)!==e&&t)throw Error(mn(425))}function U1(){}var N2=null,k2=null;function U2(i,e){return i==="textarea"||i==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var z2=typeof setTimeout=="function"?setTimeout:void 0,YF=typeof clearTimeout=="function"?clearTimeout:void 0,L3=typeof Promise=="function"?Promise:void 0,qF=typeof queueMicrotask=="function"?queueMicrotask:typeof L3<"u"?function(i){return L3.resolve(null).then(i).catch(JF)}:z2;function JF(i){setTimeout(function(){throw i})}function g_(i,e){var t=e,r=0;do{var o=t.nextSibling;if(i.removeChild(t),o&&o.nodeType===8)if(t=o.data,t==="/$"){if(r===0){i.removeChild(o),r0(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=o}while(t);r0(e)}function Kh(i){for(;i!=null;i=i.nextSibling){var e=i.nodeType;if(e===1||e===3)break;if(e===8){if(e=i.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return i}function D3(i){i=i.previousSibling;for(var e=0;i;){if(i.nodeType===8){var t=i.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return i;e--}else t==="/$"&&e++}i=i.previousSibling}return null}var ig=Math.random().toString(36).slice(2),ru="__reactFiber$"+ig,c0="__reactProps$"+ig,Ku="__reactContainer$"+ig,G2="__reactEvents$"+ig,ZF="__reactListeners$"+ig,$F="__reactHandles$"+ig;function Ef(i){var e=i[ru];if(e)return e;for(var t=i.parentNode;t;){if(e=t[Ku]||t[ru]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(i=D3(i);i!==null;){if(t=i[ru])return t;i=D3(i)}return e}i=t,t=i.parentNode}return null}function L0(i){return i=i[ru]||i[Ku],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function gm(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(mn(33))}function mx(i){return i[c0]||null}var H2=[],Am=-1;function ld(i){return{current:i}}function us(i){0>Am||(i.current=H2[Am],H2[Am]=null,Am--)}function rs(i,e){Am++,H2[Am]=i.current,i.current=e}var td={},la=ld(td),ja=ld(!1),kf=td;function Nm(i,e){var t=i.type.contextTypes;if(!t)return td;var r=i.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var o={},a;for(a in t)o[a]=e[a];return r&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=e,i.__reactInternalMemoizedMaskedChildContext=o),o}function Xa(i){return i=i.childContextTypes,i!=null}function z1(){us(ja),us(la)}function P3(i,e,t){if(la.current!==td)throw Error(mn(168));rs(la,e),rs(ja,t)}function pB(i,e,t){var r=i.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var o in r)if(!(o in e))throw Error(mn(108,N6(i)||"Unknown",o));return bs({},t,r)}function G1(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||td,kf=la.current,rs(la,i),rs(ja,ja.current),!0}function O3(i,e,t){var r=i.stateNode;if(!r)throw Error(mn(169));t?(i=pB(i,e,kf),r.__reactInternalMemoizedMergedChildContext=i,us(ja),us(la),rs(la,i)):us(ja),rs(ja,t)}var ku=null,gx=!1,A_=!1;function mB(i){ku===null?ku=[i]:ku.push(i)}function eN(i){gx=!0,mB(i)}function cd(){if(!A_&&ku!==null){A_=!0;var i=0,e=Yr;try{var t=ku;for(Yr=1;i<t.length;i++){var r=t[i];do r=r(!0);while(r!==null)}ku=null,gx=!1}catch(o){throw ku!==null&&(ku=ku.slice(i+1)),zR(uC,cd),o}finally{Yr=e,A_=!1}}return null}var vm=[],ym=0,H1=null,V1=0,Dl=[],Pl=0,Uf=null,Gu=1,Hu="";function pf(i,e){vm[ym++]=V1,vm[ym++]=H1,H1=i,V1=e}function gB(i,e,t){Dl[Pl++]=Gu,Dl[Pl++]=Hu,Dl[Pl++]=Uf,Uf=i;var r=Gu;i=Hu;var o=32-gc(r)-1;r&=~(1<<o),t+=1;var a=32-gc(e)+o;if(30<a){var l=o-o%5;a=(r&(1<<l)-1).toString(32),r>>=l,o-=l,Gu=1<<32-gc(e)+o|t<<o|r,Hu=a+i}else Gu=1<<a|t<<o|r,Hu=i}function yC(i){i.return!==null&&(pf(i,1),gB(i,1,0))}function xC(i){for(;i===H1;)H1=vm[--ym],vm[ym]=null,V1=vm[--ym],vm[ym]=null;for(;i===Uf;)Uf=Dl[--Pl],Dl[Pl]=null,Hu=Dl[--Pl],Dl[Pl]=null,Gu=Dl[--Pl],Dl[Pl]=null}var pl=null,hl=null,gs=!1,hc=null;function AB(i,e){var t=Ol(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=i,e=i.deletions,e===null?(i.deletions=[t],i.flags|=16):e.push(t)}function F3(i,e){switch(i.tag){case 5:var t=i.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(i.stateNode=e,pl=i,hl=Kh(e.firstChild),!0):!1;case 6:return e=i.pendingProps===""||e.nodeType!==3?null:e,e!==null?(i.stateNode=e,pl=i,hl=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Uf!==null?{id:Gu,overflow:Hu}:null,i.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Ol(18,null,null,0),t.stateNode=e,t.return=i,i.child=t,pl=i,hl=null,!0):!1;default:return!1}}function V2(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Q2(i){if(gs){var e=hl;if(e){var t=e;if(!F3(i,e)){if(V2(i))throw Error(mn(418));e=Kh(t.nextSibling);var r=pl;e&&F3(i,e)?AB(r,t):(i.flags=i.flags&-4097|2,gs=!1,pl=i)}}else{if(V2(i))throw Error(mn(418));i.flags=i.flags&-4097|2,gs=!1,pl=i}}}function N3(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;pl=i}function my(i){if(i!==pl)return!1;if(!gs)return N3(i),gs=!0,!1;var e;if((e=i.tag!==3)&&!(e=i.tag!==5)&&(e=i.type,e=e!=="head"&&e!=="body"&&!U2(i.type,i.memoizedProps)),e&&(e=hl)){if(V2(i))throw vB(),Error(mn(418));for(;e;)AB(i,e),e=Kh(e.nextSibling)}if(N3(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(mn(317));e:{for(i=i.nextSibling,e=0;i;){if(i.nodeType===8){var t=i.data;if(t==="/$"){if(e===0){hl=Kh(i.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}i=i.nextSibling}hl=null}}else hl=pl?Kh(i.stateNode.nextSibling):null;return!0}function vB(){for(var i=hl;i;)i=Kh(i.nextSibling)}function km(){hl=pl=null,gs=!1}function EC(i){hc===null?hc=[i]:hc.push(i)}var tN=eh.ReactCurrentBatchConfig;function lc(i,e){if(i&&i.defaultProps){e=bs({},e),i=i.defaultProps;for(var t in i)e[t]===void 0&&(e[t]=i[t]);return e}return e}var Q1=ld(null),W1=null,xm=null,_C=null;function wC(){_C=xm=W1=null}function CC(i){var e=Q1.current;us(Q1),i._currentValue=e}function W2(i,e,t){for(;i!==null;){var r=i.alternate;if((i.childLanes&e)!==e?(i.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),i===t)break;i=i.return}}function Rm(i,e){W1=i,_C=xm=null,i=i.dependencies,i!==null&&i.firstContext!==null&&(i.lanes&e&&(Wa=!0),i.firstContext=null)}function Nl(i){var e=i._currentValue;if(_C!==i)if(i={context:i,memoizedValue:e,next:null},xm===null){if(W1===null)throw Error(mn(308));xm=i,W1.dependencies={lanes:0,firstContext:i}}else xm=xm.next=i;return e}var _f=null;function MC(i){_f===null?_f=[i]:_f.push(i)}function yB(i,e,t,r){var o=e.interleaved;return o===null?(t.next=t,MC(e)):(t.next=o.next,o.next=t),e.interleaved=t,Yu(i,r)}function Yu(i,e){i.lanes|=e;var t=i.alternate;for(t!==null&&(t.lanes|=e),t=i,i=i.return;i!==null;)i.childLanes|=e,t=i.alternate,t!==null&&(t.childLanes|=e),t=i,i=i.return;return t.tag===3?t.stateNode:null}var Fh=!1;function bC(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xB(i,e){i=i.updateQueue,e.updateQueue===i&&(e.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function Qu(i,e){return{eventTime:i,lane:e,tag:0,payload:null,callback:null,next:null}}function Yh(i,e,t){var r=i.updateQueue;if(r===null)return null;if(r=r.shared,Pr&2){var o=r.pending;return o===null?e.next=e:(e.next=o.next,o.next=e),r.pending=e,Yu(i,t)}return o=r.interleaved,o===null?(e.next=e,MC(r)):(e.next=o.next,o.next=e),r.interleaved=e,Yu(i,t)}function m1(i,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=i.pendingLanes,t|=r,e.lanes=t,hC(i,t)}}function k3(i,e){var t=i.updateQueue,r=i.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var o=null,a=null;if(t=t.firstBaseUpdate,t!==null){do{var l={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};a===null?o=a=l:a=a.next=l,t=t.next}while(t!==null);a===null?o=a=e:a=a.next=e}else o=a=e;t={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:a,shared:r.shared,effects:r.effects},i.updateQueue=t;return}i=t.lastBaseUpdate,i===null?t.firstBaseUpdate=e:i.next=e,t.lastBaseUpdate=e}function j1(i,e,t,r){var o=i.updateQueue;Fh=!1;var a=o.firstBaseUpdate,l=o.lastBaseUpdate,d=o.shared.pending;if(d!==null){o.shared.pending=null;var c=d,h=c.next;c.next=null,l===null?a=h:l.next=h,l=c;var m=i.alternate;m!==null&&(m=m.updateQueue,d=m.lastBaseUpdate,d!==l&&(d===null?m.firstBaseUpdate=h:d.next=h,m.lastBaseUpdate=c))}if(a!==null){var p=o.baseState;l=0,m=h=c=null,d=a;do{var A=d.lane,v=d.eventTime;if((r&A)===A){m!==null&&(m=m.next={eventTime:v,lane:0,tag:d.tag,payload:d.payload,callback:d.callback,next:null});e:{var y=i,x=d;switch(A=e,v=t,x.tag){case 1:if(y=x.payload,typeof y=="function"){p=y.call(v,p,A);break e}p=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=x.payload,A=typeof y=="function"?y.call(v,p,A):y,A==null)break e;p=bs({},p,A);break e;case 2:Fh=!0}}d.callback!==null&&d.lane!==0&&(i.flags|=64,A=o.effects,A===null?o.effects=[d]:A.push(d))}else v={eventTime:v,lane:A,tag:d.tag,payload:d.payload,callback:d.callback,next:null},m===null?(h=m=v,c=p):m=m.next=v,l|=A;if(d=d.next,d===null){if(d=o.shared.pending,d===null)break;A=d,d=A.next,A.next=null,o.lastBaseUpdate=A,o.shared.pending=null}}while(1);if(m===null&&(c=p),o.baseState=c,o.firstBaseUpdate=h,o.lastBaseUpdate=m,e=o.shared.interleaved,e!==null){o=e;do l|=o.lane,o=o.next;while(o!==e)}else a===null&&(o.shared.lanes=0);Gf|=l,i.lanes=l,i.memoizedState=p}}function U3(i,e,t){if(i=e.effects,e.effects=null,i!==null)for(e=0;e<i.length;e++){var r=i[e],o=r.callback;if(o!==null){if(r.callback=null,r=t,typeof o!="function")throw Error(mn(191,o));o.call(r)}}}var EB=new yR.Component().refs;function j2(i,e,t,r){e=i.memoizedState,t=t(r,e),t=t==null?e:bs({},e,t),i.memoizedState=t,i.lanes===0&&(i.updateQueue.baseState=t)}var Ax={isMounted:function(i){return(i=i._reactInternals)?Yf(i)===i:!1},enqueueSetState:function(i,e,t){i=i._reactInternals;var r=xa(),o=Jh(i),a=Qu(r,o);a.payload=e,t!=null&&(a.callback=t),e=Yh(i,a,o),e!==null&&(Ac(e,i,o,r),m1(e,i,o))},enqueueReplaceState:function(i,e,t){i=i._reactInternals;var r=xa(),o=Jh(i),a=Qu(r,o);a.tag=1,a.payload=e,t!=null&&(a.callback=t),e=Yh(i,a,o),e!==null&&(Ac(e,i,o,r),m1(e,i,o))},enqueueForceUpdate:function(i,e){i=i._reactInternals;var t=xa(),r=Jh(i),o=Qu(t,r);o.tag=2,e!=null&&(o.callback=e),e=Yh(i,o,r),e!==null&&(Ac(e,i,r,t),m1(e,i,r))}};function z3(i,e,t,r,o,a,l){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(r,a,l):e.prototype&&e.prototype.isPureReactComponent?!o0(t,r)||!o0(o,a):!0}function _B(i,e,t){var r=!1,o=td,a=e.contextType;return typeof a=="object"&&a!==null?a=Nl(a):(o=Xa(e)?kf:la.current,r=e.contextTypes,a=(r=r!=null)?Nm(i,o):td),e=new e(t,a),i.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ax,i.stateNode=e,e._reactInternals=i,r&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=a),e}function G3(i,e,t,r){i=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==i&&Ax.enqueueReplaceState(e,e.state,null)}function X2(i,e,t,r){var o=i.stateNode;o.props=t,o.state=i.memoizedState,o.refs=EB,bC(i);var a=e.contextType;typeof a=="object"&&a!==null?o.context=Nl(a):(a=Xa(e)?kf:la.current,o.context=Nm(i,a)),o.state=i.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(j2(i,e,a,t),o.state=i.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(e=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),e!==o.state&&Ax.enqueueReplaceState(o,o.state,null),j1(i,t,o,r),o.state=i.memoizedState),typeof o.componentDidMount=="function"&&(i.flags|=4194308)}function fA(i,e,t){if(i=t.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(mn(309));var r=t.stateNode}if(!r)throw Error(mn(147,i));var o=r,a=""+i;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(l){var d=o.refs;d===EB&&(d=o.refs={}),l===null?delete d[a]:d[a]=l},e._stringRef=a,e)}if(typeof i!="string")throw Error(mn(284));if(!t._owner)throw Error(mn(290,i))}return i}function gy(i,e){throw i=Object.prototype.toString.call(e),Error(mn(31,i==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":i))}function H3(i){var e=i._init;return e(i._payload)}function wB(i){function e(g,b){if(i){var _=g.deletions;_===null?(g.deletions=[b],g.flags|=16):_.push(b)}}function t(g,b){if(!i)return null;for(;b!==null;)e(g,b),b=b.sibling;return null}function r(g,b){for(g=new Map;b!==null;)b.key!==null?g.set(b.key,b):g.set(b.index,b),b=b.sibling;return g}function o(g,b){return g=Zh(g,b),g.index=0,g.sibling=null,g}function a(g,b,_){return g.index=_,i?(_=g.alternate,_!==null?(_=_.index,_<b?(g.flags|=2,b):_):(g.flags|=2,b)):(g.flags|=1048576,b)}function l(g){return i&&g.alternate===null&&(g.flags|=2),g}function d(g,b,_,S){return b===null||b.tag!==6?(b=C_(_,g.mode,S),b.return=g,b):(b=o(b,_),b.return=g,b)}function c(g,b,_,S){var R=_.type;return R===dm?m(g,b,_.props.children,S,_.key):b!==null&&(b.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===Oh&&H3(R)===b.type)?(S=o(b,_.props),S.ref=fA(g,b,_),S.return=g,S):(S=E1(_.type,_.key,_.props,null,g.mode,S),S.ref=fA(g,b,_),S.return=g,S)}function h(g,b,_,S){return b===null||b.tag!==4||b.stateNode.containerInfo!==_.containerInfo||b.stateNode.implementation!==_.implementation?(b=M_(_,g.mode,S),b.return=g,b):(b=o(b,_.children||[]),b.return=g,b)}function m(g,b,_,S,R){return b===null||b.tag!==7?(b=Bf(_,g.mode,S,R),b.return=g,b):(b=o(b,_),b.return=g,b)}function p(g,b,_){if(typeof b=="string"&&b!==""||typeof b=="number")return b=C_(""+b,g.mode,_),b.return=g,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case sy:return _=E1(b.type,b.key,b.props,null,g.mode,_),_.ref=fA(g,null,b),_.return=g,_;case hm:return b=M_(b,g.mode,_),b.return=g,b;case Oh:var S=b._init;return p(g,S(b._payload),_)}if(DA(b)||lA(b))return b=Bf(b,g.mode,_,null),b.return=g,b;gy(g,b)}return null}function A(g,b,_,S){var R=b!==null?b.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return R!==null?null:d(g,b,""+_,S);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case sy:return _.key===R?c(g,b,_,S):null;case hm:return _.key===R?h(g,b,_,S):null;case Oh:return R=_._init,A(g,b,R(_._payload),S)}if(DA(_)||lA(_))return R!==null?null:m(g,b,_,S,null);gy(g,_)}return null}function v(g,b,_,S,R){if(typeof S=="string"&&S!==""||typeof S=="number")return g=g.get(_)||null,d(b,g,""+S,R);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case sy:return g=g.get(S.key===null?_:S.key)||null,c(b,g,S,R);case hm:return g=g.get(S.key===null?_:S.key)||null,h(b,g,S,R);case Oh:var P=S._init;return v(g,b,_,P(S._payload),R)}if(DA(S)||lA(S))return g=g.get(_)||null,m(b,g,S,R,null);gy(b,S)}return null}function y(g,b,_,S){for(var R=null,P=null,O=b,D=b=0,L=null;O!==null&&D<_.length;D++){O.index>D?(L=O,O=null):L=O.sibling;var N=A(g,O,_[D],S);if(N===null){O===null&&(O=L);break}i&&O&&N.alternate===null&&e(g,O),b=a(N,b,D),P===null?R=N:P.sibling=N,P=N,O=L}if(D===_.length)return t(g,O),gs&&pf(g,D),R;if(O===null){for(;D<_.length;D++)O=p(g,_[D],S),O!==null&&(b=a(O,b,D),P===null?R=O:P.sibling=O,P=O);return gs&&pf(g,D),R}for(O=r(g,O);D<_.length;D++)L=v(O,g,D,_[D],S),L!==null&&(i&&L.alternate!==null&&O.delete(L.key===null?D:L.key),b=a(L,b,D),P===null?R=L:P.sibling=L,P=L);return i&&O.forEach(function(H){return e(g,H)}),gs&&pf(g,D),R}function x(g,b,_,S){var R=lA(_);if(typeof R!="function")throw Error(mn(150));if(_=R.call(_),_==null)throw Error(mn(151));for(var P=R=null,O=b,D=b=0,L=null,N=_.next();O!==null&&!N.done;D++,N=_.next()){O.index>D?(L=O,O=null):L=O.sibling;var H=A(g,O,N.value,S);if(H===null){O===null&&(O=L);break}i&&O&&H.alternate===null&&e(g,O),b=a(H,b,D),P===null?R=H:P.sibling=H,P=H,O=L}if(N.done)return t(g,O),gs&&pf(g,D),R;if(O===null){for(;!N.done;D++,N=_.next())N=p(g,N.value,S),N!==null&&(b=a(N,b,D),P===null?R=N:P.sibling=N,P=N);return gs&&pf(g,D),R}for(O=r(g,O);!N.done;D++,N=_.next())N=v(O,g,D,N.value,S),N!==null&&(i&&N.alternate!==null&&O.delete(N.key===null?D:N.key),b=a(N,b,D),P===null?R=N:P.sibling=N,P=N);return i&&O.forEach(function(J){return e(g,J)}),gs&&pf(g,D),R}function C(g,b,_,S){if(typeof _=="object"&&_!==null&&_.type===dm&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case sy:e:{for(var R=_.key,P=b;P!==null;){if(P.key===R){if(R=_.type,R===dm){if(P.tag===7){t(g,P.sibling),b=o(P,_.props.children),b.return=g,g=b;break e}}else if(P.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===Oh&&H3(R)===P.type){t(g,P.sibling),b=o(P,_.props),b.ref=fA(g,P,_),b.return=g,g=b;break e}t(g,P);break}else e(g,P);P=P.sibling}_.type===dm?(b=Bf(_.props.children,g.mode,S,_.key),b.return=g,g=b):(S=E1(_.type,_.key,_.props,null,g.mode,S),S.ref=fA(g,b,_),S.return=g,g=S)}return l(g);case hm:e:{for(P=_.key;b!==null;){if(b.key===P)if(b.tag===4&&b.stateNode.containerInfo===_.containerInfo&&b.stateNode.implementation===_.implementation){t(g,b.sibling),b=o(b,_.children||[]),b.return=g,g=b;break e}else{t(g,b);break}else e(g,b);b=b.sibling}b=M_(_,g.mode,S),b.return=g,g=b}return l(g);case Oh:return P=_._init,C(g,b,P(_._payload),S)}if(DA(_))return y(g,b,_,S);if(lA(_))return x(g,b,_,S);gy(g,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,b!==null&&b.tag===6?(t(g,b.sibling),b=o(b,_),b.return=g,g=b):(t(g,b),b=C_(_,g.mode,S),b.return=g,g=b),l(g)):t(g,b)}return C}var Um=wB(!0),CB=wB(!1),D0={},au=ld(D0),u0=ld(D0),h0=ld(D0);function wf(i){if(i===D0)throw Error(mn(174));return i}function SC(i,e){switch(rs(h0,e),rs(u0,i),rs(au,D0),i=e.nodeType,i){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:M2(null,"");break;default:i=i===8?e.parentNode:e,e=i.namespaceURI||null,i=i.tagName,e=M2(e,i)}us(au),rs(au,e)}function zm(){us(au),us(u0),us(h0)}function MB(i){wf(h0.current);var e=wf(au.current),t=M2(e,i.type);e!==t&&(rs(u0,i),rs(au,t))}function TC(i){u0.current===i&&(us(au),us(u0))}var _s=ld(0);function X1(i){for(var e=i;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break;for(;e.sibling===null;){if(e.return===null||e.return===i)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var v_=[];function IC(){for(var i=0;i<v_.length;i++)v_[i]._workInProgressVersionPrimary=null;v_.length=0}var g1=eh.ReactCurrentDispatcher,y_=eh.ReactCurrentBatchConfig,zf=0,Ms=null,go=null,Lo=null,K1=!1,QA=!1,d0=0,nN=0;function ia(){throw Error(mn(321))}function RC(i,e){if(e===null)return!1;for(var t=0;t<e.length&&t<i.length;t++)if(!yc(i[t],e[t]))return!1;return!0}function BC(i,e,t,r,o,a){if(zf=a,Ms=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,g1.current=i===null||i.memoizedState===null?oN:aN,i=t(r,o),QA){a=0;do{if(QA=!1,d0=0,25<=a)throw Error(mn(301));a+=1,Lo=go=null,e.updateQueue=null,g1.current=lN,i=t(r,o)}while(QA)}if(g1.current=Y1,e=go!==null&&go.next!==null,zf=0,Lo=go=Ms=null,K1=!1,e)throw Error(mn(300));return i}function LC(){var i=d0!==0;return d0=0,i}function iu(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Lo===null?Ms.memoizedState=Lo=i:Lo=Lo.next=i,Lo}function kl(){if(go===null){var i=Ms.alternate;i=i!==null?i.memoizedState:null}else i=go.next;var e=Lo===null?Ms.memoizedState:Lo.next;if(e!==null)Lo=e,go=i;else{if(i===null)throw Error(mn(310));go=i,i={memoizedState:go.memoizedState,baseState:go.baseState,baseQueue:go.baseQueue,queue:go.queue,next:null},Lo===null?Ms.memoizedState=Lo=i:Lo=Lo.next=i}return Lo}function f0(i,e){return typeof e=="function"?e(i):e}function x_(i){var e=kl(),t=e.queue;if(t===null)throw Error(mn(311));t.lastRenderedReducer=i;var r=go,o=r.baseQueue,a=t.pending;if(a!==null){if(o!==null){var l=o.next;o.next=a.next,a.next=l}r.baseQueue=o=a,t.pending=null}if(o!==null){a=o.next,r=r.baseState;var d=l=null,c=null,h=a;do{var m=h.lane;if((zf&m)===m)c!==null&&(c=c.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:i(r,h.action);else{var p={lane:m,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};c===null?(d=c=p,l=r):c=c.next=p,Ms.lanes|=m,Gf|=m}h=h.next}while(h!==null&&h!==a);c===null?l=r:c.next=d,yc(r,e.memoizedState)||(Wa=!0),e.memoizedState=r,e.baseState=l,e.baseQueue=c,t.lastRenderedState=r}if(i=t.interleaved,i!==null){o=i;do a=o.lane,Ms.lanes|=a,Gf|=a,o=o.next;while(o!==i)}else o===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function E_(i){var e=kl(),t=e.queue;if(t===null)throw Error(mn(311));t.lastRenderedReducer=i;var r=t.dispatch,o=t.pending,a=e.memoizedState;if(o!==null){t.pending=null;var l=o=o.next;do a=i(a,l.action),l=l.next;while(l!==o);yc(a,e.memoizedState)||(Wa=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),t.lastRenderedState=a}return[a,r]}function bB(){}function SB(i,e){var t=Ms,r=kl(),o=e(),a=!yc(r.memoizedState,o);if(a&&(r.memoizedState=o,Wa=!0),r=r.queue,DC(RB.bind(null,t,r,i),[i]),r.getSnapshot!==e||a||Lo!==null&&Lo.memoizedState.tag&1){if(t.flags|=2048,p0(9,IB.bind(null,t,r,o,e),void 0,null),Po===null)throw Error(mn(349));zf&30||TB(t,e,o)}return o}function TB(i,e,t){i.flags|=16384,i={getSnapshot:e,value:t},e=Ms.updateQueue,e===null?(e={lastEffect:null,stores:null},Ms.updateQueue=e,e.stores=[i]):(t=e.stores,t===null?e.stores=[i]:t.push(i))}function IB(i,e,t,r){e.value=t,e.getSnapshot=r,BB(e)&&LB(i)}function RB(i,e,t){return t(function(){BB(e)&&LB(i)})}function BB(i){var e=i.getSnapshot;i=i.value;try{var t=e();return!yc(i,t)}catch{return!0}}function LB(i){var e=Yu(i,1);e!==null&&Ac(e,i,1,-1)}function V3(i){var e=iu();return typeof i=="function"&&(i=i()),e.memoizedState=e.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:f0,lastRenderedState:i},e.queue=i,i=i.dispatch=sN.bind(null,Ms,i),[e.memoizedState,i]}function p0(i,e,t,r){return i={tag:i,create:e,destroy:t,deps:r,next:null},e=Ms.updateQueue,e===null?(e={lastEffect:null,stores:null},Ms.updateQueue=e,e.lastEffect=i.next=i):(t=e.lastEffect,t===null?e.lastEffect=i.next=i:(r=t.next,t.next=i,i.next=r,e.lastEffect=i)),i}function DB(){return kl().memoizedState}function A1(i,e,t,r){var o=iu();Ms.flags|=i,o.memoizedState=p0(1|e,t,void 0,r===void 0?null:r)}function vx(i,e,t,r){var o=kl();r=r===void 0?null:r;var a=void 0;if(go!==null){var l=go.memoizedState;if(a=l.destroy,r!==null&&RC(r,l.deps)){o.memoizedState=p0(e,t,a,r);return}}Ms.flags|=i,o.memoizedState=p0(1|e,t,a,r)}function Q3(i,e){return A1(8390656,8,i,e)}function DC(i,e){return vx(2048,8,i,e)}function PB(i,e){return vx(4,2,i,e)}function OB(i,e){return vx(4,4,i,e)}function FB(i,e){if(typeof e=="function")return i=i(),e(i),function(){e(null)};if(e!=null)return i=i(),e.current=i,function(){e.current=null}}function NB(i,e,t){return t=t!=null?t.concat([i]):null,vx(4,4,FB.bind(null,e,i),t)}function PC(){}function kB(i,e){var t=kl();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&RC(e,r[1])?r[0]:(t.memoizedState=[i,e],i)}function UB(i,e){var t=kl();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&RC(e,r[1])?r[0]:(i=i(),t.memoizedState=[i,e],i)}function zB(i,e,t){return zf&21?(yc(t,e)||(t=VR(),Ms.lanes|=t,Gf|=t,i.baseState=!0),e):(i.baseState&&(i.baseState=!1,Wa=!0),i.memoizedState=t)}function iN(i,e){var t=Yr;Yr=t!==0&&4>t?t:4,i(!0);var r=y_.transition;y_.transition={};try{i(!1),e()}finally{Yr=t,y_.transition=r}}function GB(){return kl().memoizedState}function rN(i,e,t){var r=Jh(i);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},HB(i))VB(e,t);else if(t=yB(i,e,t,r),t!==null){var o=xa();Ac(t,i,r,o),QB(t,e,r)}}function sN(i,e,t){var r=Jh(i),o={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(HB(i))VB(e,o);else{var a=i.alternate;if(i.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var l=e.lastRenderedState,d=a(l,t);if(o.hasEagerState=!0,o.eagerState=d,yc(d,l)){var c=e.interleaved;c===null?(o.next=o,MC(e)):(o.next=c.next,c.next=o),e.interleaved=o;return}}catch{}finally{}t=yB(i,e,o,r),t!==null&&(o=xa(),Ac(t,i,r,o),QB(t,e,r))}}function HB(i){var e=i.alternate;return i===Ms||e!==null&&e===Ms}function VB(i,e){QA=K1=!0;var t=i.pending;t===null?e.next=e:(e.next=t.next,t.next=e),i.pending=e}function QB(i,e,t){if(t&4194240){var r=e.lanes;r&=i.pendingLanes,t|=r,e.lanes=t,hC(i,t)}}var Y1={readContext:Nl,useCallback:ia,useContext:ia,useEffect:ia,useImperativeHandle:ia,useInsertionEffect:ia,useLayoutEffect:ia,useMemo:ia,useReducer:ia,useRef:ia,useState:ia,useDebugValue:ia,useDeferredValue:ia,useTransition:ia,useMutableSource:ia,useSyncExternalStore:ia,useId:ia,unstable_isNewReconciler:!1},oN={readContext:Nl,useCallback:function(i,e){return iu().memoizedState=[i,e===void 0?null:e],i},useContext:Nl,useEffect:Q3,useImperativeHandle:function(i,e,t){return t=t!=null?t.concat([i]):null,A1(4194308,4,FB.bind(null,e,i),t)},useLayoutEffect:function(i,e){return A1(4194308,4,i,e)},useInsertionEffect:function(i,e){return A1(4,2,i,e)},useMemo:function(i,e){var t=iu();return e=e===void 0?null:e,i=i(),t.memoizedState=[i,e],i},useReducer:function(i,e,t){var r=iu();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:e},r.queue=i,i=i.dispatch=rN.bind(null,Ms,i),[r.memoizedState,i]},useRef:function(i){var e=iu();return i={current:i},e.memoizedState=i},useState:V3,useDebugValue:PC,useDeferredValue:function(i){return iu().memoizedState=i},useTransition:function(){var i=V3(!1),e=i[0];return i=iN.bind(null,i[1]),iu().memoizedState=i,[e,i]},useMutableSource:function(){},useSyncExternalStore:function(i,e,t){var r=Ms,o=iu();if(gs){if(t===void 0)throw Error(mn(407));t=t()}else{if(t=e(),Po===null)throw Error(mn(349));zf&30||TB(r,e,t)}o.memoizedState=t;var a={value:t,getSnapshot:e};return o.queue=a,Q3(RB.bind(null,r,a,i),[i]),r.flags|=2048,p0(9,IB.bind(null,r,a,t,e),void 0,null),t},useId:function(){var i=iu(),e=Po.identifierPrefix;if(gs){var t=Hu,r=Gu;t=(r&~(1<<32-gc(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=d0++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=nN++,e=":"+e+"r"+t.toString(32)+":";return i.memoizedState=e},unstable_isNewReconciler:!1},aN={readContext:Nl,useCallback:kB,useContext:Nl,useEffect:DC,useImperativeHandle:NB,useInsertionEffect:PB,useLayoutEffect:OB,useMemo:UB,useReducer:x_,useRef:DB,useState:function(){return x_(f0)},useDebugValue:PC,useDeferredValue:function(i){var e=kl();return zB(e,go.memoizedState,i)},useTransition:function(){var i=x_(f0)[0],e=kl().memoizedState;return[i,e]},useMutableSource:bB,useSyncExternalStore:SB,useId:GB,unstable_isNewReconciler:!1},lN={readContext:Nl,useCallback:kB,useContext:Nl,useEffect:DC,useImperativeHandle:NB,useInsertionEffect:PB,useLayoutEffect:OB,useMemo:UB,useReducer:E_,useRef:DB,useState:function(){return E_(f0)},useDebugValue:PC,useDeferredValue:function(i){var e=kl();return go===null?e.memoizedState=i:zB(e,go.memoizedState,i)},useTransition:function(){var i=E_(f0)[0],e=kl().memoizedState;return[i,e]},useMutableSource:bB,useSyncExternalStore:SB,useId:GB,unstable_isNewReconciler:!1};function Gm(i,e){try{var t="",r=e;do t+=F6(r),r=r.return;while(r);var o=t}catch(a){o=`
Error generating stack: `+a.message+`
`+a.stack}return{value:i,source:e,stack:o,digest:null}}function __(i,e,t){return{value:i,source:null,stack:t??null,digest:e??null}}function K2(i,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var cN=typeof WeakMap=="function"?WeakMap:Map;function WB(i,e,t){t=Qu(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){J1||(J1=!0,rw=r),K2(i,e)},t}function jB(i,e,t){t=Qu(-1,t),t.tag=3;var r=i.type.getDerivedStateFromError;if(typeof r=="function"){var o=e.value;t.payload=function(){return r(o)},t.callback=function(){K2(i,e)}}var a=i.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(t.callback=function(){K2(i,e),typeof r!="function"&&(qh===null?qh=new Set([this]):qh.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),t}function W3(i,e,t){var r=i.pingCache;if(r===null){r=i.pingCache=new cN;var o=new Set;r.set(e,o)}else o=r.get(e),o===void 0&&(o=new Set,r.set(e,o));o.has(t)||(o.add(t),i=wN.bind(null,i,e,t),e.then(i,i))}function j3(i){do{var e;if((e=i.tag===13)&&(e=i.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return i;i=i.return}while(i!==null);return null}function X3(i,e,t,r,o){return i.mode&1?(i.flags|=65536,i.lanes=o,i):(i===e?i.flags|=65536:(i.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Qu(-1,1),e.tag=2,Yh(t,e,1))),t.lanes|=1),i)}var uN=eh.ReactCurrentOwner,Wa=!1;function ya(i,e,t,r){e.child=i===null?CB(e,null,t,r):Um(e,i.child,t,r)}function K3(i,e,t,r,o){t=t.render;var a=e.ref;return Rm(e,o),r=BC(i,e,t,r,a,o),t=LC(),i!==null&&!Wa?(e.updateQueue=i.updateQueue,e.flags&=-2053,i.lanes&=~o,qu(i,e,o)):(gs&&t&&yC(e),e.flags|=1,ya(i,e,r,o),e.child)}function Y3(i,e,t,r,o){if(i===null){var a=t.type;return typeof a=="function"&&!HC(a)&&a.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=a,XB(i,e,a,r,o)):(i=E1(t.type,null,r,e,e.mode,o),i.ref=e.ref,i.return=e,e.child=i)}if(a=i.child,!(i.lanes&o)){var l=a.memoizedProps;if(t=t.compare,t=t!==null?t:o0,t(l,r)&&i.ref===e.ref)return qu(i,e,o)}return e.flags|=1,i=Zh(a,r),i.ref=e.ref,i.return=e,e.child=i}function XB(i,e,t,r,o){if(i!==null){var a=i.memoizedProps;if(o0(a,r)&&i.ref===e.ref)if(Wa=!1,e.pendingProps=r=a,(i.lanes&o)!==0)i.flags&131072&&(Wa=!0);else return e.lanes=i.lanes,qu(i,e,o)}return Y2(i,e,t,r,o)}function KB(i,e,t){var r=e.pendingProps,o=r.children,a=i!==null?i.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},rs(_m,ll),ll|=t;else{if(!(t&1073741824))return i=a!==null?a.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:i,cachePool:null,transitions:null},e.updateQueue=null,rs(_m,ll),ll|=i,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:t,rs(_m,ll),ll|=r}else a!==null?(r=a.baseLanes|t,e.memoizedState=null):r=t,rs(_m,ll),ll|=r;return ya(i,e,o,t),e.child}function YB(i,e){var t=e.ref;(i===null&&t!==null||i!==null&&i.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function Y2(i,e,t,r,o){var a=Xa(t)?kf:la.current;return a=Nm(e,a),Rm(e,o),t=BC(i,e,t,r,a,o),r=LC(),i!==null&&!Wa?(e.updateQueue=i.updateQueue,e.flags&=-2053,i.lanes&=~o,qu(i,e,o)):(gs&&r&&yC(e),e.flags|=1,ya(i,e,t,o),e.child)}function q3(i,e,t,r,o){if(Xa(t)){var a=!0;G1(e)}else a=!1;if(Rm(e,o),e.stateNode===null)v1(i,e),_B(e,t,r),X2(e,t,r,o),r=!0;else if(i===null){var l=e.stateNode,d=e.memoizedProps;l.props=d;var c=l.context,h=t.contextType;typeof h=="object"&&h!==null?h=Nl(h):(h=Xa(t)?kf:la.current,h=Nm(e,h));var m=t.getDerivedStateFromProps,p=typeof m=="function"||typeof l.getSnapshotBeforeUpdate=="function";p||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(d!==r||c!==h)&&G3(e,l,r,h),Fh=!1;var A=e.memoizedState;l.state=A,j1(e,r,l,o),c=e.memoizedState,d!==r||A!==c||ja.current||Fh?(typeof m=="function"&&(j2(e,t,m,r),c=e.memoizedState),(d=Fh||z3(e,t,d,r,A,c,h))?(p||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),l.props=r,l.state=c,l.context=h,r=d):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{l=e.stateNode,xB(i,e),d=e.memoizedProps,h=e.type===e.elementType?d:lc(e.type,d),l.props=h,p=e.pendingProps,A=l.context,c=t.contextType,typeof c=="object"&&c!==null?c=Nl(c):(c=Xa(t)?kf:la.current,c=Nm(e,c));var v=t.getDerivedStateFromProps;(m=typeof v=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(d!==p||A!==c)&&G3(e,l,r,c),Fh=!1,A=e.memoizedState,l.state=A,j1(e,r,l,o);var y=e.memoizedState;d!==p||A!==y||ja.current||Fh?(typeof v=="function"&&(j2(e,t,v,r),y=e.memoizedState),(h=Fh||z3(e,t,h,r,A,y,c)||!1)?(m||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,y,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,y,c)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||d===i.memoizedProps&&A===i.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||d===i.memoizedProps&&A===i.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),l.props=r,l.state=y,l.context=c,r=h):(typeof l.componentDidUpdate!="function"||d===i.memoizedProps&&A===i.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||d===i.memoizedProps&&A===i.memoizedState||(e.flags|=1024),r=!1)}return q2(i,e,t,r,a,o)}function q2(i,e,t,r,o,a){YB(i,e);var l=(e.flags&128)!==0;if(!r&&!l)return o&&O3(e,t,!1),qu(i,e,a);r=e.stateNode,uN.current=e;var d=l&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,i!==null&&l?(e.child=Um(e,i.child,null,a),e.child=Um(e,null,d,a)):ya(i,e,d,a),e.memoizedState=r.state,o&&O3(e,t,!0),e.child}function qB(i){var e=i.stateNode;e.pendingContext?P3(i,e.pendingContext,e.pendingContext!==e.context):e.context&&P3(i,e.context,!1),SC(i,e.containerInfo)}function J3(i,e,t,r,o){return km(),EC(o),e.flags|=256,ya(i,e,t,r),e.child}var J2={dehydrated:null,treeContext:null,retryLane:0};function Z2(i){return{baseLanes:i,cachePool:null,transitions:null}}function JB(i,e,t){var r=e.pendingProps,o=_s.current,a=!1,l=(e.flags&128)!==0,d;if((d=l)||(d=i!==null&&i.memoizedState===null?!1:(o&2)!==0),d?(a=!0,e.flags&=-129):(i===null||i.memoizedState!==null)&&(o|=1),rs(_s,o&1),i===null)return Q2(e),i=e.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?(e.mode&1?i.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=r.children,i=r.fallback,a?(r=e.mode,a=e.child,l={mode:"hidden",children:l},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=l):a=Ex(l,r,0,null),i=Bf(i,r,t,null),a.return=e,i.return=e,a.sibling=i,e.child=a,e.child.memoizedState=Z2(t),e.memoizedState=J2,i):OC(e,l));if(o=i.memoizedState,o!==null&&(d=o.dehydrated,d!==null))return hN(i,e,l,r,d,o,t);if(a){a=r.fallback,l=e.mode,o=i.child,d=o.sibling;var c={mode:"hidden",children:r.children};return!(l&1)&&e.child!==o?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Zh(o,c),r.subtreeFlags=o.subtreeFlags&14680064),d!==null?a=Zh(d,a):(a=Bf(a,l,t,null),a.flags|=2),a.return=e,r.return=e,r.sibling=a,e.child=r,r=a,a=e.child,l=i.child.memoizedState,l=l===null?Z2(t):{baseLanes:l.baseLanes|t,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=i.childLanes&~t,e.memoizedState=J2,r}return a=i.child,i=a.sibling,r=Zh(a,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,i!==null&&(t=e.deletions,t===null?(e.deletions=[i],e.flags|=16):t.push(i)),e.child=r,e.memoizedState=null,r}function OC(i,e){return e=Ex({mode:"visible",children:e},i.mode,0,null),e.return=i,i.child=e}function Ay(i,e,t,r){return r!==null&&EC(r),Um(e,i.child,null,t),i=OC(e,e.pendingProps.children),i.flags|=2,e.memoizedState=null,i}function hN(i,e,t,r,o,a,l){if(t)return e.flags&256?(e.flags&=-257,r=__(Error(mn(422))),Ay(i,e,l,r)):e.memoizedState!==null?(e.child=i.child,e.flags|=128,null):(a=r.fallback,o=e.mode,r=Ex({mode:"visible",children:r.children},o,0,null),a=Bf(a,o,l,null),a.flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,e.mode&1&&Um(e,i.child,null,l),e.child.memoizedState=Z2(l),e.memoizedState=J2,a);if(!(e.mode&1))return Ay(i,e,l,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var d=r.dgst;return r=d,a=Error(mn(419)),r=__(a,r,void 0),Ay(i,e,l,r)}if(d=(l&i.childLanes)!==0,Wa||d){if(r=Po,r!==null){switch(l&-l){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|l)?0:o,o!==0&&o!==a.retryLane&&(a.retryLane=o,Yu(i,o),Ac(r,i,o,-1))}return GC(),r=__(Error(mn(421))),Ay(i,e,l,r)}return o.data==="$?"?(e.flags|=128,e.child=i.child,e=CN.bind(null,i),o._reactRetry=e,null):(i=a.treeContext,hl=Kh(o.nextSibling),pl=e,gs=!0,hc=null,i!==null&&(Dl[Pl++]=Gu,Dl[Pl++]=Hu,Dl[Pl++]=Uf,Gu=i.id,Hu=i.overflow,Uf=e),e=OC(e,r.children),e.flags|=4096,e)}function Z3(i,e,t){i.lanes|=e;var r=i.alternate;r!==null&&(r.lanes|=e),W2(i.return,e,t)}function w_(i,e,t,r,o){var a=i.memoizedState;a===null?i.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:o}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=t,a.tailMode=o)}function ZB(i,e,t){var r=e.pendingProps,o=r.revealOrder,a=r.tail;if(ya(i,e,r.children,t),r=_s.current,r&2)r=r&1|2,e.flags|=128;else{if(i!==null&&i.flags&128)e:for(i=e.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Z3(i,t,e);else if(i.tag===19)Z3(i,t,e);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break e;for(;i.sibling===null;){if(i.return===null||i.return===e)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}r&=1}if(rs(_s,r),!(e.mode&1))e.memoizedState=null;else switch(o){case"forwards":for(t=e.child,o=null;t!==null;)i=t.alternate,i!==null&&X1(i)===null&&(o=t),t=t.sibling;t=o,t===null?(o=e.child,e.child=null):(o=t.sibling,t.sibling=null),w_(e,!1,o,t,a);break;case"backwards":for(t=null,o=e.child,e.child=null;o!==null;){if(i=o.alternate,i!==null&&X1(i)===null){e.child=o;break}i=o.sibling,o.sibling=t,t=o,o=i}w_(e,!0,t,null,a);break;case"together":w_(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function v1(i,e){!(e.mode&1)&&i!==null&&(i.alternate=null,e.alternate=null,e.flags|=2)}function qu(i,e,t){if(i!==null&&(e.dependencies=i.dependencies),Gf|=e.lanes,!(t&e.childLanes))return null;if(i!==null&&e.child!==i.child)throw Error(mn(153));if(e.child!==null){for(i=e.child,t=Zh(i,i.pendingProps),e.child=t,t.return=e;i.sibling!==null;)i=i.sibling,t=t.sibling=Zh(i,i.pendingProps),t.return=e;t.sibling=null}return e.child}function dN(i,e,t){switch(e.tag){case 3:qB(e),km();break;case 5:MB(e);break;case 1:Xa(e.type)&&G1(e);break;case 4:SC(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,o=e.memoizedProps.value;rs(Q1,r._currentValue),r._currentValue=o;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(rs(_s,_s.current&1),e.flags|=128,null):t&e.child.childLanes?JB(i,e,t):(rs(_s,_s.current&1),i=qu(i,e,t),i!==null?i.sibling:null);rs(_s,_s.current&1);break;case 19:if(r=(t&e.childLanes)!==0,i.flags&128){if(r)return ZB(i,e,t);e.flags|=128}if(o=e.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),rs(_s,_s.current),r)break;return null;case 22:case 23:return e.lanes=0,KB(i,e,t)}return qu(i,e,t)}var $B,$2,eL,tL;$B=function(i,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)i.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};$2=function(){};eL=function(i,e,t,r){var o=i.memoizedProps;if(o!==r){i=e.stateNode,wf(au.current);var a=null;switch(t){case"input":o=E2(i,o),r=E2(i,r),a=[];break;case"select":o=bs({},o,{value:void 0}),r=bs({},r,{value:void 0}),a=[];break;case"textarea":o=C2(i,o),r=C2(i,r),a=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(i.onclick=U1)}b2(t,r);var l;t=null;for(h in o)if(!r.hasOwnProperty(h)&&o.hasOwnProperty(h)&&o[h]!=null)if(h==="style"){var d=o[h];for(l in d)d.hasOwnProperty(l)&&(t||(t={}),t[l]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&($A.hasOwnProperty(h)?a||(a=[]):(a=a||[]).push(h,null));for(h in r){var c=r[h];if(d=o!=null?o[h]:void 0,r.hasOwnProperty(h)&&c!==d&&(c!=null||d!=null))if(h==="style")if(d){for(l in d)!d.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(t||(t={}),t[l]="");for(l in c)c.hasOwnProperty(l)&&d[l]!==c[l]&&(t||(t={}),t[l]=c[l])}else t||(a||(a=[]),a.push(h,t)),t=c;else h==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,d=d?d.__html:void 0,c!=null&&d!==c&&(a=a||[]).push(h,c)):h==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(h,""+c):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&($A.hasOwnProperty(h)?(c!=null&&h==="onScroll"&&as("scroll",i),a||d===c||(a=[])):(a=a||[]).push(h,c))}t&&(a=a||[]).push("style",t);var h=a;(e.updateQueue=h)&&(e.flags|=4)}};tL=function(i,e,t,r){t!==r&&(e.flags|=4)};function pA(i,e){if(!gs)switch(i.tailMode){case"hidden":e=i.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?i.tail=null:t.sibling=null;break;case"collapsed":t=i.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||i.tail===null?i.tail=null:i.tail.sibling=null:r.sibling=null}}function ra(i){var e=i.alternate!==null&&i.alternate.child===i.child,t=0,r=0;if(e)for(var o=i.child;o!==null;)t|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=i,o=o.sibling;else for(o=i.child;o!==null;)t|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=i,o=o.sibling;return i.subtreeFlags|=r,i.childLanes=t,e}function fN(i,e,t){var r=e.pendingProps;switch(xC(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ra(e),null;case 1:return Xa(e.type)&&z1(),ra(e),null;case 3:return r=e.stateNode,zm(),us(ja),us(la),IC(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(i===null||i.child===null)&&(my(e)?e.flags|=4:i===null||i.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,hc!==null&&(aw(hc),hc=null))),$2(i,e),ra(e),null;case 5:TC(e);var o=wf(h0.current);if(t=e.type,i!==null&&e.stateNode!=null)eL(i,e,t,r,o),i.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(mn(166));return ra(e),null}if(i=wf(au.current),my(e)){r=e.stateNode,t=e.type;var a=e.memoizedProps;switch(r[ru]=e,r[c0]=a,i=(e.mode&1)!==0,t){case"dialog":as("cancel",r),as("close",r);break;case"iframe":case"object":case"embed":as("load",r);break;case"video":case"audio":for(o=0;o<OA.length;o++)as(OA[o],r);break;case"source":as("error",r);break;case"img":case"image":case"link":as("error",r),as("load",r);break;case"details":as("toggle",r);break;case"input":a3(r,a),as("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},as("invalid",r);break;case"textarea":c3(r,a),as("invalid",r)}b2(t,a),o=null;for(var l in a)if(a.hasOwnProperty(l)){var d=a[l];l==="children"?typeof d=="string"?r.textContent!==d&&(a.suppressHydrationWarning!==!0&&py(r.textContent,d,i),o=["children",d]):typeof d=="number"&&r.textContent!==""+d&&(a.suppressHydrationWarning!==!0&&py(r.textContent,d,i),o=["children",""+d]):$A.hasOwnProperty(l)&&d!=null&&l==="onScroll"&&as("scroll",r)}switch(t){case"input":oy(r),l3(r,a,!0);break;case"textarea":oy(r),u3(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=U1)}r=o,e.updateQueue=r,r!==null&&(e.flags|=4)}else{l=o.nodeType===9?o:o.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=TR(t)),i==="http://www.w3.org/1999/xhtml"?t==="script"?(i=l.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof r.is=="string"?i=l.createElement(t,{is:r.is}):(i=l.createElement(t),t==="select"&&(l=i,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):i=l.createElementNS(i,t),i[ru]=e,i[c0]=r,$B(i,e,!1,!1),e.stateNode=i;e:{switch(l=S2(t,r),t){case"dialog":as("cancel",i),as("close",i),o=r;break;case"iframe":case"object":case"embed":as("load",i),o=r;break;case"video":case"audio":for(o=0;o<OA.length;o++)as(OA[o],i);o=r;break;case"source":as("error",i),o=r;break;case"img":case"image":case"link":as("error",i),as("load",i),o=r;break;case"details":as("toggle",i),o=r;break;case"input":a3(i,r),o=E2(i,r),as("invalid",i);break;case"option":o=r;break;case"select":i._wrapperState={wasMultiple:!!r.multiple},o=bs({},r,{value:void 0}),as("invalid",i);break;case"textarea":c3(i,r),o=C2(i,r),as("invalid",i);break;default:o=r}b2(t,o),d=o;for(a in d)if(d.hasOwnProperty(a)){var c=d[a];a==="style"?BR(i,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&IR(i,c)):a==="children"?typeof c=="string"?(t!=="textarea"||c!=="")&&e0(i,c):typeof c=="number"&&e0(i,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&($A.hasOwnProperty(a)?c!=null&&a==="onScroll"&&as("scroll",i):c!=null&&sC(i,a,c,l))}switch(t){case"input":oy(i),l3(i,r,!1);break;case"textarea":oy(i),u3(i);break;case"option":r.value!=null&&i.setAttribute("value",""+ed(r.value));break;case"select":i.multiple=!!r.multiple,a=r.value,a!=null?bm(i,!!r.multiple,a,!1):r.defaultValue!=null&&bm(i,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(i.onclick=U1)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ra(e),null;case 6:if(i&&e.stateNode!=null)tL(i,e,i.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(mn(166));if(t=wf(h0.current),wf(au.current),my(e)){if(r=e.stateNode,t=e.memoizedProps,r[ru]=e,(a=r.nodeValue!==t)&&(i=pl,i!==null))switch(i.tag){case 3:py(r.nodeValue,t,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&py(r.nodeValue,t,(i.mode&1)!==0)}a&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[ru]=e,e.stateNode=r}return ra(e),null;case 13:if(us(_s),r=e.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(gs&&hl!==null&&e.mode&1&&!(e.flags&128))vB(),km(),e.flags|=98560,a=!1;else if(a=my(e),r!==null&&r.dehydrated!==null){if(i===null){if(!a)throw Error(mn(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(mn(317));a[ru]=e}else km(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ra(e),a=!1}else hc!==null&&(aw(hc),hc=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(i!==null&&i.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(i===null||_s.current&1?Ao===0&&(Ao=3):GC())),e.updateQueue!==null&&(e.flags|=4),ra(e),null);case 4:return zm(),$2(i,e),i===null&&a0(e.stateNode.containerInfo),ra(e),null;case 10:return CC(e.type._context),ra(e),null;case 17:return Xa(e.type)&&z1(),ra(e),null;case 19:if(us(_s),a=e.memoizedState,a===null)return ra(e),null;if(r=(e.flags&128)!==0,l=a.rendering,l===null)if(r)pA(a,!1);else{if(Ao!==0||i!==null&&i.flags&128)for(i=e.child;i!==null;){if(l=X1(i),l!==null){for(e.flags|=128,pA(a,!1),r=l.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)a=t,i=r,a.flags&=14680066,l=a.alternate,l===null?(a.childLanes=0,a.lanes=i,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,i=l.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t=t.sibling;return rs(_s,_s.current&1|2),e.child}i=i.sibling}a.tail!==null&&Ws()>Hm&&(e.flags|=128,r=!0,pA(a,!1),e.lanes=4194304)}else{if(!r)if(i=X1(l),i!==null){if(e.flags|=128,r=!0,t=i.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),pA(a,!0),a.tail===null&&a.tailMode==="hidden"&&!l.alternate&&!gs)return ra(e),null}else 2*Ws()-a.renderingStartTime>Hm&&t!==1073741824&&(e.flags|=128,r=!0,pA(a,!1),e.lanes=4194304);a.isBackwards?(l.sibling=e.child,e.child=l):(t=a.last,t!==null?t.sibling=l:e.child=l,a.last=l)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Ws(),e.sibling=null,t=_s.current,rs(_s,r?t&1|2:t&1),e):(ra(e),null);case 22:case 23:return zC(),r=e.memoizedState!==null,i!==null&&i.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?ll&1073741824&&(ra(e),e.subtreeFlags&6&&(e.flags|=8192)):ra(e),null;case 24:return null;case 25:return null}throw Error(mn(156,e.tag))}function pN(i,e){switch(xC(e),e.tag){case 1:return Xa(e.type)&&z1(),i=e.flags,i&65536?(e.flags=i&-65537|128,e):null;case 3:return zm(),us(ja),us(la),IC(),i=e.flags,i&65536&&!(i&128)?(e.flags=i&-65537|128,e):null;case 5:return TC(e),null;case 13:if(us(_s),i=e.memoizedState,i!==null&&i.dehydrated!==null){if(e.alternate===null)throw Error(mn(340));km()}return i=e.flags,i&65536?(e.flags=i&-65537|128,e):null;case 19:return us(_s),null;case 4:return zm(),null;case 10:return CC(e.type._context),null;case 22:case 23:return zC(),null;case 24:return null;default:return null}}var vy=!1,aa=!1,mN=typeof WeakSet=="function"?WeakSet:Set,ri=null;function Em(i,e){var t=i.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){Ds(i,e,r)}else t.current=null}function ew(i,e,t){try{t()}catch(r){Ds(i,e,r)}}var $3=!1;function gN(i,e){if(N2=F1,i=sB(),vC(i)){if("selectionStart"in i)var t={start:i.selectionStart,end:i.selectionEnd};else e:{t=(t=i.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var o=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{t.nodeType,a.nodeType}catch{t=null;break e}var l=0,d=-1,c=-1,h=0,m=0,p=i,A=null;t:for(;;){for(var v;p!==t||o!==0&&p.nodeType!==3||(d=l+o),p!==a||r!==0&&p.nodeType!==3||(c=l+r),p.nodeType===3&&(l+=p.nodeValue.length),(v=p.firstChild)!==null;)A=p,p=v;for(;;){if(p===i)break t;if(A===t&&++h===o&&(d=l),A===a&&++m===r&&(c=l),(v=p.nextSibling)!==null)break;p=A,A=p.parentNode}p=v}t=d===-1||c===-1?null:{start:d,end:c}}else t=null}t=t||{start:0,end:0}}else t=null;for(k2={focusedElem:i,selectionRange:t},F1=!1,ri=e;ri!==null;)if(e=ri,i=e.child,(e.subtreeFlags&1028)!==0&&i!==null)i.return=e,ri=i;else for(;ri!==null;){e=ri;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var x=y.memoizedProps,C=y.memoizedState,g=e.stateNode,b=g.getSnapshotBeforeUpdate(e.elementType===e.type?x:lc(e.type,x),C);g.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(mn(163))}}catch(S){Ds(e,e.return,S)}if(i=e.sibling,i!==null){i.return=e.return,ri=i;break}ri=e.return}return y=$3,$3=!1,y}function WA(i,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&i)===i){var a=o.destroy;o.destroy=void 0,a!==void 0&&ew(e,t,a)}o=o.next}while(o!==r)}}function yx(i,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&i)===i){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function tw(i){var e=i.ref;if(e!==null){var t=i.stateNode;switch(i.tag){case 5:i=t;break;default:i=t}typeof e=="function"?e(i):e.current=i}}function nL(i){var e=i.alternate;e!==null&&(i.alternate=null,nL(e)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(e=i.stateNode,e!==null&&(delete e[ru],delete e[c0],delete e[G2],delete e[ZF],delete e[$F])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function iL(i){return i.tag===5||i.tag===3||i.tag===4}function eT(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||iL(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function nw(i,e,t){var r=i.tag;if(r===5||r===6)i=i.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(i,e):t.insertBefore(i,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(i,t)):(e=t,e.appendChild(i)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=U1));else if(r!==4&&(i=i.child,i!==null))for(nw(i,e,t),i=i.sibling;i!==null;)nw(i,e,t),i=i.sibling}function iw(i,e,t){var r=i.tag;if(r===5||r===6)i=i.stateNode,e?t.insertBefore(i,e):t.appendChild(i);else if(r!==4&&(i=i.child,i!==null))for(iw(i,e,t),i=i.sibling;i!==null;)iw(i,e,t),i=i.sibling}var ko=null,cc=!1;function Th(i,e,t){for(t=t.child;t!==null;)rL(i,e,t),t=t.sibling}function rL(i,e,t){if(ou&&typeof ou.onCommitFiberUnmount=="function")try{ou.onCommitFiberUnmount(hx,t)}catch{}switch(t.tag){case 5:aa||Em(t,e);case 6:var r=ko,o=cc;ko=null,Th(i,e,t),ko=r,cc=o,ko!==null&&(cc?(i=ko,t=t.stateNode,i.nodeType===8?i.parentNode.removeChild(t):i.removeChild(t)):ko.removeChild(t.stateNode));break;case 18:ko!==null&&(cc?(i=ko,t=t.stateNode,i.nodeType===8?g_(i.parentNode,t):i.nodeType===1&&g_(i,t),r0(i)):g_(ko,t.stateNode));break;case 4:r=ko,o=cc,ko=t.stateNode.containerInfo,cc=!0,Th(i,e,t),ko=r,cc=o;break;case 0:case 11:case 14:case 15:if(!aa&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var a=o,l=a.destroy;a=a.tag,l!==void 0&&(a&2||a&4)&&ew(t,e,l),o=o.next}while(o!==r)}Th(i,e,t);break;case 1:if(!aa&&(Em(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(d){Ds(t,e,d)}Th(i,e,t);break;case 21:Th(i,e,t);break;case 22:t.mode&1?(aa=(r=aa)||t.memoizedState!==null,Th(i,e,t),aa=r):Th(i,e,t);break;default:Th(i,e,t)}}function tT(i){var e=i.updateQueue;if(e!==null){i.updateQueue=null;var t=i.stateNode;t===null&&(t=i.stateNode=new mN),e.forEach(function(r){var o=MN.bind(null,i,r);t.has(r)||(t.add(r),r.then(o,o))})}}function ic(i,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var o=t[r];try{var a=i,l=e,d=l;e:for(;d!==null;){switch(d.tag){case 5:ko=d.stateNode,cc=!1;break e;case 3:ko=d.stateNode.containerInfo,cc=!0;break e;case 4:ko=d.stateNode.containerInfo,cc=!0;break e}d=d.return}if(ko===null)throw Error(mn(160));rL(a,l,o),ko=null,cc=!1;var c=o.alternate;c!==null&&(c.return=null),o.return=null}catch(h){Ds(o,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)sL(e,i),e=e.sibling}function sL(i,e){var t=i.alternate,r=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(ic(e,i),tu(i),r&4){try{WA(3,i,i.return),yx(3,i)}catch(x){Ds(i,i.return,x)}try{WA(5,i,i.return)}catch(x){Ds(i,i.return,x)}}break;case 1:ic(e,i),tu(i),r&512&&t!==null&&Em(t,t.return);break;case 5:if(ic(e,i),tu(i),r&512&&t!==null&&Em(t,t.return),i.flags&32){var o=i.stateNode;try{e0(o,"")}catch(x){Ds(i,i.return,x)}}if(r&4&&(o=i.stateNode,o!=null)){var a=i.memoizedProps,l=t!==null?t.memoizedProps:a,d=i.type,c=i.updateQueue;if(i.updateQueue=null,c!==null)try{d==="input"&&a.type==="radio"&&a.name!=null&&bR(o,a),S2(d,l);var h=S2(d,a);for(l=0;l<c.length;l+=2){var m=c[l],p=c[l+1];m==="style"?BR(o,p):m==="dangerouslySetInnerHTML"?IR(o,p):m==="children"?e0(o,p):sC(o,m,p,h)}switch(d){case"input":_2(o,a);break;case"textarea":SR(o,a);break;case"select":var A=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!a.multiple;var v=a.value;v!=null?bm(o,!!a.multiple,v,!1):A!==!!a.multiple&&(a.defaultValue!=null?bm(o,!!a.multiple,a.defaultValue,!0):bm(o,!!a.multiple,a.multiple?[]:"",!1))}o[c0]=a}catch(x){Ds(i,i.return,x)}}break;case 6:if(ic(e,i),tu(i),r&4){if(i.stateNode===null)throw Error(mn(162));o=i.stateNode,a=i.memoizedProps;try{o.nodeValue=a}catch(x){Ds(i,i.return,x)}}break;case 3:if(ic(e,i),tu(i),r&4&&t!==null&&t.memoizedState.isDehydrated)try{r0(e.containerInfo)}catch(x){Ds(i,i.return,x)}break;case 4:ic(e,i),tu(i);break;case 13:ic(e,i),tu(i),o=i.child,o.flags&8192&&(a=o.memoizedState!==null,o.stateNode.isHidden=a,!a||o.alternate!==null&&o.alternate.memoizedState!==null||(kC=Ws())),r&4&&tT(i);break;case 22:if(m=t!==null&&t.memoizedState!==null,i.mode&1?(aa=(h=aa)||m,ic(e,i),aa=h):ic(e,i),tu(i),r&8192){if(h=i.memoizedState!==null,(i.stateNode.isHidden=h)&&!m&&i.mode&1)for(ri=i,m=i.child;m!==null;){for(p=ri=m;ri!==null;){switch(A=ri,v=A.child,A.tag){case 0:case 11:case 14:case 15:WA(4,A,A.return);break;case 1:Em(A,A.return);var y=A.stateNode;if(typeof y.componentWillUnmount=="function"){r=A,t=A.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(x){Ds(r,t,x)}}break;case 5:Em(A,A.return);break;case 22:if(A.memoizedState!==null){iT(p);continue}}v!==null?(v.return=A,ri=v):iT(p)}m=m.sibling}e:for(m=null,p=i;;){if(p.tag===5){if(m===null){m=p;try{o=p.stateNode,h?(a=o.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(d=p.stateNode,c=p.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,d.style.display=RR("display",l))}catch(x){Ds(i,i.return,x)}}}else if(p.tag===6){if(m===null)try{p.stateNode.nodeValue=h?"":p.memoizedProps}catch(x){Ds(i,i.return,x)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===i)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===i)break e;for(;p.sibling===null;){if(p.return===null||p.return===i)break e;m===p&&(m=null),p=p.return}m===p&&(m=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:ic(e,i),tu(i),r&4&&tT(i);break;case 21:break;default:ic(e,i),tu(i)}}function tu(i){var e=i.flags;if(e&2){try{e:{for(var t=i.return;t!==null;){if(iL(t)){var r=t;break e}t=t.return}throw Error(mn(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(e0(o,""),r.flags&=-33);var a=eT(i);iw(i,a,o);break;case 3:case 4:var l=r.stateNode.containerInfo,d=eT(i);nw(i,d,l);break;default:throw Error(mn(161))}}catch(c){Ds(i,i.return,c)}i.flags&=-3}e&4096&&(i.flags&=-4097)}function AN(i,e,t){ri=i,oL(i)}function oL(i,e,t){for(var r=(i.mode&1)!==0;ri!==null;){var o=ri,a=o.child;if(o.tag===22&&r){var l=o.memoizedState!==null||vy;if(!l){var d=o.alternate,c=d!==null&&d.memoizedState!==null||aa;d=vy;var h=aa;if(vy=l,(aa=c)&&!h)for(ri=o;ri!==null;)l=ri,c=l.child,l.tag===22&&l.memoizedState!==null?rT(o):c!==null?(c.return=l,ri=c):rT(o);for(;a!==null;)ri=a,oL(a),a=a.sibling;ri=o,vy=d,aa=h}nT(i)}else o.subtreeFlags&8772&&a!==null?(a.return=o,ri=a):nT(i)}}function nT(i){for(;ri!==null;){var e=ri;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:aa||yx(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!aa)if(t===null)r.componentDidMount();else{var o=e.elementType===e.type?t.memoizedProps:lc(e.type,t.memoizedProps);r.componentDidUpdate(o,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&U3(e,a,r);break;case 3:var l=e.updateQueue;if(l!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}U3(e,l,t)}break;case 5:var d=e.stateNode;if(t===null&&e.flags&4){t=d;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&t.focus();break;case"img":c.src&&(t.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var m=h.memoizedState;if(m!==null){var p=m.dehydrated;p!==null&&r0(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(mn(163))}aa||e.flags&512&&tw(e)}catch(A){Ds(e,e.return,A)}}if(e===i){ri=null;break}if(t=e.sibling,t!==null){t.return=e.return,ri=t;break}ri=e.return}}function iT(i){for(;ri!==null;){var e=ri;if(e===i){ri=null;break}var t=e.sibling;if(t!==null){t.return=e.return,ri=t;break}ri=e.return}}function rT(i){for(;ri!==null;){var e=ri;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{yx(4,e)}catch(c){Ds(e,t,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var o=e.return;try{r.componentDidMount()}catch(c){Ds(e,o,c)}}var a=e.return;try{tw(e)}catch(c){Ds(e,a,c)}break;case 5:var l=e.return;try{tw(e)}catch(c){Ds(e,l,c)}}}catch(c){Ds(e,e.return,c)}if(e===i){ri=null;break}var d=e.sibling;if(d!==null){d.return=e.return,ri=d;break}ri=e.return}}var vN=Math.ceil,q1=eh.ReactCurrentDispatcher,FC=eh.ReactCurrentOwner,Fl=eh.ReactCurrentBatchConfig,Pr=0,Po=null,so=null,zo=0,ll=0,_m=ld(0),Ao=0,m0=null,Gf=0,xx=0,NC=0,jA=null,Ha=null,kC=0,Hm=1/0,Nu=null,J1=!1,rw=null,qh=null,yy=!1,Hh=null,Z1=0,XA=0,sw=null,y1=-1,x1=0;function xa(){return Pr&6?Ws():y1!==-1?y1:y1=Ws()}function Jh(i){return i.mode&1?Pr&2&&zo!==0?zo&-zo:tN.transition!==null?(x1===0&&(x1=VR()),x1):(i=Yr,i!==0||(i=window.event,i=i===void 0?16:qR(i.type)),i):1}function Ac(i,e,t,r){if(50<XA)throw XA=0,sw=null,Error(mn(185));R0(i,t,r),(!(Pr&2)||i!==Po)&&(i===Po&&(!(Pr&2)&&(xx|=t),Ao===4&&zh(i,zo)),Ka(i,r),t===1&&Pr===0&&!(e.mode&1)&&(Hm=Ws()+500,gx&&cd()))}function Ka(i,e){var t=i.callbackNode;tF(i,e);var r=O1(i,i===Po?zo:0);if(r===0)t!==null&&f3(t),i.callbackNode=null,i.callbackPriority=0;else if(e=r&-r,i.callbackPriority!==e){if(t!=null&&f3(t),e===1)i.tag===0?eN(sT.bind(null,i)):mB(sT.bind(null,i)),qF(function(){!(Pr&6)&&cd()}),t=null;else{switch(QR(r)){case 1:t=uC;break;case 4:t=GR;break;case 16:t=P1;break;case 536870912:t=HR;break;default:t=P1}t=pL(t,aL.bind(null,i))}i.callbackPriority=e,i.callbackNode=t}}function aL(i,e){if(y1=-1,x1=0,Pr&6)throw Error(mn(327));var t=i.callbackNode;if(Bm()&&i.callbackNode!==t)return null;var r=O1(i,i===Po?zo:0);if(r===0)return null;if(r&30||r&i.expiredLanes||e)e=$1(i,r);else{e=r;var o=Pr;Pr|=2;var a=cL();(Po!==i||zo!==e)&&(Nu=null,Hm=Ws()+500,Rf(i,e));do try{EN();break}catch(d){lL(i,d)}while(1);wC(),q1.current=a,Pr=o,so!==null?e=0:(Po=null,zo=0,e=Ao)}if(e!==0){if(e===2&&(o=L2(i),o!==0&&(r=o,e=ow(i,o))),e===1)throw t=m0,Rf(i,0),zh(i,r),Ka(i,Ws()),t;if(e===6)zh(i,r);else{if(o=i.current.alternate,!(r&30)&&!yN(o)&&(e=$1(i,r),e===2&&(a=L2(i),a!==0&&(r=a,e=ow(i,a))),e===1))throw t=m0,Rf(i,0),zh(i,r),Ka(i,Ws()),t;switch(i.finishedWork=o,i.finishedLanes=r,e){case 0:case 1:throw Error(mn(345));case 2:mf(i,Ha,Nu);break;case 3:if(zh(i,r),(r&130023424)===r&&(e=kC+500-Ws(),10<e)){if(O1(i,0)!==0)break;if(o=i.suspendedLanes,(o&r)!==r){xa(),i.pingedLanes|=i.suspendedLanes&o;break}i.timeoutHandle=z2(mf.bind(null,i,Ha,Nu),e);break}mf(i,Ha,Nu);break;case 4:if(zh(i,r),(r&4194240)===r)break;for(e=i.eventTimes,o=-1;0<r;){var l=31-gc(r);a=1<<l,l=e[l],l>o&&(o=l),r&=~a}if(r=o,r=Ws()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*vN(r/1960))-r,10<r){i.timeoutHandle=z2(mf.bind(null,i,Ha,Nu),r);break}mf(i,Ha,Nu);break;case 5:mf(i,Ha,Nu);break;default:throw Error(mn(329))}}}return Ka(i,Ws()),i.callbackNode===t?aL.bind(null,i):null}function ow(i,e){var t=jA;return i.current.memoizedState.isDehydrated&&(Rf(i,e).flags|=256),i=$1(i,e),i!==2&&(e=Ha,Ha=t,e!==null&&aw(e)),i}function aw(i){Ha===null?Ha=i:Ha.push.apply(Ha,i)}function yN(i){for(var e=i;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var o=t[r],a=o.getSnapshot;o=o.value;try{if(!yc(a(),o))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===i)break;for(;e.sibling===null;){if(e.return===null||e.return===i)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function zh(i,e){for(e&=~NC,e&=~xx,i.suspendedLanes|=e,i.pingedLanes&=~e,i=i.expirationTimes;0<e;){var t=31-gc(e),r=1<<t;i[t]=-1,e&=~r}}function sT(i){if(Pr&6)throw Error(mn(327));Bm();var e=O1(i,0);if(!(e&1))return Ka(i,Ws()),null;var t=$1(i,e);if(i.tag!==0&&t===2){var r=L2(i);r!==0&&(e=r,t=ow(i,r))}if(t===1)throw t=m0,Rf(i,0),zh(i,e),Ka(i,Ws()),t;if(t===6)throw Error(mn(345));return i.finishedWork=i.current.alternate,i.finishedLanes=e,mf(i,Ha,Nu),Ka(i,Ws()),null}function UC(i,e){var t=Pr;Pr|=1;try{return i(e)}finally{Pr=t,Pr===0&&(Hm=Ws()+500,gx&&cd())}}function Hf(i){Hh!==null&&Hh.tag===0&&!(Pr&6)&&Bm();var e=Pr;Pr|=1;var t=Fl.transition,r=Yr;try{if(Fl.transition=null,Yr=1,i)return i()}finally{Yr=r,Fl.transition=t,Pr=e,!(Pr&6)&&cd()}}function zC(){ll=_m.current,us(_m)}function Rf(i,e){i.finishedWork=null,i.finishedLanes=0;var t=i.timeoutHandle;if(t!==-1&&(i.timeoutHandle=-1,YF(t)),so!==null)for(t=so.return;t!==null;){var r=t;switch(xC(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&z1();break;case 3:zm(),us(ja),us(la),IC();break;case 5:TC(r);break;case 4:zm();break;case 13:us(_s);break;case 19:us(_s);break;case 10:CC(r.type._context);break;case 22:case 23:zC()}t=t.return}if(Po=i,so=i=Zh(i.current,null),zo=ll=e,Ao=0,m0=null,NC=xx=Gf=0,Ha=jA=null,_f!==null){for(e=0;e<_f.length;e++)if(t=_f[e],r=t.interleaved,r!==null){t.interleaved=null;var o=r.next,a=t.pending;if(a!==null){var l=a.next;a.next=o,r.next=l}t.pending=r}_f=null}return i}function lL(i,e){do{var t=so;try{if(wC(),g1.current=Y1,K1){for(var r=Ms.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}K1=!1}if(zf=0,Lo=go=Ms=null,QA=!1,d0=0,FC.current=null,t===null||t.return===null){Ao=1,m0=e,so=null;break}e:{var a=i,l=t.return,d=t,c=e;if(e=zo,d.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var h=c,m=d,p=m.tag;if(!(m.mode&1)&&(p===0||p===11||p===15)){var A=m.alternate;A?(m.updateQueue=A.updateQueue,m.memoizedState=A.memoizedState,m.lanes=A.lanes):(m.updateQueue=null,m.memoizedState=null)}var v=j3(l);if(v!==null){v.flags&=-257,X3(v,l,d,a,e),v.mode&1&&W3(a,h,e),e=v,c=h;var y=e.updateQueue;if(y===null){var x=new Set;x.add(c),e.updateQueue=x}else y.add(c);break e}else{if(!(e&1)){W3(a,h,e),GC();break e}c=Error(mn(426))}}else if(gs&&d.mode&1){var C=j3(l);if(C!==null){!(C.flags&65536)&&(C.flags|=256),X3(C,l,d,a,e),EC(Gm(c,d));break e}}a=c=Gm(c,d),Ao!==4&&(Ao=2),jA===null?jA=[a]:jA.push(a),a=l;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var g=WB(a,c,e);k3(a,g);break e;case 1:d=c;var b=a.type,_=a.stateNode;if(!(a.flags&128)&&(typeof b.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(qh===null||!qh.has(_)))){a.flags|=65536,e&=-e,a.lanes|=e;var S=jB(a,d,e);k3(a,S);break e}}a=a.return}while(a!==null)}hL(t)}catch(R){e=R,so===t&&t!==null&&(so=t=t.return);continue}break}while(1)}function cL(){var i=q1.current;return q1.current=Y1,i===null?Y1:i}function GC(){(Ao===0||Ao===3||Ao===2)&&(Ao=4),Po===null||!(Gf&268435455)&&!(xx&268435455)||zh(Po,zo)}function $1(i,e){var t=Pr;Pr|=2;var r=cL();(Po!==i||zo!==e)&&(Nu=null,Rf(i,e));do try{xN();break}catch(o){lL(i,o)}while(1);if(wC(),Pr=t,q1.current=r,so!==null)throw Error(mn(261));return Po=null,zo=0,Ao}function xN(){for(;so!==null;)uL(so)}function EN(){for(;so!==null&&!j6();)uL(so)}function uL(i){var e=fL(i.alternate,i,ll);i.memoizedProps=i.pendingProps,e===null?hL(i):so=e,FC.current=null}function hL(i){var e=i;do{var t=e.alternate;if(i=e.return,e.flags&32768){if(t=pN(t,e),t!==null){t.flags&=32767,so=t;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Ao=6,so=null;return}}else if(t=fN(t,e,ll),t!==null){so=t;return}if(e=e.sibling,e!==null){so=e;return}so=e=i}while(e!==null);Ao===0&&(Ao=5)}function mf(i,e,t){var r=Yr,o=Fl.transition;try{Fl.transition=null,Yr=1,_N(i,e,t,r)}finally{Fl.transition=o,Yr=r}return null}function _N(i,e,t,r){do Bm();while(Hh!==null);if(Pr&6)throw Error(mn(327));t=i.finishedWork;var o=i.finishedLanes;if(t===null)return null;if(i.finishedWork=null,i.finishedLanes=0,t===i.current)throw Error(mn(177));i.callbackNode=null,i.callbackPriority=0;var a=t.lanes|t.childLanes;if(nF(i,a),i===Po&&(so=Po=null,zo=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||yy||(yy=!0,pL(P1,function(){return Bm(),null})),a=(t.flags&15990)!==0,t.subtreeFlags&15990||a){a=Fl.transition,Fl.transition=null;var l=Yr;Yr=1;var d=Pr;Pr|=4,FC.current=null,gN(i,t),sL(t,i),HF(k2),F1=!!N2,k2=N2=null,i.current=t,AN(t),X6(),Pr=d,Yr=l,Fl.transition=a}else i.current=t;if(yy&&(yy=!1,Hh=i,Z1=o),a=i.pendingLanes,a===0&&(qh=null),q6(t.stateNode),Ka(i,Ws()),e!==null)for(r=i.onRecoverableError,t=0;t<e.length;t++)o=e[t],r(o.value,{componentStack:o.stack,digest:o.digest});if(J1)throw J1=!1,i=rw,rw=null,i;return Z1&1&&i.tag!==0&&Bm(),a=i.pendingLanes,a&1?i===sw?XA++:(XA=0,sw=i):XA=0,cd(),null}function Bm(){if(Hh!==null){var i=QR(Z1),e=Fl.transition,t=Yr;try{if(Fl.transition=null,Yr=16>i?16:i,Hh===null)var r=!1;else{if(i=Hh,Hh=null,Z1=0,Pr&6)throw Error(mn(331));var o=Pr;for(Pr|=4,ri=i.current;ri!==null;){var a=ri,l=a.child;if(ri.flags&16){var d=a.deletions;if(d!==null){for(var c=0;c<d.length;c++){var h=d[c];for(ri=h;ri!==null;){var m=ri;switch(m.tag){case 0:case 11:case 15:WA(8,m,a)}var p=m.child;if(p!==null)p.return=m,ri=p;else for(;ri!==null;){m=ri;var A=m.sibling,v=m.return;if(nL(m),m===h){ri=null;break}if(A!==null){A.return=v,ri=A;break}ri=v}}}var y=a.alternate;if(y!==null){var x=y.child;if(x!==null){y.child=null;do{var C=x.sibling;x.sibling=null,x=C}while(x!==null)}}ri=a}}if(a.subtreeFlags&2064&&l!==null)l.return=a,ri=l;else e:for(;ri!==null;){if(a=ri,a.flags&2048)switch(a.tag){case 0:case 11:case 15:WA(9,a,a.return)}var g=a.sibling;if(g!==null){g.return=a.return,ri=g;break e}ri=a.return}}var b=i.current;for(ri=b;ri!==null;){l=ri;var _=l.child;if(l.subtreeFlags&2064&&_!==null)_.return=l,ri=_;else e:for(l=b;ri!==null;){if(d=ri,d.flags&2048)try{switch(d.tag){case 0:case 11:case 15:yx(9,d)}}catch(R){Ds(d,d.return,R)}if(d===l){ri=null;break e}var S=d.sibling;if(S!==null){S.return=d.return,ri=S;break e}ri=d.return}}if(Pr=o,cd(),ou&&typeof ou.onPostCommitFiberRoot=="function")try{ou.onPostCommitFiberRoot(hx,i)}catch{}r=!0}return r}finally{Yr=t,Fl.transition=e}}return!1}function oT(i,e,t){e=Gm(t,e),e=WB(i,e,1),i=Yh(i,e,1),e=xa(),i!==null&&(R0(i,1,e),Ka(i,e))}function Ds(i,e,t){if(i.tag===3)oT(i,i,t);else for(;e!==null;){if(e.tag===3){oT(e,i,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(qh===null||!qh.has(r))){i=Gm(t,i),i=jB(e,i,1),e=Yh(e,i,1),i=xa(),e!==null&&(R0(e,1,i),Ka(e,i));break}}e=e.return}}function wN(i,e,t){var r=i.pingCache;r!==null&&r.delete(e),e=xa(),i.pingedLanes|=i.suspendedLanes&t,Po===i&&(zo&t)===t&&(Ao===4||Ao===3&&(zo&130023424)===zo&&500>Ws()-kC?Rf(i,0):NC|=t),Ka(i,e)}function dL(i,e){e===0&&(i.mode&1?(e=cy,cy<<=1,!(cy&130023424)&&(cy=4194304)):e=1);var t=xa();i=Yu(i,e),i!==null&&(R0(i,e,t),Ka(i,t))}function CN(i){var e=i.memoizedState,t=0;e!==null&&(t=e.retryLane),dL(i,t)}function MN(i,e){var t=0;switch(i.tag){case 13:var r=i.stateNode,o=i.memoizedState;o!==null&&(t=o.retryLane);break;case 19:r=i.stateNode;break;default:throw Error(mn(314))}r!==null&&r.delete(e),dL(i,t)}var fL;fL=function(i,e,t){if(i!==null)if(i.memoizedProps!==e.pendingProps||ja.current)Wa=!0;else{if(!(i.lanes&t)&&!(e.flags&128))return Wa=!1,dN(i,e,t);Wa=!!(i.flags&131072)}else Wa=!1,gs&&e.flags&1048576&&gB(e,V1,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;v1(i,e),i=e.pendingProps;var o=Nm(e,la.current);Rm(e,t),o=BC(null,e,r,i,o,t);var a=LC();return e.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Xa(r)?(a=!0,G1(e)):a=!1,e.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,bC(e),o.updater=Ax,e.stateNode=o,o._reactInternals=e,X2(e,r,i,t),e=q2(null,e,r,!0,a,t)):(e.tag=0,gs&&a&&yC(e),ya(null,e,o,t),e=e.child),e;case 16:r=e.elementType;e:{switch(v1(i,e),i=e.pendingProps,o=r._init,r=o(r._payload),e.type=r,o=e.tag=SN(r),i=lc(r,i),o){case 0:e=Y2(null,e,r,i,t);break e;case 1:e=q3(null,e,r,i,t);break e;case 11:e=K3(null,e,r,i,t);break e;case 14:e=Y3(null,e,r,lc(r.type,i),t);break e}throw Error(mn(306,r,""))}return e;case 0:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:lc(r,o),Y2(i,e,r,o,t);case 1:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:lc(r,o),q3(i,e,r,o,t);case 3:e:{if(qB(e),i===null)throw Error(mn(387));r=e.pendingProps,a=e.memoizedState,o=a.element,xB(i,e),j1(e,r,null,t);var l=e.memoizedState;if(r=l.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){o=Gm(Error(mn(423)),e),e=J3(i,e,r,t,o);break e}else if(r!==o){o=Gm(Error(mn(424)),e),e=J3(i,e,r,t,o);break e}else for(hl=Kh(e.stateNode.containerInfo.firstChild),pl=e,gs=!0,hc=null,t=CB(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(km(),r===o){e=qu(i,e,t);break e}ya(i,e,r,t)}e=e.child}return e;case 5:return MB(e),i===null&&Q2(e),r=e.type,o=e.pendingProps,a=i!==null?i.memoizedProps:null,l=o.children,U2(r,o)?l=null:a!==null&&U2(r,a)&&(e.flags|=32),YB(i,e),ya(i,e,l,t),e.child;case 6:return i===null&&Q2(e),null;case 13:return JB(i,e,t);case 4:return SC(e,e.stateNode.containerInfo),r=e.pendingProps,i===null?e.child=Um(e,null,r,t):ya(i,e,r,t),e.child;case 11:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:lc(r,o),K3(i,e,r,o,t);case 7:return ya(i,e,e.pendingProps,t),e.child;case 8:return ya(i,e,e.pendingProps.children,t),e.child;case 12:return ya(i,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,o=e.pendingProps,a=e.memoizedProps,l=o.value,rs(Q1,r._currentValue),r._currentValue=l,a!==null)if(yc(a.value,l)){if(a.children===o.children&&!ja.current){e=qu(i,e,t);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var d=a.dependencies;if(d!==null){l=a.child;for(var c=d.firstContext;c!==null;){if(c.context===r){if(a.tag===1){c=Qu(-1,t&-t),c.tag=2;var h=a.updateQueue;if(h!==null){h=h.shared;var m=h.pending;m===null?c.next=c:(c.next=m.next,m.next=c),h.pending=c}}a.lanes|=t,c=a.alternate,c!==null&&(c.lanes|=t),W2(a.return,t,e),d.lanes|=t;break}c=c.next}}else if(a.tag===10)l=a.type===e.type?null:a.child;else if(a.tag===18){if(l=a.return,l===null)throw Error(mn(341));l.lanes|=t,d=l.alternate,d!==null&&(d.lanes|=t),W2(l,t,e),l=a.sibling}else l=a.child;if(l!==null)l.return=a;else for(l=a;l!==null;){if(l===e){l=null;break}if(a=l.sibling,a!==null){a.return=l.return,l=a;break}l=l.return}a=l}ya(i,e,o.children,t),e=e.child}return e;case 9:return o=e.type,r=e.pendingProps.children,Rm(e,t),o=Nl(o),r=r(o),e.flags|=1,ya(i,e,r,t),e.child;case 14:return r=e.type,o=lc(r,e.pendingProps),o=lc(r.type,o),Y3(i,e,r,o,t);case 15:return XB(i,e,e.type,e.pendingProps,t);case 17:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:lc(r,o),v1(i,e),e.tag=1,Xa(r)?(i=!0,G1(e)):i=!1,Rm(e,t),_B(e,r,o),X2(e,r,o,t),q2(null,e,r,!0,i,t);case 19:return ZB(i,e,t);case 22:return KB(i,e,t)}throw Error(mn(156,e.tag))};function pL(i,e){return zR(i,e)}function bN(i,e,t,r){this.tag=i,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ol(i,e,t,r){return new bN(i,e,t,r)}function HC(i){return i=i.prototype,!(!i||!i.isReactComponent)}function SN(i){if(typeof i=="function")return HC(i)?1:0;if(i!=null){if(i=i.$$typeof,i===aC)return 11;if(i===lC)return 14}return 2}function Zh(i,e){var t=i.alternate;return t===null?(t=Ol(i.tag,e,i.key,i.mode),t.elementType=i.elementType,t.type=i.type,t.stateNode=i.stateNode,t.alternate=i,i.alternate=t):(t.pendingProps=e,t.type=i.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=i.flags&14680064,t.childLanes=i.childLanes,t.lanes=i.lanes,t.child=i.child,t.memoizedProps=i.memoizedProps,t.memoizedState=i.memoizedState,t.updateQueue=i.updateQueue,e=i.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=i.sibling,t.index=i.index,t.ref=i.ref,t}function E1(i,e,t,r,o,a){var l=2;if(r=i,typeof i=="function")HC(i)&&(l=1);else if(typeof i=="string")l=5;else e:switch(i){case dm:return Bf(t.children,o,a,e);case oC:l=8,o|=8;break;case A2:return i=Ol(12,t,e,o|2),i.elementType=A2,i.lanes=a,i;case v2:return i=Ol(13,t,e,o),i.elementType=v2,i.lanes=a,i;case y2:return i=Ol(19,t,e,o),i.elementType=y2,i.lanes=a,i;case wR:return Ex(t,o,a,e);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case ER:l=10;break e;case _R:l=9;break e;case aC:l=11;break e;case lC:l=14;break e;case Oh:l=16,r=null;break e}throw Error(mn(130,i==null?i:typeof i,""))}return e=Ol(l,t,e,o),e.elementType=i,e.type=r,e.lanes=a,e}function Bf(i,e,t,r){return i=Ol(7,i,r,e),i.lanes=t,i}function Ex(i,e,t,r){return i=Ol(22,i,r,e),i.elementType=wR,i.lanes=t,i.stateNode={isHidden:!1},i}function C_(i,e,t){return i=Ol(6,i,null,e),i.lanes=t,i}function M_(i,e,t){return e=Ol(4,i.children!==null?i.children:[],i.key,e),e.lanes=t,e.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},e}function TN(i,e,t,r,o){this.tag=e,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=s_(0),this.expirationTimes=s_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=s_(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function VC(i,e,t,r,o,a,l,d,c){return i=new TN(i,e,t,d,c),e===1?(e=1,a===!0&&(e|=8)):e=0,a=Ol(3,null,null,e),i.current=a,a.stateNode=i,a.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},bC(a),i}function IN(i,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:hm,key:r==null?null:""+r,children:i,containerInfo:e,implementation:t}}function mL(i){if(!i)return td;i=i._reactInternals;e:{if(Yf(i)!==i||i.tag!==1)throw Error(mn(170));var e=i;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Xa(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(mn(171))}if(i.tag===1){var t=i.type;if(Xa(t))return pB(i,t,e)}return e}function gL(i,e,t,r,o,a,l,d,c){return i=VC(t,r,!0,i,o,a,l,d,c),i.context=mL(null),t=i.current,r=xa(),o=Jh(t),a=Qu(r,o),a.callback=e??null,Yh(t,a,o),i.current.lanes=o,R0(i,o,r),Ka(i,r),i}function _x(i,e,t,r){var o=e.current,a=xa(),l=Jh(o);return t=mL(t),e.context===null?e.context=t:e.pendingContext=t,e=Qu(a,l),e.payload={element:i},r=r===void 0?null:r,r!==null&&(e.callback=r),i=Yh(o,e,l),i!==null&&(Ac(i,o,l,a),m1(i,o,l)),l}function ex(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function aT(i,e){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var t=i.retryLane;i.retryLane=t!==0&&t<e?t:e}}function QC(i,e){aT(i,e),(i=i.alternate)&&aT(i,e)}function RN(){return null}var AL=typeof reportError=="function"?reportError:function(i){console.error(i)};function WC(i){this._internalRoot=i}wx.prototype.render=WC.prototype.render=function(i){var e=this._internalRoot;if(e===null)throw Error(mn(409));_x(i,e,null,null)};wx.prototype.unmount=WC.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var e=i.containerInfo;Hf(function(){_x(null,i,null,null)}),e[Ku]=null}};function wx(i){this._internalRoot=i}wx.prototype.unstable_scheduleHydration=function(i){if(i){var e=XR();i={blockedOn:null,target:i,priority:e};for(var t=0;t<Uh.length&&e!==0&&e<Uh[t].priority;t++);Uh.splice(t,0,i),t===0&&YR(i)}};function jC(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function Cx(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function lT(){}function BN(i,e,t,r,o){if(o){if(typeof r=="function"){var a=r;r=function(){var h=ex(l);a.call(h)}}var l=gL(e,r,i,0,null,!1,!1,"",lT);return i._reactRootContainer=l,i[Ku]=l.current,a0(i.nodeType===8?i.parentNode:i),Hf(),l}for(;o=i.lastChild;)i.removeChild(o);if(typeof r=="function"){var d=r;r=function(){var h=ex(c);d.call(h)}}var c=VC(i,0,!1,null,null,!1,!1,"",lT);return i._reactRootContainer=c,i[Ku]=c.current,a0(i.nodeType===8?i.parentNode:i),Hf(function(){_x(e,c,t,r)}),c}function Mx(i,e,t,r,o){var a=t._reactRootContainer;if(a){var l=a;if(typeof o=="function"){var d=o;o=function(){var c=ex(l);d.call(c)}}_x(e,l,i,o)}else l=BN(t,e,i,o,r);return ex(l)}WR=function(i){switch(i.tag){case 3:var e=i.stateNode;if(e.current.memoizedState.isDehydrated){var t=PA(e.pendingLanes);t!==0&&(hC(e,t|1),Ka(e,Ws()),!(Pr&6)&&(Hm=Ws()+500,cd()))}break;case 13:Hf(function(){var r=Yu(i,1);if(r!==null){var o=xa();Ac(r,i,1,o)}}),QC(i,1)}};dC=function(i){if(i.tag===13){var e=Yu(i,134217728);if(e!==null){var t=xa();Ac(e,i,134217728,t)}QC(i,134217728)}};jR=function(i){if(i.tag===13){var e=Jh(i),t=Yu(i,e);if(t!==null){var r=xa();Ac(t,i,e,r)}QC(i,e)}};XR=function(){return Yr};KR=function(i,e){var t=Yr;try{return Yr=i,e()}finally{Yr=t}};I2=function(i,e,t){switch(e){case"input":if(_2(i,t),e=t.name,t.type==="radio"&&e!=null){for(t=i;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==i&&r.form===i.form){var o=mx(r);if(!o)throw Error(mn(90));MR(r),_2(r,o)}}}break;case"textarea":SR(i,t);break;case"select":e=t.value,e!=null&&bm(i,!!t.multiple,e,!1)}};PR=UC;OR=Hf;var LN={usingClientEntryPoint:!1,Events:[L0,gm,mx,LR,DR,UC]},mA={findFiberByHostInstance:Ef,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},DN={bundleType:mA.bundleType,version:mA.version,rendererPackageName:mA.rendererPackageName,rendererConfig:mA.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:eh.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=kR(i),i===null?null:i.stateNode},findFiberByHostInstance:mA.findFiberByHostInstance||RN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xy.isDisabled&&xy.supportsFiber)try{hx=xy.inject(DN),ou=xy}catch{}}Al.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=LN;Al.createPortal=function(i,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!jC(e))throw Error(mn(200));return IN(i,e,null,t)};Al.createRoot=function(i,e){if(!jC(i))throw Error(mn(299));var t=!1,r="",o=AL;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),e=VC(i,1,!1,null,null,t,!1,r,o),i[Ku]=e.current,a0(i.nodeType===8?i.parentNode:i),new WC(e)};Al.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var e=i._reactInternals;if(e===void 0)throw typeof i.render=="function"?Error(mn(188)):(i=Object.keys(i).join(","),Error(mn(268,i)));return i=kR(e),i=i===null?null:i.stateNode,i};Al.flushSync=function(i){return Hf(i)};Al.hydrate=function(i,e,t){if(!Cx(e))throw Error(mn(200));return Mx(null,i,e,!0,t)};Al.hydrateRoot=function(i,e,t){if(!jC(i))throw Error(mn(405));var r=t!=null&&t.hydratedSources||null,o=!1,a="",l=AL;if(t!=null&&(t.unstable_strictMode===!0&&(o=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(l=t.onRecoverableError)),e=gL(e,null,i,1,t??null,o,!1,a,l),i[Ku]=e.current,a0(i),r)for(i=0;i<r.length;i++)t=r[i],o=t._getVersion,o=o(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,o]:e.mutableSourceEagerHydrationData.push(t,o);return new wx(e)};Al.render=function(i,e,t){if(!Cx(e))throw Error(mn(200));return Mx(null,i,e,!1,t)};Al.unmountComponentAtNode=function(i){if(!Cx(i))throw Error(mn(40));return i._reactRootContainer?(Hf(function(){Mx(null,null,i,!1,function(){i._reactRootContainer=null,i[Ku]=null})}),!0):!1};Al.unstable_batchedUpdates=UC;Al.unstable_renderSubtreeIntoContainer=function(i,e,t,r){if(!Cx(t))throw Error(mn(200));if(i==null||i._reactInternals===void 0)throw Error(mn(38));return Mx(i,e,t,!1,r)};Al.version="18.2.0-next-9e3b772b8-20220608";(function(i){function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}e(),i.exports=Al})(R6);var cT=p2;f2.createRoot=cT.createRoot,f2.hydrateRoot=cT.hydrateRoot;/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const bx="151",gf={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Af={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},vL=0,lw=1,yL=2,PN=3,xL=0,Sx=1,KA=2,Cf=3,cu=0,Ea=1,pc=2,ON=2,Wu=0,Lf=1,cw=2,uw=3,hw=4,EL=5,yf=100,_L=101,wL=102,dw=103,fw=104,CL=200,ML=201,bL=202,SL=203,XC=204,KC=205,TL=206,IL=207,RL=208,BL=209,LL=210,DL=0,PL=1,OL=2,tx=3,FL=4,NL=5,kL=6,UL=7,P0=0,zL=1,GL=2,vc=0,HL=1,VL=2,QL=3,YC=4,WL=5,Tx=300,nd=301,id=302,g0=303,A0=304,rg=306,rd=1e3,Uo=1001,Vm=1002,Ps=1003,v0=1004,FN=1004,Lm=1005,NN=1005,ws=1006,Ix=1007,kN=1007,uu=1008,UN=1008,Ju=1009,jL=1010,XL=1011,qC=1012,KL=1013,Vh=1014,Vu=1015,Qm=1016,YL=1017,qL=1018,Df=1020,JL=1021,Qa=1023,ZL=1024,$L=1025,$h=1026,Vf=1027,eD=1028,tD=1029,nD=1030,iD=1031,rD=1033,_1=33776,w1=33777,C1=33778,M1=33779,pw=35840,mw=35841,gw=35842,Aw=35843,sD=36196,vw=37492,yw=37496,xw=37808,Ew=37809,_w=37810,ww=37811,Cw=37812,Mw=37813,bw=37814,Sw=37815,Tw=37816,Iw=37817,Rw=37818,Bw=37819,Lw=37820,Dw=37821,b1=36492,oD=36283,Pw=36284,Ow=36285,Fw=36286,aD=2200,lD=2201,cD=2202,Wm=2300,Qf=2301,S1=2302,Mf=2400,bf=2401,y0=2402,Rx=2500,JC=2501,uD=0,ZC=1,nx=2,Zu=3e3,Dr=3001,hD=3200,dD=3201,ud=0,fD=1,zN="",uc="srgb",jm="srgb-linear",$C="display-p3",GN=0,T1=7680,HN=7681,VN=7682,QN=7683,WN=34055,jN=34056,XN=5386,KN=512,YN=513,qN=514,JN=515,ZN=516,$N=517,ek=518,pD=519,x0=35044,tk=35048,nk=35040,ik=35045,rk=35049,sk=35041,ok=35046,ak=35050,lk=35042,ck="100",Nw="300 es",ix=1035;class du{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const o=this._listeners[e];if(o!==void 0){const a=o.indexOf(t);a!==-1&&o.splice(a,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const o=r.slice(0);for(let a=0,l=o.length;a<l;a++)o[a].call(this,e);e.target=null}}}const sa=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let uT=1234567;const Pf=Math.PI/180,Xm=180/Math.PI;function ml(){const i=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(sa[i&255]+sa[i>>8&255]+sa[i>>16&255]+sa[i>>24&255]+"-"+sa[e&255]+sa[e>>8&255]+"-"+sa[e>>16&15|64]+sa[e>>24&255]+"-"+sa[t&63|128]+sa[t>>8&255]+"-"+sa[t>>16&255]+sa[t>>24&255]+sa[r&255]+sa[r>>8&255]+sa[r>>16&255]+sa[r>>24&255]).toLowerCase()}function Os(i,e,t){return Math.max(e,Math.min(t,i))}function eM(i,e){return(i%e+e)%e}function uk(i,e,t,r,o){return r+(i-e)*(o-r)/(t-e)}function hk(i,e,t){return i!==e?(t-i)/(e-i):0}function YA(i,e,t){return(1-t)*i+t*e}function dk(i,e,t,r){return YA(i,e,1-Math.exp(-t*r))}function fk(i,e=1){return e-Math.abs(eM(i,e*2)-e)}function pk(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*(3-2*i))}function mk(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*i*(i*(i*6-15)+10))}function gk(i,e){return i+Math.floor(Math.random()*(e-i+1))}function Ak(i,e){return i+Math.random()*(e-i)}function vk(i){return i*(.5-Math.random())}function yk(i){i!==void 0&&(uT=i);let e=uT+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function xk(i){return i*Pf}function Ek(i){return i*Xm}function kw(i){return(i&i-1)===0&&i!==0}function mD(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function gD(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}function _k(i,e,t,r,o){const a=Math.cos,l=Math.sin,d=a(t/2),c=l(t/2),h=a((e+r)/2),m=l((e+r)/2),p=a((e-r)/2),A=l((e-r)/2),v=a((r-e)/2),y=l((r-e)/2);switch(o){case"XYX":i.set(d*m,c*p,c*A,d*h);break;case"YZY":i.set(c*A,d*m,c*p,d*h);break;case"ZXZ":i.set(c*p,c*A,d*m,d*h);break;case"XZX":i.set(d*m,c*y,c*v,d*h);break;case"YXY":i.set(c*v,d*m,c*y,d*h);break;case"ZYZ":i.set(c*y,c*v,d*m,d*h);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+o)}}function dl(i,e){switch(e.constructor){case Float32Array:return i;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function ir(i,e){switch(e.constructor){case Float32Array:return i;case Uint16Array:return Math.round(i*65535);case Uint8Array:return Math.round(i*255);case Int16Array:return Math.round(i*32767);case Int8Array:return Math.round(i*127);default:throw new Error("Invalid component type.")}}const AD={DEG2RAD:Pf,RAD2DEG:Xm,generateUUID:ml,clamp:Os,euclideanModulo:eM,mapLinear:uk,inverseLerp:hk,lerp:YA,damp:dk,pingpong:fk,smoothstep:pk,smootherstep:mk,randInt:gk,randFloat:Ak,randFloatSpread:vk,seededRandom:yk,degToRad:xk,radToDeg:Ek,isPowerOfTwo:kw,ceilPowerOfTwo:mD,floorPowerOfTwo:gD,setQuaternionFromProperEuler:_k,normalize:ir,denormalize:dl};class Yt{constructor(e=0,t=0){Yt.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,o=e.elements;return this.x=o[0]*t+o[3]*r+o[6],this.y=o[1]*t+o[4]*r+o[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(Os(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),o=Math.sin(t),a=this.x-e.x,l=this.y-e.y;return this.x=a*r-l*o+e.x,this.y=a*o+l*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class pr{constructor(){pr.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,r,o,a,l,d,c,h){const m=this.elements;return m[0]=e,m[1]=o,m[2]=d,m[3]=t,m[4]=a,m[5]=c,m[6]=r,m[7]=l,m[8]=h,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,o=t.elements,a=this.elements,l=r[0],d=r[3],c=r[6],h=r[1],m=r[4],p=r[7],A=r[2],v=r[5],y=r[8],x=o[0],C=o[3],g=o[6],b=o[1],_=o[4],S=o[7],R=o[2],P=o[5],O=o[8];return a[0]=l*x+d*b+c*R,a[3]=l*C+d*_+c*P,a[6]=l*g+d*S+c*O,a[1]=h*x+m*b+p*R,a[4]=h*C+m*_+p*P,a[7]=h*g+m*S+p*O,a[2]=A*x+v*b+y*R,a[5]=A*C+v*_+y*P,a[8]=A*g+v*S+y*O,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],o=e[2],a=e[3],l=e[4],d=e[5],c=e[6],h=e[7],m=e[8];return t*l*m-t*d*h-r*a*m+r*d*c+o*a*h-o*l*c}invert(){const e=this.elements,t=e[0],r=e[1],o=e[2],a=e[3],l=e[4],d=e[5],c=e[6],h=e[7],m=e[8],p=m*l-d*h,A=d*c-m*a,v=h*a-l*c,y=t*p+r*A+o*v;if(y===0)return this.set(0,0,0,0,0,0,0,0,0);const x=1/y;return e[0]=p*x,e[1]=(o*h-m*r)*x,e[2]=(d*r-o*l)*x,e[3]=A*x,e[4]=(m*t-o*c)*x,e[5]=(o*a-d*t)*x,e[6]=v*x,e[7]=(r*c-h*t)*x,e[8]=(l*t-r*a)*x,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,o,a,l,d){const c=Math.cos(a),h=Math.sin(a);return this.set(r*c,r*h,-r*(c*l+h*d)+l+e,-o*h,o*c,-o*(-h*l+c*d)+d+t,0,0,1),this}scale(e,t){return this.premultiply(b_.makeScale(e,t)),this}rotate(e){return this.premultiply(b_.makeRotation(-e)),this}translate(e,t){return this.premultiply(b_.makeTranslation(e,t)),this}makeTranslation(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,r,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,r=e.elements;for(let o=0;o<9;o++)if(t[o]!==r[o])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const b_=new pr;function vD(i){for(let e=i.length-1;e>=0;--e)if(i[e]>=65535)return!0;return!1}const wk={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function wm(i,e){return new wk[i](e)}function E0(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}function Dm(i){return i<.04045?i*.0773993808:Math.pow(i*.9478672986+.0521327014,2.4)}function S_(i){return i<.0031308?i*12.92:1.055*Math.pow(i,.41666)-.055}const Ck=new pr().fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),Mk=new pr().fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]);function bk(i){return i.convertSRGBToLinear().applyMatrix3(Mk)}function Sk(i){return i.applyMatrix3(Ck).convertLinearToSRGB()}const Tk={[jm]:i=>i,[uc]:i=>i.convertSRGBToLinear(),[$C]:bk},Ik={[jm]:i=>i,[uc]:i=>i.convertLinearToSRGB(),[$C]:Sk},Ua={enabled:!1,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(i){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!i},get workingColorSpace(){return jm},set workingColorSpace(i){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(i,e,t){if(this.enabled===!1||e===t||!e||!t)return i;const r=Tk[e],o=Ik[t];if(r===void 0||o===void 0)throw new Error(`Unsupported color space conversion, "${e}" to "${t}".`);return o(r(i))},fromWorkingColorSpace:function(i,e){return this.convert(i,this.workingColorSpace,e)},toWorkingColorSpace:function(i,e){return this.convert(i,e,this.workingColorSpace)}};let Up;class tM{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Up===void 0&&(Up=E0("canvas")),Up.width=e.width,Up.height=e.height;const r=Up.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=Up}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=E0("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const o=r.getImageData(0,0,e.width,e.height),a=o.data;for(let l=0;l<a.length;l++)a[l]=Dm(a[l]/255)*255;return r.putImageData(o,0,0),t}else if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(Dm(t[r]/255)*255):t[r]=Dm(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class Sf{constructor(e=null){this.isSource=!0,this.uuid=ml(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},o=this.data;if(o!==null){let a;if(Array.isArray(o)){a=[];for(let l=0,d=o.length;l<d;l++)o[l].isDataTexture?a.push(T_(o[l].image)):a.push(T_(o[l]))}else a=T_(o);r.url=a}return t||(e.images[this.uuid]=r),r}}function T_(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?tM.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Rk=0;class As extends du{constructor(e=As.DEFAULT_IMAGE,t=As.DEFAULT_MAPPING,r=Uo,o=Uo,a=ws,l=uu,d=Qa,c=Ju,h=As.DEFAULT_ANISOTROPY,m=Zu){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Rk++}),this.uuid=ml(),this.name="",this.source=new Sf(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=r,this.wrapT=o,this.magFilter=a,this.minFilter=l,this.anisotropy=h,this.format=d,this.internalFormat=null,this.type=c,this.offset=new Yt(0,0),this.repeat=new Yt(1,1),this.center=new Yt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new pr,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=m,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Tx)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case rd:e.x=e.x-Math.floor(e.x);break;case Uo:e.x=e.x<0?0:1;break;case Vm:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case rd:e.y=e.y-Math.floor(e.y);break;case Uo:e.y=e.y<0?0:1;break;case Vm:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}}As.DEFAULT_IMAGE=null;As.DEFAULT_MAPPING=Tx;As.DEFAULT_ANISOTROPY=1;class Kr{constructor(e=0,t=0,r=0,o=1){Kr.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=o}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,o){return this.x=e,this.y=t,this.z=r,this.w=o,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,o=this.z,a=this.w,l=e.elements;return this.x=l[0]*t+l[4]*r+l[8]*o+l[12]*a,this.y=l[1]*t+l[5]*r+l[9]*o+l[13]*a,this.z=l[2]*t+l[6]*r+l[10]*o+l[14]*a,this.w=l[3]*t+l[7]*r+l[11]*o+l[15]*a,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,o,a;const c=e.elements,h=c[0],m=c[4],p=c[8],A=c[1],v=c[5],y=c[9],x=c[2],C=c[6],g=c[10];if(Math.abs(m-A)<.01&&Math.abs(p-x)<.01&&Math.abs(y-C)<.01){if(Math.abs(m+A)<.1&&Math.abs(p+x)<.1&&Math.abs(y+C)<.1&&Math.abs(h+v+g-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const _=(h+1)/2,S=(v+1)/2,R=(g+1)/2,P=(m+A)/4,O=(p+x)/4,D=(y+C)/4;return _>S&&_>R?_<.01?(r=0,o=.707106781,a=.707106781):(r=Math.sqrt(_),o=P/r,a=O/r):S>R?S<.01?(r=.707106781,o=0,a=.707106781):(o=Math.sqrt(S),r=P/o,a=D/o):R<.01?(r=.707106781,o=.707106781,a=0):(a=Math.sqrt(R),r=O/a,o=D/a),this.set(r,o,a,t),this}let b=Math.sqrt((C-y)*(C-y)+(p-x)*(p-x)+(A-m)*(A-m));return Math.abs(b)<.001&&(b=1),this.x=(C-y)/b,this.y=(p-x)/b,this.z=(A-m)/b,this.w=Math.acos((h+v+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class xc extends du{constructor(e=1,t=1,r={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Kr(0,0,e,t),this.scissorTest=!1,this.viewport=new Kr(0,0,e,t);const o={width:e,height:t,depth:1};this.texture=new As(o,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps!==void 0?r.generateMipmaps:!1,this.texture.internalFormat=r.internalFormat!==void 0?r.internalFormat:null,this.texture.minFilter=r.minFilter!==void 0?r.minFilter:ws,this.depthBuffer=r.depthBuffer!==void 0?r.depthBuffer:!0,this.stencilBuffer=r.stencilBuffer!==void 0?r.stencilBuffer:!1,this.depthTexture=r.depthTexture!==void 0?r.depthTexture:null,this.samples=r.samples!==void 0?r.samples:0}setSize(e,t,r=1){(this.width!==e||this.height!==t||this.depth!==r)&&(this.width=e,this.height=t,this.depth=r,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Sf(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Bx extends As{constructor(e=null,t=1,r=1,o=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:o},this.magFilter=Ps,this.minFilter=Ps,this.wrapR=Uo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Bk extends xc{constructor(e=1,t=1,r=1){super(e,t),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new Bx(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class nM extends As{constructor(e=null,t=1,r=1,o=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:o},this.magFilter=Ps,this.minFilter=Ps,this.wrapR=Uo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Lk extends xc{constructor(e=1,t=1,r=1){super(e,t),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new nM(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class Dk extends xc{constructor(e=1,t=1,r=1,o={}){super(e,t,o),this.isWebGLMultipleRenderTargets=!0;const a=this.texture;this.texture=[];for(let l=0;l<r;l++)this.texture[l]=a.clone(),this.texture[l].isRenderTargetTexture=!0}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let o=0,a=this.texture.length;o<a;o++)this.texture[o].image.width=e,this.texture[o].image.height=t,this.texture[o].image.depth=r;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,r=e.texture.length;t<r;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class Oo{constructor(e=0,t=0,r=0,o=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=o}static slerpFlat(e,t,r,o,a,l,d){let c=r[o+0],h=r[o+1],m=r[o+2],p=r[o+3];const A=a[l+0],v=a[l+1],y=a[l+2],x=a[l+3];if(d===0){e[t+0]=c,e[t+1]=h,e[t+2]=m,e[t+3]=p;return}if(d===1){e[t+0]=A,e[t+1]=v,e[t+2]=y,e[t+3]=x;return}if(p!==x||c!==A||h!==v||m!==y){let C=1-d;const g=c*A+h*v+m*y+p*x,b=g>=0?1:-1,_=1-g*g;if(_>Number.EPSILON){const R=Math.sqrt(_),P=Math.atan2(R,g*b);C=Math.sin(C*P)/R,d=Math.sin(d*P)/R}const S=d*b;if(c=c*C+A*S,h=h*C+v*S,m=m*C+y*S,p=p*C+x*S,C===1-d){const R=1/Math.sqrt(c*c+h*h+m*m+p*p);c*=R,h*=R,m*=R,p*=R}}e[t]=c,e[t+1]=h,e[t+2]=m,e[t+3]=p}static multiplyQuaternionsFlat(e,t,r,o,a,l){const d=r[o],c=r[o+1],h=r[o+2],m=r[o+3],p=a[l],A=a[l+1],v=a[l+2],y=a[l+3];return e[t]=d*y+m*p+c*v-h*A,e[t+1]=c*y+m*A+h*p-d*v,e[t+2]=h*y+m*v+d*A-c*p,e[t+3]=m*y-d*p-c*A-h*v,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,o){return this._x=e,this._y=t,this._z=r,this._w=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const r=e._x,o=e._y,a=e._z,l=e._order,d=Math.cos,c=Math.sin,h=d(r/2),m=d(o/2),p=d(a/2),A=c(r/2),v=c(o/2),y=c(a/2);switch(l){case"XYZ":this._x=A*m*p+h*v*y,this._y=h*v*p-A*m*y,this._z=h*m*y+A*v*p,this._w=h*m*p-A*v*y;break;case"YXZ":this._x=A*m*p+h*v*y,this._y=h*v*p-A*m*y,this._z=h*m*y-A*v*p,this._w=h*m*p+A*v*y;break;case"ZXY":this._x=A*m*p-h*v*y,this._y=h*v*p+A*m*y,this._z=h*m*y+A*v*p,this._w=h*m*p-A*v*y;break;case"ZYX":this._x=A*m*p-h*v*y,this._y=h*v*p+A*m*y,this._z=h*m*y-A*v*p,this._w=h*m*p+A*v*y;break;case"YZX":this._x=A*m*p+h*v*y,this._y=h*v*p+A*m*y,this._z=h*m*y-A*v*p,this._w=h*m*p-A*v*y;break;case"XZY":this._x=A*m*p-h*v*y,this._y=h*v*p-A*m*y,this._z=h*m*y+A*v*p,this._w=h*m*p+A*v*y;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+l)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,o=Math.sin(r);return this._x=e.x*o,this._y=e.y*o,this._z=e.z*o,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],o=t[4],a=t[8],l=t[1],d=t[5],c=t[9],h=t[2],m=t[6],p=t[10],A=r+d+p;if(A>0){const v=.5/Math.sqrt(A+1);this._w=.25/v,this._x=(m-c)*v,this._y=(a-h)*v,this._z=(l-o)*v}else if(r>d&&r>p){const v=2*Math.sqrt(1+r-d-p);this._w=(m-c)/v,this._x=.25*v,this._y=(o+l)/v,this._z=(a+h)/v}else if(d>p){const v=2*Math.sqrt(1+d-r-p);this._w=(a-h)/v,this._x=(o+l)/v,this._y=.25*v,this._z=(c+m)/v}else{const v=2*Math.sqrt(1+p-r-d);this._w=(l-o)/v,this._x=(a+h)/v,this._y=(c+m)/v,this._z=.25*v}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Os(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(r===0)return this;const o=Math.min(1,t/r);return this.slerp(e,o),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,o=e._y,a=e._z,l=e._w,d=t._x,c=t._y,h=t._z,m=t._w;return this._x=r*m+l*d+o*h-a*c,this._y=o*m+l*c+a*d-r*h,this._z=a*m+l*h+r*c-o*d,this._w=l*m-r*d-o*c-a*h,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const r=this._x,o=this._y,a=this._z,l=this._w;let d=l*e._w+r*e._x+o*e._y+a*e._z;if(d<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,d=-d):this.copy(e),d>=1)return this._w=l,this._x=r,this._y=o,this._z=a,this;const c=1-d*d;if(c<=Number.EPSILON){const v=1-t;return this._w=v*l+t*this._w,this._x=v*r+t*this._x,this._y=v*o+t*this._y,this._z=v*a+t*this._z,this.normalize(),this._onChangeCallback(),this}const h=Math.sqrt(c),m=Math.atan2(h,d),p=Math.sin((1-t)*m)/h,A=Math.sin(t*m)/h;return this._w=l*p+this._w*A,this._x=r*p+this._x*A,this._y=o*p+this._y*A,this._z=a*p+this._z*A,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=Math.random(),t=Math.sqrt(1-e),r=Math.sqrt(e),o=2*Math.PI*Math.random(),a=2*Math.PI*Math.random();return this.set(t*Math.cos(o),r*Math.sin(a),r*Math.cos(a),t*Math.sin(o))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Ue{constructor(e=0,t=0,r=0){Ue.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(hT.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(hT.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,o=this.z,a=e.elements;return this.x=a[0]*t+a[3]*r+a[6]*o,this.y=a[1]*t+a[4]*r+a[7]*o,this.z=a[2]*t+a[5]*r+a[8]*o,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,o=this.z,a=e.elements,l=1/(a[3]*t+a[7]*r+a[11]*o+a[15]);return this.x=(a[0]*t+a[4]*r+a[8]*o+a[12])*l,this.y=(a[1]*t+a[5]*r+a[9]*o+a[13])*l,this.z=(a[2]*t+a[6]*r+a[10]*o+a[14])*l,this}applyQuaternion(e){const t=this.x,r=this.y,o=this.z,a=e.x,l=e.y,d=e.z,c=e.w,h=c*t+l*o-d*r,m=c*r+d*t-a*o,p=c*o+a*r-l*t,A=-a*t-l*r-d*o;return this.x=h*c+A*-a+m*-d-p*-l,this.y=m*c+A*-l+p*-a-h*-d,this.z=p*c+A*-d+h*-l-m*-a,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,o=this.z,a=e.elements;return this.x=a[0]*t+a[4]*r+a[8]*o,this.y=a[1]*t+a[5]*r+a[9]*o,this.z=a[2]*t+a[6]*r+a[10]*o,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,o=e.y,a=e.z,l=t.x,d=t.y,c=t.z;return this.x=o*c-a*d,this.y=a*l-r*c,this.z=r*d-o*l,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return I_.copy(this).projectOnVector(e),this.sub(I_)}reflect(e){return this.sub(I_.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(Os(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,o=this.z-e.z;return t*t+r*r+o*o}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const o=Math.sin(t)*e;return this.x=o*Math.sin(r),this.y=Math.cos(t)*e,this.z=o*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),o=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=o,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(t),this.y=r*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const I_=new Ue,hT=new Oo;class _c{constructor(e=new Ue(1/0,1/0,1/0),t=new Ue(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t+=3)this.expandByPoint(Bu.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,r=e.count;t<r;t++)this.expandByPoint(Bu.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=Bu.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){if(e.updateWorldMatrix(!1,!1),e.boundingBox!==void 0)e.boundingBox===null&&e.computeBoundingBox(),zp.copy(e.boundingBox),zp.applyMatrix4(e.matrixWorld),this.union(zp);else{const o=e.geometry;if(o!==void 0)if(t&&o.attributes!==void 0&&o.attributes.position!==void 0){const a=o.attributes.position;for(let l=0,d=a.count;l<d;l++)Bu.fromBufferAttribute(a,l).applyMatrix4(e.matrixWorld),this.expandByPoint(Bu)}else o.boundingBox===null&&o.computeBoundingBox(),zp.copy(o.boundingBox),zp.applyMatrix4(e.matrixWorld),this.union(zp)}const r=e.children;for(let o=0,a=r.length;o<a;o++)this.expandByObject(r[o],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Bu),Bu.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(gA),Ey.subVectors(this.max,gA),Gp.subVectors(e.a,gA),Hp.subVectors(e.b,gA),Vp.subVectors(e.c,gA),Ih.subVectors(Hp,Gp),Rh.subVectors(Vp,Hp),of.subVectors(Gp,Vp);let t=[0,-Ih.z,Ih.y,0,-Rh.z,Rh.y,0,-of.z,of.y,Ih.z,0,-Ih.x,Rh.z,0,-Rh.x,of.z,0,-of.x,-Ih.y,Ih.x,0,-Rh.y,Rh.x,0,-of.y,of.x,0];return!R_(t,Gp,Hp,Vp,Ey)||(t=[1,0,0,0,1,0,0,0,1],!R_(t,Gp,Hp,Vp,Ey))?!1:(_y.crossVectors(Ih,Rh),t=[_y.x,_y.y,_y.z],R_(t,Gp,Hp,Vp,Ey))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Bu).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Bu).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Ru[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Ru[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Ru[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Ru[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Ru[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Ru[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Ru[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Ru[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Ru),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Ru=[new Ue,new Ue,new Ue,new Ue,new Ue,new Ue,new Ue,new Ue],Bu=new Ue,zp=new _c,Gp=new Ue,Hp=new Ue,Vp=new Ue,Ih=new Ue,Rh=new Ue,of=new Ue,gA=new Ue,Ey=new Ue,_y=new Ue,af=new Ue;function R_(i,e,t,r,o){for(let a=0,l=i.length-3;a<=l;a+=3){af.fromArray(i,a);const d=o.x*Math.abs(af.x)+o.y*Math.abs(af.y)+o.z*Math.abs(af.z),c=e.dot(af),h=t.dot(af),m=r.dot(af);if(Math.max(-Math.max(c,h,m),Math.min(c,h,m))>d)return!1}return!0}const Pk=new _c,AA=new Ue,B_=new Ue;class wc{constructor(e=new Ue,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;t!==void 0?r.copy(t):Pk.setFromPoints(e).getCenter(r);let o=0;for(let a=0,l=e.length;a<l;a++)o=Math.max(o,r.distanceToSquared(e[a]));return this.radius=Math.sqrt(o),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;AA.subVectors(e,this.center);const t=AA.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),o=(r-this.radius)*.5;this.center.addScaledVector(AA,o/r),this.radius+=o}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(B_.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(AA.copy(e.center).add(B_)),this.expandByPoint(AA.copy(e.center).sub(B_))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Lu=new Ue,L_=new Ue,wy=new Ue,Bh=new Ue,D_=new Ue,Cy=new Ue,P_=new Ue;class O0{constructor(e=new Ue,t=new Ue(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Lu)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Lu.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Lu.copy(this.origin).addScaledVector(this.direction,t),Lu.distanceToSquared(e))}distanceSqToSegment(e,t,r,o){L_.copy(e).add(t).multiplyScalar(.5),wy.copy(t).sub(e).normalize(),Bh.copy(this.origin).sub(L_);const a=e.distanceTo(t)*.5,l=-this.direction.dot(wy),d=Bh.dot(this.direction),c=-Bh.dot(wy),h=Bh.lengthSq(),m=Math.abs(1-l*l);let p,A,v,y;if(m>0)if(p=l*c-d,A=l*d-c,y=a*m,p>=0)if(A>=-y)if(A<=y){const x=1/m;p*=x,A*=x,v=p*(p+l*A+2*d)+A*(l*p+A+2*c)+h}else A=a,p=Math.max(0,-(l*A+d)),v=-p*p+A*(A+2*c)+h;else A=-a,p=Math.max(0,-(l*A+d)),v=-p*p+A*(A+2*c)+h;else A<=-y?(p=Math.max(0,-(-l*a+d)),A=p>0?-a:Math.min(Math.max(-a,-c),a),v=-p*p+A*(A+2*c)+h):A<=y?(p=0,A=Math.min(Math.max(-a,-c),a),v=A*(A+2*c)+h):(p=Math.max(0,-(l*a+d)),A=p>0?a:Math.min(Math.max(-a,-c),a),v=-p*p+A*(A+2*c)+h);else A=l>0?-a:a,p=Math.max(0,-(l*A+d)),v=-p*p+A*(A+2*c)+h;return r&&r.copy(this.origin).addScaledVector(this.direction,p),o&&o.copy(L_).addScaledVector(wy,A),v}intersectSphere(e,t){Lu.subVectors(e.center,this.origin);const r=Lu.dot(this.direction),o=Lu.dot(Lu)-r*r,a=e.radius*e.radius;if(o>a)return null;const l=Math.sqrt(a-o),d=r-l,c=r+l;return c<0?null:d<0?this.at(c,t):this.at(d,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,o,a,l,d,c;const h=1/this.direction.x,m=1/this.direction.y,p=1/this.direction.z,A=this.origin;return h>=0?(r=(e.min.x-A.x)*h,o=(e.max.x-A.x)*h):(r=(e.max.x-A.x)*h,o=(e.min.x-A.x)*h),m>=0?(a=(e.min.y-A.y)*m,l=(e.max.y-A.y)*m):(a=(e.max.y-A.y)*m,l=(e.min.y-A.y)*m),r>l||a>o||((a>r||isNaN(r))&&(r=a),(l<o||isNaN(o))&&(o=l),p>=0?(d=(e.min.z-A.z)*p,c=(e.max.z-A.z)*p):(d=(e.max.z-A.z)*p,c=(e.min.z-A.z)*p),r>c||d>o)||((d>r||r!==r)&&(r=d),(c<o||o!==o)&&(o=c),o<0)?null:this.at(r>=0?r:o,t)}intersectsBox(e){return this.intersectBox(e,Lu)!==null}intersectTriangle(e,t,r,o,a){D_.subVectors(t,e),Cy.subVectors(r,e),P_.crossVectors(D_,Cy);let l=this.direction.dot(P_),d;if(l>0){if(o)return null;d=1}else if(l<0)d=-1,l=-l;else return null;Bh.subVectors(this.origin,e);const c=d*this.direction.dot(Cy.crossVectors(Bh,Cy));if(c<0)return null;const h=d*this.direction.dot(D_.cross(Bh));if(h<0||c+h>l)return null;const m=-d*Bh.dot(P_);return m<0?null:this.at(m/l,a)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class ki{constructor(){ki.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,r,o,a,l,d,c,h,m,p,A,v,y,x,C){const g=this.elements;return g[0]=e,g[4]=t,g[8]=r,g[12]=o,g[1]=a,g[5]=l,g[9]=d,g[13]=c,g[2]=h,g[6]=m,g[10]=p,g[14]=A,g[3]=v,g[7]=y,g[11]=x,g[15]=C,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new ki().fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,o=1/Qp.setFromMatrixColumn(e,0).length(),a=1/Qp.setFromMatrixColumn(e,1).length(),l=1/Qp.setFromMatrixColumn(e,2).length();return t[0]=r[0]*o,t[1]=r[1]*o,t[2]=r[2]*o,t[3]=0,t[4]=r[4]*a,t[5]=r[5]*a,t[6]=r[6]*a,t[7]=0,t[8]=r[8]*l,t[9]=r[9]*l,t[10]=r[10]*l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,r=e.x,o=e.y,a=e.z,l=Math.cos(r),d=Math.sin(r),c=Math.cos(o),h=Math.sin(o),m=Math.cos(a),p=Math.sin(a);if(e.order==="XYZ"){const A=l*m,v=l*p,y=d*m,x=d*p;t[0]=c*m,t[4]=-c*p,t[8]=h,t[1]=v+y*h,t[5]=A-x*h,t[9]=-d*c,t[2]=x-A*h,t[6]=y+v*h,t[10]=l*c}else if(e.order==="YXZ"){const A=c*m,v=c*p,y=h*m,x=h*p;t[0]=A+x*d,t[4]=y*d-v,t[8]=l*h,t[1]=l*p,t[5]=l*m,t[9]=-d,t[2]=v*d-y,t[6]=x+A*d,t[10]=l*c}else if(e.order==="ZXY"){const A=c*m,v=c*p,y=h*m,x=h*p;t[0]=A-x*d,t[4]=-l*p,t[8]=y+v*d,t[1]=v+y*d,t[5]=l*m,t[9]=x-A*d,t[2]=-l*h,t[6]=d,t[10]=l*c}else if(e.order==="ZYX"){const A=l*m,v=l*p,y=d*m,x=d*p;t[0]=c*m,t[4]=y*h-v,t[8]=A*h+x,t[1]=c*p,t[5]=x*h+A,t[9]=v*h-y,t[2]=-h,t[6]=d*c,t[10]=l*c}else if(e.order==="YZX"){const A=l*c,v=l*h,y=d*c,x=d*h;t[0]=c*m,t[4]=x-A*p,t[8]=y*p+v,t[1]=p,t[5]=l*m,t[9]=-d*m,t[2]=-h*m,t[6]=v*p+y,t[10]=A-x*p}else if(e.order==="XZY"){const A=l*c,v=l*h,y=d*c,x=d*h;t[0]=c*m,t[4]=-p,t[8]=h*m,t[1]=A*p+x,t[5]=l*m,t[9]=v*p-y,t[2]=y*p-v,t[6]=d*m,t[10]=x*p+A}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Ok,e,Fk)}lookAt(e,t,r){const o=this.elements;return ol.subVectors(e,t),ol.lengthSq()===0&&(ol.z=1),ol.normalize(),Lh.crossVectors(r,ol),Lh.lengthSq()===0&&(Math.abs(r.z)===1?ol.x+=1e-4:ol.z+=1e-4,ol.normalize(),Lh.crossVectors(r,ol)),Lh.normalize(),My.crossVectors(ol,Lh),o[0]=Lh.x,o[4]=My.x,o[8]=ol.x,o[1]=Lh.y,o[5]=My.y,o[9]=ol.y,o[2]=Lh.z,o[6]=My.z,o[10]=ol.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,o=t.elements,a=this.elements,l=r[0],d=r[4],c=r[8],h=r[12],m=r[1],p=r[5],A=r[9],v=r[13],y=r[2],x=r[6],C=r[10],g=r[14],b=r[3],_=r[7],S=r[11],R=r[15],P=o[0],O=o[4],D=o[8],L=o[12],N=o[1],H=o[5],J=o[9],K=o[13],se=o[2],ae=o[6],ee=o[10],ne=o[14],X=o[3],W=o[7],ce=o[11],he=o[15];return a[0]=l*P+d*N+c*se+h*X,a[4]=l*O+d*H+c*ae+h*W,a[8]=l*D+d*J+c*ee+h*ce,a[12]=l*L+d*K+c*ne+h*he,a[1]=m*P+p*N+A*se+v*X,a[5]=m*O+p*H+A*ae+v*W,a[9]=m*D+p*J+A*ee+v*ce,a[13]=m*L+p*K+A*ne+v*he,a[2]=y*P+x*N+C*se+g*X,a[6]=y*O+x*H+C*ae+g*W,a[10]=y*D+x*J+C*ee+g*ce,a[14]=y*L+x*K+C*ne+g*he,a[3]=b*P+_*N+S*se+R*X,a[7]=b*O+_*H+S*ae+R*W,a[11]=b*D+_*J+S*ee+R*ce,a[15]=b*L+_*K+S*ne+R*he,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],o=e[8],a=e[12],l=e[1],d=e[5],c=e[9],h=e[13],m=e[2],p=e[6],A=e[10],v=e[14],y=e[3],x=e[7],C=e[11],g=e[15];return y*(+a*c*p-o*h*p-a*d*A+r*h*A+o*d*v-r*c*v)+x*(+t*c*v-t*h*A+a*l*A-o*l*v+o*h*m-a*c*m)+C*(+t*h*p-t*d*v-a*l*p+r*l*v+a*d*m-r*h*m)+g*(-o*d*m-t*c*p+t*d*A+o*l*p-r*l*A+r*c*m)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const o=this.elements;return e.isVector3?(o[12]=e.x,o[13]=e.y,o[14]=e.z):(o[12]=e,o[13]=t,o[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],o=e[2],a=e[3],l=e[4],d=e[5],c=e[6],h=e[7],m=e[8],p=e[9],A=e[10],v=e[11],y=e[12],x=e[13],C=e[14],g=e[15],b=p*C*h-x*A*h+x*c*v-d*C*v-p*c*g+d*A*g,_=y*A*h-m*C*h-y*c*v+l*C*v+m*c*g-l*A*g,S=m*x*h-y*p*h+y*d*v-l*x*v-m*d*g+l*p*g,R=y*p*c-m*x*c-y*d*A+l*x*A+m*d*C-l*p*C,P=t*b+r*_+o*S+a*R;if(P===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const O=1/P;return e[0]=b*O,e[1]=(x*A*a-p*C*a-x*o*v+r*C*v+p*o*g-r*A*g)*O,e[2]=(d*C*a-x*c*a+x*o*h-r*C*h-d*o*g+r*c*g)*O,e[3]=(p*c*a-d*A*a-p*o*h+r*A*h+d*o*v-r*c*v)*O,e[4]=_*O,e[5]=(m*C*a-y*A*a+y*o*v-t*C*v-m*o*g+t*A*g)*O,e[6]=(y*c*a-l*C*a-y*o*h+t*C*h+l*o*g-t*c*g)*O,e[7]=(l*A*a-m*c*a+m*o*h-t*A*h-l*o*v+t*c*v)*O,e[8]=S*O,e[9]=(y*p*a-m*x*a-y*r*v+t*x*v+m*r*g-t*p*g)*O,e[10]=(l*x*a-y*d*a+y*r*h-t*x*h-l*r*g+t*d*g)*O,e[11]=(m*d*a-l*p*a-m*r*h+t*p*h+l*r*v-t*d*v)*O,e[12]=R*O,e[13]=(m*x*o-y*p*o+y*r*A-t*x*A-m*r*C+t*p*C)*O,e[14]=(y*d*o-l*x*o-y*r*c+t*x*c+l*r*C-t*d*C)*O,e[15]=(l*p*o-m*d*o+m*r*c-t*p*c-l*r*A+t*d*A)*O,this}scale(e){const t=this.elements,r=e.x,o=e.y,a=e.z;return t[0]*=r,t[4]*=o,t[8]*=a,t[1]*=r,t[5]*=o,t[9]*=a,t[2]*=r,t[6]*=o,t[10]*=a,t[3]*=r,t[7]*=o,t[11]*=a,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],o=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,o))}makeTranslation(e,t,r){return this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),o=Math.sin(t),a=1-r,l=e.x,d=e.y,c=e.z,h=a*l,m=a*d;return this.set(h*l+r,h*d-o*c,h*c+o*d,0,h*d+o*c,m*d+r,m*c-o*l,0,h*c-o*d,m*c+o*l,a*c*c+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,o,a,l){return this.set(1,r,a,0,e,1,l,0,t,o,1,0,0,0,0,1),this}compose(e,t,r){const o=this.elements,a=t._x,l=t._y,d=t._z,c=t._w,h=a+a,m=l+l,p=d+d,A=a*h,v=a*m,y=a*p,x=l*m,C=l*p,g=d*p,b=c*h,_=c*m,S=c*p,R=r.x,P=r.y,O=r.z;return o[0]=(1-(x+g))*R,o[1]=(v+S)*R,o[2]=(y-_)*R,o[3]=0,o[4]=(v-S)*P,o[5]=(1-(A+g))*P,o[6]=(C+b)*P,o[7]=0,o[8]=(y+_)*O,o[9]=(C-b)*O,o[10]=(1-(A+x))*O,o[11]=0,o[12]=e.x,o[13]=e.y,o[14]=e.z,o[15]=1,this}decompose(e,t,r){const o=this.elements;let a=Qp.set(o[0],o[1],o[2]).length();const l=Qp.set(o[4],o[5],o[6]).length(),d=Qp.set(o[8],o[9],o[10]).length();this.determinant()<0&&(a=-a),e.x=o[12],e.y=o[13],e.z=o[14],rc.copy(this);const h=1/a,m=1/l,p=1/d;return rc.elements[0]*=h,rc.elements[1]*=h,rc.elements[2]*=h,rc.elements[4]*=m,rc.elements[5]*=m,rc.elements[6]*=m,rc.elements[8]*=p,rc.elements[9]*=p,rc.elements[10]*=p,t.setFromRotationMatrix(rc),r.x=a,r.y=l,r.z=d,this}makePerspective(e,t,r,o,a,l){const d=this.elements,c=2*a/(t-e),h=2*a/(r-o),m=(t+e)/(t-e),p=(r+o)/(r-o),A=-(l+a)/(l-a),v=-2*l*a/(l-a);return d[0]=c,d[4]=0,d[8]=m,d[12]=0,d[1]=0,d[5]=h,d[9]=p,d[13]=0,d[2]=0,d[6]=0,d[10]=A,d[14]=v,d[3]=0,d[7]=0,d[11]=-1,d[15]=0,this}makeOrthographic(e,t,r,o,a,l){const d=this.elements,c=1/(t-e),h=1/(r-o),m=1/(l-a),p=(t+e)*c,A=(r+o)*h,v=(l+a)*m;return d[0]=2*c,d[4]=0,d[8]=0,d[12]=-p,d[1]=0,d[5]=2*h,d[9]=0,d[13]=-A,d[2]=0,d[6]=0,d[10]=-2*m,d[14]=-v,d[3]=0,d[7]=0,d[11]=0,d[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let o=0;o<16;o++)if(t[o]!==r[o])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}const Qp=new Ue,rc=new ki,Ok=new Ue(0,0,0),Fk=new Ue(1,1,1),Lh=new Ue,My=new Ue,ol=new Ue,dT=new ki,fT=new Oo;class F0{constructor(e=0,t=0,r=0,o=F0.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=o}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,o=this._order){return this._x=e,this._y=t,this._z=r,this._order=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const o=e.elements,a=o[0],l=o[4],d=o[8],c=o[1],h=o[5],m=o[9],p=o[2],A=o[6],v=o[10];switch(t){case"XYZ":this._y=Math.asin(Os(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(-m,v),this._z=Math.atan2(-l,a)):(this._x=Math.atan2(A,h),this._z=0);break;case"YXZ":this._x=Math.asin(-Os(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(d,v),this._z=Math.atan2(c,h)):(this._y=Math.atan2(-p,a),this._z=0);break;case"ZXY":this._x=Math.asin(Os(A,-1,1)),Math.abs(A)<.9999999?(this._y=Math.atan2(-p,v),this._z=Math.atan2(-l,h)):(this._y=0,this._z=Math.atan2(c,a));break;case"ZYX":this._y=Math.asin(-Os(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(A,v),this._z=Math.atan2(c,a)):(this._x=0,this._z=Math.atan2(-l,h));break;case"YZX":this._z=Math.asin(Os(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-m,h),this._y=Math.atan2(-p,a)):(this._x=0,this._y=Math.atan2(d,v));break;case"XZY":this._z=Math.asin(-Os(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(A,h),this._y=Math.atan2(d,a)):(this._x=Math.atan2(-m,v),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return dT.makeRotationFromQuaternion(e),this.setFromRotationMatrix(dT,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return fT.setFromEuler(this),this.setFromQuaternion(fT,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}F0.DEFAULT_ORDER="XYZ";class Of{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let Nk=0;const pT=new Ue,Wp=new Oo,Du=new ki,by=new Ue,vA=new Ue,kk=new Ue,Uk=new Oo,mT=new Ue(1,0,0),gT=new Ue(0,1,0),AT=new Ue(0,0,1),zk={type:"added"},vT={type:"removed"};class Tr extends du{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Nk++}),this.uuid=ml(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Tr.DEFAULT_UP.clone();const e=new Ue,t=new F0,r=new Oo,o=new Ue(1,1,1);function a(){r.setFromEuler(t,!1)}function l(){t.setFromQuaternion(r,void 0,!1)}t._onChange(a),r._onChange(l),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new ki},normalMatrix:{value:new pr}}),this.matrix=new ki,this.matrixWorld=new ki,this.matrixAutoUpdate=Tr.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Tr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new Of,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Wp.setFromAxisAngle(e,t),this.quaternion.multiply(Wp),this}rotateOnWorldAxis(e,t){return Wp.setFromAxisAngle(e,t),this.quaternion.premultiply(Wp),this}rotateX(e){return this.rotateOnAxis(mT,e)}rotateY(e){return this.rotateOnAxis(gT,e)}rotateZ(e){return this.rotateOnAxis(AT,e)}translateOnAxis(e,t){return pT.copy(e).applyQuaternion(this.quaternion),this.position.add(pT.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(mT,e)}translateY(e){return this.translateOnAxis(gT,e)}translateZ(e){return this.translateOnAxis(AT,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Du.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?by.copy(e):by.set(e,t,r);const o=this.parent;this.updateWorldMatrix(!0,!1),vA.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Du.lookAt(vA,by,this.up):Du.lookAt(by,vA,this.up),this.quaternion.setFromRotationMatrix(Du),o&&(Du.extractRotation(o.matrixWorld),Wp.setFromRotationMatrix(Du),this.quaternion.premultiply(Wp.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(zk)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(vT)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(vT)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Du.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Du.multiply(e.parent.matrixWorld)),e.applyMatrix4(Du),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,o=this.children.length;r<o;r++){const l=this.children[r].getObjectByProperty(e,t);if(l!==void 0)return l}}getObjectsByProperty(e,t){let r=[];this[e]===t&&r.push(this);for(let o=0,a=this.children.length;o<a;o++){const l=this.children[o].getObjectsByProperty(e,t);l.length>0&&(r=r.concat(l))}return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(vA,e,kk),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(vA,Uk,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,o=t.length;r<o;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let r=0,o=t.length;r<o;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,o=t.length;r<o;r++){const a=t[r];(a.matrixWorldAutoUpdate===!0||e===!0)&&a.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const o=this.children;for(let a=0,l=o.length;a<l;a++){const d=o[a];d.matrixWorldAutoUpdate===!0&&d.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const o={};o.uuid=this.uuid,o.type=this.type,this.name!==""&&(o.name=this.name),this.castShadow===!0&&(o.castShadow=!0),this.receiveShadow===!0&&(o.receiveShadow=!0),this.visible===!1&&(o.visible=!1),this.frustumCulled===!1&&(o.frustumCulled=!1),this.renderOrder!==0&&(o.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(o.userData=this.userData),o.layers=this.layers.mask,o.matrix=this.matrix.toArray(),o.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(o.matrixAutoUpdate=!1),this.isInstancedMesh&&(o.type="InstancedMesh",o.count=this.count,o.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(o.instanceColor=this.instanceColor.toJSON()));function a(d,c){return d[c.uuid]===void 0&&(d[c.uuid]=c.toJSON(e)),c.uuid}if(this.isScene)this.background&&(this.background.isColor?o.background=this.background.toJSON():this.background.isTexture&&(o.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(o.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){o.geometry=a(e.geometries,this.geometry);const d=this.geometry.parameters;if(d!==void 0&&d.shapes!==void 0){const c=d.shapes;if(Array.isArray(c))for(let h=0,m=c.length;h<m;h++){const p=c[h];a(e.shapes,p)}else a(e.shapes,c)}}if(this.isSkinnedMesh&&(o.bindMode=this.bindMode,o.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(a(e.skeletons,this.skeleton),o.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const d=[];for(let c=0,h=this.material.length;c<h;c++)d.push(a(e.materials,this.material[c]));o.material=d}else o.material=a(e.materials,this.material);if(this.children.length>0){o.children=[];for(let d=0;d<this.children.length;d++)o.children.push(this.children[d].toJSON(e).object)}if(this.animations.length>0){o.animations=[];for(let d=0;d<this.animations.length;d++){const c=this.animations[d];o.animations.push(a(e.animations,c))}}if(t){const d=l(e.geometries),c=l(e.materials),h=l(e.textures),m=l(e.images),p=l(e.shapes),A=l(e.skeletons),v=l(e.animations),y=l(e.nodes);d.length>0&&(r.geometries=d),c.length>0&&(r.materials=c),h.length>0&&(r.textures=h),m.length>0&&(r.images=m),p.length>0&&(r.shapes=p),A.length>0&&(r.skeletons=A),v.length>0&&(r.animations=v),y.length>0&&(r.nodes=y)}return r.object=o,r;function l(d){const c=[];for(const h in d){const m=d[h];delete m.metadata,c.push(m)}return c}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){const o=e.children[r];this.add(o.clone())}return this}}Tr.DEFAULT_UP=new Ue(0,1,0);Tr.DEFAULT_MATRIX_AUTO_UPDATE=!0;Tr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const sc=new Ue,Pu=new Ue,O_=new Ue,Ou=new Ue,jp=new Ue,Xp=new Ue,yT=new Ue,F_=new Ue,N_=new Ue,k_=new Ue;let Sy=!1;class Va{constructor(e=new Ue,t=new Ue,r=new Ue){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,o){o.subVectors(r,t),sc.subVectors(e,t),o.cross(sc);const a=o.lengthSq();return a>0?o.multiplyScalar(1/Math.sqrt(a)):o.set(0,0,0)}static getBarycoord(e,t,r,o,a){sc.subVectors(o,t),Pu.subVectors(r,t),O_.subVectors(e,t);const l=sc.dot(sc),d=sc.dot(Pu),c=sc.dot(O_),h=Pu.dot(Pu),m=Pu.dot(O_),p=l*h-d*d;if(p===0)return a.set(-2,-1,-1);const A=1/p,v=(h*c-d*m)*A,y=(l*m-d*c)*A;return a.set(1-v-y,y,v)}static containsPoint(e,t,r,o){return this.getBarycoord(e,t,r,o,Ou),Ou.x>=0&&Ou.y>=0&&Ou.x+Ou.y<=1}static getUV(e,t,r,o,a,l,d,c){return Sy===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Sy=!0),this.getInterpolation(e,t,r,o,a,l,d,c)}static getInterpolation(e,t,r,o,a,l,d,c){return this.getBarycoord(e,t,r,o,Ou),c.setScalar(0),c.addScaledVector(a,Ou.x),c.addScaledVector(l,Ou.y),c.addScaledVector(d,Ou.z),c}static isFrontFacing(e,t,r,o){return sc.subVectors(r,t),Pu.subVectors(e,t),sc.cross(Pu).dot(o)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,o){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[o]),this}setFromAttributeAndIndices(e,t,r,o){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,o),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return sc.subVectors(this.c,this.b),Pu.subVectors(this.a,this.b),sc.cross(Pu).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Va.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Va.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,r,o,a){return Sy===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Sy=!0),Va.getInterpolation(e,this.a,this.b,this.c,t,r,o,a)}getInterpolation(e,t,r,o,a){return Va.getInterpolation(e,this.a,this.b,this.c,t,r,o,a)}containsPoint(e){return Va.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Va.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,o=this.b,a=this.c;let l,d;jp.subVectors(o,r),Xp.subVectors(a,r),F_.subVectors(e,r);const c=jp.dot(F_),h=Xp.dot(F_);if(c<=0&&h<=0)return t.copy(r);N_.subVectors(e,o);const m=jp.dot(N_),p=Xp.dot(N_);if(m>=0&&p<=m)return t.copy(o);const A=c*p-m*h;if(A<=0&&c>=0&&m<=0)return l=c/(c-m),t.copy(r).addScaledVector(jp,l);k_.subVectors(e,a);const v=jp.dot(k_),y=Xp.dot(k_);if(y>=0&&v<=y)return t.copy(a);const x=v*h-c*y;if(x<=0&&h>=0&&y<=0)return d=h/(h-y),t.copy(r).addScaledVector(Xp,d);const C=m*y-v*p;if(C<=0&&p-m>=0&&v-y>=0)return yT.subVectors(a,o),d=(p-m)/(p-m+(v-y)),t.copy(o).addScaledVector(yT,d);const g=1/(C+x+A);return l=x*g,d=A*g,t.copy(r).addScaledVector(jp,l).addScaledVector(Xp,d)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let Gk=0;class oo extends du{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Gk++}),this.uuid=ml(),this.name="",this.type="Material",this.blending=Lf,this.side=cu,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=XC,this.blendDst=KC,this.blendEquation=yf,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=tx,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=pD,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=T1,this.stencilZFail=T1,this.stencilZPass=T1,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const r=e[t];if(r===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const o=this[t];if(o===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}o&&o.isColor?o.set(r):o&&o.isVector3&&r&&r.isVector3?o.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==Lf&&(r.blending=this.blending),this.side!==cu&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.colorWrite=this.colorWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(r.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(r.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=this.flatShading),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function o(a){const l=[];for(const d in a){const c=a[d];delete c.metadata,l.push(c)}return l}if(t){const a=o(e.textures),l=o(e.images);a.length>0&&(r.textures=a),l.length>0&&(r.images=l)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(t!==null){const o=t.length;r=new Array(o);for(let a=0;a!==o;++a)r[a]=t[a].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}const yD={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},oc={h:0,s:0,l:0},Ty={h:0,s:0,l:0};function U_(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+(e-i)*6*t:t<1/2?e:t<2/3?i+(e-i)*6*(2/3-t):i}class Rn{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,t===void 0&&r===void 0?this.set(e):this.setRGB(e,t,r)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=uc){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Ua.toWorkingColorSpace(this,t),this}setRGB(e,t,r,o=Ua.workingColorSpace){return this.r=e,this.g=t,this.b=r,Ua.toWorkingColorSpace(this,o),this}setHSL(e,t,r,o=Ua.workingColorSpace){if(e=eM(e,1),t=Os(t,0,1),r=Os(r,0,1),t===0)this.r=this.g=this.b=r;else{const a=r<=.5?r*(1+t):r+t-r*t,l=2*r-a;this.r=U_(l,a,e+1/3),this.g=U_(l,a,e),this.b=U_(l,a,e-1/3)}return Ua.toWorkingColorSpace(this,o),this}setStyle(e,t=uc){function r(a){a!==void 0&&parseFloat(a)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let o;if(o=/^(\w+)\(([^\)]*)\)/.exec(e)){let a;const l=o[1],d=o[2];switch(l){case"rgb":case"rgba":if(a=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(d))return this.r=Math.min(255,parseInt(a[1],10))/255,this.g=Math.min(255,parseInt(a[2],10))/255,this.b=Math.min(255,parseInt(a[3],10))/255,Ua.toWorkingColorSpace(this,t),r(a[4]),this;if(a=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(d))return this.r=Math.min(100,parseInt(a[1],10))/100,this.g=Math.min(100,parseInt(a[2],10))/100,this.b=Math.min(100,parseInt(a[3],10))/100,Ua.toWorkingColorSpace(this,t),r(a[4]),this;break;case"hsl":case"hsla":if(a=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(d)){const c=parseFloat(a[1])/360,h=parseFloat(a[2])/100,m=parseFloat(a[3])/100;return r(a[4]),this.setHSL(c,h,m,t)}break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(o=/^\#([A-Fa-f\d]+)$/.exec(e)){const a=o[1],l=a.length;if(l===3)return this.setRGB(parseInt(a.charAt(0),16)/15,parseInt(a.charAt(1),16)/15,parseInt(a.charAt(2),16)/15,t);if(l===6)return this.setHex(parseInt(a,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=uc){const r=yD[e.toLowerCase()];return r!==void 0?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Dm(e.r),this.g=Dm(e.g),this.b=Dm(e.b),this}copyLinearToSRGB(e){return this.r=S_(e.r),this.g=S_(e.g),this.b=S_(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=uc){return Ua.fromWorkingColorSpace(oa.copy(this),e),Os(oa.r*255,0,255)<<16^Os(oa.g*255,0,255)<<8^Os(oa.b*255,0,255)<<0}getHexString(e=uc){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Ua.workingColorSpace){Ua.fromWorkingColorSpace(oa.copy(this),t);const r=oa.r,o=oa.g,a=oa.b,l=Math.max(r,o,a),d=Math.min(r,o,a);let c,h;const m=(d+l)/2;if(d===l)c=0,h=0;else{const p=l-d;switch(h=m<=.5?p/(l+d):p/(2-l-d),l){case r:c=(o-a)/p+(o<a?6:0);break;case o:c=(a-r)/p+2;break;case a:c=(r-o)/p+4;break}c/=6}return e.h=c,e.s=h,e.l=m,e}getRGB(e,t=Ua.workingColorSpace){return Ua.fromWorkingColorSpace(oa.copy(this),t),e.r=oa.r,e.g=oa.g,e.b=oa.b,e}getStyle(e=uc){Ua.fromWorkingColorSpace(oa.copy(this),e);const t=oa.r,r=oa.g,o=oa.b;return e!==uc?`color(${e} ${t.toFixed(3)} ${r.toFixed(3)} ${o.toFixed(3)})`:`rgb(${t*255|0},${r*255|0},${o*255|0})`}offsetHSL(e,t,r){return this.getHSL(oc),oc.h+=e,oc.s+=t,oc.l+=r,this.setHSL(oc.h,oc.s,oc.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(oc),e.getHSL(Ty);const r=YA(oc.h,Ty.h,t),o=YA(oc.s,Ty.s,t),a=YA(oc.l,Ty.l,t);return this.setHSL(r,o,a),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,r=this.g,o=this.b,a=e.elements;return this.r=a[0]*t+a[3]*r+a[6]*o,this.g=a[1]*t+a[4]*r+a[7]*o,this.b=a[2]*t+a[5]*r+a[8]*o,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const oa=new Rn;Rn.NAMES=yD;class fl extends oo{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Rn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=P0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Uu=Hk();function Hk(){const i=new ArrayBuffer(4),e=new Float32Array(i),t=new Uint32Array(i),r=new Uint32Array(512),o=new Uint32Array(512);for(let c=0;c<256;++c){const h=c-127;h<-27?(r[c]=0,r[c|256]=32768,o[c]=24,o[c|256]=24):h<-14?(r[c]=1024>>-h-14,r[c|256]=1024>>-h-14|32768,o[c]=-h-1,o[c|256]=-h-1):h<=15?(r[c]=h+15<<10,r[c|256]=h+15<<10|32768,o[c]=13,o[c|256]=13):h<128?(r[c]=31744,r[c|256]=64512,o[c]=24,o[c|256]=24):(r[c]=31744,r[c|256]=64512,o[c]=13,o[c|256]=13)}const a=new Uint32Array(2048),l=new Uint32Array(64),d=new Uint32Array(64);for(let c=1;c<1024;++c){let h=c<<13,m=0;for(;!(h&8388608);)h<<=1,m-=8388608;h&=-8388609,m+=947912704,a[c]=h|m}for(let c=1024;c<2048;++c)a[c]=939524096+(c-1024<<13);for(let c=1;c<31;++c)l[c]=c<<23;l[31]=1199570944,l[32]=2147483648;for(let c=33;c<63;++c)l[c]=2147483648+(c-32<<23);l[63]=3347054592;for(let c=1;c<64;++c)c!==32&&(d[c]=1024);return{floatView:e,uint32View:t,baseTable:r,shiftTable:o,mantissaTable:a,exponentTable:l,offsetTable:d}}function za(i){Math.abs(i)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),i=Os(i,-65504,65504),Uu.floatView[0]=i;const e=Uu.uint32View[0],t=e>>23&511;return Uu.baseTable[t]+((e&8388607)>>Uu.shiftTable[t])}function FA(i){const e=i>>10;return Uu.uint32View[0]=Uu.mantissaTable[Uu.offsetTable[e]+(i&1023)]+Uu.exponentTable[e],Uu.floatView[0]}const Vk={toHalfFloat:za,fromHalfFloat:FA},ro=new Ue,Iy=new Yt;class Qr{constructor(e,t,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r,this.usage=x0,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let o=0,a=this.itemSize;o<a;o++)this.array[e+o]=t.array[r+o];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)Iy.fromBufferAttribute(this,t),Iy.applyMatrix3(e),this.setXY(t,Iy.x,Iy.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)ro.fromBufferAttribute(this,t),ro.applyMatrix3(e),this.setXYZ(t,ro.x,ro.y,ro.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)ro.fromBufferAttribute(this,t),ro.applyMatrix4(e),this.setXYZ(t,ro.x,ro.y,ro.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)ro.fromBufferAttribute(this,t),ro.applyNormalMatrix(e),this.setXYZ(t,ro.x,ro.y,ro.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)ro.fromBufferAttribute(this,t),ro.transformDirection(e),this.setXYZ(t,ro.x,ro.y,ro.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=dl(t,this.array)),t}setX(e,t){return this.normalized&&(t=ir(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=dl(t,this.array)),t}setY(e,t){return this.normalized&&(t=ir(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=dl(t,this.array)),t}setZ(e,t){return this.normalized&&(t=ir(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=dl(t,this.array)),t}setW(e,t){return this.normalized&&(t=ir(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=ir(t,this.array),r=ir(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,o){return e*=this.itemSize,this.normalized&&(t=ir(t,this.array),r=ir(r,this.array),o=ir(o,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=o,this}setXYZW(e,t,r,o,a){return e*=this.itemSize,this.normalized&&(t=ir(t,this.array),r=ir(r,this.array),o=ir(o,this.array),a=ir(a,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=o,this.array[e+3]=a,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==x0&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class Qk extends Qr{constructor(e,t,r){super(new Int8Array(e),t,r)}}class Wk extends Qr{constructor(e,t,r){super(new Uint8Array(e),t,r)}}class jk extends Qr{constructor(e,t,r){super(new Uint8ClampedArray(e),t,r)}}class Xk extends Qr{constructor(e,t,r){super(new Int16Array(e),t,r)}}class iM extends Qr{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class Kk extends Qr{constructor(e,t,r){super(new Int32Array(e),t,r)}}class rM extends Qr{constructor(e,t,r){super(new Uint32Array(e),t,r)}}class Yk extends Qr{constructor(e,t,r){super(new Uint16Array(e),t,r),this.isFloat16BufferAttribute=!0}getX(e){let t=FA(this.array[e*this.itemSize]);return this.normalized&&(t=dl(t,this.array)),t}setX(e,t){return this.normalized&&(t=ir(t,this.array)),this.array[e*this.itemSize]=za(t),this}getY(e){let t=FA(this.array[e*this.itemSize+1]);return this.normalized&&(t=dl(t,this.array)),t}setY(e,t){return this.normalized&&(t=ir(t,this.array)),this.array[e*this.itemSize+1]=za(t),this}getZ(e){let t=FA(this.array[e*this.itemSize+2]);return this.normalized&&(t=dl(t,this.array)),t}setZ(e,t){return this.normalized&&(t=ir(t,this.array)),this.array[e*this.itemSize+2]=za(t),this}getW(e){let t=FA(this.array[e*this.itemSize+3]);return this.normalized&&(t=dl(t,this.array)),t}setW(e,t){return this.normalized&&(t=ir(t,this.array)),this.array[e*this.itemSize+3]=za(t),this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=ir(t,this.array),r=ir(r,this.array)),this.array[e+0]=za(t),this.array[e+1]=za(r),this}setXYZ(e,t,r,o){return e*=this.itemSize,this.normalized&&(t=ir(t,this.array),r=ir(r,this.array),o=ir(o,this.array)),this.array[e+0]=za(t),this.array[e+1]=za(r),this.array[e+2]=za(o),this}setXYZW(e,t,r,o,a){return e*=this.itemSize,this.normalized&&(t=ir(t,this.array),r=ir(r,this.array),o=ir(o,this.array),a=ir(a,this.array)),this.array[e+0]=za(t),this.array[e+1]=za(r),this.array[e+2]=za(o),this.array[e+3]=za(a),this}}class di extends Qr{constructor(e,t,r){super(new Float32Array(e),t,r)}}class qk extends Qr{constructor(e,t,r){super(new Float64Array(e),t,r)}}let Jk=0;const Rl=new ki,z_=new Tr,Kp=new Ue,al=new _c,yA=new _c,Bo=new Ue;class Zi extends du{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Jk++}),this.uuid=ml(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(vD(e)?rM:iM)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const a=new pr().getNormalMatrix(e);r.applyNormalMatrix(a),r.needsUpdate=!0}const o=this.attributes.tangent;return o!==void 0&&(o.transformDirection(e),o.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Rl.makeRotationFromQuaternion(e),this.applyMatrix4(Rl),this}rotateX(e){return Rl.makeRotationX(e),this.applyMatrix4(Rl),this}rotateY(e){return Rl.makeRotationY(e),this.applyMatrix4(Rl),this}rotateZ(e){return Rl.makeRotationZ(e),this.applyMatrix4(Rl),this}translate(e,t,r){return Rl.makeTranslation(e,t,r),this.applyMatrix4(Rl),this}scale(e,t,r){return Rl.makeScale(e,t,r),this.applyMatrix4(Rl),this}lookAt(e){return z_.lookAt(e),z_.updateMatrix(),this.applyMatrix4(z_.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Kp).negate(),this.translate(Kp.x,Kp.y,Kp.z),this}setFromPoints(e){const t=[];for(let r=0,o=e.length;r<o;r++){const a=e[r];t.push(a.x,a.y,a.z||0)}return this.setAttribute("position",new di(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new _c);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new Ue(-1/0,-1/0,-1/0),new Ue(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,o=t.length;r<o;r++){const a=t[r];al.setFromBufferAttribute(a),this.morphTargetsRelative?(Bo.addVectors(this.boundingBox.min,al.min),this.boundingBox.expandByPoint(Bo),Bo.addVectors(this.boundingBox.max,al.max),this.boundingBox.expandByPoint(Bo)):(this.boundingBox.expandByPoint(al.min),this.boundingBox.expandByPoint(al.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new wc);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new Ue,1/0);return}if(e){const r=this.boundingSphere.center;if(al.setFromBufferAttribute(e),t)for(let a=0,l=t.length;a<l;a++){const d=t[a];yA.setFromBufferAttribute(d),this.morphTargetsRelative?(Bo.addVectors(al.min,yA.min),al.expandByPoint(Bo),Bo.addVectors(al.max,yA.max),al.expandByPoint(Bo)):(al.expandByPoint(yA.min),al.expandByPoint(yA.max))}al.getCenter(r);let o=0;for(let a=0,l=e.count;a<l;a++)Bo.fromBufferAttribute(e,a),o=Math.max(o,r.distanceToSquared(Bo));if(t)for(let a=0,l=t.length;a<l;a++){const d=t[a],c=this.morphTargetsRelative;for(let h=0,m=d.count;h<m;h++)Bo.fromBufferAttribute(d,h),c&&(Kp.fromBufferAttribute(e,h),Bo.add(Kp)),o=Math.max(o,r.distanceToSquared(Bo))}this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=e.array,o=t.position.array,a=t.normal.array,l=t.uv.array,d=o.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Qr(new Float32Array(4*d),4));const c=this.getAttribute("tangent").array,h=[],m=[];for(let N=0;N<d;N++)h[N]=new Ue,m[N]=new Ue;const p=new Ue,A=new Ue,v=new Ue,y=new Yt,x=new Yt,C=new Yt,g=new Ue,b=new Ue;function _(N,H,J){p.fromArray(o,N*3),A.fromArray(o,H*3),v.fromArray(o,J*3),y.fromArray(l,N*2),x.fromArray(l,H*2),C.fromArray(l,J*2),A.sub(p),v.sub(p),x.sub(y),C.sub(y);const K=1/(x.x*C.y-C.x*x.y);isFinite(K)&&(g.copy(A).multiplyScalar(C.y).addScaledVector(v,-x.y).multiplyScalar(K),b.copy(v).multiplyScalar(x.x).addScaledVector(A,-C.x).multiplyScalar(K),h[N].add(g),h[H].add(g),h[J].add(g),m[N].add(b),m[H].add(b),m[J].add(b))}let S=this.groups;S.length===0&&(S=[{start:0,count:r.length}]);for(let N=0,H=S.length;N<H;++N){const J=S[N],K=J.start,se=J.count;for(let ae=K,ee=K+se;ae<ee;ae+=3)_(r[ae+0],r[ae+1],r[ae+2])}const R=new Ue,P=new Ue,O=new Ue,D=new Ue;function L(N){O.fromArray(a,N*3),D.copy(O);const H=h[N];R.copy(H),R.sub(O.multiplyScalar(O.dot(H))).normalize(),P.crossVectors(D,H);const K=P.dot(m[N])<0?-1:1;c[N*4]=R.x,c[N*4+1]=R.y,c[N*4+2]=R.z,c[N*4+3]=K}for(let N=0,H=S.length;N<H;++N){const J=S[N],K=J.start,se=J.count;for(let ae=K,ee=K+se;ae<ee;ae+=3)L(r[ae+0]),L(r[ae+1]),L(r[ae+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Qr(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let A=0,v=r.count;A<v;A++)r.setXYZ(A,0,0,0);const o=new Ue,a=new Ue,l=new Ue,d=new Ue,c=new Ue,h=new Ue,m=new Ue,p=new Ue;if(e)for(let A=0,v=e.count;A<v;A+=3){const y=e.getX(A+0),x=e.getX(A+1),C=e.getX(A+2);o.fromBufferAttribute(t,y),a.fromBufferAttribute(t,x),l.fromBufferAttribute(t,C),m.subVectors(l,a),p.subVectors(o,a),m.cross(p),d.fromBufferAttribute(r,y),c.fromBufferAttribute(r,x),h.fromBufferAttribute(r,C),d.add(m),c.add(m),h.add(m),r.setXYZ(y,d.x,d.y,d.z),r.setXYZ(x,c.x,c.y,c.z),r.setXYZ(C,h.x,h.y,h.z)}else for(let A=0,v=t.count;A<v;A+=3)o.fromBufferAttribute(t,A+0),a.fromBufferAttribute(t,A+1),l.fromBufferAttribute(t,A+2),m.subVectors(l,a),p.subVectors(o,a),m.cross(p),r.setXYZ(A+0,m.x,m.y,m.z),r.setXYZ(A+1,m.x,m.y,m.z),r.setXYZ(A+2,m.x,m.y,m.z);this.normalizeNormals(),r.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)Bo.fromBufferAttribute(e,t),Bo.normalize(),e.setXYZ(t,Bo.x,Bo.y,Bo.z)}toNonIndexed(){function e(d,c){const h=d.array,m=d.itemSize,p=d.normalized,A=new h.constructor(c.length*m);let v=0,y=0;for(let x=0,C=c.length;x<C;x++){d.isInterleavedBufferAttribute?v=c[x]*d.data.stride+d.offset:v=c[x]*m;for(let g=0;g<m;g++)A[y++]=h[v++]}return new Qr(A,m,p)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Zi,r=this.index.array,o=this.attributes;for(const d in o){const c=o[d],h=e(c,r);t.setAttribute(d,h)}const a=this.morphAttributes;for(const d in a){const c=[],h=a[d];for(let m=0,p=h.length;m<p;m++){const A=h[m],v=e(A,r);c.push(v)}t.morphAttributes[d]=c}t.morphTargetsRelative=this.morphTargetsRelative;const l=this.groups;for(let d=0,c=l.length;d<c;d++){const h=l[d];t.addGroup(h.start,h.count,h.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const c=this.parameters;for(const h in c)c[h]!==void 0&&(e[h]=c[h]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const c in r){const h=r[c];e.data.attributes[c]=h.toJSON(e.data)}const o={};let a=!1;for(const c in this.morphAttributes){const h=this.morphAttributes[c],m=[];for(let p=0,A=h.length;p<A;p++){const v=h[p];m.push(v.toJSON(e.data))}m.length>0&&(o[c]=m,a=!0)}a&&(e.data.morphAttributes=o,e.data.morphTargetsRelative=this.morphTargetsRelative);const l=this.groups;l.length>0&&(e.data.groups=JSON.parse(JSON.stringify(l)));const d=this.boundingSphere;return d!==null&&(e.data.boundingSphere={center:d.center.toArray(),radius:d.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(t));const o=e.attributes;for(const h in o){const m=o[h];this.setAttribute(h,m.clone(t))}const a=e.morphAttributes;for(const h in a){const m=[],p=a[h];for(let A=0,v=p.length;A<v;A++)m.push(p[A].clone(t));this.morphAttributes[h]=m}this.morphTargetsRelative=e.morphTargetsRelative;const l=e.groups;for(let h=0,m=l.length;h<m;h++){const p=l[h];this.addGroup(p.start,p.count,p.materialIndex)}const d=e.boundingBox;d!==null&&(this.boundingBox=d.clone());const c=e.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const xT=new ki,nu=new O0,Ry=new wc,ET=new Ue,Yp=new Ue,qp=new Ue,Jp=new Ue,G_=new Ue,By=new Ue,Ly=new Yt,Dy=new Yt,Py=new Yt,_T=new Ue,wT=new Ue,CT=new Ue,Oy=new Ue,Fy=new Ue;class Do extends Tr{constructor(e=new Zi,t=new fl){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const o=t[r[0]];if(o!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,l=o.length;a<l;a++){const d=o[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[d]=a}}}}getVertexPosition(e,t){const r=this.geometry,o=r.attributes.position,a=r.morphAttributes.position,l=r.morphTargetsRelative;t.fromBufferAttribute(o,e);const d=this.morphTargetInfluences;if(a&&d){By.set(0,0,0);for(let c=0,h=a.length;c<h;c++){const m=d[c],p=a[c];m!==0&&(G_.fromBufferAttribute(p,e),l?By.addScaledVector(G_,m):By.addScaledVector(G_.sub(t),m))}t.add(By)}return this.isSkinnedMesh&&this.applyBoneTransform(e,t),t}raycast(e,t){const r=this.geometry,o=this.material,a=this.matrixWorld;if(o===void 0||(r.boundingSphere===null&&r.computeBoundingSphere(),Ry.copy(r.boundingSphere),Ry.applyMatrix4(a),nu.copy(e.ray).recast(e.near),Ry.containsPoint(nu.origin)===!1&&(nu.intersectSphere(Ry,ET)===null||nu.origin.distanceToSquared(ET)>(e.far-e.near)**2))||(xT.copy(a).invert(),nu.copy(e.ray).applyMatrix4(xT),r.boundingBox!==null&&nu.intersectsBox(r.boundingBox)===!1))return;let l;const d=r.index,c=r.attributes.position,h=r.attributes.uv,m=r.attributes.uv2,p=r.attributes.normal,A=r.groups,v=r.drawRange;if(d!==null)if(Array.isArray(o))for(let y=0,x=A.length;y<x;y++){const C=A[y],g=o[C.materialIndex],b=Math.max(C.start,v.start),_=Math.min(d.count,Math.min(C.start+C.count,v.start+v.count));for(let S=b,R=_;S<R;S+=3){const P=d.getX(S),O=d.getX(S+1),D=d.getX(S+2);l=Ny(this,g,e,nu,h,m,p,P,O,D),l&&(l.faceIndex=Math.floor(S/3),l.face.materialIndex=C.materialIndex,t.push(l))}}else{const y=Math.max(0,v.start),x=Math.min(d.count,v.start+v.count);for(let C=y,g=x;C<g;C+=3){const b=d.getX(C),_=d.getX(C+1),S=d.getX(C+2);l=Ny(this,o,e,nu,h,m,p,b,_,S),l&&(l.faceIndex=Math.floor(C/3),t.push(l))}}else if(c!==void 0)if(Array.isArray(o))for(let y=0,x=A.length;y<x;y++){const C=A[y],g=o[C.materialIndex],b=Math.max(C.start,v.start),_=Math.min(c.count,Math.min(C.start+C.count,v.start+v.count));for(let S=b,R=_;S<R;S+=3){const P=S,O=S+1,D=S+2;l=Ny(this,g,e,nu,h,m,p,P,O,D),l&&(l.faceIndex=Math.floor(S/3),l.face.materialIndex=C.materialIndex,t.push(l))}}else{const y=Math.max(0,v.start),x=Math.min(c.count,v.start+v.count);for(let C=y,g=x;C<g;C+=3){const b=C,_=C+1,S=C+2;l=Ny(this,o,e,nu,h,m,p,b,_,S),l&&(l.faceIndex=Math.floor(C/3),t.push(l))}}}}function Zk(i,e,t,r,o,a,l,d){let c;if(e.side===Ea?c=r.intersectTriangle(l,a,o,!0,d):c=r.intersectTriangle(o,a,l,e.side===cu,d),c===null)return null;Fy.copy(d),Fy.applyMatrix4(i.matrixWorld);const h=t.ray.origin.distanceTo(Fy);return h<t.near||h>t.far?null:{distance:h,point:Fy.clone(),object:i}}function Ny(i,e,t,r,o,a,l,d,c,h){i.getVertexPosition(d,Yp),i.getVertexPosition(c,qp),i.getVertexPosition(h,Jp);const m=Zk(i,e,t,r,Yp,qp,Jp,Oy);if(m){o&&(Ly.fromBufferAttribute(o,d),Dy.fromBufferAttribute(o,c),Py.fromBufferAttribute(o,h),m.uv=Va.getInterpolation(Oy,Yp,qp,Jp,Ly,Dy,Py,new Yt)),a&&(Ly.fromBufferAttribute(a,d),Dy.fromBufferAttribute(a,c),Py.fromBufferAttribute(a,h),m.uv2=Va.getInterpolation(Oy,Yp,qp,Jp,Ly,Dy,Py,new Yt)),l&&(_T.fromBufferAttribute(l,d),wT.fromBufferAttribute(l,c),CT.fromBufferAttribute(l,h),m.normal=Va.getInterpolation(Oy,Yp,qp,Jp,_T,wT,CT,new Ue),m.normal.dot(r.direction)>0&&m.normal.multiplyScalar(-1));const p={a:d,b:c,c:h,normal:new Ue,materialIndex:0};Va.getNormal(Yp,qp,Jp,p.normal),m.face=p}return m}class hd extends Zi{constructor(e=1,t=1,r=1,o=1,a=1,l=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:o,heightSegments:a,depthSegments:l};const d=this;o=Math.floor(o),a=Math.floor(a),l=Math.floor(l);const c=[],h=[],m=[],p=[];let A=0,v=0;y("z","y","x",-1,-1,r,t,e,l,a,0),y("z","y","x",1,-1,r,t,-e,l,a,1),y("x","z","y",1,1,e,r,t,o,l,2),y("x","z","y",1,-1,e,r,-t,o,l,3),y("x","y","z",1,-1,e,t,r,o,a,4),y("x","y","z",-1,-1,e,t,-r,o,a,5),this.setIndex(c),this.setAttribute("position",new di(h,3)),this.setAttribute("normal",new di(m,3)),this.setAttribute("uv",new di(p,2));function y(x,C,g,b,_,S,R,P,O,D,L){const N=S/O,H=R/D,J=S/2,K=R/2,se=P/2,ae=O+1,ee=D+1;let ne=0,X=0;const W=new Ue;for(let ce=0;ce<ee;ce++){const he=ce*H-K;for(let xe=0;xe<ae;xe++){const ve=xe*N-J;W[x]=ve*b,W[C]=he*_,W[g]=se,h.push(W.x,W.y,W.z),W[x]=0,W[C]=0,W[g]=P>0?1:-1,m.push(W.x,W.y,W.z),p.push(xe/O),p.push(1-ce/D),ne+=1}}for(let ce=0;ce<D;ce++)for(let he=0;he<O;he++){const xe=A+he+ae*ce,ve=A+he+ae*(ce+1),Fe=A+(he+1)+ae*(ce+1),je=A+(he+1)+ae*ce;c.push(xe,ve,je),c.push(ve,Fe,je),X+=6}d.addGroup(v,X,L),v+=X,A+=ne}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new hd(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Km(i){const e={};for(const t in i){e[t]={};for(const r in i[t]){const o=i[t][r];o&&(o.isColor||o.isMatrix3||o.isMatrix4||o.isVector2||o.isVector3||o.isVector4||o.isTexture||o.isQuaternion)?o.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][r]=null):e[t][r]=o.clone():Array.isArray(o)?e[t][r]=o.slice():e[t][r]=o}}return e}function va(i){const e={};for(let t=0;t<i.length;t++){const r=Km(i[t]);for(const o in r)e[o]=r[o]}return e}function $k(i){const e=[];for(let t=0;t<i.length;t++)e.push(i[t].clone());return e}function xD(i){return i.getRenderTarget()===null&&i.outputEncoding===Dr?uc:jm}const ED={clone:Km,merge:va};var eU=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,tU=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class hu extends oo{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=eU,this.fragmentShader=tU,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Km(e.uniforms),this.uniformsGroups=$k(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const o in this.uniforms){const l=this.uniforms[o].value;l&&l.isTexture?t.uniforms[o]={type:"t",value:l.toJSON(e).uuid}:l&&l.isColor?t.uniforms[o]={type:"c",value:l.getHex()}:l&&l.isVector2?t.uniforms[o]={type:"v2",value:l.toArray()}:l&&l.isVector3?t.uniforms[o]={type:"v3",value:l.toArray()}:l&&l.isVector4?t.uniforms[o]={type:"v4",value:l.toArray()}:l&&l.isMatrix3?t.uniforms[o]={type:"m3",value:l.toArray()}:l&&l.isMatrix4?t.uniforms[o]={type:"m4",value:l.toArray()}:t.uniforms[o]={value:l}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const r={};for(const o in this.extensions)this.extensions[o]===!0&&(r[o]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}class N0 extends Tr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new ki,this.projectionMatrix=new ki,this.projectionMatrixInverse=new ki}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class cs extends N0{constructor(e=50,t=1,r=.1,o=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=o,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Xm*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Pf*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Xm*2*Math.atan(Math.tan(Pf*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,r,o,a,l){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=o,this.view.width=a,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Pf*.5*this.fov)/this.zoom,r=2*t,o=this.aspect*r,a=-.5*o;const l=this.view;if(this.view!==null&&this.view.enabled){const c=l.fullWidth,h=l.fullHeight;a+=l.offsetX*o/c,t-=l.offsetY*r/h,o*=l.width/c,r*=l.height/h}const d=this.filmOffset;d!==0&&(a+=e*d/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+o,t,t-r,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Zp=-90,$p=1;class _D extends Tr{constructor(e,t,r){super(),this.type="CubeCamera",this.renderTarget=r;const o=new cs(Zp,$p,e,t);o.layers=this.layers,o.up.set(0,1,0),o.lookAt(1,0,0),this.add(o);const a=new cs(Zp,$p,e,t);a.layers=this.layers,a.up.set(0,1,0),a.lookAt(-1,0,0),this.add(a);const l=new cs(Zp,$p,e,t);l.layers=this.layers,l.up.set(0,0,-1),l.lookAt(0,1,0),this.add(l);const d=new cs(Zp,$p,e,t);d.layers=this.layers,d.up.set(0,0,1),d.lookAt(0,-1,0),this.add(d);const c=new cs(Zp,$p,e,t);c.layers=this.layers,c.up.set(0,1,0),c.lookAt(0,0,1),this.add(c);const h=new cs(Zp,$p,e,t);h.layers=this.layers,h.up.set(0,1,0),h.lookAt(0,0,-1),this.add(h)}update(e,t){this.parent===null&&this.updateMatrixWorld();const r=this.renderTarget,[o,a,l,d,c,h]=this.children,m=e.getRenderTarget(),p=e.toneMapping,A=e.xr.enabled;e.toneMapping=vc,e.xr.enabled=!1;const v=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(t,o),e.setRenderTarget(r,1),e.render(t,a),e.setRenderTarget(r,2),e.render(t,l),e.setRenderTarget(r,3),e.render(t,d),e.setRenderTarget(r,4),e.render(t,c),r.texture.generateMipmaps=v,e.setRenderTarget(r,5),e.render(t,h),e.setRenderTarget(m),e.toneMapping=p,e.xr.enabled=A,r.texture.needsPMREMUpdate=!0}}class k0 extends As{constructor(e,t,r,o,a,l,d,c,h,m){e=e!==void 0?e:[],t=t!==void 0?t:nd,super(e,t,r,o,a,l,d,c,h,m),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class wD extends xc{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},o=[r,r,r,r,r,r];this.texture=new k0(o,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:ws}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},o=new hd(5,5,5),a=new hu({name:"CubemapFromEquirect",uniforms:Km(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:Ea,blending:Wu});a.uniforms.tEquirect.value=t;const l=new Do(o,a),d=t.minFilter;return t.minFilter===uu&&(t.minFilter=ws),new _D(1,10,this).update(e,l),t.minFilter=d,l.geometry.dispose(),l.material.dispose(),this}clear(e,t,r,o){const a=e.getRenderTarget();for(let l=0;l<6;l++)e.setRenderTarget(this,l),e.clear(t,r,o);e.setRenderTarget(a)}}const H_=new Ue,nU=new Ue,iU=new pr;class Nh{constructor(e=new Ue(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,o){return this.normal.set(e,t,r),this.constant=o,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const o=H_.subVectors(r,t).cross(nU.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(o,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const r=e.delta(H_),o=this.normal.dot(r);if(o===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const a=-(e.start.dot(this.normal)+this.constant)/o;return a<0||a>1?null:t.copy(e.start).addScaledVector(r,a)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||iU.getNormalMatrix(e),o=this.coplanarPoint(H_).applyMatrix4(e),a=this.normal.applyMatrix3(r).normalize();return this.constant=-o.dot(a),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const lf=new wc,ky=new Ue;class Lx{constructor(e=new Nh,t=new Nh,r=new Nh,o=new Nh,a=new Nh,l=new Nh){this.planes=[e,t,r,o,a,l]}set(e,t,r,o,a,l){const d=this.planes;return d[0].copy(e),d[1].copy(t),d[2].copy(r),d[3].copy(o),d[4].copy(a),d[5].copy(l),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e){const t=this.planes,r=e.elements,o=r[0],a=r[1],l=r[2],d=r[3],c=r[4],h=r[5],m=r[6],p=r[7],A=r[8],v=r[9],y=r[10],x=r[11],C=r[12],g=r[13],b=r[14],_=r[15];return t[0].setComponents(d-o,p-c,x-A,_-C).normalize(),t[1].setComponents(d+o,p+c,x+A,_+C).normalize(),t[2].setComponents(d+a,p+h,x+v,_+g).normalize(),t[3].setComponents(d-a,p-h,x-v,_-g).normalize(),t[4].setComponents(d-l,p-m,x-y,_-b).normalize(),t[5].setComponents(d+l,p+m,x+y,_+b).normalize(),this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),lf.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),lf.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(lf)}intersectsSprite(e){return lf.center.set(0,0,0),lf.radius=.7071067811865476,lf.applyMatrix4(e.matrixWorld),this.intersectsSphere(lf)}intersectsSphere(e){const t=this.planes,r=e.center,o=-e.radius;for(let a=0;a<6;a++)if(t[a].distanceToPoint(r)<o)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const o=t[r];if(ky.x=o.normal.x>0?e.max.x:e.min.x,ky.y=o.normal.y>0?e.max.y:e.min.y,ky.z=o.normal.z>0?e.max.z:e.min.z,o.distanceToPoint(ky)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function CD(){let i=null,e=!1,t=null,r=null;function o(a,l){t(a,l),r=i.requestAnimationFrame(o)}return{start:function(){e!==!0&&t!==null&&(r=i.requestAnimationFrame(o),e=!0)},stop:function(){i.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(a){t=a},setContext:function(a){i=a}}}function rU(i,e){const t=e.isWebGL2,r=new WeakMap;function o(h,m){const p=h.array,A=h.usage,v=i.createBuffer();i.bindBuffer(m,v),i.bufferData(m,p,A),h.onUploadCallback();let y;if(p instanceof Float32Array)y=5126;else if(p instanceof Uint16Array)if(h.isFloat16BufferAttribute)if(t)y=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else y=5123;else if(p instanceof Int16Array)y=5122;else if(p instanceof Uint32Array)y=5125;else if(p instanceof Int32Array)y=5124;else if(p instanceof Int8Array)y=5120;else if(p instanceof Uint8Array)y=5121;else if(p instanceof Uint8ClampedArray)y=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+p);return{buffer:v,type:y,bytesPerElement:p.BYTES_PER_ELEMENT,version:h.version}}function a(h,m,p){const A=m.array,v=m.updateRange;i.bindBuffer(p,h),v.count===-1?i.bufferSubData(p,0,A):(t?i.bufferSubData(p,v.offset*A.BYTES_PER_ELEMENT,A,v.offset,v.count):i.bufferSubData(p,v.offset*A.BYTES_PER_ELEMENT,A.subarray(v.offset,v.offset+v.count)),v.count=-1),m.onUploadCallback()}function l(h){return h.isInterleavedBufferAttribute&&(h=h.data),r.get(h)}function d(h){h.isInterleavedBufferAttribute&&(h=h.data);const m=r.get(h);m&&(i.deleteBuffer(m.buffer),r.delete(h))}function c(h,m){if(h.isGLBufferAttribute){const A=r.get(h);(!A||A.version<h.version)&&r.set(h,{buffer:h.buffer,type:h.type,bytesPerElement:h.elementSize,version:h.version});return}h.isInterleavedBufferAttribute&&(h=h.data);const p=r.get(h);p===void 0?r.set(h,o(h,m)):p.version<h.version&&(a(p.buffer,h,m),p.version=h.version)}return{get:l,remove:d,update:c}}class sg extends Zi{constructor(e=1,t=1,r=1,o=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:o};const a=e/2,l=t/2,d=Math.floor(r),c=Math.floor(o),h=d+1,m=c+1,p=e/d,A=t/c,v=[],y=[],x=[],C=[];for(let g=0;g<m;g++){const b=g*A-l;for(let _=0;_<h;_++){const S=_*p-a;y.push(S,-b,0),x.push(0,0,1),C.push(_/d),C.push(1-g/c)}}for(let g=0;g<c;g++)for(let b=0;b<d;b++){const _=b+h*g,S=b+h*(g+1),R=b+1+h*(g+1),P=b+1+h*g;v.push(_,S,P),v.push(S,R,P)}this.setIndex(v),this.setAttribute("position",new di(y,3)),this.setAttribute("normal",new di(x,3)),this.setAttribute("uv",new di(C,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new sg(e.width,e.height,e.widthSegments,e.heightSegments)}}var sU=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,oU=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,aU=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,lU=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,cU=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,uU=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,hU="vec3 transformed = vec3( position );",dU=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,fU=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,pU=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,mU=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,gU=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,AU=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,vU=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,yU=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,xU=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,EU=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,_U=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,wU=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,CU=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,MU=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,bU=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,SU=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,TU=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,IU=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,RU=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,BU="gl_FragColor = linearToOutputTexel( gl_FragColor );",LU=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,DU=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,PU=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,OU=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,FU=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,NU=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,kU=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,UU=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,zU=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,GU=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,HU=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,VU=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,QU=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,WU=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,jU=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,XU=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,KU=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,YU=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,qU=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,JU=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,ZU=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,$U=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif`,e7=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,t7=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,n7=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,i7=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,r7=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,s7=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,o7=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,a7=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,l7=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,c7=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,u7=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,h7=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,d7=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,f7=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,p7=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,m7=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,g7=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,A7=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,v7=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#ifdef USE_NORMALMAP_TANGENTSPACE
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal, vNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 geometryNormal = normal;`,y7=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,x7=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,E7=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,_7=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,w7=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,C7=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,M7=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,b7=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,S7=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,T7=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,I7=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,R7=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,B7=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,L7=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,D7=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,P7=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,O7=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,F7=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,N7=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,k7=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,U7=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,z7=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,G7=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,H7=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,V7=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Q7=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,W7=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,j7=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,X7=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,K7=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,Y7=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, vec2 fullSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		
		vec2 lodFudge = pow( 1.95, lod ) / fullSize;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec2 fullSize = vec2( textureSize( sampler, 0 ) );
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), fullSize, floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), fullSize, ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,q7=`#ifdef USE_UV
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,J7=`#ifdef USE_UV
	varying vec2 vUv;
#endif
#ifdef USE_UV2
	attribute vec2 uv2;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Z7=`#ifdef USE_UV
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,$7=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const e9=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,t9=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,n9=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,i9=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,r9=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,s9=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,o9=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,a9=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,l9=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,c9=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,u9=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,h9=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,d9=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,f9=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,p9=`#include <common>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,m9=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,g9=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,A9=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,v9=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,y9=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,x9=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,E9=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,_9=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,w9=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,C9=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,M9=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,b9=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,S9=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,T9=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,I9=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,R9=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,B9=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,L9=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,D9=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,nr={alphamap_fragment:sU,alphamap_pars_fragment:oU,alphatest_fragment:aU,alphatest_pars_fragment:lU,aomap_fragment:cU,aomap_pars_fragment:uU,begin_vertex:hU,beginnormal_vertex:dU,bsdfs:fU,iridescence_fragment:pU,bumpmap_pars_fragment:mU,clipping_planes_fragment:gU,clipping_planes_pars_fragment:AU,clipping_planes_pars_vertex:vU,clipping_planes_vertex:yU,color_fragment:xU,color_pars_fragment:EU,color_pars_vertex:_U,color_vertex:wU,common:CU,cube_uv_reflection_fragment:MU,defaultnormal_vertex:bU,displacementmap_pars_vertex:SU,displacementmap_vertex:TU,emissivemap_fragment:IU,emissivemap_pars_fragment:RU,encodings_fragment:BU,encodings_pars_fragment:LU,envmap_fragment:DU,envmap_common_pars_fragment:PU,envmap_pars_fragment:OU,envmap_pars_vertex:FU,envmap_physical_pars_fragment:KU,envmap_vertex:NU,fog_vertex:kU,fog_pars_vertex:UU,fog_fragment:zU,fog_pars_fragment:GU,gradientmap_pars_fragment:HU,lightmap_fragment:VU,lightmap_pars_fragment:QU,lights_lambert_fragment:WU,lights_lambert_pars_fragment:jU,lights_pars_begin:XU,lights_toon_fragment:YU,lights_toon_pars_fragment:qU,lights_phong_fragment:JU,lights_phong_pars_fragment:ZU,lights_physical_fragment:$U,lights_physical_pars_fragment:e7,lights_fragment_begin:t7,lights_fragment_maps:n7,lights_fragment_end:i7,logdepthbuf_fragment:r7,logdepthbuf_pars_fragment:s7,logdepthbuf_pars_vertex:o7,logdepthbuf_vertex:a7,map_fragment:l7,map_pars_fragment:c7,map_particle_fragment:u7,map_particle_pars_fragment:h7,metalnessmap_fragment:d7,metalnessmap_pars_fragment:f7,morphcolor_vertex:p7,morphnormal_vertex:m7,morphtarget_pars_vertex:g7,morphtarget_vertex:A7,normal_fragment_begin:v7,normal_fragment_maps:y7,normal_pars_fragment:x7,normal_pars_vertex:E7,normal_vertex:_7,normalmap_pars_fragment:w7,clearcoat_normal_fragment_begin:C7,clearcoat_normal_fragment_maps:M7,clearcoat_pars_fragment:b7,iridescence_pars_fragment:S7,output_fragment:T7,packing:I7,premultiplied_alpha_fragment:R7,project_vertex:B7,dithering_fragment:L7,dithering_pars_fragment:D7,roughnessmap_fragment:P7,roughnessmap_pars_fragment:O7,shadowmap_pars_fragment:F7,shadowmap_pars_vertex:N7,shadowmap_vertex:k7,shadowmask_pars_fragment:U7,skinbase_vertex:z7,skinning_pars_vertex:G7,skinning_vertex:H7,skinnormal_vertex:V7,specularmap_fragment:Q7,specularmap_pars_fragment:W7,tonemapping_fragment:j7,tonemapping_pars_fragment:X7,transmission_fragment:K7,transmission_pars_fragment:Y7,uv_pars_fragment:q7,uv_pars_vertex:J7,uv_vertex:Z7,worldpos_vertex:$7,background_vert:e9,background_frag:t9,backgroundCube_vert:n9,backgroundCube_frag:i9,cube_vert:r9,cube_frag:s9,depth_vert:o9,depth_frag:a9,distanceRGBA_vert:l9,distanceRGBA_frag:c9,equirect_vert:u9,equirect_frag:h9,linedashed_vert:d9,linedashed_frag:f9,meshbasic_vert:p9,meshbasic_frag:m9,meshlambert_vert:g9,meshlambert_frag:A9,meshmatcap_vert:v9,meshmatcap_frag:y9,meshnormal_vert:x9,meshnormal_frag:E9,meshphong_vert:_9,meshphong_frag:w9,meshphysical_vert:C9,meshphysical_frag:M9,meshtoon_vert:b9,meshtoon_frag:S9,points_vert:T9,points_frag:I9,shadow_vert:R9,shadow_frag:B9,sprite_vert:L9,sprite_frag:D9},Fn={common:{diffuse:{value:new Rn(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new pr},alphaMap:{value:null},alphaMapTransform:{value:new pr},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new pr}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new pr}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new pr}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new pr},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new pr},normalScale:{value:new Yt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new pr},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new pr}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new pr}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new pr}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Rn(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Rn(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new pr}},sprite:{diffuse:{value:new Rn(16777215)},opacity:{value:1},center:{value:new Yt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new pr},alphaMap:{value:null},alphaTest:{value:0}}},dc={basic:{uniforms:va([Fn.common,Fn.specularmap,Fn.envmap,Fn.aomap,Fn.lightmap,Fn.fog]),vertexShader:nr.meshbasic_vert,fragmentShader:nr.meshbasic_frag},lambert:{uniforms:va([Fn.common,Fn.specularmap,Fn.envmap,Fn.aomap,Fn.lightmap,Fn.emissivemap,Fn.bumpmap,Fn.normalmap,Fn.displacementmap,Fn.fog,Fn.lights,{emissive:{value:new Rn(0)}}]),vertexShader:nr.meshlambert_vert,fragmentShader:nr.meshlambert_frag},phong:{uniforms:va([Fn.common,Fn.specularmap,Fn.envmap,Fn.aomap,Fn.lightmap,Fn.emissivemap,Fn.bumpmap,Fn.normalmap,Fn.displacementmap,Fn.fog,Fn.lights,{emissive:{value:new Rn(0)},specular:{value:new Rn(1118481)},shininess:{value:30}}]),vertexShader:nr.meshphong_vert,fragmentShader:nr.meshphong_frag},standard:{uniforms:va([Fn.common,Fn.envmap,Fn.aomap,Fn.lightmap,Fn.emissivemap,Fn.bumpmap,Fn.normalmap,Fn.displacementmap,Fn.roughnessmap,Fn.metalnessmap,Fn.fog,Fn.lights,{emissive:{value:new Rn(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:nr.meshphysical_vert,fragmentShader:nr.meshphysical_frag},toon:{uniforms:va([Fn.common,Fn.aomap,Fn.lightmap,Fn.emissivemap,Fn.bumpmap,Fn.normalmap,Fn.displacementmap,Fn.gradientmap,Fn.fog,Fn.lights,{emissive:{value:new Rn(0)}}]),vertexShader:nr.meshtoon_vert,fragmentShader:nr.meshtoon_frag},matcap:{uniforms:va([Fn.common,Fn.bumpmap,Fn.normalmap,Fn.displacementmap,Fn.fog,{matcap:{value:null}}]),vertexShader:nr.meshmatcap_vert,fragmentShader:nr.meshmatcap_frag},points:{uniforms:va([Fn.points,Fn.fog]),vertexShader:nr.points_vert,fragmentShader:nr.points_frag},dashed:{uniforms:va([Fn.common,Fn.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:nr.linedashed_vert,fragmentShader:nr.linedashed_frag},depth:{uniforms:va([Fn.common,Fn.displacementmap]),vertexShader:nr.depth_vert,fragmentShader:nr.depth_frag},normal:{uniforms:va([Fn.common,Fn.bumpmap,Fn.normalmap,Fn.displacementmap,{opacity:{value:1}}]),vertexShader:nr.meshnormal_vert,fragmentShader:nr.meshnormal_frag},sprite:{uniforms:va([Fn.sprite,Fn.fog]),vertexShader:nr.sprite_vert,fragmentShader:nr.sprite_frag},background:{uniforms:{uvTransform:{value:new pr},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:nr.background_vert,fragmentShader:nr.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:nr.backgroundCube_vert,fragmentShader:nr.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:nr.cube_vert,fragmentShader:nr.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:nr.equirect_vert,fragmentShader:nr.equirect_frag},distanceRGBA:{uniforms:va([Fn.common,Fn.displacementmap,{referencePosition:{value:new Ue},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:nr.distanceRGBA_vert,fragmentShader:nr.distanceRGBA_frag},shadow:{uniforms:va([Fn.lights,Fn.fog,{color:{value:new Rn(0)},opacity:{value:1}}]),vertexShader:nr.shadow_vert,fragmentShader:nr.shadow_frag}};dc.physical={uniforms:va([dc.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new pr},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new pr},clearcoatNormalScale:{value:new Yt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new pr},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new pr},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new pr},sheen:{value:0},sheenColor:{value:new Rn(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new pr},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new pr},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new pr},transmissionSamplerSize:{value:new Yt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new pr},attenuationDistance:{value:0},attenuationColor:{value:new Rn(0)},specularColor:{value:new Rn(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new pr},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new pr}}]),vertexShader:nr.meshphysical_vert,fragmentShader:nr.meshphysical_frag};const Uy={r:0,b:0,g:0};function P9(i,e,t,r,o,a,l){const d=new Rn(0);let c=a===!0?0:1,h,m,p=null,A=0,v=null;function y(C,g){let b=!1,_=g.isScene===!0?g.background:null;_&&_.isTexture&&(_=(g.backgroundBlurriness>0?t:e).get(_));const S=i.xr,R=S.getSession&&S.getSession();R&&R.environmentBlendMode==="additive"&&(_=null),_===null?x(d,c):_&&_.isColor&&(x(_,1),b=!0),(i.autoClear||b)&&i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil),_&&(_.isCubeTexture||_.mapping===rg)?(m===void 0&&(m=new Do(new hd(1,1,1),new hu({name:"BackgroundCubeMaterial",uniforms:Km(dc.backgroundCube.uniforms),vertexShader:dc.backgroundCube.vertexShader,fragmentShader:dc.backgroundCube.fragmentShader,side:Ea,depthTest:!1,depthWrite:!1,fog:!1})),m.geometry.deleteAttribute("normal"),m.geometry.deleteAttribute("uv"),m.onBeforeRender=function(P,O,D){this.matrixWorld.copyPosition(D.matrixWorld)},Object.defineProperty(m.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),o.update(m)),m.material.uniforms.envMap.value=_,m.material.uniforms.flipEnvMap.value=_.isCubeTexture&&_.isRenderTargetTexture===!1?-1:1,m.material.uniforms.backgroundBlurriness.value=g.backgroundBlurriness,m.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,m.material.toneMapped=_.encoding!==Dr,(p!==_||A!==_.version||v!==i.toneMapping)&&(m.material.needsUpdate=!0,p=_,A=_.version,v=i.toneMapping),m.layers.enableAll(),C.unshift(m,m.geometry,m.material,0,0,null)):_&&_.isTexture&&(h===void 0&&(h=new Do(new sg(2,2),new hu({name:"BackgroundMaterial",uniforms:Km(dc.background.uniforms),vertexShader:dc.background.vertexShader,fragmentShader:dc.background.fragmentShader,side:cu,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),Object.defineProperty(h.material,"map",{get:function(){return this.uniforms.t2D.value}}),o.update(h)),h.material.uniforms.t2D.value=_,h.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,h.material.toneMapped=_.encoding!==Dr,_.matrixAutoUpdate===!0&&_.updateMatrix(),h.material.uniforms.uvTransform.value.copy(_.matrix),(p!==_||A!==_.version||v!==i.toneMapping)&&(h.material.needsUpdate=!0,p=_,A=_.version,v=i.toneMapping),h.layers.enableAll(),C.unshift(h,h.geometry,h.material,0,0,null))}function x(C,g){C.getRGB(Uy,xD(i)),r.buffers.color.setClear(Uy.r,Uy.g,Uy.b,g,l)}return{getClearColor:function(){return d},setClearColor:function(C,g=1){d.set(C),c=g,x(d,c)},getClearAlpha:function(){return c},setClearAlpha:function(C){c=C,x(d,c)},render:y}}function O9(i,e,t,r){const o=i.getParameter(34921),a=r.isWebGL2?null:e.get("OES_vertex_array_object"),l=r.isWebGL2||a!==null,d={},c=C(null);let h=c,m=!1;function p(se,ae,ee,ne,X){let W=!1;if(l){const ce=x(ne,ee,ae);h!==ce&&(h=ce,v(h.object)),W=g(se,ne,ee,X),W&&b(se,ne,ee,X)}else{const ce=ae.wireframe===!0;(h.geometry!==ne.id||h.program!==ee.id||h.wireframe!==ce)&&(h.geometry=ne.id,h.program=ee.id,h.wireframe=ce,W=!0)}X!==null&&t.update(X,34963),(W||m)&&(m=!1,D(se,ae,ee,ne),X!==null&&i.bindBuffer(34963,t.get(X).buffer))}function A(){return r.isWebGL2?i.createVertexArray():a.createVertexArrayOES()}function v(se){return r.isWebGL2?i.bindVertexArray(se):a.bindVertexArrayOES(se)}function y(se){return r.isWebGL2?i.deleteVertexArray(se):a.deleteVertexArrayOES(se)}function x(se,ae,ee){const ne=ee.wireframe===!0;let X=d[se.id];X===void 0&&(X={},d[se.id]=X);let W=X[ae.id];W===void 0&&(W={},X[ae.id]=W);let ce=W[ne];return ce===void 0&&(ce=C(A()),W[ne]=ce),ce}function C(se){const ae=[],ee=[],ne=[];for(let X=0;X<o;X++)ae[X]=0,ee[X]=0,ne[X]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:ae,enabledAttributes:ee,attributeDivisors:ne,object:se,attributes:{},index:null}}function g(se,ae,ee,ne){const X=h.attributes,W=ae.attributes;let ce=0;const he=ee.getAttributes();for(const xe in he)if(he[xe].location>=0){const Fe=X[xe];let je=W[xe];if(je===void 0&&(xe==="instanceMatrix"&&se.instanceMatrix&&(je=se.instanceMatrix),xe==="instanceColor"&&se.instanceColor&&(je=se.instanceColor)),Fe===void 0||Fe.attribute!==je||je&&Fe.data!==je.data)return!0;ce++}return h.attributesNum!==ce||h.index!==ne}function b(se,ae,ee,ne){const X={},W=ae.attributes;let ce=0;const he=ee.getAttributes();for(const xe in he)if(he[xe].location>=0){let Fe=W[xe];Fe===void 0&&(xe==="instanceMatrix"&&se.instanceMatrix&&(Fe=se.instanceMatrix),xe==="instanceColor"&&se.instanceColor&&(Fe=se.instanceColor));const je={};je.attribute=Fe,Fe&&Fe.data&&(je.data=Fe.data),X[xe]=je,ce++}h.attributes=X,h.attributesNum=ce,h.index=ne}function _(){const se=h.newAttributes;for(let ae=0,ee=se.length;ae<ee;ae++)se[ae]=0}function S(se){R(se,0)}function R(se,ae){const ee=h.newAttributes,ne=h.enabledAttributes,X=h.attributeDivisors;ee[se]=1,ne[se]===0&&(i.enableVertexAttribArray(se),ne[se]=1),X[se]!==ae&&((r.isWebGL2?i:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](se,ae),X[se]=ae)}function P(){const se=h.newAttributes,ae=h.enabledAttributes;for(let ee=0,ne=ae.length;ee<ne;ee++)ae[ee]!==se[ee]&&(i.disableVertexAttribArray(ee),ae[ee]=0)}function O(se,ae,ee,ne,X,W){r.isWebGL2===!0&&(ee===5124||ee===5125)?i.vertexAttribIPointer(se,ae,ee,X,W):i.vertexAttribPointer(se,ae,ee,ne,X,W)}function D(se,ae,ee,ne){if(r.isWebGL2===!1&&(se.isInstancedMesh||ne.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;_();const X=ne.attributes,W=ee.getAttributes(),ce=ae.defaultAttributeValues;for(const he in W){const xe=W[he];if(xe.location>=0){let ve=X[he];if(ve===void 0&&(he==="instanceMatrix"&&se.instanceMatrix&&(ve=se.instanceMatrix),he==="instanceColor"&&se.instanceColor&&(ve=se.instanceColor)),ve!==void 0){const Fe=ve.normalized,je=ve.itemSize,rt=t.get(ve);if(rt===void 0)continue;const He=rt.buffer,Ot=rt.type,xt=rt.bytesPerElement;if(ve.isInterleavedBufferAttribute){const gt=ve.data,It=gt.stride,ct=ve.offset;if(gt.isInstancedInterleavedBuffer){for(let ut=0;ut<xe.locationSize;ut++)R(xe.location+ut,gt.meshPerAttribute);se.isInstancedMesh!==!0&&ne._maxInstanceCount===void 0&&(ne._maxInstanceCount=gt.meshPerAttribute*gt.count)}else for(let ut=0;ut<xe.locationSize;ut++)S(xe.location+ut);i.bindBuffer(34962,He);for(let ut=0;ut<xe.locationSize;ut++)O(xe.location+ut,je/xe.locationSize,Ot,Fe,It*xt,(ct+je/xe.locationSize*ut)*xt)}else{if(ve.isInstancedBufferAttribute){for(let gt=0;gt<xe.locationSize;gt++)R(xe.location+gt,ve.meshPerAttribute);se.isInstancedMesh!==!0&&ne._maxInstanceCount===void 0&&(ne._maxInstanceCount=ve.meshPerAttribute*ve.count)}else for(let gt=0;gt<xe.locationSize;gt++)S(xe.location+gt);i.bindBuffer(34962,He);for(let gt=0;gt<xe.locationSize;gt++)O(xe.location+gt,je/xe.locationSize,Ot,Fe,je*xt,je/xe.locationSize*gt*xt)}}else if(ce!==void 0){const Fe=ce[he];if(Fe!==void 0)switch(Fe.length){case 2:i.vertexAttrib2fv(xe.location,Fe);break;case 3:i.vertexAttrib3fv(xe.location,Fe);break;case 4:i.vertexAttrib4fv(xe.location,Fe);break;default:i.vertexAttrib1fv(xe.location,Fe)}}}}P()}function L(){J();for(const se in d){const ae=d[se];for(const ee in ae){const ne=ae[ee];for(const X in ne)y(ne[X].object),delete ne[X];delete ae[ee]}delete d[se]}}function N(se){if(d[se.id]===void 0)return;const ae=d[se.id];for(const ee in ae){const ne=ae[ee];for(const X in ne)y(ne[X].object),delete ne[X];delete ae[ee]}delete d[se.id]}function H(se){for(const ae in d){const ee=d[ae];if(ee[se.id]===void 0)continue;const ne=ee[se.id];for(const X in ne)y(ne[X].object),delete ne[X];delete ee[se.id]}}function J(){K(),m=!0,h!==c&&(h=c,v(h.object))}function K(){c.geometry=null,c.program=null,c.wireframe=!1}return{setup:p,reset:J,resetDefaultState:K,dispose:L,releaseStatesOfGeometry:N,releaseStatesOfProgram:H,initAttributes:_,enableAttribute:S,disableUnusedAttributes:P}}function F9(i,e,t,r){const o=r.isWebGL2;let a;function l(h){a=h}function d(h,m){i.drawArrays(a,h,m),t.update(m,a,1)}function c(h,m,p){if(p===0)return;let A,v;if(o)A=i,v="drawArraysInstanced";else if(A=e.get("ANGLE_instanced_arrays"),v="drawArraysInstancedANGLE",A===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}A[v](a,h,m,p),t.update(m,a,p)}this.setMode=l,this.render=d,this.renderInstances=c}function N9(i,e,t){let r;function o(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const O=e.get("EXT_texture_filter_anisotropic");r=i.getParameter(O.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function a(O){if(O==="highp"){if(i.getShaderPrecisionFormat(35633,36338).precision>0&&i.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";O="mediump"}return O==="mediump"&&i.getShaderPrecisionFormat(35633,36337).precision>0&&i.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const l=typeof WebGL2RenderingContext<"u"&&i.constructor.name==="WebGL2RenderingContext";let d=t.precision!==void 0?t.precision:"highp";const c=a(d);c!==d&&(console.warn("THREE.WebGLRenderer:",d,"not supported, using",c,"instead."),d=c);const h=l||e.has("WEBGL_draw_buffers"),m=t.logarithmicDepthBuffer===!0,p=i.getParameter(34930),A=i.getParameter(35660),v=i.getParameter(3379),y=i.getParameter(34076),x=i.getParameter(34921),C=i.getParameter(36347),g=i.getParameter(36348),b=i.getParameter(36349),_=A>0,S=l||e.has("OES_texture_float"),R=_&&S,P=l?i.getParameter(36183):0;return{isWebGL2:l,drawBuffers:h,getMaxAnisotropy:o,getMaxPrecision:a,precision:d,logarithmicDepthBuffer:m,maxTextures:p,maxVertexTextures:A,maxTextureSize:v,maxCubemapSize:y,maxAttributes:x,maxVertexUniforms:C,maxVaryings:g,maxFragmentUniforms:b,vertexTextures:_,floatFragmentTextures:S,floatVertexTextures:R,maxSamples:P}}function k9(i){const e=this;let t=null,r=0,o=!1,a=!1;const l=new Nh,d=new pr,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(p,A){const v=p.length!==0||A||r!==0||o;return o=A,r=p.length,v},this.beginShadows=function(){a=!0,m(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(p,A){t=m(p,A,0)},this.setState=function(p,A,v){const y=p.clippingPlanes,x=p.clipIntersection,C=p.clipShadows,g=i.get(p);if(!o||y===null||y.length===0||a&&!C)a?m(null):h();else{const b=a?0:r,_=b*4;let S=g.clippingState||null;c.value=S,S=m(y,A,_,v);for(let R=0;R!==_;++R)S[R]=t[R];g.clippingState=S,this.numIntersection=x?this.numPlanes:0,this.numPlanes+=b}};function h(){c.value!==t&&(c.value=t,c.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function m(p,A,v,y){const x=p!==null?p.length:0;let C=null;if(x!==0){if(C=c.value,y!==!0||C===null){const g=v+x*4,b=A.matrixWorldInverse;d.getNormalMatrix(b),(C===null||C.length<g)&&(C=new Float32Array(g));for(let _=0,S=v;_!==x;++_,S+=4)l.copy(p[_]).applyMatrix4(b,d),l.normal.toArray(C,S),C[S+3]=l.constant}c.value=C,c.needsUpdate=!0}return e.numPlanes=x,e.numIntersection=0,C}}function U9(i){let e=new WeakMap;function t(l,d){return d===g0?l.mapping=nd:d===A0&&(l.mapping=id),l}function r(l){if(l&&l.isTexture&&l.isRenderTargetTexture===!1){const d=l.mapping;if(d===g0||d===A0)if(e.has(l)){const c=e.get(l).texture;return t(c,l.mapping)}else{const c=l.image;if(c&&c.height>0){const h=new wD(c.height/2);return h.fromEquirectangularTexture(i,l),e.set(l,h),l.addEventListener("dispose",o),t(h.texture,l.mapping)}else return null}}return l}function o(l){const d=l.target;d.removeEventListener("dispose",o);const c=e.get(d);c!==void 0&&(e.delete(d),c.dispose())}function a(){e=new WeakMap}return{get:r,dispose:a}}class ju extends N0{constructor(e=-1,t=1,r=1,o=-1,a=.1,l=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=o,this.near=a,this.far=l,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,o,a,l){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=o,this.view.width=a,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,o=(this.top+this.bottom)/2;let a=r-e,l=r+e,d=o+t,c=o-t;if(this.view!==null&&this.view.enabled){const h=(this.right-this.left)/this.view.fullWidth/this.zoom,m=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a+=h*this.view.offsetX,l=a+h*this.view.width,d-=m*this.view.offsetY,c=d-m*this.view.height}this.projectionMatrix.makeOrthographic(a,l,d,c,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const Cm=4,MT=[.125,.215,.35,.446,.526,.582],xf=20,V_=new ju,bT=new Rn;let Q_=null;const vf=(1+Math.sqrt(5))/2,em=1/vf,ST=[new Ue(1,1,1),new Ue(-1,1,1),new Ue(1,1,-1),new Ue(-1,1,-1),new Ue(0,vf,em),new Ue(0,vf,-em),new Ue(em,0,vf),new Ue(-em,0,vf),new Ue(vf,em,0),new Ue(-vf,em,0)];class Uw{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,o=100){Q_=this._renderer.getRenderTarget(),this._setSize(256);const a=this._allocateTargets();return a.depthBuffer=!0,this._sceneToCubeUV(e,r,o,a),t>0&&this._blur(a,0,0,t),this._applyPMREM(a),this._cleanup(a),a}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=RT(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=IT(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Q_),e.scissorTest=!1,zy(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===nd||e.mapping===id?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Q_=this._renderer.getRenderTarget();const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:ws,minFilter:ws,generateMipmaps:!1,type:Qm,format:Qa,encoding:Zu,depthBuffer:!1},o=TT(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=TT(e,t,r);const{_lodMax:a}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=z9(a)),this._blurMaterial=G9(a,e,t)}return o}_compileMaterial(e){const t=new Do(this._lodPlanes[0],e);this._renderer.compile(t,V_)}_sceneToCubeUV(e,t,r,o){const d=new cs(90,1,t,r),c=[1,-1,1,1,1,1],h=[1,1,1,-1,-1,-1],m=this._renderer,p=m.autoClear,A=m.toneMapping;m.getClearColor(bT),m.toneMapping=vc,m.autoClear=!1;const v=new fl({name:"PMREM.Background",side:Ea,depthWrite:!1,depthTest:!1}),y=new Do(new hd,v);let x=!1;const C=e.background;C?C.isColor&&(v.color.copy(C),e.background=null,x=!0):(v.color.copy(bT),x=!0);for(let g=0;g<6;g++){const b=g%3;b===0?(d.up.set(0,c[g],0),d.lookAt(h[g],0,0)):b===1?(d.up.set(0,0,c[g]),d.lookAt(0,h[g],0)):(d.up.set(0,c[g],0),d.lookAt(0,0,h[g]));const _=this._cubeSize;zy(o,b*_,g>2?_:0,_,_),m.setRenderTarget(o),x&&m.render(y,d),m.render(e,d)}y.geometry.dispose(),y.material.dispose(),m.toneMapping=A,m.autoClear=p,e.background=C}_textureToCubeUV(e,t){const r=this._renderer,o=e.mapping===nd||e.mapping===id;o?(this._cubemapMaterial===null&&(this._cubemapMaterial=RT()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=IT());const a=o?this._cubemapMaterial:this._equirectMaterial,l=new Do(this._lodPlanes[0],a),d=a.uniforms;d.envMap.value=e;const c=this._cubeSize;zy(t,0,0,3*c,2*c),r.setRenderTarget(t),r.render(l,V_)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;for(let o=1;o<this._lodPlanes.length;o++){const a=Math.sqrt(this._sigmas[o]*this._sigmas[o]-this._sigmas[o-1]*this._sigmas[o-1]),l=ST[(o-1)%ST.length];this._blur(e,o-1,o,a,l)}t.autoClear=r}_blur(e,t,r,o,a){const l=this._pingPongRenderTarget;this._halfBlur(e,l,t,r,o,"latitudinal",a),this._halfBlur(l,e,r,r,o,"longitudinal",a)}_halfBlur(e,t,r,o,a,l,d){const c=this._renderer,h=this._blurMaterial;l!=="latitudinal"&&l!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const m=3,p=new Do(this._lodPlanes[o],h),A=h.uniforms,v=this._sizeLods[r]-1,y=isFinite(a)?Math.PI/(2*v):2*Math.PI/(2*xf-1),x=a/y,C=isFinite(a)?1+Math.floor(m*x):xf;C>xf&&console.warn(`sigmaRadians, ${a}, is too large and will clip, as it requested ${C} samples when the maximum is set to ${xf}`);const g=[];let b=0;for(let O=0;O<xf;++O){const D=O/x,L=Math.exp(-D*D/2);g.push(L),O===0?b+=L:O<C&&(b+=2*L)}for(let O=0;O<g.length;O++)g[O]=g[O]/b;A.envMap.value=e.texture,A.samples.value=C,A.weights.value=g,A.latitudinal.value=l==="latitudinal",d&&(A.poleAxis.value=d);const{_lodMax:_}=this;A.dTheta.value=y,A.mipInt.value=_-r;const S=this._sizeLods[o],R=3*S*(o>_-Cm?o-_+Cm:0),P=4*(this._cubeSize-S);zy(t,R,P,3*S,2*S),c.setRenderTarget(t),c.render(p,V_)}}function z9(i){const e=[],t=[],r=[];let o=i;const a=i-Cm+1+MT.length;for(let l=0;l<a;l++){const d=Math.pow(2,o);t.push(d);let c=1/d;l>i-Cm?c=MT[l-i+Cm-1]:l===0&&(c=0),r.push(c);const h=1/(d-2),m=-h,p=1+h,A=[m,m,p,m,p,p,m,m,p,p,m,p],v=6,y=6,x=3,C=2,g=1,b=new Float32Array(x*y*v),_=new Float32Array(C*y*v),S=new Float32Array(g*y*v);for(let P=0;P<v;P++){const O=P%3*2/3-1,D=P>2?0:-1,L=[O,D,0,O+2/3,D,0,O+2/3,D+1,0,O,D,0,O+2/3,D+1,0,O,D+1,0];b.set(L,x*y*P),_.set(A,C*y*P);const N=[P,P,P,P,P,P];S.set(N,g*y*P)}const R=new Zi;R.setAttribute("position",new Qr(b,x)),R.setAttribute("uv",new Qr(_,C)),R.setAttribute("faceIndex",new Qr(S,g)),e.push(R),o>Cm&&o--}return{lodPlanes:e,sizeLods:t,sigmas:r}}function TT(i,e,t){const r=new xc(i,e,t);return r.texture.mapping=rg,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function zy(i,e,t,r,o){i.viewport.set(e,t,r,o),i.scissor.set(e,t,r,o)}function G9(i,e,t){const r=new Float32Array(xf),o=new Ue(0,1,0);return new hu({name:"SphericalGaussianBlur",defines:{n:xf,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:o}},vertexShader:sM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Wu,depthTest:!1,depthWrite:!1})}function IT(){return new hu({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:sM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Wu,depthTest:!1,depthWrite:!1})}function RT(){return new hu({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:sM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Wu,depthTest:!1,depthWrite:!1})}function sM(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function H9(i){let e=new WeakMap,t=null;function r(d){if(d&&d.isTexture){const c=d.mapping,h=c===g0||c===A0,m=c===nd||c===id;if(h||m)if(d.isRenderTargetTexture&&d.needsPMREMUpdate===!0){d.needsPMREMUpdate=!1;let p=e.get(d);return t===null&&(t=new Uw(i)),p=h?t.fromEquirectangular(d,p):t.fromCubemap(d,p),e.set(d,p),p.texture}else{if(e.has(d))return e.get(d).texture;{const p=d.image;if(h&&p&&p.height>0||m&&p&&o(p)){t===null&&(t=new Uw(i));const A=h?t.fromEquirectangular(d):t.fromCubemap(d);return e.set(d,A),d.addEventListener("dispose",a),A.texture}else return null}}}return d}function o(d){let c=0;const h=6;for(let m=0;m<h;m++)d[m]!==void 0&&c++;return c===h}function a(d){const c=d.target;c.removeEventListener("dispose",a);const h=e.get(c);h!==void 0&&(e.delete(c),h.dispose())}function l(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:r,dispose:l}}function V9(i){const e={};function t(r){if(e[r]!==void 0)return e[r];let o;switch(r){case"WEBGL_depth_texture":o=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":o=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":o=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":o=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:o=i.getExtension(r)}return e[r]=o,o}return{has:function(r){return t(r)!==null},init:function(r){r.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(r){const o=t(r);return o===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),o}}}function Q9(i,e,t,r){const o={},a=new WeakMap;function l(p){const A=p.target;A.index!==null&&e.remove(A.index);for(const y in A.attributes)e.remove(A.attributes[y]);A.removeEventListener("dispose",l),delete o[A.id];const v=a.get(A);v&&(e.remove(v),a.delete(A)),r.releaseStatesOfGeometry(A),A.isInstancedBufferGeometry===!0&&delete A._maxInstanceCount,t.memory.geometries--}function d(p,A){return o[A.id]===!0||(A.addEventListener("dispose",l),o[A.id]=!0,t.memory.geometries++),A}function c(p){const A=p.attributes;for(const y in A)e.update(A[y],34962);const v=p.morphAttributes;for(const y in v){const x=v[y];for(let C=0,g=x.length;C<g;C++)e.update(x[C],34962)}}function h(p){const A=[],v=p.index,y=p.attributes.position;let x=0;if(v!==null){const b=v.array;x=v.version;for(let _=0,S=b.length;_<S;_+=3){const R=b[_+0],P=b[_+1],O=b[_+2];A.push(R,P,P,O,O,R)}}else{const b=y.array;x=y.version;for(let _=0,S=b.length/3-1;_<S;_+=3){const R=_+0,P=_+1,O=_+2;A.push(R,P,P,O,O,R)}}const C=new(vD(A)?rM:iM)(A,1);C.version=x;const g=a.get(p);g&&e.remove(g),a.set(p,C)}function m(p){const A=a.get(p);if(A){const v=p.index;v!==null&&A.version<v.version&&h(p)}else h(p);return a.get(p)}return{get:d,update:c,getWireframeAttribute:m}}function W9(i,e,t,r){const o=r.isWebGL2;let a;function l(A){a=A}let d,c;function h(A){d=A.type,c=A.bytesPerElement}function m(A,v){i.drawElements(a,v,d,A*c),t.update(v,a,1)}function p(A,v,y){if(y===0)return;let x,C;if(o)x=i,C="drawElementsInstanced";else if(x=e.get("ANGLE_instanced_arrays"),C="drawElementsInstancedANGLE",x===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}x[C](a,v,d,A*c,y),t.update(v,a,y)}this.setMode=l,this.setIndex=h,this.render=m,this.renderInstances=p}function j9(i){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function r(a,l,d){switch(t.calls++,l){case 4:t.triangles+=d*(a/3);break;case 1:t.lines+=d*(a/2);break;case 3:t.lines+=d*(a-1);break;case 2:t.lines+=d*a;break;case 0:t.points+=d*a;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",l);break}}function o(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:o,update:r}}function X9(i,e){return i[0]-e[0]}function K9(i,e){return Math.abs(e[1])-Math.abs(i[1])}function Y9(i,e,t){const r={},o=new Float32Array(8),a=new WeakMap,l=new Kr,d=[];for(let h=0;h<8;h++)d[h]=[h,0];function c(h,m,p){const A=h.morphTargetInfluences;if(e.isWebGL2===!0){const y=m.morphAttributes.position||m.morphAttributes.normal||m.morphAttributes.color,x=y!==void 0?y.length:0;let C=a.get(m);if(C===void 0||C.count!==x){let ae=function(){K.dispose(),a.delete(m),m.removeEventListener("dispose",ae)};var v=ae;C!==void 0&&C.texture.dispose();const _=m.morphAttributes.position!==void 0,S=m.morphAttributes.normal!==void 0,R=m.morphAttributes.color!==void 0,P=m.morphAttributes.position||[],O=m.morphAttributes.normal||[],D=m.morphAttributes.color||[];let L=0;_===!0&&(L=1),S===!0&&(L=2),R===!0&&(L=3);let N=m.attributes.position.count*L,H=1;N>e.maxTextureSize&&(H=Math.ceil(N/e.maxTextureSize),N=e.maxTextureSize);const J=new Float32Array(N*H*4*x),K=new Bx(J,N,H,x);K.type=Vu,K.needsUpdate=!0;const se=L*4;for(let ee=0;ee<x;ee++){const ne=P[ee],X=O[ee],W=D[ee],ce=N*H*4*ee;for(let he=0;he<ne.count;he++){const xe=he*se;_===!0&&(l.fromBufferAttribute(ne,he),J[ce+xe+0]=l.x,J[ce+xe+1]=l.y,J[ce+xe+2]=l.z,J[ce+xe+3]=0),S===!0&&(l.fromBufferAttribute(X,he),J[ce+xe+4]=l.x,J[ce+xe+5]=l.y,J[ce+xe+6]=l.z,J[ce+xe+7]=0),R===!0&&(l.fromBufferAttribute(W,he),J[ce+xe+8]=l.x,J[ce+xe+9]=l.y,J[ce+xe+10]=l.z,J[ce+xe+11]=W.itemSize===4?l.w:1)}}C={count:x,texture:K,size:new Yt(N,H)},a.set(m,C),m.addEventListener("dispose",ae)}let g=0;for(let _=0;_<A.length;_++)g+=A[_];const b=m.morphTargetsRelative?1:1-g;p.getUniforms().setValue(i,"morphTargetBaseInfluence",b),p.getUniforms().setValue(i,"morphTargetInfluences",A),p.getUniforms().setValue(i,"morphTargetsTexture",C.texture,t),p.getUniforms().setValue(i,"morphTargetsTextureSize",C.size)}else{const y=A===void 0?0:A.length;let x=r[m.id];if(x===void 0||x.length!==y){x=[];for(let S=0;S<y;S++)x[S]=[S,0];r[m.id]=x}for(let S=0;S<y;S++){const R=x[S];R[0]=S,R[1]=A[S]}x.sort(K9);for(let S=0;S<8;S++)S<y&&x[S][1]?(d[S][0]=x[S][0],d[S][1]=x[S][1]):(d[S][0]=Number.MAX_SAFE_INTEGER,d[S][1]=0);d.sort(X9);const C=m.morphAttributes.position,g=m.morphAttributes.normal;let b=0;for(let S=0;S<8;S++){const R=d[S],P=R[0],O=R[1];P!==Number.MAX_SAFE_INTEGER&&O?(C&&m.getAttribute("morphTarget"+S)!==C[P]&&m.setAttribute("morphTarget"+S,C[P]),g&&m.getAttribute("morphNormal"+S)!==g[P]&&m.setAttribute("morphNormal"+S,g[P]),o[S]=O,b+=O):(C&&m.hasAttribute("morphTarget"+S)===!0&&m.deleteAttribute("morphTarget"+S),g&&m.hasAttribute("morphNormal"+S)===!0&&m.deleteAttribute("morphNormal"+S),o[S]=0)}const _=m.morphTargetsRelative?1:1-b;p.getUniforms().setValue(i,"morphTargetBaseInfluence",_),p.getUniforms().setValue(i,"morphTargetInfluences",o)}}return{update:c}}function q9(i,e,t,r){let o=new WeakMap;function a(c){const h=r.render.frame,m=c.geometry,p=e.get(c,m);return o.get(p)!==h&&(e.update(p),o.set(p,h)),c.isInstancedMesh&&(c.hasEventListener("dispose",d)===!1&&c.addEventListener("dispose",d),t.update(c.instanceMatrix,34962),c.instanceColor!==null&&t.update(c.instanceColor,34962)),p}function l(){o=new WeakMap}function d(c){const h=c.target;h.removeEventListener("dispose",d),t.remove(h.instanceMatrix),h.instanceColor!==null&&t.remove(h.instanceColor)}return{update:a,dispose:l}}const MD=new As,bD=new Bx,SD=new nM,TD=new k0,BT=[],LT=[],DT=new Float32Array(16),PT=new Float32Array(9),OT=new Float32Array(4);function og(i,e,t){const r=i[0];if(r<=0||r>0)return i;const o=e*t;let a=BT[o];if(a===void 0&&(a=new Float32Array(o),BT[o]=a),e!==0){r.toArray(a,0);for(let l=1,d=0;l!==e;++l)d+=t,i[l].toArray(a,d)}return a}function vo(i,e){if(i.length!==e.length)return!1;for(let t=0,r=i.length;t<r;t++)if(i[t]!==e[t])return!1;return!0}function yo(i,e){for(let t=0,r=e.length;t<r;t++)i[t]=e[t]}function Dx(i,e){let t=LT[e];t===void 0&&(t=new Int32Array(e),LT[e]=t);for(let r=0;r!==e;++r)t[r]=i.allocateTextureUnit();return t}function J9(i,e){const t=this.cache;t[0]!==e&&(i.uniform1f(this.addr,e),t[0]=e)}function Z9(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(vo(t,e))return;i.uniform2fv(this.addr,e),yo(t,e)}}function $9(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(i.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(vo(t,e))return;i.uniform3fv(this.addr,e),yo(t,e)}}function ez(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(vo(t,e))return;i.uniform4fv(this.addr,e),yo(t,e)}}function tz(i,e){const t=this.cache,r=e.elements;if(r===void 0){if(vo(t,e))return;i.uniformMatrix2fv(this.addr,!1,e),yo(t,e)}else{if(vo(t,r))return;OT.set(r),i.uniformMatrix2fv(this.addr,!1,OT),yo(t,r)}}function nz(i,e){const t=this.cache,r=e.elements;if(r===void 0){if(vo(t,e))return;i.uniformMatrix3fv(this.addr,!1,e),yo(t,e)}else{if(vo(t,r))return;PT.set(r),i.uniformMatrix3fv(this.addr,!1,PT),yo(t,r)}}function iz(i,e){const t=this.cache,r=e.elements;if(r===void 0){if(vo(t,e))return;i.uniformMatrix4fv(this.addr,!1,e),yo(t,e)}else{if(vo(t,r))return;DT.set(r),i.uniformMatrix4fv(this.addr,!1,DT),yo(t,r)}}function rz(i,e){const t=this.cache;t[0]!==e&&(i.uniform1i(this.addr,e),t[0]=e)}function sz(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(vo(t,e))return;i.uniform2iv(this.addr,e),yo(t,e)}}function oz(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(vo(t,e))return;i.uniform3iv(this.addr,e),yo(t,e)}}function az(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(vo(t,e))return;i.uniform4iv(this.addr,e),yo(t,e)}}function lz(i,e){const t=this.cache;t[0]!==e&&(i.uniform1ui(this.addr,e),t[0]=e)}function cz(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(vo(t,e))return;i.uniform2uiv(this.addr,e),yo(t,e)}}function uz(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(vo(t,e))return;i.uniform3uiv(this.addr,e),yo(t,e)}}function hz(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(vo(t,e))return;i.uniform4uiv(this.addr,e),yo(t,e)}}function dz(i,e,t){const r=this.cache,o=t.allocateTextureUnit();r[0]!==o&&(i.uniform1i(this.addr,o),r[0]=o),t.setTexture2D(e||MD,o)}function fz(i,e,t){const r=this.cache,o=t.allocateTextureUnit();r[0]!==o&&(i.uniform1i(this.addr,o),r[0]=o),t.setTexture3D(e||SD,o)}function pz(i,e,t){const r=this.cache,o=t.allocateTextureUnit();r[0]!==o&&(i.uniform1i(this.addr,o),r[0]=o),t.setTextureCube(e||TD,o)}function mz(i,e,t){const r=this.cache,o=t.allocateTextureUnit();r[0]!==o&&(i.uniform1i(this.addr,o),r[0]=o),t.setTexture2DArray(e||bD,o)}function gz(i){switch(i){case 5126:return J9;case 35664:return Z9;case 35665:return $9;case 35666:return ez;case 35674:return tz;case 35675:return nz;case 35676:return iz;case 5124:case 35670:return rz;case 35667:case 35671:return sz;case 35668:case 35672:return oz;case 35669:case 35673:return az;case 5125:return lz;case 36294:return cz;case 36295:return uz;case 36296:return hz;case 35678:case 36198:case 36298:case 36306:case 35682:return dz;case 35679:case 36299:case 36307:return fz;case 35680:case 36300:case 36308:case 36293:return pz;case 36289:case 36303:case 36311:case 36292:return mz}}function Az(i,e){i.uniform1fv(this.addr,e)}function vz(i,e){const t=og(e,this.size,2);i.uniform2fv(this.addr,t)}function yz(i,e){const t=og(e,this.size,3);i.uniform3fv(this.addr,t)}function xz(i,e){const t=og(e,this.size,4);i.uniform4fv(this.addr,t)}function Ez(i,e){const t=og(e,this.size,4);i.uniformMatrix2fv(this.addr,!1,t)}function _z(i,e){const t=og(e,this.size,9);i.uniformMatrix3fv(this.addr,!1,t)}function wz(i,e){const t=og(e,this.size,16);i.uniformMatrix4fv(this.addr,!1,t)}function Cz(i,e){i.uniform1iv(this.addr,e)}function Mz(i,e){i.uniform2iv(this.addr,e)}function bz(i,e){i.uniform3iv(this.addr,e)}function Sz(i,e){i.uniform4iv(this.addr,e)}function Tz(i,e){i.uniform1uiv(this.addr,e)}function Iz(i,e){i.uniform2uiv(this.addr,e)}function Rz(i,e){i.uniform3uiv(this.addr,e)}function Bz(i,e){i.uniform4uiv(this.addr,e)}function Lz(i,e,t){const r=this.cache,o=e.length,a=Dx(t,o);vo(r,a)||(i.uniform1iv(this.addr,a),yo(r,a));for(let l=0;l!==o;++l)t.setTexture2D(e[l]||MD,a[l])}function Dz(i,e,t){const r=this.cache,o=e.length,a=Dx(t,o);vo(r,a)||(i.uniform1iv(this.addr,a),yo(r,a));for(let l=0;l!==o;++l)t.setTexture3D(e[l]||SD,a[l])}function Pz(i,e,t){const r=this.cache,o=e.length,a=Dx(t,o);vo(r,a)||(i.uniform1iv(this.addr,a),yo(r,a));for(let l=0;l!==o;++l)t.setTextureCube(e[l]||TD,a[l])}function Oz(i,e,t){const r=this.cache,o=e.length,a=Dx(t,o);vo(r,a)||(i.uniform1iv(this.addr,a),yo(r,a));for(let l=0;l!==o;++l)t.setTexture2DArray(e[l]||bD,a[l])}function Fz(i){switch(i){case 5126:return Az;case 35664:return vz;case 35665:return yz;case 35666:return xz;case 35674:return Ez;case 35675:return _z;case 35676:return wz;case 5124:case 35670:return Cz;case 35667:case 35671:return Mz;case 35668:case 35672:return bz;case 35669:case 35673:return Sz;case 5125:return Tz;case 36294:return Iz;case 36295:return Rz;case 36296:return Bz;case 35678:case 36198:case 36298:case 36306:case 35682:return Lz;case 35679:case 36299:case 36307:return Dz;case 35680:case 36300:case 36308:case 36293:return Pz;case 36289:case 36303:case 36311:case 36292:return Oz}}class Nz{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.setValue=gz(t.type)}}class kz{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.size=t.size,this.setValue=Fz(t.type)}}class Uz{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){const o=this.seq;for(let a=0,l=o.length;a!==l;++a){const d=o[a];d.setValue(e,t[d.id],r)}}}const W_=/(\w+)(\])?(\[|\.)?/g;function FT(i,e){i.seq.push(e),i.map[e.id]=e}function zz(i,e,t){const r=i.name,o=r.length;for(W_.lastIndex=0;;){const a=W_.exec(r),l=W_.lastIndex;let d=a[1];const c=a[2]==="]",h=a[3];if(c&&(d=d|0),h===void 0||h==="["&&l+2===o){FT(t,h===void 0?new Nz(d,i,e):new kz(d,i,e));break}else{let p=t.map[d];p===void 0&&(p=new Uz(d),FT(t,p)),t=p}}}class I1{constructor(e,t){this.seq=[],this.map={};const r=e.getProgramParameter(t,35718);for(let o=0;o<r;++o){const a=e.getActiveUniform(t,o),l=e.getUniformLocation(t,a.name);zz(a,l,this)}}setValue(e,t,r,o){const a=this.map[t];a!==void 0&&a.setValue(e,r,o)}setOptional(e,t,r){const o=t[r];o!==void 0&&this.setValue(e,r,o)}static upload(e,t,r,o){for(let a=0,l=t.length;a!==l;++a){const d=t[a],c=r[d.id];c.needsUpdate!==!1&&d.setValue(e,c.value,o)}}static seqWithValue(e,t){const r=[];for(let o=0,a=e.length;o!==a;++o){const l=e[o];l.id in t&&r.push(l)}return r}}function NT(i,e,t){const r=i.createShader(e);return i.shaderSource(r,t),i.compileShader(r),r}let Gz=0;function Hz(i,e){const t=i.split(`
`),r=[],o=Math.max(e-6,0),a=Math.min(e+6,t.length);for(let l=o;l<a;l++){const d=l+1;r.push(`${d===e?">":" "} ${d}: ${t[l]}`)}return r.join(`
`)}function Vz(i){switch(i){case Zu:return["Linear","( value )"];case Dr:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",i),["Linear","( value )"]}}function kT(i,e,t){const r=i.getShaderParameter(e,35713),o=i.getShaderInfoLog(e).trim();if(r&&o==="")return"";const a=/ERROR: 0:(\d+)/.exec(o);if(a){const l=parseInt(a[1]);return t.toUpperCase()+`

`+o+`

`+Hz(i.getShaderSource(e),l)}else return o}function Qz(i,e){const t=Vz(e);return"vec4 "+i+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function Wz(i,e){let t;switch(e){case HL:t="Linear";break;case VL:t="Reinhard";break;case QL:t="OptimizedCineon";break;case YC:t="ACESFilmic";break;case WL:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+i+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function jz(i){return[i.extensionDerivatives||i.envMapCubeUVHeight||i.bumpMap||i.normalMapTangentSpace||i.clearcoatNormalMap||i.flatShading||i.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(i.extensionFragDepth||i.logarithmicDepthBuffer)&&i.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",i.extensionDrawBuffers&&i.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(i.extensionShaderTextureLOD||i.envMap||i.transmission)&&i.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(NA).join(`
`)}function Xz(i){const e=[];for(const t in i){const r=i[t];r!==!1&&e.push("#define "+t+" "+r)}return e.join(`
`)}function Kz(i,e){const t={},r=i.getProgramParameter(e,35721);for(let o=0;o<r;o++){const a=i.getActiveAttrib(e,o),l=a.name;let d=1;a.type===35674&&(d=2),a.type===35675&&(d=3),a.type===35676&&(d=4),t[l]={type:a.type,location:i.getAttribLocation(e,l),locationSize:d}}return t}function NA(i){return i!==""}function UT(i,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function zT(i,e){return i.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Yz=/^[ \t]*#include +<([\w\d./]+)>/gm;function zw(i){return i.replace(Yz,qz)}function qz(i,e){const t=nr[e];if(t===void 0)throw new Error("Can not resolve #include <"+e+">");return zw(t)}const Jz=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function GT(i){return i.replace(Jz,Zz)}function Zz(i,e,t,r){let o="";for(let a=parseInt(e);a<parseInt(t);a++)o+=r.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return o}function HT(i){let e="precision "+i.precision+` float;
precision `+i.precision+" int;";return i.precision==="highp"?e+=`
#define HIGH_PRECISION`:i.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:i.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function $z(i){let e="SHADOWMAP_TYPE_BASIC";return i.shadowMapType===Sx?e="SHADOWMAP_TYPE_PCF":i.shadowMapType===KA?e="SHADOWMAP_TYPE_PCF_SOFT":i.shadowMapType===Cf&&(e="SHADOWMAP_TYPE_VSM"),e}function eG(i){let e="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case nd:case id:e="ENVMAP_TYPE_CUBE";break;case rg:e="ENVMAP_TYPE_CUBE_UV";break}return e}function tG(i){let e="ENVMAP_MODE_REFLECTION";if(i.envMap)switch(i.envMapMode){case id:e="ENVMAP_MODE_REFRACTION";break}return e}function nG(i){let e="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case P0:e="ENVMAP_BLENDING_MULTIPLY";break;case zL:e="ENVMAP_BLENDING_MIX";break;case GL:e="ENVMAP_BLENDING_ADD";break}return e}function iG(i){const e=i.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:r,maxMip:t}}function rG(i,e,t,r){const o=i.getContext(),a=t.defines;let l=t.vertexShader,d=t.fragmentShader;const c=$z(t),h=eG(t),m=tG(t),p=nG(t),A=iG(t),v=t.isWebGL2?"":jz(t),y=Xz(a),x=o.createProgram();let C,g,b=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(C=[y].filter(NA).join(`
`),C.length>0&&(C+=`
`),g=[v,y].filter(NA).join(`
`),g.length>0&&(g+=`
`)):(C=[HT(t),"#define SHADER_NAME "+t.shaderName,y,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+m:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs2?"#define USE_UV2":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(NA).join(`
`),g=[v,HT(t),"#define SHADER_NAME "+t.shaderName,y,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+h:"",t.envMap?"#define "+m:"",t.envMap?"#define "+p:"",A?"#define CUBEUV_TEXEL_WIDTH "+A.texelWidth:"",A?"#define CUBEUV_TEXEL_HEIGHT "+A.texelHeight:"",A?"#define CUBEUV_MAX_MIP "+A.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs2?"#define USE_UV2":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==vc?"#define TONE_MAPPING":"",t.toneMapping!==vc?nr.tonemapping_pars_fragment:"",t.toneMapping!==vc?Wz("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",nr.encodings_pars_fragment,Qz("linearToOutputTexel",t.outputEncoding),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(NA).join(`
`)),l=zw(l),l=UT(l,t),l=zT(l,t),d=zw(d),d=UT(d,t),d=zT(d,t),l=GT(l),d=GT(d),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(b=`#version 300 es
`,C=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+C,g=["#define varying in",t.glslVersion===Nw?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===Nw?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+g);const _=b+C+l,S=b+g+d,R=NT(o,35633,_),P=NT(o,35632,S);if(o.attachShader(x,R),o.attachShader(x,P),t.index0AttributeName!==void 0?o.bindAttribLocation(x,0,t.index0AttributeName):t.morphTargets===!0&&o.bindAttribLocation(x,0,"position"),o.linkProgram(x),i.debug.checkShaderErrors){const L=o.getProgramInfoLog(x).trim(),N=o.getShaderInfoLog(R).trim(),H=o.getShaderInfoLog(P).trim();let J=!0,K=!0;if(o.getProgramParameter(x,35714)===!1)if(J=!1,typeof i.debug.onShaderError=="function")i.debug.onShaderError(o,x,R,P);else{const se=kT(o,R,"vertex"),ae=kT(o,P,"fragment");console.error("THREE.WebGLProgram: Shader Error "+o.getError()+" - VALIDATE_STATUS "+o.getProgramParameter(x,35715)+`

Program Info Log: `+L+`
`+se+`
`+ae)}else L!==""?console.warn("THREE.WebGLProgram: Program Info Log:",L):(N===""||H==="")&&(K=!1);K&&(this.diagnostics={runnable:J,programLog:L,vertexShader:{log:N,prefix:C},fragmentShader:{log:H,prefix:g}})}o.deleteShader(R),o.deleteShader(P);let O;this.getUniforms=function(){return O===void 0&&(O=new I1(o,x)),O};let D;return this.getAttributes=function(){return D===void 0&&(D=Kz(o,x)),D},this.destroy=function(){r.releaseStatesOfProgram(this),o.deleteProgram(x),this.program=void 0},this.name=t.shaderName,this.id=Gz++,this.cacheKey=e,this.usedTimes=1,this.program=x,this.vertexShader=R,this.fragmentShader=P,this}let sG=0;class oG{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,r=e.fragmentShader,o=this._getShaderStage(t),a=this._getShaderStage(r),l=this._getShaderCacheForMaterial(e);return l.has(o)===!1&&(l.add(o),o.usedTimes++),l.has(a)===!1&&(l.add(a),a.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let r=t.get(e);return r===void 0&&(r=new Set,t.set(e,r)),r}_getShaderStage(e){const t=this.shaderCache;let r=t.get(e);return r===void 0&&(r=new aG(e),t.set(e,r)),r}}class aG{constructor(e){this.id=sG++,this.code=e,this.usedTimes=0}}function lG(i,e,t,r,o,a,l){const d=new Of,c=new oG,h=[],m=o.isWebGL2,p=o.logarithmicDepthBuffer,A=o.vertexTextures;let v=o.precision;const y={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function x(L){return L===1?"uv2":"uv"}function C(L,N,H,J,K){const se=J.fog,ae=K.geometry,ee=L.isMeshStandardMaterial?J.environment:null,ne=(L.isMeshStandardMaterial?t:e).get(L.envMap||ee),X=ne&&ne.mapping===rg?ne.image.height:null,W=y[L.type];L.precision!==null&&(v=o.getMaxPrecision(L.precision),v!==L.precision&&console.warn("THREE.WebGLProgram.getParameters:",L.precision,"not supported, using",v,"instead."));const ce=ae.morphAttributes.position||ae.morphAttributes.normal||ae.morphAttributes.color,he=ce!==void 0?ce.length:0;let xe=0;ae.morphAttributes.position!==void 0&&(xe=1),ae.morphAttributes.normal!==void 0&&(xe=2),ae.morphAttributes.color!==void 0&&(xe=3);let ve,Fe,je,rt;if(W){const Tt=dc[W];ve=Tt.vertexShader,Fe=Tt.fragmentShader}else ve=L.vertexShader,Fe=L.fragmentShader,c.update(L),je=c.getVertexShaderID(L),rt=c.getFragmentShaderID(L);const He=i.getRenderTarget(),Ot=K.isInstancedMesh===!0,xt=!!L.map,gt=!!L.matcap,It=!!ne,ct=!!L.aoMap,ut=!!L.lightMap,Ct=!!L.bumpMap,qt=!!L.normalMap,Ft=!!L.displacementMap,un=!!L.emissiveMap,fn=!!L.metalnessMap,An=!!L.roughnessMap,Bn=L.clearcoat>0,ci=L.iridescence>0,ze=L.sheen>0,Pe=L.transmission>0,qe=Bn&&!!L.clearcoatMap,ye=Bn&&!!L.clearcoatNormalMap,me=Bn&&!!L.clearcoatRoughnessMap,Re=ci&&!!L.iridescenceMap,Se=ci&&!!L.iridescenceThicknessMap,Be=ze&&!!L.sheenColorMap,Ee=ze&&!!L.sheenRoughnessMap,Xe=!!L.specularMap,fe=!!L.specularColorMap,Oe=!!L.specularIntensityMap,$e=Pe&&!!L.transmissionMap,le=Pe&&!!L.thicknessMap,Q=!!L.gradientMap,Z=!!L.alphaMap,Ie=L.alphaTest>0,Ae=!!L.extensions,Te=!!ae.attributes.uv2;return{isWebGL2:m,shaderID:W,shaderName:L.type,vertexShader:ve,fragmentShader:Fe,defines:L.defines,customVertexShaderID:je,customFragmentShaderID:rt,isRawShaderMaterial:L.isRawShaderMaterial===!0,glslVersion:L.glslVersion,precision:v,instancing:Ot,instancingColor:Ot&&K.instanceColor!==null,supportsVertexTextures:A,outputEncoding:He===null?i.outputEncoding:He.isXRRenderTarget===!0?He.texture.encoding:Zu,map:xt,matcap:gt,envMap:It,envMapMode:It&&ne.mapping,envMapCubeUVHeight:X,aoMap:ct,lightMap:ut,bumpMap:Ct,normalMap:qt,displacementMap:A&&Ft,emissiveMap:un,normalMapObjectSpace:qt&&L.normalMapType===fD,normalMapTangentSpace:qt&&L.normalMapType===ud,decodeVideoTexture:xt&&L.map.isVideoTexture===!0&&L.map.encoding===Dr,metalnessMap:fn,roughnessMap:An,clearcoat:Bn,clearcoatMap:qe,clearcoatNormalMap:ye,clearcoatRoughnessMap:me,iridescence:ci,iridescenceMap:Re,iridescenceThicknessMap:Se,sheen:ze,sheenColorMap:Be,sheenRoughnessMap:Ee,specularMap:Xe,specularColorMap:fe,specularIntensityMap:Oe,transmission:Pe,transmissionMap:$e,thicknessMap:le,gradientMap:Q,opaque:L.transparent===!1&&L.blending===Lf,alphaMap:Z,alphaTest:Ie,combine:L.combine,mapUv:xt&&x(L.map.channel),aoMapUv:ct&&x(L.aoMap.channel),lightMapUv:ut&&x(L.lightMap.channel),bumpMapUv:Ct&&x(L.bumpMap.channel),normalMapUv:qt&&x(L.normalMap.channel),displacementMapUv:Ft&&x(L.displacementMap.channel),emissiveMapUv:un&&x(L.emissiveMap.channel),metalnessMapUv:fn&&x(L.metalnessMap.channel),roughnessMapUv:An&&x(L.roughnessMap.channel),clearcoatMapUv:qe&&x(L.clearcoatMap.channel),clearcoatNormalMapUv:ye&&x(L.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:me&&x(L.clearcoatRoughnessMap.channel),iridescenceMapUv:Re&&x(L.iridescenceMap.channel),iridescenceThicknessMapUv:Se&&x(L.iridescenceThicknessMap.channel),sheenColorMapUv:Be&&x(L.sheenColorMap.channel),sheenRoughnessMapUv:Ee&&x(L.sheenRoughnessMap.channel),specularMapUv:Xe&&x(L.specularMap.channel),specularColorMapUv:fe&&x(L.specularColorMap.channel),specularIntensityMapUv:Oe&&x(L.specularIntensityMap.channel),transmissionMapUv:$e&&x(L.transmissionMap.channel),thicknessMapUv:le&&x(L.thicknessMap.channel),alphaMapUv:Z&&x(L.alphaMap.channel),vertexTangents:qt&&!!ae.attributes.tangent,vertexColors:L.vertexColors,vertexAlphas:L.vertexColors===!0&&!!ae.attributes.color&&ae.attributes.color.itemSize===4,vertexUvs2:Te,pointsUvs:K.isPoints===!0&&!!ae.attributes.uv&&(xt||Z),fog:!!se,useFog:L.fog===!0,fogExp2:se&&se.isFogExp2,flatShading:L.flatShading===!0,sizeAttenuation:L.sizeAttenuation===!0,logarithmicDepthBuffer:p,skinning:K.isSkinnedMesh===!0,morphTargets:ae.morphAttributes.position!==void 0,morphNormals:ae.morphAttributes.normal!==void 0,morphColors:ae.morphAttributes.color!==void 0,morphTargetsCount:he,morphTextureStride:xe,numDirLights:N.directional.length,numPointLights:N.point.length,numSpotLights:N.spot.length,numSpotLightMaps:N.spotLightMap.length,numRectAreaLights:N.rectArea.length,numHemiLights:N.hemi.length,numDirLightShadows:N.directionalShadowMap.length,numPointLightShadows:N.pointShadowMap.length,numSpotLightShadows:N.spotShadowMap.length,numSpotLightShadowsWithMaps:N.numSpotLightShadowsWithMaps,numClippingPlanes:l.numPlanes,numClipIntersection:l.numIntersection,dithering:L.dithering,shadowMapEnabled:i.shadowMap.enabled&&H.length>0,shadowMapType:i.shadowMap.type,toneMapping:L.toneMapped?i.toneMapping:vc,useLegacyLights:i.useLegacyLights,premultipliedAlpha:L.premultipliedAlpha,doubleSided:L.side===pc,flipSided:L.side===Ea,useDepthPacking:L.depthPacking>=0,depthPacking:L.depthPacking||0,index0AttributeName:L.index0AttributeName,extensionDerivatives:Ae&&L.extensions.derivatives===!0,extensionFragDepth:Ae&&L.extensions.fragDepth===!0,extensionDrawBuffers:Ae&&L.extensions.drawBuffers===!0,extensionShaderTextureLOD:Ae&&L.extensions.shaderTextureLOD===!0,rendererExtensionFragDepth:m||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:m||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:m||r.has("EXT_shader_texture_lod"),customProgramCacheKey:L.customProgramCacheKey()}}function g(L){const N=[];if(L.shaderID?N.push(L.shaderID):(N.push(L.customVertexShaderID),N.push(L.customFragmentShaderID)),L.defines!==void 0)for(const H in L.defines)N.push(H),N.push(L.defines[H]);return L.isRawShaderMaterial===!1&&(b(N,L),_(N,L),N.push(i.outputEncoding)),N.push(L.customProgramCacheKey),N.join()}function b(L,N){L.push(N.precision),L.push(N.outputEncoding),L.push(N.envMapMode),L.push(N.envMapCubeUVHeight),L.push(N.mapUv),L.push(N.alphaMapUv),L.push(N.lightMapUv),L.push(N.aoMapUv),L.push(N.bumpMapUv),L.push(N.normalMapUv),L.push(N.displacementMapUv),L.push(N.emissiveMapUv),L.push(N.metalnessMapUv),L.push(N.roughnessMapUv),L.push(N.clearcoatMapUv),L.push(N.clearcoatNormalMapUv),L.push(N.clearcoatRoughnessMapUv),L.push(N.iridescenceMapUv),L.push(N.iridescenceThicknessMapUv),L.push(N.sheenColorMapUv),L.push(N.sheenRoughnessMapUv),L.push(N.specularMapUv),L.push(N.specularColorMapUv),L.push(N.specularIntensityMapUv),L.push(N.transmissionMapUv),L.push(N.thicknessMapUv),L.push(N.combine),L.push(N.fogExp2),L.push(N.sizeAttenuation),L.push(N.morphTargetsCount),L.push(N.morphAttributeCount),L.push(N.numDirLights),L.push(N.numPointLights),L.push(N.numSpotLights),L.push(N.numSpotLightMaps),L.push(N.numHemiLights),L.push(N.numRectAreaLights),L.push(N.numDirLightShadows),L.push(N.numPointLightShadows),L.push(N.numSpotLightShadows),L.push(N.numSpotLightShadowsWithMaps),L.push(N.shadowMapType),L.push(N.toneMapping),L.push(N.numClippingPlanes),L.push(N.numClipIntersection),L.push(N.depthPacking)}function _(L,N){d.disableAll(),N.isWebGL2&&d.enable(0),N.supportsVertexTextures&&d.enable(1),N.instancing&&d.enable(2),N.instancingColor&&d.enable(3),N.matcap&&d.enable(4),N.envMap&&d.enable(5),N.normalMapObjectSpace&&d.enable(6),N.normalMapTangentSpace&&d.enable(7),N.clearcoat&&d.enable(8),N.iridescence&&d.enable(9),N.alphaTest&&d.enable(10),N.vertexColors&&d.enable(11),N.vertexAlphas&&d.enable(12),N.vertexUvs2&&d.enable(13),N.vertexTangents&&d.enable(14),L.push(d.mask),d.disableAll(),N.fog&&d.enable(0),N.useFog&&d.enable(1),N.flatShading&&d.enable(2),N.logarithmicDepthBuffer&&d.enable(3),N.skinning&&d.enable(4),N.morphTargets&&d.enable(5),N.morphNormals&&d.enable(6),N.morphColors&&d.enable(7),N.premultipliedAlpha&&d.enable(8),N.shadowMapEnabled&&d.enable(9),N.useLegacyLights&&d.enable(10),N.doubleSided&&d.enable(11),N.flipSided&&d.enable(12),N.useDepthPacking&&d.enable(13),N.dithering&&d.enable(14),N.transmission&&d.enable(15),N.sheen&&d.enable(16),N.decodeVideoTexture&&d.enable(17),N.opaque&&d.enable(18),N.pointsUvs&&d.enable(19),L.push(d.mask)}function S(L){const N=y[L.type];let H;if(N){const J=dc[N];H=ED.clone(J.uniforms)}else H=L.uniforms;return H}function R(L,N){let H;for(let J=0,K=h.length;J<K;J++){const se=h[J];if(se.cacheKey===N){H=se,++H.usedTimes;break}}return H===void 0&&(H=new rG(i,N,L,a),h.push(H)),H}function P(L){if(--L.usedTimes===0){const N=h.indexOf(L);h[N]=h[h.length-1],h.pop(),L.destroy()}}function O(L){c.remove(L)}function D(){c.dispose()}return{getParameters:C,getProgramCacheKey:g,getUniforms:S,acquireProgram:R,releaseProgram:P,releaseShaderCache:O,programs:h,dispose:D}}function cG(){let i=new WeakMap;function e(a){let l=i.get(a);return l===void 0&&(l={},i.set(a,l)),l}function t(a){i.delete(a)}function r(a,l,d){i.get(a)[l]=d}function o(){i=new WeakMap}return{get:e,remove:t,update:r,dispose:o}}function uG(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.material.id!==e.material.id?i.material.id-e.material.id:i.z!==e.z?i.z-e.z:i.id-e.id}function VT(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.z!==e.z?e.z-i.z:i.id-e.id}function QT(){const i=[];let e=0;const t=[],r=[],o=[];function a(){e=0,t.length=0,r.length=0,o.length=0}function l(p,A,v,y,x,C){let g=i[e];return g===void 0?(g={id:p.id,object:p,geometry:A,material:v,groupOrder:y,renderOrder:p.renderOrder,z:x,group:C},i[e]=g):(g.id=p.id,g.object=p,g.geometry=A,g.material=v,g.groupOrder=y,g.renderOrder=p.renderOrder,g.z=x,g.group=C),e++,g}function d(p,A,v,y,x,C){const g=l(p,A,v,y,x,C);v.transmission>0?r.push(g):v.transparent===!0?o.push(g):t.push(g)}function c(p,A,v,y,x,C){const g=l(p,A,v,y,x,C);v.transmission>0?r.unshift(g):v.transparent===!0?o.unshift(g):t.unshift(g)}function h(p,A){t.length>1&&t.sort(p||uG),r.length>1&&r.sort(A||VT),o.length>1&&o.sort(A||VT)}function m(){for(let p=e,A=i.length;p<A;p++){const v=i[p];if(v.id===null)break;v.id=null,v.object=null,v.geometry=null,v.material=null,v.group=null}}return{opaque:t,transmissive:r,transparent:o,init:a,push:d,unshift:c,finish:m,sort:h}}function hG(){let i=new WeakMap;function e(r,o){const a=i.get(r);let l;return a===void 0?(l=new QT,i.set(r,[l])):o>=a.length?(l=new QT,a.push(l)):l=a[o],l}function t(){i=new WeakMap}return{get:e,dispose:t}}function dG(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new Ue,color:new Rn};break;case"SpotLight":t={position:new Ue,direction:new Ue,color:new Rn,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new Ue,color:new Rn,distance:0,decay:0};break;case"HemisphereLight":t={direction:new Ue,skyColor:new Rn,groundColor:new Rn};break;case"RectAreaLight":t={color:new Rn,position:new Ue,halfWidth:new Ue,halfHeight:new Ue};break}return i[e.id]=t,t}}}function fG(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Yt};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Yt};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Yt,shadowCameraNear:1,shadowCameraFar:1e3};break}return i[e.id]=t,t}}}let pG=0;function mG(i,e){return(e.castShadow?2:0)-(i.castShadow?2:0)+(e.map?1:0)-(i.map?1:0)}function gG(i,e){const t=new dG,r=fG(),o={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let m=0;m<9;m++)o.probe.push(new Ue);const a=new Ue,l=new ki,d=new ki;function c(m,p){let A=0,v=0,y=0;for(let H=0;H<9;H++)o.probe[H].set(0,0,0);let x=0,C=0,g=0,b=0,_=0,S=0,R=0,P=0,O=0,D=0;m.sort(mG);const L=p===!0?Math.PI:1;for(let H=0,J=m.length;H<J;H++){const K=m[H],se=K.color,ae=K.intensity,ee=K.distance,ne=K.shadow&&K.shadow.map?K.shadow.map.texture:null;if(K.isAmbientLight)A+=se.r*ae*L,v+=se.g*ae*L,y+=se.b*ae*L;else if(K.isLightProbe)for(let X=0;X<9;X++)o.probe[X].addScaledVector(K.sh.coefficients[X],ae);else if(K.isDirectionalLight){const X=t.get(K);if(X.color.copy(K.color).multiplyScalar(K.intensity*L),K.castShadow){const W=K.shadow,ce=r.get(K);ce.shadowBias=W.bias,ce.shadowNormalBias=W.normalBias,ce.shadowRadius=W.radius,ce.shadowMapSize=W.mapSize,o.directionalShadow[x]=ce,o.directionalShadowMap[x]=ne,o.directionalShadowMatrix[x]=K.shadow.matrix,S++}o.directional[x]=X,x++}else if(K.isSpotLight){const X=t.get(K);X.position.setFromMatrixPosition(K.matrixWorld),X.color.copy(se).multiplyScalar(ae*L),X.distance=ee,X.coneCos=Math.cos(K.angle),X.penumbraCos=Math.cos(K.angle*(1-K.penumbra)),X.decay=K.decay,o.spot[g]=X;const W=K.shadow;if(K.map&&(o.spotLightMap[O]=K.map,O++,W.updateMatrices(K),K.castShadow&&D++),o.spotLightMatrix[g]=W.matrix,K.castShadow){const ce=r.get(K);ce.shadowBias=W.bias,ce.shadowNormalBias=W.normalBias,ce.shadowRadius=W.radius,ce.shadowMapSize=W.mapSize,o.spotShadow[g]=ce,o.spotShadowMap[g]=ne,P++}g++}else if(K.isRectAreaLight){const X=t.get(K);X.color.copy(se).multiplyScalar(ae),X.halfWidth.set(K.width*.5,0,0),X.halfHeight.set(0,K.height*.5,0),o.rectArea[b]=X,b++}else if(K.isPointLight){const X=t.get(K);if(X.color.copy(K.color).multiplyScalar(K.intensity*L),X.distance=K.distance,X.decay=K.decay,K.castShadow){const W=K.shadow,ce=r.get(K);ce.shadowBias=W.bias,ce.shadowNormalBias=W.normalBias,ce.shadowRadius=W.radius,ce.shadowMapSize=W.mapSize,ce.shadowCameraNear=W.camera.near,ce.shadowCameraFar=W.camera.far,o.pointShadow[C]=ce,o.pointShadowMap[C]=ne,o.pointShadowMatrix[C]=K.shadow.matrix,R++}o.point[C]=X,C++}else if(K.isHemisphereLight){const X=t.get(K);X.skyColor.copy(K.color).multiplyScalar(ae*L),X.groundColor.copy(K.groundColor).multiplyScalar(ae*L),o.hemi[_]=X,_++}}b>0&&(e.isWebGL2||i.has("OES_texture_float_linear")===!0?(o.rectAreaLTC1=Fn.LTC_FLOAT_1,o.rectAreaLTC2=Fn.LTC_FLOAT_2):i.has("OES_texture_half_float_linear")===!0?(o.rectAreaLTC1=Fn.LTC_HALF_1,o.rectAreaLTC2=Fn.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),o.ambient[0]=A,o.ambient[1]=v,o.ambient[2]=y;const N=o.hash;(N.directionalLength!==x||N.pointLength!==C||N.spotLength!==g||N.rectAreaLength!==b||N.hemiLength!==_||N.numDirectionalShadows!==S||N.numPointShadows!==R||N.numSpotShadows!==P||N.numSpotMaps!==O)&&(o.directional.length=x,o.spot.length=g,o.rectArea.length=b,o.point.length=C,o.hemi.length=_,o.directionalShadow.length=S,o.directionalShadowMap.length=S,o.pointShadow.length=R,o.pointShadowMap.length=R,o.spotShadow.length=P,o.spotShadowMap.length=P,o.directionalShadowMatrix.length=S,o.pointShadowMatrix.length=R,o.spotLightMatrix.length=P+O-D,o.spotLightMap.length=O,o.numSpotLightShadowsWithMaps=D,N.directionalLength=x,N.pointLength=C,N.spotLength=g,N.rectAreaLength=b,N.hemiLength=_,N.numDirectionalShadows=S,N.numPointShadows=R,N.numSpotShadows=P,N.numSpotMaps=O,o.version=pG++)}function h(m,p){let A=0,v=0,y=0,x=0,C=0;const g=p.matrixWorldInverse;for(let b=0,_=m.length;b<_;b++){const S=m[b];if(S.isDirectionalLight){const R=o.directional[A];R.direction.setFromMatrixPosition(S.matrixWorld),a.setFromMatrixPosition(S.target.matrixWorld),R.direction.sub(a),R.direction.transformDirection(g),A++}else if(S.isSpotLight){const R=o.spot[y];R.position.setFromMatrixPosition(S.matrixWorld),R.position.applyMatrix4(g),R.direction.setFromMatrixPosition(S.matrixWorld),a.setFromMatrixPosition(S.target.matrixWorld),R.direction.sub(a),R.direction.transformDirection(g),y++}else if(S.isRectAreaLight){const R=o.rectArea[x];R.position.setFromMatrixPosition(S.matrixWorld),R.position.applyMatrix4(g),d.identity(),l.copy(S.matrixWorld),l.premultiply(g),d.extractRotation(l),R.halfWidth.set(S.width*.5,0,0),R.halfHeight.set(0,S.height*.5,0),R.halfWidth.applyMatrix4(d),R.halfHeight.applyMatrix4(d),x++}else if(S.isPointLight){const R=o.point[v];R.position.setFromMatrixPosition(S.matrixWorld),R.position.applyMatrix4(g),v++}else if(S.isHemisphereLight){const R=o.hemi[C];R.direction.setFromMatrixPosition(S.matrixWorld),R.direction.transformDirection(g),C++}}}return{setup:c,setupView:h,state:o}}function WT(i,e){const t=new gG(i,e),r=[],o=[];function a(){r.length=0,o.length=0}function l(p){r.push(p)}function d(p){o.push(p)}function c(p){t.setup(r,p)}function h(p){t.setupView(r,p)}return{init:a,state:{lightsArray:r,shadowsArray:o,lights:t},setupLights:c,setupLightsView:h,pushLight:l,pushShadow:d}}function AG(i,e){let t=new WeakMap;function r(a,l=0){const d=t.get(a);let c;return d===void 0?(c=new WT(i,e),t.set(a,[c])):l>=d.length?(c=new WT(i,e),d.push(c)):c=d[l],c}function o(){t=new WeakMap}return{get:r,dispose:o}}class oM extends oo{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=hD,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class aM extends oo{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const vG=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,yG=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function xG(i,e,t){let r=new Lx;const o=new Yt,a=new Yt,l=new Kr,d=new oM({depthPacking:dD}),c=new aM,h={},m=t.maxTextureSize,p={[cu]:Ea,[Ea]:cu,[pc]:pc},A=new hu({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Yt},radius:{value:4}},vertexShader:vG,fragmentShader:yG}),v=A.clone();v.defines.HORIZONTAL_PASS=1;const y=new Zi;y.setAttribute("position",new Qr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const x=new Do(y,A),C=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Sx,this.render=function(S,R,P){if(C.enabled===!1||C.autoUpdate===!1&&C.needsUpdate===!1||S.length===0)return;const O=i.getRenderTarget(),D=i.getActiveCubeFace(),L=i.getActiveMipmapLevel(),N=i.state;N.setBlending(Wu),N.buffers.color.setClear(1,1,1,1),N.buffers.depth.setTest(!0),N.setScissorTest(!1);for(let H=0,J=S.length;H<J;H++){const K=S[H],se=K.shadow;if(se===void 0){console.warn("THREE.WebGLShadowMap:",K,"has no shadow.");continue}if(se.autoUpdate===!1&&se.needsUpdate===!1)continue;o.copy(se.mapSize);const ae=se.getFrameExtents();if(o.multiply(ae),a.copy(se.mapSize),(o.x>m||o.y>m)&&(o.x>m&&(a.x=Math.floor(m/ae.x),o.x=a.x*ae.x,se.mapSize.x=a.x),o.y>m&&(a.y=Math.floor(m/ae.y),o.y=a.y*ae.y,se.mapSize.y=a.y)),se.map===null){const ne=this.type!==Cf?{minFilter:Ps,magFilter:Ps}:{};se.map=new xc(o.x,o.y,ne),se.map.texture.name=K.name+".shadowMap",se.camera.updateProjectionMatrix()}i.setRenderTarget(se.map),i.clear();const ee=se.getViewportCount();for(let ne=0;ne<ee;ne++){const X=se.getViewport(ne);l.set(a.x*X.x,a.y*X.y,a.x*X.z,a.y*X.w),N.viewport(l),se.updateMatrices(K,ne),r=se.getFrustum(),_(R,P,se.camera,K,this.type)}se.isPointLightShadow!==!0&&this.type===Cf&&g(se,P),se.needsUpdate=!1}C.needsUpdate=!1,i.setRenderTarget(O,D,L)};function g(S,R){const P=e.update(x);A.defines.VSM_SAMPLES!==S.blurSamples&&(A.defines.VSM_SAMPLES=S.blurSamples,v.defines.VSM_SAMPLES=S.blurSamples,A.needsUpdate=!0,v.needsUpdate=!0),S.mapPass===null&&(S.mapPass=new xc(o.x,o.y)),A.uniforms.shadow_pass.value=S.map.texture,A.uniforms.resolution.value=S.mapSize,A.uniforms.radius.value=S.radius,i.setRenderTarget(S.mapPass),i.clear(),i.renderBufferDirect(R,null,P,A,x,null),v.uniforms.shadow_pass.value=S.mapPass.texture,v.uniforms.resolution.value=S.mapSize,v.uniforms.radius.value=S.radius,i.setRenderTarget(S.map),i.clear(),i.renderBufferDirect(R,null,P,v,x,null)}function b(S,R,P,O){let D=null;const L=P.isPointLight===!0?S.customDistanceMaterial:S.customDepthMaterial;if(L!==void 0)D=L;else if(D=P.isPointLight===!0?c:d,i.localClippingEnabled&&R.clipShadows===!0&&Array.isArray(R.clippingPlanes)&&R.clippingPlanes.length!==0||R.displacementMap&&R.displacementScale!==0||R.alphaMap&&R.alphaTest>0||R.map&&R.alphaTest>0){const N=D.uuid,H=R.uuid;let J=h[N];J===void 0&&(J={},h[N]=J);let K=J[H];K===void 0&&(K=D.clone(),J[H]=K),D=K}if(D.visible=R.visible,D.wireframe=R.wireframe,O===Cf?D.side=R.shadowSide!==null?R.shadowSide:R.side:D.side=R.shadowSide!==null?R.shadowSide:p[R.side],D.alphaMap=R.alphaMap,D.alphaTest=R.alphaTest,D.map=R.map,D.clipShadows=R.clipShadows,D.clippingPlanes=R.clippingPlanes,D.clipIntersection=R.clipIntersection,D.displacementMap=R.displacementMap,D.displacementScale=R.displacementScale,D.displacementBias=R.displacementBias,D.wireframeLinewidth=R.wireframeLinewidth,D.linewidth=R.linewidth,P.isPointLight===!0&&D.isMeshDistanceMaterial===!0){const N=i.properties.get(D);N.light=P}return D}function _(S,R,P,O,D){if(S.visible===!1)return;if(S.layers.test(R.layers)&&(S.isMesh||S.isLine||S.isPoints)&&(S.castShadow||S.receiveShadow&&D===Cf)&&(!S.frustumCulled||r.intersectsObject(S))){S.modelViewMatrix.multiplyMatrices(P.matrixWorldInverse,S.matrixWorld);const H=e.update(S),J=S.material;if(Array.isArray(J)){const K=H.groups;for(let se=0,ae=K.length;se<ae;se++){const ee=K[se],ne=J[ee.materialIndex];if(ne&&ne.visible){const X=b(S,ne,O,D);i.renderBufferDirect(P,null,H,X,S,ee)}}}else if(J.visible){const K=b(S,J,O,D);i.renderBufferDirect(P,null,H,K,S,null)}}const N=S.children;for(let H=0,J=N.length;H<J;H++)_(N[H],R,P,O,D)}}function EG(i,e,t){const r=t.isWebGL2;function o(){let Ae=!1;const Te=new Kr;let Ve=null;const Tt=new Kr(0,0,0,0);return{setMask:function(Ht){Ve!==Ht&&!Ae&&(i.colorMask(Ht,Ht,Ht,Ht),Ve=Ht)},setLocked:function(Ht){Ae=Ht},setClear:function(Ht,nn,cn,Xn,cr){cr===!0&&(Ht*=Xn,nn*=Xn,cn*=Xn),Te.set(Ht,nn,cn,Xn),Tt.equals(Te)===!1&&(i.clearColor(Ht,nn,cn,Xn),Tt.copy(Te))},reset:function(){Ae=!1,Ve=null,Tt.set(-1,0,0,0)}}}function a(){let Ae=!1,Te=null,Ve=null,Tt=null;return{setTest:function(Ht){Ht?He(2929):Ot(2929)},setMask:function(Ht){Te!==Ht&&!Ae&&(i.depthMask(Ht),Te=Ht)},setFunc:function(Ht){if(Ve!==Ht){switch(Ht){case DL:i.depthFunc(512);break;case PL:i.depthFunc(519);break;case OL:i.depthFunc(513);break;case tx:i.depthFunc(515);break;case FL:i.depthFunc(514);break;case NL:i.depthFunc(518);break;case kL:i.depthFunc(516);break;case UL:i.depthFunc(517);break;default:i.depthFunc(515)}Ve=Ht}},setLocked:function(Ht){Ae=Ht},setClear:function(Ht){Tt!==Ht&&(i.clearDepth(Ht),Tt=Ht)},reset:function(){Ae=!1,Te=null,Ve=null,Tt=null}}}function l(){let Ae=!1,Te=null,Ve=null,Tt=null,Ht=null,nn=null,cn=null,Xn=null,cr=null;return{setTest:function(Ni){Ae||(Ni?He(2960):Ot(2960))},setMask:function(Ni){Te!==Ni&&!Ae&&(i.stencilMask(Ni),Te=Ni)},setFunc:function(Ni,or,bi){(Ve!==Ni||Tt!==or||Ht!==bi)&&(i.stencilFunc(Ni,or,bi),Ve=Ni,Tt=or,Ht=bi)},setOp:function(Ni,or,bi){(nn!==Ni||cn!==or||Xn!==bi)&&(i.stencilOp(Ni,or,bi),nn=Ni,cn=or,Xn=bi)},setLocked:function(Ni){Ae=Ni},setClear:function(Ni){cr!==Ni&&(i.clearStencil(Ni),cr=Ni)},reset:function(){Ae=!1,Te=null,Ve=null,Tt=null,Ht=null,nn=null,cn=null,Xn=null,cr=null}}}const d=new o,c=new a,h=new l,m=new WeakMap,p=new WeakMap;let A={},v={},y=new WeakMap,x=[],C=null,g=!1,b=null,_=null,S=null,R=null,P=null,O=null,D=null,L=!1,N=null,H=null,J=null,K=null,se=null;const ae=i.getParameter(35661);let ee=!1,ne=0;const X=i.getParameter(7938);X.indexOf("WebGL")!==-1?(ne=parseFloat(/^WebGL (\d)/.exec(X)[1]),ee=ne>=1):X.indexOf("OpenGL ES")!==-1&&(ne=parseFloat(/^OpenGL ES (\d)/.exec(X)[1]),ee=ne>=2);let W=null,ce={};const he=i.getParameter(3088),xe=i.getParameter(2978),ve=new Kr().fromArray(he),Fe=new Kr().fromArray(xe);function je(Ae,Te,Ve){const Tt=new Uint8Array(4),Ht=i.createTexture();i.bindTexture(Ae,Ht),i.texParameteri(Ae,10241,9728),i.texParameteri(Ae,10240,9728);for(let nn=0;nn<Ve;nn++)i.texImage2D(Te+nn,0,6408,1,1,0,6408,5121,Tt);return Ht}const rt={};rt[3553]=je(3553,3553,1),rt[34067]=je(34067,34069,6),d.setClear(0,0,0,1),c.setClear(1),h.setClear(0),He(2929),c.setFunc(tx),Ft(!1),un(lw),He(2884),Ct(Wu);function He(Ae){A[Ae]!==!0&&(i.enable(Ae),A[Ae]=!0)}function Ot(Ae){A[Ae]!==!1&&(i.disable(Ae),A[Ae]=!1)}function xt(Ae,Te){return v[Ae]!==Te?(i.bindFramebuffer(Ae,Te),v[Ae]=Te,r&&(Ae===36009&&(v[36160]=Te),Ae===36160&&(v[36009]=Te)),!0):!1}function gt(Ae,Te){let Ve=x,Tt=!1;if(Ae)if(Ve=y.get(Te),Ve===void 0&&(Ve=[],y.set(Te,Ve)),Ae.isWebGLMultipleRenderTargets){const Ht=Ae.texture;if(Ve.length!==Ht.length||Ve[0]!==36064){for(let nn=0,cn=Ht.length;nn<cn;nn++)Ve[nn]=36064+nn;Ve.length=Ht.length,Tt=!0}}else Ve[0]!==36064&&(Ve[0]=36064,Tt=!0);else Ve[0]!==1029&&(Ve[0]=1029,Tt=!0);Tt&&(t.isWebGL2?i.drawBuffers(Ve):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Ve))}function It(Ae){return C!==Ae?(i.useProgram(Ae),C=Ae,!0):!1}const ct={[yf]:32774,[_L]:32778,[wL]:32779};if(r)ct[dw]=32775,ct[fw]=32776;else{const Ae=e.get("EXT_blend_minmax");Ae!==null&&(ct[dw]=Ae.MIN_EXT,ct[fw]=Ae.MAX_EXT)}const ut={[CL]:0,[ML]:1,[bL]:768,[XC]:770,[LL]:776,[RL]:774,[TL]:772,[SL]:769,[KC]:771,[BL]:775,[IL]:773};function Ct(Ae,Te,Ve,Tt,Ht,nn,cn,Xn){if(Ae===Wu){g===!0&&(Ot(3042),g=!1);return}if(g===!1&&(He(3042),g=!0),Ae!==EL){if(Ae!==b||Xn!==L){if((_!==yf||P!==yf)&&(i.blendEquation(32774),_=yf,P=yf),Xn)switch(Ae){case Lf:i.blendFuncSeparate(1,771,1,771);break;case cw:i.blendFunc(1,1);break;case uw:i.blendFuncSeparate(0,769,0,1);break;case hw:i.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ae);break}else switch(Ae){case Lf:i.blendFuncSeparate(770,771,1,771);break;case cw:i.blendFunc(770,1);break;case uw:i.blendFuncSeparate(0,769,0,1);break;case hw:i.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ae);break}S=null,R=null,O=null,D=null,b=Ae,L=Xn}return}Ht=Ht||Te,nn=nn||Ve,cn=cn||Tt,(Te!==_||Ht!==P)&&(i.blendEquationSeparate(ct[Te],ct[Ht]),_=Te,P=Ht),(Ve!==S||Tt!==R||nn!==O||cn!==D)&&(i.blendFuncSeparate(ut[Ve],ut[Tt],ut[nn],ut[cn]),S=Ve,R=Tt,O=nn,D=cn),b=Ae,L=!1}function qt(Ae,Te){Ae.side===pc?Ot(2884):He(2884);let Ve=Ae.side===Ea;Te&&(Ve=!Ve),Ft(Ve),Ae.blending===Lf&&Ae.transparent===!1?Ct(Wu):Ct(Ae.blending,Ae.blendEquation,Ae.blendSrc,Ae.blendDst,Ae.blendEquationAlpha,Ae.blendSrcAlpha,Ae.blendDstAlpha,Ae.premultipliedAlpha),c.setFunc(Ae.depthFunc),c.setTest(Ae.depthTest),c.setMask(Ae.depthWrite),d.setMask(Ae.colorWrite);const Tt=Ae.stencilWrite;h.setTest(Tt),Tt&&(h.setMask(Ae.stencilWriteMask),h.setFunc(Ae.stencilFunc,Ae.stencilRef,Ae.stencilFuncMask),h.setOp(Ae.stencilFail,Ae.stencilZFail,Ae.stencilZPass)),An(Ae.polygonOffset,Ae.polygonOffsetFactor,Ae.polygonOffsetUnits),Ae.alphaToCoverage===!0?He(32926):Ot(32926)}function Ft(Ae){N!==Ae&&(Ae?i.frontFace(2304):i.frontFace(2305),N=Ae)}function un(Ae){Ae!==vL?(He(2884),Ae!==H&&(Ae===lw?i.cullFace(1029):Ae===yL?i.cullFace(1028):i.cullFace(1032))):Ot(2884),H=Ae}function fn(Ae){Ae!==J&&(ee&&i.lineWidth(Ae),J=Ae)}function An(Ae,Te,Ve){Ae?(He(32823),(K!==Te||se!==Ve)&&(i.polygonOffset(Te,Ve),K=Te,se=Ve)):Ot(32823)}function Bn(Ae){Ae?He(3089):Ot(3089)}function ci(Ae){Ae===void 0&&(Ae=33984+ae-1),W!==Ae&&(i.activeTexture(Ae),W=Ae)}function ze(Ae,Te,Ve){Ve===void 0&&(W===null?Ve=33984+ae-1:Ve=W);let Tt=ce[Ve];Tt===void 0&&(Tt={type:void 0,texture:void 0},ce[Ve]=Tt),(Tt.type!==Ae||Tt.texture!==Te)&&(W!==Ve&&(i.activeTexture(Ve),W=Ve),i.bindTexture(Ae,Te||rt[Ae]),Tt.type=Ae,Tt.texture=Te)}function Pe(){const Ae=ce[W];Ae!==void 0&&Ae.type!==void 0&&(i.bindTexture(Ae.type,null),Ae.type=void 0,Ae.texture=void 0)}function qe(){try{i.compressedTexImage2D.apply(i,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function ye(){try{i.compressedTexImage3D.apply(i,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function me(){try{i.texSubImage2D.apply(i,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function Re(){try{i.texSubImage3D.apply(i,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function Se(){try{i.compressedTexSubImage2D.apply(i,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function Be(){try{i.compressedTexSubImage3D.apply(i,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function Ee(){try{i.texStorage2D.apply(i,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function Xe(){try{i.texStorage3D.apply(i,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function fe(){try{i.texImage2D.apply(i,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function Oe(){try{i.texImage3D.apply(i,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function $e(Ae){ve.equals(Ae)===!1&&(i.scissor(Ae.x,Ae.y,Ae.z,Ae.w),ve.copy(Ae))}function le(Ae){Fe.equals(Ae)===!1&&(i.viewport(Ae.x,Ae.y,Ae.z,Ae.w),Fe.copy(Ae))}function Q(Ae,Te){let Ve=p.get(Te);Ve===void 0&&(Ve=new WeakMap,p.set(Te,Ve));let Tt=Ve.get(Ae);Tt===void 0&&(Tt=i.getUniformBlockIndex(Te,Ae.name),Ve.set(Ae,Tt))}function Z(Ae,Te){const Tt=p.get(Te).get(Ae);m.get(Te)!==Tt&&(i.uniformBlockBinding(Te,Tt,Ae.__bindingPointIndex),m.set(Te,Tt))}function Ie(){i.disable(3042),i.disable(2884),i.disable(2929),i.disable(32823),i.disable(3089),i.disable(2960),i.disable(32926),i.blendEquation(32774),i.blendFunc(1,0),i.blendFuncSeparate(1,0,1,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(513),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(519,0,4294967295),i.stencilOp(7680,7680,7680),i.clearStencil(0),i.cullFace(1029),i.frontFace(2305),i.polygonOffset(0,0),i.activeTexture(33984),i.bindFramebuffer(36160,null),r===!0&&(i.bindFramebuffer(36009,null),i.bindFramebuffer(36008,null)),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),A={},W=null,ce={},v={},y=new WeakMap,x=[],C=null,g=!1,b=null,_=null,S=null,R=null,P=null,O=null,D=null,L=!1,N=null,H=null,J=null,K=null,se=null,ve.set(0,0,i.canvas.width,i.canvas.height),Fe.set(0,0,i.canvas.width,i.canvas.height),d.reset(),c.reset(),h.reset()}return{buffers:{color:d,depth:c,stencil:h},enable:He,disable:Ot,bindFramebuffer:xt,drawBuffers:gt,useProgram:It,setBlending:Ct,setMaterial:qt,setFlipSided:Ft,setCullFace:un,setLineWidth:fn,setPolygonOffset:An,setScissorTest:Bn,activeTexture:ci,bindTexture:ze,unbindTexture:Pe,compressedTexImage2D:qe,compressedTexImage3D:ye,texImage2D:fe,texImage3D:Oe,updateUBOMapping:Q,uniformBlockBinding:Z,texStorage2D:Ee,texStorage3D:Xe,texSubImage2D:me,texSubImage3D:Re,compressedTexSubImage2D:Se,compressedTexSubImage3D:Be,scissor:$e,viewport:le,reset:Ie}}function _G(i,e,t,r,o,a,l){const d=o.isWebGL2,c=o.maxTextures,h=o.maxCubemapSize,m=o.maxTextureSize,p=o.maxSamples,A=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,v=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),y=new WeakMap;let x;const C=new WeakMap;let g=!1;try{g=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function b(ze,Pe){return g?new OffscreenCanvas(ze,Pe):E0("canvas")}function _(ze,Pe,qe,ye){let me=1;if((ze.width>ye||ze.height>ye)&&(me=ye/Math.max(ze.width,ze.height)),me<1||Pe===!0)if(typeof HTMLImageElement<"u"&&ze instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&ze instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&ze instanceof ImageBitmap){const Re=Pe?gD:Math.floor,Se=Re(me*ze.width),Be=Re(me*ze.height);x===void 0&&(x=b(Se,Be));const Ee=qe?b(Se,Be):x;return Ee.width=Se,Ee.height=Be,Ee.getContext("2d").drawImage(ze,0,0,Se,Be),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ze.width+"x"+ze.height+") to ("+Se+"x"+Be+")."),Ee}else return"data"in ze&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ze.width+"x"+ze.height+")."),ze;return ze}function S(ze){return kw(ze.width)&&kw(ze.height)}function R(ze){return d?!1:ze.wrapS!==Uo||ze.wrapT!==Uo||ze.minFilter!==Ps&&ze.minFilter!==ws}function P(ze,Pe){return ze.generateMipmaps&&Pe&&ze.minFilter!==Ps&&ze.minFilter!==ws}function O(ze){i.generateMipmap(ze)}function D(ze,Pe,qe,ye,me=!1){if(d===!1)return Pe;if(ze!==null){if(i[ze]!==void 0)return i[ze];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+ze+"'")}let Re=Pe;return Pe===6403&&(qe===5126&&(Re=33326),qe===5131&&(Re=33325),qe===5121&&(Re=33321)),Pe===33319&&(qe===5126&&(Re=33328),qe===5131&&(Re=33327),qe===5121&&(Re=33323)),Pe===6408&&(qe===5126&&(Re=34836),qe===5131&&(Re=34842),qe===5121&&(Re=ye===Dr&&me===!1?35907:32856),qe===32819&&(Re=32854),qe===32820&&(Re=32855)),(Re===33325||Re===33326||Re===33327||Re===33328||Re===34842||Re===34836)&&e.get("EXT_color_buffer_float"),Re}function L(ze,Pe,qe){return P(ze,qe)===!0||ze.isFramebufferTexture&&ze.minFilter!==Ps&&ze.minFilter!==ws?Math.log2(Math.max(Pe.width,Pe.height))+1:ze.mipmaps!==void 0&&ze.mipmaps.length>0?ze.mipmaps.length:ze.isCompressedTexture&&Array.isArray(ze.image)?Pe.mipmaps.length:1}function N(ze){return ze===Ps||ze===v0||ze===Lm?9728:9729}function H(ze){const Pe=ze.target;Pe.removeEventListener("dispose",H),K(Pe),Pe.isVideoTexture&&y.delete(Pe)}function J(ze){const Pe=ze.target;Pe.removeEventListener("dispose",J),ae(Pe)}function K(ze){const Pe=r.get(ze);if(Pe.__webglInit===void 0)return;const qe=ze.source,ye=C.get(qe);if(ye){const me=ye[Pe.__cacheKey];me.usedTimes--,me.usedTimes===0&&se(ze),Object.keys(ye).length===0&&C.delete(qe)}r.remove(ze)}function se(ze){const Pe=r.get(ze);i.deleteTexture(Pe.__webglTexture);const qe=ze.source,ye=C.get(qe);delete ye[Pe.__cacheKey],l.memory.textures--}function ae(ze){const Pe=ze.texture,qe=r.get(ze),ye=r.get(Pe);if(ye.__webglTexture!==void 0&&(i.deleteTexture(ye.__webglTexture),l.memory.textures--),ze.depthTexture&&ze.depthTexture.dispose(),ze.isWebGLCubeRenderTarget)for(let me=0;me<6;me++)i.deleteFramebuffer(qe.__webglFramebuffer[me]),qe.__webglDepthbuffer&&i.deleteRenderbuffer(qe.__webglDepthbuffer[me]);else{if(i.deleteFramebuffer(qe.__webglFramebuffer),qe.__webglDepthbuffer&&i.deleteRenderbuffer(qe.__webglDepthbuffer),qe.__webglMultisampledFramebuffer&&i.deleteFramebuffer(qe.__webglMultisampledFramebuffer),qe.__webglColorRenderbuffer)for(let me=0;me<qe.__webglColorRenderbuffer.length;me++)qe.__webglColorRenderbuffer[me]&&i.deleteRenderbuffer(qe.__webglColorRenderbuffer[me]);qe.__webglDepthRenderbuffer&&i.deleteRenderbuffer(qe.__webglDepthRenderbuffer)}if(ze.isWebGLMultipleRenderTargets)for(let me=0,Re=Pe.length;me<Re;me++){const Se=r.get(Pe[me]);Se.__webglTexture&&(i.deleteTexture(Se.__webglTexture),l.memory.textures--),r.remove(Pe[me])}r.remove(Pe),r.remove(ze)}let ee=0;function ne(){ee=0}function X(){const ze=ee;return ze>=c&&console.warn("THREE.WebGLTextures: Trying to use "+ze+" texture units while this GPU supports only "+c),ee+=1,ze}function W(ze){const Pe=[];return Pe.push(ze.wrapS),Pe.push(ze.wrapT),Pe.push(ze.wrapR||0),Pe.push(ze.magFilter),Pe.push(ze.minFilter),Pe.push(ze.anisotropy),Pe.push(ze.internalFormat),Pe.push(ze.format),Pe.push(ze.type),Pe.push(ze.generateMipmaps),Pe.push(ze.premultiplyAlpha),Pe.push(ze.flipY),Pe.push(ze.unpackAlignment),Pe.push(ze.encoding),Pe.join()}function ce(ze,Pe){const qe=r.get(ze);if(ze.isVideoTexture&&Bn(ze),ze.isRenderTargetTexture===!1&&ze.version>0&&qe.__version!==ze.version){const ye=ze.image;if(ye===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(ye.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Ot(qe,ze,Pe);return}}t.bindTexture(3553,qe.__webglTexture,33984+Pe)}function he(ze,Pe){const qe=r.get(ze);if(ze.version>0&&qe.__version!==ze.version){Ot(qe,ze,Pe);return}t.bindTexture(35866,qe.__webglTexture,33984+Pe)}function xe(ze,Pe){const qe=r.get(ze);if(ze.version>0&&qe.__version!==ze.version){Ot(qe,ze,Pe);return}t.bindTexture(32879,qe.__webglTexture,33984+Pe)}function ve(ze,Pe){const qe=r.get(ze);if(ze.version>0&&qe.__version!==ze.version){xt(qe,ze,Pe);return}t.bindTexture(34067,qe.__webglTexture,33984+Pe)}const Fe={[rd]:10497,[Uo]:33071,[Vm]:33648},je={[Ps]:9728,[v0]:9984,[Lm]:9986,[ws]:9729,[Ix]:9985,[uu]:9987};function rt(ze,Pe,qe){if(qe?(i.texParameteri(ze,10242,Fe[Pe.wrapS]),i.texParameteri(ze,10243,Fe[Pe.wrapT]),(ze===32879||ze===35866)&&i.texParameteri(ze,32882,Fe[Pe.wrapR]),i.texParameteri(ze,10240,je[Pe.magFilter]),i.texParameteri(ze,10241,je[Pe.minFilter])):(i.texParameteri(ze,10242,33071),i.texParameteri(ze,10243,33071),(ze===32879||ze===35866)&&i.texParameteri(ze,32882,33071),(Pe.wrapS!==Uo||Pe.wrapT!==Uo)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),i.texParameteri(ze,10240,N(Pe.magFilter)),i.texParameteri(ze,10241,N(Pe.minFilter)),Pe.minFilter!==Ps&&Pe.minFilter!==ws&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const ye=e.get("EXT_texture_filter_anisotropic");if(Pe.magFilter===Ps||Pe.minFilter!==Lm&&Pe.minFilter!==uu||Pe.type===Vu&&e.has("OES_texture_float_linear")===!1||d===!1&&Pe.type===Qm&&e.has("OES_texture_half_float_linear")===!1)return;(Pe.anisotropy>1||r.get(Pe).__currentAnisotropy)&&(i.texParameterf(ze,ye.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Pe.anisotropy,o.getMaxAnisotropy())),r.get(Pe).__currentAnisotropy=Pe.anisotropy)}}function He(ze,Pe){let qe=!1;ze.__webglInit===void 0&&(ze.__webglInit=!0,Pe.addEventListener("dispose",H));const ye=Pe.source;let me=C.get(ye);me===void 0&&(me={},C.set(ye,me));const Re=W(Pe);if(Re!==ze.__cacheKey){me[Re]===void 0&&(me[Re]={texture:i.createTexture(),usedTimes:0},l.memory.textures++,qe=!0),me[Re].usedTimes++;const Se=me[ze.__cacheKey];Se!==void 0&&(me[ze.__cacheKey].usedTimes--,Se.usedTimes===0&&se(Pe)),ze.__cacheKey=Re,ze.__webglTexture=me[Re].texture}return qe}function Ot(ze,Pe,qe){let ye=3553;(Pe.isDataArrayTexture||Pe.isCompressedArrayTexture)&&(ye=35866),Pe.isData3DTexture&&(ye=32879);const me=He(ze,Pe),Re=Pe.source;t.bindTexture(ye,ze.__webglTexture,33984+qe);const Se=r.get(Re);if(Re.version!==Se.__version||me===!0){t.activeTexture(33984+qe),i.pixelStorei(37440,Pe.flipY),i.pixelStorei(37441,Pe.premultiplyAlpha),i.pixelStorei(3317,Pe.unpackAlignment),i.pixelStorei(37443,0);const Be=R(Pe)&&S(Pe.image)===!1;let Ee=_(Pe.image,Be,!1,m);Ee=ci(Pe,Ee);const Xe=S(Ee)||d,fe=a.convert(Pe.format,Pe.encoding);let Oe=a.convert(Pe.type),$e=D(Pe.internalFormat,fe,Oe,Pe.encoding,Pe.isVideoTexture);rt(ye,Pe,Xe);let le;const Q=Pe.mipmaps,Z=d&&Pe.isVideoTexture!==!0,Ie=Se.__version===void 0||me===!0,Ae=L(Pe,Ee,Xe);if(Pe.isDepthTexture)$e=6402,d?Pe.type===Vu?$e=36012:Pe.type===Vh?$e=33190:Pe.type===Df?$e=35056:$e=33189:Pe.type===Vu&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),Pe.format===$h&&$e===6402&&Pe.type!==qC&&Pe.type!==Vh&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),Pe.type=Vh,Oe=a.convert(Pe.type)),Pe.format===Vf&&$e===6402&&($e=34041,Pe.type!==Df&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),Pe.type=Df,Oe=a.convert(Pe.type))),Ie&&(Z?t.texStorage2D(3553,1,$e,Ee.width,Ee.height):t.texImage2D(3553,0,$e,Ee.width,Ee.height,0,fe,Oe,null));else if(Pe.isDataTexture)if(Q.length>0&&Xe){Z&&Ie&&t.texStorage2D(3553,Ae,$e,Q[0].width,Q[0].height);for(let Te=0,Ve=Q.length;Te<Ve;Te++)le=Q[Te],Z?t.texSubImage2D(3553,Te,0,0,le.width,le.height,fe,Oe,le.data):t.texImage2D(3553,Te,$e,le.width,le.height,0,fe,Oe,le.data);Pe.generateMipmaps=!1}else Z?(Ie&&t.texStorage2D(3553,Ae,$e,Ee.width,Ee.height),t.texSubImage2D(3553,0,0,0,Ee.width,Ee.height,fe,Oe,Ee.data)):t.texImage2D(3553,0,$e,Ee.width,Ee.height,0,fe,Oe,Ee.data);else if(Pe.isCompressedTexture)if(Pe.isCompressedArrayTexture){Z&&Ie&&t.texStorage3D(35866,Ae,$e,Q[0].width,Q[0].height,Ee.depth);for(let Te=0,Ve=Q.length;Te<Ve;Te++)le=Q[Te],Pe.format!==Qa?fe!==null?Z?t.compressedTexSubImage3D(35866,Te,0,0,0,le.width,le.height,Ee.depth,fe,le.data,0,0):t.compressedTexImage3D(35866,Te,$e,le.width,le.height,Ee.depth,0,le.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Z?t.texSubImage3D(35866,Te,0,0,0,le.width,le.height,Ee.depth,fe,Oe,le.data):t.texImage3D(35866,Te,$e,le.width,le.height,Ee.depth,0,fe,Oe,le.data)}else{Z&&Ie&&t.texStorage2D(3553,Ae,$e,Q[0].width,Q[0].height);for(let Te=0,Ve=Q.length;Te<Ve;Te++)le=Q[Te],Pe.format!==Qa?fe!==null?Z?t.compressedTexSubImage2D(3553,Te,0,0,le.width,le.height,fe,le.data):t.compressedTexImage2D(3553,Te,$e,le.width,le.height,0,le.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Z?t.texSubImage2D(3553,Te,0,0,le.width,le.height,fe,Oe,le.data):t.texImage2D(3553,Te,$e,le.width,le.height,0,fe,Oe,le.data)}else if(Pe.isDataArrayTexture)Z?(Ie&&t.texStorage3D(35866,Ae,$e,Ee.width,Ee.height,Ee.depth),t.texSubImage3D(35866,0,0,0,0,Ee.width,Ee.height,Ee.depth,fe,Oe,Ee.data)):t.texImage3D(35866,0,$e,Ee.width,Ee.height,Ee.depth,0,fe,Oe,Ee.data);else if(Pe.isData3DTexture)Z?(Ie&&t.texStorage3D(32879,Ae,$e,Ee.width,Ee.height,Ee.depth),t.texSubImage3D(32879,0,0,0,0,Ee.width,Ee.height,Ee.depth,fe,Oe,Ee.data)):t.texImage3D(32879,0,$e,Ee.width,Ee.height,Ee.depth,0,fe,Oe,Ee.data);else if(Pe.isFramebufferTexture){if(Ie)if(Z)t.texStorage2D(3553,Ae,$e,Ee.width,Ee.height);else{let Te=Ee.width,Ve=Ee.height;for(let Tt=0;Tt<Ae;Tt++)t.texImage2D(3553,Tt,$e,Te,Ve,0,fe,Oe,null),Te>>=1,Ve>>=1}}else if(Q.length>0&&Xe){Z&&Ie&&t.texStorage2D(3553,Ae,$e,Q[0].width,Q[0].height);for(let Te=0,Ve=Q.length;Te<Ve;Te++)le=Q[Te],Z?t.texSubImage2D(3553,Te,0,0,fe,Oe,le):t.texImage2D(3553,Te,$e,fe,Oe,le);Pe.generateMipmaps=!1}else Z?(Ie&&t.texStorage2D(3553,Ae,$e,Ee.width,Ee.height),t.texSubImage2D(3553,0,0,0,fe,Oe,Ee)):t.texImage2D(3553,0,$e,fe,Oe,Ee);P(Pe,Xe)&&O(ye),Se.__version=Re.version,Pe.onUpdate&&Pe.onUpdate(Pe)}ze.__version=Pe.version}function xt(ze,Pe,qe){if(Pe.image.length!==6)return;const ye=He(ze,Pe),me=Pe.source;t.bindTexture(34067,ze.__webglTexture,33984+qe);const Re=r.get(me);if(me.version!==Re.__version||ye===!0){t.activeTexture(33984+qe),i.pixelStorei(37440,Pe.flipY),i.pixelStorei(37441,Pe.premultiplyAlpha),i.pixelStorei(3317,Pe.unpackAlignment),i.pixelStorei(37443,0);const Se=Pe.isCompressedTexture||Pe.image[0].isCompressedTexture,Be=Pe.image[0]&&Pe.image[0].isDataTexture,Ee=[];for(let Te=0;Te<6;Te++)!Se&&!Be?Ee[Te]=_(Pe.image[Te],!1,!0,h):Ee[Te]=Be?Pe.image[Te].image:Pe.image[Te],Ee[Te]=ci(Pe,Ee[Te]);const Xe=Ee[0],fe=S(Xe)||d,Oe=a.convert(Pe.format,Pe.encoding),$e=a.convert(Pe.type),le=D(Pe.internalFormat,Oe,$e,Pe.encoding),Q=d&&Pe.isVideoTexture!==!0,Z=Re.__version===void 0||ye===!0;let Ie=L(Pe,Xe,fe);rt(34067,Pe,fe);let Ae;if(Se){Q&&Z&&t.texStorage2D(34067,Ie,le,Xe.width,Xe.height);for(let Te=0;Te<6;Te++){Ae=Ee[Te].mipmaps;for(let Ve=0;Ve<Ae.length;Ve++){const Tt=Ae[Ve];Pe.format!==Qa?Oe!==null?Q?t.compressedTexSubImage2D(34069+Te,Ve,0,0,Tt.width,Tt.height,Oe,Tt.data):t.compressedTexImage2D(34069+Te,Ve,le,Tt.width,Tt.height,0,Tt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Q?t.texSubImage2D(34069+Te,Ve,0,0,Tt.width,Tt.height,Oe,$e,Tt.data):t.texImage2D(34069+Te,Ve,le,Tt.width,Tt.height,0,Oe,$e,Tt.data)}}}else{Ae=Pe.mipmaps,Q&&Z&&(Ae.length>0&&Ie++,t.texStorage2D(34067,Ie,le,Ee[0].width,Ee[0].height));for(let Te=0;Te<6;Te++)if(Be){Q?t.texSubImage2D(34069+Te,0,0,0,Ee[Te].width,Ee[Te].height,Oe,$e,Ee[Te].data):t.texImage2D(34069+Te,0,le,Ee[Te].width,Ee[Te].height,0,Oe,$e,Ee[Te].data);for(let Ve=0;Ve<Ae.length;Ve++){const Ht=Ae[Ve].image[Te].image;Q?t.texSubImage2D(34069+Te,Ve+1,0,0,Ht.width,Ht.height,Oe,$e,Ht.data):t.texImage2D(34069+Te,Ve+1,le,Ht.width,Ht.height,0,Oe,$e,Ht.data)}}else{Q?t.texSubImage2D(34069+Te,0,0,0,Oe,$e,Ee[Te]):t.texImage2D(34069+Te,0,le,Oe,$e,Ee[Te]);for(let Ve=0;Ve<Ae.length;Ve++){const Tt=Ae[Ve];Q?t.texSubImage2D(34069+Te,Ve+1,0,0,Oe,$e,Tt.image[Te]):t.texImage2D(34069+Te,Ve+1,le,Oe,$e,Tt.image[Te])}}}P(Pe,fe)&&O(34067),Re.__version=me.version,Pe.onUpdate&&Pe.onUpdate(Pe)}ze.__version=Pe.version}function gt(ze,Pe,qe,ye,me){const Re=a.convert(qe.format,qe.encoding),Se=a.convert(qe.type),Be=D(qe.internalFormat,Re,Se,qe.encoding);r.get(Pe).__hasExternalTextures||(me===32879||me===35866?t.texImage3D(me,0,Be,Pe.width,Pe.height,Pe.depth,0,Re,Se,null):t.texImage2D(me,0,Be,Pe.width,Pe.height,0,Re,Se,null)),t.bindFramebuffer(36160,ze),An(Pe)?A.framebufferTexture2DMultisampleEXT(36160,ye,me,r.get(qe).__webglTexture,0,fn(Pe)):(me===3553||me>=34069&&me<=34074)&&i.framebufferTexture2D(36160,ye,me,r.get(qe).__webglTexture,0),t.bindFramebuffer(36160,null)}function It(ze,Pe,qe){if(i.bindRenderbuffer(36161,ze),Pe.depthBuffer&&!Pe.stencilBuffer){let ye=33189;if(qe||An(Pe)){const me=Pe.depthTexture;me&&me.isDepthTexture&&(me.type===Vu?ye=36012:me.type===Vh&&(ye=33190));const Re=fn(Pe);An(Pe)?A.renderbufferStorageMultisampleEXT(36161,Re,ye,Pe.width,Pe.height):i.renderbufferStorageMultisample(36161,Re,ye,Pe.width,Pe.height)}else i.renderbufferStorage(36161,ye,Pe.width,Pe.height);i.framebufferRenderbuffer(36160,36096,36161,ze)}else if(Pe.depthBuffer&&Pe.stencilBuffer){const ye=fn(Pe);qe&&An(Pe)===!1?i.renderbufferStorageMultisample(36161,ye,35056,Pe.width,Pe.height):An(Pe)?A.renderbufferStorageMultisampleEXT(36161,ye,35056,Pe.width,Pe.height):i.renderbufferStorage(36161,34041,Pe.width,Pe.height),i.framebufferRenderbuffer(36160,33306,36161,ze)}else{const ye=Pe.isWebGLMultipleRenderTargets===!0?Pe.texture:[Pe.texture];for(let me=0;me<ye.length;me++){const Re=ye[me],Se=a.convert(Re.format,Re.encoding),Be=a.convert(Re.type),Ee=D(Re.internalFormat,Se,Be,Re.encoding),Xe=fn(Pe);qe&&An(Pe)===!1?i.renderbufferStorageMultisample(36161,Xe,Ee,Pe.width,Pe.height):An(Pe)?A.renderbufferStorageMultisampleEXT(36161,Xe,Ee,Pe.width,Pe.height):i.renderbufferStorage(36161,Ee,Pe.width,Pe.height)}}i.bindRenderbuffer(36161,null)}function ct(ze,Pe){if(Pe&&Pe.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,ze),!(Pe.depthTexture&&Pe.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(Pe.depthTexture).__webglTexture||Pe.depthTexture.image.width!==Pe.width||Pe.depthTexture.image.height!==Pe.height)&&(Pe.depthTexture.image.width=Pe.width,Pe.depthTexture.image.height=Pe.height,Pe.depthTexture.needsUpdate=!0),ce(Pe.depthTexture,0);const ye=r.get(Pe.depthTexture).__webglTexture,me=fn(Pe);if(Pe.depthTexture.format===$h)An(Pe)?A.framebufferTexture2DMultisampleEXT(36160,36096,3553,ye,0,me):i.framebufferTexture2D(36160,36096,3553,ye,0);else if(Pe.depthTexture.format===Vf)An(Pe)?A.framebufferTexture2DMultisampleEXT(36160,33306,3553,ye,0,me):i.framebufferTexture2D(36160,33306,3553,ye,0);else throw new Error("Unknown depthTexture format")}function ut(ze){const Pe=r.get(ze),qe=ze.isWebGLCubeRenderTarget===!0;if(ze.depthTexture&&!Pe.__autoAllocateDepthBuffer){if(qe)throw new Error("target.depthTexture not supported in Cube render targets");ct(Pe.__webglFramebuffer,ze)}else if(qe){Pe.__webglDepthbuffer=[];for(let ye=0;ye<6;ye++)t.bindFramebuffer(36160,Pe.__webglFramebuffer[ye]),Pe.__webglDepthbuffer[ye]=i.createRenderbuffer(),It(Pe.__webglDepthbuffer[ye],ze,!1)}else t.bindFramebuffer(36160,Pe.__webglFramebuffer),Pe.__webglDepthbuffer=i.createRenderbuffer(),It(Pe.__webglDepthbuffer,ze,!1);t.bindFramebuffer(36160,null)}function Ct(ze,Pe,qe){const ye=r.get(ze);Pe!==void 0&&gt(ye.__webglFramebuffer,ze,ze.texture,36064,3553),qe!==void 0&&ut(ze)}function qt(ze){const Pe=ze.texture,qe=r.get(ze),ye=r.get(Pe);ze.addEventListener("dispose",J),ze.isWebGLMultipleRenderTargets!==!0&&(ye.__webglTexture===void 0&&(ye.__webglTexture=i.createTexture()),ye.__version=Pe.version,l.memory.textures++);const me=ze.isWebGLCubeRenderTarget===!0,Re=ze.isWebGLMultipleRenderTargets===!0,Se=S(ze)||d;if(me){qe.__webglFramebuffer=[];for(let Be=0;Be<6;Be++)qe.__webglFramebuffer[Be]=i.createFramebuffer()}else{if(qe.__webglFramebuffer=i.createFramebuffer(),Re)if(o.drawBuffers){const Be=ze.texture;for(let Ee=0,Xe=Be.length;Ee<Xe;Ee++){const fe=r.get(Be[Ee]);fe.__webglTexture===void 0&&(fe.__webglTexture=i.createTexture(),l.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(d&&ze.samples>0&&An(ze)===!1){const Be=Re?Pe:[Pe];qe.__webglMultisampledFramebuffer=i.createFramebuffer(),qe.__webglColorRenderbuffer=[],t.bindFramebuffer(36160,qe.__webglMultisampledFramebuffer);for(let Ee=0;Ee<Be.length;Ee++){const Xe=Be[Ee];qe.__webglColorRenderbuffer[Ee]=i.createRenderbuffer(),i.bindRenderbuffer(36161,qe.__webglColorRenderbuffer[Ee]);const fe=a.convert(Xe.format,Xe.encoding),Oe=a.convert(Xe.type),$e=D(Xe.internalFormat,fe,Oe,Xe.encoding,ze.isXRRenderTarget===!0),le=fn(ze);i.renderbufferStorageMultisample(36161,le,$e,ze.width,ze.height),i.framebufferRenderbuffer(36160,36064+Ee,36161,qe.__webglColorRenderbuffer[Ee])}i.bindRenderbuffer(36161,null),ze.depthBuffer&&(qe.__webglDepthRenderbuffer=i.createRenderbuffer(),It(qe.__webglDepthRenderbuffer,ze,!0)),t.bindFramebuffer(36160,null)}}if(me){t.bindTexture(34067,ye.__webglTexture),rt(34067,Pe,Se);for(let Be=0;Be<6;Be++)gt(qe.__webglFramebuffer[Be],ze,Pe,36064,34069+Be);P(Pe,Se)&&O(34067),t.unbindTexture()}else if(Re){const Be=ze.texture;for(let Ee=0,Xe=Be.length;Ee<Xe;Ee++){const fe=Be[Ee],Oe=r.get(fe);t.bindTexture(3553,Oe.__webglTexture),rt(3553,fe,Se),gt(qe.__webglFramebuffer,ze,fe,36064+Ee,3553),P(fe,Se)&&O(3553)}t.unbindTexture()}else{let Be=3553;(ze.isWebGL3DRenderTarget||ze.isWebGLArrayRenderTarget)&&(d?Be=ze.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(Be,ye.__webglTexture),rt(Be,Pe,Se),gt(qe.__webglFramebuffer,ze,Pe,36064,Be),P(Pe,Se)&&O(Be),t.unbindTexture()}ze.depthBuffer&&ut(ze)}function Ft(ze){const Pe=S(ze)||d,qe=ze.isWebGLMultipleRenderTargets===!0?ze.texture:[ze.texture];for(let ye=0,me=qe.length;ye<me;ye++){const Re=qe[ye];if(P(Re,Pe)){const Se=ze.isWebGLCubeRenderTarget?34067:3553,Be=r.get(Re).__webglTexture;t.bindTexture(Se,Be),O(Se),t.unbindTexture()}}}function un(ze){if(d&&ze.samples>0&&An(ze)===!1){const Pe=ze.isWebGLMultipleRenderTargets?ze.texture:[ze.texture],qe=ze.width,ye=ze.height;let me=16384;const Re=[],Se=ze.stencilBuffer?33306:36096,Be=r.get(ze),Ee=ze.isWebGLMultipleRenderTargets===!0;if(Ee)for(let Xe=0;Xe<Pe.length;Xe++)t.bindFramebuffer(36160,Be.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(36160,36064+Xe,36161,null),t.bindFramebuffer(36160,Be.__webglFramebuffer),i.framebufferTexture2D(36009,36064+Xe,3553,null,0);t.bindFramebuffer(36008,Be.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,Be.__webglFramebuffer);for(let Xe=0;Xe<Pe.length;Xe++){Re.push(36064+Xe),ze.depthBuffer&&Re.push(Se);const fe=Be.__ignoreDepthValues!==void 0?Be.__ignoreDepthValues:!1;if(fe===!1&&(ze.depthBuffer&&(me|=256),ze.stencilBuffer&&(me|=1024)),Ee&&i.framebufferRenderbuffer(36008,36064,36161,Be.__webglColorRenderbuffer[Xe]),fe===!0&&(i.invalidateFramebuffer(36008,[Se]),i.invalidateFramebuffer(36009,[Se])),Ee){const Oe=r.get(Pe[Xe]).__webglTexture;i.framebufferTexture2D(36009,36064,3553,Oe,0)}i.blitFramebuffer(0,0,qe,ye,0,0,qe,ye,me,9728),v&&i.invalidateFramebuffer(36008,Re)}if(t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,null),Ee)for(let Xe=0;Xe<Pe.length;Xe++){t.bindFramebuffer(36160,Be.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(36160,36064+Xe,36161,Be.__webglColorRenderbuffer[Xe]);const fe=r.get(Pe[Xe]).__webglTexture;t.bindFramebuffer(36160,Be.__webglFramebuffer),i.framebufferTexture2D(36009,36064+Xe,3553,fe,0)}t.bindFramebuffer(36009,Be.__webglMultisampledFramebuffer)}}function fn(ze){return Math.min(p,ze.samples)}function An(ze){const Pe=r.get(ze);return d&&ze.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&Pe.__useRenderToTexture!==!1}function Bn(ze){const Pe=l.render.frame;y.get(ze)!==Pe&&(y.set(ze,Pe),ze.update())}function ci(ze,Pe){const qe=ze.encoding,ye=ze.format,me=ze.type;return ze.isCompressedTexture===!0||ze.isVideoTexture===!0||ze.format===ix||qe!==Zu&&(qe===Dr?d===!1?e.has("EXT_sRGB")===!0&&ye===Qa?(ze.format=ix,ze.minFilter=ws,ze.generateMipmaps=!1):Pe=tM.sRGBToLinear(Pe):(ye!==Qa||me!==Ju)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",qe)),Pe}this.allocateTextureUnit=X,this.resetTextureUnits=ne,this.setTexture2D=ce,this.setTexture2DArray=he,this.setTexture3D=xe,this.setTextureCube=ve,this.rebindTextures=Ct,this.setupRenderTarget=qt,this.updateRenderTargetMipmap=Ft,this.updateMultisampleRenderTarget=un,this.setupDepthRenderbuffer=ut,this.setupFrameBufferTexture=gt,this.useMultisampledRTT=An}function ID(i,e,t){const r=t.isWebGL2;function o(a,l=null){let d;if(a===Ju)return 5121;if(a===YL)return 32819;if(a===qL)return 32820;if(a===jL)return 5120;if(a===XL)return 5122;if(a===qC)return 5123;if(a===KL)return 5124;if(a===Vh)return 5125;if(a===Vu)return 5126;if(a===Qm)return r?5131:(d=e.get("OES_texture_half_float"),d!==null?d.HALF_FLOAT_OES:null);if(a===JL)return 6406;if(a===Qa)return 6408;if(a===ZL)return 6409;if(a===$L)return 6410;if(a===$h)return 6402;if(a===Vf)return 34041;if(a===ix)return d=e.get("EXT_sRGB"),d!==null?d.SRGB_ALPHA_EXT:null;if(a===eD)return 6403;if(a===tD)return 36244;if(a===nD)return 33319;if(a===iD)return 33320;if(a===rD)return 36249;if(a===_1||a===w1||a===C1||a===M1)if(l===Dr)if(d=e.get("WEBGL_compressed_texture_s3tc_srgb"),d!==null){if(a===_1)return d.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(a===w1)return d.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(a===C1)return d.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(a===M1)return d.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(d=e.get("WEBGL_compressed_texture_s3tc"),d!==null){if(a===_1)return d.COMPRESSED_RGB_S3TC_DXT1_EXT;if(a===w1)return d.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(a===C1)return d.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(a===M1)return d.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(a===pw||a===mw||a===gw||a===Aw)if(d=e.get("WEBGL_compressed_texture_pvrtc"),d!==null){if(a===pw)return d.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(a===mw)return d.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(a===gw)return d.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(a===Aw)return d.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(a===sD)return d=e.get("WEBGL_compressed_texture_etc1"),d!==null?d.COMPRESSED_RGB_ETC1_WEBGL:null;if(a===vw||a===yw)if(d=e.get("WEBGL_compressed_texture_etc"),d!==null){if(a===vw)return l===Dr?d.COMPRESSED_SRGB8_ETC2:d.COMPRESSED_RGB8_ETC2;if(a===yw)return l===Dr?d.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:d.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(a===xw||a===Ew||a===_w||a===ww||a===Cw||a===Mw||a===bw||a===Sw||a===Tw||a===Iw||a===Rw||a===Bw||a===Lw||a===Dw)if(d=e.get("WEBGL_compressed_texture_astc"),d!==null){if(a===xw)return l===Dr?d.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:d.COMPRESSED_RGBA_ASTC_4x4_KHR;if(a===Ew)return l===Dr?d.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:d.COMPRESSED_RGBA_ASTC_5x4_KHR;if(a===_w)return l===Dr?d.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:d.COMPRESSED_RGBA_ASTC_5x5_KHR;if(a===ww)return l===Dr?d.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:d.COMPRESSED_RGBA_ASTC_6x5_KHR;if(a===Cw)return l===Dr?d.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:d.COMPRESSED_RGBA_ASTC_6x6_KHR;if(a===Mw)return l===Dr?d.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:d.COMPRESSED_RGBA_ASTC_8x5_KHR;if(a===bw)return l===Dr?d.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:d.COMPRESSED_RGBA_ASTC_8x6_KHR;if(a===Sw)return l===Dr?d.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:d.COMPRESSED_RGBA_ASTC_8x8_KHR;if(a===Tw)return l===Dr?d.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:d.COMPRESSED_RGBA_ASTC_10x5_KHR;if(a===Iw)return l===Dr?d.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:d.COMPRESSED_RGBA_ASTC_10x6_KHR;if(a===Rw)return l===Dr?d.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:d.COMPRESSED_RGBA_ASTC_10x8_KHR;if(a===Bw)return l===Dr?d.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:d.COMPRESSED_RGBA_ASTC_10x10_KHR;if(a===Lw)return l===Dr?d.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:d.COMPRESSED_RGBA_ASTC_12x10_KHR;if(a===Dw)return l===Dr?d.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:d.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(a===b1)if(d=e.get("EXT_texture_compression_bptc"),d!==null){if(a===b1)return l===Dr?d.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:d.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(a===oD||a===Pw||a===Ow||a===Fw)if(d=e.get("EXT_texture_compression_rgtc"),d!==null){if(a===b1)return d.COMPRESSED_RED_RGTC1_EXT;if(a===Pw)return d.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(a===Ow)return d.COMPRESSED_RED_GREEN_RGTC2_EXT;if(a===Fw)return d.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return a===Df?r?34042:(d=e.get("WEBGL_depth_texture"),d!==null?d.UNSIGNED_INT_24_8_WEBGL:null):i[a]!==void 0?i[a]:null}return{convert:o}}class RD extends cs{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class mc extends Tr{constructor(){super(),this.isGroup=!0,this.type="Group"}}const wG={type:"move"};class j_{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new mc,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new mc,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Ue,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Ue),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new mc,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Ue,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Ue),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const r of e.hand.values())this._getHandJoint(t,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let o=null,a=null,l=null;const d=this._targetRay,c=this._grip,h=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(h&&e.hand){l=!0;for(const x of e.hand.values()){const C=t.getJointPose(x,r),g=this._getHandJoint(h,x);C!==null&&(g.matrix.fromArray(C.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.jointRadius=C.radius),g.visible=C!==null}const m=h.joints["index-finger-tip"],p=h.joints["thumb-tip"],A=m.position.distanceTo(p.position),v=.02,y=.005;h.inputState.pinching&&A>v+y?(h.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!h.inputState.pinching&&A<=v-y&&(h.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else c!==null&&e.gripSpace&&(a=t.getPose(e.gripSpace,r),a!==null&&(c.matrix.fromArray(a.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),a.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(a.linearVelocity)):c.hasLinearVelocity=!1,a.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(a.angularVelocity)):c.hasAngularVelocity=!1));d!==null&&(o=t.getPose(e.targetRaySpace,r),o===null&&a!==null&&(o=a),o!==null&&(d.matrix.fromArray(o.transform.matrix),d.matrix.decompose(d.position,d.rotation,d.scale),o.linearVelocity?(d.hasLinearVelocity=!0,d.linearVelocity.copy(o.linearVelocity)):d.hasLinearVelocity=!1,o.angularVelocity?(d.hasAngularVelocity=!0,d.angularVelocity.copy(o.angularVelocity)):d.hasAngularVelocity=!1,this.dispatchEvent(wG)))}return d!==null&&(d.visible=o!==null),c!==null&&(c.visible=a!==null),h!==null&&(h.visible=l!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const r=new mc;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[t.jointName]=r,e.add(r)}return e.joints[t.jointName]}}class BD extends As{constructor(e,t,r,o,a,l,d,c,h,m){if(m=m!==void 0?m:$h,m!==$h&&m!==Vf)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&m===$h&&(r=Vh),r===void 0&&m===Vf&&(r=Df),super(null,o,a,l,d,c,m,r,h),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=d!==void 0?d:Ps,this.minFilter=c!==void 0?c:Ps,this.flipY=!1,this.generateMipmaps=!1}}class CG extends du{constructor(e,t){super();const r=this;let o=null,a=1,l=null,d="local-floor",c=1,h=null,m=null,p=null,A=null,v=null,y=null;const x=t.getContextAttributes();let C=null,g=null;const b=[],_=[],S=new Set,R=new Map,P=new cs;P.layers.enable(1),P.viewport=new Kr;const O=new cs;O.layers.enable(2),O.viewport=new Kr;const D=[P,O],L=new RD;L.layers.enable(1),L.layers.enable(2);let N=null,H=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ve){let Fe=b[ve];return Fe===void 0&&(Fe=new j_,b[ve]=Fe),Fe.getTargetRaySpace()},this.getControllerGrip=function(ve){let Fe=b[ve];return Fe===void 0&&(Fe=new j_,b[ve]=Fe),Fe.getGripSpace()},this.getHand=function(ve){let Fe=b[ve];return Fe===void 0&&(Fe=new j_,b[ve]=Fe),Fe.getHandSpace()};function J(ve){const Fe=_.indexOf(ve.inputSource);if(Fe===-1)return;const je=b[Fe];je!==void 0&&je.dispatchEvent({type:ve.type,data:ve.inputSource})}function K(){o.removeEventListener("select",J),o.removeEventListener("selectstart",J),o.removeEventListener("selectend",J),o.removeEventListener("squeeze",J),o.removeEventListener("squeezestart",J),o.removeEventListener("squeezeend",J),o.removeEventListener("end",K),o.removeEventListener("inputsourceschange",se);for(let ve=0;ve<b.length;ve++){const Fe=_[ve];Fe!==null&&(_[ve]=null,b[ve].disconnect(Fe))}N=null,H=null,e.setRenderTarget(C),v=null,A=null,p=null,o=null,g=null,xe.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ve){a=ve,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ve){d=ve,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return h||l},this.setReferenceSpace=function(ve){h=ve},this.getBaseLayer=function(){return A!==null?A:v},this.getBinding=function(){return p},this.getFrame=function(){return y},this.getSession=function(){return o},this.setSession=async function(ve){if(o=ve,o!==null){if(C=e.getRenderTarget(),o.addEventListener("select",J),o.addEventListener("selectstart",J),o.addEventListener("selectend",J),o.addEventListener("squeeze",J),o.addEventListener("squeezestart",J),o.addEventListener("squeezeend",J),o.addEventListener("end",K),o.addEventListener("inputsourceschange",se),x.xrCompatible!==!0&&await t.makeXRCompatible(),o.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const Fe={antialias:o.renderState.layers===void 0?x.antialias:!0,alpha:x.alpha,depth:x.depth,stencil:x.stencil,framebufferScaleFactor:a};v=new XRWebGLLayer(o,t,Fe),o.updateRenderState({baseLayer:v}),g=new xc(v.framebufferWidth,v.framebufferHeight,{format:Qa,type:Ju,encoding:e.outputEncoding,stencilBuffer:x.stencil})}else{let Fe=null,je=null,rt=null;x.depth&&(rt=x.stencil?35056:33190,Fe=x.stencil?Vf:$h,je=x.stencil?Df:Vh);const He={colorFormat:32856,depthFormat:rt,scaleFactor:a};p=new XRWebGLBinding(o,t),A=p.createProjectionLayer(He),o.updateRenderState({layers:[A]}),g=new xc(A.textureWidth,A.textureHeight,{format:Qa,type:Ju,depthTexture:new BD(A.textureWidth,A.textureHeight,je,void 0,void 0,void 0,void 0,void 0,void 0,Fe),stencilBuffer:x.stencil,encoding:e.outputEncoding,samples:x.antialias?4:0});const Ot=e.properties.get(g);Ot.__ignoreDepthValues=A.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(c),h=null,l=await o.requestReferenceSpace(d),xe.setContext(o),xe.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}};function se(ve){for(let Fe=0;Fe<ve.removed.length;Fe++){const je=ve.removed[Fe],rt=_.indexOf(je);rt>=0&&(_[rt]=null,b[rt].disconnect(je))}for(let Fe=0;Fe<ve.added.length;Fe++){const je=ve.added[Fe];let rt=_.indexOf(je);if(rt===-1){for(let Ot=0;Ot<b.length;Ot++)if(Ot>=_.length){_.push(je),rt=Ot;break}else if(_[Ot]===null){_[Ot]=je,rt=Ot;break}if(rt===-1)break}const He=b[rt];He&&He.connect(je)}}const ae=new Ue,ee=new Ue;function ne(ve,Fe,je){ae.setFromMatrixPosition(Fe.matrixWorld),ee.setFromMatrixPosition(je.matrixWorld);const rt=ae.distanceTo(ee),He=Fe.projectionMatrix.elements,Ot=je.projectionMatrix.elements,xt=He[14]/(He[10]-1),gt=He[14]/(He[10]+1),It=(He[9]+1)/He[5],ct=(He[9]-1)/He[5],ut=(He[8]-1)/He[0],Ct=(Ot[8]+1)/Ot[0],qt=xt*ut,Ft=xt*Ct,un=rt/(-ut+Ct),fn=un*-ut;Fe.matrixWorld.decompose(ve.position,ve.quaternion,ve.scale),ve.translateX(fn),ve.translateZ(un),ve.matrixWorld.compose(ve.position,ve.quaternion,ve.scale),ve.matrixWorldInverse.copy(ve.matrixWorld).invert();const An=xt+un,Bn=gt+un,ci=qt-fn,ze=Ft+(rt-fn),Pe=It*gt/Bn*An,qe=ct*gt/Bn*An;ve.projectionMatrix.makePerspective(ci,ze,Pe,qe,An,Bn),ve.projectionMatrixInverse.copy(ve.projectionMatrix).invert()}function X(ve,Fe){Fe===null?ve.matrixWorld.copy(ve.matrix):ve.matrixWorld.multiplyMatrices(Fe.matrixWorld,ve.matrix),ve.matrixWorldInverse.copy(ve.matrixWorld).invert()}this.updateCamera=function(ve){if(o===null)return;L.near=O.near=P.near=ve.near,L.far=O.far=P.far=ve.far,(N!==L.near||H!==L.far)&&(o.updateRenderState({depthNear:L.near,depthFar:L.far}),N=L.near,H=L.far);const Fe=ve.parent,je=L.cameras;X(L,Fe);for(let rt=0;rt<je.length;rt++)X(je[rt],Fe);je.length===2?ne(L,P,O):L.projectionMatrix.copy(P.projectionMatrix),W(ve,L,Fe)};function W(ve,Fe,je){je===null?ve.matrix.copy(Fe.matrixWorld):(ve.matrix.copy(je.matrixWorld),ve.matrix.invert(),ve.matrix.multiply(Fe.matrixWorld)),ve.matrix.decompose(ve.position,ve.quaternion,ve.scale),ve.updateMatrixWorld(!0);const rt=ve.children;for(let He=0,Ot=rt.length;He<Ot;He++)rt[He].updateMatrixWorld(!0);ve.projectionMatrix.copy(Fe.projectionMatrix),ve.projectionMatrixInverse.copy(Fe.projectionMatrixInverse),ve.isPerspectiveCamera&&(ve.fov=Xm*2*Math.atan(1/ve.projectionMatrix.elements[5]),ve.zoom=1)}this.getCamera=function(){return L},this.getFoveation=function(){if(!(A===null&&v===null))return c},this.setFoveation=function(ve){c=ve,A!==null&&(A.fixedFoveation=ve),v!==null&&v.fixedFoveation!==void 0&&(v.fixedFoveation=ve)},this.getPlanes=function(){return S};let ce=null;function he(ve,Fe){if(m=Fe.getViewerPose(h||l),y=Fe,m!==null){const je=m.views;v!==null&&(e.setRenderTargetFramebuffer(g,v.framebuffer),e.setRenderTarget(g));let rt=!1;je.length!==L.cameras.length&&(L.cameras.length=0,rt=!0);for(let He=0;He<je.length;He++){const Ot=je[He];let xt=null;if(v!==null)xt=v.getViewport(Ot);else{const It=p.getViewSubImage(A,Ot);xt=It.viewport,He===0&&(e.setRenderTargetTextures(g,It.colorTexture,A.ignoreDepthValues?void 0:It.depthStencilTexture),e.setRenderTarget(g))}let gt=D[He];gt===void 0&&(gt=new cs,gt.layers.enable(He),gt.viewport=new Kr,D[He]=gt),gt.matrix.fromArray(Ot.transform.matrix),gt.matrix.decompose(gt.position,gt.quaternion,gt.scale),gt.projectionMatrix.fromArray(Ot.projectionMatrix),gt.projectionMatrixInverse.copy(gt.projectionMatrix).invert(),gt.viewport.set(xt.x,xt.y,xt.width,xt.height),He===0&&(L.matrix.copy(gt.matrix),L.matrix.decompose(L.position,L.quaternion,L.scale)),rt===!0&&L.cameras.push(gt)}}for(let je=0;je<b.length;je++){const rt=_[je],He=b[je];rt!==null&&He!==void 0&&He.update(rt,Fe,h||l)}if(ce&&ce(ve,Fe),Fe.detectedPlanes){r.dispatchEvent({type:"planesdetected",data:Fe.detectedPlanes});let je=null;for(const rt of S)Fe.detectedPlanes.has(rt)||(je===null&&(je=[]),je.push(rt));if(je!==null)for(const rt of je)S.delete(rt),R.delete(rt),r.dispatchEvent({type:"planeremoved",data:rt});for(const rt of Fe.detectedPlanes)if(!S.has(rt))S.add(rt),R.set(rt,Fe.lastChangedTime),r.dispatchEvent({type:"planeadded",data:rt});else{const He=R.get(rt);rt.lastChangedTime>He&&(R.set(rt,rt.lastChangedTime),r.dispatchEvent({type:"planechanged",data:rt}))}}y=null}const xe=new CD;xe.setAnimationLoop(he),this.setAnimationLoop=function(ve){ce=ve},this.dispose=function(){}}}function MG(i,e){function t(C,g){C.matrixAutoUpdate===!0&&C.updateMatrix(),g.value.copy(C.matrix)}function r(C,g){g.color.getRGB(C.fogColor.value,xD(i)),g.isFog?(C.fogNear.value=g.near,C.fogFar.value=g.far):g.isFogExp2&&(C.fogDensity.value=g.density)}function o(C,g,b,_,S){g.isMeshBasicMaterial||g.isMeshLambertMaterial?a(C,g):g.isMeshToonMaterial?(a(C,g),p(C,g)):g.isMeshPhongMaterial?(a(C,g),m(C,g)):g.isMeshStandardMaterial?(a(C,g),A(C,g),g.isMeshPhysicalMaterial&&v(C,g,S)):g.isMeshMatcapMaterial?(a(C,g),y(C,g)):g.isMeshDepthMaterial?a(C,g):g.isMeshDistanceMaterial?(a(C,g),x(C,g)):g.isMeshNormalMaterial?a(C,g):g.isLineBasicMaterial?(l(C,g),g.isLineDashedMaterial&&d(C,g)):g.isPointsMaterial?c(C,g,b,_):g.isSpriteMaterial?h(C,g):g.isShadowMaterial?(C.color.value.copy(g.color),C.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function a(C,g){C.opacity.value=g.opacity,g.color&&C.diffuse.value.copy(g.color),g.emissive&&C.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(C.map.value=g.map,t(g.map,C.mapTransform)),g.alphaMap&&(C.alphaMap.value=g.alphaMap,t(g.alphaMap,C.alphaMapTransform)),g.bumpMap&&(C.bumpMap.value=g.bumpMap,t(g.bumpMap,C.bumpMapTransform),C.bumpScale.value=g.bumpScale,g.side===Ea&&(C.bumpScale.value*=-1)),g.normalMap&&(C.normalMap.value=g.normalMap,t(g.normalMap,C.normalMapTransform),C.normalScale.value.copy(g.normalScale),g.side===Ea&&C.normalScale.value.negate()),g.displacementMap&&(C.displacementMap.value=g.displacementMap,t(g.displacementMap,C.displacementMapTransform),C.displacementScale.value=g.displacementScale,C.displacementBias.value=g.displacementBias),g.emissiveMap&&(C.emissiveMap.value=g.emissiveMap,t(g.emissiveMap,C.emissiveMapTransform)),g.specularMap&&(C.specularMap.value=g.specularMap,t(g.specularMap,C.specularMapTransform)),g.alphaTest>0&&(C.alphaTest.value=g.alphaTest);const b=e.get(g).envMap;if(b&&(C.envMap.value=b,C.flipEnvMap.value=b.isCubeTexture&&b.isRenderTargetTexture===!1?-1:1,C.reflectivity.value=g.reflectivity,C.ior.value=g.ior,C.refractionRatio.value=g.refractionRatio),g.lightMap){C.lightMap.value=g.lightMap;const _=i.useLegacyLights===!0?Math.PI:1;C.lightMapIntensity.value=g.lightMapIntensity*_,t(g.lightMap,C.lightMapTransform)}g.aoMap&&(C.aoMap.value=g.aoMap,C.aoMapIntensity.value=g.aoMapIntensity,t(g.aoMap,C.aoMapTransform))}function l(C,g){C.diffuse.value.copy(g.color),C.opacity.value=g.opacity,g.map&&(C.map.value=g.map,t(g.map,C.mapTransform))}function d(C,g){C.dashSize.value=g.dashSize,C.totalSize.value=g.dashSize+g.gapSize,C.scale.value=g.scale}function c(C,g,b,_){C.diffuse.value.copy(g.color),C.opacity.value=g.opacity,C.size.value=g.size*b,C.scale.value=_*.5,g.map&&(C.map.value=g.map,t(g.map,C.uvTransform)),g.alphaMap&&(C.alphaMap.value=g.alphaMap),g.alphaTest>0&&(C.alphaTest.value=g.alphaTest)}function h(C,g){C.diffuse.value.copy(g.color),C.opacity.value=g.opacity,C.rotation.value=g.rotation,g.map&&(C.map.value=g.map,t(g.map,C.mapTransform)),g.alphaMap&&(C.alphaMap.value=g.alphaMap),g.alphaTest>0&&(C.alphaTest.value=g.alphaTest)}function m(C,g){C.specular.value.copy(g.specular),C.shininess.value=Math.max(g.shininess,1e-4)}function p(C,g){g.gradientMap&&(C.gradientMap.value=g.gradientMap)}function A(C,g){C.metalness.value=g.metalness,g.metalnessMap&&(C.metalnessMap.value=g.metalnessMap,t(g.metalnessMap,C.metalnessMapTransform)),C.roughness.value=g.roughness,g.roughnessMap&&(C.roughnessMap.value=g.roughnessMap,t(g.roughnessMap,C.roughnessMapTransform)),e.get(g).envMap&&(C.envMapIntensity.value=g.envMapIntensity)}function v(C,g,b){C.ior.value=g.ior,g.sheen>0&&(C.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),C.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(C.sheenColorMap.value=g.sheenColorMap,t(g.sheenColorMap,C.sheenColorMapTransform)),g.sheenRoughnessMap&&(C.sheenRoughnessMap.value=g.sheenRoughnessMap,t(g.sheenRoughnessMap,C.sheenRoughnessMapTransform))),g.clearcoat>0&&(C.clearcoat.value=g.clearcoat,C.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(C.clearcoatMap.value=g.clearcoatMap,t(g.clearcoatMap,C.clearcoatMapTransform)),g.clearcoatRoughnessMap&&(C.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap,t(g.clearcoatRoughnessMap,C.clearcoatRoughnessMapTransform)),g.clearcoatNormalMap&&(C.clearcoatNormalMap.value=g.clearcoatNormalMap,t(g.clearcoatNormalMap,C.clearcoatNormalMapTransform),C.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),g.side===Ea&&C.clearcoatNormalScale.value.negate())),g.iridescence>0&&(C.iridescence.value=g.iridescence,C.iridescenceIOR.value=g.iridescenceIOR,C.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],C.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(C.iridescenceMap.value=g.iridescenceMap,t(g.iridescenceMap,C.iridescenceMapTransform)),g.iridescenceThicknessMap&&(C.iridescenceThicknessMap.value=g.iridescenceThicknessMap,t(g.iridescenceThicknessMap,C.iridescenceThicknessMapTransform))),g.transmission>0&&(C.transmission.value=g.transmission,C.transmissionSamplerMap.value=b.texture,C.transmissionSamplerSize.value.set(b.width,b.height),g.transmissionMap&&(C.transmissionMap.value=g.transmissionMap,t(g.transmissionMap,C.transmissionMapTransform)),C.thickness.value=g.thickness,g.thicknessMap&&(C.thicknessMap.value=g.thicknessMap,t(g.thicknessMap,C.thicknessMapTransform)),C.attenuationDistance.value=g.attenuationDistance,C.attenuationColor.value.copy(g.attenuationColor)),C.specularIntensity.value=g.specularIntensity,C.specularColor.value.copy(g.specularColor),g.specularColorMap&&(C.specularColorMap.value=g.specularColorMap,t(g.specularColorMap,C.specularColorMapTransform)),g.specularIntensityMap&&(C.specularIntensityMap.value=g.specularIntensityMap,t(g.specularIntensityMap,C.specularIntensityMapTransform))}function y(C,g){g.matcap&&(C.matcap.value=g.matcap)}function x(C,g){const b=e.get(g).light;C.referencePosition.value.setFromMatrixPosition(b.matrixWorld),C.nearDistance.value=b.shadow.camera.near,C.farDistance.value=b.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:o}}function bG(i,e,t,r){let o={},a={},l=[];const d=t.isWebGL2?i.getParameter(35375):0;function c(b,_){const S=_.program;r.uniformBlockBinding(b,S)}function h(b,_){let S=o[b.id];S===void 0&&(y(b),S=m(b),o[b.id]=S,b.addEventListener("dispose",C));const R=_.program;r.updateUBOMapping(b,R);const P=e.render.frame;a[b.id]!==P&&(A(b),a[b.id]=P)}function m(b){const _=p();b.__bindingPointIndex=_;const S=i.createBuffer(),R=b.__size,P=b.usage;return i.bindBuffer(35345,S),i.bufferData(35345,R,P),i.bindBuffer(35345,null),i.bindBufferBase(35345,_,S),S}function p(){for(let b=0;b<d;b++)if(l.indexOf(b)===-1)return l.push(b),b;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function A(b){const _=o[b.id],S=b.uniforms,R=b.__cache;i.bindBuffer(35345,_);for(let P=0,O=S.length;P<O;P++){const D=S[P];if(v(D,P,R)===!0){const L=D.__offset,N=Array.isArray(D.value)?D.value:[D.value];let H=0;for(let J=0;J<N.length;J++){const K=N[J],se=x(K);typeof K=="number"?(D.__data[0]=K,i.bufferSubData(35345,L+H,D.__data)):K.isMatrix3?(D.__data[0]=K.elements[0],D.__data[1]=K.elements[1],D.__data[2]=K.elements[2],D.__data[3]=K.elements[0],D.__data[4]=K.elements[3],D.__data[5]=K.elements[4],D.__data[6]=K.elements[5],D.__data[7]=K.elements[0],D.__data[8]=K.elements[6],D.__data[9]=K.elements[7],D.__data[10]=K.elements[8],D.__data[11]=K.elements[0]):(K.toArray(D.__data,H),H+=se.storage/Float32Array.BYTES_PER_ELEMENT)}i.bufferSubData(35345,L,D.__data)}}i.bindBuffer(35345,null)}function v(b,_,S){const R=b.value;if(S[_]===void 0){if(typeof R=="number")S[_]=R;else{const P=Array.isArray(R)?R:[R],O=[];for(let D=0;D<P.length;D++)O.push(P[D].clone());S[_]=O}return!0}else if(typeof R=="number"){if(S[_]!==R)return S[_]=R,!0}else{const P=Array.isArray(S[_])?S[_]:[S[_]],O=Array.isArray(R)?R:[R];for(let D=0;D<P.length;D++){const L=P[D];if(L.equals(O[D])===!1)return L.copy(O[D]),!0}}return!1}function y(b){const _=b.uniforms;let S=0;const R=16;let P=0;for(let O=0,D=_.length;O<D;O++){const L=_[O],N={boundary:0,storage:0},H=Array.isArray(L.value)?L.value:[L.value];for(let J=0,K=H.length;J<K;J++){const se=H[J],ae=x(se);N.boundary+=ae.boundary,N.storage+=ae.storage}if(L.__data=new Float32Array(N.storage/Float32Array.BYTES_PER_ELEMENT),L.__offset=S,O>0){P=S%R;const J=R-P;P!==0&&J-N.boundary<0&&(S+=R-P,L.__offset=S)}S+=N.storage}return P=S%R,P>0&&(S+=R-P),b.__size=S,b.__cache={},this}function x(b){const _={boundary:0,storage:0};return typeof b=="number"?(_.boundary=4,_.storage=4):b.isVector2?(_.boundary=8,_.storage=8):b.isVector3||b.isColor?(_.boundary=16,_.storage=12):b.isVector4?(_.boundary=16,_.storage=16):b.isMatrix3?(_.boundary=48,_.storage=48):b.isMatrix4?(_.boundary=64,_.storage=64):b.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",b),_}function C(b){const _=b.target;_.removeEventListener("dispose",C);const S=l.indexOf(_.__bindingPointIndex);l.splice(S,1),i.deleteBuffer(o[_.id]),delete o[_.id],delete a[_.id]}function g(){for(const b in o)i.deleteBuffer(o[b]);l=[],o={},a={}}return{bind:c,update:h,dispose:g}}function SG(){const i=E0("canvas");return i.style.display="block",i}class lM{constructor(e={}){const{canvas:t=SG(),context:r=null,depth:o=!0,stencil:a=!0,alpha:l=!1,antialias:d=!1,premultipliedAlpha:c=!0,preserveDrawingBuffer:h=!1,powerPreference:m="default",failIfMajorPerformanceCaveat:p=!1}=e;this.isWebGLRenderer=!0;let A;r!==null?A=r.getContextAttributes().alpha:A=l;let v=null,y=null;const x=[],C=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Zu,this.useLegacyLights=!0,this.toneMapping=vc,this.toneMappingExposure=1;const g=this;let b=!1,_=0,S=0,R=null,P=-1,O=null;const D=new Kr,L=new Kr;let N=null,H=t.width,J=t.height,K=1,se=null,ae=null;const ee=new Kr(0,0,H,J),ne=new Kr(0,0,H,J);let X=!1;const W=new Lx;let ce=!1,he=!1,xe=null;const ve=new ki,Fe=new Ue,je={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function rt(){return R===null?K:1}let He=r;function Ot(De,st){for(let At=0;At<De.length;At++){const ot=De[At],wt=t.getContext(ot,st);if(wt!==null)return wt}return null}try{const De={alpha:!0,depth:o,stencil:a,antialias:d,premultipliedAlpha:c,preserveDrawingBuffer:h,powerPreference:m,failIfMajorPerformanceCaveat:p};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${bx}`),t.addEventListener("webglcontextlost",le,!1),t.addEventListener("webglcontextrestored",Q,!1),t.addEventListener("webglcontextcreationerror",Z,!1),He===null){const st=["webgl2","webgl","experimental-webgl"];if(g.isWebGL1Renderer===!0&&st.shift(),He=Ot(st,De),He===null)throw Ot(st)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}He.getShaderPrecisionFormat===void 0&&(He.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(De){throw console.error("THREE.WebGLRenderer: "+De.message),De}let xt,gt,It,ct,ut,Ct,qt,Ft,un,fn,An,Bn,ci,ze,Pe,qe,ye,me,Re,Se,Be,Ee,Xe,fe;function Oe(){xt=new V9(He),gt=new N9(He,xt,e),xt.init(gt),Ee=new ID(He,xt,gt),It=new EG(He,xt,gt),ct=new j9,ut=new cG,Ct=new _G(He,xt,It,ut,gt,Ee,ct),qt=new U9(g),Ft=new H9(g),un=new rU(He,gt),Xe=new O9(He,xt,un,gt),fn=new Q9(He,un,ct,Xe),An=new q9(He,fn,un,ct),Re=new Y9(He,gt,Ct),qe=new k9(ut),Bn=new lG(g,qt,Ft,xt,gt,Xe,qe),ci=new MG(g,ut),ze=new hG,Pe=new AG(xt,gt),me=new P9(g,qt,Ft,It,An,A,c),ye=new xG(g,An,gt),fe=new bG(He,ct,gt,It),Se=new F9(He,xt,ct,gt),Be=new W9(He,xt,ct,gt),ct.programs=Bn.programs,g.capabilities=gt,g.extensions=xt,g.properties=ut,g.renderLists=ze,g.shadowMap=ye,g.state=It,g.info=ct}Oe();const $e=new CG(g,He);this.xr=$e,this.getContext=function(){return He},this.getContextAttributes=function(){return He.getContextAttributes()},this.forceContextLoss=function(){const De=xt.get("WEBGL_lose_context");De&&De.loseContext()},this.forceContextRestore=function(){const De=xt.get("WEBGL_lose_context");De&&De.restoreContext()},this.getPixelRatio=function(){return K},this.setPixelRatio=function(De){De!==void 0&&(K=De,this.setSize(H,J,!1))},this.getSize=function(De){return De.set(H,J)},this.setSize=function(De,st,At=!0){if($e.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}H=De,J=st,t.width=Math.floor(De*K),t.height=Math.floor(st*K),At===!0&&(t.style.width=De+"px",t.style.height=st+"px"),this.setViewport(0,0,De,st)},this.getDrawingBufferSize=function(De){return De.set(H*K,J*K).floor()},this.setDrawingBufferSize=function(De,st,At){H=De,J=st,K=At,t.width=Math.floor(De*At),t.height=Math.floor(st*At),this.setViewport(0,0,De,st)},this.getCurrentViewport=function(De){return De.copy(D)},this.getViewport=function(De){return De.copy(ee)},this.setViewport=function(De,st,At,ot){De.isVector4?ee.set(De.x,De.y,De.z,De.w):ee.set(De,st,At,ot),It.viewport(D.copy(ee).multiplyScalar(K).floor())},this.getScissor=function(De){return De.copy(ne)},this.setScissor=function(De,st,At,ot){De.isVector4?ne.set(De.x,De.y,De.z,De.w):ne.set(De,st,At,ot),It.scissor(L.copy(ne).multiplyScalar(K).floor())},this.getScissorTest=function(){return X},this.setScissorTest=function(De){It.setScissorTest(X=De)},this.setOpaqueSort=function(De){se=De},this.setTransparentSort=function(De){ae=De},this.getClearColor=function(De){return De.copy(me.getClearColor())},this.setClearColor=function(){me.setClearColor.apply(me,arguments)},this.getClearAlpha=function(){return me.getClearAlpha()},this.setClearAlpha=function(){me.setClearAlpha.apply(me,arguments)},this.clear=function(De=!0,st=!0,At=!0){let ot=0;De&&(ot|=16384),st&&(ot|=256),At&&(ot|=1024),He.clear(ot)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",le,!1),t.removeEventListener("webglcontextrestored",Q,!1),t.removeEventListener("webglcontextcreationerror",Z,!1),ze.dispose(),Pe.dispose(),ut.dispose(),qt.dispose(),Ft.dispose(),An.dispose(),Xe.dispose(),fe.dispose(),Bn.dispose(),$e.dispose(),$e.removeEventListener("sessionstart",Ht),$e.removeEventListener("sessionend",nn),xe&&(xe.dispose(),xe=null),cn.stop()};function le(De){De.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),b=!0}function Q(){console.log("THREE.WebGLRenderer: Context Restored."),b=!1;const De=ct.autoReset,st=ye.enabled,At=ye.autoUpdate,ot=ye.needsUpdate,wt=ye.type;Oe(),ct.autoReset=De,ye.enabled=st,ye.autoUpdate=At,ye.needsUpdate=ot,ye.type=wt}function Z(De){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",De.statusMessage)}function Ie(De){const st=De.target;st.removeEventListener("dispose",Ie),Ae(st)}function Ae(De){Te(De),ut.remove(De)}function Te(De){const st=ut.get(De).programs;st!==void 0&&(st.forEach(function(At){Bn.releaseProgram(At)}),De.isShaderMaterial&&Bn.releaseShaderCache(De))}this.renderBufferDirect=function(De,st,At,ot,wt,xn){st===null&&(st=je);const Nn=wt.isMesh&&wt.matrixWorld.determinant()<0,pn=ln(De,st,At,ot,wt);It.setMaterial(ot,Nn);let Un=At.index,Kn=1;ot.wireframe===!0&&(Un=fn.getWireframeAttribute(At),Kn=2);const be=At.drawRange,Ge=At.attributes.position;let et=be.start*Kn,Et=(be.start+be.count)*Kn;xn!==null&&(et=Math.max(et,xn.start*Kn),Et=Math.min(Et,(xn.start+xn.count)*Kn)),Un!==null?(et=Math.max(et,0),Et=Math.min(Et,Un.count)):Ge!=null&&(et=Math.max(et,0),Et=Math.min(Et,Ge.count));const vt=Et-et;if(vt<0||vt===1/0)return;Xe.setup(wt,ot,pn,At,Un);let Gt,zt=Se;if(Un!==null&&(Gt=un.get(Un),zt=Be,zt.setIndex(Gt)),wt.isMesh)ot.wireframe===!0?(It.setLineWidth(ot.wireframeLinewidth*rt()),zt.setMode(1)):zt.setMode(4);else if(wt.isLine){let an=ot.linewidth;an===void 0&&(an=1),It.setLineWidth(an*rt()),wt.isLineSegments?zt.setMode(1):wt.isLineLoop?zt.setMode(2):zt.setMode(3)}else wt.isPoints?zt.setMode(0):wt.isSprite&&zt.setMode(4);if(wt.isInstancedMesh)zt.renderInstances(et,vt,wt.count);else if(At.isInstancedBufferGeometry){const an=At._maxInstanceCount!==void 0?At._maxInstanceCount:1/0,bn=Math.min(At.instanceCount,an);zt.renderInstances(et,vt,bn)}else zt.render(et,vt)},this.compile=function(De,st){function At(ot,wt,xn){ot.transparent===!0&&ot.side===pc&&ot.forceSinglePass===!1?(ot.side=Ea,ot.needsUpdate=!0,vn(ot,wt,xn),ot.side=cu,ot.needsUpdate=!0,vn(ot,wt,xn),ot.side=pc):vn(ot,wt,xn)}y=Pe.get(De),y.init(),C.push(y),De.traverseVisible(function(ot){ot.isLight&&ot.layers.test(st.layers)&&(y.pushLight(ot),ot.castShadow&&y.pushShadow(ot))}),y.setupLights(g.useLegacyLights),De.traverse(function(ot){const wt=ot.material;if(wt)if(Array.isArray(wt))for(let xn=0;xn<wt.length;xn++){const Nn=wt[xn];At(Nn,De,ot)}else At(wt,De,ot)}),C.pop(),y=null};let Ve=null;function Tt(De){Ve&&Ve(De)}function Ht(){cn.stop()}function nn(){cn.start()}const cn=new CD;cn.setAnimationLoop(Tt),typeof self<"u"&&cn.setContext(self),this.setAnimationLoop=function(De){Ve=De,$e.setAnimationLoop(De),De===null?cn.stop():cn.start()},$e.addEventListener("sessionstart",Ht),$e.addEventListener("sessionend",nn),this.render=function(De,st){if(st!==void 0&&st.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(b===!0)return;De.matrixWorldAutoUpdate===!0&&De.updateMatrixWorld(),st.parent===null&&st.matrixWorldAutoUpdate===!0&&st.updateMatrixWorld(),$e.enabled===!0&&$e.isPresenting===!0&&($e.cameraAutoUpdate===!0&&$e.updateCamera(st),st=$e.getCamera()),De.isScene===!0&&De.onBeforeRender(g,De,st,R),y=Pe.get(De,C.length),y.init(),C.push(y),ve.multiplyMatrices(st.projectionMatrix,st.matrixWorldInverse),W.setFromProjectionMatrix(ve),he=this.localClippingEnabled,ce=qe.init(this.clippingPlanes,he),v=ze.get(De,x.length),v.init(),x.push(v),Xn(De,st,0,g.sortObjects),v.finish(),g.sortObjects===!0&&v.sort(se,ae),ce===!0&&qe.beginShadows();const At=y.state.shadowsArray;if(ye.render(At,De,st),ce===!0&&qe.endShadows(),this.info.autoReset===!0&&this.info.reset(),me.render(v,De),y.setupLights(g.useLegacyLights),st.isArrayCamera){const ot=st.cameras;for(let wt=0,xn=ot.length;wt<xn;wt++){const Nn=ot[wt];cr(v,De,Nn,Nn.viewport)}}else cr(v,De,st);R!==null&&(Ct.updateMultisampleRenderTarget(R),Ct.updateRenderTargetMipmap(R)),De.isScene===!0&&De.onAfterRender(g,De,st),Xe.resetDefaultState(),P=-1,O=null,C.pop(),C.length>0?y=C[C.length-1]:y=null,x.pop(),x.length>0?v=x[x.length-1]:v=null};function Xn(De,st,At,ot){if(De.visible===!1)return;if(De.layers.test(st.layers)){if(De.isGroup)At=De.renderOrder;else if(De.isLOD)De.autoUpdate===!0&&De.update(st);else if(De.isLight)y.pushLight(De),De.castShadow&&y.pushShadow(De);else if(De.isSprite){if(!De.frustumCulled||W.intersectsSprite(De)){ot&&Fe.setFromMatrixPosition(De.matrixWorld).applyMatrix4(ve);const Nn=An.update(De),pn=De.material;pn.visible&&v.push(De,Nn,pn,At,Fe.z,null)}}else if((De.isMesh||De.isLine||De.isPoints)&&(De.isSkinnedMesh&&De.skeleton.frame!==ct.render.frame&&(De.skeleton.update(),De.skeleton.frame=ct.render.frame),!De.frustumCulled||W.intersectsObject(De))){ot&&Fe.setFromMatrixPosition(De.matrixWorld).applyMatrix4(ve);const Nn=An.update(De),pn=De.material;if(Array.isArray(pn)){const Un=Nn.groups;for(let Kn=0,be=Un.length;Kn<be;Kn++){const Ge=Un[Kn],et=pn[Ge.materialIndex];et&&et.visible&&v.push(De,Nn,et,At,Fe.z,Ge)}}else pn.visible&&v.push(De,Nn,pn,At,Fe.z,null)}}const xn=De.children;for(let Nn=0,pn=xn.length;Nn<pn;Nn++)Xn(xn[Nn],st,At,ot)}function cr(De,st,At,ot){const wt=De.opaque,xn=De.transmissive,Nn=De.transparent;y.setupLightsView(At),ce===!0&&qe.setGlobalState(g.clippingPlanes,At),xn.length>0&&Ni(wt,xn,st,At),ot&&It.viewport(D.copy(ot)),wt.length>0&&or(wt,st,At),xn.length>0&&or(xn,st,At),Nn.length>0&&or(Nn,st,At),It.buffers.depth.setTest(!0),It.buffers.depth.setMask(!0),It.buffers.color.setMask(!0),It.setPolygonOffset(!1)}function Ni(De,st,At,ot){if(xe===null){const pn=gt.isWebGL2;xe=new xc(1024,1024,{generateMipmaps:!0,type:xt.has("EXT_color_buffer_half_float")?Qm:Ju,minFilter:uu,samples:pn&&d===!0?4:0})}const wt=g.getRenderTarget();g.setRenderTarget(xe),g.clear();const xn=g.toneMapping;g.toneMapping=vc,or(De,At,ot),Ct.updateMultisampleRenderTarget(xe),Ct.updateRenderTargetMipmap(xe);let Nn=!1;for(let pn=0,Un=st.length;pn<Un;pn++){const Kn=st[pn],be=Kn.object,Ge=Kn.geometry,et=Kn.material,Et=Kn.group;if(et.side===pc&&be.layers.test(ot.layers)){const vt=et.side;et.side=Ea,et.needsUpdate=!0,bi(be,At,ot,Ge,et,Et),et.side=vt,et.needsUpdate=!0,Nn=!0}}Nn===!0&&(Ct.updateMultisampleRenderTarget(xe),Ct.updateRenderTargetMipmap(xe)),g.setRenderTarget(wt),g.toneMapping=xn}function or(De,st,At){const ot=st.isScene===!0?st.overrideMaterial:null;for(let wt=0,xn=De.length;wt<xn;wt++){const Nn=De[wt],pn=Nn.object,Un=Nn.geometry,Kn=ot===null?Nn.material:ot,be=Nn.group;pn.layers.test(At.layers)&&bi(pn,st,At,Un,Kn,be)}}function bi(De,st,At,ot,wt,xn){De.onBeforeRender(g,st,At,ot,wt,xn),De.modelViewMatrix.multiplyMatrices(At.matrixWorldInverse,De.matrixWorld),De.normalMatrix.getNormalMatrix(De.modelViewMatrix),wt.onBeforeRender(g,st,At,ot,De,xn),wt.transparent===!0&&wt.side===pc&&wt.forceSinglePass===!1?(wt.side=Ea,wt.needsUpdate=!0,g.renderBufferDirect(At,st,ot,wt,De,xn),wt.side=cu,wt.needsUpdate=!0,g.renderBufferDirect(At,st,ot,wt,De,xn),wt.side=pc):g.renderBufferDirect(At,st,ot,wt,De,xn),De.onAfterRender(g,st,At,ot,wt,xn)}function vn(De,st,At){st.isScene!==!0&&(st=je);const ot=ut.get(De),wt=y.state.lights,xn=y.state.shadowsArray,Nn=wt.state.version,pn=Bn.getParameters(De,wt.state,xn,st,At),Un=Bn.getProgramCacheKey(pn);let Kn=ot.programs;ot.environment=De.isMeshStandardMaterial?st.environment:null,ot.fog=st.fog,ot.envMap=(De.isMeshStandardMaterial?Ft:qt).get(De.envMap||ot.environment),Kn===void 0&&(De.addEventListener("dispose",Ie),Kn=new Map,ot.programs=Kn);let be=Kn.get(Un);if(be!==void 0){if(ot.currentProgram===be&&ot.lightsStateVersion===Nn)return Nt(De,pn),be}else pn.uniforms=Bn.getUniforms(De),De.onBuild(At,pn,g),De.onBeforeCompile(pn,g),be=Bn.acquireProgram(pn,Un),Kn.set(Un,be),ot.uniforms=pn.uniforms;const Ge=ot.uniforms;(!De.isShaderMaterial&&!De.isRawShaderMaterial||De.clipping===!0)&&(Ge.clippingPlanes=qe.uniform),Nt(De,pn),ot.needsLights=yn(De),ot.lightsStateVersion=Nn,ot.needsLights&&(Ge.ambientLightColor.value=wt.state.ambient,Ge.lightProbe.value=wt.state.probe,Ge.directionalLights.value=wt.state.directional,Ge.directionalLightShadows.value=wt.state.directionalShadow,Ge.spotLights.value=wt.state.spot,Ge.spotLightShadows.value=wt.state.spotShadow,Ge.rectAreaLights.value=wt.state.rectArea,Ge.ltc_1.value=wt.state.rectAreaLTC1,Ge.ltc_2.value=wt.state.rectAreaLTC2,Ge.pointLights.value=wt.state.point,Ge.pointLightShadows.value=wt.state.pointShadow,Ge.hemisphereLights.value=wt.state.hemi,Ge.directionalShadowMap.value=wt.state.directionalShadowMap,Ge.directionalShadowMatrix.value=wt.state.directionalShadowMatrix,Ge.spotShadowMap.value=wt.state.spotShadowMap,Ge.spotLightMatrix.value=wt.state.spotLightMatrix,Ge.spotLightMap.value=wt.state.spotLightMap,Ge.pointShadowMap.value=wt.state.pointShadowMap,Ge.pointShadowMatrix.value=wt.state.pointShadowMatrix);const et=be.getUniforms(),Et=I1.seqWithValue(et.seq,Ge);return ot.currentProgram=be,ot.uniformsList=Et,be}function Nt(De,st){const At=ut.get(De);At.outputEncoding=st.outputEncoding,At.instancing=st.instancing,At.skinning=st.skinning,At.morphTargets=st.morphTargets,At.morphNormals=st.morphNormals,At.morphColors=st.morphColors,At.morphTargetsCount=st.morphTargetsCount,At.numClippingPlanes=st.numClippingPlanes,At.numIntersection=st.numClipIntersection,At.vertexAlphas=st.vertexAlphas,At.vertexTangents=st.vertexTangents,At.toneMapping=st.toneMapping}function ln(De,st,At,ot,wt){st.isScene!==!0&&(st=je),Ct.resetTextureUnits();const xn=st.fog,Nn=ot.isMeshStandardMaterial?st.environment:null,pn=R===null?g.outputEncoding:R.isXRRenderTarget===!0?R.texture.encoding:Zu,Un=(ot.isMeshStandardMaterial?Ft:qt).get(ot.envMap||Nn),Kn=ot.vertexColors===!0&&!!At.attributes.color&&At.attributes.color.itemSize===4,be=!!ot.normalMap&&!!At.attributes.tangent,Ge=!!At.morphAttributes.position,et=!!At.morphAttributes.normal,Et=!!At.morphAttributes.color,vt=ot.toneMapped?g.toneMapping:vc,Gt=At.morphAttributes.position||At.morphAttributes.normal||At.morphAttributes.color,zt=Gt!==void 0?Gt.length:0,an=ut.get(ot),bn=y.state.lights;if(ce===!0&&(he===!0||De!==O)){const xi=De===O&&ot.id===P;qe.setState(ot,De,xi)}let Bt=!1;ot.version===an.__version?(an.needsLights&&an.lightsStateVersion!==bn.state.version||an.outputEncoding!==pn||wt.isInstancedMesh&&an.instancing===!1||!wt.isInstancedMesh&&an.instancing===!0||wt.isSkinnedMesh&&an.skinning===!1||!wt.isSkinnedMesh&&an.skinning===!0||an.envMap!==Un||ot.fog===!0&&an.fog!==xn||an.numClippingPlanes!==void 0&&(an.numClippingPlanes!==qe.numPlanes||an.numIntersection!==qe.numIntersection)||an.vertexAlphas!==Kn||an.vertexTangents!==be||an.morphTargets!==Ge||an.morphNormals!==et||an.morphColors!==Et||an.toneMapping!==vt||gt.isWebGL2===!0&&an.morphTargetsCount!==zt)&&(Bt=!0):(Bt=!0,an.__version=ot.version);let Vn=an.currentProgram;Bt===!0&&(Vn=vn(ot,st,wt));let ti=!1,si=!1,gi=!1;const Mn=Vn.getUniforms(),ui=an.uniforms;if(It.useProgram(Vn.program)&&(ti=!0,si=!0,gi=!0),ot.id!==P&&(P=ot.id,si=!0),ti||O!==De){if(Mn.setValue(He,"projectionMatrix",De.projectionMatrix),gt.logarithmicDepthBuffer&&Mn.setValue(He,"logDepthBufFC",2/(Math.log(De.far+1)/Math.LN2)),O!==De&&(O=De,si=!0,gi=!0),ot.isShaderMaterial||ot.isMeshPhongMaterial||ot.isMeshToonMaterial||ot.isMeshStandardMaterial||ot.envMap){const xi=Mn.map.cameraPosition;xi!==void 0&&xi.setValue(He,Fe.setFromMatrixPosition(De.matrixWorld))}(ot.isMeshPhongMaterial||ot.isMeshToonMaterial||ot.isMeshLambertMaterial||ot.isMeshBasicMaterial||ot.isMeshStandardMaterial||ot.isShaderMaterial)&&Mn.setValue(He,"isOrthographic",De.isOrthographicCamera===!0),(ot.isMeshPhongMaterial||ot.isMeshToonMaterial||ot.isMeshLambertMaterial||ot.isMeshBasicMaterial||ot.isMeshStandardMaterial||ot.isShaderMaterial||ot.isShadowMaterial||wt.isSkinnedMesh)&&Mn.setValue(He,"viewMatrix",De.matrixWorldInverse)}if(wt.isSkinnedMesh){Mn.setOptional(He,wt,"bindMatrix"),Mn.setOptional(He,wt,"bindMatrixInverse");const xi=wt.skeleton;xi&&(gt.floatVertexTextures?(xi.boneTexture===null&&xi.computeBoneTexture(),Mn.setValue(He,"boneTexture",xi.boneTexture,Ct),Mn.setValue(He,"boneTextureSize",xi.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const Ai=At.morphAttributes;if((Ai.position!==void 0||Ai.normal!==void 0||Ai.color!==void 0&&gt.isWebGL2===!0)&&Re.update(wt,At,Vn),(si||an.receiveShadow!==wt.receiveShadow)&&(an.receiveShadow=wt.receiveShadow,Mn.setValue(He,"receiveShadow",wt.receiveShadow)),ot.isMeshGouraudMaterial&&ot.envMap!==null&&(ui.envMap.value=Un,ui.flipEnvMap.value=Un.isCubeTexture&&Un.isRenderTargetTexture===!1?-1:1),si&&(Mn.setValue(He,"toneMappingExposure",g.toneMappingExposure),an.needsLights&&ei(ui,gi),xn&&ot.fog===!0&&ci.refreshFogUniforms(ui,xn),ci.refreshMaterialUniforms(ui,ot,K,J,xe),I1.upload(He,an.uniformsList,ui,Ct)),ot.isShaderMaterial&&ot.uniformsNeedUpdate===!0&&(I1.upload(He,an.uniformsList,ui,Ct),ot.uniformsNeedUpdate=!1),ot.isSpriteMaterial&&Mn.setValue(He,"center",wt.center),Mn.setValue(He,"modelViewMatrix",wt.modelViewMatrix),Mn.setValue(He,"normalMatrix",wt.normalMatrix),Mn.setValue(He,"modelMatrix",wt.matrixWorld),ot.isShaderMaterial||ot.isRawShaderMaterial){const xi=ot.uniformsGroups;for(let Ir=0,Sn=xi.length;Ir<Sn;Ir++)if(gt.isWebGL2){const fi=xi[Ir];fe.update(fi,Vn),fe.bind(fi,Vn)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Vn}function ei(De,st){De.ambientLightColor.needsUpdate=st,De.lightProbe.needsUpdate=st,De.directionalLights.needsUpdate=st,De.directionalLightShadows.needsUpdate=st,De.pointLights.needsUpdate=st,De.pointLightShadows.needsUpdate=st,De.spotLights.needsUpdate=st,De.spotLightShadows.needsUpdate=st,De.rectAreaLights.needsUpdate=st,De.hemisphereLights.needsUpdate=st}function yn(De){return De.isMeshLambertMaterial||De.isMeshToonMaterial||De.isMeshPhongMaterial||De.isMeshStandardMaterial||De.isShadowMaterial||De.isShaderMaterial&&De.lights===!0}this.getActiveCubeFace=function(){return _},this.getActiveMipmapLevel=function(){return S},this.getRenderTarget=function(){return R},this.setRenderTargetTextures=function(De,st,At){ut.get(De.texture).__webglTexture=st,ut.get(De.depthTexture).__webglTexture=At;const ot=ut.get(De);ot.__hasExternalTextures=!0,ot.__hasExternalTextures&&(ot.__autoAllocateDepthBuffer=At===void 0,ot.__autoAllocateDepthBuffer||xt.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),ot.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(De,st){const At=ut.get(De);At.__webglFramebuffer=st,At.__useDefaultFramebuffer=st===void 0},this.setRenderTarget=function(De,st=0,At=0){R=De,_=st,S=At;let ot=!0,wt=null,xn=!1,Nn=!1;if(De){const Un=ut.get(De);Un.__useDefaultFramebuffer!==void 0?(It.bindFramebuffer(36160,null),ot=!1):Un.__webglFramebuffer===void 0?Ct.setupRenderTarget(De):Un.__hasExternalTextures&&Ct.rebindTextures(De,ut.get(De.texture).__webglTexture,ut.get(De.depthTexture).__webglTexture);const Kn=De.texture;(Kn.isData3DTexture||Kn.isDataArrayTexture||Kn.isCompressedArrayTexture)&&(Nn=!0);const be=ut.get(De).__webglFramebuffer;De.isWebGLCubeRenderTarget?(wt=be[st],xn=!0):gt.isWebGL2&&De.samples>0&&Ct.useMultisampledRTT(De)===!1?wt=ut.get(De).__webglMultisampledFramebuffer:wt=be,D.copy(De.viewport),L.copy(De.scissor),N=De.scissorTest}else D.copy(ee).multiplyScalar(K).floor(),L.copy(ne).multiplyScalar(K).floor(),N=X;if(It.bindFramebuffer(36160,wt)&&gt.drawBuffers&&ot&&It.drawBuffers(De,wt),It.viewport(D),It.scissor(L),It.setScissorTest(N),xn){const Un=ut.get(De.texture);He.framebufferTexture2D(36160,36064,34069+st,Un.__webglTexture,At)}else if(Nn){const Un=ut.get(De.texture),Kn=st||0;He.framebufferTextureLayer(36160,36064,Un.__webglTexture,At||0,Kn)}P=-1},this.readRenderTargetPixels=function(De,st,At,ot,wt,xn,Nn){if(!(De&&De.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let pn=ut.get(De).__webglFramebuffer;if(De.isWebGLCubeRenderTarget&&Nn!==void 0&&(pn=pn[Nn]),pn){It.bindFramebuffer(36160,pn);try{const Un=De.texture,Kn=Un.format,be=Un.type;if(Kn!==Qa&&Ee.convert(Kn)!==He.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Ge=be===Qm&&(xt.has("EXT_color_buffer_half_float")||gt.isWebGL2&&xt.has("EXT_color_buffer_float"));if(be!==Ju&&Ee.convert(be)!==He.getParameter(35738)&&!(be===Vu&&(gt.isWebGL2||xt.has("OES_texture_float")||xt.has("WEBGL_color_buffer_float")))&&!Ge){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}st>=0&&st<=De.width-ot&&At>=0&&At<=De.height-wt&&He.readPixels(st,At,ot,wt,Ee.convert(Kn),Ee.convert(be),xn)}finally{const Un=R!==null?ut.get(R).__webglFramebuffer:null;It.bindFramebuffer(36160,Un)}}},this.copyFramebufferToTexture=function(De,st,At=0){const ot=Math.pow(2,-At),wt=Math.floor(st.image.width*ot),xn=Math.floor(st.image.height*ot);Ct.setTexture2D(st,0),He.copyTexSubImage2D(3553,At,0,0,De.x,De.y,wt,xn),It.unbindTexture()},this.copyTextureToTexture=function(De,st,At,ot=0){const wt=st.image.width,xn=st.image.height,Nn=Ee.convert(At.format),pn=Ee.convert(At.type);Ct.setTexture2D(At,0),He.pixelStorei(37440,At.flipY),He.pixelStorei(37441,At.premultiplyAlpha),He.pixelStorei(3317,At.unpackAlignment),st.isDataTexture?He.texSubImage2D(3553,ot,De.x,De.y,wt,xn,Nn,pn,st.image.data):st.isCompressedTexture?He.compressedTexSubImage2D(3553,ot,De.x,De.y,st.mipmaps[0].width,st.mipmaps[0].height,Nn,st.mipmaps[0].data):He.texSubImage2D(3553,ot,De.x,De.y,Nn,pn,st.image),ot===0&&At.generateMipmaps&&He.generateMipmap(3553),It.unbindTexture()},this.copyTextureToTexture3D=function(De,st,At,ot,wt=0){if(g.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const xn=De.max.x-De.min.x+1,Nn=De.max.y-De.min.y+1,pn=De.max.z-De.min.z+1,Un=Ee.convert(ot.format),Kn=Ee.convert(ot.type);let be;if(ot.isData3DTexture)Ct.setTexture3D(ot,0),be=32879;else if(ot.isDataArrayTexture)Ct.setTexture2DArray(ot,0),be=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}He.pixelStorei(37440,ot.flipY),He.pixelStorei(37441,ot.premultiplyAlpha),He.pixelStorei(3317,ot.unpackAlignment);const Ge=He.getParameter(3314),et=He.getParameter(32878),Et=He.getParameter(3316),vt=He.getParameter(3315),Gt=He.getParameter(32877),zt=At.isCompressedTexture?At.mipmaps[0]:At.image;He.pixelStorei(3314,zt.width),He.pixelStorei(32878,zt.height),He.pixelStorei(3316,De.min.x),He.pixelStorei(3315,De.min.y),He.pixelStorei(32877,De.min.z),At.isDataTexture||At.isData3DTexture?He.texSubImage3D(be,wt,st.x,st.y,st.z,xn,Nn,pn,Un,Kn,zt.data):At.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),He.compressedTexSubImage3D(be,wt,st.x,st.y,st.z,xn,Nn,pn,Un,zt.data)):He.texSubImage3D(be,wt,st.x,st.y,st.z,xn,Nn,pn,Un,Kn,zt),He.pixelStorei(3314,Ge),He.pixelStorei(32878,et),He.pixelStorei(3316,Et),He.pixelStorei(3315,vt),He.pixelStorei(32877,Gt),wt===0&&ot.generateMipmaps&&He.generateMipmap(be),It.unbindTexture()},this.initTexture=function(De){De.isCubeTexture?Ct.setTextureCube(De,0):De.isData3DTexture?Ct.setTexture3D(De,0):De.isDataArrayTexture||De.isCompressedArrayTexture?Ct.setTexture2DArray(De,0):Ct.setTexture2D(De,0),It.unbindTexture()},this.resetState=function(){_=0,S=0,R=null,It.reset(),Xe.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}}class LD extends lM{}LD.prototype.isWebGL1Renderer=!0;class Px{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Rn(e),this.density=t}clone(){return new Px(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class Ox{constructor(e,t=1,r=1e3){this.isFog=!0,this.name="",this.color=new Rn(e),this.near=t,this.far=r}clone(){return new Ox(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class rx extends Tr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class U0{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=x0,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=ml()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let o=0,a=this.stride;o<a;o++)this.array[e+o]=t.array[r+o];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ml()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ml()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Aa=new Ue;class sd{constructor(e,t,r,o=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=o}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)Aa.fromBufferAttribute(this,t),Aa.applyMatrix4(e),this.setXYZ(t,Aa.x,Aa.y,Aa.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Aa.fromBufferAttribute(this,t),Aa.applyNormalMatrix(e),this.setXYZ(t,Aa.x,Aa.y,Aa.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Aa.fromBufferAttribute(this,t),Aa.transformDirection(e),this.setXYZ(t,Aa.x,Aa.y,Aa.z);return this}setX(e,t){return this.normalized&&(t=ir(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=ir(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=ir(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=ir(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=dl(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=dl(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=dl(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=dl(t,this.array)),t}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=ir(t,this.array),r=ir(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,o){return e=e*this.data.stride+this.offset,this.normalized&&(t=ir(t,this.array),r=ir(r,this.array),o=ir(o,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=o,this}setXYZW(e,t,r,o,a){return e=e*this.data.stride+this.offset,this.normalized&&(t=ir(t,this.array),r=ir(r,this.array),o=ir(o,this.array),a=ir(a,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=o,this.data.array[e+3]=a,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const o=r*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)t.push(this.data.array[o+a])}return new Qr(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new sd(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const o=r*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)t.push(this.data.array[o+a])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class cM extends oo{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Rn(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let tm;const xA=new Ue,nm=new Ue,im=new Ue,rm=new Yt,EA=new Yt,DD=new ki,Gy=new Ue,_A=new Ue,Hy=new Ue,jT=new Yt,X_=new Yt,XT=new Yt;class PD extends Tr{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",tm===void 0){tm=new Zi;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new U0(t,5);tm.setIndex([0,1,2,0,2,3]),tm.setAttribute("position",new sd(r,3,0,!1)),tm.setAttribute("uv",new sd(r,2,3,!1))}this.geometry=tm,this.material=e!==void 0?e:new cM,this.center=new Yt(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),nm.setFromMatrixScale(this.matrixWorld),DD.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),im.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&nm.multiplyScalar(-im.z);const r=this.material.rotation;let o,a;r!==0&&(a=Math.cos(r),o=Math.sin(r));const l=this.center;Vy(Gy.set(-.5,-.5,0),im,l,nm,o,a),Vy(_A.set(.5,-.5,0),im,l,nm,o,a),Vy(Hy.set(.5,.5,0),im,l,nm,o,a),jT.set(0,0),X_.set(1,0),XT.set(1,1);let d=e.ray.intersectTriangle(Gy,_A,Hy,!1,xA);if(d===null&&(Vy(_A.set(-.5,.5,0),im,l,nm,o,a),X_.set(0,1),d=e.ray.intersectTriangle(Gy,Hy,_A,!1,xA),d===null))return;const c=e.ray.origin.distanceTo(xA);c<e.near||c>e.far||t.push({distance:c,point:xA.clone(),uv:Va.getInterpolation(xA,Gy,_A,Hy,jT,X_,XT,new Yt),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function Vy(i,e,t,r,o,a){rm.subVectors(i,t).addScalar(.5).multiply(r),o!==void 0?(EA.x=a*rm.x-o*rm.y,EA.y=o*rm.x+a*rm.y):EA.copy(rm),i.copy(e),i.x+=EA.x,i.y+=EA.y,i.applyMatrix4(DD)}const Qy=new Ue,KT=new Ue;class OD extends Tr{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let r=0,o=t.length;r<o;r++){const a=t[r];this.addLevel(a.object.clone(),a.distance,a.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,r=0){t=Math.abs(t);const o=this.levels;let a;for(a=0;a<o.length&&!(t<o[a].distance);a++);return o.splice(a,0,{distance:t,hysteresis:r,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let r,o;for(r=1,o=t.length;r<o;r++){let a=t[r].distance;if(t[r].object.visible&&(a-=a*t[r].hysteresis),e<a)break}return t[r-1].object}return null}raycast(e,t){if(this.levels.length>0){Qy.setFromMatrixPosition(this.matrixWorld);const o=e.ray.origin.distanceTo(Qy);this.getObjectForDistance(o).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Qy.setFromMatrixPosition(e.matrixWorld),KT.setFromMatrixPosition(this.matrixWorld);const r=Qy.distanceTo(KT)/e.zoom;t[0].object.visible=!0;let o,a;for(o=1,a=t.length;o<a;o++){let l=t[o].distance;if(t[o].object.visible&&(l-=l*t[o].hysteresis),r>=l)t[o-1].object.visible=!1,t[o].object.visible=!0;else break}for(this._currentLevel=o-1;o<a;o++)t[o].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const r=this.levels;for(let o=0,a=r.length;o<a;o++){const l=r[o];t.object.levels.push({object:l.object.uuid,distance:l.distance,hysteresis:l.hysteresis})}return t}}const YT=new Ue,qT=new Kr,JT=new Kr,TG=new Ue,ZT=new ki,sm=new Ue;class uM extends Do{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new ki,this.bindMatrixInverse=new ki,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new _c),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)sm.fromBufferAttribute(t,r),this.applyBoneTransform(r,sm),this.boundingBox.expandByPoint(sm)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new wc),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)sm.fromBufferAttribute(t,r),this.applyBoneTransform(r,sm),this.boundingSphere.expandByPoint(sm)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Kr,t=this.geometry.attributes.skinWeight;for(let r=0,o=t.count;r<o;r++){e.fromBufferAttribute(t,r);const a=1/e.manhattanLength();a!==1/0?e.multiplyScalar(a):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const r=this.skeleton,o=this.geometry;qT.fromBufferAttribute(o.attributes.skinIndex,e),JT.fromBufferAttribute(o.attributes.skinWeight,e),YT.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let a=0;a<4;a++){const l=JT.getComponent(a);if(l!==0){const d=qT.getComponent(a);ZT.multiplyMatrices(r.bones[d].matrixWorld,r.boneInverses[d]),t.addScaledVector(TG.copy(YT).applyMatrix4(ZT),l)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}class Fx extends Tr{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Pm extends As{constructor(e=null,t=1,r=1,o,a,l,d,c,h=Ps,m=Ps,p,A){super(null,l,d,c,h,m,o,a,p,A),this.isDataTexture=!0,this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const $T=new ki,IG=new ki;class z0{constructor(e=[],t=[]){this.uuid=ml(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,o=this.bones.length;r<o;r++)this.boneInverses.push(new ki)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const r=new ki;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,t=this.boneInverses,r=this.boneMatrices,o=this.boneTexture;for(let a=0,l=e.length;a<l;a++){const d=e[a]?e[a].matrixWorld:IG;$T.multiplyMatrices(d,t[a]),$T.toArray(r,a*16)}o!==null&&(o.needsUpdate=!0)}clone(){return new z0(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=mD(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const r=new Pm(t,e,e,Qa,Vu);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){const o=this.bones[t];if(o.name===e)return o}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,o=e.bones.length;r<o;r++){const a=e.bones[r];let l=t[a];l===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",a),l=new Fx),this.bones.push(l),this.boneInverses.push(new ki().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,r=this.boneInverses;for(let o=0,a=t.length;o<a;o++){const l=t[o];e.bones.push(l.uuid);const d=r[o];e.boneInverses.push(d.toArray())}return e}}class Ym extends Qr{constructor(e,t,r,o=1){super(e,t,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=o}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const om=new ki,eI=new ki,Wy=[],tI=new _c,RG=new ki,wA=new Do,CA=new wc;class hM extends Do{constructor(e,t,r){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Ym(new Float32Array(r*16),16),this.instanceColor=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let o=0;o<r;o++)this.setMatrixAt(o,RG)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new _c),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,om),tI.copy(e.boundingBox).applyMatrix4(om),this.boundingBox.union(tI)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new wc),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,om),CA.copy(e.boundingSphere).applyMatrix4(om),this.boundingSphere.union(CA)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const r=this.matrixWorld,o=this.count;if(wA.geometry=this.geometry,wA.material=this.material,wA.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),CA.copy(this.boundingSphere),CA.applyMatrix4(r),e.ray.intersectsSphere(CA)!==!1))for(let a=0;a<o;a++){this.getMatrixAt(a,om),eI.multiplyMatrices(r,om),wA.matrixWorld=eI,wA.raycast(e,Wy);for(let l=0,d=Wy.length;l<d;l++){const c=Wy[l];c.instanceId=a,c.object=this,t.push(c)}Wy.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Ym(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class ca extends oo{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Rn(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const nI=new Ue,iI=new Ue,rI=new ki,K_=new O0,jy=new wc;class $u extends Tr{constructor(e=new Zi,t=new ca){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[0];for(let o=1,a=t.count;o<a;o++)nI.fromBufferAttribute(t,o-1),iI.fromBufferAttribute(t,o),r[o]=r[o-1],r[o]+=nI.distanceTo(iI);e.setAttribute("lineDistance",new di(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const r=this.geometry,o=this.matrixWorld,a=e.params.Line.threshold,l=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),jy.copy(r.boundingSphere),jy.applyMatrix4(o),jy.radius+=a,e.ray.intersectsSphere(jy)===!1)return;rI.copy(o).invert(),K_.copy(e.ray).applyMatrix4(rI);const d=a/((this.scale.x+this.scale.y+this.scale.z)/3),c=d*d,h=new Ue,m=new Ue,p=new Ue,A=new Ue,v=this.isLineSegments?2:1,y=r.index,C=r.attributes.position;if(y!==null){const g=Math.max(0,l.start),b=Math.min(y.count,l.start+l.count);for(let _=g,S=b-1;_<S;_+=v){const R=y.getX(_),P=y.getX(_+1);if(h.fromBufferAttribute(C,R),m.fromBufferAttribute(C,P),K_.distanceSqToSegment(h,m,A,p)>c)continue;A.applyMatrix4(this.matrixWorld);const D=e.ray.origin.distanceTo(A);D<e.near||D>e.far||t.push({distance:D,point:p.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}else{const g=Math.max(0,l.start),b=Math.min(C.count,l.start+l.count);for(let _=g,S=b-1;_<S;_+=v){if(h.fromBufferAttribute(C,_),m.fromBufferAttribute(C,_+1),K_.distanceSqToSegment(h,m,A,p)>c)continue;A.applyMatrix4(this.matrixWorld);const P=e.ray.origin.distanceTo(A);P<e.near||P>e.far||t.push({distance:P,point:p.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const o=t[r[0]];if(o!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,l=o.length;a<l;a++){const d=o[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[d]=a}}}}}const sI=new Ue,oI=new Ue;class Cc extends $u{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[];for(let o=0,a=t.count;o<a;o+=2)sI.fromBufferAttribute(t,o),oI.fromBufferAttribute(t,o+1),r[o]=o===0?0:r[o-1],r[o+1]=r[o]+sI.distanceTo(oI);e.setAttribute("lineDistance",new di(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class dM extends $u{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class Nx extends oo{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Rn(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const aI=new ki,Gw=new O0,Xy=new wc,Ky=new Ue;class fM extends Tr{constructor(e=new Zi,t=new Nx){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,o=this.matrixWorld,a=e.params.Points.threshold,l=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),Xy.copy(r.boundingSphere),Xy.applyMatrix4(o),Xy.radius+=a,e.ray.intersectsSphere(Xy)===!1)return;aI.copy(o).invert(),Gw.copy(e.ray).applyMatrix4(aI);const d=a/((this.scale.x+this.scale.y+this.scale.z)/3),c=d*d,h=r.index,p=r.attributes.position;if(h!==null){const A=Math.max(0,l.start),v=Math.min(h.count,l.start+l.count);for(let y=A,x=v;y<x;y++){const C=h.getX(y);Ky.fromBufferAttribute(p,C),lI(Ky,C,c,o,e,t,this)}}else{const A=Math.max(0,l.start),v=Math.min(p.count,l.start+l.count);for(let y=A,x=v;y<x;y++)Ky.fromBufferAttribute(p,y),lI(Ky,y,c,o,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const o=t[r[0]];if(o!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,l=o.length;a<l;a++){const d=o[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[d]=a}}}}}function lI(i,e,t,r,o,a,l){const d=Gw.distanceSqToPoint(i);if(d<t){const c=new Ue;Gw.closestPointToPoint(i,c),c.applyMatrix4(r);const h=o.ray.origin.distanceTo(c);if(h<o.near||h>o.far)return;a.push({distance:h,distanceToRay:Math.sqrt(d),point:c,index:e,face:null,object:l})}}class BG extends As{constructor(e,t,r,o,a,l,d,c,h){super(e,t,r,o,a,l,d,c,h),this.isVideoTexture=!0,this.minFilter=l!==void 0?l:ws,this.magFilter=a!==void 0?a:ws,this.generateMipmaps=!1;const m=this;function p(){m.needsUpdate=!0,e.requestVideoFrameCallback(p)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(p)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class LG extends As{constructor(e,t,r){super({width:e,height:t}),this.isFramebufferTexture=!0,this.format=r,this.magFilter=Ps,this.minFilter=Ps,this.generateMipmaps=!1,this.needsUpdate=!0}}class pM extends As{constructor(e,t,r,o,a,l,d,c,h,m,p,A){super(null,l,d,c,h,m,o,a,p,A),this.isCompressedTexture=!0,this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class DG extends pM{constructor(e,t,r,o,a,l){super(e,t,r,a,l),this.isCompressedArrayTexture=!0,this.image.depth=o,this.wrapR=Uo}}class PG extends As{constructor(e,t,r,o,a,l,d,c,h){super(e,t,r,o,a,l,d,c,h),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Mc{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let r,o=this.getPoint(0),a=0;t.push(0);for(let l=1;l<=e;l++)r=this.getPoint(l/e),a+=r.distanceTo(o),t.push(a),o=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const r=this.getLengths();let o=0;const a=r.length;let l;t?l=t:l=e*r[a-1];let d=0,c=a-1,h;for(;d<=c;)if(o=Math.floor(d+(c-d)/2),h=r[o]-l,h<0)d=o+1;else if(h>0)c=o-1;else{c=o;break}if(o=c,r[o]===l)return o/(a-1);const m=r[o],A=r[o+1]-m,v=(l-m)/A;return(o+v)/(a-1)}getTangent(e,t){let o=e-1e-4,a=e+1e-4;o<0&&(o=0),a>1&&(a=1);const l=this.getPoint(o),d=this.getPoint(a),c=t||(l.isVector2?new Yt:new Ue);return c.copy(d).sub(l).normalize(),c}getTangentAt(e,t){const r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){const r=new Ue,o=[],a=[],l=[],d=new Ue,c=new ki;for(let v=0;v<=e;v++){const y=v/e;o[v]=this.getTangentAt(y,new Ue)}a[0]=new Ue,l[0]=new Ue;let h=Number.MAX_VALUE;const m=Math.abs(o[0].x),p=Math.abs(o[0].y),A=Math.abs(o[0].z);m<=h&&(h=m,r.set(1,0,0)),p<=h&&(h=p,r.set(0,1,0)),A<=h&&r.set(0,0,1),d.crossVectors(o[0],r).normalize(),a[0].crossVectors(o[0],d),l[0].crossVectors(o[0],a[0]);for(let v=1;v<=e;v++){if(a[v]=a[v-1].clone(),l[v]=l[v-1].clone(),d.crossVectors(o[v-1],o[v]),d.length()>Number.EPSILON){d.normalize();const y=Math.acos(Os(o[v-1].dot(o[v]),-1,1));a[v].applyMatrix4(c.makeRotationAxis(d,y))}l[v].crossVectors(o[v],a[v])}if(t===!0){let v=Math.acos(Os(a[0].dot(a[e]),-1,1));v/=e,o[0].dot(d.crossVectors(a[0],a[e]))>0&&(v=-v);for(let y=1;y<=e;y++)a[y].applyMatrix4(c.makeRotationAxis(o[y],v*y)),l[y].crossVectors(o[y],a[y])}return{tangents:o,normals:a,binormals:l}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class kx extends Mc{constructor(e=0,t=0,r=1,o=1,a=0,l=Math.PI*2,d=!1,c=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=o,this.aStartAngle=a,this.aEndAngle=l,this.aClockwise=d,this.aRotation=c}getPoint(e,t){const r=t||new Yt,o=Math.PI*2;let a=this.aEndAngle-this.aStartAngle;const l=Math.abs(a)<Number.EPSILON;for(;a<0;)a+=o;for(;a>o;)a-=o;a<Number.EPSILON&&(l?a=0:a=o),this.aClockwise===!0&&!l&&(a===o?a=-o:a=a-o);const d=this.aStartAngle+e*a;let c=this.aX+this.xRadius*Math.cos(d),h=this.aY+this.yRadius*Math.sin(d);if(this.aRotation!==0){const m=Math.cos(this.aRotation),p=Math.sin(this.aRotation),A=c-this.aX,v=h-this.aY;c=A*m-v*p+this.aX,h=A*p+v*m+this.aY}return r.set(c,h)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class FD extends kx{constructor(e,t,r,o,a,l){super(e,t,r,r,o,a,l),this.isArcCurve=!0,this.type="ArcCurve"}}function mM(){let i=0,e=0,t=0,r=0;function o(a,l,d,c){i=a,e=d,t=-3*a+3*l-2*d-c,r=2*a-2*l+d+c}return{initCatmullRom:function(a,l,d,c,h){o(l,d,h*(d-a),h*(c-l))},initNonuniformCatmullRom:function(a,l,d,c,h,m,p){let A=(l-a)/h-(d-a)/(h+m)+(d-l)/m,v=(d-l)/m-(c-l)/(m+p)+(c-d)/p;A*=m,v*=m,o(l,d,A,v)},calc:function(a){const l=a*a,d=l*a;return i+e*a+t*l+r*d}}}const Yy=new Ue,Y_=new mM,q_=new mM,J_=new mM;class ND extends Mc{constructor(e=[],t=!1,r="centripetal",o=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=o}getPoint(e,t=new Ue){const r=t,o=this.points,a=o.length,l=(a-(this.closed?0:1))*e;let d=Math.floor(l),c=l-d;this.closed?d+=d>0?0:(Math.floor(Math.abs(d)/a)+1)*a:c===0&&d===a-1&&(d=a-2,c=1);let h,m;this.closed||d>0?h=o[(d-1)%a]:(Yy.subVectors(o[0],o[1]).add(o[0]),h=Yy);const p=o[d%a],A=o[(d+1)%a];if(this.closed||d+2<a?m=o[(d+2)%a]:(Yy.subVectors(o[a-1],o[a-2]).add(o[a-1]),m=Yy),this.curveType==="centripetal"||this.curveType==="chordal"){const v=this.curveType==="chordal"?.5:.25;let y=Math.pow(h.distanceToSquared(p),v),x=Math.pow(p.distanceToSquared(A),v),C=Math.pow(A.distanceToSquared(m),v);x<1e-4&&(x=1),y<1e-4&&(y=x),C<1e-4&&(C=x),Y_.initNonuniformCatmullRom(h.x,p.x,A.x,m.x,y,x,C),q_.initNonuniformCatmullRom(h.y,p.y,A.y,m.y,y,x,C),J_.initNonuniformCatmullRom(h.z,p.z,A.z,m.z,y,x,C)}else this.curveType==="catmullrom"&&(Y_.initCatmullRom(h.x,p.x,A.x,m.x,this.tension),q_.initCatmullRom(h.y,p.y,A.y,m.y,this.tension),J_.initCatmullRom(h.z,p.z,A.z,m.z,this.tension));return r.set(Y_.calc(c),q_.calc(c),J_.calc(c)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const o=e.points[t];this.points.push(o.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const o=this.points[t];e.points.push(o.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const o=e.points[t];this.points.push(new Ue().fromArray(o))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function cI(i,e,t,r,o){const a=(r-e)*.5,l=(o-t)*.5,d=i*i,c=i*d;return(2*t-2*r+a+l)*c+(-3*t+3*r-2*a-l)*d+a*i+t}function OG(i,e){const t=1-i;return t*t*e}function FG(i,e){return 2*(1-i)*i*e}function NG(i,e){return i*i*e}function qA(i,e,t,r){return OG(i,e)+FG(i,t)+NG(i,r)}function kG(i,e){const t=1-i;return t*t*t*e}function UG(i,e){const t=1-i;return 3*t*t*i*e}function zG(i,e){return 3*(1-i)*i*i*e}function GG(i,e){return i*i*i*e}function JA(i,e,t,r,o){return kG(i,e)+UG(i,t)+zG(i,r)+GG(i,o)}class gM extends Mc{constructor(e=new Yt,t=new Yt,r=new Yt,o=new Yt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=o}getPoint(e,t=new Yt){const r=t,o=this.v0,a=this.v1,l=this.v2,d=this.v3;return r.set(JA(e,o.x,a.x,l.x,d.x),JA(e,o.y,a.y,l.y,d.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class kD extends Mc{constructor(e=new Ue,t=new Ue,r=new Ue,o=new Ue){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=o}getPoint(e,t=new Ue){const r=t,o=this.v0,a=this.v1,l=this.v2,d=this.v3;return r.set(JA(e,o.x,a.x,l.x,d.x),JA(e,o.y,a.y,l.y,d.y),JA(e,o.z,a.z,l.z,d.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Ux extends Mc{constructor(e=new Yt,t=new Yt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Yt){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Yt){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class UD extends Mc{constructor(e=new Ue,t=new Ue){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new Ue){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Ue){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class AM extends Mc{constructor(e=new Yt,t=new Yt,r=new Yt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new Yt){const r=t,o=this.v0,a=this.v1,l=this.v2;return r.set(qA(e,o.x,a.x,l.x),qA(e,o.y,a.y,l.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class vM extends Mc{constructor(e=new Ue,t=new Ue,r=new Ue){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new Ue){const r=t,o=this.v0,a=this.v1,l=this.v2;return r.set(qA(e,o.x,a.x,l.x),qA(e,o.y,a.y,l.y),qA(e,o.z,a.z,l.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class yM extends Mc{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Yt){const r=t,o=this.points,a=(o.length-1)*e,l=Math.floor(a),d=a-l,c=o[l===0?l:l-1],h=o[l],m=o[l>o.length-2?o.length-1:l+1],p=o[l>o.length-3?o.length-1:l+2];return r.set(cI(d,c.x,h.x,m.x,p.x),cI(d,c.y,h.y,m.y,p.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const o=e.points[t];this.points.push(o.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const o=this.points[t];e.points.push(o.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const o=e.points[t];this.points.push(new Yt().fromArray(o))}return this}}var xM=Object.freeze({__proto__:null,ArcCurve:FD,CatmullRomCurve3:ND,CubicBezierCurve:gM,CubicBezierCurve3:kD,EllipseCurve:kx,LineCurve:Ux,LineCurve3:UD,QuadraticBezierCurve:AM,QuadraticBezierCurve3:vM,SplineCurve:yM});class zD extends Mc{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Ux(t,e))}getPoint(e,t){const r=e*this.getLength(),o=this.getCurveLengths();let a=0;for(;a<o.length;){if(o[a]>=r){const l=o[a]-r,d=this.curves[a],c=d.getLength(),h=c===0?0:1-l/c;return d.getPointAt(h,t)}a++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let r=0,o=this.curves.length;r<o;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let r;for(let o=0,a=this.curves;o<a.length;o++){const l=a[o],d=l.isEllipseCurve?e*2:l.isLineCurve||l.isLineCurve3?1:l.isSplineCurve?e*l.points.length:e,c=l.getPoints(d);for(let h=0;h<c.length;h++){const m=c[h];r&&r.equals(m)||(t.push(m),r=m)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const o=e.curves[t];this.curves.push(o.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++){const o=this.curves[t];e.curves.push(o.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const o=e.curves[t];this.curves.push(new xM[o.type]().fromJSON(o))}return this}}class _0 extends zD{constructor(e){super(),this.type="Path",this.currentPoint=new Yt,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const r=new Ux(this.currentPoint.clone(),new Yt(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,o){const a=new AM(this.currentPoint.clone(),new Yt(e,t),new Yt(r,o));return this.curves.push(a),this.currentPoint.set(r,o),this}bezierCurveTo(e,t,r,o,a,l){const d=new gM(this.currentPoint.clone(),new Yt(e,t),new Yt(r,o),new Yt(a,l));return this.curves.push(d),this.currentPoint.set(a,l),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),r=new yM(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,o,a,l){const d=this.currentPoint.x,c=this.currentPoint.y;return this.absarc(e+d,t+c,r,o,a,l),this}absarc(e,t,r,o,a,l){return this.absellipse(e,t,r,r,o,a,l),this}ellipse(e,t,r,o,a,l,d,c){const h=this.currentPoint.x,m=this.currentPoint.y;return this.absellipse(e+h,t+m,r,o,a,l,d,c),this}absellipse(e,t,r,o,a,l,d,c){const h=new kx(e,t,r,o,a,l,d,c);if(this.curves.length>0){const p=h.getPoint(0);p.equals(this.currentPoint)||this.lineTo(p.x,p.y)}this.curves.push(h);const m=h.getPoint(1);return this.currentPoint.copy(m),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class ag extends Zi{constructor(e=[new Yt(0,-.5),new Yt(.5,0),new Yt(0,.5)],t=12,r=0,o=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:o},t=Math.floor(t),o=Os(o,0,Math.PI*2);const a=[],l=[],d=[],c=[],h=[],m=1/t,p=new Ue,A=new Yt,v=new Ue,y=new Ue,x=new Ue;let C=0,g=0;for(let b=0;b<=e.length-1;b++)switch(b){case 0:C=e[b+1].x-e[b].x,g=e[b+1].y-e[b].y,v.x=g*1,v.y=-C,v.z=g*0,x.copy(v),v.normalize(),c.push(v.x,v.y,v.z);break;case e.length-1:c.push(x.x,x.y,x.z);break;default:C=e[b+1].x-e[b].x,g=e[b+1].y-e[b].y,v.x=g*1,v.y=-C,v.z=g*0,y.copy(v),v.x+=x.x,v.y+=x.y,v.z+=x.z,v.normalize(),c.push(v.x,v.y,v.z),x.copy(y)}for(let b=0;b<=t;b++){const _=r+b*m*o,S=Math.sin(_),R=Math.cos(_);for(let P=0;P<=e.length-1;P++){p.x=e[P].x*S,p.y=e[P].y,p.z=e[P].x*R,l.push(p.x,p.y,p.z),A.x=b/t,A.y=P/(e.length-1),d.push(A.x,A.y);const O=c[3*P+0]*S,D=c[3*P+1],L=c[3*P+0]*R;h.push(O,D,L)}}for(let b=0;b<t;b++)for(let _=0;_<e.length-1;_++){const S=_+b*e.length,R=S,P=S+e.length,O=S+e.length+1,D=S+1;a.push(R,P,D),a.push(O,D,P)}this.setIndex(a),this.setAttribute("position",new di(l,3)),this.setAttribute("uv",new di(d,2)),this.setAttribute("normal",new di(h,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ag(e.points,e.segments,e.phiStart,e.phiLength)}}class G0 extends ag{constructor(e=1,t=1,r=4,o=8){const a=new _0;a.absarc(0,-t/2,e,Math.PI*1.5,0),a.absarc(0,t/2,e,0,Math.PI*.5),super(a.getPoints(r),o),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:r,radialSegments:o}}static fromJSON(e){return new G0(e.radius,e.length,e.capSegments,e.radialSegments)}}class H0 extends Zi{constructor(e=1,t=32,r=0,o=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:o},t=Math.max(3,t);const a=[],l=[],d=[],c=[],h=new Ue,m=new Yt;l.push(0,0,0),d.push(0,0,1),c.push(.5,.5);for(let p=0,A=3;p<=t;p++,A+=3){const v=r+p/t*o;h.x=e*Math.cos(v),h.y=e*Math.sin(v),l.push(h.x,h.y,h.z),d.push(0,0,1),m.x=(l[A]/e+1)/2,m.y=(l[A+1]/e+1)/2,c.push(m.x,m.y)}for(let p=1;p<=t;p++)a.push(p,p+1,0);this.setIndex(a),this.setAttribute("position",new di(l,3)),this.setAttribute("normal",new di(d,3)),this.setAttribute("uv",new di(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new H0(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class qf extends Zi{constructor(e=1,t=1,r=1,o=32,a=1,l=!1,d=0,c=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:o,heightSegments:a,openEnded:l,thetaStart:d,thetaLength:c};const h=this;o=Math.floor(o),a=Math.floor(a);const m=[],p=[],A=[],v=[];let y=0;const x=[],C=r/2;let g=0;b(),l===!1&&(e>0&&_(!0),t>0&&_(!1)),this.setIndex(m),this.setAttribute("position",new di(p,3)),this.setAttribute("normal",new di(A,3)),this.setAttribute("uv",new di(v,2));function b(){const S=new Ue,R=new Ue;let P=0;const O=(t-e)/r;for(let D=0;D<=a;D++){const L=[],N=D/a,H=N*(t-e)+e;for(let J=0;J<=o;J++){const K=J/o,se=K*c+d,ae=Math.sin(se),ee=Math.cos(se);R.x=H*ae,R.y=-N*r+C,R.z=H*ee,p.push(R.x,R.y,R.z),S.set(ae,O,ee).normalize(),A.push(S.x,S.y,S.z),v.push(K,1-N),L.push(y++)}x.push(L)}for(let D=0;D<o;D++)for(let L=0;L<a;L++){const N=x[L][D],H=x[L+1][D],J=x[L+1][D+1],K=x[L][D+1];m.push(N,H,K),m.push(H,J,K),P+=6}h.addGroup(g,P,0),g+=P}function _(S){const R=y,P=new Yt,O=new Ue;let D=0;const L=S===!0?e:t,N=S===!0?1:-1;for(let J=1;J<=o;J++)p.push(0,C*N,0),A.push(0,N,0),v.push(.5,.5),y++;const H=y;for(let J=0;J<=o;J++){const se=J/o*c+d,ae=Math.cos(se),ee=Math.sin(se);O.x=L*ee,O.y=C*N,O.z=L*ae,p.push(O.x,O.y,O.z),A.push(0,N,0),P.x=ae*.5+.5,P.y=ee*.5*N+.5,v.push(P.x,P.y),y++}for(let J=0;J<o;J++){const K=R+J,se=H+J;S===!0?m.push(se,se+1,K):m.push(se+1,se,K),D+=3}h.addGroup(g,D,S===!0?1:2),g+=D}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new qf(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class V0 extends qf{constructor(e=1,t=1,r=32,o=1,a=!1,l=0,d=Math.PI*2){super(0,e,t,r,o,a,l,d),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:o,openEnded:a,thetaStart:l,thetaLength:d}}static fromJSON(e){return new V0(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class th extends Zi{constructor(e=[],t=[],r=1,o=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:o};const a=[],l=[];d(o),h(r),m(),this.setAttribute("position",new di(a,3)),this.setAttribute("normal",new di(a.slice(),3)),this.setAttribute("uv",new di(l,2)),o===0?this.computeVertexNormals():this.normalizeNormals();function d(b){const _=new Ue,S=new Ue,R=new Ue;for(let P=0;P<t.length;P+=3)v(t[P+0],_),v(t[P+1],S),v(t[P+2],R),c(_,S,R,b)}function c(b,_,S,R){const P=R+1,O=[];for(let D=0;D<=P;D++){O[D]=[];const L=b.clone().lerp(S,D/P),N=_.clone().lerp(S,D/P),H=P-D;for(let J=0;J<=H;J++)J===0&&D===P?O[D][J]=L:O[D][J]=L.clone().lerp(N,J/H)}for(let D=0;D<P;D++)for(let L=0;L<2*(P-D)-1;L++){const N=Math.floor(L/2);L%2===0?(A(O[D][N+1]),A(O[D+1][N]),A(O[D][N])):(A(O[D][N+1]),A(O[D+1][N+1]),A(O[D+1][N]))}}function h(b){const _=new Ue;for(let S=0;S<a.length;S+=3)_.x=a[S+0],_.y=a[S+1],_.z=a[S+2],_.normalize().multiplyScalar(b),a[S+0]=_.x,a[S+1]=_.y,a[S+2]=_.z}function m(){const b=new Ue;for(let _=0;_<a.length;_+=3){b.x=a[_+0],b.y=a[_+1],b.z=a[_+2];const S=C(b)/2/Math.PI+.5,R=g(b)/Math.PI+.5;l.push(S,1-R)}y(),p()}function p(){for(let b=0;b<l.length;b+=6){const _=l[b+0],S=l[b+2],R=l[b+4],P=Math.max(_,S,R),O=Math.min(_,S,R);P>.9&&O<.1&&(_<.2&&(l[b+0]+=1),S<.2&&(l[b+2]+=1),R<.2&&(l[b+4]+=1))}}function A(b){a.push(b.x,b.y,b.z)}function v(b,_){const S=b*3;_.x=e[S+0],_.y=e[S+1],_.z=e[S+2]}function y(){const b=new Ue,_=new Ue,S=new Ue,R=new Ue,P=new Yt,O=new Yt,D=new Yt;for(let L=0,N=0;L<a.length;L+=9,N+=6){b.set(a[L+0],a[L+1],a[L+2]),_.set(a[L+3],a[L+4],a[L+5]),S.set(a[L+6],a[L+7],a[L+8]),P.set(l[N+0],l[N+1]),O.set(l[N+2],l[N+3]),D.set(l[N+4],l[N+5]),R.copy(b).add(_).add(S).divideScalar(3);const H=C(R);x(P,N+0,b,H),x(O,N+2,_,H),x(D,N+4,S,H)}}function x(b,_,S,R){R<0&&b.x===1&&(l[_]=b.x-1),S.x===0&&S.z===0&&(l[_]=R/2/Math.PI+.5)}function C(b){return Math.atan2(b.z,-b.x)}function g(b){return Math.atan2(-b.y,Math.sqrt(b.x*b.x+b.z*b.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new th(e.vertices,e.indices,e.radius,e.details)}}class Q0 extends th{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,o=1/r,a=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-o,-r,0,-o,r,0,o,-r,0,o,r,-o,-r,0,-o,r,0,o,-r,0,o,r,0,-r,0,-o,r,0,-o,-r,0,o,r,0,o],l=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(a,l,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Q0(e.radius,e.detail)}}const qy=new Ue,Jy=new Ue,Z_=new Ue,Zy=new Va;class GD extends Zi{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const o=Math.pow(10,4),a=Math.cos(Pf*t),l=e.getIndex(),d=e.getAttribute("position"),c=l?l.count:d.count,h=[0,0,0],m=["a","b","c"],p=new Array(3),A={},v=[];for(let y=0;y<c;y+=3){l?(h[0]=l.getX(y),h[1]=l.getX(y+1),h[2]=l.getX(y+2)):(h[0]=y,h[1]=y+1,h[2]=y+2);const{a:x,b:C,c:g}=Zy;if(x.fromBufferAttribute(d,h[0]),C.fromBufferAttribute(d,h[1]),g.fromBufferAttribute(d,h[2]),Zy.getNormal(Z_),p[0]=`${Math.round(x.x*o)},${Math.round(x.y*o)},${Math.round(x.z*o)}`,p[1]=`${Math.round(C.x*o)},${Math.round(C.y*o)},${Math.round(C.z*o)}`,p[2]=`${Math.round(g.x*o)},${Math.round(g.y*o)},${Math.round(g.z*o)}`,!(p[0]===p[1]||p[1]===p[2]||p[2]===p[0]))for(let b=0;b<3;b++){const _=(b+1)%3,S=p[b],R=p[_],P=Zy[m[b]],O=Zy[m[_]],D=`${S}_${R}`,L=`${R}_${S}`;L in A&&A[L]?(Z_.dot(A[L].normal)<=a&&(v.push(P.x,P.y,P.z),v.push(O.x,O.y,O.z)),A[L]=null):D in A||(A[D]={index0:h[b],index1:h[_],normal:Z_.clone()})}}for(const y in A)if(A[y]){const{index0:x,index1:C}=A[y];qy.fromBufferAttribute(d,x),Jy.fromBufferAttribute(d,C),v.push(qy.x,qy.y,qy.z),v.push(Jy.x,Jy.y,Jy.z)}this.setAttribute("position",new di(v,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Ff extends _0{constructor(e){super(e),this.uuid=ml(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let r=0,o=this.holes.length;r<o;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const o=e.holes[t];this.holes.push(o.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++){const o=this.holes[t];e.holes.push(o.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const o=e.holes[t];this.holes.push(new _0().fromJSON(o))}return this}}const HG={triangulate:function(i,e,t=2){const r=e&&e.length,o=r?e[0]*t:i.length;let a=HD(i,0,o,t,!0);const l=[];if(!a||a.next===a.prev)return l;let d,c,h,m,p,A,v;if(r&&(a=XG(i,e,a,t)),i.length>80*t){d=h=i[0],c=m=i[1];for(let y=t;y<o;y+=t)p=i[y],A=i[y+1],p<d&&(d=p),A<c&&(c=A),p>h&&(h=p),A>m&&(m=A);v=Math.max(h-d,m-c),v=v!==0?32767/v:0}return w0(a,l,t,d,c,v,0),l}};function HD(i,e,t,r,o){let a,l;if(o===rH(i,e,t,r)>0)for(a=e;a<t;a+=r)l=uI(a,i[a],i[a+1],l);else for(a=t-r;a>=e;a-=r)l=uI(a,i[a],i[a+1],l);return l&&zx(l,l.next)&&(M0(l),l=l.next),l}function Wf(i,e){if(!i)return i;e||(e=i);let t=i,r;do if(r=!1,!t.steiner&&(zx(t,t.next)||Cs(t.prev,t,t.next)===0)){if(M0(t),t=e=t.prev,t===t.next)break;r=!0}else t=t.next;while(r||t!==e);return e}function w0(i,e,t,r,o,a,l){if(!i)return;!l&&a&&ZG(i,r,o,a);let d=i,c,h;for(;i.prev!==i.next;){if(c=i.prev,h=i.next,a?QG(i,r,o,a):VG(i)){e.push(c.i/t|0),e.push(i.i/t|0),e.push(h.i/t|0),M0(i),i=h.next,d=h.next;continue}if(i=h,i===d){l?l===1?(i=WG(Wf(i),e,t),w0(i,e,t,r,o,a,2)):l===2&&jG(i,e,t,r,o,a):w0(Wf(i),e,t,r,o,a,1);break}}}function VG(i){const e=i.prev,t=i,r=i.next;if(Cs(e,t,r)>=0)return!1;const o=e.x,a=t.x,l=r.x,d=e.y,c=t.y,h=r.y,m=o<a?o<l?o:l:a<l?a:l,p=d<c?d<h?d:h:c<h?c:h,A=o>a?o>l?o:l:a>l?a:l,v=d>c?d>h?d:h:c>h?c:h;let y=r.next;for(;y!==e;){if(y.x>=m&&y.x<=A&&y.y>=p&&y.y<=v&&Mm(o,d,a,c,l,h,y.x,y.y)&&Cs(y.prev,y,y.next)>=0)return!1;y=y.next}return!0}function QG(i,e,t,r){const o=i.prev,a=i,l=i.next;if(Cs(o,a,l)>=0)return!1;const d=o.x,c=a.x,h=l.x,m=o.y,p=a.y,A=l.y,v=d<c?d<h?d:h:c<h?c:h,y=m<p?m<A?m:A:p<A?p:A,x=d>c?d>h?d:h:c>h?c:h,C=m>p?m>A?m:A:p>A?p:A,g=Hw(v,y,e,t,r),b=Hw(x,C,e,t,r);let _=i.prevZ,S=i.nextZ;for(;_&&_.z>=g&&S&&S.z<=b;){if(_.x>=v&&_.x<=x&&_.y>=y&&_.y<=C&&_!==o&&_!==l&&Mm(d,m,c,p,h,A,_.x,_.y)&&Cs(_.prev,_,_.next)>=0||(_=_.prevZ,S.x>=v&&S.x<=x&&S.y>=y&&S.y<=C&&S!==o&&S!==l&&Mm(d,m,c,p,h,A,S.x,S.y)&&Cs(S.prev,S,S.next)>=0))return!1;S=S.nextZ}for(;_&&_.z>=g;){if(_.x>=v&&_.x<=x&&_.y>=y&&_.y<=C&&_!==o&&_!==l&&Mm(d,m,c,p,h,A,_.x,_.y)&&Cs(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;S&&S.z<=b;){if(S.x>=v&&S.x<=x&&S.y>=y&&S.y<=C&&S!==o&&S!==l&&Mm(d,m,c,p,h,A,S.x,S.y)&&Cs(S.prev,S,S.next)>=0)return!1;S=S.nextZ}return!0}function WG(i,e,t){let r=i;do{const o=r.prev,a=r.next.next;!zx(o,a)&&VD(o,r,r.next,a)&&C0(o,a)&&C0(a,o)&&(e.push(o.i/t|0),e.push(r.i/t|0),e.push(a.i/t|0),M0(r),M0(r.next),r=i=a),r=r.next}while(r!==i);return Wf(r)}function jG(i,e,t,r,o,a){let l=i;do{let d=l.next.next;for(;d!==l.prev;){if(l.i!==d.i&&tH(l,d)){let c=QD(l,d);l=Wf(l,l.next),c=Wf(c,c.next),w0(l,e,t,r,o,a,0),w0(c,e,t,r,o,a,0);return}d=d.next}l=l.next}while(l!==i)}function XG(i,e,t,r){const o=[];let a,l,d,c,h;for(a=0,l=e.length;a<l;a++)d=e[a]*r,c=a<l-1?e[a+1]*r:i.length,h=HD(i,d,c,r,!1),h===h.next&&(h.steiner=!0),o.push(eH(h));for(o.sort(KG),a=0;a<o.length;a++)t=YG(o[a],t);return t}function KG(i,e){return i.x-e.x}function YG(i,e){const t=qG(i,e);if(!t)return e;const r=QD(t,i);return Wf(r,r.next),Wf(t,t.next)}function qG(i,e){let t=e,r=-1/0,o;const a=i.x,l=i.y;do{if(l<=t.y&&l>=t.next.y&&t.next.y!==t.y){const A=t.x+(l-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(A<=a&&A>r&&(r=A,o=t.x<t.next.x?t:t.next,A===a))return o}t=t.next}while(t!==e);if(!o)return null;const d=o,c=o.x,h=o.y;let m=1/0,p;t=o;do a>=t.x&&t.x>=c&&a!==t.x&&Mm(l<h?a:r,l,c,h,l<h?r:a,l,t.x,t.y)&&(p=Math.abs(l-t.y)/(a-t.x),C0(t,i)&&(p<m||p===m&&(t.x>o.x||t.x===o.x&&JG(o,t)))&&(o=t,m=p)),t=t.next;while(t!==d);return o}function JG(i,e){return Cs(i.prev,i,e.prev)<0&&Cs(e.next,i,i.next)<0}function ZG(i,e,t,r){let o=i;do o.z===0&&(o.z=Hw(o.x,o.y,e,t,r)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next;while(o!==i);o.prevZ.nextZ=null,o.prevZ=null,$G(o)}function $G(i){let e,t,r,o,a,l,d,c,h=1;do{for(t=i,i=null,a=null,l=0;t;){for(l++,r=t,d=0,e=0;e<h&&(d++,r=r.nextZ,!!r);e++);for(c=h;d>0||c>0&&r;)d!==0&&(c===0||!r||t.z<=r.z)?(o=t,t=t.nextZ,d--):(o=r,r=r.nextZ,c--),a?a.nextZ=o:i=o,o.prevZ=a,a=o;t=r}a.nextZ=null,h*=2}while(l>1);return i}function Hw(i,e,t,r,o){return i=(i-t)*o|0,e=(e-r)*o|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,i|e<<1}function eH(i){let e=i,t=i;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==i);return t}function Mm(i,e,t,r,o,a,l,d){return(o-l)*(e-d)>=(i-l)*(a-d)&&(i-l)*(r-d)>=(t-l)*(e-d)&&(t-l)*(a-d)>=(o-l)*(r-d)}function tH(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!nH(i,e)&&(C0(i,e)&&C0(e,i)&&iH(i,e)&&(Cs(i.prev,i,e.prev)||Cs(i,e.prev,e))||zx(i,e)&&Cs(i.prev,i,i.next)>0&&Cs(e.prev,e,e.next)>0)}function Cs(i,e,t){return(e.y-i.y)*(t.x-e.x)-(e.x-i.x)*(t.y-e.y)}function zx(i,e){return i.x===e.x&&i.y===e.y}function VD(i,e,t,r){const o=e1(Cs(i,e,t)),a=e1(Cs(i,e,r)),l=e1(Cs(t,r,i)),d=e1(Cs(t,r,e));return!!(o!==a&&l!==d||o===0&&$y(i,t,e)||a===0&&$y(i,r,e)||l===0&&$y(t,i,r)||d===0&&$y(t,e,r))}function $y(i,e,t){return e.x<=Math.max(i.x,t.x)&&e.x>=Math.min(i.x,t.x)&&e.y<=Math.max(i.y,t.y)&&e.y>=Math.min(i.y,t.y)}function e1(i){return i>0?1:i<0?-1:0}function nH(i,e){let t=i;do{if(t.i!==i.i&&t.next.i!==i.i&&t.i!==e.i&&t.next.i!==e.i&&VD(t,t.next,i,e))return!0;t=t.next}while(t!==i);return!1}function C0(i,e){return Cs(i.prev,i,i.next)<0?Cs(i,e,i.next)>=0&&Cs(i,i.prev,e)>=0:Cs(i,e,i.prev)<0||Cs(i,i.next,e)<0}function iH(i,e){let t=i,r=!1;const o=(i.x+e.x)/2,a=(i.y+e.y)/2;do t.y>a!=t.next.y>a&&t.next.y!==t.y&&o<(t.next.x-t.x)*(a-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next;while(t!==i);return r}function QD(i,e){const t=new Vw(i.i,i.x,i.y),r=new Vw(e.i,e.x,e.y),o=i.next,a=e.prev;return i.next=e,e.prev=i,t.next=o,o.prev=t,r.next=t,t.prev=r,a.next=r,r.prev=a,r}function uI(i,e,t,r){const o=new Vw(i,e,t);return r?(o.next=r.next,o.prev=r,r.next.prev=o,r.next=o):(o.prev=o,o.next=o),o}function M0(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function Vw(i,e,t){this.i=i,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function rH(i,e,t,r){let o=0;for(let a=e,l=t-r;a<t;a+=r)o+=(i[l]-i[a])*(i[a+1]+i[l+1]),l=a;return o}class lu{static area(e){const t=e.length;let r=0;for(let o=t-1,a=0;a<t;o=a++)r+=e[o].x*e[a].y-e[a].x*e[o].y;return r*.5}static isClockWise(e){return lu.area(e)<0}static triangulateShape(e,t){const r=[],o=[],a=[];hI(e),dI(r,e);let l=e.length;t.forEach(hI);for(let c=0;c<t.length;c++)o.push(l),l+=t[c].length,dI(r,t[c]);const d=HG.triangulate(r,o);for(let c=0;c<d.length;c+=3)a.push(d.slice(c,c+3));return a}}function hI(i){const e=i.length;e>2&&i[e-1].equals(i[0])&&i.pop()}function dI(i,e){for(let t=0;t<e.length;t++)i.push(e[t].x),i.push(e[t].y)}class W0 extends Zi{constructor(e=new Ff([new Yt(.5,.5),new Yt(-.5,.5),new Yt(-.5,-.5),new Yt(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const r=this,o=[],a=[];for(let d=0,c=e.length;d<c;d++){const h=e[d];l(h)}this.setAttribute("position",new di(o,3)),this.setAttribute("uv",new di(a,2)),this.computeVertexNormals();function l(d){const c=[],h=t.curveSegments!==void 0?t.curveSegments:12,m=t.steps!==void 0?t.steps:1,p=t.depth!==void 0?t.depth:1;let A=t.bevelEnabled!==void 0?t.bevelEnabled:!0,v=t.bevelThickness!==void 0?t.bevelThickness:.2,y=t.bevelSize!==void 0?t.bevelSize:v-.1,x=t.bevelOffset!==void 0?t.bevelOffset:0,C=t.bevelSegments!==void 0?t.bevelSegments:3;const g=t.extrudePath,b=t.UVGenerator!==void 0?t.UVGenerator:sH;let _,S=!1,R,P,O,D;g&&(_=g.getSpacedPoints(m),S=!0,A=!1,R=g.computeFrenetFrames(m,!1),P=new Ue,O=new Ue,D=new Ue),A||(C=0,v=0,y=0,x=0);const L=d.extractPoints(h);let N=L.shape;const H=L.holes;if(!lu.isClockWise(N)){N=N.reverse();for(let ct=0,ut=H.length;ct<ut;ct++){const Ct=H[ct];lu.isClockWise(Ct)&&(H[ct]=Ct.reverse())}}const K=lu.triangulateShape(N,H),se=N;for(let ct=0,ut=H.length;ct<ut;ct++){const Ct=H[ct];N=N.concat(Ct)}function ae(ct,ut,Ct){return ut||console.error("THREE.ExtrudeGeometry: vec does not exist"),ct.clone().addScaledVector(ut,Ct)}const ee=N.length,ne=K.length;function X(ct,ut,Ct){let qt,Ft,un;const fn=ct.x-ut.x,An=ct.y-ut.y,Bn=Ct.x-ct.x,ci=Ct.y-ct.y,ze=fn*fn+An*An,Pe=fn*ci-An*Bn;if(Math.abs(Pe)>Number.EPSILON){const qe=Math.sqrt(ze),ye=Math.sqrt(Bn*Bn+ci*ci),me=ut.x-An/qe,Re=ut.y+fn/qe,Se=Ct.x-ci/ye,Be=Ct.y+Bn/ye,Ee=((Se-me)*ci-(Be-Re)*Bn)/(fn*ci-An*Bn);qt=me+fn*Ee-ct.x,Ft=Re+An*Ee-ct.y;const Xe=qt*qt+Ft*Ft;if(Xe<=2)return new Yt(qt,Ft);un=Math.sqrt(Xe/2)}else{let qe=!1;fn>Number.EPSILON?Bn>Number.EPSILON&&(qe=!0):fn<-Number.EPSILON?Bn<-Number.EPSILON&&(qe=!0):Math.sign(An)===Math.sign(ci)&&(qe=!0),qe?(qt=-An,Ft=fn,un=Math.sqrt(ze)):(qt=fn,Ft=An,un=Math.sqrt(ze/2))}return new Yt(qt/un,Ft/un)}const W=[];for(let ct=0,ut=se.length,Ct=ut-1,qt=ct+1;ct<ut;ct++,Ct++,qt++)Ct===ut&&(Ct=0),qt===ut&&(qt=0),W[ct]=X(se[ct],se[Ct],se[qt]);const ce=[];let he,xe=W.concat();for(let ct=0,ut=H.length;ct<ut;ct++){const Ct=H[ct];he=[];for(let qt=0,Ft=Ct.length,un=Ft-1,fn=qt+1;qt<Ft;qt++,un++,fn++)un===Ft&&(un=0),fn===Ft&&(fn=0),he[qt]=X(Ct[qt],Ct[un],Ct[fn]);ce.push(he),xe=xe.concat(he)}for(let ct=0;ct<C;ct++){const ut=ct/C,Ct=v*Math.cos(ut*Math.PI/2),qt=y*Math.sin(ut*Math.PI/2)+x;for(let Ft=0,un=se.length;Ft<un;Ft++){const fn=ae(se[Ft],W[Ft],qt);He(fn.x,fn.y,-Ct)}for(let Ft=0,un=H.length;Ft<un;Ft++){const fn=H[Ft];he=ce[Ft];for(let An=0,Bn=fn.length;An<Bn;An++){const ci=ae(fn[An],he[An],qt);He(ci.x,ci.y,-Ct)}}}const ve=y+x;for(let ct=0;ct<ee;ct++){const ut=A?ae(N[ct],xe[ct],ve):N[ct];S?(O.copy(R.normals[0]).multiplyScalar(ut.x),P.copy(R.binormals[0]).multiplyScalar(ut.y),D.copy(_[0]).add(O).add(P),He(D.x,D.y,D.z)):He(ut.x,ut.y,0)}for(let ct=1;ct<=m;ct++)for(let ut=0;ut<ee;ut++){const Ct=A?ae(N[ut],xe[ut],ve):N[ut];S?(O.copy(R.normals[ct]).multiplyScalar(Ct.x),P.copy(R.binormals[ct]).multiplyScalar(Ct.y),D.copy(_[ct]).add(O).add(P),He(D.x,D.y,D.z)):He(Ct.x,Ct.y,p/m*ct)}for(let ct=C-1;ct>=0;ct--){const ut=ct/C,Ct=v*Math.cos(ut*Math.PI/2),qt=y*Math.sin(ut*Math.PI/2)+x;for(let Ft=0,un=se.length;Ft<un;Ft++){const fn=ae(se[Ft],W[Ft],qt);He(fn.x,fn.y,p+Ct)}for(let Ft=0,un=H.length;Ft<un;Ft++){const fn=H[Ft];he=ce[Ft];for(let An=0,Bn=fn.length;An<Bn;An++){const ci=ae(fn[An],he[An],qt);S?He(ci.x,ci.y+_[m-1].y,_[m-1].x+Ct):He(ci.x,ci.y,p+Ct)}}}Fe(),je();function Fe(){const ct=o.length/3;if(A){let ut=0,Ct=ee*ut;for(let qt=0;qt<ne;qt++){const Ft=K[qt];Ot(Ft[2]+Ct,Ft[1]+Ct,Ft[0]+Ct)}ut=m+C*2,Ct=ee*ut;for(let qt=0;qt<ne;qt++){const Ft=K[qt];Ot(Ft[0]+Ct,Ft[1]+Ct,Ft[2]+Ct)}}else{for(let ut=0;ut<ne;ut++){const Ct=K[ut];Ot(Ct[2],Ct[1],Ct[0])}for(let ut=0;ut<ne;ut++){const Ct=K[ut];Ot(Ct[0]+ee*m,Ct[1]+ee*m,Ct[2]+ee*m)}}r.addGroup(ct,o.length/3-ct,0)}function je(){const ct=o.length/3;let ut=0;rt(se,ut),ut+=se.length;for(let Ct=0,qt=H.length;Ct<qt;Ct++){const Ft=H[Ct];rt(Ft,ut),ut+=Ft.length}r.addGroup(ct,o.length/3-ct,1)}function rt(ct,ut){let Ct=ct.length;for(;--Ct>=0;){const qt=Ct;let Ft=Ct-1;Ft<0&&(Ft=ct.length-1);for(let un=0,fn=m+C*2;un<fn;un++){const An=ee*un,Bn=ee*(un+1),ci=ut+qt+An,ze=ut+Ft+An,Pe=ut+Ft+Bn,qe=ut+qt+Bn;xt(ci,ze,Pe,qe)}}}function He(ct,ut,Ct){c.push(ct),c.push(ut),c.push(Ct)}function Ot(ct,ut,Ct){gt(ct),gt(ut),gt(Ct);const qt=o.length/3,Ft=b.generateTopUV(r,o,qt-3,qt-2,qt-1);It(Ft[0]),It(Ft[1]),It(Ft[2])}function xt(ct,ut,Ct,qt){gt(ct),gt(ut),gt(qt),gt(ut),gt(Ct),gt(qt);const Ft=o.length/3,un=b.generateSideWallUV(r,o,Ft-6,Ft-3,Ft-2,Ft-1);It(un[0]),It(un[1]),It(un[3]),It(un[1]),It(un[2]),It(un[3])}function gt(ct){o.push(c[ct*3+0]),o.push(c[ct*3+1]),o.push(c[ct*3+2])}function It(ct){a.push(ct.x),a.push(ct.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,r=this.parameters.options;return oH(t,r,e)}static fromJSON(e,t){const r=[];for(let a=0,l=e.shapes.length;a<l;a++){const d=t[e.shapes[a]];r.push(d)}const o=e.options.extrudePath;return o!==void 0&&(e.options.extrudePath=new xM[o.type]().fromJSON(o)),new W0(r,e.options)}}const sH={generateTopUV:function(i,e,t,r,o){const a=e[t*3],l=e[t*3+1],d=e[r*3],c=e[r*3+1],h=e[o*3],m=e[o*3+1];return[new Yt(a,l),new Yt(d,c),new Yt(h,m)]},generateSideWallUV:function(i,e,t,r,o,a){const l=e[t*3],d=e[t*3+1],c=e[t*3+2],h=e[r*3],m=e[r*3+1],p=e[r*3+2],A=e[o*3],v=e[o*3+1],y=e[o*3+2],x=e[a*3],C=e[a*3+1],g=e[a*3+2];return Math.abs(d-m)<Math.abs(l-h)?[new Yt(l,1-c),new Yt(h,1-p),new Yt(A,1-y),new Yt(x,1-g)]:[new Yt(d,1-c),new Yt(m,1-p),new Yt(v,1-y),new Yt(C,1-g)]}};function oH(i,e,t){if(t.shapes=[],Array.isArray(i))for(let r=0,o=i.length;r<o;r++){const a=i[r];t.shapes.push(a.uuid)}else t.shapes.push(i.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class j0 extends th{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,o=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],a=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(o,a,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new j0(e.radius,e.detail)}}class lg extends th{constructor(e=1,t=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],o=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,o,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new lg(e.radius,e.detail)}}class X0 extends Zi{constructor(e=.5,t=1,r=32,o=1,a=0,l=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:o,thetaStart:a,thetaLength:l},r=Math.max(3,r),o=Math.max(1,o);const d=[],c=[],h=[],m=[];let p=e;const A=(t-e)/o,v=new Ue,y=new Yt;for(let x=0;x<=o;x++){for(let C=0;C<=r;C++){const g=a+C/r*l;v.x=p*Math.cos(g),v.y=p*Math.sin(g),c.push(v.x,v.y,v.z),h.push(0,0,1),y.x=(v.x/t+1)/2,y.y=(v.y/t+1)/2,m.push(y.x,y.y)}p+=A}for(let x=0;x<o;x++){const C=x*(r+1);for(let g=0;g<r;g++){const b=g+C,_=b,S=b+r+1,R=b+r+2,P=b+1;d.push(_,S,P),d.push(S,R,P)}}this.setIndex(d),this.setAttribute("position",new di(c,3)),this.setAttribute("normal",new di(h,3)),this.setAttribute("uv",new di(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new X0(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class K0 extends Zi{constructor(e=new Ff([new Yt(0,.5),new Yt(-.5,-.5),new Yt(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const r=[],o=[],a=[],l=[];let d=0,c=0;if(Array.isArray(e)===!1)h(e);else for(let m=0;m<e.length;m++)h(e[m]),this.addGroup(d,c,m),d+=c,c=0;this.setIndex(r),this.setAttribute("position",new di(o,3)),this.setAttribute("normal",new di(a,3)),this.setAttribute("uv",new di(l,2));function h(m){const p=o.length/3,A=m.extractPoints(t);let v=A.shape;const y=A.holes;lu.isClockWise(v)===!1&&(v=v.reverse());for(let C=0,g=y.length;C<g;C++){const b=y[C];lu.isClockWise(b)===!0&&(y[C]=b.reverse())}const x=lu.triangulateShape(v,y);for(let C=0,g=y.length;C<g;C++){const b=y[C];v=v.concat(b)}for(let C=0,g=v.length;C<g;C++){const b=v[C];o.push(b.x,b.y,0),a.push(0,0,1),l.push(b.x,b.y)}for(let C=0,g=x.length;C<g;C++){const b=x[C],_=b[0]+p,S=b[1]+p,R=b[2]+p;r.push(_,S,R),c+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return aH(t,e)}static fromJSON(e,t){const r=[];for(let o=0,a=e.shapes.length;o<a;o++){const l=t[e.shapes[o]];r.push(l)}return new K0(r,e.curveSegments)}}function aH(i,e){if(e.shapes=[],Array.isArray(i))for(let t=0,r=i.length;t<r;t++){const o=i[t];e.shapes.push(o.uuid)}else e.shapes.push(i.uuid);return e}class cg extends Zi{constructor(e=1,t=32,r=16,o=0,a=Math.PI*2,l=0,d=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:o,phiLength:a,thetaStart:l,thetaLength:d},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));const c=Math.min(l+d,Math.PI);let h=0;const m=[],p=new Ue,A=new Ue,v=[],y=[],x=[],C=[];for(let g=0;g<=r;g++){const b=[],_=g/r;let S=0;g===0&&l===0?S=.5/t:g===r&&c===Math.PI&&(S=-.5/t);for(let R=0;R<=t;R++){const P=R/t;p.x=-e*Math.cos(o+P*a)*Math.sin(l+_*d),p.y=e*Math.cos(l+_*d),p.z=e*Math.sin(o+P*a)*Math.sin(l+_*d),y.push(p.x,p.y,p.z),A.copy(p).normalize(),x.push(A.x,A.y,A.z),C.push(P+S,1-_),b.push(h++)}m.push(b)}for(let g=0;g<r;g++)for(let b=0;b<t;b++){const _=m[g][b+1],S=m[g][b],R=m[g+1][b],P=m[g+1][b+1];(g!==0||l>0)&&v.push(_,S,P),(g!==r-1||c<Math.PI)&&v.push(S,R,P)}this.setIndex(v),this.setAttribute("position",new di(y,3)),this.setAttribute("normal",new di(x,3)),this.setAttribute("uv",new di(C,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new cg(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Y0 extends th{constructor(e=1,t=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],o=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,o,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Y0(e.radius,e.detail)}}class q0 extends Zi{constructor(e=1,t=.4,r=12,o=48,a=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:o,arc:a},r=Math.floor(r),o=Math.floor(o);const l=[],d=[],c=[],h=[],m=new Ue,p=new Ue,A=new Ue;for(let v=0;v<=r;v++)for(let y=0;y<=o;y++){const x=y/o*a,C=v/r*Math.PI*2;p.x=(e+t*Math.cos(C))*Math.cos(x),p.y=(e+t*Math.cos(C))*Math.sin(x),p.z=t*Math.sin(C),d.push(p.x,p.y,p.z),m.x=e*Math.cos(x),m.y=e*Math.sin(x),A.subVectors(p,m).normalize(),c.push(A.x,A.y,A.z),h.push(y/o),h.push(v/r)}for(let v=1;v<=r;v++)for(let y=1;y<=o;y++){const x=(o+1)*v+y-1,C=(o+1)*(v-1)+y-1,g=(o+1)*(v-1)+y,b=(o+1)*v+y;l.push(x,C,b),l.push(C,g,b)}this.setIndex(l),this.setAttribute("position",new di(d,3)),this.setAttribute("normal",new di(c,3)),this.setAttribute("uv",new di(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new q0(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class J0 extends Zi{constructor(e=1,t=.4,r=64,o=8,a=2,l=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:o,p:a,q:l},r=Math.floor(r),o=Math.floor(o);const d=[],c=[],h=[],m=[],p=new Ue,A=new Ue,v=new Ue,y=new Ue,x=new Ue,C=new Ue,g=new Ue;for(let _=0;_<=r;++_){const S=_/r*a*Math.PI*2;b(S,a,l,e,v),b(S+.01,a,l,e,y),C.subVectors(y,v),g.addVectors(y,v),x.crossVectors(C,g),g.crossVectors(x,C),x.normalize(),g.normalize();for(let R=0;R<=o;++R){const P=R/o*Math.PI*2,O=-t*Math.cos(P),D=t*Math.sin(P);p.x=v.x+(O*g.x+D*x.x),p.y=v.y+(O*g.y+D*x.y),p.z=v.z+(O*g.z+D*x.z),c.push(p.x,p.y,p.z),A.subVectors(p,v).normalize(),h.push(A.x,A.y,A.z),m.push(_/r),m.push(R/o)}}for(let _=1;_<=r;_++)for(let S=1;S<=o;S++){const R=(o+1)*(_-1)+(S-1),P=(o+1)*_+(S-1),O=(o+1)*_+S,D=(o+1)*(_-1)+S;d.push(R,P,D),d.push(P,O,D)}this.setIndex(d),this.setAttribute("position",new di(c,3)),this.setAttribute("normal",new di(h,3)),this.setAttribute("uv",new di(m,2));function b(_,S,R,P,O){const D=Math.cos(_),L=Math.sin(_),N=R/S*_,H=Math.cos(N);O.x=P*(2+H)*.5*D,O.y=P*(2+H)*L*.5,O.z=P*Math.sin(N)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new J0(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Z0 extends Zi{constructor(e=new vM(new Ue(-1,-1,0),new Ue(-1,1,0),new Ue(1,1,0)),t=64,r=1,o=8,a=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:o,closed:a};const l=e.computeFrenetFrames(t,a);this.tangents=l.tangents,this.normals=l.normals,this.binormals=l.binormals;const d=new Ue,c=new Ue,h=new Yt;let m=new Ue;const p=[],A=[],v=[],y=[];x(),this.setIndex(y),this.setAttribute("position",new di(p,3)),this.setAttribute("normal",new di(A,3)),this.setAttribute("uv",new di(v,2));function x(){for(let _=0;_<t;_++)C(_);C(a===!1?t:0),b(),g()}function C(_){m=e.getPointAt(_/t,m);const S=l.normals[_],R=l.binormals[_];for(let P=0;P<=o;P++){const O=P/o*Math.PI*2,D=Math.sin(O),L=-Math.cos(O);c.x=L*S.x+D*R.x,c.y=L*S.y+D*R.y,c.z=L*S.z+D*R.z,c.normalize(),A.push(c.x,c.y,c.z),d.x=m.x+r*c.x,d.y=m.y+r*c.y,d.z=m.z+r*c.z,p.push(d.x,d.y,d.z)}}function g(){for(let _=1;_<=t;_++)for(let S=1;S<=o;S++){const R=(o+1)*(_-1)+(S-1),P=(o+1)*_+(S-1),O=(o+1)*_+S,D=(o+1)*(_-1)+S;y.push(R,P,D),y.push(P,O,D)}}function b(){for(let _=0;_<=t;_++)for(let S=0;S<=o;S++)h.x=_/t,h.y=S/o,v.push(h.x,h.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Z0(new xM[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class WD extends Zi{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],r=new Set,o=new Ue,a=new Ue;if(e.index!==null){const l=e.attributes.position,d=e.index;let c=e.groups;c.length===0&&(c=[{start:0,count:d.count,materialIndex:0}]);for(let h=0,m=c.length;h<m;++h){const p=c[h],A=p.start,v=p.count;for(let y=A,x=A+v;y<x;y+=3)for(let C=0;C<3;C++){const g=d.getX(y+C),b=d.getX(y+(C+1)%3);o.fromBufferAttribute(l,g),a.fromBufferAttribute(l,b),fI(o,a,r)===!0&&(t.push(o.x,o.y,o.z),t.push(a.x,a.y,a.z))}}}else{const l=e.attributes.position;for(let d=0,c=l.count/3;d<c;d++)for(let h=0;h<3;h++){const m=3*d+h,p=3*d+(h+1)%3;o.fromBufferAttribute(l,m),a.fromBufferAttribute(l,p),fI(o,a,r)===!0&&(t.push(o.x,o.y,o.z),t.push(a.x,a.y,a.z))}}this.setAttribute("position",new di(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function fI(i,e,t){const r=`${i.x},${i.y},${i.z}-${e.x},${e.y},${e.z}`,o=`${e.x},${e.y},${e.z}-${i.x},${i.y},${i.z}`;return t.has(r)===!0||t.has(o)===!0?!1:(t.add(r),t.add(o),!0)}var pI=Object.freeze({__proto__:null,BoxGeometry:hd,CapsuleGeometry:G0,CircleGeometry:H0,ConeGeometry:V0,CylinderGeometry:qf,DodecahedronGeometry:Q0,EdgesGeometry:GD,ExtrudeGeometry:W0,IcosahedronGeometry:j0,LatheGeometry:ag,OctahedronGeometry:lg,PlaneGeometry:sg,PolyhedronGeometry:th,RingGeometry:X0,ShapeGeometry:K0,SphereGeometry:cg,TetrahedronGeometry:Y0,TorusGeometry:q0,TorusKnotGeometry:J0,TubeGeometry:Z0,WireframeGeometry:WD});class jD extends oo{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Rn(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class XD extends hu{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class su extends oo{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Rn(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Rn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ud,this.normalScale=new Yt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class nh extends su{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Yt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Os(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Rn(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Rn(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Rn(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class KD extends oo{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Rn(16777215),this.specular=new Rn(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Rn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ud,this.normalScale=new Yt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=P0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class YD extends oo{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Rn(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Rn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ud,this.normalScale=new Yt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class qD extends oo{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ud,this.normalScale=new Yt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class JD extends oo{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Rn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Rn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ud,this.normalScale=new Yt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=P0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class ZD extends oo{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Rn(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ud,this.normalScale=new Yt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class $D extends ca{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Ll(i,e,t){return EM(i)?new i.constructor(i.subarray(e,t!==void 0?t:i.length)):i.slice(e,t)}function Tf(i,e,t){return!i||!t&&i.constructor===e?i:typeof e.BYTES_PER_ELEMENT=="number"?new e(i):Array.prototype.slice.call(i)}function EM(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function eP(i){function e(o,a){return i[o]-i[a]}const t=i.length,r=new Array(t);for(let o=0;o!==t;++o)r[o]=o;return r.sort(e),r}function Qw(i,e,t){const r=i.length,o=new i.constructor(r);for(let a=0,l=0;l!==r;++a){const d=t[a]*e;for(let c=0;c!==e;++c)o[l++]=i[d+c]}return o}function _M(i,e,t,r){let o=1,a=i[0];for(;a!==void 0&&a[r]===void 0;)a=i[o++];if(a===void 0)return;let l=a[r];if(l!==void 0)if(Array.isArray(l))do l=a[r],l!==void 0&&(e.push(a.time),t.push.apply(t,l)),a=i[o++];while(a!==void 0);else if(l.toArray!==void 0)do l=a[r],l!==void 0&&(e.push(a.time),l.toArray(t,t.length)),a=i[o++];while(a!==void 0);else do l=a[r],l!==void 0&&(e.push(a.time),t.push(l)),a=i[o++];while(a!==void 0)}function lH(i,e,t,r,o=30){const a=i.clone();a.name=e;const l=[];for(let c=0;c<a.tracks.length;++c){const h=a.tracks[c],m=h.getValueSize(),p=[],A=[];for(let v=0;v<h.times.length;++v){const y=h.times[v]*o;if(!(y<t||y>=r)){p.push(h.times[v]);for(let x=0;x<m;++x)A.push(h.values[v*m+x])}}p.length!==0&&(h.times=Tf(p,h.times.constructor),h.values=Tf(A,h.values.constructor),l.push(h))}a.tracks=l;let d=1/0;for(let c=0;c<a.tracks.length;++c)d>a.tracks[c].times[0]&&(d=a.tracks[c].times[0]);for(let c=0;c<a.tracks.length;++c)a.tracks[c].shift(-1*d);return a.resetDuration(),a}function cH(i,e=0,t=i,r=30){r<=0&&(r=30);const o=t.tracks.length,a=e/r;for(let l=0;l<o;++l){const d=t.tracks[l],c=d.ValueTypeName;if(c==="bool"||c==="string")continue;const h=i.tracks.find(function(g){return g.name===d.name&&g.ValueTypeName===c});if(h===void 0)continue;let m=0;const p=d.getValueSize();d.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(m=p/3);let A=0;const v=h.getValueSize();h.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(A=v/3);const y=d.times.length-1;let x;if(a<=d.times[0]){const g=m,b=p-m;x=Ll(d.values,g,b)}else if(a>=d.times[y]){const g=y*p+m,b=g+p-m;x=Ll(d.values,g,b)}else{const g=d.createInterpolant(),b=m,_=p-m;g.evaluate(a),x=Ll(g.resultBuffer,b,_)}c==="quaternion"&&new Oo().fromArray(x).normalize().conjugate().toArray(x);const C=h.times.length;for(let g=0;g<C;++g){const b=g*v+A;if(c==="quaternion")Oo.multiplyQuaternionsFlat(h.values,b,x,0,h.values,b);else{const _=v-A*2;for(let S=0;S<_;++S)h.values[b+S]-=x[S]}}}return i.blendMode=JC,i}const uH={arraySlice:Ll,convertArray:Tf,isTypedArray:EM,getKeyframeOrder:eP,sortedArray:Qw,flattenJSON:_M,subclip:lH,makeClipAdditive:cH};class ug{constructor(e,t,r,o){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=o!==void 0?o:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,o=t[r],a=t[r-1];e:{t:{let l;n:{i:if(!(e<o)){for(let d=r+2;;){if(o===void 0){if(e<a)break i;return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===d)break;if(a=o,o=t[++r],e<o)break t}l=t.length;break n}if(!(e>=a)){const d=t[1];e<d&&(r=2,a=d);for(let c=r-2;;){if(a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===c)break;if(o=a,a=t[--r-1],e>=a)break t}l=r,r=0;break n}break e}for(;r<l;){const d=r+l>>>1;e<t[d]?l=d:r=d+1}if(o=t[r],a=t[r-1],a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(o===void 0)return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,a,o)}return this.interpolate_(r,a,e,o)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,o=this.valueSize,a=e*o;for(let l=0;l!==o;++l)t[l]=r[a+l];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class tP extends ug{constructor(e,t,r,o){super(e,t,r,o),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Mf,endingEnd:Mf}}intervalChanged_(e,t,r){const o=this.parameterPositions;let a=e-2,l=e+1,d=o[a],c=o[l];if(d===void 0)switch(this.getSettings_().endingStart){case bf:a=e,d=2*t-r;break;case y0:a=o.length-2,d=t+o[a]-o[a+1];break;default:a=e,d=r}if(c===void 0)switch(this.getSettings_().endingEnd){case bf:l=e,c=2*r-t;break;case y0:l=1,c=r+o[1]-o[0];break;default:l=e-1,c=t}const h=(r-t)*.5,m=this.valueSize;this._weightPrev=h/(t-d),this._weightNext=h/(c-r),this._offsetPrev=a*m,this._offsetNext=l*m}interpolate_(e,t,r,o){const a=this.resultBuffer,l=this.sampleValues,d=this.valueSize,c=e*d,h=c-d,m=this._offsetPrev,p=this._offsetNext,A=this._weightPrev,v=this._weightNext,y=(r-t)/(o-t),x=y*y,C=x*y,g=-A*C+2*A*x-A*y,b=(1+A)*C+(-1.5-2*A)*x+(-.5+A)*y+1,_=(-1-v)*C+(1.5+v)*x+.5*y,S=v*C-v*x;for(let R=0;R!==d;++R)a[R]=g*l[m+R]+b*l[h+R]+_*l[c+R]+S*l[p+R];return a}}class wM extends ug{constructor(e,t,r,o){super(e,t,r,o)}interpolate_(e,t,r,o){const a=this.resultBuffer,l=this.sampleValues,d=this.valueSize,c=e*d,h=c-d,m=(r-t)/(o-t),p=1-m;for(let A=0;A!==d;++A)a[A]=l[h+A]*p+l[c+A]*m;return a}}class nP extends ug{constructor(e,t,r,o){super(e,t,r,o)}interpolate_(e){return this.copySampleValue_(e-1)}}class bc{constructor(e,t,r,o){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Tf(t,this.TimeBufferType),this.values=Tf(r,this.ValueBufferType),this.setInterpolation(o||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:Tf(e.times,Array),values:Tf(e.values,Array)};const o=e.getInterpolation();o!==e.DefaultInterpolation&&(r.interpolation=o)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new nP(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new wM(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new tP(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Wm:t=this.InterpolantFactoryMethodDiscrete;break;case Qf:t=this.InterpolantFactoryMethodLinear;break;case S1:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Wm;case this.InterpolantFactoryMethodLinear:return Qf;case this.InterpolantFactoryMethodSmooth:return S1}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let r=0,o=t.length;r!==o;++r)t[r]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let r=0,o=t.length;r!==o;++r)t[r]*=e}return this}trim(e,t){const r=this.times,o=r.length;let a=0,l=o-1;for(;a!==o&&r[a]<e;)++a;for(;l!==-1&&r[l]>t;)--l;if(++l,a!==0||l!==o){a>=l&&(l=Math.max(l,1),a=l-1);const d=this.getValueSize();this.times=Ll(r,a,l),this.values=Ll(this.values,a*d,l*d)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,o=this.values,a=r.length;a===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let l=null;for(let d=0;d!==a;d++){const c=r[d];if(typeof c=="number"&&isNaN(c)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,d,c),e=!1;break}if(l!==null&&l>c){console.error("THREE.KeyframeTrack: Out of order keys.",this,d,c,l),e=!1;break}l=c}if(o!==void 0&&EM(o))for(let d=0,c=o.length;d!==c;++d){const h=o[d];if(isNaN(h)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,d,h),e=!1;break}}return e}optimize(){const e=Ll(this.times),t=Ll(this.values),r=this.getValueSize(),o=this.getInterpolation()===S1,a=e.length-1;let l=1;for(let d=1;d<a;++d){let c=!1;const h=e[d],m=e[d+1];if(h!==m&&(d!==1||h!==e[0]))if(o)c=!0;else{const p=d*r,A=p-r,v=p+r;for(let y=0;y!==r;++y){const x=t[p+y];if(x!==t[A+y]||x!==t[v+y]){c=!0;break}}}if(c){if(d!==l){e[l]=e[d];const p=d*r,A=l*r;for(let v=0;v!==r;++v)t[A+v]=t[p+v]}++l}}if(a>0){e[l]=e[a];for(let d=a*r,c=l*r,h=0;h!==r;++h)t[c+h]=t[d+h];++l}return l!==e.length?(this.times=Ll(e,0,l),this.values=Ll(t,0,l*r)):(this.times=e,this.values=t),this}clone(){const e=Ll(this.times,0),t=Ll(this.values,0),r=this.constructor,o=new r(this.name,e,t);return o.createInterpolant=this.createInterpolant,o}}bc.prototype.TimeBufferType=Float32Array;bc.prototype.ValueBufferType=Float32Array;bc.prototype.DefaultInterpolation=Qf;class Jf extends bc{}Jf.prototype.ValueTypeName="bool";Jf.prototype.ValueBufferType=Array;Jf.prototype.DefaultInterpolation=Wm;Jf.prototype.InterpolantFactoryMethodLinear=void 0;Jf.prototype.InterpolantFactoryMethodSmooth=void 0;class CM extends bc{}CM.prototype.ValueTypeName="color";class qm extends bc{}qm.prototype.ValueTypeName="number";class iP extends ug{constructor(e,t,r,o){super(e,t,r,o)}interpolate_(e,t,r,o){const a=this.resultBuffer,l=this.sampleValues,d=this.valueSize,c=(r-t)/(o-t);let h=e*d;for(let m=h+d;h!==m;h+=4)Oo.slerpFlat(a,0,l,h-d,l,h,c);return a}}class od extends bc{InterpolantFactoryMethodLinear(e){return new iP(this.times,this.values,this.getValueSize(),e)}}od.prototype.ValueTypeName="quaternion";od.prototype.DefaultInterpolation=Qf;od.prototype.InterpolantFactoryMethodSmooth=void 0;class Zf extends bc{}Zf.prototype.ValueTypeName="string";Zf.prototype.ValueBufferType=Array;Zf.prototype.DefaultInterpolation=Wm;Zf.prototype.InterpolantFactoryMethodLinear=void 0;Zf.prototype.InterpolantFactoryMethodSmooth=void 0;class Jm extends bc{}Jm.prototype.ValueTypeName="vector";class Zm{constructor(e,t=-1,r,o=Rx){this.name=e,this.tracks=r,this.duration=t,this.blendMode=o,this.uuid=ml(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],r=e.tracks,o=1/(e.fps||1);for(let l=0,d=r.length;l!==d;++l)t.push(dH(r[l]).scale(o));const a=new this(e.name,e.duration,t,e.blendMode);return a.uuid=e.uuid,a}static toJSON(e){const t=[],r=e.tracks,o={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let a=0,l=r.length;a!==l;++a)t.push(bc.toJSON(r[a]));return o}static CreateFromMorphTargetSequence(e,t,r,o){const a=t.length,l=[];for(let d=0;d<a;d++){let c=[],h=[];c.push((d+a-1)%a,d,(d+1)%a),h.push(0,1,0);const m=eP(c);c=Qw(c,1,m),h=Qw(h,1,m),!o&&c[0]===0&&(c.push(a),h.push(h[0])),l.push(new qm(".morphTargetInfluences["+t[d].name+"]",c,h).scale(1/r))}return new this(e,-1,l)}static findByName(e,t){let r=e;if(!Array.isArray(e)){const o=e;r=o.geometry&&o.geometry.animations||o.animations}for(let o=0;o<r.length;o++)if(r[o].name===t)return r[o];return null}static CreateClipsFromMorphTargetSequences(e,t,r){const o={},a=/^([\w-]*?)([\d]+)$/;for(let d=0,c=e.length;d<c;d++){const h=e[d],m=h.name.match(a);if(m&&m.length>1){const p=m[1];let A=o[p];A||(o[p]=A=[]),A.push(h)}}const l=[];for(const d in o)l.push(this.CreateFromMorphTargetSequence(d,o[d],t,r));return l}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(p,A,v,y,x){if(v.length!==0){const C=[],g=[];_M(v,C,g,y),C.length!==0&&x.push(new p(A,C,g))}},o=[],a=e.name||"default",l=e.fps||30,d=e.blendMode;let c=e.length||-1;const h=e.hierarchy||[];for(let p=0;p<h.length;p++){const A=h[p].keys;if(!(!A||A.length===0))if(A[0].morphTargets){const v={};let y;for(y=0;y<A.length;y++)if(A[y].morphTargets)for(let x=0;x<A[y].morphTargets.length;x++)v[A[y].morphTargets[x]]=-1;for(const x in v){const C=[],g=[];for(let b=0;b!==A[y].morphTargets.length;++b){const _=A[y];C.push(_.time),g.push(_.morphTarget===x?1:0)}o.push(new qm(".morphTargetInfluence["+x+"]",C,g))}c=v.length*l}else{const v=".bones["+t[p].name+"]";r(Jm,v+".position",A,"pos",o),r(od,v+".quaternion",A,"rot",o),r(Jm,v+".scale",A,"scl",o)}}return o.length===0?null:new this(a,c,o,d)}resetDuration(){const e=this.tracks;let t=0;for(let r=0,o=e.length;r!==o;++r){const a=this.tracks[r];t=Math.max(t,a.times[a.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function hH(i){switch(i.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return qm;case"vector":case"vector2":case"vector3":case"vector4":return Jm;case"color":return CM;case"quaternion":return od;case"bool":case"boolean":return Jf;case"string":return Zf}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+i)}function dH(i){if(i.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=hH(i.type);if(i.times===void 0){const t=[],r=[];_M(i.keys,t,r,"value"),i.times=t,i.values=r}return e.parse!==void 0?e.parse(i):new e(i.name,i.times,i.values,i.interpolation)}const jf={enabled:!1,files:{},add:function(i,e){this.enabled!==!1&&(this.files[i]=e)},get:function(i){if(this.enabled!==!1)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};class MM{constructor(e,t,r){const o=this;let a=!1,l=0,d=0,c;const h=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(m){d++,a===!1&&o.onStart!==void 0&&o.onStart(m,l,d),a=!0},this.itemEnd=function(m){l++,o.onProgress!==void 0&&o.onProgress(m,l,d),l===d&&(a=!1,o.onLoad!==void 0&&o.onLoad())},this.itemError=function(m){o.onError!==void 0&&o.onError(m)},this.resolveURL=function(m){return c?c(m):m},this.setURLModifier=function(m){return c=m,this},this.addHandler=function(m,p){return h.push(m,p),this},this.removeHandler=function(m){const p=h.indexOf(m);return p!==-1&&h.splice(p,2),this},this.getHandler=function(m){for(let p=0,A=h.length;p<A;p+=2){const v=h[p],y=h[p+1];if(v.global&&(v.lastIndex=0),v.test(m))return y}return null}}}const rP=new MM;class Ya{constructor(e){this.manager=e!==void 0?e:rP,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(o,a){r.load(e,o,t,a)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const Fu={};class fH extends Error{constructor(e,t){super(e),this.response=t}}class Ec extends Ya{constructor(e){super(e)}load(e,t,r,o){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=jf.get(e);if(a!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(a),this.manager.itemEnd(e)},0),a;if(Fu[e]!==void 0){Fu[e].push({onLoad:t,onProgress:r,onError:o});return}Fu[e]=[],Fu[e].push({onLoad:t,onProgress:r,onError:o});const l=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),d=this.mimeType,c=this.responseType;fetch(l).then(h=>{if(h.status===200||h.status===0){if(h.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||h.body===void 0||h.body.getReader===void 0)return h;const m=Fu[e],p=h.body.getReader(),A=h.headers.get("Content-Length")||h.headers.get("X-File-Size"),v=A?parseInt(A):0,y=v!==0;let x=0;const C=new ReadableStream({start(g){b();function b(){p.read().then(({done:_,value:S})=>{if(_)g.close();else{x+=S.byteLength;const R=new ProgressEvent("progress",{lengthComputable:y,loaded:x,total:v});for(let P=0,O=m.length;P<O;P++){const D=m[P];D.onProgress&&D.onProgress(R)}g.enqueue(S),b()}})}}});return new Response(C)}else throw new fH(`fetch for "${h.url}" responded with ${h.status}: ${h.statusText}`,h)}).then(h=>{switch(c){case"arraybuffer":return h.arrayBuffer();case"blob":return h.blob();case"document":return h.text().then(m=>new DOMParser().parseFromString(m,d));case"json":return h.json();default:if(d===void 0)return h.text();{const p=/charset="?([^;"\s]*)"?/i.exec(d),A=p&&p[1]?p[1].toLowerCase():void 0,v=new TextDecoder(A);return h.arrayBuffer().then(y=>v.decode(y))}}}).then(h=>{jf.add(e,h);const m=Fu[e];delete Fu[e];for(let p=0,A=m.length;p<A;p++){const v=m[p];v.onLoad&&v.onLoad(h)}}).catch(h=>{const m=Fu[e];if(m===void 0)throw this.manager.itemError(e),h;delete Fu[e];for(let p=0,A=m.length;p<A;p++){const v=m[p];v.onError&&v.onError(h)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class pH extends Ya{constructor(e){super(e)}load(e,t,r,o){const a=this,l=new Ec(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(d){try{t(a.parse(JSON.parse(d)))}catch(c){o?o(c):console.error(c),a.manager.itemError(e)}},r,o)}parse(e){const t=[];for(let r=0;r<e.length;r++){const o=Zm.parse(e[r]);t.push(o)}return t}}class mH extends Ya{constructor(e){super(e)}load(e,t,r,o){const a=this,l=[],d=new pM,c=new Ec(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(a.withCredentials);let h=0;function m(p){c.load(e[p],function(A){const v=a.parse(A,!0);l[p]={width:v.width,height:v.height,format:v.format,mipmaps:v.mipmaps},h+=1,h===6&&(v.mipmapCount===1&&(d.minFilter=ws),d.image=l,d.format=v.format,d.needsUpdate=!0,t&&t(d))},r,o)}if(Array.isArray(e))for(let p=0,A=e.length;p<A;++p)m(p);else c.load(e,function(p){const A=a.parse(p,!0);if(A.isCubemap){const v=A.mipmaps.length/A.mipmapCount;for(let y=0;y<v;y++){l[y]={mipmaps:[]};for(let x=0;x<A.mipmapCount;x++)l[y].mipmaps.push(A.mipmaps[y*A.mipmapCount+x]),l[y].format=A.format,l[y].width=A.width,l[y].height=A.height}d.image=l}else d.image.width=A.width,d.image.height=A.height,d.mipmaps=A.mipmaps;A.mipmapCount===1&&(d.minFilter=ws),d.format=A.format,d.needsUpdate=!0,t&&t(d)},r,o);return d}}class b0 extends Ya{constructor(e){super(e)}load(e,t,r,o){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,l=jf.get(e);if(l!==void 0)return a.manager.itemStart(e),setTimeout(function(){t&&t(l),a.manager.itemEnd(e)},0),l;const d=E0("img");function c(){m(),jf.add(e,this),t&&t(this),a.manager.itemEnd(e)}function h(p){m(),o&&o(p),a.manager.itemError(e),a.manager.itemEnd(e)}function m(){d.removeEventListener("load",c,!1),d.removeEventListener("error",h,!1)}return d.addEventListener("load",c,!1),d.addEventListener("error",h,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(d.crossOrigin=this.crossOrigin),a.manager.itemStart(e),d.src=e,d}}class gH extends Ya{constructor(e){super(e)}load(e,t,r,o){const a=new k0,l=new b0(this.manager);l.setCrossOrigin(this.crossOrigin),l.setPath(this.path);let d=0;function c(h){l.load(e[h],function(m){a.images[h]=m,d++,d===6&&(a.needsUpdate=!0,t&&t(a))},void 0,o)}for(let h=0;h<e.length;++h)c(h);return a}}class AH extends Ya{constructor(e){super(e)}load(e,t,r,o){const a=this,l=new Pm,d=new Ec(this.manager);return d.setResponseType("arraybuffer"),d.setRequestHeader(this.requestHeader),d.setPath(this.path),d.setWithCredentials(a.withCredentials),d.load(e,function(c){const h=a.parse(c);h&&(h.image!==void 0?l.image=h.image:h.data!==void 0&&(l.image.width=h.width,l.image.height=h.height,l.image.data=h.data),l.wrapS=h.wrapS!==void 0?h.wrapS:Uo,l.wrapT=h.wrapT!==void 0?h.wrapT:Uo,l.magFilter=h.magFilter!==void 0?h.magFilter:ws,l.minFilter=h.minFilter!==void 0?h.minFilter:ws,l.anisotropy=h.anisotropy!==void 0?h.anisotropy:1,h.encoding!==void 0&&(l.encoding=h.encoding),h.flipY!==void 0&&(l.flipY=h.flipY),h.format!==void 0&&(l.format=h.format),h.type!==void 0&&(l.type=h.type),h.mipmaps!==void 0&&(l.mipmaps=h.mipmaps,l.minFilter=uu),h.mipmapCount===1&&(l.minFilter=ws),h.generateMipmaps!==void 0&&(l.generateMipmaps=h.generateMipmaps),l.needsUpdate=!0,t&&t(l,h))},r,o),l}}class bM extends Ya{constructor(e){super(e)}load(e,t,r,o){const a=new As,l=new b0(this.manager);return l.setCrossOrigin(this.crossOrigin),l.setPath(this.path),l.load(e,function(d){a.image=d,a.needsUpdate=!0,t!==void 0&&t(a)},r,o),a}}class dd extends Tr{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Rn(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class sP extends dd{constructor(e,t,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Tr.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Rn(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const $_=new ki,mI=new Ue,gI=new Ue;class SM{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Yt(512,512),this.map=null,this.mapPass=null,this.matrix=new ki,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Lx,this._frameExtents=new Yt(1,1),this._viewportCount=1,this._viewports=[new Kr(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;mI.setFromMatrixPosition(e.matrixWorld),t.position.copy(mI),gI.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(gI),t.updateMatrixWorld(),$_.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix($_),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply($_)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class vH extends SM{constructor(){super(new cs(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,r=Xm*2*e.angle*this.focus,o=this.mapSize.width/this.mapSize.height,a=e.distance||t.far;(r!==t.fov||o!==t.aspect||a!==t.far)&&(t.fov=r,t.aspect=o,t.far=a,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class TM extends dd{constructor(e,t,r=0,o=Math.PI/3,a=0,l=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Tr.DEFAULT_UP),this.updateMatrix(),this.target=new Tr,this.distance=r,this.angle=o,this.penumbra=a,this.decay=l,this.map=null,this.shadow=new vH}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const AI=new ki,MA=new Ue,e2=new Ue;class yH extends SM{constructor(){super(new cs(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Yt(4,2),this._viewportCount=6,this._viewports=[new Kr(2,1,1,1),new Kr(0,1,1,1),new Kr(3,1,1,1),new Kr(1,1,1,1),new Kr(3,0,1,1),new Kr(1,0,1,1)],this._cubeDirections=[new Ue(1,0,0),new Ue(-1,0,0),new Ue(0,0,1),new Ue(0,0,-1),new Ue(0,1,0),new Ue(0,-1,0)],this._cubeUps=[new Ue(0,1,0),new Ue(0,1,0),new Ue(0,1,0),new Ue(0,1,0),new Ue(0,0,1),new Ue(0,0,-1)]}updateMatrices(e,t=0){const r=this.camera,o=this.matrix,a=e.distance||r.far;a!==r.far&&(r.far=a,r.updateProjectionMatrix()),MA.setFromMatrixPosition(e.matrixWorld),r.position.copy(MA),e2.copy(r.position),e2.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(e2),r.updateMatrixWorld(),o.makeTranslation(-MA.x,-MA.y,-MA.z),AI.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(AI)}}class IM extends dd{constructor(e,t,r=0,o=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=o,this.shadow=new yH}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class xH extends SM{constructor(){super(new ju(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class RM extends dd{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Tr.DEFAULT_UP),this.updateMatrix(),this.target=new Tr,this.shadow=new xH}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class oP extends dd{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class aP extends dd{constructor(e,t,r=10,o=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=o}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class lP{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new Ue)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const r=e.x,o=e.y,a=e.z,l=this.coefficients;return t.copy(l[0]).multiplyScalar(.282095),t.addScaledVector(l[1],.488603*o),t.addScaledVector(l[2],.488603*a),t.addScaledVector(l[3],.488603*r),t.addScaledVector(l[4],1.092548*(r*o)),t.addScaledVector(l[5],1.092548*(o*a)),t.addScaledVector(l[6],.315392*(3*a*a-1)),t.addScaledVector(l[7],1.092548*(r*a)),t.addScaledVector(l[8],.546274*(r*r-o*o)),t}getIrradianceAt(e,t){const r=e.x,o=e.y,a=e.z,l=this.coefficients;return t.copy(l[0]).multiplyScalar(.886227),t.addScaledVector(l[1],2*.511664*o),t.addScaledVector(l[2],2*.511664*a),t.addScaledVector(l[3],2*.511664*r),t.addScaledVector(l[4],2*.429043*r*o),t.addScaledVector(l[5],2*.429043*o*a),t.addScaledVector(l[6],.743125*a*a-.247708),t.addScaledVector(l[7],2*.429043*r*a),t.addScaledVector(l[8],.429043*(r*r-o*o)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const r=this.coefficients;for(let o=0;o<9;o++)r[o].fromArray(e,t+o*3);return this}toArray(e=[],t=0){const r=this.coefficients;for(let o=0;o<9;o++)r[o].toArray(e,t+o*3);return e}static getBasisAt(e,t){const r=e.x,o=e.y,a=e.z;t[0]=.282095,t[1]=.488603*o,t[2]=.488603*a,t[3]=.488603*r,t[4]=1.092548*r*o,t[5]=1.092548*o*a,t[6]=.315392*(3*a*a-1),t[7]=1.092548*r*a,t[8]=.546274*(r*r-o*o)}}class Gx extends dd{constructor(e=new lP,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class Hx extends Ya{constructor(e){super(e),this.textures={}}load(e,t,r,o){const a=this,l=new Ec(a.manager);l.setPath(a.path),l.setRequestHeader(a.requestHeader),l.setWithCredentials(a.withCredentials),l.load(e,function(d){try{t(a.parse(JSON.parse(d)))}catch(c){o?o(c):console.error(c),a.manager.itemError(e)}},r,o)}parse(e){const t=this.textures;function r(a){return t[a]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",a),t[a]}const o=Hx.createMaterialFromType(e.type);if(e.uuid!==void 0&&(o.uuid=e.uuid),e.name!==void 0&&(o.name=e.name),e.color!==void 0&&o.color!==void 0&&o.color.setHex(e.color),e.roughness!==void 0&&(o.roughness=e.roughness),e.metalness!==void 0&&(o.metalness=e.metalness),e.sheen!==void 0&&(o.sheen=e.sheen),e.sheenColor!==void 0&&(o.sheenColor=new Rn().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(o.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&o.emissive!==void 0&&o.emissive.setHex(e.emissive),e.specular!==void 0&&o.specular!==void 0&&o.specular.setHex(e.specular),e.specularIntensity!==void 0&&(o.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&o.specularColor!==void 0&&o.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(o.shininess=e.shininess),e.clearcoat!==void 0&&(o.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(o.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(o.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(o.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(o.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(o.transmission=e.transmission),e.thickness!==void 0&&(o.thickness=e.thickness),e.attenuationDistance!==void 0&&(o.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&o.attenuationColor!==void 0&&o.attenuationColor.setHex(e.attenuationColor),e.fog!==void 0&&(o.fog=e.fog),e.flatShading!==void 0&&(o.flatShading=e.flatShading),e.blending!==void 0&&(o.blending=e.blending),e.combine!==void 0&&(o.combine=e.combine),e.side!==void 0&&(o.side=e.side),e.shadowSide!==void 0&&(o.shadowSide=e.shadowSide),e.opacity!==void 0&&(o.opacity=e.opacity),e.transparent!==void 0&&(o.transparent=e.transparent),e.alphaTest!==void 0&&(o.alphaTest=e.alphaTest),e.depthTest!==void 0&&(o.depthTest=e.depthTest),e.depthWrite!==void 0&&(o.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(o.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(o.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(o.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(o.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(o.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(o.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(o.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(o.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(o.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(o.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(o.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(o.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(o.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(o.rotation=e.rotation),e.linewidth!==1&&(o.linewidth=e.linewidth),e.dashSize!==void 0&&(o.dashSize=e.dashSize),e.gapSize!==void 0&&(o.gapSize=e.gapSize),e.scale!==void 0&&(o.scale=e.scale),e.polygonOffset!==void 0&&(o.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(o.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(o.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(o.dithering=e.dithering),e.alphaToCoverage!==void 0&&(o.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(o.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(o.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(o.visible=e.visible),e.toneMapped!==void 0&&(o.toneMapped=e.toneMapped),e.userData!==void 0&&(o.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?o.vertexColors=e.vertexColors>0:o.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const a in e.uniforms){const l=e.uniforms[a];switch(o.uniforms[a]={},l.type){case"t":o.uniforms[a].value=r(l.value);break;case"c":o.uniforms[a].value=new Rn().setHex(l.value);break;case"v2":o.uniforms[a].value=new Yt().fromArray(l.value);break;case"v3":o.uniforms[a].value=new Ue().fromArray(l.value);break;case"v4":o.uniforms[a].value=new Kr().fromArray(l.value);break;case"m3":o.uniforms[a].value=new pr().fromArray(l.value);break;case"m4":o.uniforms[a].value=new ki().fromArray(l.value);break;default:o.uniforms[a].value=l.value}}if(e.defines!==void 0&&(o.defines=e.defines),e.vertexShader!==void 0&&(o.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(o.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(o.glslVersion=e.glslVersion),e.extensions!==void 0)for(const a in e.extensions)o.extensions[a]=e.extensions[a];if(e.size!==void 0&&(o.size=e.size),e.sizeAttenuation!==void 0&&(o.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(o.map=r(e.map)),e.matcap!==void 0&&(o.matcap=r(e.matcap)),e.alphaMap!==void 0&&(o.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(o.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(o.bumpScale=e.bumpScale),e.normalMap!==void 0&&(o.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(o.normalMapType=e.normalMapType),e.normalScale!==void 0){let a=e.normalScale;Array.isArray(a)===!1&&(a=[a,a]),o.normalScale=new Yt().fromArray(a)}return e.displacementMap!==void 0&&(o.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(o.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(o.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(o.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(o.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(o.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(o.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(o.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(o.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(o.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(o.envMap=r(e.envMap)),e.envMapIntensity!==void 0&&(o.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(o.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(o.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(o.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(o.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(o.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(o.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(o.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(o.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(o.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(o.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(o.clearcoatNormalScale=new Yt().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(o.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(o.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(o.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(o.thicknessMap=r(e.thicknessMap)),e.sheenColorMap!==void 0&&(o.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(o.sheenRoughnessMap=r(e.sheenRoughnessMap)),o}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:jD,SpriteMaterial:cM,RawShaderMaterial:XD,ShaderMaterial:hu,PointsMaterial:Nx,MeshPhysicalMaterial:nh,MeshStandardMaterial:su,MeshPhongMaterial:KD,MeshToonMaterial:YD,MeshNormalMaterial:qD,MeshLambertMaterial:JD,MeshDepthMaterial:oM,MeshDistanceMaterial:aM,MeshBasicMaterial:fl,MeshMatcapMaterial:ZD,LineDashedMaterial:$D,LineBasicMaterial:ca,Material:oo};return new t[e]}}class $m{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let r=0,o=e.length;r<o;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class cP extends Zi{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class uP extends Ya{constructor(e){super(e)}load(e,t,r,o){const a=this,l=new Ec(a.manager);l.setPath(a.path),l.setRequestHeader(a.requestHeader),l.setWithCredentials(a.withCredentials),l.load(e,function(d){try{t(a.parse(JSON.parse(d)))}catch(c){o?o(c):console.error(c),a.manager.itemError(e)}},r,o)}parse(e){const t={},r={};function o(v,y){if(t[y]!==void 0)return t[y];const C=v.interleavedBuffers[y],g=a(v,C.buffer),b=wm(C.type,g),_=new U0(b,C.stride);return _.uuid=C.uuid,t[y]=_,_}function a(v,y){if(r[y]!==void 0)return r[y];const C=v.arrayBuffers[y],g=new Uint32Array(C).buffer;return r[y]=g,g}const l=e.isInstancedBufferGeometry?new cP:new Zi,d=e.data.index;if(d!==void 0){const v=wm(d.type,d.array);l.setIndex(new Qr(v,1))}const c=e.data.attributes;for(const v in c){const y=c[v];let x;if(y.isInterleavedBufferAttribute){const C=o(e.data,y.data);x=new sd(C,y.itemSize,y.offset,y.normalized)}else{const C=wm(y.type,y.array),g=y.isInstancedBufferAttribute?Ym:Qr;x=new g(C,y.itemSize,y.normalized)}y.name!==void 0&&(x.name=y.name),y.usage!==void 0&&x.setUsage(y.usage),y.updateRange!==void 0&&(x.updateRange.offset=y.updateRange.offset,x.updateRange.count=y.updateRange.count),l.setAttribute(v,x)}const h=e.data.morphAttributes;if(h)for(const v in h){const y=h[v],x=[];for(let C=0,g=y.length;C<g;C++){const b=y[C];let _;if(b.isInterleavedBufferAttribute){const S=o(e.data,b.data);_=new sd(S,b.itemSize,b.offset,b.normalized)}else{const S=wm(b.type,b.array);_=new Qr(S,b.itemSize,b.normalized)}b.name!==void 0&&(_.name=b.name),x.push(_)}l.morphAttributes[v]=x}e.data.morphTargetsRelative&&(l.morphTargetsRelative=!0);const p=e.data.groups||e.data.drawcalls||e.data.offsets;if(p!==void 0)for(let v=0,y=p.length;v!==y;++v){const x=p[v];l.addGroup(x.start,x.count,x.materialIndex)}const A=e.data.boundingSphere;if(A!==void 0){const v=new Ue;A.center!==void 0&&v.fromArray(A.center),l.boundingSphere=new wc(v,A.radius)}return e.name&&(l.name=e.name),e.userData&&(l.userData=e.userData),l}}class EH extends Ya{constructor(e){super(e)}load(e,t,r,o){const a=this,l=this.path===""?$m.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||l;const d=new Ec(this.manager);d.setPath(this.path),d.setRequestHeader(this.requestHeader),d.setWithCredentials(this.withCredentials),d.load(e,function(c){let h=null;try{h=JSON.parse(c)}catch(p){o!==void 0&&o(p),console.error("THREE:ObjectLoader: Can't parse "+e+".",p.message);return}const m=h.metadata;if(m===void 0||m.type===void 0||m.type.toLowerCase()==="geometry"){o!==void 0&&o(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}a.parse(h,t)},r,o)}async loadAsync(e,t){const r=this,o=this.path===""?$m.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new Ec(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials);const l=await a.loadAsync(e,t),d=JSON.parse(l),c=d.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(d)}parse(e,t){const r=this.parseAnimations(e.animations),o=this.parseShapes(e.shapes),a=this.parseGeometries(e.geometries,o),l=this.parseImages(e.images,function(){t!==void 0&&t(h)}),d=this.parseTextures(e.textures,l),c=this.parseMaterials(e.materials,d),h=this.parseObject(e.object,a,c,d,r),m=this.parseSkeletons(e.skeletons,h);if(this.bindSkeletons(h,m),t!==void 0){let p=!1;for(const A in l)if(l[A].data instanceof HTMLImageElement){p=!0;break}p===!1&&t(h)}return h}async parseAsync(e){const t=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),o=this.parseGeometries(e.geometries,r),a=await this.parseImagesAsync(e.images),l=this.parseTextures(e.textures,a),d=this.parseMaterials(e.materials,l),c=this.parseObject(e.object,o,d,l,t),h=this.parseSkeletons(e.skeletons,c);return this.bindSkeletons(c,h),c}parseShapes(e){const t={};if(e!==void 0)for(let r=0,o=e.length;r<o;r++){const a=new Ff().fromJSON(e[r]);t[a.uuid]=a}return t}parseSkeletons(e,t){const r={},o={};if(t.traverse(function(a){a.isBone&&(o[a.uuid]=a)}),e!==void 0)for(let a=0,l=e.length;a<l;a++){const d=new z0().fromJSON(e[a],o);r[d.uuid]=d}return r}parseGeometries(e,t){const r={};if(e!==void 0){const o=new uP;for(let a=0,l=e.length;a<l;a++){let d;const c=e[a];switch(c.type){case"BufferGeometry":case"InstancedBufferGeometry":d=o.parse(c);break;default:c.type in pI?d=pI[c.type].fromJSON(c,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${c.type}"`)}d.uuid=c.uuid,c.name!==void 0&&(d.name=c.name),c.userData!==void 0&&(d.userData=c.userData),r[c.uuid]=d}}return r}parseMaterials(e,t){const r={},o={};if(e!==void 0){const a=new Hx;a.setTextures(t);for(let l=0,d=e.length;l<d;l++){const c=e[l];r[c.uuid]===void 0&&(r[c.uuid]=a.parse(c)),o[c.uuid]=r[c.uuid]}}return o}parseAnimations(e){const t={};if(e!==void 0)for(let r=0;r<e.length;r++){const o=e[r],a=Zm.parse(o);t[a.uuid]=a}return t}parseImages(e,t){const r=this,o={};let a;function l(c){return r.manager.itemStart(c),a.load(c,function(){r.manager.itemEnd(c)},void 0,function(){r.manager.itemError(c),r.manager.itemEnd(c)})}function d(c){if(typeof c=="string"){const h=c,m=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(h)?h:r.resourcePath+h;return l(m)}else return c.data?{data:wm(c.type,c.data),width:c.width,height:c.height}:null}if(e!==void 0&&e.length>0){const c=new MM(t);a=new b0(c),a.setCrossOrigin(this.crossOrigin);for(let h=0,m=e.length;h<m;h++){const p=e[h],A=p.url;if(Array.isArray(A)){const v=[];for(let y=0,x=A.length;y<x;y++){const C=A[y],g=d(C);g!==null&&(g instanceof HTMLImageElement?v.push(g):v.push(new Pm(g.data,g.width,g.height)))}o[p.uuid]=new Sf(v)}else{const v=d(p.url);o[p.uuid]=new Sf(v)}}}return o}async parseImagesAsync(e){const t=this,r={};let o;async function a(l){if(typeof l=="string"){const d=l,c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(d)?d:t.resourcePath+d;return await o.loadAsync(c)}else return l.data?{data:wm(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){o=new b0(this.manager),o.setCrossOrigin(this.crossOrigin);for(let l=0,d=e.length;l<d;l++){const c=e[l],h=c.url;if(Array.isArray(h)){const m=[];for(let p=0,A=h.length;p<A;p++){const v=h[p],y=await a(v);y!==null&&(y instanceof HTMLImageElement?m.push(y):m.push(new Pm(y.data,y.width,y.height)))}r[c.uuid]=new Sf(m)}else{const m=await a(c.url);r[c.uuid]=new Sf(m)}}}return r}parseTextures(e,t){function r(a,l){return typeof a=="number"?a:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",a),l[a])}const o={};if(e!==void 0)for(let a=0,l=e.length;a<l;a++){const d=e[a];d.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',d.uuid),t[d.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",d.image);const c=t[d.image],h=c.data;let m;Array.isArray(h)?(m=new k0,h.length===6&&(m.needsUpdate=!0)):(h&&h.data?m=new Pm:m=new As,h&&(m.needsUpdate=!0)),m.source=c,m.uuid=d.uuid,d.name!==void 0&&(m.name=d.name),d.mapping!==void 0&&(m.mapping=r(d.mapping,_H)),d.channel!==void 0&&(m.channel=d.channel),d.offset!==void 0&&m.offset.fromArray(d.offset),d.repeat!==void 0&&m.repeat.fromArray(d.repeat),d.center!==void 0&&m.center.fromArray(d.center),d.rotation!==void 0&&(m.rotation=d.rotation),d.wrap!==void 0&&(m.wrapS=r(d.wrap[0],vI),m.wrapT=r(d.wrap[1],vI)),d.format!==void 0&&(m.format=d.format),d.internalFormat!==void 0&&(m.internalFormat=d.internalFormat),d.type!==void 0&&(m.type=d.type),d.encoding!==void 0&&(m.encoding=d.encoding),d.minFilter!==void 0&&(m.minFilter=r(d.minFilter,yI)),d.magFilter!==void 0&&(m.magFilter=r(d.magFilter,yI)),d.anisotropy!==void 0&&(m.anisotropy=d.anisotropy),d.flipY!==void 0&&(m.flipY=d.flipY),d.generateMipmaps!==void 0&&(m.generateMipmaps=d.generateMipmaps),d.premultiplyAlpha!==void 0&&(m.premultiplyAlpha=d.premultiplyAlpha),d.unpackAlignment!==void 0&&(m.unpackAlignment=d.unpackAlignment),d.userData!==void 0&&(m.userData=d.userData),o[d.uuid]=m}return o}parseObject(e,t,r,o,a){let l;function d(A){return t[A]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",A),t[A]}function c(A){if(A!==void 0){if(Array.isArray(A)){const v=[];for(let y=0,x=A.length;y<x;y++){const C=A[y];r[C]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",C),v.push(r[C])}return v}return r[A]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",A),r[A]}}function h(A){return o[A]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",A),o[A]}let m,p;switch(e.type){case"Scene":l=new rx,e.background!==void 0&&(Number.isInteger(e.background)?l.background=new Rn(e.background):l.background=h(e.background)),e.environment!==void 0&&(l.environment=h(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?l.fog=new Ox(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(l.fog=new Px(e.fog.color,e.fog.density))),e.backgroundBlurriness!==void 0&&(l.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(l.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":l=new cs(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(l.focus=e.focus),e.zoom!==void 0&&(l.zoom=e.zoom),e.filmGauge!==void 0&&(l.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(l.filmOffset=e.filmOffset),e.view!==void 0&&(l.view=Object.assign({},e.view));break;case"OrthographicCamera":l=new ju(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(l.zoom=e.zoom),e.view!==void 0&&(l.view=Object.assign({},e.view));break;case"AmbientLight":l=new oP(e.color,e.intensity);break;case"DirectionalLight":l=new RM(e.color,e.intensity);break;case"PointLight":l=new IM(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":l=new aP(e.color,e.intensity,e.width,e.height);break;case"SpotLight":l=new TM(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":l=new sP(e.color,e.groundColor,e.intensity);break;case"LightProbe":l=new Gx().fromJSON(e);break;case"SkinnedMesh":m=d(e.geometry),p=c(e.material),l=new uM(m,p),e.bindMode!==void 0&&(l.bindMode=e.bindMode),e.bindMatrix!==void 0&&l.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(l.skeleton=e.skeleton);break;case"Mesh":m=d(e.geometry),p=c(e.material),l=new Do(m,p);break;case"InstancedMesh":m=d(e.geometry),p=c(e.material);const A=e.count,v=e.instanceMatrix,y=e.instanceColor;l=new hM(m,p,A),l.instanceMatrix=new Ym(new Float32Array(v.array),16),y!==void 0&&(l.instanceColor=new Ym(new Float32Array(y.array),y.itemSize));break;case"LOD":l=new OD;break;case"Line":l=new $u(d(e.geometry),c(e.material));break;case"LineLoop":l=new dM(d(e.geometry),c(e.material));break;case"LineSegments":l=new Cc(d(e.geometry),c(e.material));break;case"PointCloud":case"Points":l=new fM(d(e.geometry),c(e.material));break;case"Sprite":l=new PD(c(e.material));break;case"Group":l=new mc;break;case"Bone":l=new Fx;break;default:l=new Tr}if(l.uuid=e.uuid,e.name!==void 0&&(l.name=e.name),e.matrix!==void 0?(l.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(l.matrixAutoUpdate=e.matrixAutoUpdate),l.matrixAutoUpdate&&l.matrix.decompose(l.position,l.quaternion,l.scale)):(e.position!==void 0&&l.position.fromArray(e.position),e.rotation!==void 0&&l.rotation.fromArray(e.rotation),e.quaternion!==void 0&&l.quaternion.fromArray(e.quaternion),e.scale!==void 0&&l.scale.fromArray(e.scale)),e.up!==void 0&&l.up.fromArray(e.up),e.castShadow!==void 0&&(l.castShadow=e.castShadow),e.receiveShadow!==void 0&&(l.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(l.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(l.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(l.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&l.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(l.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(l.visible=e.visible),e.frustumCulled!==void 0&&(l.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(l.renderOrder=e.renderOrder),e.userData!==void 0&&(l.userData=e.userData),e.layers!==void 0&&(l.layers.mask=e.layers),e.children!==void 0){const A=e.children;for(let v=0;v<A.length;v++)l.add(this.parseObject(A[v],t,r,o,a))}if(e.animations!==void 0){const A=e.animations;for(let v=0;v<A.length;v++){const y=A[v];l.animations.push(a[y])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(l.autoUpdate=e.autoUpdate);const A=e.levels;for(let v=0;v<A.length;v++){const y=A[v],x=l.getObjectByProperty("uuid",y.object);x!==void 0&&l.addLevel(x,y.distance,y.hysteresis)}}return l}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const o=t[r.skeleton];o===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(o,r.bindMatrix)}})}}const _H={UVMapping:Tx,CubeReflectionMapping:nd,CubeRefractionMapping:id,EquirectangularReflectionMapping:g0,EquirectangularRefractionMapping:A0,CubeUVReflectionMapping:rg},vI={RepeatWrapping:rd,ClampToEdgeWrapping:Uo,MirroredRepeatWrapping:Vm},yI={NearestFilter:Ps,NearestMipmapNearestFilter:v0,NearestMipmapLinearFilter:Lm,LinearFilter:ws,LinearMipmapNearestFilter:Ix,LinearMipmapLinearFilter:uu};class hP extends Ya{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,r,o){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,l=jf.get(e);if(l!==void 0)return a.manager.itemStart(e),setTimeout(function(){t&&t(l),a.manager.itemEnd(e)},0),l;const d={};d.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",d.headers=this.requestHeader,fetch(e,d).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(a.options,{colorSpaceConversion:"none"}))}).then(function(c){jf.add(e,c),t&&t(c),a.manager.itemEnd(e)}).catch(function(c){o&&o(c),a.manager.itemError(e),a.manager.itemEnd(e)}),a.manager.itemStart(e)}}let t1;class BM{static getContext(){return t1===void 0&&(t1=new(window.AudioContext||window.webkitAudioContext)),t1}static setContext(e){t1=e}}class wH extends Ya{constructor(e){super(e)}load(e,t,r,o){const a=this,l=new Ec(this.manager);l.setResponseType("arraybuffer"),l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(d){try{const c=d.slice(0);BM.getContext().decodeAudioData(c,function(m){t(m)})}catch(c){o?o(c):console.error(c),a.manager.itemError(e)}},r,o)}}class CH extends Gx{constructor(e,t,r=1){super(void 0,r),this.isHemisphereLightProbe=!0;const o=new Rn().set(e),a=new Rn().set(t),l=new Ue(o.r,o.g,o.b),d=new Ue(a.r,a.g,a.b),c=Math.sqrt(Math.PI),h=c*Math.sqrt(.75);this.sh.coefficients[0].copy(l).add(d).multiplyScalar(c),this.sh.coefficients[1].copy(l).sub(d).multiplyScalar(h)}}class MH extends Gx{constructor(e,t=1){super(void 0,t),this.isAmbientLightProbe=!0;const r=new Rn().set(e);this.sh.coefficients[0].set(r.r,r.g,r.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const xI=new ki,EI=new ki,cf=new ki;class bH{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new cs,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new cs,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,cf.copy(e.projectionMatrix);const o=t.eyeSep/2,a=o*t.near/t.focus,l=t.near*Math.tan(Pf*t.fov*.5)/t.zoom;let d,c;EI.elements[12]=-o,xI.elements[12]=o,d=-l*t.aspect+a,c=l*t.aspect+a,cf.elements[0]=2*t.near/(c-d),cf.elements[8]=(c+d)/(c-d),this.cameraL.projectionMatrix.copy(cf),d=-l*t.aspect-a,c=l*t.aspect-a,cf.elements[0]=2*t.near/(c-d),cf.elements[8]=(c+d)/(c-d),this.cameraR.projectionMatrix.copy(cf)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(EI),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(xI)}}class LM{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=_I(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=_I();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function _I(){return(typeof performance>"u"?Date:performance).now()}const uf=new Ue,wI=new Oo,SH=new Ue,hf=new Ue;class TH extends Tr{constructor(){super(),this.type="AudioListener",this.context=BM.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new LM}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(uf,wI,SH),hf.set(0,0,-1).applyQuaternion(wI),t.positionX){const o=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(uf.x,o),t.positionY.linearRampToValueAtTime(uf.y,o),t.positionZ.linearRampToValueAtTime(uf.z,o),t.forwardX.linearRampToValueAtTime(hf.x,o),t.forwardY.linearRampToValueAtTime(hf.y,o),t.forwardZ.linearRampToValueAtTime(hf.z,o),t.upX.linearRampToValueAtTime(r.x,o),t.upY.linearRampToValueAtTime(r.y,o),t.upZ.linearRampToValueAtTime(r.z,o)}else t.setPosition(uf.x,uf.y,uf.z),t.setOrientation(hf.x,hf.y,hf.z,r.x,r.y,r.z)}}class dP extends Tr{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const df=new Ue,CI=new Oo,IH=new Ue,ff=new Ue;class RH extends dP{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(df,CI,IH),ff.set(0,0,1).applyQuaternion(CI);const t=this.panner;if(t.positionX){const r=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(df.x,r),t.positionY.linearRampToValueAtTime(df.y,r),t.positionZ.linearRampToValueAtTime(df.z,r),t.orientationX.linearRampToValueAtTime(ff.x,r),t.orientationY.linearRampToValueAtTime(ff.y,r),t.orientationZ.linearRampToValueAtTime(ff.z,r)}else t.setPosition(df.x,df.y,df.z),t.setOrientation(ff.x,ff.y,ff.z)}}class BH{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let r=0;r<t.length;r++)e+=t[r];return e/t.length}}class fP{constructor(e,t,r){this.binding=e,this.valueSize=r;let o,a,l;switch(t){case"quaternion":o=this._slerp,a=this._slerpAdditive,l=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":o=this._select,a=this._select,l=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:o=this._lerp,a=this._lerpAdditive,l=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=o,this._mixBufferRegionAdditive=a,this._setIdentity=l,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const r=this.buffer,o=this.valueSize,a=e*o+o;let l=this.cumulativeWeight;if(l===0){for(let d=0;d!==o;++d)r[a+d]=r[d];l=t}else{l+=t;const d=t/l;this._mixBufferRegion(r,a,0,d,o)}this.cumulativeWeight=l}accumulateAdditive(e){const t=this.buffer,r=this.valueSize,o=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,o,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,r=this.buffer,o=e*t+t,a=this.cumulativeWeight,l=this.cumulativeWeightAdditive,d=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,a<1){const c=t*this._origIndex;this._mixBufferRegion(r,o,c,1-a,t)}l>0&&this._mixBufferRegionAdditive(r,o,this._addIndex*t,1,t);for(let c=t,h=t+t;c!==h;++c)if(r[c]!==r[c+t]){d.setValue(r,o);break}}saveOriginalState(){const e=this.binding,t=this.buffer,r=this.valueSize,o=r*this._origIndex;e.getValue(t,o);for(let a=r,l=o;a!==l;++a)t[a]=t[o+a%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,o,a){if(o>=.5)for(let l=0;l!==a;++l)e[t+l]=e[r+l]}_slerp(e,t,r,o){Oo.slerpFlat(e,t,e,t,e,r,o)}_slerpAdditive(e,t,r,o,a){const l=this._workIndex*a;Oo.multiplyQuaternionsFlat(e,l,e,t,e,r),Oo.slerpFlat(e,t,e,t,e,l,o)}_lerp(e,t,r,o,a){const l=1-o;for(let d=0;d!==a;++d){const c=t+d;e[c]=e[c]*l+e[r+d]*o}}_lerpAdditive(e,t,r,o,a){for(let l=0;l!==a;++l){const d=t+l;e[d]=e[d]+e[r+l]*o}}}const DM="\\[\\]\\.:\\/",LH=new RegExp("["+DM+"]","g"),PM="[^"+DM+"]",DH="[^"+DM.replace("\\.","")+"]",PH=/((?:WC+[\/:])*)/.source.replace("WC",PM),OH=/(WCOD+)?/.source.replace("WCOD",DH),FH=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",PM),NH=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",PM),kH=new RegExp("^"+PH+OH+FH+NH+"$"),UH=["material","materials","bones","map"];class zH{constructor(e,t,r){const o=r||br.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,o)}getValue(e,t){this.bind();const r=this._targetGroup.nCachedObjects_,o=this._bindings[r];o!==void 0&&o.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let o=this._targetGroup.nCachedObjects_,a=r.length;o!==a;++o)r[o].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}class br{constructor(e,t,r){this.path=t,this.parsedPath=r||br.parseTrackName(t),this.node=br.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new br.Composite(e,t,r):new br(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(LH,"")}static parseTrackName(e){const t=kH.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},o=r.nodeName&&r.nodeName.lastIndexOf(".");if(o!==void 0&&o!==-1){const a=r.nodeName.substring(o+1);UH.indexOf(a)!==-1&&(r.nodeName=r.nodeName.substring(0,o),r.objectName=a)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(t);if(r!==void 0)return r}if(e.children){const r=function(a){for(let l=0;l<a.length;l++){const d=a[l];if(d.name===t||d.uuid===t)return d;const c=r(d.children);if(c)return c}return null},o=r(e.children);if(o)return o}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const r=this.resolvedProperty;for(let o=0,a=r.length;o!==a;++o)e[t++]=r[o]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const r=this.resolvedProperty;for(let o=0,a=r.length;o!==a;++o)r[o]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const r=this.resolvedProperty;for(let o=0,a=r.length;o!==a;++o)r[o]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const r=this.resolvedProperty;for(let o=0,a=r.length;o!==a;++o)r[o]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,r=t.objectName,o=t.propertyName;let a=t.propertyIndex;if(e||(e=br.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(r){let h=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let m=0;m<e.length;m++)if(e[m].name===h){h=m;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(h!==void 0){if(e[h]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[h]}}const l=e[o];if(l===void 0){const h=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+h+"."+o+" but it wasn't found.",e);return}let d=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?d=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(d=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(a!==void 0){if(o==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[a]!==void 0&&(a=e.morphTargetDictionary[a])}c=this.BindingType.ArrayElement,this.resolvedProperty=l,this.propertyIndex=a}else l.fromArray!==void 0&&l.toArray!==void 0?(c=this.BindingType.HasFromToArray,this.resolvedProperty=l):Array.isArray(l)?(c=this.BindingType.EntireArray,this.resolvedProperty=l):this.propertyName=o;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][d]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}br.Composite=zH;br.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};br.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};br.prototype.GetterByBindingType=[br.prototype._getValue_direct,br.prototype._getValue_array,br.prototype._getValue_arrayElement,br.prototype._getValue_toArray];br.prototype.SetterByBindingTypeAndVersioning=[[br.prototype._setValue_direct,br.prototype._setValue_direct_setNeedsUpdate,br.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[br.prototype._setValue_array,br.prototype._setValue_array_setNeedsUpdate,br.prototype._setValue_array_setMatrixWorldNeedsUpdate],[br.prototype._setValue_arrayElement,br.prototype._setValue_arrayElement_setNeedsUpdate,br.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[br.prototype._setValue_fromArray,br.prototype._setValue_fromArray_setNeedsUpdate,br.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class GH{constructor(){this.isAnimationObjectGroup=!0,this.uuid=ml(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,o=arguments.length;r!==o;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,r=this._paths,o=this._parsedPaths,a=this._bindings,l=a.length;let d,c=e.length,h=this.nCachedObjects_;for(let m=0,p=arguments.length;m!==p;++m){const A=arguments[m],v=A.uuid;let y=t[v];if(y===void 0){y=c++,t[v]=y,e.push(A);for(let x=0,C=l;x!==C;++x)a[x].push(new br(A,r[x],o[x]))}else if(y<h){d=e[y];const x=--h,C=e[x];t[C.uuid]=y,e[y]=C,t[v]=x,e[x]=A;for(let g=0,b=l;g!==b;++g){const _=a[g],S=_[x];let R=_[y];_[y]=S,R===void 0&&(R=new br(A,r[g],o[g])),_[x]=R}}else e[y]!==d&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=h}remove(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,o=r.length;let a=this.nCachedObjects_;for(let l=0,d=arguments.length;l!==d;++l){const c=arguments[l],h=c.uuid,m=t[h];if(m!==void 0&&m>=a){const p=a++,A=e[p];t[A.uuid]=m,e[m]=A,t[h]=p,e[p]=c;for(let v=0,y=o;v!==y;++v){const x=r[v],C=x[p],g=x[m];x[m]=C,x[p]=g}}}this.nCachedObjects_=a}uncache(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,o=r.length;let a=this.nCachedObjects_,l=e.length;for(let d=0,c=arguments.length;d!==c;++d){const h=arguments[d],m=h.uuid,p=t[m];if(p!==void 0)if(delete t[m],p<a){const A=--a,v=e[A],y=--l,x=e[y];t[v.uuid]=p,e[p]=v,t[x.uuid]=A,e[A]=x,e.pop();for(let C=0,g=o;C!==g;++C){const b=r[C],_=b[A],S=b[y];b[p]=_,b[A]=S,b.pop()}}else{const A=--l,v=e[A];A>0&&(t[v.uuid]=p),e[p]=v,e.pop();for(let y=0,x=o;y!==x;++y){const C=r[y];C[p]=C[A],C.pop()}}}this.nCachedObjects_=a}subscribe_(e,t){const r=this._bindingsIndicesByPath;let o=r[e];const a=this._bindings;if(o!==void 0)return a[o];const l=this._paths,d=this._parsedPaths,c=this._objects,h=c.length,m=this.nCachedObjects_,p=new Array(h);o=a.length,r[e]=o,l.push(e),d.push(t),a.push(p);for(let A=m,v=c.length;A!==v;++A){const y=c[A];p[A]=new br(y,e,t)}return p}unsubscribe_(e){const t=this._bindingsIndicesByPath,r=t[e];if(r!==void 0){const o=this._paths,a=this._parsedPaths,l=this._bindings,d=l.length-1,c=l[d],h=e[d];t[h]=r,l[r]=c,l.pop(),a[r]=a[d],a.pop(),o[r]=o[d],o.pop()}}}class pP{constructor(e,t,r=null,o=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=o;const a=t.tracks,l=a.length,d=new Array(l),c={endingStart:Mf,endingEnd:Mf};for(let h=0;h!==l;++h){const m=a[h].createInterpolant(null);d[h]=m,m.settings=c}this._interpolantSettings=c,this._interpolants=d,this._propertyBindings=new Array(l),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=lD,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){const o=this._clip.duration,a=e._clip.duration,l=a/o,d=o/a;e.warp(1,l,t),this.warp(d,1,t)}return this}crossFadeTo(e,t,r){return e.crossFadeFrom(this,t,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){const o=this._mixer,a=o.time,l=this.timeScale;let d=this._timeScaleInterpolant;d===null&&(d=o._lendControlInterpolant(),this._timeScaleInterpolant=d);const c=d.parameterPositions,h=d.sampleValues;return c[0]=a,c[1]=a+r,h[0]=e/l,h[1]=t/l,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,o){if(!this.enabled){this._updateWeight(e);return}const a=this._startTime;if(a!==null){const c=(e-a)*r;c<0||r===0?t=0:(this._startTime=null,t=r*c)}t*=this._updateTimeScale(e);const l=this._updateTime(t),d=this._updateWeight(e);if(d>0){const c=this._interpolants,h=this._propertyBindings;switch(this.blendMode){case JC:for(let m=0,p=c.length;m!==p;++m)c[m].evaluate(l),h[m].accumulateAdditive(d);break;case Rx:default:for(let m=0,p=c.length;m!==p;++m)c[m].evaluate(l),h[m].accumulate(o,d)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const r=this._weightInterpolant;if(r!==null){const o=r.evaluate(e)[0];t*=o,e>r.parameterPositions[1]&&(this.stopFading(),o===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const o=r.evaluate(e)[0];t*=o,e>r.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,r=this.loop;let o=this.time+e,a=this._loopCount;const l=r===cD;if(e===0)return a===-1?o:l&&(a&1)===1?t-o:o;if(r===aD){a===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(o>=t)o=t;else if(o<0)o=0;else{this.time=o;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=o,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(a===-1&&(e>=0?(a=0,this._setEndings(!0,this.repetitions===0,l)):this._setEndings(this.repetitions===0,!0,l)),o>=t||o<0){const d=Math.floor(o/t);o-=t*d,a+=Math.abs(d);const c=this.repetitions-a;if(c<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,o=e>0?t:0,this.time=o,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(c===1){const h=e<0;this._setEndings(h,!h,l)}else this._setEndings(!1,!1,l);this._loopCount=a,this.time=o,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:d})}}else this.time=o;if(l&&(a&1)===1)return t-o}return o}_setEndings(e,t,r){const o=this._interpolantSettings;r?(o.endingStart=bf,o.endingEnd=bf):(e?o.endingStart=this.zeroSlopeAtStart?bf:Mf:o.endingStart=y0,t?o.endingEnd=this.zeroSlopeAtEnd?bf:Mf:o.endingEnd=y0)}_scheduleFading(e,t,r){const o=this._mixer,a=o.time;let l=this._weightInterpolant;l===null&&(l=o._lendControlInterpolant(),this._weightInterpolant=l);const d=l.parameterPositions,c=l.sampleValues;return d[0]=a,c[0]=t,d[1]=a+e,c[1]=r,this}}const HH=new Float32Array(1);class VH extends du{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const r=e._localRoot||this._root,o=e._clip.tracks,a=o.length,l=e._propertyBindings,d=e._interpolants,c=r.uuid,h=this._bindingsByRootAndName;let m=h[c];m===void 0&&(m={},h[c]=m);for(let p=0;p!==a;++p){const A=o[p],v=A.name;let y=m[v];if(y!==void 0)++y.referenceCount,l[p]=y;else{if(y=l[p],y!==void 0){y._cacheIndex===null&&(++y.referenceCount,this._addInactiveBinding(y,c,v));continue}const x=t&&t._propertyBindings[p].binding.parsedPath;y=new fP(br.create(r,v,x),A.ValueTypeName,A.getValueSize()),++y.referenceCount,this._addInactiveBinding(y,c,v),l[p]=y}d[p].resultBuffer=y.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,o=e._clip.uuid,a=this._actionsByClip[o];this._bindAction(e,a&&a.knownActions[0]),this._addInactiveAction(e,o,r)}const t=e._propertyBindings;for(let r=0,o=t.length;r!==o;++r){const a=t[r];a.useCount++===0&&(this._lendBinding(a),a.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let r=0,o=t.length;r!==o;++r){const a=t[r];--a.useCount===0&&(a.restoreOriginalState(),this._takeBackBinding(a))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,r){const o=this._actions,a=this._actionsByClip;let l=a[t];if(l===void 0)l={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,a[t]=l;else{const d=l.knownActions;e._byClipCacheIndex=d.length,d.push(e)}e._cacheIndex=o.length,o.push(e),l.actionByRoot[r]=e}_removeInactiveAction(e){const t=this._actions,r=t[t.length-1],o=e._cacheIndex;r._cacheIndex=o,t[o]=r,t.pop(),e._cacheIndex=null;const a=e._clip.uuid,l=this._actionsByClip,d=l[a],c=d.knownActions,h=c[c.length-1],m=e._byClipCacheIndex;h._byClipCacheIndex=m,c[m]=h,c.pop(),e._byClipCacheIndex=null;const p=d.actionByRoot,A=(e._localRoot||this._root).uuid;delete p[A],c.length===0&&delete l[a],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let r=0,o=t.length;r!==o;++r){const a=t[r];--a.referenceCount===0&&this._removeInactiveBinding(a)}}_lendAction(e){const t=this._actions,r=e._cacheIndex,o=this._nActiveActions++,a=t[o];e._cacheIndex=o,t[o]=e,a._cacheIndex=r,t[r]=a}_takeBackAction(e){const t=this._actions,r=e._cacheIndex,o=--this._nActiveActions,a=t[o];e._cacheIndex=o,t[o]=e,a._cacheIndex=r,t[r]=a}_addInactiveBinding(e,t,r){const o=this._bindingsByRootAndName,a=this._bindings;let l=o[t];l===void 0&&(l={},o[t]=l),l[r]=e,e._cacheIndex=a.length,a.push(e)}_removeInactiveBinding(e){const t=this._bindings,r=e.binding,o=r.rootNode.uuid,a=r.path,l=this._bindingsByRootAndName,d=l[o],c=t[t.length-1],h=e._cacheIndex;c._cacheIndex=h,t[h]=c,t.pop(),delete d[a],Object.keys(d).length===0&&delete l[o]}_lendBinding(e){const t=this._bindings,r=e._cacheIndex,o=this._nActiveBindings++,a=t[o];e._cacheIndex=o,t[o]=e,a._cacheIndex=r,t[r]=a}_takeBackBinding(e){const t=this._bindings,r=e._cacheIndex,o=--this._nActiveBindings,a=t[o];e._cacheIndex=o,t[o]=e,a._cacheIndex=r,t[r]=a}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let r=e[t];return r===void 0&&(r=new wM(new Float32Array(2),new Float32Array(2),1,HH),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){const t=this._controlInterpolants,r=e.__cacheIndex,o=--this._nActiveControlInterpolants,a=t[o];e.__cacheIndex=o,t[o]=e,a.__cacheIndex=r,t[r]=a}clipAction(e,t,r){const o=t||this._root,a=o.uuid;let l=typeof e=="string"?Zm.findByName(o,e):e;const d=l!==null?l.uuid:e,c=this._actionsByClip[d];let h=null;if(r===void 0&&(l!==null?r=l.blendMode:r=Rx),c!==void 0){const p=c.actionByRoot[a];if(p!==void 0&&p.blendMode===r)return p;h=c.knownActions[0],l===null&&(l=h._clip)}if(l===null)return null;const m=new pP(this,l,t,r);return this._bindAction(m,h),this._addInactiveAction(m,d,a),m}existingAction(e,t){const r=t||this._root,o=r.uuid,a=typeof e=="string"?Zm.findByName(r,e):e,l=a?a.uuid:e,d=this._actionsByClip[l];return d!==void 0&&d.actionByRoot[o]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let r=t-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const t=this._actions,r=this._nActiveActions,o=this.time+=e,a=Math.sign(e),l=this._accuIndex^=1;for(let h=0;h!==r;++h)t[h]._update(o,e,a,l);const d=this._bindings,c=this._nActiveBindings;for(let h=0;h!==c;++h)d[h].apply(l);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,r=e.uuid,o=this._actionsByClip,a=o[r];if(a!==void 0){const l=a.knownActions;for(let d=0,c=l.length;d!==c;++d){const h=l[d];this._deactivateAction(h);const m=h._cacheIndex,p=t[t.length-1];h._cacheIndex=null,h._byClipCacheIndex=null,p._cacheIndex=m,t[m]=p,t.pop(),this._removeInactiveBindingsForAction(h)}delete o[r]}}uncacheRoot(e){const t=e.uuid,r=this._actionsByClip;for(const l in r){const d=r[l].actionByRoot,c=d[t];c!==void 0&&(this._deactivateAction(c),this._removeInactiveAction(c))}const o=this._bindingsByRootAndName,a=o[t];if(a!==void 0)for(const l in a){const d=a[l];d.restoreOriginalState(),this._removeInactiveBinding(d)}}uncacheAction(e,t){const r=this.existingAction(e,t);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class OM{constructor(e){this.value=e}clone(){return new OM(this.value.clone===void 0?this.value:this.value.clone())}}let QH=0;class WH extends du{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:QH++}),this.name="",this.usage=x0,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let r=0,o=t.length;r<o;r++)this.uniforms.push(t[r].clone());return this}clone(){return new this.constructor().copy(this)}}class jH extends U0{constructor(e,t,r=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class XH{constructor(e,t,r,o,a){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=r,this.elementSize=o,this.count=a,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class mP{constructor(e,t,r=0,o=1/0){this.ray=new O0(e,t),this.near=r,this.far=o,this.camera=null,this.layers=new Of,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,r=[]){return Ww(e,this,r,t),r.sort(MI),r}intersectObjects(e,t=!0,r=[]){for(let o=0,a=e.length;o<a;o++)Ww(e[o],this,r,t);return r.sort(MI),r}}function MI(i,e){return i.distance-e.distance}function Ww(i,e,t,r){if(i.layers.test(e.layers)&&i.raycast(e,t),r===!0){const o=i.children;for(let a=0,l=o.length;a<l;a++)Ww(o[a],e,t,!0)}}class jw{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(Os(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class KH{constructor(e=1,t=0,r=0){return this.radius=e,this.theta=t,this.y=r,this}set(e,t,r){return this.radius=e,this.theta=t,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=t,this}clone(){return new this.constructor().copy(this)}}const bI=new Yt;class YH{constructor(e=new Yt(1/0,1/0),t=new Yt(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=bI.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,bI).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const SI=new Ue,n1=new Ue;class qH{constructor(e=new Ue,t=new Ue){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){SI.subVectors(e,this.start),n1.subVectors(this.end,this.start);const r=n1.dot(n1);let a=n1.dot(SI)/r;return t&&(a=Os(a,0,1)),a}closestPointToPoint(e,t,r){const o=this.closestPointToPointParameter(e,t);return this.delta(r).multiplyScalar(o).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const TI=new Ue;class JH extends Tr{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const r=new Zi,o=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let l=0,d=1,c=32;l<c;l++,d++){const h=l/c*Math.PI*2,m=d/c*Math.PI*2;o.push(Math.cos(h),Math.sin(h),1,Math.cos(m),Math.sin(m),1)}r.setAttribute("position",new di(o,3));const a=new ca({fog:!1,toneMapped:!1});this.cone=new Cc(r,a),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),TI.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(TI),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Dh=new Ue,i1=new ki,t2=new ki;class ZH extends Cc{constructor(e){const t=gP(e),r=new Zi,o=[],a=[],l=new Rn(0,0,1),d=new Rn(0,1,0);for(let h=0;h<t.length;h++){const m=t[h];m.parent&&m.parent.isBone&&(o.push(0,0,0),o.push(0,0,0),a.push(l.r,l.g,l.b),a.push(d.r,d.g,d.b))}r.setAttribute("position",new di(o,3)),r.setAttribute("color",new di(a,3));const c=new ca({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,c),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,r=this.geometry,o=r.getAttribute("position");t2.copy(this.root.matrixWorld).invert();for(let a=0,l=0;a<t.length;a++){const d=t[a];d.parent&&d.parent.isBone&&(i1.multiplyMatrices(t2,d.matrixWorld),Dh.setFromMatrixPosition(i1),o.setXYZ(l,Dh.x,Dh.y,Dh.z),i1.multiplyMatrices(t2,d.parent.matrixWorld),Dh.setFromMatrixPosition(i1),o.setXYZ(l+1,Dh.x,Dh.y,Dh.z),l+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function gP(i){const e=[];i.isBone===!0&&e.push(i);for(let t=0;t<i.children.length;t++)e.push.apply(e,gP(i.children[t]));return e}class $H extends Do{constructor(e,t,r){const o=new cg(t,4,2),a=new fl({wireframe:!0,fog:!1,toneMapped:!1});super(o,a),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const eV=new Ue,II=new Rn,RI=new Rn;class tV extends Tr{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const o=new lg(t);o.rotateY(Math.PI*.5),this.material=new fl({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const a=o.getAttribute("position"),l=new Float32Array(a.count*3);o.setAttribute("color",new Qr(l,3)),this.add(new Do(o,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");II.copy(this.light.color),RI.copy(this.light.groundColor);for(let r=0,o=t.count;r<o;r++){const a=r<o/2?II:RI;t.setXYZ(r,a.r,a.g,a.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(eV.setFromMatrixPosition(this.light.matrixWorld).negate())}}class nV extends Cc{constructor(e=10,t=10,r=4473924,o=8947848){r=new Rn(r),o=new Rn(o);const a=t/2,l=e/t,d=e/2,c=[],h=[];for(let A=0,v=0,y=-d;A<=t;A++,y+=l){c.push(-d,0,y,d,0,y),c.push(y,0,-d,y,0,d);const x=A===a?r:o;x.toArray(h,v),v+=3,x.toArray(h,v),v+=3,x.toArray(h,v),v+=3,x.toArray(h,v),v+=3}const m=new Zi;m.setAttribute("position",new di(c,3)),m.setAttribute("color",new di(h,3));const p=new ca({vertexColors:!0,toneMapped:!1});super(m,p),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class iV extends Cc{constructor(e=10,t=16,r=8,o=64,a=4473924,l=8947848){a=new Rn(a),l=new Rn(l);const d=[],c=[];if(t>1)for(let p=0;p<t;p++){const A=p/t*(Math.PI*2),v=Math.sin(A)*e,y=Math.cos(A)*e;d.push(0,0,0),d.push(v,0,y);const x=p&1?a:l;c.push(x.r,x.g,x.b),c.push(x.r,x.g,x.b)}for(let p=0;p<r;p++){const A=p&1?a:l,v=e-e/r*p;for(let y=0;y<o;y++){let x=y/o*(Math.PI*2),C=Math.sin(x)*v,g=Math.cos(x)*v;d.push(C,0,g),c.push(A.r,A.g,A.b),x=(y+1)/o*(Math.PI*2),C=Math.sin(x)*v,g=Math.cos(x)*v,d.push(C,0,g),c.push(A.r,A.g,A.b)}}const h=new Zi;h.setAttribute("position",new di(d,3)),h.setAttribute("color",new di(c,3));const m=new ca({vertexColors:!0,toneMapped:!1});super(h,m),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const BI=new Ue,r1=new Ue,LI=new Ue;class rV extends Tr{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",t===void 0&&(t=1);let o=new Zi;o.setAttribute("position",new di([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const a=new ca({fog:!1,toneMapped:!1});this.lightPlane=new $u(o,a),this.add(this.lightPlane),o=new Zi,o.setAttribute("position",new di([0,0,0,0,0,1],3)),this.targetLine=new $u(o,a),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),BI.setFromMatrixPosition(this.light.matrixWorld),r1.setFromMatrixPosition(this.light.target.matrixWorld),LI.subVectors(r1,BI),this.lightPlane.lookAt(r1),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(r1),this.targetLine.scale.z=LI.length()}}const s1=new Ue,Ls=new N0;class sV extends Cc{constructor(e){const t=new Zi,r=new ca({color:16777215,vertexColors:!0,toneMapped:!1}),o=[],a=[],l={};d("n1","n2"),d("n2","n4"),d("n4","n3"),d("n3","n1"),d("f1","f2"),d("f2","f4"),d("f4","f3"),d("f3","f1"),d("n1","f1"),d("n2","f2"),d("n3","f3"),d("n4","f4"),d("p","n1"),d("p","n2"),d("p","n3"),d("p","n4"),d("u1","u2"),d("u2","u3"),d("u3","u1"),d("c","t"),d("p","c"),d("cn1","cn2"),d("cn3","cn4"),d("cf1","cf2"),d("cf3","cf4");function d(y,x){c(y),c(x)}function c(y){o.push(0,0,0),a.push(0,0,0),l[y]===void 0&&(l[y]=[]),l[y].push(o.length/3-1)}t.setAttribute("position",new di(o,3)),t.setAttribute("color",new di(a,3)),super(t,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=l,this.update();const h=new Rn(16755200),m=new Rn(16711680),p=new Rn(43775),A=new Rn(16777215),v=new Rn(3355443);this.setColors(h,m,p,A,v)}setColors(e,t,r,o,a){const d=this.geometry.getAttribute("color");d.setXYZ(0,e.r,e.g,e.b),d.setXYZ(1,e.r,e.g,e.b),d.setXYZ(2,e.r,e.g,e.b),d.setXYZ(3,e.r,e.g,e.b),d.setXYZ(4,e.r,e.g,e.b),d.setXYZ(5,e.r,e.g,e.b),d.setXYZ(6,e.r,e.g,e.b),d.setXYZ(7,e.r,e.g,e.b),d.setXYZ(8,e.r,e.g,e.b),d.setXYZ(9,e.r,e.g,e.b),d.setXYZ(10,e.r,e.g,e.b),d.setXYZ(11,e.r,e.g,e.b),d.setXYZ(12,e.r,e.g,e.b),d.setXYZ(13,e.r,e.g,e.b),d.setXYZ(14,e.r,e.g,e.b),d.setXYZ(15,e.r,e.g,e.b),d.setXYZ(16,e.r,e.g,e.b),d.setXYZ(17,e.r,e.g,e.b),d.setXYZ(18,e.r,e.g,e.b),d.setXYZ(19,e.r,e.g,e.b),d.setXYZ(20,e.r,e.g,e.b),d.setXYZ(21,e.r,e.g,e.b),d.setXYZ(22,e.r,e.g,e.b),d.setXYZ(23,e.r,e.g,e.b),d.setXYZ(24,t.r,t.g,t.b),d.setXYZ(25,t.r,t.g,t.b),d.setXYZ(26,t.r,t.g,t.b),d.setXYZ(27,t.r,t.g,t.b),d.setXYZ(28,t.r,t.g,t.b),d.setXYZ(29,t.r,t.g,t.b),d.setXYZ(30,t.r,t.g,t.b),d.setXYZ(31,t.r,t.g,t.b),d.setXYZ(32,r.r,r.g,r.b),d.setXYZ(33,r.r,r.g,r.b),d.setXYZ(34,r.r,r.g,r.b),d.setXYZ(35,r.r,r.g,r.b),d.setXYZ(36,r.r,r.g,r.b),d.setXYZ(37,r.r,r.g,r.b),d.setXYZ(38,o.r,o.g,o.b),d.setXYZ(39,o.r,o.g,o.b),d.setXYZ(40,a.r,a.g,a.b),d.setXYZ(41,a.r,a.g,a.b),d.setXYZ(42,a.r,a.g,a.b),d.setXYZ(43,a.r,a.g,a.b),d.setXYZ(44,a.r,a.g,a.b),d.setXYZ(45,a.r,a.g,a.b),d.setXYZ(46,a.r,a.g,a.b),d.setXYZ(47,a.r,a.g,a.b),d.setXYZ(48,a.r,a.g,a.b),d.setXYZ(49,a.r,a.g,a.b),d.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,r=1,o=1;Ls.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Qs("c",t,e,Ls,0,0,-1),Qs("t",t,e,Ls,0,0,1),Qs("n1",t,e,Ls,-r,-o,-1),Qs("n2",t,e,Ls,r,-o,-1),Qs("n3",t,e,Ls,-r,o,-1),Qs("n4",t,e,Ls,r,o,-1),Qs("f1",t,e,Ls,-r,-o,1),Qs("f2",t,e,Ls,r,-o,1),Qs("f3",t,e,Ls,-r,o,1),Qs("f4",t,e,Ls,r,o,1),Qs("u1",t,e,Ls,r*.7,o*1.1,-1),Qs("u2",t,e,Ls,-r*.7,o*1.1,-1),Qs("u3",t,e,Ls,0,o*2,-1),Qs("cf1",t,e,Ls,-r,0,1),Qs("cf2",t,e,Ls,r,0,1),Qs("cf3",t,e,Ls,0,-o,1),Qs("cf4",t,e,Ls,0,o,1),Qs("cn1",t,e,Ls,-r,0,-1),Qs("cn2",t,e,Ls,r,0,-1),Qs("cn3",t,e,Ls,0,-o,-1),Qs("cn4",t,e,Ls,0,o,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Qs(i,e,t,r,o,a,l){s1.set(o,a,l).unproject(r);const d=e[i];if(d!==void 0){const c=t.getAttribute("position");for(let h=0,m=d.length;h<m;h++)c.setXYZ(d[h],s1.x,s1.y,s1.z)}}const o1=new _c;class oV extends Cc{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),o=new Float32Array(8*3),a=new Zi;a.setIndex(new Qr(r,1)),a.setAttribute("position",new Qr(o,3)),super(a,new ca({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&o1.setFromObject(this.object),o1.isEmpty())return;const t=o1.min,r=o1.max,o=this.geometry.attributes.position,a=o.array;a[0]=r.x,a[1]=r.y,a[2]=r.z,a[3]=t.x,a[4]=r.y,a[5]=r.z,a[6]=t.x,a[7]=t.y,a[8]=r.z,a[9]=r.x,a[10]=t.y,a[11]=r.z,a[12]=r.x,a[13]=r.y,a[14]=t.z,a[15]=t.x,a[16]=r.y,a[17]=t.z,a[18]=t.x,a[19]=t.y,a[20]=t.z,a[21]=r.x,a[22]=t.y,a[23]=t.z,o.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class aV extends Cc{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),o=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],a=new Zi;a.setIndex(new Qr(r,1)),a.setAttribute("position",new di(o,3)),super(a,new ca({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class lV extends $u{constructor(e,t=1,r=16776960){const o=r,a=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],l=new Zi;l.setAttribute("position",new di(a,3)),l.computeBoundingSphere(),super(l,new ca({color:o,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const d=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],c=new Zi;c.setAttribute("position",new di(d,3)),c.computeBoundingSphere(),this.add(new Do(c,new fl({color:o,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const DI=new Ue;let a1,n2;class cV extends Tr{constructor(e=new Ue(0,0,1),t=new Ue(0,0,0),r=1,o=16776960,a=r*.2,l=a*.2){super(),this.type="ArrowHelper",a1===void 0&&(a1=new Zi,a1.setAttribute("position",new di([0,0,0,0,1,0],3)),n2=new qf(0,.5,1,5,1),n2.translate(0,-.5,0)),this.position.copy(t),this.line=new $u(a1,new ca({color:o,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Do(n2,new fl({color:o,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,a,l)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{DI.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(DI,t)}}setLength(e,t=e*.2,r=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(r,t,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class uV extends Cc{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],o=new Zi;o.setAttribute("position",new di(t,3)),o.setAttribute("color",new di(r,3));const a=new ca({vertexColors:!0,toneMapped:!1});super(o,a),this.type="AxesHelper"}setColors(e,t,r){const o=new Rn,a=this.geometry.attributes.color.array;return o.set(e),o.toArray(a,0),o.toArray(a,3),o.set(t),o.toArray(a,6),o.toArray(a,9),o.set(r),o.toArray(a,12),o.toArray(a,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class hV{constructor(){this.type="ShapePath",this.color=new Rn,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new _0,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,r,o){return this.currentPath.quadraticCurveTo(e,t,r,o),this}bezierCurveTo(e,t,r,o,a,l){return this.currentPath.bezierCurveTo(e,t,r,o,a,l),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(g){const b=[];for(let _=0,S=g.length;_<S;_++){const R=g[_],P=new Ff;P.curves=R.curves,b.push(P)}return b}function r(g,b){const _=b.length;let S=!1;for(let R=_-1,P=0;P<_;R=P++){let O=b[R],D=b[P],L=D.x-O.x,N=D.y-O.y;if(Math.abs(N)>Number.EPSILON){if(N<0&&(O=b[P],L=-L,D=b[R],N=-N),g.y<O.y||g.y>D.y)continue;if(g.y===O.y){if(g.x===O.x)return!0}else{const H=N*(g.x-O.x)-L*(g.y-O.y);if(H===0)return!0;if(H<0)continue;S=!S}}else{if(g.y!==O.y)continue;if(D.x<=g.x&&g.x<=O.x||O.x<=g.x&&g.x<=D.x)return!0}}return S}const o=lu.isClockWise,a=this.subPaths;if(a.length===0)return[];let l,d,c;const h=[];if(a.length===1)return d=a[0],c=new Ff,c.curves=d.curves,h.push(c),h;let m=!o(a[0].getPoints());m=e?!m:m;const p=[],A=[];let v=[],y=0,x;A[y]=void 0,v[y]=[];for(let g=0,b=a.length;g<b;g++)d=a[g],x=d.getPoints(),l=o(x),l=e?!l:l,l?(!m&&A[y]&&y++,A[y]={s:new Ff,p:x},A[y].s.curves=d.curves,m&&y++,v[y]=[]):v[y].push({h:d,p:x[0]});if(!A[0])return t(a);if(A.length>1){let g=!1,b=0;for(let _=0,S=A.length;_<S;_++)p[_]=[];for(let _=0,S=A.length;_<S;_++){const R=v[_];for(let P=0;P<R.length;P++){const O=R[P];let D=!0;for(let L=0;L<A.length;L++)r(O.p,A[L].p)&&(_!==L&&b++,D?(D=!1,p[L].push(O)):g=!0);D&&p[_].push(O)}}b>0&&g===!1&&(v=p)}let C;for(let g=0,b=A.length;g<b;g++){c=A[g].s,h.push(c),C=v[g];for(let _=0,S=C.length;_<S;_++)c.holes.push(C[_].h)}return h}}class dV extends hd{constructor(e,t,r,o,a,l){console.warn("THREE.BoxBufferGeometry has been renamed to THREE.BoxGeometry."),super(e,t,r,o,a,l)}}class fV extends G0{constructor(e,t,r,o){console.warn("THREE.CapsuleBufferGeometry has been renamed to THREE.CapsuleGeometry."),super(e,t,r,o)}}class pV extends H0{constructor(e,t,r,o){console.warn("THREE.CircleBufferGeometry has been renamed to THREE.CircleGeometry."),super(e,t,r,o)}}class mV extends V0{constructor(e,t,r,o,a,l,d){console.warn("THREE.ConeBufferGeometry has been renamed to THREE.ConeGeometry."),super(e,t,r,o,a,l,d)}}class gV extends qf{constructor(e,t,r,o,a,l,d,c){console.warn("THREE.CylinderBufferGeometry has been renamed to THREE.CylinderGeometry."),super(e,t,r,o,a,l,d,c)}}class AV extends Q0{constructor(e,t){console.warn("THREE.DodecahedronBufferGeometry has been renamed to THREE.DodecahedronGeometry."),super(e,t)}}class vV extends W0{constructor(e,t){console.warn("THREE.ExtrudeBufferGeometry has been renamed to THREE.ExtrudeGeometry."),super(e,t)}}class yV extends j0{constructor(e,t){console.warn("THREE.IcosahedronBufferGeometry has been renamed to THREE.IcosahedronGeometry."),super(e,t)}}class xV extends ag{constructor(e,t,r,o){console.warn("THREE.LatheBufferGeometry has been renamed to THREE.LatheGeometry."),super(e,t,r,o)}}class EV extends lg{constructor(e,t){console.warn("THREE.OctahedronBufferGeometry has been renamed to THREE.OctahedronGeometry."),super(e,t)}}class _V extends sg{constructor(e,t,r,o){console.warn("THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry."),super(e,t,r,o)}}class wV extends th{constructor(e,t,r,o){console.warn("THREE.PolyhedronBufferGeometry has been renamed to THREE.PolyhedronGeometry."),super(e,t,r,o)}}class CV extends X0{constructor(e,t,r,o,a,l){console.warn("THREE.RingBufferGeometry has been renamed to THREE.RingGeometry."),super(e,t,r,o,a,l)}}class MV extends K0{constructor(e,t){console.warn("THREE.ShapeBufferGeometry has been renamed to THREE.ShapeGeometry."),super(e,t)}}class bV extends cg{constructor(e,t,r,o,a,l,d){console.warn("THREE.SphereBufferGeometry has been renamed to THREE.SphereGeometry."),super(e,t,r,o,a,l,d)}}class SV extends Y0{constructor(e,t){console.warn("THREE.TetrahedronBufferGeometry has been renamed to THREE.TetrahedronGeometry."),super(e,t)}}class TV extends q0{constructor(e,t,r,o,a){console.warn("THREE.TorusBufferGeometry has been renamed to THREE.TorusGeometry."),super(e,t,r,o,a)}}class IV extends J0{constructor(e,t,r,o,a,l){console.warn("THREE.TorusKnotBufferGeometry has been renamed to THREE.TorusKnotGeometry."),super(e,t,r,o,a,l)}}class RV extends Z0{constructor(e,t,r,o,a){console.warn("THREE.TubeBufferGeometry has been renamed to THREE.TubeGeometry."),super(e,t,r,o,a)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:bx}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=bx);const BV=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:YC,AddEquation:yf,AddOperation:GL,AdditiveAnimationBlendMode:JC,AdditiveBlending:cw,AlphaFormat:JL,AlwaysDepth:PL,AlwaysStencilFunc:pD,AmbientLight:oP,AmbientLightProbe:MH,AnimationAction:pP,AnimationClip:Zm,AnimationLoader:pH,AnimationMixer:VH,AnimationObjectGroup:GH,AnimationUtils:uH,ArcCurve:FD,ArrayCamera:RD,ArrowHelper:cV,Audio:dP,AudioAnalyser:BH,AudioContext:BM,AudioListener:TH,AudioLoader:wH,AxesHelper:uV,BackSide:Ea,BasicDepthPacking:hD,BasicShadowMap:xL,Bone:Fx,BooleanKeyframeTrack:Jf,Box2:YH,Box3:_c,Box3Helper:aV,BoxBufferGeometry:dV,BoxGeometry:hd,BoxHelper:oV,BufferAttribute:Qr,BufferGeometry:Zi,BufferGeometryLoader:uP,ByteType:jL,Cache:jf,Camera:N0,CameraHelper:sV,CanvasTexture:PG,CapsuleBufferGeometry:fV,CapsuleGeometry:G0,CatmullRomCurve3:ND,CineonToneMapping:QL,CircleBufferGeometry:pV,CircleGeometry:H0,ClampToEdgeWrapping:Uo,Clock:LM,Color:Rn,ColorKeyframeTrack:CM,ColorManagement:Ua,CompressedArrayTexture:DG,CompressedTexture:pM,CompressedTextureLoader:mH,ConeBufferGeometry:mV,ConeGeometry:V0,CubeCamera:_D,CubeReflectionMapping:nd,CubeRefractionMapping:id,CubeTexture:k0,CubeTextureLoader:gH,CubeUVReflectionMapping:rg,CubicBezierCurve:gM,CubicBezierCurve3:kD,CubicInterpolant:tP,CullFaceBack:lw,CullFaceFront:yL,CullFaceFrontBack:PN,CullFaceNone:vL,Curve:Mc,CurvePath:zD,CustomBlending:EL,CustomToneMapping:WL,CylinderBufferGeometry:gV,CylinderGeometry:qf,Cylindrical:KH,Data3DTexture:nM,DataArrayTexture:Bx,DataTexture:Pm,DataTextureLoader:AH,DataUtils:Vk,DecrementStencilOp:QN,DecrementWrapStencilOp:jN,DefaultLoadingManager:rP,DepthFormat:$h,DepthStencilFormat:Vf,DepthTexture:BD,DirectionalLight:RM,DirectionalLightHelper:rV,DiscreteInterpolant:nP,DisplayP3ColorSpace:$C,DodecahedronBufferGeometry:AV,DodecahedronGeometry:Q0,DoubleSide:pc,DstAlphaFactor:TL,DstColorFactor:RL,DynamicCopyUsage:ak,DynamicDrawUsage:tk,DynamicReadUsage:rk,EdgesGeometry:GD,EllipseCurve:kx,EqualDepth:FL,EqualStencilFunc:qN,EquirectangularReflectionMapping:g0,EquirectangularRefractionMapping:A0,Euler:F0,EventDispatcher:du,ExtrudeBufferGeometry:vV,ExtrudeGeometry:W0,FileLoader:Ec,Float16BufferAttribute:Yk,Float32BufferAttribute:di,Float64BufferAttribute:qk,FloatType:Vu,Fog:Ox,FogExp2:Px,FramebufferTexture:LG,FrontSide:cu,Frustum:Lx,GLBufferAttribute:XH,GLSL1:ck,GLSL3:Nw,GreaterDepth:kL,GreaterEqualDepth:NL,GreaterEqualStencilFunc:ek,GreaterStencilFunc:ZN,GridHelper:nV,Group:mc,HalfFloatType:Qm,HemisphereLight:sP,HemisphereLightHelper:tV,HemisphereLightProbe:CH,IcosahedronBufferGeometry:yV,IcosahedronGeometry:j0,ImageBitmapLoader:hP,ImageLoader:b0,ImageUtils:tM,IncrementStencilOp:VN,IncrementWrapStencilOp:WN,InstancedBufferAttribute:Ym,InstancedBufferGeometry:cP,InstancedInterleavedBuffer:jH,InstancedMesh:hM,Int16BufferAttribute:Xk,Int32BufferAttribute:Kk,Int8BufferAttribute:Qk,IntType:KL,InterleavedBuffer:U0,InterleavedBufferAttribute:sd,Interpolant:ug,InterpolateDiscrete:Wm,InterpolateLinear:Qf,InterpolateSmooth:S1,InvertStencilOp:XN,KeepStencilOp:T1,KeyframeTrack:bc,LOD:OD,LatheBufferGeometry:xV,LatheGeometry:ag,Layers:Of,LessDepth:OL,LessEqualDepth:tx,LessEqualStencilFunc:JN,LessStencilFunc:YN,Light:dd,LightProbe:Gx,Line:$u,Line3:qH,LineBasicMaterial:ca,LineCurve:Ux,LineCurve3:UD,LineDashedMaterial:$D,LineLoop:dM,LineSegments:Cc,LinearEncoding:Zu,LinearFilter:ws,LinearInterpolant:wM,LinearMipMapLinearFilter:UN,LinearMipMapNearestFilter:kN,LinearMipmapLinearFilter:uu,LinearMipmapNearestFilter:Ix,LinearSRGBColorSpace:jm,LinearToneMapping:HL,Loader:Ya,LoaderUtils:$m,LoadingManager:MM,LoopOnce:aD,LoopPingPong:cD,LoopRepeat:lD,LuminanceAlphaFormat:$L,LuminanceFormat:ZL,MOUSE:gf,Material:oo,MaterialLoader:Hx,MathUtils:AD,Matrix3:pr,Matrix4:ki,MaxEquation:fw,Mesh:Do,MeshBasicMaterial:fl,MeshDepthMaterial:oM,MeshDistanceMaterial:aM,MeshLambertMaterial:JD,MeshMatcapMaterial:ZD,MeshNormalMaterial:qD,MeshPhongMaterial:KD,MeshPhysicalMaterial:nh,MeshStandardMaterial:su,MeshToonMaterial:YD,MinEquation:dw,MirroredRepeatWrapping:Vm,MixOperation:zL,MultiplyBlending:hw,MultiplyOperation:P0,NearestFilter:Ps,NearestMipMapLinearFilter:NN,NearestMipMapNearestFilter:FN,NearestMipmapLinearFilter:Lm,NearestMipmapNearestFilter:v0,NeverDepth:DL,NeverStencilFunc:KN,NoBlending:Wu,NoColorSpace:zN,NoToneMapping:vc,NormalAnimationBlendMode:Rx,NormalBlending:Lf,NotEqualDepth:UL,NotEqualStencilFunc:$N,NumberKeyframeTrack:qm,Object3D:Tr,ObjectLoader:EH,ObjectSpaceNormalMap:fD,OctahedronBufferGeometry:EV,OctahedronGeometry:lg,OneFactor:ML,OneMinusDstAlphaFactor:IL,OneMinusDstColorFactor:BL,OneMinusSrcAlphaFactor:KC,OneMinusSrcColorFactor:SL,OrthographicCamera:ju,PCFShadowMap:Sx,PCFSoftShadowMap:KA,PMREMGenerator:Uw,Path:_0,PerspectiveCamera:cs,Plane:Nh,PlaneBufferGeometry:_V,PlaneGeometry:sg,PlaneHelper:lV,PointLight:IM,PointLightHelper:$H,Points:fM,PointsMaterial:Nx,PolarGridHelper:iV,PolyhedronBufferGeometry:wV,PolyhedronGeometry:th,PositionalAudio:RH,PropertyBinding:br,PropertyMixer:fP,QuadraticBezierCurve:AM,QuadraticBezierCurve3:vM,Quaternion:Oo,QuaternionKeyframeTrack:od,QuaternionLinearInterpolant:iP,RED_GREEN_RGTC2_Format:Ow,RED_RGTC1_Format:oD,REVISION:bx,RGBADepthPacking:dD,RGBAFormat:Qa,RGBAIntegerFormat:rD,RGBA_ASTC_10x10_Format:Bw,RGBA_ASTC_10x5_Format:Tw,RGBA_ASTC_10x6_Format:Iw,RGBA_ASTC_10x8_Format:Rw,RGBA_ASTC_12x10_Format:Lw,RGBA_ASTC_12x12_Format:Dw,RGBA_ASTC_4x4_Format:xw,RGBA_ASTC_5x4_Format:Ew,RGBA_ASTC_5x5_Format:_w,RGBA_ASTC_6x5_Format:ww,RGBA_ASTC_6x6_Format:Cw,RGBA_ASTC_8x5_Format:Mw,RGBA_ASTC_8x6_Format:bw,RGBA_ASTC_8x8_Format:Sw,RGBA_BPTC_Format:b1,RGBA_ETC2_EAC_Format:yw,RGBA_PVRTC_2BPPV1_Format:Aw,RGBA_PVRTC_4BPPV1_Format:gw,RGBA_S3TC_DXT1_Format:w1,RGBA_S3TC_DXT3_Format:C1,RGBA_S3TC_DXT5_Format:M1,RGB_ETC1_Format:sD,RGB_ETC2_Format:vw,RGB_PVRTC_2BPPV1_Format:mw,RGB_PVRTC_4BPPV1_Format:pw,RGB_S3TC_DXT1_Format:_1,RGFormat:nD,RGIntegerFormat:iD,RawShaderMaterial:XD,Ray:O0,Raycaster:mP,RectAreaLight:aP,RedFormat:eD,RedIntegerFormat:tD,ReinhardToneMapping:VL,RepeatWrapping:rd,ReplaceStencilOp:HN,ReverseSubtractEquation:wL,RingBufferGeometry:CV,RingGeometry:X0,SIGNED_RED_GREEN_RGTC2_Format:Fw,SIGNED_RED_RGTC1_Format:Pw,SRGBColorSpace:uc,Scene:rx,ShaderChunk:nr,ShaderLib:dc,ShaderMaterial:hu,ShadowMaterial:jD,Shape:Ff,ShapeBufferGeometry:MV,ShapeGeometry:K0,ShapePath:hV,ShapeUtils:lu,ShortType:XL,Skeleton:z0,SkeletonHelper:ZH,SkinnedMesh:uM,Source:Sf,Sphere:wc,SphereBufferGeometry:bV,SphereGeometry:cg,Spherical:jw,SphericalHarmonics3:lP,SplineCurve:yM,SpotLight:TM,SpotLightHelper:JH,Sprite:PD,SpriteMaterial:cM,SrcAlphaFactor:XC,SrcAlphaSaturateFactor:LL,SrcColorFactor:bL,StaticCopyUsage:ok,StaticDrawUsage:x0,StaticReadUsage:ik,StereoCamera:bH,StreamCopyUsage:lk,StreamDrawUsage:nk,StreamReadUsage:sk,StringKeyframeTrack:Zf,SubtractEquation:_L,SubtractiveBlending:uw,TOUCH:Af,TangentSpaceNormalMap:ud,TetrahedronBufferGeometry:SV,TetrahedronGeometry:Y0,Texture:As,TextureLoader:bM,TorusBufferGeometry:TV,TorusGeometry:q0,TorusKnotBufferGeometry:IV,TorusKnotGeometry:J0,Triangle:Va,TriangleFanDrawMode:nx,TriangleStripDrawMode:ZC,TrianglesDrawMode:uD,TubeBufferGeometry:RV,TubeGeometry:Z0,TwoPassDoubleSide:ON,UVMapping:Tx,Uint16BufferAttribute:iM,Uint32BufferAttribute:rM,Uint8BufferAttribute:Wk,Uint8ClampedBufferAttribute:jk,Uniform:OM,UniformsGroup:WH,UniformsLib:Fn,UniformsUtils:ED,UnsignedByteType:Ju,UnsignedInt248Type:Df,UnsignedIntType:Vh,UnsignedShort4444Type:YL,UnsignedShort5551Type:qL,UnsignedShortType:qC,VSMShadowMap:Cf,Vector2:Yt,Vector3:Ue,Vector4:Kr,VectorKeyframeTrack:Jm,VideoTexture:BG,WebGL1Renderer:LD,WebGL3DRenderTarget:Lk,WebGLArrayRenderTarget:Bk,WebGLCubeRenderTarget:wD,WebGLMultipleRenderTargets:Dk,WebGLRenderTarget:xc,WebGLRenderer:lM,WebGLUtils:ID,WireframeGeometry:WD,WrapAroundEnding:y0,ZeroCurvatureEnding:Mf,ZeroFactor:CL,ZeroSlopeEnding:bf,ZeroStencilOp:GN,_SRGBAFormat:ix,sRGBEncoding:Dr},Symbol.toStringTag,{value:"Module"}));var Qh={},LV={get exports(){return Qh},set exports(i){Qh=i}},$f={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */$f.ConcurrentRoot=1;$f.ContinuousEventPriority=4;$f.DefaultEventPriority=16;$f.DiscreteEventPriority=1;$f.IdleEventPriority=536870912;$f.LegacyRoot=0;(function(i){i.exports=$f})(LV);function DV(i){let e;const t=new Set,r=(h,m)=>{const p=typeof h=="function"?h(e):h;if(p!==e){const A=e;e=m?p:Object.assign({},e,p),t.forEach(v=>v(e,A))}},o=()=>e,a=(h,m=o,p=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let A=m(e);function v(){const y=m(e);if(!p(A,y)){const x=A;h(A=y,x)}}return t.add(v),()=>t.delete(v)},c={setState:r,getState:o,subscribe:(h,m,p)=>m||p?a(h,m,p):(t.add(h),()=>t.delete(h)),destroy:()=>t.clear()};return e=i(r,o,c),c}const PV=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),PI=PV?Zt.useEffect:Zt.useLayoutEffect;function FM(i){const e=typeof i=="function"?DV(i):i,t=(r=e.getState,o=Object.is)=>{const[,a]=Zt.useReducer(C=>C+1,0),l=e.getState(),d=Zt.useRef(l),c=Zt.useRef(r),h=Zt.useRef(o),m=Zt.useRef(!1),p=Zt.useRef();p.current===void 0&&(p.current=r(l));let A,v=!1;(d.current!==l||c.current!==r||h.current!==o||m.current)&&(A=r(l),v=!o(p.current,A)),PI(()=>{v&&(p.current=A),d.current=l,c.current=r,h.current=o,m.current=!1});const y=Zt.useRef(l);PI(()=>{const C=()=>{try{const b=e.getState(),_=c.current(b);h.current(p.current,_)||(d.current=b,p.current=_,a())}catch{m.current=!0,a()}},g=e.subscribe(C);return e.getState()!==y.current&&C(),g},[]);const x=v?A:p.current;return Zt.useDebugValue(x),x};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[t,e];return{next(){const o=r.length<=0;return{value:r.shift(),done:o}}}},t}var Xw={},OV={get exports(){return Xw},set exports(i){Xw=i}},sx={},FV={get exports(){return sx},set exports(i){sx=i}},i2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OI;function NV(){return OI||(OI=1,function(i){function e(X,W){var ce=X.length;X.push(W);e:for(;0<ce;){var he=ce-1>>>1,xe=X[he];if(0<o(xe,W))X[he]=W,X[ce]=xe,ce=he;else break e}}function t(X){return X.length===0?null:X[0]}function r(X){if(X.length===0)return null;var W=X[0],ce=X.pop();if(ce!==W){X[0]=ce;e:for(var he=0,xe=X.length,ve=xe>>>1;he<ve;){var Fe=2*(he+1)-1,je=X[Fe],rt=Fe+1,He=X[rt];if(0>o(je,ce))rt<xe&&0>o(He,je)?(X[he]=He,X[rt]=ce,he=rt):(X[he]=je,X[Fe]=ce,he=Fe);else if(rt<xe&&0>o(He,ce))X[he]=He,X[rt]=ce,he=rt;else break e}}return W}function o(X,W){var ce=X.sortIndex-W.sortIndex;return ce!==0?ce:X.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;i.unstable_now=function(){return a.now()}}else{var l=Date,d=l.now();i.unstable_now=function(){return l.now()-d}}var c=[],h=[],m=1,p=null,A=3,v=!1,y=!1,x=!1,C=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(X){for(var W=t(h);W!==null;){if(W.callback===null)r(h);else if(W.startTime<=X)r(h),W.sortIndex=W.expirationTime,e(c,W);else break;W=t(h)}}function S(X){if(x=!1,_(X),!y)if(t(c)!==null)y=!0,ee(R);else{var W=t(h);W!==null&&ne(S,W.startTime-X)}}function R(X,W){y=!1,x&&(x=!1,g(D),D=-1),v=!0;var ce=A;try{for(_(W),p=t(c);p!==null&&(!(p.expirationTime>W)||X&&!H());){var he=p.callback;if(typeof he=="function"){p.callback=null,A=p.priorityLevel;var xe=he(p.expirationTime<=W);W=i.unstable_now(),typeof xe=="function"?p.callback=xe:p===t(c)&&r(c),_(W)}else r(c);p=t(c)}if(p!==null)var ve=!0;else{var Fe=t(h);Fe!==null&&ne(S,Fe.startTime-W),ve=!1}return ve}finally{p=null,A=ce,v=!1}}var P=!1,O=null,D=-1,L=5,N=-1;function H(){return!(i.unstable_now()-N<L)}function J(){if(O!==null){var X=i.unstable_now();N=X;var W=!0;try{W=O(!0,X)}finally{W?K():(P=!1,O=null)}}else P=!1}var K;if(typeof b=="function")K=function(){b(J)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,ae=se.port2;se.port1.onmessage=J,K=function(){ae.postMessage(null)}}else K=function(){C(J,0)};function ee(X){O=X,P||(P=!0,K())}function ne(X,W){D=C(function(){X(i.unstable_now())},W)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(X){X.callback=null},i.unstable_continueExecution=function(){y||v||(y=!0,ee(R))},i.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<X?Math.floor(1e3/X):5},i.unstable_getCurrentPriorityLevel=function(){return A},i.unstable_getFirstCallbackNode=function(){return t(c)},i.unstable_next=function(X){switch(A){case 1:case 2:case 3:var W=3;break;default:W=A}var ce=A;A=W;try{return X()}finally{A=ce}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(X,W){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var ce=A;A=X;try{return W()}finally{A=ce}},i.unstable_scheduleCallback=function(X,W,ce){var he=i.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?he+ce:he):ce=he,X){case 1:var xe=-1;break;case 2:xe=250;break;case 5:xe=1073741823;break;case 4:xe=1e4;break;default:xe=5e3}return xe=ce+xe,X={id:m++,callback:W,priorityLevel:X,startTime:ce,expirationTime:xe,sortIndex:-1},ce>he?(X.sortIndex=ce,e(h,X),t(c)===null&&X===t(h)&&(x?(g(D),D=-1):x=!0,ne(S,ce-he))):(X.sortIndex=xe,e(c,X),y||v||(y=!0,ee(R))),X},i.unstable_shouldYield=H,i.unstable_wrapCallback=function(X){var W=A;return function(){var ce=A;A=W;try{return X.apply(this,arguments)}finally{A=ce}}}}(i2)),i2}var FI;function kV(){return FI||(FI=1,function(i){i.exports=NV()}(FV)),sx}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UV=function(e){var t={},r=Zt,o=kV(),a=Object.assign;function l(E){for(var M="https://reactjs.org/docs/error-decoder.html?invariant="+E,k=1;k<arguments.length;k++)M+="&args[]="+encodeURIComponent(arguments[k]);return"Minified React error #"+E+"; visit "+M+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var d=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,c=Symbol.for("react.element"),h=Symbol.for("react.portal"),m=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),v=Symbol.for("react.provider"),y=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),g=Symbol.for("react.suspense_list"),b=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),S=Symbol.for("react.offscreen"),R=Symbol.iterator;function P(E){return E===null||typeof E!="object"?null:(E=R&&E[R]||E["@@iterator"],typeof E=="function"?E:null)}function O(E){if(E==null)return null;if(typeof E=="function")return E.displayName||E.name||null;if(typeof E=="string")return E;switch(E){case m:return"Fragment";case h:return"Portal";case A:return"Profiler";case p:return"StrictMode";case C:return"Suspense";case g:return"SuspenseList"}if(typeof E=="object")switch(E.$$typeof){case y:return(E.displayName||"Context")+".Consumer";case v:return(E._context.displayName||"Context")+".Provider";case x:var M=E.render;return E=E.displayName,E||(E=M.displayName||M.name||"",E=E!==""?"ForwardRef("+E+")":"ForwardRef"),E;case b:return M=E.displayName||null,M!==null?M:O(E.type)||"Memo";case _:M=E._payload,E=E._init;try{return O(E(M))}catch{}}return null}function D(E){var M=E.type;switch(E.tag){case 24:return"Cache";case 9:return(M.displayName||"Context")+".Consumer";case 10:return(M._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return E=M.render,E=E.displayName||E.name||"",M.displayName||(E!==""?"ForwardRef("+E+")":"ForwardRef");case 7:return"Fragment";case 5:return M;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return O(M);case 8:return M===p?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof M=="function")return M.displayName||M.name||null;if(typeof M=="string")return M}return null}function L(E){var M=E,k=E;if(E.alternate)for(;M.return;)M=M.return;else{E=M;do M=E,M.flags&4098&&(k=M.return),E=M.return;while(E)}return M.tag===3?k:null}function N(E){if(L(E)!==E)throw Error(l(188))}function H(E){var M=E.alternate;if(!M){if(M=L(E),M===null)throw Error(l(188));return M!==E?null:E}for(var k=E,z=M;;){var te=k.return;if(te===null)break;var ue=te.alternate;if(ue===null){if(z=te.return,z!==null){k=z;continue}break}if(te.child===ue.child){for(ue=te.child;ue;){if(ue===k)return N(te),E;if(ue===z)return N(te),M;ue=ue.sibling}throw Error(l(188))}if(k.return!==z.return)k=te,z=ue;else{for(var Ke=!1,lt=te.child;lt;){if(lt===k){Ke=!0,k=te,z=ue;break}if(lt===z){Ke=!0,z=te,k=ue;break}lt=lt.sibling}if(!Ke){for(lt=ue.child;lt;){if(lt===k){Ke=!0,k=ue,z=te;break}if(lt===z){Ke=!0,z=ue,k=te;break}lt=lt.sibling}if(!Ke)throw Error(l(189))}}if(k.alternate!==z)throw Error(l(190))}if(k.tag!==3)throw Error(l(188));return k.stateNode.current===k?E:M}function J(E){return E=H(E),E!==null?K(E):null}function K(E){if(E.tag===5||E.tag===6)return E;for(E=E.child;E!==null;){var M=K(E);if(M!==null)return M;E=E.sibling}return null}function se(E){if(E.tag===5||E.tag===6)return E;for(E=E.child;E!==null;){if(E.tag!==4){var M=se(E);if(M!==null)return M}E=E.sibling}return null}var ae=Array.isArray,ee=e.getPublicInstance,ne=e.getRootHostContext,X=e.getChildHostContext,W=e.prepareForCommit,ce=e.resetAfterCommit,he=e.createInstance,xe=e.appendInitialChild,ve=e.finalizeInitialChildren,Fe=e.prepareUpdate,je=e.shouldSetTextContent,rt=e.createTextInstance,He=e.scheduleTimeout,Ot=e.cancelTimeout,xt=e.noTimeout,gt=e.isPrimaryRenderer,It=e.supportsMutation,ct=e.supportsPersistence,ut=e.supportsHydration,Ct=e.getInstanceFromNode,qt=e.preparePortalMount,Ft=e.getCurrentEventPriority,un=e.detachDeletedInstance,fn=e.supportsMicrotasks,An=e.scheduleMicrotask,Bn=e.supportsTestSelectors,ci=e.findFiberRoot,ze=e.getBoundingRect,Pe=e.getTextContent,qe=e.isHiddenSubtree,ye=e.matchAccessibilityRole,me=e.setFocusIfFocusable,Re=e.setupIntersectionObserver,Se=e.appendChild,Be=e.appendChildToContainer,Ee=e.commitTextUpdate,Xe=e.commitMount,fe=e.commitUpdate,Oe=e.insertBefore,$e=e.insertInContainerBefore,le=e.removeChild,Q=e.removeChildFromContainer,Z=e.resetTextContent,Ie=e.hideInstance,Ae=e.hideTextInstance,Te=e.unhideInstance,Ve=e.unhideTextInstance,Tt=e.clearContainer,Ht=e.cloneInstance,nn=e.createContainerChildSet,cn=e.appendChildToContainerChildSet,Xn=e.finalizeContainerChildren,cr=e.replaceContainerChildren,Ni=e.cloneHiddenInstance,or=e.cloneHiddenTextInstance,bi=e.canHydrateInstance,vn=e.canHydrateTextInstance,Nt=e.canHydrateSuspenseInstance,ln=e.isSuspenseInstancePending,ei=e.isSuspenseInstanceFallback,yn=e.registerSuspenseInstanceRetry,De=e.getNextHydratableSibling,st=e.getFirstHydratableChild,At=e.getFirstHydratableChildWithinContainer,ot=e.getFirstHydratableChildWithinSuspenseInstance,wt=e.hydrateInstance,xn=e.hydrateTextInstance,Nn=e.hydrateSuspenseInstance,pn=e.getNextHydratableInstanceAfterSuspenseInstance,Un=e.commitHydratedContainer,Kn=e.commitHydratedSuspenseInstance,be=e.clearSuspenseBoundary,Ge=e.clearSuspenseBoundaryFromContainer,et=e.shouldDeleteUnhydratedTailInstances,Et=e.didNotMatchHydratedContainerTextInstance,vt=e.didNotMatchHydratedTextInstance,Gt;function zt(E){if(Gt===void 0)try{throw Error()}catch(k){var M=k.stack.trim().match(/\n( *(at )?)/);Gt=M&&M[1]||""}return`
`+Gt+E}var an=!1;function bn(E,M){if(!E||an)return"";an=!0;var k=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(M)if(M=function(){throw Error()},Object.defineProperty(M.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(M,[])}catch(En){var z=En}Reflect.construct(E,[],M)}else{try{M.call()}catch(En){z=En}E.call(M.prototype)}else{try{throw Error()}catch(En){z=En}E()}}catch(En){if(En&&z&&typeof En.stack=="string"){for(var te=En.stack.split(`
`),ue=z.stack.split(`
`),Ke=te.length-1,lt=ue.length-1;1<=Ke&&0<=lt&&te[Ke]!==ue[lt];)lt--;for(;1<=Ke&&0<=lt;Ke--,lt--)if(te[Ke]!==ue[lt]){if(Ke!==1||lt!==1)do if(Ke--,lt--,0>lt||te[Ke]!==ue[lt]){var kt=`
`+te[Ke].replace(" at new "," at ");return E.displayName&&kt.includes("<anonymous>")&&(kt=kt.replace("<anonymous>",E.displayName)),kt}while(1<=Ke&&0<=lt);break}}}finally{an=!1,Error.prepareStackTrace=k}return(E=E?E.displayName||E.name:"")?zt(E):""}var Bt=Object.prototype.hasOwnProperty,Vn=[],ti=-1;function si(E){return{current:E}}function gi(E){0>ti||(E.current=Vn[ti],Vn[ti]=null,ti--)}function Mn(E,M){ti++,Vn[ti]=E.current,E.current=M}var ui={},Ai=si(ui),xi=si(!1),Ir=ui;function Sn(E,M){var k=E.type.contextTypes;if(!k)return ui;var z=E.stateNode;if(z&&z.__reactInternalMemoizedUnmaskedChildContext===M)return z.__reactInternalMemoizedMaskedChildContext;var te={},ue;for(ue in k)te[ue]=M[ue];return z&&(E=E.stateNode,E.__reactInternalMemoizedUnmaskedChildContext=M,E.__reactInternalMemoizedMaskedChildContext=te),te}function fi(E){return E=E.childContextTypes,E!=null}function qr(){gi(xi),gi(Ai)}function rr(E,M,k){if(Ai.current!==ui)throw Error(l(168));Mn(Ai,M),Mn(xi,k)}function q(E,M,k){var z=E.stateNode;if(M=M.childContextTypes,typeof z.getChildContext!="function")return k;z=z.getChildContext();for(var te in z)if(!(te in M))throw Error(l(108,D(E)||"Unknown",te));return a({},k,z)}function oe(E){return E=(E=E.stateNode)&&E.__reactInternalMemoizedMergedChildContext||ui,Ir=Ai.current,Mn(Ai,E),Mn(xi,xi.current),!0}function pe(E,M,k){var z=E.stateNode;if(!z)throw Error(l(169));k?(E=q(E,M,Ir),z.__reactInternalMemoizedMergedChildContext=E,gi(xi),gi(Ai),Mn(Ai,E)):gi(xi),Mn(xi,k)}var _e=Math.clz32?Math.clz32:at,Ne=Math.log,nt=Math.LN2;function at(E){return E>>>=0,E===0?32:31-(Ne(E)/nt|0)|0}var Kt=64,Wt=4194304;function pt(E){switch(E&-E){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return E&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return E&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return E}}function Rt(E,M){var k=E.pendingLanes;if(k===0)return 0;var z=0,te=E.suspendedLanes,ue=E.pingedLanes,Ke=k&268435455;if(Ke!==0){var lt=Ke&~te;lt!==0?z=pt(lt):(ue&=Ke,ue!==0&&(z=pt(ue)))}else Ke=k&~te,Ke!==0?z=pt(Ke):ue!==0&&(z=pt(ue));if(z===0)return 0;if(M!==0&&M!==z&&!(M&te)&&(te=z&-z,ue=M&-M,te>=ue||te===16&&(ue&4194240)!==0))return M;if(z&4&&(z|=k&16),M=E.entangledLanes,M!==0)for(E=E.entanglements,M&=z;0<M;)k=31-_e(M),te=1<<k,z|=E[k],M&=~te;return z}function sn(E,M){switch(E){case 1:case 2:case 4:return M+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return M+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Dn(E,M){for(var k=E.suspendedLanes,z=E.pingedLanes,te=E.expirationTimes,ue=E.pendingLanes;0<ue;){var Ke=31-_e(ue),lt=1<<Ke,kt=te[Ke];kt===-1?(!(lt&k)||lt&z)&&(te[Ke]=sn(lt,M)):kt<=M&&(E.expiredLanes|=lt),ue&=~lt}}function Yn(E){return E=E.pendingLanes&-1073741825,E!==0?E:E&1073741824?1073741824:0}function hi(E){for(var M=[],k=0;31>k;k++)M.push(E);return M}function Di(E,M,k){E.pendingLanes|=M,M!==536870912&&(E.suspendedLanes=0,E.pingedLanes=0),E=E.eventTimes,M=31-_e(M),E[M]=k}function Pi(E,M){var k=E.pendingLanes&~M;E.pendingLanes=M,E.suspendedLanes=0,E.pingedLanes=0,E.expiredLanes&=M,E.mutableReadLanes&=M,E.entangledLanes&=M,M=E.entanglements;var z=E.eventTimes;for(E=E.expirationTimes;0<k;){var te=31-_e(k),ue=1<<te;M[te]=0,z[te]=-1,E[te]=-1,k&=~ue}}function Ei(E,M){var k=E.entangledLanes|=M;for(E=E.entanglements;k;){var z=31-_e(k),te=1<<z;te&M|E[z]&M&&(E[z]|=M),k&=~te}}var oi=0;function ar(E){return E&=-E,1<E?4<E?E&268435455?16:536870912:4:1}var Ri=o.unstable_scheduleCallback,Ur=o.unstable_cancelCallback,vs=o.unstable_shouldYield,is=o.unstable_requestPaint,ur=o.unstable_now,Fs=o.unstable_ImmediatePriority,Wr=o.unstable_UserBlockingPriority,Ns=o.unstable_NormalPriority,Ul=o.unstable_IdlePriority,Fo=null,js=null;function zl(E){if(js&&typeof js.onCommitFiberRoot=="function")try{js.onCommitFiberRoot(Fo,E,void 0,(E.current.flags&128)===128)}catch{}}function Gl(E,M){return E===M&&(E!==0||1/E===1/M)||E!==E&&M!==M}var Xs=typeof Object.is=="function"?Object.is:Gl,ao=null,Ca=!1,qa=!1;function yl(E){ao===null?ao=[E]:ao.push(E)}function Hl(E){Ca=!0,yl(E)}function vr(){if(!qa&&ao!==null){qa=!0;var E=0,M=oi;try{var k=ao;for(oi=1;E<k.length;E++){var z=k[E];do z=z(!0);while(z!==null)}ao=null,Ca=!1}catch(te){throw ao!==null&&(ao=ao.slice(E+1)),Ri(Fs,vr),te}finally{oi=M,qa=!1}}return null}var hg=d.ReactCurrentBatchConfig;function ih(E,M){if(Xs(E,M))return!0;if(typeof E!="object"||E===null||typeof M!="object"||M===null)return!1;var k=Object.keys(E),z=Object.keys(M);if(k.length!==z.length)return!1;for(z=0;z<k.length;z++){var te=k[z];if(!Bt.call(M,te)||!Xs(E[te],M[te]))return!1}return!0}function dg(E){switch(E.tag){case 5:return zt(E.type);case 16:return zt("Lazy");case 13:return zt("Suspense");case 19:return zt("SuspenseList");case 0:case 2:case 15:return E=bn(E.type,!1),E;case 11:return E=bn(E.type.render,!1),E;case 1:return E=bn(E.type,!0),E;default:return""}}function Ho(E,M){if(E&&E.defaultProps){M=a({},M),E=E.defaultProps;for(var k in E)M[k]===void 0&&(M[k]=E[k]);return M}return M}var xl=si(null),rh=null,Sc=null,fd=null;function pd(){fd=Sc=rh=null}function ep(E,M,k){gt?(Mn(xl,M._currentValue),M._currentValue=k):(Mn(xl,M._currentValue2),M._currentValue2=k)}function md(E){var M=xl.current;gi(xl),gt?E._currentValue=M:E._currentValue2=M}function gd(E,M,k){for(;E!==null;){var z=E.alternate;if((E.childLanes&M)!==M?(E.childLanes|=M,z!==null&&(z.childLanes|=M)):z!==null&&(z.childLanes&M)!==M&&(z.childLanes|=M),E===k)break;E=E.return}}function Tc(E,M){rh=E,fd=Sc=null,E=E.dependencies,E!==null&&E.firstContext!==null&&(E.lanes&M&&(xr=!0),E.firstContext=null)}function Vo(E){var M=gt?E._currentValue:E._currentValue2;if(fd!==E)if(E={context:E,memoizedValue:M,next:null},Sc===null){if(rh===null)throw Error(l(308));Sc=E,rh.dependencies={lanes:0,firstContext:E}}else Sc=Sc.next=E;return M}var Qo=null,ua=!1;function lo(E){E.updateQueue={baseState:E.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ks(E,M){E=E.updateQueue,M.updateQueue===E&&(M.updateQueue={baseState:E.baseState,firstBaseUpdate:E.firstBaseUpdate,lastBaseUpdate:E.lastBaseUpdate,shared:E.shared,effects:E.effects})}function Ma(E,M){return{eventTime:E,lane:M,tag:0,payload:null,callback:null,next:null}}function xo(E,M){var k=E.updateQueue;k!==null&&(k=k.shared,Is!==null&&E.mode&1&&!(Ji&2)?(E=k.interleaved,E===null?(M.next=M,Qo===null?Qo=[k]:Qo.push(k)):(M.next=E.next,E.next=M),k.interleaved=M):(E=k.pending,E===null?M.next=M:(M.next=E.next,E.next=M),k.pending=M))}function El(E,M,k){if(M=M.updateQueue,M!==null&&(M=M.shared,(k&4194240)!==0)){var z=M.lanes;z&=E.pendingLanes,k|=z,M.lanes=k,Ei(E,k)}}function Eo(E,M){var k=E.updateQueue,z=E.alternate;if(z!==null&&(z=z.updateQueue,k===z)){var te=null,ue=null;if(k=k.firstBaseUpdate,k!==null){do{var Ke={eventTime:k.eventTime,lane:k.lane,tag:k.tag,payload:k.payload,callback:k.callback,next:null};ue===null?te=ue=Ke:ue=ue.next=Ke,k=k.next}while(k!==null);ue===null?te=ue=M:ue=ue.next=M}else te=ue=M;k={baseState:z.baseState,firstBaseUpdate:te,lastBaseUpdate:ue,shared:z.shared,effects:z.effects},E.updateQueue=k;return}E=k.lastBaseUpdate,E===null?k.firstBaseUpdate=M:E.next=M,k.lastBaseUpdate=M}function Jr(E,M,k,z){var te=E.updateQueue;ua=!1;var ue=te.firstBaseUpdate,Ke=te.lastBaseUpdate,lt=te.shared.pending;if(lt!==null){te.shared.pending=null;var kt=lt,En=kt.next;kt.next=null,Ke===null?ue=En:Ke.next=En,Ke=kt;var $n=E.alternate;$n!==null&&($n=$n.updateQueue,lt=$n.lastBaseUpdate,lt!==Ke&&(lt===null?$n.firstBaseUpdate=En:lt.next=En,$n.lastBaseUpdate=kt))}if(ue!==null){var zi=te.baseState;Ke=0,$n=En=kt=null,lt=ue;do{var Ci=lt.lane,jr=lt.eventTime;if((z&Ci)===Ci){$n!==null&&($n=$n.next={eventTime:jr,lane:0,tag:lt.tag,payload:lt.payload,callback:lt.callback,next:null});e:{var vi=E,So=lt;switch(Ci=M,jr=k,So.tag){case 1:if(vi=So.payload,typeof vi=="function"){zi=vi.call(jr,zi,Ci);break e}zi=vi;break e;case 3:vi.flags=vi.flags&-65537|128;case 0:if(vi=So.payload,Ci=typeof vi=="function"?vi.call(jr,zi,Ci):vi,Ci==null)break e;zi=a({},zi,Ci);break e;case 2:ua=!0}}lt.callback!==null&&lt.lane!==0&&(E.flags|=64,Ci=te.effects,Ci===null?te.effects=[lt]:Ci.push(lt))}else jr={eventTime:jr,lane:Ci,tag:lt.tag,payload:lt.payload,callback:lt.callback,next:null},$n===null?(En=$n=jr,kt=zi):$n=$n.next=jr,Ke|=Ci;if(lt=lt.next,lt===null){if(lt=te.shared.pending,lt===null)break;Ci=lt,lt=Ci.next,Ci.next=null,te.lastBaseUpdate=Ci,te.shared.pending=null}}while(1);if($n===null&&(kt=zi),te.baseState=kt,te.firstBaseUpdate=En,te.lastBaseUpdate=$n,M=te.shared.interleaved,M!==null){te=M;do Ke|=te.lane,te=te.next;while(te!==M)}else ue===null&&(te.shared.lanes=0);wh|=Ke,E.lanes=Ke,E.memoizedState=zi}}function sh(E,M,k){if(E=M.effects,M.effects=null,E!==null)for(M=0;M<E.length;M++){var z=E[M],te=z.callback;if(te!==null){if(z.callback=null,z=k,typeof te!="function")throw Error(l(191,te));te.call(z)}}}var tp=new r.Component().refs;function Ad(E,M,k,z){M=E.memoizedState,k=k(z,M),k=k==null?M:a({},M,k),E.memoizedState=k,E.lanes===0&&(E.updateQueue.baseState=k)}var _l={isMounted:function(E){return(E=E._reactInternals)?L(E)===E:!1},enqueueSetState:function(E,M,k){E=E._reactInternals;var z=No(),te=Yc(E),ue=Ma(z,te);ue.payload=M,k!=null&&(ue.callback=k),xo(E,ue),M=Fa(E,te,z),M!==null&&El(M,E,te)},enqueueReplaceState:function(E,M,k){E=E._reactInternals;var z=No(),te=Yc(E),ue=Ma(z,te);ue.tag=1,ue.payload=M,k!=null&&(ue.callback=k),xo(E,ue),M=Fa(E,te,z),M!==null&&El(M,E,te)},enqueueForceUpdate:function(E,M){E=E._reactInternals;var k=No(),z=Yc(E),te=Ma(k,z);te.tag=2,M!=null&&(te.callback=M),xo(E,te),M=Fa(E,z,k),M!==null&&El(M,E,z)}};function np(E,M,k,z,te,ue,Ke){return E=E.stateNode,typeof E.shouldComponentUpdate=="function"?E.shouldComponentUpdate(z,ue,Ke):M.prototype&&M.prototype.isPureReactComponent?!ih(k,z)||!ih(te,ue):!0}function ip(E,M,k){var z=!1,te=ui,ue=M.contextType;return typeof ue=="object"&&ue!==null?ue=Vo(ue):(te=fi(M)?Ir:Ai.current,z=M.contextTypes,ue=(z=z!=null)?Sn(E,te):ui),M=new M(k,ue),E.memoizedState=M.state!==null&&M.state!==void 0?M.state:null,M.updater=_l,E.stateNode=M,M._reactInternals=E,z&&(E=E.stateNode,E.__reactInternalMemoizedUnmaskedChildContext=te,E.__reactInternalMemoizedMaskedChildContext=ue),M}function rp(E,M,k,z){E=M.state,typeof M.componentWillReceiveProps=="function"&&M.componentWillReceiveProps(k,z),typeof M.UNSAFE_componentWillReceiveProps=="function"&&M.UNSAFE_componentWillReceiveProps(k,z),M.state!==E&&_l.enqueueReplaceState(M,M.state,null)}function vd(E,M,k,z){var te=E.stateNode;te.props=k,te.state=E.memoizedState,te.refs=tp,lo(E);var ue=M.contextType;typeof ue=="object"&&ue!==null?te.context=Vo(ue):(ue=fi(M)?Ir:Ai.current,te.context=Sn(E,ue)),te.state=E.memoizedState,ue=M.getDerivedStateFromProps,typeof ue=="function"&&(Ad(E,M,ue,k),te.state=E.memoizedState),typeof M.getDerivedStateFromProps=="function"||typeof te.getSnapshotBeforeUpdate=="function"||typeof te.UNSAFE_componentWillMount!="function"&&typeof te.componentWillMount!="function"||(M=te.state,typeof te.componentWillMount=="function"&&te.componentWillMount(),typeof te.UNSAFE_componentWillMount=="function"&&te.UNSAFE_componentWillMount(),M!==te.state&&_l.enqueueReplaceState(te,te.state,null),Jr(E,k,te,z),te.state=E.memoizedState),typeof te.componentDidMount=="function"&&(E.flags|=4194308)}var Ic=[],Rc=0,oh=null,ah=0,Wo=[],jo=0,Ja=null,ba=1,Xo="";function Vl(E,M){Ic[Rc++]=ah,Ic[Rc++]=oh,oh=E,ah=M}function Sa(E,M,k){Wo[jo++]=ba,Wo[jo++]=Xo,Wo[jo++]=Ja,Ja=E;var z=ba;E=Xo;var te=32-_e(z)-1;z&=~(1<<te),k+=1;var ue=32-_e(M)+te;if(30<ue){var Ke=te-te%5;ue=(z&(1<<Ke)-1).toString(32),z>>=Ke,te-=Ke,ba=1<<32-_e(M)+te|k<<te|z,Xo=ue+E}else ba=1<<ue|k<<te|z,Xo=E}function Rr(E){E.return!==null&&(Vl(E,1),Sa(E,1,0))}function yd(E){for(;E===oh;)oh=Ic[--Rc],Ic[Rc]=null,ah=Ic[--Rc],Ic[Rc]=null;for(;E===Ja;)Ja=Wo[--jo],Wo[jo]=null,Xo=Wo[--jo],Wo[jo]=null,ba=Wo[--jo],Wo[jo]=null}var jt=null,kr=null,zr=!1,Bc=!1,ha=null;function Ql(E,M){var k=Na(5,null,null,0);k.elementType="DELETED",k.stateNode=M,k.return=E,M=E.deletions,M===null?(E.deletions=[k],E.flags|=16):M.push(k)}function Lc(E,M){switch(E.tag){case 5:return M=bi(M,E.type,E.pendingProps),M!==null?(E.stateNode=M,jt=E,kr=st(M),!0):!1;case 6:return M=vn(M,E.pendingProps),M!==null?(E.stateNode=M,jt=E,kr=null,!0):!1;case 13:if(M=Nt(M),M!==null){var k=Ja!==null?{id:ba,overflow:Xo}:null;return E.memoizedState={dehydrated:M,treeContext:k,retryLane:1073741824},k=Na(18,null,null,0),k.stateNode=M,k.return=E,E.child=k,jt=E,kr=null,!0}return!1;default:return!1}}function Za(E){return(E.mode&1)!==0&&(E.flags&128)===0}function Dc(E){if(zr){var M=kr;if(M){var k=M;if(!Lc(E,M)){if(Za(E))throw Error(l(418));M=De(k);var z=jt;M&&Lc(E,M)?Ql(z,k):(E.flags=E.flags&-4097|2,zr=!1,jt=E)}}else{if(Za(E))throw Error(l(418));E.flags=E.flags&-4097|2,zr=!1,jt=E}}}function lh(E){for(E=E.return;E!==null&&E.tag!==5&&E.tag!==3&&E.tag!==13;)E=E.return;jt=E}function hs(E){if(!ut||E!==jt)return!1;if(!zr)return lh(E),zr=!0,!1;if(E.tag!==3&&(E.tag!==5||et(E.type)&&!je(E.type,E.memoizedProps))){var M=kr;if(M){if(Za(E)){for(E=kr;E;)E=De(E);throw Error(l(418))}for(;M;)Ql(E,M),M=De(M)}}if(lh(E),E.tag===13){if(!ut)throw Error(l(316));if(E=E.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(l(317));kr=pn(E)}else kr=jt?De(E.stateNode):null;return!0}function Wl(){ut&&(kr=jt=null,Bc=zr=!1)}function ss(E){ha===null?ha=[E]:ha.push(E)}function co(E,M,k){if(E=k.ref,E!==null&&typeof E!="function"&&typeof E!="object"){if(k._owner){if(k=k._owner,k){if(k.tag!==1)throw Error(l(309));var z=k.stateNode}if(!z)throw Error(l(147,E));var te=z,ue=""+E;return M!==null&&M.ref!==null&&typeof M.ref=="function"&&M.ref._stringRef===ue?M.ref:(M=function(Ke){var lt=te.refs;lt===tp&&(lt=te.refs={}),Ke===null?delete lt[ue]:lt[ue]=Ke},M._stringRef=ue,M)}if(typeof E!="string")throw Error(l(284));if(!k._owner)throw Error(l(290,E))}return E}function jl(E,M){throw E=Object.prototype.toString.call(M),Error(l(31,E==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":E))}function ch(E){var M=E._init;return M(E._payload)}function fu(E){function M(Mt,ft){if(E){var Lt=Mt.deletions;Lt===null?(Mt.deletions=[ft],Mt.flags|=16):Lt.push(ft)}}function k(Mt,ft){if(!E)return null;for(;ft!==null;)M(Mt,ft),ft=ft.sibling;return null}function z(Mt,ft){for(Mt=new Map;ft!==null;)ft.key!==null?Mt.set(ft.key,ft):Mt.set(ft.index,ft),ft=ft.sibling;return Mt}function te(Mt,ft){return Mt=Jc(Mt,ft),Mt.index=0,Mt.sibling=null,Mt}function ue(Mt,ft,Lt){return Mt.index=Lt,E?(Lt=Mt.alternate,Lt!==null?(Lt=Lt.index,Lt<ft?(Mt.flags|=2,ft):Lt):(Mt.flags|=2,ft)):(Mt.flags|=1048576,ft)}function Ke(Mt){return E&&Mt.alternate===null&&(Mt.flags|=2),Mt}function lt(Mt,ft,Lt,zn){return ft===null||ft.tag!==6?(ft=Ig(Lt,Mt.mode,zn),ft.return=Mt,ft):(ft=te(ft,Lt),ft.return=Mt,ft)}function kt(Mt,ft,Lt,zn){var pi=Lt.type;return pi===m?$n(Mt,ft,Lt.props.children,zn,Lt.key):ft!==null&&(ft.elementType===pi||typeof pi=="object"&&pi!==null&&pi.$$typeof===_&&ch(pi)===ft.type)?(zn=te(ft,Lt.props),zn.ref=co(Mt,ft,Lt),zn.return=Mt,zn):(zn=_p(Lt.type,Lt.key,Lt.props,null,Mt.mode,zn),zn.ref=co(Mt,ft,Lt),zn.return=Mt,zn)}function En(Mt,ft,Lt,zn){return ft===null||ft.tag!==4||ft.stateNode.containerInfo!==Lt.containerInfo||ft.stateNode.implementation!==Lt.implementation?(ft=Rg(Lt,Mt.mode,zn),ft.return=Mt,ft):(ft=te(ft,Lt.children||[]),ft.return=Mt,ft)}function $n(Mt,ft,Lt,zn,pi){return ft===null||ft.tag!==7?(ft=wu(Lt,Mt.mode,zn,pi),ft.return=Mt,ft):(ft=te(ft,Lt),ft.return=Mt,ft)}function zi(Mt,ft,Lt){if(typeof ft=="string"&&ft!==""||typeof ft=="number")return ft=Ig(""+ft,Mt.mode,Lt),ft.return=Mt,ft;if(typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case c:return Lt=_p(ft.type,ft.key,ft.props,null,Mt.mode,Lt),Lt.ref=co(Mt,null,ft),Lt.return=Mt,Lt;case h:return ft=Rg(ft,Mt.mode,Lt),ft.return=Mt,ft;case _:var zn=ft._init;return zi(Mt,zn(ft._payload),Lt)}if(ae(ft)||P(ft))return ft=wu(ft,Mt.mode,Lt,null),ft.return=Mt,ft;jl(Mt,ft)}return null}function Ci(Mt,ft,Lt,zn){var pi=ft!==null?ft.key:null;if(typeof Lt=="string"&&Lt!==""||typeof Lt=="number")return pi!==null?null:lt(Mt,ft,""+Lt,zn);if(typeof Lt=="object"&&Lt!==null){switch(Lt.$$typeof){case c:return Lt.key===pi?kt(Mt,ft,Lt,zn):null;case h:return Lt.key===pi?En(Mt,ft,Lt,zn):null;case _:return pi=Lt._init,Ci(Mt,ft,pi(Lt._payload),zn)}if(ae(Lt)||P(Lt))return pi!==null?null:$n(Mt,ft,Lt,zn,null);jl(Mt,Lt)}return null}function jr(Mt,ft,Lt,zn,pi){if(typeof zn=="string"&&zn!==""||typeof zn=="number")return Mt=Mt.get(Lt)||null,lt(ft,Mt,""+zn,pi);if(typeof zn=="object"&&zn!==null){switch(zn.$$typeof){case c:return Mt=Mt.get(zn.key===null?Lt:zn.key)||null,kt(ft,Mt,zn,pi);case h:return Mt=Mt.get(zn.key===null?Lt:zn.key)||null,En(ft,Mt,zn,pi);case _:var qi=zn._init;return jr(Mt,ft,Lt,qi(zn._payload),pi)}if(ae(zn)||P(zn))return Mt=Mt.get(Lt)||null,$n(ft,Mt,zn,pi,null);jl(ft,zn)}return null}function vi(Mt,ft,Lt,zn){for(var pi=null,qi=null,Gi=ft,Er=ft=0,to=null;Gi!==null&&Er<Lt.length;Er++){Gi.index>Er?(to=Gi,Gi=null):to=Gi.sibling;var _r=Ci(Mt,Gi,Lt[Er],zn);if(_r===null){Gi===null&&(Gi=to);break}E&&Gi&&_r.alternate===null&&M(Mt,Gi),ft=ue(_r,ft,Er),qi===null?pi=_r:qi.sibling=_r,qi=_r,Gi=to}if(Er===Lt.length)return k(Mt,Gi),zr&&Vl(Mt,Er),pi;if(Gi===null){for(;Er<Lt.length;Er++)Gi=zi(Mt,Lt[Er],zn),Gi!==null&&(ft=ue(Gi,ft,Er),qi===null?pi=Gi:qi.sibling=Gi,qi=Gi);return zr&&Vl(Mt,Er),pi}for(Gi=z(Mt,Gi);Er<Lt.length;Er++)to=jr(Gi,Mt,Er,Lt[Er],zn),to!==null&&(E&&to.alternate!==null&&Gi.delete(to.key===null?Er:to.key),ft=ue(to,ft,Er),qi===null?pi=to:qi.sibling=to,qi=to);return E&&Gi.forEach(function(Zc){return M(Mt,Zc)}),zr&&Vl(Mt,Er),pi}function So(Mt,ft,Lt,zn){var pi=P(Lt);if(typeof pi!="function")throw Error(l(150));if(Lt=pi.call(Lt),Lt==null)throw Error(l(151));for(var qi=pi=null,Gi=ft,Er=ft=0,to=null,_r=Lt.next();Gi!==null&&!_r.done;Er++,_r=Lt.next()){Gi.index>Er?(to=Gi,Gi=null):to=Gi.sibling;var Zc=Ci(Mt,Gi,_r.value,zn);if(Zc===null){Gi===null&&(Gi=to);break}E&&Gi&&Zc.alternate===null&&M(Mt,Gi),ft=ue(Zc,ft,Er),qi===null?pi=Zc:qi.sibling=Zc,qi=Zc,Gi=to}if(_r.done)return k(Mt,Gi),zr&&Vl(Mt,Er),pi;if(Gi===null){for(;!_r.done;Er++,_r=Lt.next())_r=zi(Mt,_r.value,zn),_r!==null&&(ft=ue(_r,ft,Er),qi===null?pi=_r:qi.sibling=_r,qi=_r);return zr&&Vl(Mt,Er),pi}for(Gi=z(Mt,Gi);!_r.done;Er++,_r=Lt.next())_r=jr(Gi,Mt,Er,_r.value,zn),_r!==null&&(E&&_r.alternate!==null&&Gi.delete(_r.key===null?Er:_r.key),ft=ue(_r,ft,Er),qi===null?pi=_r:qi.sibling=_r,qi=_r);return E&&Gi.forEach(function(zM){return M(Mt,zM)}),zr&&Vl(Mt,Er),pi}function ka(Mt,ft,Lt,zn){if(typeof Lt=="object"&&Lt!==null&&Lt.type===m&&Lt.key===null&&(Lt=Lt.props.children),typeof Lt=="object"&&Lt!==null){switch(Lt.$$typeof){case c:e:{for(var pi=Lt.key,qi=ft;qi!==null;){if(qi.key===pi){if(pi=Lt.type,pi===m){if(qi.tag===7){k(Mt,qi.sibling),ft=te(qi,Lt.props.children),ft.return=Mt,Mt=ft;break e}}else if(qi.elementType===pi||typeof pi=="object"&&pi!==null&&pi.$$typeof===_&&ch(pi)===qi.type){k(Mt,qi.sibling),ft=te(qi,Lt.props),ft.ref=co(Mt,qi,Lt),ft.return=Mt,Mt=ft;break e}k(Mt,qi);break}else M(Mt,qi);qi=qi.sibling}Lt.type===m?(ft=wu(Lt.props.children,Mt.mode,zn,Lt.key),ft.return=Mt,Mt=ft):(zn=_p(Lt.type,Lt.key,Lt.props,null,Mt.mode,zn),zn.ref=co(Mt,ft,Lt),zn.return=Mt,Mt=zn)}return Ke(Mt);case h:e:{for(qi=Lt.key;ft!==null;){if(ft.key===qi)if(ft.tag===4&&ft.stateNode.containerInfo===Lt.containerInfo&&ft.stateNode.implementation===Lt.implementation){k(Mt,ft.sibling),ft=te(ft,Lt.children||[]),ft.return=Mt,Mt=ft;break e}else{k(Mt,ft);break}else M(Mt,ft);ft=ft.sibling}ft=Rg(Lt,Mt.mode,zn),ft.return=Mt,Mt=ft}return Ke(Mt);case _:return qi=Lt._init,ka(Mt,ft,qi(Lt._payload),zn)}if(ae(Lt))return vi(Mt,ft,Lt,zn);if(P(Lt))return So(Mt,ft,Lt,zn);jl(Mt,Lt)}return typeof Lt=="string"&&Lt!==""||typeof Lt=="number"?(Lt=""+Lt,ft!==null&&ft.tag===6?(k(Mt,ft.sibling),ft=te(ft,Lt),ft.return=Mt,Mt=ft):(k(Mt,ft),ft=Ig(Lt,Mt.mode,zn),ft.return=Mt,Mt=ft),Ke(Mt)):k(Mt,ft)}return ka}var kn=fu(!0),Xl=fu(!1),Kl={},Ss=si(Kl),Yl=si(Kl),Pc=si(Kl);function yr(E){if(E===Kl)throw Error(l(174));return E}function hr(E,M){Mn(Pc,M),Mn(Yl,E),Mn(Ss,Kl),E=ne(M),gi(Ss),Mn(Ss,E)}function Us(){gi(Ss),gi(Yl),gi(Pc)}function Oc(E){var M=yr(Pc.current),k=yr(Ss.current);M=X(k,E.type,M),k!==M&&(Mn(Yl,E),Mn(Ss,M))}function xd(E){Yl.current===E&&(gi(Ss),gi(Yl))}var Gr=si(0);function uh(E){for(var M=E;M!==null;){if(M.tag===13){var k=M.memoizedState;if(k!==null&&(k=k.dehydrated,k===null||ln(k)||ei(k)))return M}else if(M.tag===19&&M.memoizedProps.revealOrder!==void 0){if(M.flags&128)return M}else if(M.child!==null){M.child.return=M,M=M.child;continue}if(M===E)break;for(;M.sibling===null;){if(M.return===null||M.return===E)return null;M=M.return}M.sibling.return=M.return,M=M.sibling}return null}var Ed=[];function zs(){for(var E=0;E<Ed.length;E++){var M=Ed[E];gt?M._workInProgressVersionPrimary=null:M._workInProgressVersionSecondary=null}Ed.length=0}var Qe=d.ReactCurrentDispatcher,_o=d.ReactCurrentBatchConfig,ql=0,Or=null,Zr=null,$r=null,Fc=!1,Ta=!1,Ia=0,Nc=0;function ts(){throw Error(l(321))}function Ra(E,M){if(M===null)return!1;for(var k=0;k<M.length&&k<E.length;k++)if(!Xs(E[k],M[k]))return!1;return!0}function $a(E,M,k,z,te,ue){if(ql=ue,Or=M,M.memoizedState=null,M.updateQueue=null,M.lanes=0,Qe.current=E===null||E.memoizedState===null?sp:op,E=k(z,te),Ta){ue=0;do{if(Ta=!1,Ia=0,25<=ue)throw Error(l(301));ue+=1,$r=Zr=null,M.updateQueue=null,Qe.current=_d,E=k(z,te)}while(Ta)}if(Qe.current=Oa,M=Zr!==null&&Zr.next!==null,ql=0,$r=Zr=Or=null,Fc=!1,M)throw Error(l(300));return E}function wl(){var E=Ia!==0;return Ia=0,E}function Ks(){var E={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $r===null?Or.memoizedState=$r=E:$r=$r.next=E,$r}function wo(){if(Zr===null){var E=Or.alternate;E=E!==null?E.memoizedState:null}else E=Zr.next;var M=$r===null?Or.memoizedState:$r.next;if(M!==null)$r=M,Zr=E;else{if(E===null)throw Error(l(310));Zr=E,E={memoizedState:Zr.memoizedState,baseState:Zr.baseState,baseQueue:Zr.baseQueue,queue:Zr.queue,next:null},$r===null?Or.memoizedState=$r=E:$r=$r.next=E}return $r}function Br(E,M){return typeof M=="function"?M(E):M}function Jl(E){var M=wo(),k=M.queue;if(k===null)throw Error(l(311));k.lastRenderedReducer=E;var z=Zr,te=z.baseQueue,ue=k.pending;if(ue!==null){if(te!==null){var Ke=te.next;te.next=ue.next,ue.next=Ke}z.baseQueue=te=ue,k.pending=null}if(te!==null){ue=te.next,z=z.baseState;var lt=Ke=null,kt=null,En=ue;do{var $n=En.lane;if((ql&$n)===$n)kt!==null&&(kt=kt.next={lane:0,action:En.action,hasEagerState:En.hasEagerState,eagerState:En.eagerState,next:null}),z=En.hasEagerState?En.eagerState:E(z,En.action);else{var zi={lane:$n,action:En.action,hasEagerState:En.hasEagerState,eagerState:En.eagerState,next:null};kt===null?(lt=kt=zi,Ke=z):kt=kt.next=zi,Or.lanes|=$n,wh|=$n}En=En.next}while(En!==null&&En!==ue);kt===null?Ke=z:kt.next=lt,Xs(z,M.memoizedState)||(xr=!0),M.memoizedState=z,M.baseState=Ke,M.baseQueue=kt,k.lastRenderedState=z}if(E=k.interleaved,E!==null){te=E;do ue=te.lane,Or.lanes|=ue,wh|=ue,te=te.next;while(te!==E)}else te===null&&(k.lanes=0);return[M.memoizedState,k.dispatch]}function pu(E){var M=wo(),k=M.queue;if(k===null)throw Error(l(311));k.lastRenderedReducer=E;var z=k.dispatch,te=k.pending,ue=M.memoizedState;if(te!==null){k.pending=null;var Ke=te=te.next;do ue=E(ue,Ke.action),Ke=Ke.next;while(Ke!==te);Xs(ue,M.memoizedState)||(xr=!0),M.memoizedState=ue,M.baseQueue===null&&(M.baseState=ue),k.lastRenderedState=ue}return[ue,z]}function el(){}function hh(E,M){var k=Or,z=wo(),te=M(),ue=!Xs(z.memoizedState,te);if(ue&&(z.memoizedState=te,xr=!0),z=z.queue,qs(dh.bind(null,k,z,E),[E]),z.getSnapshot!==M||ue||$r!==null&&$r.memoizedState.tag&1){if(k.flags|=2048,Qi(9,La.bind(null,k,z,te,M),void 0,null),Is===null)throw Error(l(349));ql&30||Ba(k,M,te)}return te}function Ba(E,M,k){E.flags|=16384,E={getSnapshot:M,value:k},M=Or.updateQueue,M===null?(M={lastEffect:null,stores:null},Or.updateQueue=M,M.stores=[E]):(k=M.stores,k===null?M.stores=[E]:k.push(E))}function La(E,M,k,z){M.value=k,M.getSnapshot=z,Qn(M)&&Fa(E,1,-1)}function dh(E,M,k){return k(function(){Qn(M)&&Fa(E,1,-1)})}function Qn(E){var M=E.getSnapshot;E=E.value;try{var k=M();return!Xs(E,k)}catch{return!0}}function wi(E){var M=Ks();return typeof E=="function"&&(E=E()),M.memoizedState=M.baseState=E,E={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Br,lastRenderedState:E},M.queue=E,E=E.dispatch=es.bind(null,Or,E),[M.memoizedState,E]}function Qi(E,M,k,z){return E={tag:E,create:M,destroy:k,deps:z,next:null},M=Or.updateQueue,M===null?(M={lastEffect:null,stores:null},Or.updateQueue=M,M.lastEffect=E.next=E):(k=M.lastEffect,k===null?M.lastEffect=E.next=E:(z=k.next,k.next=E,E.next=z,M.lastEffect=E)),E}function ds(){return wo().memoizedState}function $i(E,M,k,z){var te=Ks();Or.flags|=E,te.memoizedState=Qi(1|M,k,void 0,z===void 0?null:z)}function Ys(E,M,k,z){var te=wo();z=z===void 0?null:z;var ue=void 0;if(Zr!==null){var Ke=Zr.memoizedState;if(ue=Ke.destroy,z!==null&&Ra(z,Ke.deps)){te.memoizedState=Qi(M,k,ue,z);return}}Or.flags|=E,te.memoizedState=Qi(1|M,k,ue,z)}function Jn(E,M){return $i(8390656,8,E,M)}function qs(E,M){return Ys(2048,8,E,M)}function Ki(E,M){return Ys(4,2,E,M)}function mu(E,M){return Ys(4,4,E,M)}function kc(E,M){if(typeof M=="function")return E=E(),M(E),function(){M(null)};if(M!=null)return E=E(),M.current=E,function(){M.current=null}}function uo(E,M,k){return k=k!=null?k.concat([E]):null,Ys(4,4,kc.bind(null,M,E),k)}function Js(){}function Bi(E,M){var k=wo();M=M===void 0?null:M;var z=k.memoizedState;return z!==null&&M!==null&&Ra(M,z[1])?z[0]:(k.memoizedState=[E,M],E)}function Da(E,M){var k=wo();M=M===void 0?null:M;var z=k.memoizedState;return z!==null&&M!==null&&Ra(M,z[1])?z[0]:(E=E(),k.memoizedState=[E,M],E)}function gu(E,M){var k=oi;oi=k!==0&&4>k?k:4,E(!0);var z=_o.transition;_o.transition={};try{E(!1),M()}finally{oi=k,_o.transition=z}}function Zs(){return wo().memoizedState}function Ar(E,M,k){var z=Yc(E);k={lane:z,action:k,hasEagerState:!1,eagerState:null,next:null},Yi(E)?mr(M,k):(fs(E,M,k),k=No(),E=Fa(E,z,k),E!==null&&Pa(E,M,z))}function es(E,M,k){var z=Yc(E),te={lane:z,action:k,hasEagerState:!1,eagerState:null,next:null};if(Yi(E))mr(M,te);else{fs(E,M,te);var ue=E.alternate;if(E.lanes===0&&(ue===null||ue.lanes===0)&&(ue=M.lastRenderedReducer,ue!==null))try{var Ke=M.lastRenderedState,lt=ue(Ke,k);if(te.hasEagerState=!0,te.eagerState=lt,Xs(lt,Ke))return}catch{}finally{}k=No(),E=Fa(E,z,k),E!==null&&Pa(E,M,z)}}function Yi(E){var M=E.alternate;return E===Or||M!==null&&M===Or}function mr(E,M){Ta=Fc=!0;var k=E.pending;k===null?M.next=M:(M.next=k.next,k.next=M),E.pending=M}function fs(E,M,k){Is!==null&&E.mode&1&&!(Ji&2)?(E=M.interleaved,E===null?(k.next=k,Qo===null?Qo=[M]:Qo.push(M)):(k.next=E.next,E.next=k),M.interleaved=k):(E=M.pending,E===null?k.next=k:(k.next=E.next,E.next=k),M.pending=k)}function Pa(E,M,k){if(k&4194240){var z=M.lanes;z&=E.pendingLanes,k|=z,M.lanes=k,Ei(E,k)}}var Oa={readContext:Vo,useCallback:ts,useContext:ts,useEffect:ts,useImperativeHandle:ts,useInsertionEffect:ts,useLayoutEffect:ts,useMemo:ts,useReducer:ts,useRef:ts,useState:ts,useDebugValue:ts,useDeferredValue:ts,useTransition:ts,useMutableSource:ts,useSyncExternalStore:ts,useId:ts,unstable_isNewReconciler:!1},sp={readContext:Vo,useCallback:function(E,M){return Ks().memoizedState=[E,M===void 0?null:M],E},useContext:Vo,useEffect:Jn,useImperativeHandle:function(E,M,k){return k=k!=null?k.concat([E]):null,$i(4194308,4,kc.bind(null,M,E),k)},useLayoutEffect:function(E,M){return $i(4194308,4,E,M)},useInsertionEffect:function(E,M){return $i(4,2,E,M)},useMemo:function(E,M){var k=Ks();return M=M===void 0?null:M,E=E(),k.memoizedState=[E,M],E},useReducer:function(E,M,k){var z=Ks();return M=k!==void 0?k(M):M,z.memoizedState=z.baseState=M,E={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:E,lastRenderedState:M},z.queue=E,E=E.dispatch=Ar.bind(null,Or,E),[z.memoizedState,E]},useRef:function(E){var M=Ks();return E={current:E},M.memoizedState=E},useState:wi,useDebugValue:Js,useDeferredValue:function(E){var M=wi(E),k=M[0],z=M[1];return Jn(function(){var te=_o.transition;_o.transition={};try{z(E)}finally{_o.transition=te}},[E]),k},useTransition:function(){var E=wi(!1),M=E[0];return E=gu.bind(null,E[1]),Ks().memoizedState=E,[M,E]},useMutableSource:function(){},useSyncExternalStore:function(E,M,k){var z=Or,te=Ks();if(zr){if(k===void 0)throw Error(l(407));k=k()}else{if(k=M(),Is===null)throw Error(l(349));ql&30||Ba(z,M,k)}te.memoizedState=k;var ue={value:k,getSnapshot:M};return te.queue=ue,Jn(dh.bind(null,z,ue,E),[E]),z.flags|=2048,Qi(9,La.bind(null,z,ue,k,M),void 0,null),k},useId:function(){var E=Ks(),M=Is.identifierPrefix;if(zr){var k=Xo,z=ba;k=(z&~(1<<32-_e(z)-1)).toString(32)+k,M=":"+M+"R"+k,k=Ia++,0<k&&(M+="H"+k.toString(32)),M+=":"}else k=Nc++,M=":"+M+"r"+k.toString(32)+":";return E.memoizedState=M},unstable_isNewReconciler:!1},op={readContext:Vo,useCallback:Bi,useContext:Vo,useEffect:qs,useImperativeHandle:uo,useInsertionEffect:Ki,useLayoutEffect:mu,useMemo:Da,useReducer:Jl,useRef:ds,useState:function(){return Jl(Br)},useDebugValue:Js,useDeferredValue:function(E){var M=Jl(Br),k=M[0],z=M[1];return qs(function(){var te=_o.transition;_o.transition={};try{z(E)}finally{_o.transition=te}},[E]),k},useTransition:function(){var E=Jl(Br)[0],M=wo().memoizedState;return[E,M]},useMutableSource:el,useSyncExternalStore:hh,useId:Zs,unstable_isNewReconciler:!1},_d={readContext:Vo,useCallback:Bi,useContext:Vo,useEffect:qs,useImperativeHandle:uo,useInsertionEffect:Ki,useLayoutEffect:mu,useMemo:Da,useReducer:pu,useRef:ds,useState:function(){return pu(Br)},useDebugValue:Js,useDeferredValue:function(E){var M=pu(Br),k=M[0],z=M[1];return qs(function(){var te=_o.transition;_o.transition={};try{z(E)}finally{_o.transition=te}},[E]),k},useTransition:function(){var E=pu(Br)[0],M=wo().memoizedState;return[E,M]},useMutableSource:el,useSyncExternalStore:hh,useId:Zs,unstable_isNewReconciler:!1};function Au(E,M){try{var k="",z=M;do k+=dg(z),z=z.return;while(z);var te=k}catch(ue){te=`
Error generating stack: `+ue.message+`
`+ue.stack}return{value:E,source:M,stack:te}}function fh(E,M){try{console.error(M.value)}catch(k){setTimeout(function(){throw k})}}var fg=typeof WeakMap=="function"?WeakMap:Map;function wd(E,M,k){k=Ma(-1,k),k.tag=3,k.payload={element:null};var z=M.value;return k.callback=function(){mp||(mp=!0,_g=z),fh(E,M)},k}function dr(E,M,k){k=Ma(-1,k),k.tag=3;var z=E.type.getDerivedStateFromError;if(typeof z=="function"){var te=M.value;k.payload=function(){return z(te)},k.callback=function(){fh(E,M)}}var ue=E.stateNode;return ue!==null&&typeof ue.componentDidCatch=="function"&&(k.callback=function(){fh(E,M),typeof z!="function"&&(Xc===null?Xc=new Set([this]):Xc.add(this));var Ke=M.stack;this.componentDidCatch(M.value,{componentStack:Ke!==null?Ke:""})}),k}function Ko(E,M,k){var z=E.pingCache;if(z===null){z=E.pingCache=new fg;var te=new Set;z.set(M,te)}else te=z.get(M),te===void 0&&(te=new Set,z.set(M,te));te.has(k)||(te.add(k),E=Yx.bind(null,E,M,k),M.then(E,E))}function os(E){do{var M;if((M=E.tag===13)&&(M=E.memoizedState,M=M!==null?M.dehydrated!==null:!0),M)return E;E=E.return}while(E!==null);return null}function Yo(E,M,k,z,te){return E.mode&1?(E.flags|=65536,E.lanes=te,E):(E===M?E.flags|=65536:(E.flags|=128,k.flags|=131072,k.flags&=-52805,k.tag===1&&(k.alternate===null?k.tag=17:(M=Ma(-1,1),M.tag=2,xo(k,M))),k.lanes|=1),E)}function ys(E){E.flags|=4}function Cl(E,M){if(E!==null&&E.child===M.child)return!0;if(M.flags&16)return!1;for(E=M.child;E!==null;){if(E.flags&12854||E.subtreeFlags&12854)return!1;E=E.sibling}return!0}var Ml,ph,mh,gh;if(It)Ml=function(E,M){for(var k=M.child;k!==null;){if(k.tag===5||k.tag===6)xe(E,k.stateNode);else if(k.tag!==4&&k.child!==null){k.child.return=k,k=k.child;continue}if(k===M)break;for(;k.sibling===null;){if(k.return===null||k.return===M)return;k=k.return}k.sibling.return=k.return,k=k.sibling}},ph=function(){},mh=function(E,M,k,z,te){if(E=E.memoizedProps,E!==z){var ue=M.stateNode,Ke=yr(Ss.current);k=Fe(ue,k,E,z,te,Ke),(M.updateQueue=k)&&ys(M)}},gh=function(E,M,k,z){k!==z&&ys(M)};else if(ct){Ml=function(E,M,k,z){for(var te=M.child;te!==null;){if(te.tag===5){var ue=te.stateNode;k&&z&&(ue=Ni(ue,te.type,te.memoizedProps,te)),xe(E,ue)}else if(te.tag===6)ue=te.stateNode,k&&z&&(ue=or(ue,te.memoizedProps,te)),xe(E,ue);else if(te.tag!==4){if(te.tag===22&&te.memoizedState!==null)ue=te.child,ue!==null&&(ue.return=te),Ml(E,te,!0,!0);else if(te.child!==null){te.child.return=te,te=te.child;continue}}if(te===M)break;for(;te.sibling===null;){if(te.return===null||te.return===M)return;te=te.return}te.sibling.return=te.return,te=te.sibling}};var ap=function(E,M,k,z){for(var te=M.child;te!==null;){if(te.tag===5){var ue=te.stateNode;k&&z&&(ue=Ni(ue,te.type,te.memoizedProps,te)),cn(E,ue)}else if(te.tag===6)ue=te.stateNode,k&&z&&(ue=or(ue,te.memoizedProps,te)),cn(E,ue);else if(te.tag!==4){if(te.tag===22&&te.memoizedState!==null)ue=te.child,ue!==null&&(ue.return=te),ap(E,te,!0,!0);else if(te.child!==null){te.child.return=te,te=te.child;continue}}if(te===M)break;for(;te.sibling===null;){if(te.return===null||te.return===M)return;te=te.return}te.sibling.return=te.return,te=te.sibling}};ph=function(E,M){var k=M.stateNode;if(!Cl(E,M)){E=k.containerInfo;var z=nn(E);ap(z,M,!1,!1),k.pendingChildren=z,ys(M),Xn(E,z)}},mh=function(E,M,k,z,te){var ue=E.stateNode,Ke=E.memoizedProps;if((E=Cl(E,M))&&Ke===z)M.stateNode=ue;else{var lt=M.stateNode,kt=yr(Ss.current),En=null;Ke!==z&&(En=Fe(lt,k,Ke,z,te,kt)),E&&En===null?M.stateNode=ue:(ue=Ht(ue,En,k,Ke,z,M,E,lt),ve(ue,k,z,te,kt)&&ys(M),M.stateNode=ue,E?ys(M):Ml(ue,M,!1,!1))}},gh=function(E,M,k,z){k!==z?(E=yr(Pc.current),k=yr(Ss.current),M.stateNode=rt(z,E,k,M),ys(M)):M.stateNode=E.stateNode}}else ph=function(){},mh=function(){},gh=function(){};function Co(E,M){if(!zr)switch(E.tailMode){case"hidden":M=E.tail;for(var k=null;M!==null;)M.alternate!==null&&(k=M),M=M.sibling;k===null?E.tail=null:k.sibling=null;break;case"collapsed":k=E.tail;for(var z=null;k!==null;)k.alternate!==null&&(z=k),k=k.sibling;z===null?M||E.tail===null?E.tail=null:E.tail.sibling=null:z.sibling=null}}function Mo(E){var M=E.alternate!==null&&E.alternate.child===E.child,k=0,z=0;if(M)for(var te=E.child;te!==null;)k|=te.lanes|te.childLanes,z|=te.subtreeFlags&14680064,z|=te.flags&14680064,te.return=E,te=te.sibling;else for(te=E.child;te!==null;)k|=te.lanes|te.childLanes,z|=te.subtreeFlags,z|=te.flags,te.return=E,te=te.sibling;return E.subtreeFlags|=z,E.childLanes=k,M}function bo(E,M,k){var z=M.pendingProps;switch(yd(M),M.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mo(M),null;case 1:return fi(M.type)&&qr(),Mo(M),null;case 3:return z=M.stateNode,Us(),gi(xi),gi(Ai),zs(),z.pendingContext&&(z.context=z.pendingContext,z.pendingContext=null),(E===null||E.child===null)&&(hs(M)?ys(M):E===null||E.memoizedState.isDehydrated&&!(M.flags&256)||(M.flags|=1024,ha!==null&&(Mg(ha),ha=null))),ph(E,M),Mo(M),null;case 5:xd(M),k=yr(Pc.current);var te=M.type;if(E!==null&&M.stateNode!=null)mh(E,M,te,z,k),E.ref!==M.ref&&(M.flags|=512,M.flags|=2097152);else{if(!z){if(M.stateNode===null)throw Error(l(166));return Mo(M),null}if(E=yr(Ss.current),hs(M)){if(!ut)throw Error(l(175));E=wt(M.stateNode,M.type,M.memoizedProps,k,E,M,!Bc),M.updateQueue=E,E!==null&&ys(M)}else{var ue=he(te,z,k,E,M);Ml(ue,M,!1,!1),M.stateNode=ue,ve(ue,te,z,k,E)&&ys(M)}M.ref!==null&&(M.flags|=512,M.flags|=2097152)}return Mo(M),null;case 6:if(E&&M.stateNode!=null)gh(E,M,E.memoizedProps,z);else{if(typeof z!="string"&&M.stateNode===null)throw Error(l(166));if(E=yr(Pc.current),k=yr(Ss.current),hs(M)){if(!ut)throw Error(l(176));if(E=M.stateNode,z=M.memoizedProps,(k=xn(E,z,M,!Bc))&&(te=jt,te!==null))switch(ue=(te.mode&1)!==0,te.tag){case 3:Et(te.stateNode.containerInfo,E,z,ue);break;case 5:vt(te.type,te.memoizedProps,te.stateNode,E,z,ue)}k&&ys(M)}else M.stateNode=rt(z,E,k,M)}return Mo(M),null;case 13:if(gi(Gr),z=M.memoizedState,zr&&kr!==null&&M.mode&1&&!(M.flags&128)){for(E=kr;E;)E=De(E);return Wl(),M.flags|=98560,M}if(z!==null&&z.dehydrated!==null){if(z=hs(M),E===null){if(!z)throw Error(l(318));if(!ut)throw Error(l(344));if(E=M.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(l(317));Nn(E,M)}else Wl(),!(M.flags&128)&&(M.memoizedState=null),M.flags|=4;return Mo(M),null}return ha!==null&&(Mg(ha),ha=null),M.flags&128?(M.lanes=k,M):(z=z!==null,k=!1,E===null?hs(M):k=E.memoizedState!==null,z&&!k&&(M.child.flags|=8192,M.mode&1&&(E===null||Gr.current&1?Hs===0&&(Hs=3):Sg())),M.updateQueue!==null&&(M.flags|=4),Mo(M),null);case 4:return Us(),ph(E,M),E===null&&qt(M.stateNode.containerInfo),Mo(M),null;case 10:return md(M.type._context),Mo(M),null;case 17:return fi(M.type)&&qr(),Mo(M),null;case 19:if(gi(Gr),te=M.memoizedState,te===null)return Mo(M),null;if(z=(M.flags&128)!==0,ue=te.rendering,ue===null)if(z)Co(te,!1);else{if(Hs!==0||E!==null&&E.flags&128)for(E=M.child;E!==null;){if(ue=uh(E),ue!==null){for(M.flags|=128,Co(te,!1),E=ue.updateQueue,E!==null&&(M.updateQueue=E,M.flags|=4),M.subtreeFlags=0,E=k,z=M.child;z!==null;)k=z,te=E,k.flags&=14680066,ue=k.alternate,ue===null?(k.childLanes=0,k.lanes=te,k.child=null,k.subtreeFlags=0,k.memoizedProps=null,k.memoizedState=null,k.updateQueue=null,k.dependencies=null,k.stateNode=null):(k.childLanes=ue.childLanes,k.lanes=ue.lanes,k.child=ue.child,k.subtreeFlags=0,k.deletions=null,k.memoizedProps=ue.memoizedProps,k.memoizedState=ue.memoizedState,k.updateQueue=ue.updateQueue,k.type=ue.type,te=ue.dependencies,k.dependencies=te===null?null:{lanes:te.lanes,firstContext:te.firstContext}),z=z.sibling;return Mn(Gr,Gr.current&1|2),M.child}E=E.sibling}te.tail!==null&&ur()>Eg&&(M.flags|=128,z=!0,Co(te,!1),M.lanes=4194304)}else{if(!z)if(E=uh(ue),E!==null){if(M.flags|=128,z=!0,E=E.updateQueue,E!==null&&(M.updateQueue=E,M.flags|=4),Co(te,!0),te.tail===null&&te.tailMode==="hidden"&&!ue.alternate&&!zr)return Mo(M),null}else 2*ur()-te.renderingStartTime>Eg&&k!==1073741824&&(M.flags|=128,z=!0,Co(te,!1),M.lanes=4194304);te.isBackwards?(ue.sibling=M.child,M.child=ue):(E=te.last,E!==null?E.sibling=ue:M.child=ue,te.last=ue)}return te.tail!==null?(M=te.tail,te.rendering=M,te.tail=M.sibling,te.renderingStartTime=ur(),M.sibling=null,E=Gr.current,Mn(Gr,z?E&1|2:E&1),M):(Mo(M),null);case 22:case 23:return bg(),z=M.memoizedState!==null,E!==null&&E.memoizedState!==null!==z&&(M.flags|=8192),z&&M.mode&1?fa&1073741824&&(Mo(M),It&&M.subtreeFlags&6&&(M.flags|=8192)):Mo(M),null;case 24:return null;case 25:return null}throw Error(l(156,M.tag))}var Uc=d.ReactCurrentOwner,xr=!1;function $s(E,M,k,z){M.child=E===null?Xl(M,null,k,z):kn(M,E.child,k,z)}function Hr(E,M,k,z,te){k=k.render;var ue=M.ref;return Tc(M,te),z=$a(E,M,k,z,ue,te),k=wl(),E!==null&&!xr?(M.updateQueue=E.updateQueue,M.flags&=-2053,E.lanes&=~te,Jo(E,M,te)):(zr&&k&&Rr(M),M.flags|=1,$s(E,M,z,te),M.child)}function ev(E,M,k,z,te){if(E===null){var ue=k.type;return typeof ue=="function"&&!Tg(ue)&&ue.defaultProps===void 0&&k.compare===null&&k.defaultProps===void 0?(M.tag=15,M.type=ue,tv(E,M,ue,z,te)):(E=_p(k.type,null,z,M,M.mode,te),E.ref=M.ref,E.return=M,M.child=E)}if(ue=E.child,!(E.lanes&te)){var Ke=ue.memoizedProps;if(k=k.compare,k=k!==null?k:ih,k(Ke,z)&&E.ref===M.ref)return Jo(E,M,te)}return M.flags|=1,E=Jc(ue,z),E.ref=M.ref,E.return=M,M.child=E}function tv(E,M,k,z,te){if(E!==null&&ih(E.memoizedProps,z)&&E.ref===M.ref)if(xr=!1,(E.lanes&te)!==0)E.flags&131072&&(xr=!0);else return M.lanes=E.lanes,Jo(E,M,te);return Cd(E,M,k,z,te)}function nv(E,M,k){var z=M.pendingProps,te=z.children,ue=E!==null?E.memoizedState:null;if(z.mode==="hidden")if(!(M.mode&1))M.memoizedState={baseLanes:0,cachePool:null},Mn(_h,fa),fa|=k;else if(k&1073741824)M.memoizedState={baseLanes:0,cachePool:null},z=ue!==null?ue.baseLanes:k,Mn(_h,fa),fa|=z;else return E=ue!==null?ue.baseLanes|k:k,M.lanes=M.childLanes=1073741824,M.memoizedState={baseLanes:E,cachePool:null},M.updateQueue=null,Mn(_h,fa),fa|=E,null;else ue!==null?(z=ue.baseLanes|k,M.memoizedState=null):z=k,Mn(_h,fa),fa|=z;return $s(E,M,te,k),M.child}function iv(E,M){var k=M.ref;(E===null&&k!==null||E!==null&&E.ref!==k)&&(M.flags|=512,M.flags|=2097152)}function Cd(E,M,k,z,te){var ue=fi(k)?Ir:Ai.current;return ue=Sn(M,ue),Tc(M,te),k=$a(E,M,k,z,ue,te),z=wl(),E!==null&&!xr?(M.updateQueue=E.updateQueue,M.flags&=-2053,E.lanes&=~te,Jo(E,M,te)):(zr&&z&&Rr(M),M.flags|=1,$s(E,M,k,te),M.child)}function rv(E,M,k,z,te){if(fi(k)){var ue=!0;oe(M)}else ue=!1;if(Tc(M,te),M.stateNode===null)E!==null&&(E.alternate=null,M.alternate=null,M.flags|=2),ip(M,k,z),vd(M,k,z,te),z=!0;else if(E===null){var Ke=M.stateNode,lt=M.memoizedProps;Ke.props=lt;var kt=Ke.context,En=k.contextType;typeof En=="object"&&En!==null?En=Vo(En):(En=fi(k)?Ir:Ai.current,En=Sn(M,En));var $n=k.getDerivedStateFromProps,zi=typeof $n=="function"||typeof Ke.getSnapshotBeforeUpdate=="function";zi||typeof Ke.UNSAFE_componentWillReceiveProps!="function"&&typeof Ke.componentWillReceiveProps!="function"||(lt!==z||kt!==En)&&rp(M,Ke,z,En),ua=!1;var Ci=M.memoizedState;Ke.state=Ci,Jr(M,z,Ke,te),kt=M.memoizedState,lt!==z||Ci!==kt||xi.current||ua?(typeof $n=="function"&&(Ad(M,k,$n,z),kt=M.memoizedState),(lt=ua||np(M,k,lt,z,Ci,kt,En))?(zi||typeof Ke.UNSAFE_componentWillMount!="function"&&typeof Ke.componentWillMount!="function"||(typeof Ke.componentWillMount=="function"&&Ke.componentWillMount(),typeof Ke.UNSAFE_componentWillMount=="function"&&Ke.UNSAFE_componentWillMount()),typeof Ke.componentDidMount=="function"&&(M.flags|=4194308)):(typeof Ke.componentDidMount=="function"&&(M.flags|=4194308),M.memoizedProps=z,M.memoizedState=kt),Ke.props=z,Ke.state=kt,Ke.context=En,z=lt):(typeof Ke.componentDidMount=="function"&&(M.flags|=4194308),z=!1)}else{Ke=M.stateNode,ks(E,M),lt=M.memoizedProps,En=M.type===M.elementType?lt:Ho(M.type,lt),Ke.props=En,zi=M.pendingProps,Ci=Ke.context,kt=k.contextType,typeof kt=="object"&&kt!==null?kt=Vo(kt):(kt=fi(k)?Ir:Ai.current,kt=Sn(M,kt));var jr=k.getDerivedStateFromProps;($n=typeof jr=="function"||typeof Ke.getSnapshotBeforeUpdate=="function")||typeof Ke.UNSAFE_componentWillReceiveProps!="function"&&typeof Ke.componentWillReceiveProps!="function"||(lt!==zi||Ci!==kt)&&rp(M,Ke,z,kt),ua=!1,Ci=M.memoizedState,Ke.state=Ci,Jr(M,z,Ke,te);var vi=M.memoizedState;lt!==zi||Ci!==vi||xi.current||ua?(typeof jr=="function"&&(Ad(M,k,jr,z),vi=M.memoizedState),(En=ua||np(M,k,En,z,Ci,vi,kt)||!1)?($n||typeof Ke.UNSAFE_componentWillUpdate!="function"&&typeof Ke.componentWillUpdate!="function"||(typeof Ke.componentWillUpdate=="function"&&Ke.componentWillUpdate(z,vi,kt),typeof Ke.UNSAFE_componentWillUpdate=="function"&&Ke.UNSAFE_componentWillUpdate(z,vi,kt)),typeof Ke.componentDidUpdate=="function"&&(M.flags|=4),typeof Ke.getSnapshotBeforeUpdate=="function"&&(M.flags|=1024)):(typeof Ke.componentDidUpdate!="function"||lt===E.memoizedProps&&Ci===E.memoizedState||(M.flags|=4),typeof Ke.getSnapshotBeforeUpdate!="function"||lt===E.memoizedProps&&Ci===E.memoizedState||(M.flags|=1024),M.memoizedProps=z,M.memoizedState=vi),Ke.props=z,Ke.state=vi,Ke.context=kt,z=En):(typeof Ke.componentDidUpdate!="function"||lt===E.memoizedProps&&Ci===E.memoizedState||(M.flags|=4),typeof Ke.getSnapshotBeforeUpdate!="function"||lt===E.memoizedProps&&Ci===E.memoizedState||(M.flags|=1024),z=!1)}return Md(E,M,k,z,ue,te)}function Md(E,M,k,z,te,ue){iv(E,M);var Ke=(M.flags&128)!==0;if(!z&&!Ke)return te&&pe(M,k,!1),Jo(E,M,ue);z=M.stateNode,Uc.current=M;var lt=Ke&&typeof k.getDerivedStateFromError!="function"?null:z.render();return M.flags|=1,E!==null&&Ke?(M.child=kn(M,E.child,null,ue),M.child=kn(M,null,lt,ue)):$s(E,M,lt,ue),M.memoizedState=z.state,te&&pe(M,k,!0),M.child}function sv(E){var M=E.stateNode;M.pendingContext?rr(E,M.pendingContext,M.pendingContext!==M.context):M.context&&rr(E,M.context,!1),hr(E,M.containerInfo)}function li(E,M,k,z,te){return Wl(),ss(te),M.flags|=256,$s(E,M,k,z),M.child}var lp={dehydrated:null,treeContext:null,retryLane:0};function cp(E){return{baseLanes:E,cachePool:null}}function da(E,M,k){var z=M.pendingProps,te=Gr.current,ue=!1,Ke=(M.flags&128)!==0,lt;if((lt=Ke)||(lt=E!==null&&E.memoizedState===null?!1:(te&2)!==0),lt?(ue=!0,M.flags&=-129):(E===null||E.memoizedState!==null)&&(te|=1),Mn(Gr,te&1),E===null)return Dc(M),E=M.memoizedState,E!==null&&(E=E.dehydrated,E!==null)?(M.mode&1?ei(E)?M.lanes=8:M.lanes=1073741824:M.lanes=1,null):(te=z.children,E=z.fallback,ue?(z=M.mode,ue=M.child,te={mode:"hidden",children:te},!(z&1)&&ue!==null?(ue.childLanes=0,ue.pendingProps=te):ue=wp(te,z,0,null),E=wu(E,z,k,null),ue.return=M,E.return=M,ue.sibling=E,M.child=ue,M.child.memoizedState=cp(k),M.memoizedState=lp,E):bd(M,te));if(te=E.memoizedState,te!==null){if(lt=te.dehydrated,lt!==null){if(Ke)return M.flags&256?(M.flags&=-257,zc(E,M,k,Error(l(422)))):M.memoizedState!==null?(M.child=E.child,M.flags|=128,null):(ue=z.fallback,te=M.mode,z=wp({mode:"visible",children:z.children},te,0,null),ue=wu(ue,te,k,null),ue.flags|=2,z.return=M,ue.return=M,z.sibling=ue,M.child=z,M.mode&1&&kn(M,E.child,null,k),M.child.memoizedState=cp(k),M.memoizedState=lp,ue);if(!(M.mode&1))M=zc(E,M,k,null);else if(ei(lt))M=zc(E,M,k,Error(l(419)));else if(z=(k&E.childLanes)!==0,xr||z){if(z=Is,z!==null){switch(k&-k){case 4:ue=2;break;case 16:ue=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:ue=32;break;case 536870912:ue=268435456;break;default:ue=0}z=ue&(z.suspendedLanes|k)?0:ue,z!==0&&z!==te.retryLane&&(te.retryLane=z,Fa(E,z,-1))}Sg(),M=zc(E,M,k,Error(l(421)))}else ln(lt)?(M.flags|=128,M.child=E.child,M=qx.bind(null,E),yn(lt,M),M=null):(k=te.treeContext,ut&&(kr=ot(lt),jt=M,zr=!0,ha=null,Bc=!1,k!==null&&(Wo[jo++]=ba,Wo[jo++]=Xo,Wo[jo++]=Ja,ba=k.id,Xo=k.overflow,Ja=M)),M=bd(M,M.pendingProps.children),M.flags|=4096);return M}return ue?(z=qo(E,M,z.children,z.fallback,k),ue=M.child,te=E.child.memoizedState,ue.memoizedState=te===null?cp(k):{baseLanes:te.baseLanes|k,cachePool:null},ue.childLanes=E.childLanes&~k,M.memoizedState=lp,z):(k=vu(E,M,z.children,k),M.memoizedState=null,k)}return ue?(z=qo(E,M,z.children,z.fallback,k),ue=M.child,te=E.child.memoizedState,ue.memoizedState=te===null?cp(k):{baseLanes:te.baseLanes|k,cachePool:null},ue.childLanes=E.childLanes&~k,M.memoizedState=lp,z):(k=vu(E,M,z.children,k),M.memoizedState=null,k)}function bd(E,M){return M=wp({mode:"visible",children:M},E.mode,0,null),M.return=E,E.child=M}function vu(E,M,k,z){var te=E.child;return E=te.sibling,k=Jc(te,{mode:"visible",children:k}),!(M.mode&1)&&(k.lanes=z),k.return=M,k.sibling=null,E!==null&&(z=M.deletions,z===null?(M.deletions=[E],M.flags|=16):z.push(E)),M.child=k}function qo(E,M,k,z,te){var ue=M.mode;E=E.child;var Ke=E.sibling,lt={mode:"hidden",children:k};return!(ue&1)&&M.child!==E?(k=M.child,k.childLanes=0,k.pendingProps=lt,M.deletions=null):(k=Jc(E,lt),k.subtreeFlags=E.subtreeFlags&14680064),Ke!==null?z=Jc(Ke,z):(z=wu(z,ue,te,null),z.flags|=2),z.return=M,k.return=M,k.sibling=z,M.child=k,z}function zc(E,M,k,z){return z!==null&&ss(z),kn(M,E.child,null,k),E=bd(M,M.pendingProps.children),E.flags|=2,M.memoizedState=null,E}function Gs(E,M,k){E.lanes|=M;var z=E.alternate;z!==null&&(z.lanes|=M),gd(E.return,M,k)}function Wi(E,M,k,z,te){var ue=E.memoizedState;ue===null?E.memoizedState={isBackwards:M,rendering:null,renderingStartTime:0,last:z,tail:k,tailMode:te}:(ue.isBackwards=M,ue.rendering=null,ue.renderingStartTime=0,ue.last=z,ue.tail=k,ue.tailMode=te)}function pg(E,M,k){var z=M.pendingProps,te=z.revealOrder,ue=z.tail;if($s(E,M,z.children,k),z=Gr.current,z&2)z=z&1|2,M.flags|=128;else{if(E!==null&&E.flags&128)e:for(E=M.child;E!==null;){if(E.tag===13)E.memoizedState!==null&&Gs(E,k,M);else if(E.tag===19)Gs(E,k,M);else if(E.child!==null){E.child.return=E,E=E.child;continue}if(E===M)break e;for(;E.sibling===null;){if(E.return===null||E.return===M)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}z&=1}if(Mn(Gr,z),!(M.mode&1))M.memoizedState=null;else switch(te){case"forwards":for(k=M.child,te=null;k!==null;)E=k.alternate,E!==null&&uh(E)===null&&(te=k),k=k.sibling;k=te,k===null?(te=M.child,M.child=null):(te=k.sibling,k.sibling=null),Wi(M,!1,te,k,ue);break;case"backwards":for(k=null,te=M.child,M.child=null;te!==null;){if(E=te.alternate,E!==null&&uh(E)===null){M.child=te;break}E=te.sibling,te.sibling=k,k=te,te=E}Wi(M,!0,k,null,ue);break;case"together":Wi(M,!1,null,null,void 0);break;default:M.memoizedState=null}return M.child}function Jo(E,M,k){if(E!==null&&(M.dependencies=E.dependencies),wh|=M.lanes,!(k&M.childLanes))return null;if(E!==null&&M.child!==E.child)throw Error(l(153));if(M.child!==null){for(E=M.child,k=Jc(E,E.pendingProps),M.child=k,k.return=M;E.sibling!==null;)E=E.sibling,k=k.sibling=Jc(E,E.pendingProps),k.return=M;k.sibling=null}return M.child}function mg(E,M,k){switch(M.tag){case 3:sv(M),Wl();break;case 5:Oc(M);break;case 1:fi(M.type)&&oe(M);break;case 4:hr(M,M.stateNode.containerInfo);break;case 10:ep(M,M.type._context,M.memoizedProps.value);break;case 13:var z=M.memoizedState;if(z!==null)return z.dehydrated!==null?(Mn(Gr,Gr.current&1),M.flags|=128,null):k&M.child.childLanes?da(E,M,k):(Mn(Gr,Gr.current&1),E=Jo(E,M,k),E!==null?E.sibling:null);Mn(Gr,Gr.current&1);break;case 19:if(z=(k&M.childLanes)!==0,E.flags&128){if(z)return pg(E,M,k);M.flags|=128}var te=M.memoizedState;if(te!==null&&(te.rendering=null,te.tail=null,te.lastEffect=null),Mn(Gr,Gr.current),z)break;return null;case 22:case 23:return M.lanes=0,nv(E,M,k)}return Jo(E,M,k)}function Gc(E,M){switch(yd(M),M.tag){case 1:return fi(M.type)&&qr(),E=M.flags,E&65536?(M.flags=E&-65537|128,M):null;case 3:return Us(),gi(xi),gi(Ai),zs(),E=M.flags,E&65536&&!(E&128)?(M.flags=E&-65537|128,M):null;case 5:return xd(M),null;case 13:if(gi(Gr),E=M.memoizedState,E!==null&&E.dehydrated!==null){if(M.alternate===null)throw Error(l(340));Wl()}return E=M.flags,E&65536?(M.flags=E&-65537|128,M):null;case 19:return gi(Gr),null;case 4:return Us(),null;case 10:return md(M.type._context),null;case 22:case 23:return bg(),null;case 24:return null;default:return null}}var tl=!1,Zo=!1,gg=typeof WeakSet=="function"?WeakSet:Set,Pn=null;function Ah(E,M){var k=E.ref;if(k!==null)if(typeof k=="function")try{k(null)}catch(z){ta(E,M,z)}else k.current=null}function vh(E,M,k){try{k()}catch(z){ta(E,M,z)}}var Sd=!1;function up(E,M){for(W(E.containerInfo),Pn=M;Pn!==null;)if(E=Pn,M=E.child,(E.subtreeFlags&1028)!==0&&M!==null)M.return=E,Pn=M;else for(;Pn!==null;){E=Pn;try{var k=E.alternate;if(E.flags&1024)switch(E.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var z=k.memoizedProps,te=k.memoizedState,ue=E.stateNode,Ke=ue.getSnapshotBeforeUpdate(E.elementType===E.type?z:Ho(E.type,z),te);ue.__reactInternalSnapshotBeforeUpdate=Ke}break;case 3:It&&Tt(E.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(l(163))}}catch(lt){ta(E,E.return,lt)}if(M=E.sibling,M!==null){M.return=E.return,Pn=M;break}Pn=E.return}return k=Sd,Sd=!1,k}function bl(E,M,k){var z=M.updateQueue;if(z=z!==null?z.lastEffect:null,z!==null){var te=z=z.next;do{if((te.tag&E)===E){var ue=te.destroy;te.destroy=void 0,ue!==void 0&&vh(M,k,ue)}te=te.next}while(te!==z)}}function Hc(E,M){if(M=M.updateQueue,M=M!==null?M.lastEffect:null,M!==null){var k=M=M.next;do{if((k.tag&E)===E){var z=k.create;k.destroy=z()}k=k.next}while(k!==M)}}function yh(E){var M=E.ref;if(M!==null){var k=E.stateNode;switch(E.tag){case 5:E=ee(k);break;default:E=k}typeof M=="function"?M(E):M.current=E}}function hp(E,M,k){if(js&&typeof js.onCommitFiberUnmount=="function")try{js.onCommitFiberUnmount(Fo,M)}catch{}switch(M.tag){case 0:case 11:case 14:case 15:if(E=M.updateQueue,E!==null&&(E=E.lastEffect,E!==null)){var z=E=E.next;do{var te=z,ue=te.destroy;te=te.tag,ue!==void 0&&(te&2||te&4)&&vh(M,k,ue),z=z.next}while(z!==E)}break;case 1:if(Ah(M,k),E=M.stateNode,typeof E.componentWillUnmount=="function")try{E.props=M.memoizedProps,E.state=M.memoizedState,E.componentWillUnmount()}catch(Ke){ta(M,k,Ke)}break;case 5:Ah(M,k);break;case 4:It?av(E,M,k):ct&&ct&&(M=M.stateNode.containerInfo,k=nn(M),cr(M,k))}}function Td(E,M,k){for(var z=M;;)if(hp(E,z,k),z.child===null||It&&z.tag===4){if(z===M)break;for(;z.sibling===null;){if(z.return===null||z.return===M)return;z=z.return}z.sibling.return=z.return,z=z.sibling}else z.child.return=z,z=z.child}function eo(E){var M=E.alternate;M!==null&&(E.alternate=null,eo(M)),E.child=null,E.deletions=null,E.sibling=null,E.tag===5&&(M=E.stateNode,M!==null&&un(M)),E.stateNode=null,E.return=null,E.dependencies=null,E.memoizedProps=null,E.memoizedState=null,E.pendingProps=null,E.stateNode=null,E.updateQueue=null}function ov(E){return E.tag===5||E.tag===3||E.tag===4}function Id(E){e:for(;;){for(;E.sibling===null;){if(E.return===null||ov(E.return))return null;E=E.return}for(E.sibling.return=E.return,E=E.sibling;E.tag!==5&&E.tag!==6&&E.tag!==18;){if(E.flags&2||E.child===null||E.tag===4)continue e;E.child.return=E,E=E.child}if(!(E.flags&2))return E.stateNode}}function Zl(E){if(It){e:{for(var M=E.return;M!==null;){if(ov(M))break e;M=M.return}throw Error(l(160))}var k=M;switch(k.tag){case 5:M=k.stateNode,k.flags&32&&(Z(M),k.flags&=-33),k=Id(E),ho(E,k,M);break;case 3:case 4:M=k.stateNode.containerInfo,k=Id(E),Vc(E,k,M);break;default:throw Error(l(161))}}}function Vc(E,M,k){var z=E.tag;if(z===5||z===6)E=E.stateNode,M?$e(k,E,M):Be(k,E);else if(z!==4&&(E=E.child,E!==null))for(Vc(E,M,k),E=E.sibling;E!==null;)Vc(E,M,k),E=E.sibling}function ho(E,M,k){var z=E.tag;if(z===5||z===6)E=E.stateNode,M?Oe(k,E,M):Se(k,E);else if(z!==4&&(E=E.child,E!==null))for(ho(E,M,k),E=E.sibling;E!==null;)ho(E,M,k),E=E.sibling}function av(E,M,k){for(var z=M,te=!1,ue,Ke;;){if(!te){te=z.return;e:for(;;){if(te===null)throw Error(l(160));switch(ue=te.stateNode,te.tag){case 5:Ke=!1;break e;case 3:ue=ue.containerInfo,Ke=!0;break e;case 4:ue=ue.containerInfo,Ke=!0;break e}te=te.return}te=!0}if(z.tag===5||z.tag===6)Td(E,z,k),Ke?Q(ue,z.stateNode):le(ue,z.stateNode);else if(z.tag===18)Ke?Ge(ue,z.stateNode):be(ue,z.stateNode);else if(z.tag===4){if(z.child!==null){ue=z.stateNode.containerInfo,Ke=!0,z.child.return=z,z=z.child;continue}}else if(hp(E,z,k),z.child!==null){z.child.return=z,z=z.child;continue}if(z===M)break;for(;z.sibling===null;){if(z.return===null||z.return===M)return;z=z.return,z.tag===4&&(te=!1)}z.sibling.return=z.return,z=z.sibling}}function dp(E,M){if(It){switch(M.tag){case 0:case 11:case 14:case 15:bl(3,M,M.return),Hc(3,M),bl(5,M,M.return);return;case 1:return;case 5:var k=M.stateNode;if(k!=null){var z=M.memoizedProps;E=E!==null?E.memoizedProps:z;var te=M.type,ue=M.updateQueue;M.updateQueue=null,ue!==null&&fe(k,ue,te,E,z,M)}return;case 6:if(M.stateNode===null)throw Error(l(162));k=M.memoizedProps,Ee(M.stateNode,E!==null?E.memoizedProps:k,k);return;case 3:ut&&E!==null&&E.memoizedState.isDehydrated&&Un(M.stateNode.containerInfo);return;case 12:return;case 13:Rd(M);return;case 19:Rd(M);return;case 17:return}throw Error(l(163))}switch(M.tag){case 0:case 11:case 14:case 15:bl(3,M,M.return),Hc(3,M),bl(5,M,M.return);return;case 12:return;case 13:Rd(M);return;case 19:Rd(M);return;case 3:ut&&E!==null&&E.memoizedState.isDehydrated&&Un(M.stateNode.containerInfo);break;case 22:case 23:return}e:if(ct){switch(M.tag){case 1:case 5:case 6:break e;case 3:case 4:M=M.stateNode,cr(M.containerInfo,M.pendingChildren);break e}throw Error(l(163))}}function Rd(E){var M=E.updateQueue;if(M!==null){E.updateQueue=null;var k=E.stateNode;k===null&&(k=E.stateNode=new gg),M.forEach(function(z){var te=Jx.bind(null,E,z);k.has(z)||(k.add(z),z.then(te,te))})}}function Vx(E,M){for(Pn=M;Pn!==null;){M=Pn;var k=M.deletions;if(k!==null)for(var z=0;z<k.length;z++){var te=k[z];try{var ue=E;It?av(ue,te,M):Td(ue,te,M);var Ke=te.alternate;Ke!==null&&(Ke.return=null),te.return=null}catch(pi){ta(te,M,pi)}}if(k=M.child,M.subtreeFlags&12854&&k!==null)k.return=M,Pn=k;else for(;Pn!==null;){M=Pn;try{var lt=M.flags;if(lt&32&&It&&Z(M.stateNode),lt&512){var kt=M.alternate;if(kt!==null){var En=kt.ref;En!==null&&(typeof En=="function"?En(null):En.current=null)}}if(lt&8192)switch(M.tag){case 13:if(M.memoizedState!==null){var $n=M.alternate;($n===null||$n.memoizedState===null)&&(xg=ur())}break;case 22:var zi=M.memoizedState!==null,Ci=M.alternate,jr=Ci!==null&&Ci.memoizedState!==null;if(k=M,It){e:if(z=k,te=zi,ue=null,It)for(var vi=z;;){if(vi.tag===5){if(ue===null){ue=vi;var So=vi.stateNode;te?Ie(So):Te(vi.stateNode,vi.memoizedProps)}}else if(vi.tag===6){if(ue===null){var ka=vi.stateNode;te?Ae(ka):Ve(ka,vi.memoizedProps)}}else if((vi.tag!==22&&vi.tag!==23||vi.memoizedState===null||vi===z)&&vi.child!==null){vi.child.return=vi,vi=vi.child;continue}if(vi===z)break;for(;vi.sibling===null;){if(vi.return===null||vi.return===z)break e;ue===vi&&(ue=null),vi=vi.return}ue===vi&&(ue=null),vi.sibling.return=vi.return,vi=vi.sibling}}if(zi&&!jr&&k.mode&1){Pn=k;for(var Mt=k.child;Mt!==null;){for(k=Pn=Mt;Pn!==null;){z=Pn;var ft=z.child;switch(z.tag){case 0:case 11:case 14:case 15:bl(4,z,z.return);break;case 1:Ah(z,z.return);var Lt=z.stateNode;if(typeof Lt.componentWillUnmount=="function"){var zn=z.return;try{Lt.props=z.memoizedProps,Lt.state=z.memoizedState,Lt.componentWillUnmount()}catch(pi){ta(z,zn,pi)}}break;case 5:Ah(z,z.return);break;case 22:if(z.memoizedState!==null){Ts(k);continue}}ft!==null?(ft.return=z,Pn=ft):Ts(k)}Mt=Mt.sibling}}}switch(lt&4102){case 2:Zl(M),M.flags&=-3;break;case 6:Zl(M),M.flags&=-3,dp(M.alternate,M);break;case 4096:M.flags&=-4097;break;case 4100:M.flags&=-4097,dp(M.alternate,M);break;case 4:dp(M.alternate,M)}}catch(pi){ta(M,M.return,pi)}if(k=M.sibling,k!==null){k.return=M.return,Pn=k;break}Pn=M.return}}}function Qx(E,M,k){Pn=E,nl(E)}function nl(E,M,k){for(var z=(E.mode&1)!==0;Pn!==null;){var te=Pn,ue=te.child;if(te.tag===22&&z){var Ke=te.memoizedState!==null||tl;if(!Ke){var lt=te.alternate,kt=lt!==null&&lt.memoizedState!==null||Zo;lt=tl;var En=Zo;if(tl=Ke,(Zo=kt)&&!En)for(Pn=te;Pn!==null;)Ke=Pn,kt=Ke.child,Ke.tag===22&&Ke.memoizedState!==null?yu(te):kt!==null?(kt.return=Ke,Pn=kt):yu(te);for(;ue!==null;)Pn=ue,nl(ue),ue=ue.sibling;Pn=te,tl=lt,Zo=En}Bd(E)}else te.subtreeFlags&8772&&ue!==null?(ue.return=te,Pn=ue):Bd(E)}}function Bd(E){for(;Pn!==null;){var M=Pn;if(M.flags&8772){var k=M.alternate;try{if(M.flags&8772)switch(M.tag){case 0:case 11:case 15:Zo||Hc(5,M);break;case 1:var z=M.stateNode;if(M.flags&4&&!Zo)if(k===null)z.componentDidMount();else{var te=M.elementType===M.type?k.memoizedProps:Ho(M.type,k.memoizedProps);z.componentDidUpdate(te,k.memoizedState,z.__reactInternalSnapshotBeforeUpdate)}var ue=M.updateQueue;ue!==null&&sh(M,ue,z);break;case 3:var Ke=M.updateQueue;if(Ke!==null){if(k=null,M.child!==null)switch(M.child.tag){case 5:k=ee(M.child.stateNode);break;case 1:k=M.child.stateNode}sh(M,Ke,k)}break;case 5:var lt=M.stateNode;k===null&&M.flags&4&&Xe(lt,M.type,M.memoizedProps,M);break;case 6:break;case 4:break;case 12:break;case 13:if(ut&&M.memoizedState===null){var kt=M.alternate;if(kt!==null){var En=kt.memoizedState;if(En!==null){var $n=En.dehydrated;$n!==null&&Kn($n)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(l(163))}Zo||M.flags&512&&yh(M)}catch(zi){ta(M,M.return,zi)}}if(M===E){Pn=null;break}if(k=M.sibling,k!==null){k.return=M.return,Pn=k;break}Pn=M.return}}function Ts(E){for(;Pn!==null;){var M=Pn;if(M===E){Pn=null;break}var k=M.sibling;if(k!==null){k.return=M.return,Pn=k;break}Pn=M.return}}function yu(E){for(;Pn!==null;){var M=Pn;try{switch(M.tag){case 0:case 11:case 15:var k=M.return;try{Hc(4,M)}catch(kt){ta(M,k,kt)}break;case 1:var z=M.stateNode;if(typeof z.componentDidMount=="function"){var te=M.return;try{z.componentDidMount()}catch(kt){ta(M,te,kt)}}var ue=M.return;try{yh(M)}catch(kt){ta(M,ue,kt)}break;case 5:var Ke=M.return;try{yh(M)}catch(kt){ta(M,Ke,kt)}}}catch(kt){ta(M,M.return,kt)}if(M===E){Pn=null;break}var lt=M.sibling;if(lt!==null){lt.return=M.return,Pn=lt;break}Pn=M.return}}var $l=0,Ld=1,Qc=2,Dd=3,xh=4;if(typeof Symbol=="function"&&Symbol.for){var Pd=Symbol.for;$l=Pd("selector.component"),Ld=Pd("selector.has_pseudo_class"),Qc=Pd("selector.role"),Dd=Pd("selector.test_id"),xh=Pd("selector.text")}function Ag(E){var M=Ct(E);if(M!=null){if(typeof M.memoizedProps["data-testname"]!="string")throw Error(l(364));return M}if(E=ci(E),E===null)throw Error(l(362));return E.stateNode.current}function Sl(E,M){switch(M.$$typeof){case $l:if(E.type===M.value)return!0;break;case Ld:e:{M=M.value,E=[E,0];for(var k=0;k<E.length;){var z=E[k++],te=E[k++],ue=M[te];if(z.tag!==5||!qe(z)){for(;ue!=null&&Sl(z,ue);)te++,ue=M[te];if(te===M.length){M=!0;break e}else for(z=z.child;z!==null;)E.push(z,te),z=z.sibling}}M=!1}return M;case Qc:if(E.tag===5&&ye(E.stateNode,M.value))return!0;break;case xh:if((E.tag===5||E.tag===6)&&(E=Pe(E),E!==null&&0<=E.indexOf(M.value)))return!0;break;case Dd:if(E.tag===5&&(E=E.memoizedProps["data-testname"],typeof E=="string"&&E.toLowerCase()===M.value.toLowerCase()))return!0;break;default:throw Error(l(365))}return!1}function Wc(E){switch(E.$$typeof){case $l:return"<"+(O(E.value)||"Unknown")+">";case Ld:return":has("+(Wc(E)||"")+")";case Qc:return'[role="'+E.value+'"]';case xh:return'"'+E.value+'"';case Dd:return'[data-testname="'+E.value+'"]';default:throw Error(l(365))}}function Od(E,M){var k=[];E=[E,0];for(var z=0;z<E.length;){var te=E[z++],ue=E[z++],Ke=M[ue];if(te.tag!==5||!qe(te)){for(;Ke!=null&&Sl(te,Ke);)ue++,Ke=M[ue];if(ue===M.length)k.push(te);else for(te=te.child;te!==null;)E.push(te,ue),te=te.sibling}}return k}function Eh(E,M){if(!Bn)throw Error(l(363));E=Ag(E),E=Od(E,M),M=[],E=Array.from(E);for(var k=0;k<E.length;){var z=E[k++];if(z.tag===5)qe(z)||M.push(z.stateNode);else for(z=z.child;z!==null;)E.push(z),z=z.sibling}return M}var vg=Math.ceil,fp=d.ReactCurrentDispatcher,jc=d.ReactCurrentOwner,xs=d.ReactCurrentBatchConfig,Ji=0,Is=null,Rs=null,fo=0,fa=0,_h=si(0),Hs=0,Fd=null,wh=0,pp=0,yg=0,Nd=null,$o=null,xg=0,Eg=1/0;function Ch(){Eg=ur()+500}var mp=!1,_g=null,Xc=null,gp=!1,Kc=null,Ap=0,kd=0,wg=null,vp=-1,yp=0;function No(){return Ji&6?ur():vp!==-1?vp:vp=ur()}function Yc(E){return E.mode&1?Ji&2&&fo!==0?fo&-fo:hg.transition!==null?(yp===0&&(E=Kt,Kt<<=1,!(Kt&4194240)&&(Kt=64),yp=E),yp):(E=oi,E!==0?E:Ft()):1}function Fa(E,M,k){if(50<kd)throw kd=0,wg=null,Error(l(185));var z=xp(E,M);return z===null?null:(Di(z,M,k),(!(Ji&2)||z!==Is)&&(z===Is&&(!(Ji&2)&&(pp|=M),Hs===4&&qc(z,fo)),ea(z,k),M===1&&Ji===0&&!(E.mode&1)&&(Ch(),Ca&&vr())),z)}function xp(E,M){E.lanes|=M;var k=E.alternate;for(k!==null&&(k.lanes|=M),k=E,E=E.return;E!==null;)E.childLanes|=M,k=E.alternate,k!==null&&(k.childLanes|=M),k=E,E=E.return;return k.tag===3?k.stateNode:null}function ea(E,M){var k=E.callbackNode;Dn(E,M);var z=Rt(E,E===Is?fo:0);if(z===0)k!==null&&Ur(k),E.callbackNode=null,E.callbackPriority=0;else if(M=z&-z,E.callbackPriority!==M){if(k!=null&&Ur(k),M===1)E.tag===0?Hl(cv.bind(null,E)):yl(cv.bind(null,E)),fn?An(function(){Ji===0&&vr()}):Ri(Fs,vr),k=null;else{switch(ar(z)){case 1:k=Fs;break;case 4:k=Wr;break;case 16:k=Ns;break;case 536870912:k=Ul;break;default:k=Ns}k=vv(k,lv.bind(null,E))}E.callbackPriority=M,E.callbackNode=k}}function lv(E,M){if(vp=-1,yp=0,Ji&6)throw Error(l(327));var k=E.callbackNode;if(_u()&&E.callbackNode!==k)return null;var z=Rt(E,E===Is?fo:0);if(z===0)return null;if(z&30||z&E.expiredLanes||M)M=Ep(E,z);else{M=z;var te=Ji;Ji|=2;var ue=dv();(Is!==E||fo!==M)&&(Ch(),xu(E,M));do try{Xx();break}catch(lt){hv(E,lt)}while(1);pd(),fp.current=ue,Ji=te,Rs!==null?M=0:(Is=null,fo=0,M=Hs)}if(M!==0){if(M===2&&(te=Yn(E),te!==0&&(z=te,M=Cg(E,te))),M===1)throw k=Fd,xu(E,0),qc(E,z),ea(E,ur()),k;if(M===6)qc(E,z);else{if(te=E.current.alternate,!(z&30)&&!Wx(te)&&(M=Ep(E,z),M===2&&(ue=Yn(E),ue!==0&&(z=ue,M=Cg(E,ue))),M===1))throw k=Fd,xu(E,0),qc(E,z),ea(E,ur()),k;switch(E.finishedWork=te,E.finishedLanes=z,M){case 0:case 1:throw Error(l(345));case 2:Eu(E,$o);break;case 3:if(qc(E,z),(z&130023424)===z&&(M=xg+500-ur(),10<M)){if(Rt(E,0)!==0)break;if(te=E.suspendedLanes,(te&z)!==z){No(),E.pingedLanes|=E.suspendedLanes&te;break}E.timeoutHandle=He(Eu.bind(null,E,$o),M);break}Eu(E,$o);break;case 4:if(qc(E,z),(z&4194240)===z)break;for(M=E.eventTimes,te=-1;0<z;){var Ke=31-_e(z);ue=1<<Ke,Ke=M[Ke],Ke>te&&(te=Ke),z&=~ue}if(z=te,z=ur()-z,z=(120>z?120:480>z?480:1080>z?1080:1920>z?1920:3e3>z?3e3:4320>z?4320:1960*vg(z/1960))-z,10<z){E.timeoutHandle=He(Eu.bind(null,E,$o),z);break}Eu(E,$o);break;case 5:Eu(E,$o);break;default:throw Error(l(329))}}}return ea(E,ur()),E.callbackNode===k?lv.bind(null,E):null}function Cg(E,M){var k=Nd;return E.current.memoizedState.isDehydrated&&(xu(E,M).flags|=256),E=Ep(E,M),E!==2&&(M=$o,$o=k,M!==null&&Mg(M)),E}function Mg(E){$o===null?$o=E:$o.push.apply($o,E)}function Wx(E){for(var M=E;;){if(M.flags&16384){var k=M.updateQueue;if(k!==null&&(k=k.stores,k!==null))for(var z=0;z<k.length;z++){var te=k[z],ue=te.getSnapshot;te=te.value;try{if(!Xs(ue(),te))return!1}catch{return!1}}}if(k=M.child,M.subtreeFlags&16384&&k!==null)k.return=M,M=k;else{if(M===E)break;for(;M.sibling===null;){if(M.return===null||M.return===E)return!0;M=M.return}M.sibling.return=M.return,M=M.sibling}}return!0}function qc(E,M){for(M&=~yg,M&=~pp,E.suspendedLanes|=M,E.pingedLanes&=~M,E=E.expirationTimes;0<M;){var k=31-_e(M),z=1<<k;E[k]=-1,M&=~z}}function cv(E){if(Ji&6)throw Error(l(327));_u();var M=Rt(E,0);if(!(M&1))return ea(E,ur()),null;var k=Ep(E,M);if(E.tag!==0&&k===2){var z=Yn(E);z!==0&&(M=z,k=Cg(E,z))}if(k===1)throw k=Fd,xu(E,0),qc(E,M),ea(E,ur()),k;if(k===6)throw Error(l(345));return E.finishedWork=E.current.alternate,E.finishedLanes=M,Eu(E,$o),ea(E,ur()),null}function uv(E){Kc!==null&&Kc.tag===0&&!(Ji&6)&&_u();var M=Ji;Ji|=1;var k=xs.transition,z=oi;try{if(xs.transition=null,oi=1,E)return E()}finally{oi=z,xs.transition=k,Ji=M,!(Ji&6)&&vr()}}function bg(){fa=_h.current,gi(_h)}function xu(E,M){E.finishedWork=null,E.finishedLanes=0;var k=E.timeoutHandle;if(k!==xt&&(E.timeoutHandle=xt,Ot(k)),Rs!==null)for(k=Rs.return;k!==null;){var z=k;switch(yd(z),z.tag){case 1:z=z.type.childContextTypes,z!=null&&qr();break;case 3:Us(),gi(xi),gi(Ai),zs();break;case 5:xd(z);break;case 4:Us();break;case 13:gi(Gr);break;case 19:gi(Gr);break;case 10:md(z.type._context);break;case 22:case 23:bg()}k=k.return}if(Is=E,Rs=E=Jc(E.current,null),fo=fa=M,Hs=0,Fd=null,yg=pp=wh=0,$o=Nd=null,Qo!==null){for(M=0;M<Qo.length;M++)if(k=Qo[M],z=k.interleaved,z!==null){k.interleaved=null;var te=z.next,ue=k.pending;if(ue!==null){var Ke=ue.next;ue.next=te,z.next=Ke}k.pending=z}Qo=null}return E}function hv(E,M){do{var k=Rs;try{if(pd(),Qe.current=Oa,Fc){for(var z=Or.memoizedState;z!==null;){var te=z.queue;te!==null&&(te.pending=null),z=z.next}Fc=!1}if(ql=0,$r=Zr=Or=null,Ta=!1,Ia=0,jc.current=null,k===null||k.return===null){Hs=1,Fd=M,Rs=null;break}e:{var ue=E,Ke=k.return,lt=k,kt=M;if(M=fo,lt.flags|=32768,kt!==null&&typeof kt=="object"&&typeof kt.then=="function"){var En=kt,$n=lt,zi=$n.tag;if(!($n.mode&1)&&(zi===0||zi===11||zi===15)){var Ci=$n.alternate;Ci?($n.updateQueue=Ci.updateQueue,$n.memoizedState=Ci.memoizedState,$n.lanes=Ci.lanes):($n.updateQueue=null,$n.memoizedState=null)}var jr=os(Ke);if(jr!==null){jr.flags&=-257,Yo(jr,Ke,lt,ue,M),jr.mode&1&&Ko(ue,En,M),M=jr,kt=En;var vi=M.updateQueue;if(vi===null){var So=new Set;So.add(kt),M.updateQueue=So}else vi.add(kt);break e}else{if(!(M&1)){Ko(ue,En,M),Sg();break e}kt=Error(l(426))}}else if(zr&&lt.mode&1){var ka=os(Ke);if(ka!==null){!(ka.flags&65536)&&(ka.flags|=256),Yo(ka,Ke,lt,ue,M),ss(kt);break e}}ue=kt,Hs!==4&&(Hs=2),Nd===null?Nd=[ue]:Nd.push(ue),kt=Au(kt,lt),lt=Ke;do{switch(lt.tag){case 3:lt.flags|=65536,M&=-M,lt.lanes|=M;var Mt=wd(lt,kt,M);Eo(lt,Mt);break e;case 1:ue=kt;var ft=lt.type,Lt=lt.stateNode;if(!(lt.flags&128)&&(typeof ft.getDerivedStateFromError=="function"||Lt!==null&&typeof Lt.componentDidCatch=="function"&&(Xc===null||!Xc.has(Lt)))){lt.flags|=65536,M&=-M,lt.lanes|=M;var zn=dr(lt,ue,M);Eo(lt,zn);break e}}lt=lt.return}while(lt!==null)}pv(k)}catch(pi){M=pi,Rs===k&&k!==null&&(Rs=k=k.return);continue}break}while(1)}function dv(){var E=fp.current;return fp.current=Oa,E===null?Oa:E}function Sg(){(Hs===0||Hs===3||Hs===2)&&(Hs=4),Is===null||!(wh&268435455)&&!(pp&268435455)||qc(Is,fo)}function Ep(E,M){var k=Ji;Ji|=2;var z=dv();Is===E&&fo===M||xu(E,M);do try{jx();break}catch(te){hv(E,te)}while(1);if(pd(),Ji=k,fp.current=z,Rs!==null)throw Error(l(261));return Is=null,fo=0,Hs}function jx(){for(;Rs!==null;)fv(Rs)}function Xx(){for(;Rs!==null&&!vs();)fv(Rs)}function fv(E){var M=Av(E.alternate,E,fa);E.memoizedProps=E.pendingProps,M===null?pv(E):Rs=M,jc.current=null}function pv(E){var M=E;do{var k=M.alternate;if(E=M.return,M.flags&32768){if(k=Gc(k,M),k!==null){k.flags&=32767,Rs=k;return}if(E!==null)E.flags|=32768,E.subtreeFlags=0,E.deletions=null;else{Hs=6,Rs=null;return}}else if(k=bo(k,M,fa),k!==null){Rs=k;return}if(M=M.sibling,M!==null){Rs=M;return}Rs=M=E}while(M!==null);Hs===0&&(Hs=5)}function Eu(E,M){var k=oi,z=xs.transition;try{xs.transition=null,oi=1,Kx(E,M,k)}finally{xs.transition=z,oi=k}return null}function Kx(E,M,k){do _u();while(Kc!==null);if(Ji&6)throw Error(l(327));var z=E.finishedWork,te=E.finishedLanes;if(z===null)return null;if(E.finishedWork=null,E.finishedLanes=0,z===E.current)throw Error(l(177));E.callbackNode=null,E.callbackPriority=0;var ue=z.lanes|z.childLanes;if(Pi(E,ue),E===Is&&(Rs=Is=null,fo=0),!(z.subtreeFlags&2064)&&!(z.flags&2064)||gp||(gp=!0,vv(Ns,function(){return _u(),null})),ue=(z.flags&15990)!==0,z.subtreeFlags&15990||ue){ue=xs.transition,xs.transition=null;var Ke=oi;oi=1;var lt=Ji;Ji|=4,jc.current=null,up(E,z),Vx(E,z),ce(E.containerInfo),E.current=z,Qx(z),is(),Ji=lt,oi=Ke,xs.transition=ue}else E.current=z;if(gp&&(gp=!1,Kc=E,Ap=te),ue=E.pendingLanes,ue===0&&(Xc=null),zl(z.stateNode),ea(E,ur()),M!==null)for(k=E.onRecoverableError,z=0;z<M.length;z++)k(M[z]);if(mp)throw mp=!1,E=_g,_g=null,E;return Ap&1&&E.tag!==0&&_u(),ue=E.pendingLanes,ue&1?E===wg?kd++:(kd=0,wg=E):kd=0,vr(),null}function _u(){if(Kc!==null){var E=ar(Ap),M=xs.transition,k=oi;try{if(xs.transition=null,oi=16>E?16:E,Kc===null)var z=!1;else{if(E=Kc,Kc=null,Ap=0,Ji&6)throw Error(l(331));var te=Ji;for(Ji|=4,Pn=E.current;Pn!==null;){var ue=Pn,Ke=ue.child;if(Pn.flags&16){var lt=ue.deletions;if(lt!==null){for(var kt=0;kt<lt.length;kt++){var En=lt[kt];for(Pn=En;Pn!==null;){var $n=Pn;switch($n.tag){case 0:case 11:case 15:bl(8,$n,ue)}var zi=$n.child;if(zi!==null)zi.return=$n,Pn=zi;else for(;Pn!==null;){$n=Pn;var Ci=$n.sibling,jr=$n.return;if(eo($n),$n===En){Pn=null;break}if(Ci!==null){Ci.return=jr,Pn=Ci;break}Pn=jr}}}var vi=ue.alternate;if(vi!==null){var So=vi.child;if(So!==null){vi.child=null;do{var ka=So.sibling;So.sibling=null,So=ka}while(So!==null)}}Pn=ue}}if(ue.subtreeFlags&2064&&Ke!==null)Ke.return=ue,Pn=Ke;else e:for(;Pn!==null;){if(ue=Pn,ue.flags&2048)switch(ue.tag){case 0:case 11:case 15:bl(9,ue,ue.return)}var Mt=ue.sibling;if(Mt!==null){Mt.return=ue.return,Pn=Mt;break e}Pn=ue.return}}var ft=E.current;for(Pn=ft;Pn!==null;){Ke=Pn;var Lt=Ke.child;if(Ke.subtreeFlags&2064&&Lt!==null)Lt.return=Ke,Pn=Lt;else e:for(Ke=ft;Pn!==null;){if(lt=Pn,lt.flags&2048)try{switch(lt.tag){case 0:case 11:case 15:Hc(9,lt)}}catch(pi){ta(lt,lt.return,pi)}if(lt===Ke){Pn=null;break e}var zn=lt.sibling;if(zn!==null){zn.return=lt.return,Pn=zn;break e}Pn=lt.return}}if(Ji=te,vr(),js&&typeof js.onPostCommitFiberRoot=="function")try{js.onPostCommitFiberRoot(Fo,E)}catch{}z=!0}return z}finally{oi=k,xs.transition=M}}return!1}function mv(E,M,k){M=Au(k,M),M=wd(E,M,1),xo(E,M),M=No(),E=xp(E,1),E!==null&&(Di(E,1,M),ea(E,M))}function ta(E,M,k){if(E.tag===3)mv(E,E,k);else for(;M!==null;){if(M.tag===3){mv(M,E,k);break}else if(M.tag===1){var z=M.stateNode;if(typeof M.type.getDerivedStateFromError=="function"||typeof z.componentDidCatch=="function"&&(Xc===null||!Xc.has(z))){E=Au(k,E),E=dr(M,E,1),xo(M,E),E=No(),M=xp(M,1),M!==null&&(Di(M,1,E),ea(M,E));break}}M=M.return}}function Yx(E,M,k){var z=E.pingCache;z!==null&&z.delete(M),M=No(),E.pingedLanes|=E.suspendedLanes&k,Is===E&&(fo&k)===k&&(Hs===4||Hs===3&&(fo&130023424)===fo&&500>ur()-xg?xu(E,0):yg|=k),ea(E,M)}function gv(E,M){M===0&&(E.mode&1?(M=Wt,Wt<<=1,!(Wt&130023424)&&(Wt=4194304)):M=1);var k=No();E=xp(E,M),E!==null&&(Di(E,M,k),ea(E,k))}function qx(E){var M=E.memoizedState,k=0;M!==null&&(k=M.retryLane),gv(E,k)}function Jx(E,M){var k=0;switch(E.tag){case 13:var z=E.stateNode,te=E.memoizedState;te!==null&&(k=te.retryLane);break;case 19:z=E.stateNode;break;default:throw Error(l(314))}z!==null&&z.delete(M),gv(E,k)}var Av;Av=function(E,M,k){if(E!==null)if(E.memoizedProps!==M.pendingProps||xi.current)xr=!0;else{if(!(E.lanes&k)&&!(M.flags&128))return xr=!1,mg(E,M,k);xr=!!(E.flags&131072)}else xr=!1,zr&&M.flags&1048576&&Sa(M,ah,M.index);switch(M.lanes=0,M.tag){case 2:var z=M.type;E!==null&&(E.alternate=null,M.alternate=null,M.flags|=2),E=M.pendingProps;var te=Sn(M,Ai.current);Tc(M,k),te=$a(null,M,z,E,te,k);var ue=wl();return M.flags|=1,typeof te=="object"&&te!==null&&typeof te.render=="function"&&te.$$typeof===void 0?(M.tag=1,M.memoizedState=null,M.updateQueue=null,fi(z)?(ue=!0,oe(M)):ue=!1,M.memoizedState=te.state!==null&&te.state!==void 0?te.state:null,lo(M),te.updater=_l,M.stateNode=te,te._reactInternals=M,vd(M,z,E,k),M=Md(null,M,z,!0,ue,k)):(M.tag=0,zr&&ue&&Rr(M),$s(null,M,te,k),M=M.child),M;case 16:z=M.elementType;e:{switch(E!==null&&(E.alternate=null,M.alternate=null,M.flags|=2),E=M.pendingProps,te=z._init,z=te(z._payload),M.type=z,te=M.tag=$x(z),E=Ho(z,E),te){case 0:M=Cd(null,M,z,E,k);break e;case 1:M=rv(null,M,z,E,k);break e;case 11:M=Hr(null,M,z,E,k);break e;case 14:M=ev(null,M,z,Ho(z.type,E),k);break e}throw Error(l(306,z,""))}return M;case 0:return z=M.type,te=M.pendingProps,te=M.elementType===z?te:Ho(z,te),Cd(E,M,z,te,k);case 1:return z=M.type,te=M.pendingProps,te=M.elementType===z?te:Ho(z,te),rv(E,M,z,te,k);case 3:e:{if(sv(M),E===null)throw Error(l(387));z=M.pendingProps,ue=M.memoizedState,te=ue.element,ks(E,M),Jr(M,z,null,k);var Ke=M.memoizedState;if(z=Ke.element,ut&&ue.isDehydrated)if(ue={element:z,isDehydrated:!1,cache:Ke.cache,transitions:Ke.transitions},M.updateQueue.baseState=ue,M.memoizedState=ue,M.flags&256){te=Error(l(423)),M=li(E,M,z,k,te);break e}else if(z!==te){te=Error(l(424)),M=li(E,M,z,k,te);break e}else for(ut&&(kr=At(M.stateNode.containerInfo),jt=M,zr=!0,ha=null,Bc=!1),k=Xl(M,null,z,k),M.child=k;k;)k.flags=k.flags&-3|4096,k=k.sibling;else{if(Wl(),z===te){M=Jo(E,M,k);break e}$s(E,M,z,k)}M=M.child}return M;case 5:return Oc(M),E===null&&Dc(M),z=M.type,te=M.pendingProps,ue=E!==null?E.memoizedProps:null,Ke=te.children,je(z,te)?Ke=null:ue!==null&&je(z,ue)&&(M.flags|=32),iv(E,M),$s(E,M,Ke,k),M.child;case 6:return E===null&&Dc(M),null;case 13:return da(E,M,k);case 4:return hr(M,M.stateNode.containerInfo),z=M.pendingProps,E===null?M.child=kn(M,null,z,k):$s(E,M,z,k),M.child;case 11:return z=M.type,te=M.pendingProps,te=M.elementType===z?te:Ho(z,te),Hr(E,M,z,te,k);case 7:return $s(E,M,M.pendingProps,k),M.child;case 8:return $s(E,M,M.pendingProps.children,k),M.child;case 12:return $s(E,M,M.pendingProps.children,k),M.child;case 10:e:{if(z=M.type._context,te=M.pendingProps,ue=M.memoizedProps,Ke=te.value,ep(M,z,Ke),ue!==null)if(Xs(ue.value,Ke)){if(ue.children===te.children&&!xi.current){M=Jo(E,M,k);break e}}else for(ue=M.child,ue!==null&&(ue.return=M);ue!==null;){var lt=ue.dependencies;if(lt!==null){Ke=ue.child;for(var kt=lt.firstContext;kt!==null;){if(kt.context===z){if(ue.tag===1){kt=Ma(-1,k&-k),kt.tag=2;var En=ue.updateQueue;if(En!==null){En=En.shared;var $n=En.pending;$n===null?kt.next=kt:(kt.next=$n.next,$n.next=kt),En.pending=kt}}ue.lanes|=k,kt=ue.alternate,kt!==null&&(kt.lanes|=k),gd(ue.return,k,M),lt.lanes|=k;break}kt=kt.next}}else if(ue.tag===10)Ke=ue.type===M.type?null:ue.child;else if(ue.tag===18){if(Ke=ue.return,Ke===null)throw Error(l(341));Ke.lanes|=k,lt=Ke.alternate,lt!==null&&(lt.lanes|=k),gd(Ke,k,M),Ke=ue.sibling}else Ke=ue.child;if(Ke!==null)Ke.return=ue;else for(Ke=ue;Ke!==null;){if(Ke===M){Ke=null;break}if(ue=Ke.sibling,ue!==null){ue.return=Ke.return,Ke=ue;break}Ke=Ke.return}ue=Ke}$s(E,M,te.children,k),M=M.child}return M;case 9:return te=M.type,z=M.pendingProps.children,Tc(M,k),te=Vo(te),z=z(te),M.flags|=1,$s(E,M,z,k),M.child;case 14:return z=M.type,te=Ho(z,M.pendingProps),te=Ho(z.type,te),ev(E,M,z,te,k);case 15:return tv(E,M,M.type,M.pendingProps,k);case 17:return z=M.type,te=M.pendingProps,te=M.elementType===z?te:Ho(z,te),E!==null&&(E.alternate=null,M.alternate=null,M.flags|=2),M.tag=1,fi(z)?(E=!0,oe(M)):E=!1,Tc(M,k),ip(M,z,te),vd(M,z,te,k),Md(null,M,z,!0,E,k);case 19:return pg(E,M,k);case 22:return nv(E,M,k)}throw Error(l(156,M.tag))};function vv(E,M){return Ri(E,M)}function Zx(E,M,k,z){this.tag=E,this.key=k,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=M,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=z,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Na(E,M,k,z){return new Zx(E,M,k,z)}function Tg(E){return E=E.prototype,!(!E||!E.isReactComponent)}function $x(E){if(typeof E=="function")return Tg(E)?1:0;if(E!=null){if(E=E.$$typeof,E===x)return 11;if(E===b)return 14}return 2}function Jc(E,M){var k=E.alternate;return k===null?(k=Na(E.tag,M,E.key,E.mode),k.elementType=E.elementType,k.type=E.type,k.stateNode=E.stateNode,k.alternate=E,E.alternate=k):(k.pendingProps=M,k.type=E.type,k.flags=0,k.subtreeFlags=0,k.deletions=null),k.flags=E.flags&14680064,k.childLanes=E.childLanes,k.lanes=E.lanes,k.child=E.child,k.memoizedProps=E.memoizedProps,k.memoizedState=E.memoizedState,k.updateQueue=E.updateQueue,M=E.dependencies,k.dependencies=M===null?null:{lanes:M.lanes,firstContext:M.firstContext},k.sibling=E.sibling,k.index=E.index,k.ref=E.ref,k}function _p(E,M,k,z,te,ue){var Ke=2;if(z=E,typeof E=="function")Tg(E)&&(Ke=1);else if(typeof E=="string")Ke=5;else e:switch(E){case m:return wu(k.children,te,ue,M);case p:Ke=8,te|=8;break;case A:return E=Na(12,k,M,te|2),E.elementType=A,E.lanes=ue,E;case C:return E=Na(13,k,M,te),E.elementType=C,E.lanes=ue,E;case g:return E=Na(19,k,M,te),E.elementType=g,E.lanes=ue,E;case S:return wp(k,te,ue,M);default:if(typeof E=="object"&&E!==null)switch(E.$$typeof){case v:Ke=10;break e;case y:Ke=9;break e;case x:Ke=11;break e;case b:Ke=14;break e;case _:Ke=16,z=null;break e}throw Error(l(130,E==null?E:typeof E,""))}return M=Na(Ke,k,M,te),M.elementType=E,M.type=z,M.lanes=ue,M}function wu(E,M,k,z){return E=Na(7,E,z,M),E.lanes=k,E}function wp(E,M,k,z){return E=Na(22,E,z,M),E.elementType=S,E.lanes=k,E.stateNode={},E}function Ig(E,M,k){return E=Na(6,E,null,M),E.lanes=k,E}function Rg(E,M,k){return M=Na(4,E.children!==null?E.children:[],E.key,M),M.lanes=k,M.stateNode={containerInfo:E.containerInfo,pendingChildren:null,implementation:E.implementation},M}function eE(E,M,k,z,te){this.tag=M,this.containerInfo=E,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=xt,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=hi(0),this.expirationTimes=hi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hi(0),this.identifierPrefix=z,this.onRecoverableError=te,ut&&(this.mutableSourceEagerHydrationData=null)}function yv(E,M,k,z,te,ue,Ke,lt,kt){return E=new eE(E,M,k,lt,kt),M===1?(M=1,ue===!0&&(M|=8)):M=0,ue=Na(3,null,null,M),E.current=ue,ue.stateNode=E,ue.memoizedState={element:z,isDehydrated:k,cache:null,transitions:null},lo(ue),E}function xv(E){if(!E)return ui;E=E._reactInternals;e:{if(L(E)!==E||E.tag!==1)throw Error(l(170));var M=E;do{switch(M.tag){case 3:M=M.stateNode.context;break e;case 1:if(fi(M.type)){M=M.stateNode.__reactInternalMemoizedMergedChildContext;break e}}M=M.return}while(M!==null);throw Error(l(171))}if(E.tag===1){var k=E.type;if(fi(k))return q(E,k,M)}return M}function Ev(E){var M=E._reactInternals;if(M===void 0)throw typeof E.render=="function"?Error(l(188)):(E=Object.keys(E).join(","),Error(l(268,E)));return E=J(M),E===null?null:E.stateNode}function _v(E,M){if(E=E.memoizedState,E!==null&&E.dehydrated!==null){var k=E.retryLane;E.retryLane=k!==0&&k<M?k:M}}function Bg(E,M){_v(E,M),(E=E.alternate)&&_v(E,M)}function tE(E){return E=J(E),E===null?null:E.stateNode}function nE(){return null}return t.attemptContinuousHydration=function(E){if(E.tag===13){var M=No();Fa(E,134217728,M),Bg(E,134217728)}},t.attemptHydrationAtCurrentPriority=function(E){if(E.tag===13){var M=No(),k=Yc(E);Fa(E,k,M),Bg(E,k)}},t.attemptSynchronousHydration=function(E){switch(E.tag){case 3:var M=E.stateNode;if(M.current.memoizedState.isDehydrated){var k=pt(M.pendingLanes);k!==0&&(Ei(M,k|1),ea(M,ur()),!(Ji&6)&&(Ch(),vr()))}break;case 13:var z=No();uv(function(){return Fa(E,1,z)}),Bg(E,1)}},t.batchedUpdates=function(E,M){var k=Ji;Ji|=1;try{return E(M)}finally{Ji=k,Ji===0&&(Ch(),Ca&&vr())}},t.createComponentSelector=function(E){return{$$typeof:$l,value:E}},t.createContainer=function(E,M,k,z,te,ue,Ke){return yv(E,M,!1,null,k,z,te,ue,Ke)},t.createHasPseudoClassSelector=function(E){return{$$typeof:Ld,value:E}},t.createHydrationContainer=function(E,M,k,z,te,ue,Ke,lt,kt){return E=yv(k,z,!0,E,te,ue,Ke,lt,kt),E.context=xv(null),k=E.current,z=No(),te=Yc(k),ue=Ma(z,te),ue.callback=M??null,xo(k,ue),E.current.lanes=te,Di(E,te,z),ea(E,z),E},t.createPortal=function(E,M,k){var z=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:h,key:z==null?null:""+z,children:E,containerInfo:M,implementation:k}},t.createRoleSelector=function(E){return{$$typeof:Qc,value:E}},t.createTestNameSelector=function(E){return{$$typeof:Dd,value:E}},t.createTextSelector=function(E){return{$$typeof:xh,value:E}},t.deferredUpdates=function(E){var M=oi,k=xs.transition;try{return xs.transition=null,oi=16,E()}finally{oi=M,xs.transition=k}},t.discreteUpdates=function(E,M,k,z,te){var ue=oi,Ke=xs.transition;try{return xs.transition=null,oi=1,E(M,k,z,te)}finally{oi=ue,xs.transition=Ke,Ji===0&&Ch()}},t.findAllNodes=Eh,t.findBoundingRects=function(E,M){if(!Bn)throw Error(l(363));M=Eh(E,M),E=[];for(var k=0;k<M.length;k++)E.push(ze(M[k]));for(M=E.length-1;0<M;M--){k=E[M];for(var z=k.x,te=z+k.width,ue=k.y,Ke=ue+k.height,lt=M-1;0<=lt;lt--)if(M!==lt){var kt=E[lt],En=kt.x,$n=En+kt.width,zi=kt.y,Ci=zi+kt.height;if(z>=En&&ue>=zi&&te<=$n&&Ke<=Ci){E.splice(M,1);break}else if(z!==En||k.width!==kt.width||Ci<ue||zi>Ke){if(!(ue!==zi||k.height!==kt.height||$n<z||En>te)){En>z&&(kt.width+=En-z,kt.x=z),$n<te&&(kt.width=te-En),E.splice(M,1);break}}else{zi>ue&&(kt.height+=zi-ue,kt.y=ue),Ci<Ke&&(kt.height=Ke-zi),E.splice(M,1);break}}}return E},t.findHostInstance=Ev,t.findHostInstanceWithNoPortals=function(E){return E=H(E),E=E!==null?se(E):null,E===null?null:E.stateNode},t.findHostInstanceWithWarning=function(E){return Ev(E)},t.flushControlled=function(E){var M=Ji;Ji|=1;var k=xs.transition,z=oi;try{xs.transition=null,oi=1,E()}finally{oi=z,xs.transition=k,Ji=M,Ji===0&&(Ch(),vr())}},t.flushPassiveEffects=_u,t.flushSync=uv,t.focusWithin=function(E,M){if(!Bn)throw Error(l(363));for(E=Ag(E),M=Od(E,M),M=Array.from(M),E=0;E<M.length;){var k=M[E++];if(!qe(k)){if(k.tag===5&&me(k.stateNode))return!0;for(k=k.child;k!==null;)M.push(k),k=k.sibling}}return!1},t.getCurrentUpdatePriority=function(){return oi},t.getFindAllNodesFailureDescription=function(E,M){if(!Bn)throw Error(l(363));var k=0,z=[];E=[Ag(E),0];for(var te=0;te<E.length;){var ue=E[te++],Ke=E[te++],lt=M[Ke];if((ue.tag!==5||!qe(ue))&&(Sl(ue,lt)&&(z.push(Wc(lt)),Ke++,Ke>k&&(k=Ke)),Ke<M.length))for(ue=ue.child;ue!==null;)E.push(ue,Ke),ue=ue.sibling}if(k<M.length){for(E=[];k<M.length;k++)E.push(Wc(M[k]));return`findAllNodes was able to match part of the selector:
  `+(z.join(" > ")+`

No matching component was found for:
  `)+E.join(" > ")}return null},t.getPublicRootInstance=function(E){if(E=E.current,!E.child)return null;switch(E.child.tag){case 5:return ee(E.child.stateNode);default:return E.child.stateNode}},t.injectIntoDevTools=function(E){if(E={bundleType:E.bundleType,version:E.version,rendererPackageName:E.rendererPackageName,rendererConfig:E.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:d.ReactCurrentDispatcher,findHostInstanceByFiber:tE,findFiberByHostInstance:E.findFiberByHostInstance||nE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")E=!1;else{var M=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(M.isDisabled||!M.supportsFiber)E=!0;else{try{Fo=M.inject(E),js=M}catch{}E=!!M.checkDCE}}return E},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(E,M,k,z){if(!Bn)throw Error(l(363));E=Eh(E,M);var te=Re(E,k,z).disconnect;return{disconnect:function(){te()}}},t.registerMutableSourceForHydration=function(E,M){var k=M._getVersion;k=k(M._source),E.mutableSourceEagerHydrationData==null?E.mutableSourceEagerHydrationData=[M,k]:E.mutableSourceEagerHydrationData.push(M,k)},t.runWithPriority=function(E,M){var k=oi;try{return oi=E,M()}finally{oi=k}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(E,M,k,z){var te=M.current,ue=No(),Ke=Yc(te);return k=xv(k),M.context===null?M.context=k:M.pendingContext=k,M=Ma(ue,Ke),M.payload={element:E},z=z===void 0?null:z,z!==null&&(M.callback=z),xo(te,M),E=Fa(te,Ke,ue),E!==null&&El(E,te,Ke),Ke},t};(function(i){i.exports=UV})(OV);const zV=cR(Xw);var ox={},GV={get exports(){return ox},set exports(i){ox=i}},AP={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(i){function e(X,W){var ce=X.length;X.push(W);e:for(;0<ce;){var he=ce-1>>>1,xe=X[he];if(0<o(xe,W))X[he]=W,X[ce]=xe,ce=he;else break e}}function t(X){return X.length===0?null:X[0]}function r(X){if(X.length===0)return null;var W=X[0],ce=X.pop();if(ce!==W){X[0]=ce;e:for(var he=0,xe=X.length,ve=xe>>>1;he<ve;){var Fe=2*(he+1)-1,je=X[Fe],rt=Fe+1,He=X[rt];if(0>o(je,ce))rt<xe&&0>o(He,je)?(X[he]=He,X[rt]=ce,he=rt):(X[he]=je,X[Fe]=ce,he=Fe);else if(rt<xe&&0>o(He,ce))X[he]=He,X[rt]=ce,he=rt;else break e}}return W}function o(X,W){var ce=X.sortIndex-W.sortIndex;return ce!==0?ce:X.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;i.unstable_now=function(){return a.now()}}else{var l=Date,d=l.now();i.unstable_now=function(){return l.now()-d}}var c=[],h=[],m=1,p=null,A=3,v=!1,y=!1,x=!1,C=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(X){for(var W=t(h);W!==null;){if(W.callback===null)r(h);else if(W.startTime<=X)r(h),W.sortIndex=W.expirationTime,e(c,W);else break;W=t(h)}}function S(X){if(x=!1,_(X),!y)if(t(c)!==null)y=!0,ee(R);else{var W=t(h);W!==null&&ne(S,W.startTime-X)}}function R(X,W){y=!1,x&&(x=!1,g(D),D=-1),v=!0;var ce=A;try{for(_(W),p=t(c);p!==null&&(!(p.expirationTime>W)||X&&!H());){var he=p.callback;if(typeof he=="function"){p.callback=null,A=p.priorityLevel;var xe=he(p.expirationTime<=W);W=i.unstable_now(),typeof xe=="function"?p.callback=xe:p===t(c)&&r(c),_(W)}else r(c);p=t(c)}if(p!==null)var ve=!0;else{var Fe=t(h);Fe!==null&&ne(S,Fe.startTime-W),ve=!1}return ve}finally{p=null,A=ce,v=!1}}var P=!1,O=null,D=-1,L=5,N=-1;function H(){return!(i.unstable_now()-N<L)}function J(){if(O!==null){var X=i.unstable_now();N=X;var W=!0;try{W=O(!0,X)}finally{W?K():(P=!1,O=null)}}else P=!1}var K;if(typeof b=="function")K=function(){b(J)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,ae=se.port2;se.port1.onmessage=J,K=function(){ae.postMessage(null)}}else K=function(){C(J,0)};function ee(X){O=X,P||(P=!0,K())}function ne(X,W){D=C(function(){X(i.unstable_now())},W)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(X){X.callback=null},i.unstable_continueExecution=function(){y||v||(y=!0,ee(R))},i.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<X?Math.floor(1e3/X):5},i.unstable_getCurrentPriorityLevel=function(){return A},i.unstable_getFirstCallbackNode=function(){return t(c)},i.unstable_next=function(X){switch(A){case 1:case 2:case 3:var W=3;break;default:W=A}var ce=A;A=W;try{return X()}finally{A=ce}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(X,W){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var ce=A;A=X;try{return W()}finally{A=ce}},i.unstable_scheduleCallback=function(X,W,ce){var he=i.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?he+ce:he):ce=he,X){case 1:var xe=-1;break;case 2:xe=250;break;case 5:xe=1073741823;break;case 4:xe=1e4;break;default:xe=5e3}return xe=ce+xe,X={id:m++,callback:W,priorityLevel:X,startTime:ce,expirationTime:xe,sortIndex:-1},ce>he?(X.sortIndex=ce,e(h,X),t(c)===null&&X===t(h)&&(x?(g(D),D=-1):x=!0,ne(S,ce-he))):(X.sortIndex=xe,e(c,X),y||v||(y=!0,ee(R))),X},i.unstable_shouldYield=H,i.unstable_wrapCallback=function(X){var W=A;return function(){var ce=A;A=W;try{return X.apply(this,arguments)}finally{A=ce}}}})(AP);(function(i){i.exports=AP})(GV);function vP(i,e,t=(r,o)=>r===o){if(i===e)return!0;if(!i||!e)return!1;const r=i.length;if(e.length!==r)return!1;for(let o=0;o<r;o++)if(!t(i[o],e[o]))return!1;return!0}const zu=[];function yP(i,e,t=!1,r={}){for(const a of zu)if(vP(e,a.keys,a.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(a,"error"))throw a.error;if(Object.prototype.hasOwnProperty.call(a,"response"))return a.response;if(!t)throw a.promise}const o={keys:e,equal:r.equal,promise:i(...e).then(a=>o.response=a).then(()=>{r.lifespan&&r.lifespan>0&&setTimeout(()=>{const a=zu.indexOf(o);a!==-1&&zu.splice(a,1)},r.lifespan)}).catch(a=>o.error=a)};if(zu.push(o),!t)throw o.promise}const HV=(i,e,t)=>yP(i,e,!1,t),VV=(i,e,t)=>void yP(i,e,!0,t),QV=i=>{if(i===void 0||i.length===0)zu.splice(0,zu.length);else{const e=zu.find(t=>vP(i,t.keys,t.equal));if(e){const t=zu.indexOf(e);t!==-1&&zu.splice(t,1)}}},NM={},WV=i=>void Object.assign(NM,i);function jV(i,e){function t(m,{args:p=[],attach:A,...v},y){let x=`${m[0].toUpperCase()}${m.slice(1)}`,C;if(m==="primitive"){if(v.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const g=v.object;C=cm(g,{type:m,root:y,attach:A,primitive:!0})}else{const g=NM[x];if(!g)throw new Error(`R3F: ${x} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(p))throw new Error("R3F: The args prop must be an array!");C=cm(new g(...p),{type:m,root:y,attach:A,memoizedProps:{args:p}})}return C.__r3f.attach===void 0&&(C instanceof Zi?C.__r3f.attach="geometry":C instanceof oo&&(C.__r3f.attach="material")),x!=="inject"&&s2(C,v),C}function r(m,p){let A=!1;if(p){var v,y;(v=p.__r3f)!=null&&v.attach?r2(m,p,p.__r3f.attach):p.isObject3D&&m.isObject3D&&(m.add(p),A=!0),A||(y=m.__r3f)==null||y.objects.push(p),p.__r3f||cm(p,{}),p.__r3f.parent=m,Yw(p),um(p)}}function o(m,p,A){let v=!1;if(p){var y,x;if((y=p.__r3f)!=null&&y.attach)r2(m,p,p.__r3f.attach);else if(p.isObject3D&&m.isObject3D){p.parent=m,p.dispatchEvent({type:"added"});const C=m.children.filter(b=>b!==p),g=C.indexOf(A);m.children=[...C.slice(0,g),p,...C.slice(g)],v=!0}v||(x=m.__r3f)==null||x.objects.push(p),p.__r3f||cm(p,{}),p.__r3f.parent=m,Yw(p),um(p)}}function a(m,p,A=!1){m&&[...m].forEach(v=>l(p,v,A))}function l(m,p,A){if(p){var v,y,x;if(p.__r3f&&(p.__r3f.parent=null),(v=m.__r3f)!=null&&v.objects&&(m.__r3f.objects=m.__r3f.objects.filter(S=>S!==p)),(y=p.__r3f)!=null&&y.attach)GI(m,p,p.__r3f.attach);else if(p.isObject3D&&m.isObject3D){var C;m.remove(p),(C=p.__r3f)!=null&&C.root&&eQ(p.__r3f.root,p)}const b=(x=p.__r3f)==null?void 0:x.primitive,_=A===void 0?p.dispose!==null&&!b:A;if(!b){var g;a((g=p.__r3f)==null?void 0:g.objects,p,_),a(p.children,p,_)}p.__r3f&&(delete p.__r3f.root,delete p.__r3f.objects,delete p.__r3f.handlers,delete p.__r3f.memoizedProps,b||delete p.__r3f),_&&p.dispose&&p.type!=="Scene"&&ox.unstable_scheduleCallback(ox.unstable_IdlePriority,()=>{try{p.dispose()}catch{}}),um(m)}}function d(m,p,A,v){var y;const x=(y=m.__r3f)==null?void 0:y.parent;if(!x)return;const C=t(p,A,m.__r3f.root);if(m.children){for(const g of m.children)g.__r3f&&r(C,g);m.children=m.children.filter(g=>!g.__r3f)}m.__r3f.objects.forEach(g=>r(C,g)),m.__r3f.objects=[],m.__r3f.autoRemovedBeforeAppend||l(x,m),C.parent&&(C.__r3f.autoRemovedBeforeAppend=!0),r(x,C),C.raycast&&C.__r3f.eventCount&&C.__r3f.root.getState().internal.interaction.push(C),[v,v.alternate].forEach(g=>{g!==null&&(g.stateNode=C,g.ref&&(typeof g.ref=="function"?g.ref(C):g.ref.current=C))})}const c=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:zV({createInstance:t,removeChild:l,appendChild:r,appendInitialChild:r,insertBefore:o,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(m,p)=>{if(!p)return;const A=m.getState().scene;A.__r3f&&(A.__r3f.root=m,r(A,p))},removeChildFromContainer:(m,p)=>{p&&l(m.getState().scene,p)},insertInContainerBefore:(m,p,A)=>{if(!p||!A)return;const v=m.getState().scene;v.__r3f&&o(v,p,A)},getRootHostContext:()=>null,getChildHostContext:m=>m,finalizeInitialChildren(m){var p;return!!((p=m==null?void 0:m.__r3f)!=null?p:{}).handlers},prepareUpdate(m,p,A,v){if(m.__r3f.primitive&&v.object&&v.object!==m)return[!0];{const{args:y=[],children:x,...C}=v,{args:g=[],children:b,..._}=A;if(!Array.isArray(y))throw new Error("R3F: the args prop must be an array!");if(y.some((R,P)=>R!==g[P]))return[!0];const S=bP(m,C,_,!0);return S.changes.length?[!1,S]:null}},commitUpdate(m,[p,A],v,y,x,C){p?d(m,v,x,C):s2(m,A)},commitMount(m,p,A,v){var y;const x=(y=m.__r3f)!=null?y:{};m.raycast&&x.handlers&&x.eventCount&&m.__r3f.root.getState().internal.interaction.push(m)},getPublicInstance:m=>m,prepareForCommit:()=>null,preparePortalMount:m=>cm(m.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(m){var p;const{attach:A,parent:v}=(p=m.__r3f)!=null?p:{};A&&v&&GI(v,m,A),m.isObject3D&&(m.visible=!1),um(m)},unhideInstance(m,p){var A;const{attach:v,parent:y}=(A=m.__r3f)!=null?A:{};v&&y&&r2(y,m,v),(m.isObject3D&&p.visible==null||p.visible)&&(m.visible=!0),um(m)},createTextInstance:c,hideTextInstance:c,unhideTextInstance:c,getCurrentEventPriority:()=>e?e():Qh.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&ls.fun(performance.now)?performance.now:ls.fun(Date.now)?Date.now:()=>0,scheduleTimeout:ls.fun(setTimeout)?setTimeout:void 0,cancelTimeout:ls.fun(clearTimeout)?clearTimeout:void 0}),applyProps:s2}}var NI,kI;const xP=()=>{var i;return(i=NM.ColorManagement)!=null?i:null},EP=i=>i&&i.isOrthographicCamera,XV=i=>i&&i.hasOwnProperty("current"),$0=typeof window<"u"&&((NI=window.document)!=null&&NI.createElement||((kI=window.navigator)==null?void 0:kI.product)==="ReactNative")?Zt.useLayoutEffect:Zt.useEffect;function _P(i){const e=Zt.useRef(i);return $0(()=>void(e.current=i),[i]),e}function KV({set:i}){return $0(()=>(i(new Promise(()=>null)),()=>i(!1)),[i]),null}class wP extends Zt.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}wP.getDerivedStateFromError=()=>({error:!0});const CP="__default",UI=new Map,YV=i=>i&&!!i.memoized&&!!i.changes;function MP(i){const e=typeof window<"u"?window.devicePixelRatio:1;return Array.isArray(i)?Math.min(Math.max(i[0],e),i[1]):i}const bA=i=>{var e;return(e=i.__r3f)==null?void 0:e.root.getState()},ls={obj:i=>i===Object(i)&&!ls.arr(i)&&typeof i!="function",fun:i=>typeof i=="function",str:i=>typeof i=="string",num:i=>typeof i=="number",boo:i=>typeof i=="boolean",und:i=>i===void 0,arr:i=>Array.isArray(i),equ(i,e,{arrays:t="shallow",objects:r="reference",strict:o=!0}={}){if(typeof i!=typeof e||!!i!=!!e)return!1;if(ls.str(i)||ls.num(i))return i===e;const a=ls.obj(i);if(a&&r==="reference")return i===e;const l=ls.arr(i);if(l&&t==="reference")return i===e;if((l||a)&&i===e)return!0;let d;for(d in i)if(!(d in e))return!1;if(a&&t==="shallow"&&r==="shallow"){for(d in o?e:i)if(!ls.equ(i[d],e[d],{strict:o,objects:"reference"}))return!1}else for(d in o?e:i)if(i[d]!==e[d])return!1;if(ls.und(d)){if(l&&i.length===0&&e.length===0||a&&Object.keys(i).length===0&&Object.keys(e).length===0)return!0;if(i!==e)return!1}return!0}};function qV(i){const e={nodes:{},materials:{}};return i&&i.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function JV(i){i.dispose&&i.type!=="Scene"&&i.dispose();for(const e in i)e.dispose==null||e.dispose(),delete i[e]}function cm(i,e){const t=i;return(e!=null&&e.primitive||!t.__r3f)&&(t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e}),i}function Kw(i,e){let t=i;if(e.includes("-")){const r=e.split("-"),o=r.pop();return t=r.reduce((a,l)=>a[l],i),{target:t,key:o}}else return{target:t,key:e}}const zI=/-\d+$/;function r2(i,e,t){if(ls.str(t)){if(zI.test(t)){const a=t.replace(zI,""),{target:l,key:d}=Kw(i,a);Array.isArray(l[d])||(l[d]=[])}const{target:r,key:o}=Kw(i,t);e.__r3f.previousAttach=r[o],r[o]=e}else e.__r3f.previousAttach=t(i,e)}function GI(i,e,t){var r,o;if(ls.str(t)){const{target:a,key:l}=Kw(i,t),d=e.__r3f.previousAttach;d===void 0?delete a[l]:a[l]=d}else(r=e.__r3f)==null||r.previousAttach==null||r.previousAttach(i,e);(o=e.__r3f)==null||delete o.previousAttach}function bP(i,{children:e,key:t,ref:r,...o},{children:a,key:l,ref:d,...c}={},h=!1){var m;const p=(m=i==null?void 0:i.__r3f)!=null?m:{},A=Object.entries(o),v=[];if(h){const x=Object.keys(c);for(let C=0;C<x.length;C++)o.hasOwnProperty(x[C])||A.unshift([x[C],CP+"remove"])}A.forEach(([x,C])=>{var g;if((g=i.__r3f)!=null&&g.primitive&&x==="object"||ls.equ(C,c[x]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(x))return v.push([x,C,!0,[]]);let b=[];x.includes("-")&&(b=x.split("-")),v.push([x,C,!1,b]);for(const _ in o){const S=o[_];_.startsWith(`${x}-`)&&v.push([_,S,!1,_.split("-")])}});const y={...o};return p.memoizedProps&&p.memoizedProps.args&&(y.args=p.memoizedProps.args),p.memoizedProps&&p.memoizedProps.attach&&(y.attach=p.memoizedProps.attach),{memoized:y,changes:v}}function s2(i,e){var t,r,o;const a=(t=i.__r3f)!=null?t:{},l=a.root,d=(r=l==null||l.getState==null?void 0:l.getState())!=null?r:{},{memoized:c,changes:h}=YV(e)?e:bP(i,e),m=a.eventCount;i.__r3f&&(i.__r3f.memoizedProps=c);for(let A=0;A<h.length;A++){let[v,y,x,C]=h[A],g=i,b=g[v];if(C.length&&(b=C.reduce((_,S)=>_[S],i),!(b&&b.set))){const[_,...S]=C.reverse();g=S.reverse().reduce((R,P)=>R[P],i),v=_}if(y===CP+"remove")if(g.constructor){let _=UI.get(g.constructor);_||(_=new g.constructor,UI.set(g.constructor,_)),y=_[v]}else y=0;if(x)y?a.handlers[v]=y:delete a.handlers[v],a.eventCount=Object.keys(a.handlers).length;else if(b&&b.set&&(b.copy||b instanceof Of)){if(Array.isArray(y))b.fromArray?b.fromArray(y):b.set(...y);else if(b.copy&&y&&y.constructor&&b.constructor===y.constructor)b.copy(y);else if(y!==void 0){const _=b instanceof Rn;!_&&b.setScalar?b.setScalar(y):b instanceof Of&&y instanceof Of?b.mask=y.mask:b.set(y),!xP()&&!d.linear&&_&&b.convertSRGBToLinear()}}else g[v]=y,!d.linear&&g[v]instanceof As&&g[v].format===Qa&&g[v].type===Ju&&(g[v].encoding=Dr);um(i)}if(a.parent&&d.internal&&i.raycast&&m!==a.eventCount){const A=d.internal.interaction.indexOf(i);A>-1&&d.internal.interaction.splice(A,1),a.eventCount&&d.internal.interaction.push(i)}return!(h.length===1&&h[0][0]==="onUpdate")&&h.length&&(o=i.__r3f)!=null&&o.parent&&Yw(i),i}function um(i){var e,t;const r=(e=i.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();r&&r.internal.frames===0&&r.invalidate()}function Yw(i){i.onUpdate==null||i.onUpdate(i)}function ZV(i,e){i.manual||(EP(i)?(i.left=e.width/-2,i.right=e.width/2,i.top=e.height/2,i.bottom=e.height/-2):i.aspect=e.width/e.height,i.updateProjectionMatrix(),i.updateMatrixWorld())}function l1(i){return(i.eventObject||i.object).uuid+"/"+i.index+i.instanceId}function $V(){var i;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return Qh.DefaultEventPriority;switch((i=e.event)==null?void 0:i.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Qh.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Qh.ContinuousEventPriority;default:return Qh.DefaultEventPriority}}function SP(i,e,t,r){const o=t.get(e);o&&(t.delete(e),t.size===0&&(i.delete(r),o.target.releasePointerCapture(r)))}function eQ(i,e){const{internal:t}=i.getState();t.interaction=t.interaction.filter(r=>r!==e),t.initialHits=t.initialHits.filter(r=>r!==e),t.hovered.forEach((r,o)=>{(r.eventObject===e||r.object===e)&&t.hovered.delete(o)}),t.capturedMap.forEach((r,o)=>{SP(t.capturedMap,e,r,o)})}function tQ(i){function e(c){const{internal:h}=i.getState(),m=c.offsetX-h.initialClick[0],p=c.offsetY-h.initialClick[1];return Math.round(Math.sqrt(m*m+p*p))}function t(c){return c.filter(h=>["Move","Over","Enter","Out","Leave"].some(m=>{var p;return(p=h.__r3f)==null?void 0:p.handlers["onPointer"+m]}))}function r(c,h){const m=i.getState(),p=new Set,A=[],v=h?h(m.internal.interaction):m.internal.interaction;for(let g=0;g<v.length;g++){const b=bA(v[g]);b&&(b.raycaster.camera=void 0)}m.previousRoot||m.events.compute==null||m.events.compute(c,m);function y(g){const b=bA(g);if(!b||!b.events.enabled||b.raycaster.camera===null)return[];if(b.raycaster.camera===void 0){var _;b.events.compute==null||b.events.compute(c,b,(_=b.previousRoot)==null?void 0:_.getState()),b.raycaster.camera===void 0&&(b.raycaster.camera=null)}return b.raycaster.camera?b.raycaster.intersectObject(g,!0):[]}let x=v.flatMap(y).sort((g,b)=>{const _=bA(g.object),S=bA(b.object);return!_||!S?g.distance-b.distance:S.events.priority-_.events.priority||g.distance-b.distance}).filter(g=>{const b=l1(g);return p.has(b)?!1:(p.add(b),!0)});m.events.filter&&(x=m.events.filter(x,m));for(const g of x){let b=g.object;for(;b;){var C;(C=b.__r3f)!=null&&C.eventCount&&A.push({...g,eventObject:b}),b=b.parent}}if("pointerId"in c&&m.internal.capturedMap.has(c.pointerId))for(let g of m.internal.capturedMap.get(c.pointerId).values())p.has(l1(g.intersection))||A.push(g.intersection);return A}function o(c,h,m,p){const A=i.getState();if(c.length){const v={stopped:!1};for(const y of c){const x=bA(y.object)||A,{raycaster:C,pointer:g,camera:b,internal:_}=x,S=new Ue(g.x,g.y,0).unproject(b),R=N=>{var H,J;return(H=(J=_.capturedMap.get(N))==null?void 0:J.has(y.eventObject))!=null?H:!1},P=N=>{const H={intersection:y,target:h.target};_.capturedMap.has(N)?_.capturedMap.get(N).set(y.eventObject,H):_.capturedMap.set(N,new Map([[y.eventObject,H]])),h.target.setPointerCapture(N)},O=N=>{const H=_.capturedMap.get(N);H&&SP(_.capturedMap,y.eventObject,H,N)};let D={};for(let N in h){let H=h[N];typeof H!="function"&&(D[N]=H)}let L={...y,...D,pointer:g,intersections:c,stopped:v.stopped,delta:m,unprojectedPoint:S,ray:C.ray,camera:b,stopPropagation(){const N="pointerId"in h&&_.capturedMap.get(h.pointerId);if((!N||N.has(y.eventObject))&&(L.stopped=v.stopped=!0,_.hovered.size&&Array.from(_.hovered.values()).find(H=>H.eventObject===y.eventObject))){const H=c.slice(0,c.indexOf(y));a([...H,y])}},target:{hasPointerCapture:R,setPointerCapture:P,releasePointerCapture:O},currentTarget:{hasPointerCapture:R,setPointerCapture:P,releasePointerCapture:O},nativeEvent:h};if(p(L),v.stopped===!0)break}}return c}function a(c){const{internal:h}=i.getState();for(const m of h.hovered.values())if(!c.length||!c.find(p=>p.object===m.object&&p.index===m.index&&p.instanceId===m.instanceId)){const A=m.eventObject.__r3f,v=A==null?void 0:A.handlers;if(h.hovered.delete(l1(m)),A!=null&&A.eventCount){const y={...m,intersections:c};v.onPointerOut==null||v.onPointerOut(y),v.onPointerLeave==null||v.onPointerLeave(y)}}}function l(c,h){for(let m=0;m<h.length;m++){const p=h[m].__r3f;p==null||p.handlers.onPointerMissed==null||p.handlers.onPointerMissed(c)}}function d(c){switch(c){case"onPointerLeave":case"onPointerCancel":return()=>a([]);case"onLostPointerCapture":return h=>{const{internal:m}=i.getState();"pointerId"in h&&m.capturedMap.has(h.pointerId)&&requestAnimationFrame(()=>{m.capturedMap.has(h.pointerId)&&(m.capturedMap.delete(h.pointerId),a([]))})}}return function(m){const{onPointerMissed:p,internal:A}=i.getState();A.lastEvent.current=m;const v=c==="onPointerMove",y=c==="onClick"||c==="onContextMenu"||c==="onDoubleClick",C=r(m,v?t:void 0),g=y?e(m):0;c==="onPointerDown"&&(A.initialClick=[m.offsetX,m.offsetY],A.initialHits=C.map(_=>_.eventObject)),y&&!C.length&&g<=2&&(l(m,A.interaction),p&&p(m)),v&&a(C);function b(_){const S=_.eventObject,R=S.__r3f,P=R==null?void 0:R.handlers;if(R!=null&&R.eventCount)if(v){if(P.onPointerOver||P.onPointerEnter||P.onPointerOut||P.onPointerLeave){const O=l1(_),D=A.hovered.get(O);D?D.stopped&&_.stopPropagation():(A.hovered.set(O,_),P.onPointerOver==null||P.onPointerOver(_),P.onPointerEnter==null||P.onPointerEnter(_))}P.onPointerMove==null||P.onPointerMove(_)}else{const O=P[c];O?(!y||A.initialHits.includes(S))&&(l(m,A.interaction.filter(D=>!A.initialHits.includes(D))),O(_)):y&&A.initialHits.includes(S)&&l(m,A.interaction.filter(D=>!A.initialHits.includes(D)))}}o(C,m,g,b)}}return{handlePointer:d}}const TP=i=>!!(i!=null&&i.render),IP=Zt.createContext(null),nQ=(i,e)=>{const t=FM((d,c)=>{const h=new Ue,m=new Ue,p=new Ue;function A(g=c().camera,b=m,_=c().size){const{width:S,height:R,top:P,left:O}=_,D=S/R;b instanceof Ue?p.copy(b):p.set(...b);const L=g.getWorldPosition(h).distanceTo(p);if(EP(g))return{width:S/g.zoom,height:R/g.zoom,top:P,left:O,factor:1,distance:L,aspect:D};{const N=g.fov*Math.PI/180,H=2*Math.tan(N/2)*L,J=H*(S/R);return{width:J,height:H,top:P,left:O,factor:S/J,distance:L,aspect:D}}}let v;const y=g=>d(b=>({performance:{...b.performance,current:g}})),x=new Yt;return{set:d,get:c,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(g=1)=>i(c(),g),advance:(g,b)=>e(g,b,c()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new LM,pointer:x,mouse:x,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const g=c();v&&clearTimeout(v),g.performance.current!==g.performance.min&&y(g.performance.min),v=setTimeout(()=>y(c().performance.max),g.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:A},setEvents:g=>d(b=>({...b,events:{...b.events,...g}})),setSize:(g,b,_,S,R)=>{const P=c().camera,O={width:g,height:b,top:S||0,left:R||0,updateStyle:_};d(D=>({size:O,viewport:{...D.viewport,...A(P,m,O)}}))},setDpr:g=>d(b=>{const _=MP(g);return{viewport:{...b.viewport,dpr:_,initialDpr:b.viewport.initialDpr||_}}}),setFrameloop:(g="always")=>{const b=c().clock;b.stop(),b.elapsedTime=0,g!=="never"&&(b.start(),b.elapsedTime=0),d(()=>({frameloop:g}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:Zt.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(g,b,_)=>{const S=c().internal;return S.priority=S.priority+(b>0?1:0),S.subscribers.push({ref:g,priority:b,store:_}),S.subscribers=S.subscribers.sort((R,P)=>R.priority-P.priority),()=>{const R=c().internal;R!=null&&R.subscribers&&(R.priority=R.priority-(b>0?1:0),R.subscribers=R.subscribers.filter(P=>P.ref!==g))}}}}}),r=t.getState();let o=r.size,a=r.viewport.dpr,l=r.camera;return t.subscribe(()=>{const{camera:d,size:c,viewport:h,gl:m,set:p}=t.getState();if(c!==o||h.dpr!==a){var A;o=c,a=h.dpr,ZV(d,c),m.setPixelRatio(h.dpr);const v=(A=c.updateStyle)!=null?A:typeof HTMLCanvasElement<"u"&&m.domElement instanceof HTMLCanvasElement;m.setSize(c.width,c.height,v)}d!==l&&(l=d,p(v=>({viewport:{...v.viewport,...v.viewport.getCurrentViewport(d)}})))}),t.subscribe(d=>i(d)),t};let c1,iQ=new Set,rQ=new Set,sQ=new Set;function o2(i,e){if(i.size)for(const{callback:t}of i.values())t(e)}function SA(i,e){switch(i){case"before":return o2(iQ,e);case"after":return o2(rQ,e);case"tail":return o2(sQ,e)}}let a2,l2;function c2(i,e,t){let r=e.clock.getDelta();for(e.frameloop==="never"&&typeof i=="number"&&(r=i-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=i),a2=e.internal.subscribers,c1=0;c1<a2.length;c1++)l2=a2[c1],l2.ref.current(l2.store.getState(),r,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function oQ(i){let e=!1,t,r,o;function a(c){r=requestAnimationFrame(a),e=!0,t=0,SA("before",c);for(const m of i.values()){var h;o=m.store.getState(),o.internal.active&&(o.frameloop==="always"||o.internal.frames>0)&&!((h=o.gl.xr)!=null&&h.isPresenting)&&(t+=c2(c,o))}if(SA("after",c),t===0)return SA("tail",c),e=!1,cancelAnimationFrame(r)}function l(c,h=1){var m;if(!c)return i.forEach(p=>l(p.store.getState()),h);(m=c.gl.xr)!=null&&m.isPresenting||!c.internal.active||c.frameloop==="never"||(c.internal.frames=Math.min(60,c.internal.frames+h),e||(e=!0,requestAnimationFrame(a)))}function d(c,h=!0,m,p){if(h&&SA("before",c),m)c2(c,m,p);else for(const A of i.values())c2(c,A.store.getState());h&&SA("after",c)}return{loop:a,invalidate:l,advance:d}}function RP(){const i=Zt.useContext(IP);if(!i)throw new Error("R3F: Hooks can only be used within the Canvas component!");return i}function cl(i=t=>t,e){return RP()(i,e)}function kM(i,e=0){const t=RP(),r=t.getState().internal.subscribe,o=_P(i);return $0(()=>r(o,e,t),[e,r,t]),null}function BP(i,e){return function(t,...r){const o=new t;return i&&i(o),Promise.all(r.map(a=>new Promise((l,d)=>o.load(a,c=>{c.scene&&Object.assign(c,qV(c.scene)),l(c)},e,c=>d(new Error(`Could not load ${a}: ${c.message})`))))))}}function ax(i,e,t,r){const o=Array.isArray(e)?e:[e],a=HV(BP(t,r),[i,...o],{equal:ls.equ});return Array.isArray(e)?a:a[0]}ax.preload=function(i,e,t){const r=Array.isArray(e)?e:[e];return VV(BP(t),[i,...r])};ax.clear=function(i,e){const t=Array.isArray(e)?e:[e];return QV([i,...t])};const eg=new Map,{invalidate:HI,advance:VI}=oQ(eg),{reconciler:lx,applyProps:TA}=jV(eg,$V),am={objects:"shallow",strict:!1},aQ=(i,e)=>{const t=typeof i=="function"?i(e):i;return TP(t)?t:new lM({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...i})};function lQ(i,e){if(e)return e;if(typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement&&i.parentElement){const{width:t,height:r,top:o,left:a}=i.parentElement.getBoundingClientRect();return{width:t,height:r,top:o,left:a}}else if(typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas)return{width:i.width,height:i.height,top:0,left:0};return{width:0,height:0,top:0,left:0}}function cQ(i){const e=eg.get(i),t=e==null?void 0:e.fiber,r=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const o=typeof reportError=="function"?reportError:console.error,a=r||nQ(HI,VI),l=t||lx.createContainer(a,Qh.ConcurrentRoot,null,!1,null,"",o,null);e||eg.set(i,{fiber:l,store:a});let d,c=!1,h;return{configure(m={}){let{gl:p,size:A,scene:v,events:y,onCreated:x,shadows:C=!1,linear:g=!1,flat:b=!1,legacy:_=!1,orthographic:S=!1,frameloop:R="always",dpr:P=[1,2],performance:O,raycaster:D,camera:L,onPointerMissed:N}=m,H=a.getState(),J=H.gl;H.gl||H.set({gl:J=aQ(p,i)});let K=H.raycaster;K||H.set({raycaster:K=new mP});const{params:se,...ae}=D||{};if(ls.equ(ae,K,am)||TA(K,{...ae}),ls.equ(se,K.params,am)||TA(K,{params:{...K.params,...se}}),!H.camera||H.camera===h&&!ls.equ(h,L,am)){h=L;const he=L instanceof N0,xe=he?L:S?new ju(0,0,0,0,.1,1e3):new cs(75,0,.1,1e3);he||(xe.position.z=5,L&&TA(xe,L),!H.camera&&!(L!=null&&L.rotation)&&xe.lookAt(0,0,0)),H.set({camera:xe})}if(!H.scene){let he;v instanceof rx?he=v:(he=new rx,v&&TA(he,v)),H.set({scene:cm(he)})}if(!H.xr){const he=(Fe,je)=>{const rt=a.getState();rt.frameloop!=="never"&&VI(Fe,!0,rt,je)},xe=()=>{const Fe=a.getState();Fe.gl.xr.enabled=Fe.gl.xr.isPresenting,Fe.gl.xr.setAnimationLoop(Fe.gl.xr.isPresenting?he:null),Fe.gl.xr.isPresenting||HI(Fe)},ve={connect(){const Fe=a.getState().gl;Fe.xr.addEventListener("sessionstart",xe),Fe.xr.addEventListener("sessionend",xe)},disconnect(){const Fe=a.getState().gl;Fe.xr.removeEventListener("sessionstart",xe),Fe.xr.removeEventListener("sessionend",xe)}};J.xr&&ve.connect(),H.set({xr:ve})}if(J.shadowMap){const he=J.shadowMap.enabled,xe=J.shadowMap.type;if(J.shadowMap.enabled=!!C,ls.boo(C))J.shadowMap.type=KA;else if(ls.str(C)){var ee;const ve={basic:xL,percentage:Sx,soft:KA,variance:Cf};J.shadowMap.type=(ee=ve[C])!=null?ee:KA}else ls.obj(C)&&Object.assign(J.shadowMap,C);(he!==J.shadowMap.enabled||xe!==J.shadowMap.type)&&(J.shadowMap.needsUpdate=!0)}const ne=xP();ne&&("enabled"in ne?ne.enabled=!_:"legacyMode"in ne&&(ne.legacyMode=_));const X=g?Zu:Dr,W=b?vc:YC;J.outputEncoding!==X&&(J.outputEncoding=X),J.toneMapping!==W&&(J.toneMapping=W),H.legacy!==_&&H.set(()=>({legacy:_})),H.linear!==g&&H.set(()=>({linear:g})),H.flat!==b&&H.set(()=>({flat:b})),p&&!ls.fun(p)&&!TP(p)&&!ls.equ(p,J,am)&&TA(J,p),y&&!H.events.handlers&&H.set({events:y(a)});const ce=lQ(i,A);return ls.equ(ce,H.size,am)||H.setSize(ce.width,ce.height,ce.updateStyle,ce.top,ce.left),P&&H.viewport.dpr!==MP(P)&&H.setDpr(P),H.frameloop!==R&&H.setFrameloop(R),H.onPointerMissed||H.set({onPointerMissed:N}),O&&!ls.equ(O,H.performance,am)&&H.set(he=>({performance:{...he.performance,...O}})),d=x,c=!0,this},render(m){return c||this.configure(),lx.updateContainer(Zt.createElement(uQ,{store:a,children:m,onCreated:d,rootElement:i}),l,null,()=>{}),a},unmount(){LP(i)}}}function uQ({store:i,children:e,onCreated:t,rootElement:r}){return $0(()=>{const o=i.getState();o.set(a=>({internal:{...a.internal,active:!0}})),t&&t(o),i.getState().events.connected||o.events.connect==null||o.events.connect(r)},[]),Zt.createElement(IP.Provider,{value:i},e)}function LP(i,e){const t=eg.get(i),r=t==null?void 0:t.fiber;if(r){const o=t==null?void 0:t.store.getState();o&&(o.internal.active=!1),lx.updateContainer(null,r,null,()=>{o&&setTimeout(()=>{try{var a,l,d,c;o.events.disconnect==null||o.events.disconnect(),(a=o.gl)==null||(l=a.renderLists)==null||l.dispose==null||l.dispose(),(d=o.gl)==null||d.forceContextLoss==null||d.forceContextLoss(),(c=o.gl)!=null&&c.xr&&o.xr.disconnect(),JV(o),eg.delete(i),e&&e(i)}catch{}},500)})}}lx.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:Zt.version});function S0(){return S0=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=t[r])}return i},S0.apply(this,arguments)}function qw(i,e,t){var r,o,a,l,d;e==null&&(e=100);function c(){var m=Date.now()-l;m<e&&m>=0?r=setTimeout(c,e-m):(r=null,t||(d=i.apply(a,o),a=o=null))}var h=function(){a=this,o=arguments,l=Date.now();var m=t&&!r;return r||(r=setTimeout(c,e)),m&&(d=i.apply(a,o),a=o=null),d};return h.clear=function(){r&&(clearTimeout(r),r=null)},h.flush=function(){r&&(d=i.apply(a,o),a=o=null,clearTimeout(r),r=null)},h}qw.debounce=qw;var QI=qw;function hQ(i){let{debounce:e,scroll:t,polyfill:r,offsetSize:o}=i===void 0?{debounce:0,scroll:!1,offsetSize:!1}:i;const a=r||(typeof window>"u"?class{}:window.ResizeObserver);if(!a)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[l,d]=Zt.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),c=Zt.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:l}),h=e?typeof e=="number"?e:e.scroll:null,m=e?typeof e=="number"?e:e.resize:null,p=Zt.useRef(!1);Zt.useEffect(()=>(p.current=!0,()=>void(p.current=!1)));const[A,v,y]=Zt.useMemo(()=>{const b=()=>{if(!c.current.element)return;const{left:_,top:S,width:R,height:P,bottom:O,right:D,x:L,y:N}=c.current.element.getBoundingClientRect(),H={left:_,top:S,width:R,height:P,bottom:O,right:D,x:L,y:N};c.current.element instanceof HTMLElement&&o&&(H.height=c.current.element.offsetHeight,H.width=c.current.element.offsetWidth),Object.freeze(H),p.current&&!mQ(c.current.lastBounds,H)&&d(c.current.lastBounds=H)};return[b,m?QI(b,m):b,h?QI(b,h):b]},[d,o,h,m]);function x(){c.current.scrollContainers&&(c.current.scrollContainers.forEach(b=>b.removeEventListener("scroll",y,!0)),c.current.scrollContainers=null),c.current.resizeObserver&&(c.current.resizeObserver.disconnect(),c.current.resizeObserver=null)}function C(){c.current.element&&(c.current.resizeObserver=new a(y),c.current.resizeObserver.observe(c.current.element),t&&c.current.scrollContainers&&c.current.scrollContainers.forEach(b=>b.addEventListener("scroll",y,{capture:!0,passive:!0})))}const g=b=>{!b||b===c.current.element||(x(),c.current.element=b,c.current.scrollContainers=DP(b),C())};return fQ(y,!!t),dQ(v),Zt.useEffect(()=>{x(),C()},[t,y,v]),Zt.useEffect(()=>x,[]),[g,l,A]}function dQ(i){Zt.useEffect(()=>{const e=i;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[i])}function fQ(i,e){Zt.useEffect(()=>{if(e){const t=i;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[i,e])}function DP(i){const e=[];if(!i||i===document.body)return e;const{overflow:t,overflowX:r,overflowY:o}=window.getComputedStyle(i);return[t,r,o].some(a=>a==="auto"||a==="scroll")&&e.push(i),[...e,...DP(i.parentElement)]}const pQ=["x","y","top","bottom","left","right","width","height"],mQ=(i,e)=>pQ.every(t=>i[t]===e[t]);var gQ=Object.defineProperty,AQ=Object.defineProperties,vQ=Object.getOwnPropertyDescriptors,WI=Object.getOwnPropertySymbols,yQ=Object.prototype.hasOwnProperty,xQ=Object.prototype.propertyIsEnumerable,jI=(i,e,t)=>e in i?gQ(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,XI=(i,e)=>{for(var t in e||(e={}))yQ.call(e,t)&&jI(i,t,e[t]);if(WI)for(var t of WI(e))xQ.call(e,t)&&jI(i,t,e[t]);return i},EQ=(i,e)=>AQ(i,vQ(e));function PP(i,e,t){if(!i)return;if(t(i)===!0)return i;let r=e?i.return:i.child;for(;r;){const o=PP(r,e,t);if(o)return o;r=e?null:r.sibling}}function OP(i){try{return Object.defineProperties(i,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return i}}const UM=OP(Zt.createContext(null));class FP extends Zt.Component{render(){return Zt.createElement(UM.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:KI,ReactCurrentDispatcher:YI}=Zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function _Q(){const i=Zt.useContext(UM);if(i===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=Zt.useId();return Zt.useMemo(()=>{var r;return(r=KI==null?void 0:KI.current)!=null?r:PP(i,!1,o=>{let a=o.memoizedState;for(;a;){if(a.memoizedState===e)return!0;a=a.next}})},[i,e])}function wQ(){var i,e;const t=_Q(),[r]=Zt.useState(()=>new Map);r.clear();let o=t;for(;o;){const a=(i=o.type)==null?void 0:i._context;a&&a!==UM&&!r.has(a)&&r.set(a,(e=YI==null?void 0:YI.current)==null?void 0:e.readContext(OP(a))),o=o.return}return r}function CQ(){const i=wQ();return Zt.useMemo(()=>Array.from(i.keys()).reduce((e,t)=>r=>Zt.createElement(e,null,Zt.createElement(t.Provider,EQ(XI({},r),{value:i.get(t)}))),e=>Zt.createElement(FP,XI({},e))),[i])}const u2={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function MQ(i){const{handlePointer:e}=tQ(i);return{priority:1,enabled:!0,compute(t,r,o){r.pointer.set(t.offsetX/r.size.width*2-1,-(t.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(u2).reduce((t,r)=>({...t,[r]:e(r)}),{}),update:()=>{var t;const{events:r,internal:o}=i.getState();(t=o.lastEvent)!=null&&t.current&&r.handlers&&r.handlers.onPointerMove(o.lastEvent.current)},connect:t=>{var r;const{set:o,events:a}=i.getState();a.disconnect==null||a.disconnect(),o(l=>({events:{...l.events,connected:t}})),Object.entries((r=a.handlers)!=null?r:[]).forEach(([l,d])=>{const[c,h]=u2[l];t.addEventListener(c,d,{passive:h})})},disconnect:()=>{const{set:t,events:r}=i.getState();if(r.connected){var o;Object.entries((o=r.handlers)!=null?o:[]).forEach(([a,l])=>{if(r&&r.connected instanceof HTMLElement){const[d]=u2[a];r.connected.removeEventListener(d,l)}}),t(a=>({events:{...a.events,connected:void 0}}))}}}}const bQ=Zt.forwardRef(function({children:e,fallback:t,resize:r,style:o,gl:a,events:l=MQ,eventSource:d,eventPrefix:c,shadows:h,linear:m,flat:p,legacy:A,orthographic:v,frameloop:y,dpr:x,performance:C,raycaster:g,camera:b,onPointerMissed:_,onCreated:S,...R},P){Zt.useMemo(()=>WV(BV),[]);const O=CQ(),[D,L]=hQ({scroll:!0,debounce:{scroll:50,resize:0},...r}),N=Zt.useRef(null),H=Zt.useRef(null);Zt.useImperativeHandle(P,()=>N.current);const J=_P(_),[K,se]=Zt.useState(!1),[ae,ee]=Zt.useState(!1);if(K)throw K;if(ae)throw ae;const ne=Zt.useRef(null);$0(()=>{const W=N.current;L.width>0&&L.height>0&&W&&(ne.current||(ne.current=cQ(W)),ne.current.configure({gl:a,events:l,shadows:h,linear:m,flat:p,legacy:A,orthographic:v,frameloop:y,dpr:x,performance:C,raycaster:g,camera:b,size:L,onPointerMissed:(...ce)=>J.current==null?void 0:J.current(...ce),onCreated:ce=>{ce.events.connect==null||ce.events.connect(d?XV(d)?d.current:d:H.current),c&&ce.setEvents({compute:(he,xe)=>{const ve=he[c+"X"],Fe=he[c+"Y"];xe.pointer.set(ve/xe.size.width*2-1,-(Fe/xe.size.height)*2+1),xe.raycaster.setFromCamera(xe.pointer,xe.camera)}}),S==null||S(ce)}}),ne.current.render(Zt.createElement(O,null,Zt.createElement(wP,{set:ee},Zt.createElement(Zt.Suspense,{fallback:Zt.createElement(KV,{set:se})},e)))))}),Zt.useEffect(()=>{const W=N.current;if(W)return()=>LP(W)},[]);const X=d?"none":"auto";return Zt.createElement("div",S0({ref:H,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:X,...o}},R),Zt.createElement("div",{ref:D,style:{width:"100%",height:"100%"}},Zt.createElement("canvas",{ref:N,style:{display:"block"}},t)))}),NP=Zt.forwardRef(function(e,t){return Zt.createElement(FP,null,Zt.createElement(bQ,S0({},e,{ref:t})))});function T0(i){return T0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T0(i)}function SQ(i,e){if(T0(i)!=="object"||i===null)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var r=t.call(i,e||"default");if(T0(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function TQ(i){var e=SQ(i,"string");return T0(e)==="symbol"?e:String(e)}function Xi(i,e,t){return e=TQ(e),e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}const qI=(i,e)=>(i%e+e)%e;let IQ=class extends du{constructor(e,t){super(),Xi(this,"object",void 0),Xi(this,"domElement",void 0),Xi(this,"enabled",!0),Xi(this,"target",new Ue),Xi(this,"minDistance",0),Xi(this,"maxDistance",1/0),Xi(this,"minZoom",0),Xi(this,"maxZoom",1/0),Xi(this,"minPolarAngle",0),Xi(this,"maxPolarAngle",Math.PI),Xi(this,"minAzimuthAngle",-1/0),Xi(this,"maxAzimuthAngle",1/0),Xi(this,"enableDamping",!1),Xi(this,"dampingFactor",.05),Xi(this,"enableZoom",!0),Xi(this,"zoomSpeed",1),Xi(this,"enableRotate",!0),Xi(this,"rotateSpeed",1),Xi(this,"enablePan",!0),Xi(this,"panSpeed",1),Xi(this,"screenSpacePanning",!0),Xi(this,"keyPanSpeed",7),Xi(this,"autoRotate",!1),Xi(this,"autoRotateSpeed",2),Xi(this,"reverseOrbit",!1),Xi(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Xi(this,"mouseButtons",{LEFT:gf.ROTATE,MIDDLE:gf.DOLLY,RIGHT:gf.PAN}),Xi(this,"touches",{ONE:Af.ROTATE,TWO:Af.DOLLY_PAN}),Xi(this,"target0",void 0),Xi(this,"position0",void 0),Xi(this,"zoom0",void 0),Xi(this,"_domElementKeyEvents",null),Xi(this,"getPolarAngle",void 0),Xi(this,"getAzimuthalAngle",void 0),Xi(this,"setPolarAngle",void 0),Xi(this,"setAzimuthalAngle",void 0),Xi(this,"getDistance",void 0),Xi(this,"listenToKeyEvents",void 0),Xi(this,"saveState",void 0),Xi(this,"reset",void 0),Xi(this,"update",void 0),Xi(this,"connect",void 0),Xi(this,"dispose",void 0),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object instanceof cs?this.object.zoom:1,this.getPolarAngle=()=>m.phi,this.getAzimuthalAngle=()=>m.theta,this.setPolarAngle=fe=>{let Oe=qI(fe,2*Math.PI),$e=m.phi;$e<0&&($e+=2*Math.PI),Oe<0&&(Oe+=2*Math.PI);let le=Math.abs(Oe-$e);2*Math.PI-le<le&&(Oe<$e?Oe+=2*Math.PI:$e+=2*Math.PI),p.phi=Oe-$e,r.update()},this.setAzimuthalAngle=fe=>{let Oe=qI(fe,2*Math.PI),$e=m.theta;$e<0&&($e+=2*Math.PI),Oe<0&&(Oe+=2*Math.PI);let le=Math.abs(Oe-$e);2*Math.PI-le<le&&(Oe<$e?Oe+=2*Math.PI:$e+=2*Math.PI),p.theta=Oe-$e,r.update()},this.getDistance=()=>r.object.position.distanceTo(r.target),this.listenToKeyEvents=fe=>{fe.addEventListener("keydown",qe),this._domElementKeyEvents=fe},this.saveState=()=>{r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object instanceof cs?r.object.zoom:1},this.reset=()=>{r.target.copy(r.target0),r.object.position.copy(r.position0),r.object instanceof cs&&(r.object.zoom=r.zoom0,r.object.updateProjectionMatrix()),r.dispatchEvent(o),r.update(),c=d.NONE},this.update=(()=>{const fe=new Ue,Oe=new Oo().setFromUnitVectors(e.up,new Ue(0,1,0)),$e=Oe.clone().invert(),le=new Ue,Q=new Oo,Z=2*Math.PI;return function(){const Ae=r.object.position;fe.copy(Ae).sub(r.target),fe.applyQuaternion(Oe),m.setFromVector3(fe),r.autoRotate&&c===d.NONE&&J(N()),r.enableDamping?(m.theta+=p.theta*r.dampingFactor,m.phi+=p.phi*r.dampingFactor):(m.theta+=p.theta,m.phi+=p.phi);let Te=r.minAzimuthAngle,Ve=r.maxAzimuthAngle;return isFinite(Te)&&isFinite(Ve)&&(Te<-Math.PI?Te+=Z:Te>Math.PI&&(Te-=Z),Ve<-Math.PI?Ve+=Z:Ve>Math.PI&&(Ve-=Z),Te<=Ve?m.theta=Math.max(Te,Math.min(Ve,m.theta)):m.theta=m.theta>(Te+Ve)/2?Math.max(Te,m.theta):Math.min(Ve,m.theta)),m.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,m.phi)),m.makeSafe(),m.radius*=A,m.radius=Math.max(r.minDistance,Math.min(r.maxDistance,m.radius)),r.enableDamping===!0?r.target.addScaledVector(v,r.dampingFactor):r.target.add(v),fe.setFromSpherical(m),fe.applyQuaternion($e),Ae.copy(r.target).add(fe),r.object.lookAt(r.target),r.enableDamping===!0?(p.theta*=1-r.dampingFactor,p.phi*=1-r.dampingFactor,v.multiplyScalar(1-r.dampingFactor)):(p.set(0,0,0),v.set(0,0,0)),A=1,y||le.distanceToSquared(r.object.position)>h||8*(1-Q.dot(r.object.quaternion))>h?(r.dispatchEvent(o),le.copy(r.object.position),Q.copy(r.object.quaternion),y=!1,!0):!1}})(),this.connect=fe=>{fe===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),r.domElement=fe,r.domElement.style.touchAction="none",r.domElement.addEventListener("contextmenu",Re),r.domElement.addEventListener("pointerdown",un),r.domElement.addEventListener("pointercancel",Bn),r.domElement.addEventListener("wheel",Pe)},this.dispose=()=>{var fe,Oe,$e,le,Q,Z;(fe=r.domElement)===null||fe===void 0||fe.removeEventListener("contextmenu",Re),(Oe=r.domElement)===null||Oe===void 0||Oe.removeEventListener("pointerdown",un),($e=r.domElement)===null||$e===void 0||$e.removeEventListener("pointercancel",Bn),(le=r.domElement)===null||le===void 0||le.removeEventListener("wheel",Pe),(Q=r.domElement)===null||Q===void 0||Q.ownerDocument.removeEventListener("pointermove",fn),(Z=r.domElement)===null||Z===void 0||Z.ownerDocument.removeEventListener("pointerup",An),r._domElementKeyEvents!==null&&r._domElementKeyEvents.removeEventListener("keydown",qe)};const r=this,o={type:"change"},a={type:"start"},l={type:"end"},d={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let c=d.NONE;const h=1e-6,m=new jw,p=new jw;let A=1;const v=new Ue;let y=!1;const x=new Yt,C=new Yt,g=new Yt,b=new Yt,_=new Yt,S=new Yt,R=new Yt,P=new Yt,O=new Yt,D=[],L={};function N(){return 2*Math.PI/60/60*r.autoRotateSpeed}function H(){return Math.pow(.95,r.zoomSpeed)}function J(fe){r.reverseOrbit?p.theta+=fe:p.theta-=fe}function K(fe){r.reverseOrbit?p.phi+=fe:p.phi-=fe}const se=(()=>{const fe=new Ue;return function($e,le){fe.setFromMatrixColumn(le,0),fe.multiplyScalar(-$e),v.add(fe)}})(),ae=(()=>{const fe=new Ue;return function($e,le){r.screenSpacePanning===!0?fe.setFromMatrixColumn(le,1):(fe.setFromMatrixColumn(le,0),fe.crossVectors(r.object.up,fe)),fe.multiplyScalar($e),v.add(fe)}})(),ee=(()=>{const fe=new Ue;return function($e,le){const Q=r.domElement;if(Q&&r.object instanceof cs&&r.object.isPerspectiveCamera){const Z=r.object.position;fe.copy(Z).sub(r.target);let Ie=fe.length();Ie*=Math.tan(r.object.fov/2*Math.PI/180),se(2*$e*Ie/Q.clientHeight,r.object.matrix),ae(2*le*Ie/Q.clientHeight,r.object.matrix)}else Q&&r.object instanceof ju&&r.object.isOrthographicCamera?(se($e*(r.object.right-r.object.left)/r.object.zoom/Q.clientWidth,r.object.matrix),ae(le*(r.object.top-r.object.bottom)/r.object.zoom/Q.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}})();function ne(fe){r.object instanceof cs&&r.object.isPerspectiveCamera?A/=fe:r.object instanceof ju&&r.object.isOrthographicCamera?(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom*fe)),r.object.updateProjectionMatrix(),y=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function X(fe){r.object instanceof cs&&r.object.isPerspectiveCamera?A*=fe:r.object instanceof ju&&r.object.isOrthographicCamera?(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/fe)),r.object.updateProjectionMatrix(),y=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function W(fe){x.set(fe.clientX,fe.clientY)}function ce(fe){R.set(fe.clientX,fe.clientY)}function he(fe){b.set(fe.clientX,fe.clientY)}function xe(fe){C.set(fe.clientX,fe.clientY),g.subVectors(C,x).multiplyScalar(r.rotateSpeed);const Oe=r.domElement;Oe&&(J(2*Math.PI*g.x/Oe.clientHeight),K(2*Math.PI*g.y/Oe.clientHeight)),x.copy(C),r.update()}function ve(fe){P.set(fe.clientX,fe.clientY),O.subVectors(P,R),O.y>0?ne(H()):O.y<0&&X(H()),R.copy(P),r.update()}function Fe(fe){_.set(fe.clientX,fe.clientY),S.subVectors(_,b).multiplyScalar(r.panSpeed),ee(S.x,S.y),b.copy(_),r.update()}function je(fe){fe.deltaY<0?X(H()):fe.deltaY>0&&ne(H()),r.update()}function rt(fe){let Oe=!1;switch(fe.code){case r.keys.UP:ee(0,r.keyPanSpeed),Oe=!0;break;case r.keys.BOTTOM:ee(0,-r.keyPanSpeed),Oe=!0;break;case r.keys.LEFT:ee(r.keyPanSpeed,0),Oe=!0;break;case r.keys.RIGHT:ee(-r.keyPanSpeed,0),Oe=!0;break}Oe&&(fe.preventDefault(),r.update())}function He(){if(D.length==1)x.set(D[0].pageX,D[0].pageY);else{const fe=.5*(D[0].pageX+D[1].pageX),Oe=.5*(D[0].pageY+D[1].pageY);x.set(fe,Oe)}}function Ot(){if(D.length==1)b.set(D[0].pageX,D[0].pageY);else{const fe=.5*(D[0].pageX+D[1].pageX),Oe=.5*(D[0].pageY+D[1].pageY);b.set(fe,Oe)}}function xt(){const fe=D[0].pageX-D[1].pageX,Oe=D[0].pageY-D[1].pageY,$e=Math.sqrt(fe*fe+Oe*Oe);R.set(0,$e)}function gt(){r.enableZoom&&xt(),r.enablePan&&Ot()}function It(){r.enableZoom&&xt(),r.enableRotate&&He()}function ct(fe){if(D.length==1)C.set(fe.pageX,fe.pageY);else{const $e=Xe(fe),le=.5*(fe.pageX+$e.x),Q=.5*(fe.pageY+$e.y);C.set(le,Q)}g.subVectors(C,x).multiplyScalar(r.rotateSpeed);const Oe=r.domElement;Oe&&(J(2*Math.PI*g.x/Oe.clientHeight),K(2*Math.PI*g.y/Oe.clientHeight)),x.copy(C)}function ut(fe){if(D.length==1)_.set(fe.pageX,fe.pageY);else{const Oe=Xe(fe),$e=.5*(fe.pageX+Oe.x),le=.5*(fe.pageY+Oe.y);_.set($e,le)}S.subVectors(_,b).multiplyScalar(r.panSpeed),ee(S.x,S.y),b.copy(_)}function Ct(fe){const Oe=Xe(fe),$e=fe.pageX-Oe.x,le=fe.pageY-Oe.y,Q=Math.sqrt($e*$e+le*le);P.set(0,Q),O.set(0,Math.pow(P.y/R.y,r.zoomSpeed)),ne(O.y),R.copy(P)}function qt(fe){r.enableZoom&&Ct(fe),r.enablePan&&ut(fe)}function Ft(fe){r.enableZoom&&Ct(fe),r.enableRotate&&ct(fe)}function un(fe){if(r.enabled!==!1){if(D.length===0){var Oe,$e;(Oe=r.domElement)===null||Oe===void 0||Oe.ownerDocument.addEventListener("pointermove",fn),($e=r.domElement)===null||$e===void 0||$e.ownerDocument.addEventListener("pointerup",An)}Se(fe),fe.pointerType==="touch"?ye(fe):ci(fe)}}function fn(fe){r.enabled!==!1&&(fe.pointerType==="touch"?me(fe):ze(fe))}function An(fe){if(Be(fe),D.length===0){var Oe,$e,le;(Oe=r.domElement)===null||Oe===void 0||Oe.releasePointerCapture(fe.pointerId),($e=r.domElement)===null||$e===void 0||$e.ownerDocument.removeEventListener("pointermove",fn),(le=r.domElement)===null||le===void 0||le.ownerDocument.removeEventListener("pointerup",An)}r.dispatchEvent(l),c=d.NONE}function Bn(fe){Be(fe)}function ci(fe){let Oe;switch(fe.button){case 0:Oe=r.mouseButtons.LEFT;break;case 1:Oe=r.mouseButtons.MIDDLE;break;case 2:Oe=r.mouseButtons.RIGHT;break;default:Oe=-1}switch(Oe){case gf.DOLLY:if(r.enableZoom===!1)return;ce(fe),c=d.DOLLY;break;case gf.ROTATE:if(fe.ctrlKey||fe.metaKey||fe.shiftKey){if(r.enablePan===!1)return;he(fe),c=d.PAN}else{if(r.enableRotate===!1)return;W(fe),c=d.ROTATE}break;case gf.PAN:if(fe.ctrlKey||fe.metaKey||fe.shiftKey){if(r.enableRotate===!1)return;W(fe),c=d.ROTATE}else{if(r.enablePan===!1)return;he(fe),c=d.PAN}break;default:c=d.NONE}c!==d.NONE&&r.dispatchEvent(a)}function ze(fe){if(r.enabled!==!1)switch(c){case d.ROTATE:if(r.enableRotate===!1)return;xe(fe);break;case d.DOLLY:if(r.enableZoom===!1)return;ve(fe);break;case d.PAN:if(r.enablePan===!1)return;Fe(fe);break}}function Pe(fe){r.enabled===!1||r.enableZoom===!1||c!==d.NONE&&c!==d.ROTATE||(fe.preventDefault(),r.dispatchEvent(a),je(fe),r.dispatchEvent(l))}function qe(fe){r.enabled===!1||r.enablePan===!1||rt(fe)}function ye(fe){switch(Ee(fe),D.length){case 1:switch(r.touches.ONE){case Af.ROTATE:if(r.enableRotate===!1)return;He(),c=d.TOUCH_ROTATE;break;case Af.PAN:if(r.enablePan===!1)return;Ot(),c=d.TOUCH_PAN;break;default:c=d.NONE}break;case 2:switch(r.touches.TWO){case Af.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;gt(),c=d.TOUCH_DOLLY_PAN;break;case Af.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;It(),c=d.TOUCH_DOLLY_ROTATE;break;default:c=d.NONE}break;default:c=d.NONE}c!==d.NONE&&r.dispatchEvent(a)}function me(fe){switch(Ee(fe),c){case d.TOUCH_ROTATE:if(r.enableRotate===!1)return;ct(fe),r.update();break;case d.TOUCH_PAN:if(r.enablePan===!1)return;ut(fe),r.update();break;case d.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;qt(fe),r.update();break;case d.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;Ft(fe),r.update();break;default:c=d.NONE}}function Re(fe){r.enabled!==!1&&fe.preventDefault()}function Se(fe){D.push(fe)}function Be(fe){delete L[fe.pointerId];for(let Oe=0;Oe<D.length;Oe++)if(D[Oe].pointerId==fe.pointerId){D.splice(Oe,1);return}}function Ee(fe){let Oe=L[fe.pointerId];Oe===void 0&&(Oe=new Yt,L[fe.pointerId]=Oe),Oe.set(fe.pageX,fe.pageY)}function Xe(fe){const Oe=fe.pointerId===D[0].pointerId?D[1]:D[0];return L[Oe.pointerId]}t!==void 0&&this.connect(t),this.update()}};const RQ=Zt.forwardRef(({makeDefault:i,camera:e,regress:t,domElement:r,enableDamping:o=!0,onChange:a,onStart:l,onEnd:d,...c},h)=>{const m=cl(R=>R.invalidate),p=cl(R=>R.camera),A=cl(R=>R.gl),v=cl(R=>R.events),y=cl(R=>R.setEvents),x=cl(R=>R.set),C=cl(R=>R.get),g=cl(R=>R.performance),b=e||p,_=r||v.connected||A.domElement,S=Zt.useMemo(()=>new IQ(b),[b]);return kM(()=>{S.enabled&&S.update()},-1),Zt.useEffect(()=>(S.connect(_),()=>void S.dispose()),[_,t,S,m]),Zt.useEffect(()=>{const R=D=>{m(),t&&g.regress(),a&&a(D)},P=D=>{l&&l(D)},O=D=>{d&&d(D)};return S.addEventListener("change",R),S.addEventListener("start",P),S.addEventListener("end",O),()=>{S.removeEventListener("start",P),S.removeEventListener("end",O),S.removeEventListener("change",R)}},[a,l,d,S,m,y]),Zt.useEffect(()=>{if(i){const R=C().controls;return x({controls:S}),()=>x({controls:R})}},[i,S]),Zt.createElement("primitive",S0({ref:h,object:S,enableDamping:o},c))});function JI(i,e){if(e===uD)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),i;if(e===nx||e===ZC){let t=i.getIndex();if(t===null){const l=[],d=i.getAttribute("position");if(d!==void 0){for(let c=0;c<d.count;c++)l.push(c);i.setIndex(l),t=i.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),i}const r=t.count-2,o=[];if(e===nx)for(let l=1;l<=r;l++)o.push(t.getX(0)),o.push(t.getX(l)),o.push(t.getX(l+1));else for(let l=0;l<r;l++)l%2===0?(o.push(t.getX(l)),o.push(t.getX(l+1)),o.push(t.getX(l+2))):(o.push(t.getX(l+2)),o.push(t.getX(l+1)),o.push(t.getX(l)));o.length/3!==r&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const a=i.clone();return a.setIndex(o),a.clearGroups(),a}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),i}class BQ extends Ya{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new FQ(t)}),this.register(function(t){return new VQ(t)}),this.register(function(t){return new QQ(t)}),this.register(function(t){return new WQ(t)}),this.register(function(t){return new kQ(t)}),this.register(function(t){return new UQ(t)}),this.register(function(t){return new zQ(t)}),this.register(function(t){return new GQ(t)}),this.register(function(t){return new OQ(t)}),this.register(function(t){return new HQ(t)}),this.register(function(t){return new NQ(t)}),this.register(function(t){return new DQ(t)}),this.register(function(t){return new jQ(t)}),this.register(function(t){return new XQ(t)})}load(e,t,r,o){const a=this;let l;this.resourcePath!==""?l=this.resourcePath:this.path!==""?l=this.path:l=$m.extractUrlBase(e),this.manager.itemStart(e);const d=function(h){o?o(h):console.error(h),a.manager.itemError(e),a.manager.itemEnd(e)},c=new Ec(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(h){try{a.parse(h,l,function(m){t(m),a.manager.itemEnd(e)},d)}catch(m){d(m)}},r,d)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,r,o){let a;const l={},d={},c=new TextDecoder;if(typeof e=="string")a=JSON.parse(e);else if(e instanceof ArrayBuffer)if(c.decode(new Uint8Array(e,0,4))===kP){try{l[Sr.KHR_BINARY_GLTF]=new KQ(e)}catch(p){o&&o(p);return}a=JSON.parse(l[Sr.KHR_BINARY_GLTF].content)}else a=JSON.parse(c.decode(e));else a=e;if(a.asset===void 0||a.asset.version[0]<2){o&&o(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const h=new aW(a,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});h.fileLoader.setRequestHeader(this.requestHeader);for(let m=0;m<this.pluginCallbacks.length;m++){const p=this.pluginCallbacks[m](h);d[p.name]=p,l[p.name]=!0}if(a.extensionsUsed)for(let m=0;m<a.extensionsUsed.length;++m){const p=a.extensionsUsed[m],A=a.extensionsRequired||[];switch(p){case Sr.KHR_MATERIALS_UNLIT:l[p]=new PQ;break;case Sr.KHR_DRACO_MESH_COMPRESSION:l[p]=new YQ(a,this.dracoLoader);break;case Sr.KHR_TEXTURE_TRANSFORM:l[p]=new qQ;break;case Sr.KHR_MESH_QUANTIZATION:l[p]=new JQ;break;default:A.indexOf(p)>=0&&d[p]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+p+'".')}}h.setExtensions(l),h.setPlugins(d),h.parse(r,o)}parseAsync(e,t){const r=this;return new Promise(function(o,a){r.parse(e,t,o,a)})}}function LQ(){let i={};return{get:function(e){return i[e]},add:function(e,t){i[e]=t},remove:function(e){delete i[e]},removeAll:function(){i={}}}}const Sr={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class DQ{constructor(e){this.parser=e,this.name=Sr.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let r=0,o=t.length;r<o;r++){const a=t[r];a.extensions&&a.extensions[this.name]&&a.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,a.extensions[this.name].light)}}_loadLight(e){const t=this.parser,r="light:"+e;let o=t.cache.get(r);if(o)return o;const a=t.json,c=((a.extensions&&a.extensions[this.name]||{}).lights||[])[e];let h;const m=new Rn(16777215);c.color!==void 0&&m.fromArray(c.color);const p=c.range!==void 0?c.range:0;switch(c.type){case"directional":h=new RM(m),h.target.position.set(0,0,-1),h.add(h.target);break;case"point":h=new IM(m),h.distance=p;break;case"spot":h=new TM(m),h.distance=p,c.spot=c.spot||{},c.spot.innerConeAngle=c.spot.innerConeAngle!==void 0?c.spot.innerConeAngle:0,c.spot.outerConeAngle=c.spot.outerConeAngle!==void 0?c.spot.outerConeAngle:Math.PI/4,h.angle=c.spot.outerConeAngle,h.penumbra=1-c.spot.innerConeAngle/c.spot.outerConeAngle,h.target.position.set(0,0,-1),h.add(h.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+c.type)}return h.position.set(0,0,0),h.decay=2,kh(h,c),c.intensity!==void 0&&(h.intensity=c.intensity),h.name=t.createUniqueName(c.name||"light_"+e),o=Promise.resolve(h),t.cache.add(r,o),o}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,r=this.parser,a=r.json.nodes[e],d=(a.extensions&&a.extensions[this.name]||{}).light;return d===void 0?null:this._loadLight(d).then(function(c){return r._getNodeRef(t.cache,d,c)})}}class PQ{constructor(){this.name=Sr.KHR_MATERIALS_UNLIT}getMaterialType(){return fl}extendParams(e,t,r){const o=[];e.color=new Rn(1,1,1),e.opacity=1;const a=t.pbrMetallicRoughness;if(a){if(Array.isArray(a.baseColorFactor)){const l=a.baseColorFactor;e.color.fromArray(l),e.opacity=l[3]}a.baseColorTexture!==void 0&&o.push(r.assignTexture(e,"map",a.baseColorTexture,Dr))}return Promise.all(o)}}class OQ{constructor(e){this.parser=e,this.name=Sr.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const o=this.parser.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const a=o.extensions[this.name].emissiveStrength;return a!==void 0&&(t.emissiveIntensity=a),Promise.resolve()}}class FQ{constructor(e){this.parser=e,this.name=Sr.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:nh}extendMaterialParams(e,t){const r=this.parser,o=r.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const a=[],l=o.extensions[this.name];if(l.clearcoatFactor!==void 0&&(t.clearcoat=l.clearcoatFactor),l.clearcoatTexture!==void 0&&a.push(r.assignTexture(t,"clearcoatMap",l.clearcoatTexture)),l.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=l.clearcoatRoughnessFactor),l.clearcoatRoughnessTexture!==void 0&&a.push(r.assignTexture(t,"clearcoatRoughnessMap",l.clearcoatRoughnessTexture)),l.clearcoatNormalTexture!==void 0&&(a.push(r.assignTexture(t,"clearcoatNormalMap",l.clearcoatNormalTexture)),l.clearcoatNormalTexture.scale!==void 0)){const d=l.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Yt(d,d)}return Promise.all(a)}}class NQ{constructor(e){this.parser=e,this.name=Sr.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:nh}extendMaterialParams(e,t){const r=this.parser,o=r.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const a=[],l=o.extensions[this.name];return l.iridescenceFactor!==void 0&&(t.iridescence=l.iridescenceFactor),l.iridescenceTexture!==void 0&&a.push(r.assignTexture(t,"iridescenceMap",l.iridescenceTexture)),l.iridescenceIor!==void 0&&(t.iridescenceIOR=l.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),l.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=l.iridescenceThicknessMinimum),l.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=l.iridescenceThicknessMaximum),l.iridescenceThicknessTexture!==void 0&&a.push(r.assignTexture(t,"iridescenceThicknessMap",l.iridescenceThicknessTexture)),Promise.all(a)}}class kQ{constructor(e){this.parser=e,this.name=Sr.KHR_MATERIALS_SHEEN}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:nh}extendMaterialParams(e,t){const r=this.parser,o=r.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const a=[];t.sheenColor=new Rn(0,0,0),t.sheenRoughness=0,t.sheen=1;const l=o.extensions[this.name];return l.sheenColorFactor!==void 0&&t.sheenColor.fromArray(l.sheenColorFactor),l.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=l.sheenRoughnessFactor),l.sheenColorTexture!==void 0&&a.push(r.assignTexture(t,"sheenColorMap",l.sheenColorTexture,Dr)),l.sheenRoughnessTexture!==void 0&&a.push(r.assignTexture(t,"sheenRoughnessMap",l.sheenRoughnessTexture)),Promise.all(a)}}class UQ{constructor(e){this.parser=e,this.name=Sr.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:nh}extendMaterialParams(e,t){const r=this.parser,o=r.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const a=[],l=o.extensions[this.name];return l.transmissionFactor!==void 0&&(t.transmission=l.transmissionFactor),l.transmissionTexture!==void 0&&a.push(r.assignTexture(t,"transmissionMap",l.transmissionTexture)),Promise.all(a)}}class zQ{constructor(e){this.parser=e,this.name=Sr.KHR_MATERIALS_VOLUME}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:nh}extendMaterialParams(e,t){const r=this.parser,o=r.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const a=[],l=o.extensions[this.name];t.thickness=l.thicknessFactor!==void 0?l.thicknessFactor:0,l.thicknessTexture!==void 0&&a.push(r.assignTexture(t,"thicknessMap",l.thicknessTexture)),t.attenuationDistance=l.attenuationDistance||1/0;const d=l.attenuationColor||[1,1,1];return t.attenuationColor=new Rn(d[0],d[1],d[2]),Promise.all(a)}}class GQ{constructor(e){this.parser=e,this.name=Sr.KHR_MATERIALS_IOR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:nh}extendMaterialParams(e,t){const o=this.parser.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const a=o.extensions[this.name];return t.ior=a.ior!==void 0?a.ior:1.5,Promise.resolve()}}class HQ{constructor(e){this.parser=e,this.name=Sr.KHR_MATERIALS_SPECULAR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:nh}extendMaterialParams(e,t){const r=this.parser,o=r.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const a=[],l=o.extensions[this.name];t.specularIntensity=l.specularFactor!==void 0?l.specularFactor:1,l.specularTexture!==void 0&&a.push(r.assignTexture(t,"specularIntensityMap",l.specularTexture));const d=l.specularColorFactor||[1,1,1];return t.specularColor=new Rn(d[0],d[1],d[2]),l.specularColorTexture!==void 0&&a.push(r.assignTexture(t,"specularColorMap",l.specularColorTexture,Dr)),Promise.all(a)}}class VQ{constructor(e){this.parser=e,this.name=Sr.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,r=t.json,o=r.textures[e];if(!o.extensions||!o.extensions[this.name])return null;const a=o.extensions[this.name],l=t.options.ktx2Loader;if(!l){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,a.source,l)}}class QQ{constructor(e){this.parser=e,this.name=Sr.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,r=this.parser,o=r.json,a=o.textures[e];if(!a.extensions||!a.extensions[t])return null;const l=a.extensions[t],d=o.images[l.source];let c=r.textureLoader;if(d.uri){const h=r.options.manager.getHandler(d.uri);h!==null&&(c=h)}return this.detectSupport().then(function(h){if(h)return r.loadTextureImage(e,l.source,c);if(o.extensionsRequired&&o.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class WQ{constructor(e){this.parser=e,this.name=Sr.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,r=this.parser,o=r.json,a=o.textures[e];if(!a.extensions||!a.extensions[t])return null;const l=a.extensions[t],d=o.images[l.source];let c=r.textureLoader;if(d.uri){const h=r.options.manager.getHandler(d.uri);h!==null&&(c=h)}return this.detectSupport().then(function(h){if(h)return r.loadTextureImage(e,l.source,c);if(o.extensionsRequired&&o.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class jQ{constructor(e){this.name=Sr.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,r=t.bufferViews[e];if(r.extensions&&r.extensions[this.name]){const o=r.extensions[this.name],a=this.parser.getDependency("buffer",o.buffer),l=this.parser.options.meshoptDecoder;if(!l||!l.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return a.then(function(d){const c=o.byteOffset||0,h=o.byteLength||0,m=o.count,p=o.byteStride,A=new Uint8Array(d,c,h);return l.decodeGltfBufferAsync?l.decodeGltfBufferAsync(m,p,A,o.mode,o.filter).then(function(v){return v.buffer}):l.ready.then(function(){const v=new ArrayBuffer(m*p);return l.decodeGltfBuffer(new Uint8Array(v),m,p,A,o.mode,o.filter),v})})}else return null}}class XQ{constructor(e){this.name=Sr.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,r=t.nodes[e];if(!r.extensions||!r.extensions[this.name]||r.mesh===void 0)return null;const o=t.meshes[r.mesh];for(const h of o.primitives)if(h.mode!==Bl.TRIANGLES&&h.mode!==Bl.TRIANGLE_STRIP&&h.mode!==Bl.TRIANGLE_FAN&&h.mode!==void 0)return null;const l=r.extensions[this.name].attributes,d=[],c={};for(const h in l)d.push(this.parser.getDependency("accessor",l[h]).then(m=>(c[h]=m,c[h])));return d.length<1?null:(d.push(this.parser.createNodeMesh(e)),Promise.all(d).then(h=>{const m=h.pop(),p=m.isGroup?m.children:[m],A=h[0].count,v=[];for(const y of p){const x=new ki,C=new Ue,g=new Oo,b=new Ue(1,1,1),_=new hM(y.geometry,y.material,A);for(let S=0;S<A;S++)c.TRANSLATION&&C.fromBufferAttribute(c.TRANSLATION,S),c.ROTATION&&g.fromBufferAttribute(c.ROTATION,S),c.SCALE&&b.fromBufferAttribute(c.SCALE,S),_.setMatrixAt(S,x.compose(C,g,b));for(const S in c)S!=="TRANSLATION"&&S!=="ROTATION"&&S!=="SCALE"&&y.geometry.setAttribute(S,c[S]);Tr.prototype.copy.call(_,y),this.parser.assignFinalMaterial(_),v.push(_)}return m.isGroup?(m.clear(),m.add(...v),m):v[0]}))}}const kP="glTF",IA=12,ZI={JSON:1313821514,BIN:5130562};class KQ{constructor(e){this.name=Sr.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,IA),r=new TextDecoder;if(this.header={magic:r.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==kP)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const o=this.header.length-IA,a=new DataView(e,IA);let l=0;for(;l<o;){const d=a.getUint32(l,!0);l+=4;const c=a.getUint32(l,!0);if(l+=4,c===ZI.JSON){const h=new Uint8Array(e,IA+l,d);this.content=r.decode(h)}else if(c===ZI.BIN){const h=IA+l;this.body=e.slice(h,h+d)}l+=d}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class YQ{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Sr.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const r=this.json,o=this.dracoLoader,a=e.extensions[this.name].bufferView,l=e.extensions[this.name].attributes,d={},c={},h={};for(const m in l){const p=Jw[m]||m.toLowerCase();d[p]=l[m]}for(const m in e.attributes){const p=Jw[m]||m.toLowerCase();if(l[m]!==void 0){const A=r.accessors[e.attributes[m]],v=Om[A.componentType];h[p]=v.name,c[p]=A.normalized===!0}}return t.getDependency("bufferView",a).then(function(m){return new Promise(function(p){o.decodeDracoFile(m,function(A){for(const v in A.attributes){const y=A.attributes[v],x=c[v];x!==void 0&&(y.normalized=x)}p(A)},d,h)})})}}class qQ{constructor(){this.name=Sr.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class JQ{constructor(){this.name=Sr.KHR_MESH_QUANTIZATION}}class UP extends ug{constructor(e,t,r,o){super(e,t,r,o)}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,o=this.valueSize,a=e*o*3+o;for(let l=0;l!==o;l++)t[l]=r[a+l];return t}interpolate_(e,t,r,o){const a=this.resultBuffer,l=this.sampleValues,d=this.valueSize,c=d*2,h=d*3,m=o-t,p=(r-t)/m,A=p*p,v=A*p,y=e*h,x=y-h,C=-2*v+3*A,g=v-A,b=1-C,_=g-A+p;for(let S=0;S!==d;S++){const R=l[x+S+d],P=l[x+S+c]*m,O=l[y+S+d],D=l[y+S]*m;a[S]=b*R+_*P+C*O+g*D}return a}}const ZQ=new Oo;class $Q extends UP{interpolate_(e,t,r,o){const a=super.interpolate_(e,t,r,o);return ZQ.fromArray(a).normalize().toArray(a),a}}const Bl={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Om={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},$I={9728:Ps,9729:ws,9984:v0,9985:Ix,9986:Lm,9987:uu},eR={33071:Uo,33648:Vm,10497:rd},h2={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Jw={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Ph={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},eW={CUBICSPLINE:void 0,LINEAR:Qf,STEP:Wm},d2={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function tW(i){return i.DefaultMaterial===void 0&&(i.DefaultMaterial=new su({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:cu})),i.DefaultMaterial}function RA(i,e,t){for(const r in t.extensions)i[r]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[r]=t.extensions[r])}function kh(i,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(i.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function nW(i,e,t){let r=!1,o=!1,a=!1;for(let h=0,m=e.length;h<m;h++){const p=e[h];if(p.POSITION!==void 0&&(r=!0),p.NORMAL!==void 0&&(o=!0),p.COLOR_0!==void 0&&(a=!0),r&&o&&a)break}if(!r&&!o&&!a)return Promise.resolve(i);const l=[],d=[],c=[];for(let h=0,m=e.length;h<m;h++){const p=e[h];if(r){const A=p.POSITION!==void 0?t.getDependency("accessor",p.POSITION):i.attributes.position;l.push(A)}if(o){const A=p.NORMAL!==void 0?t.getDependency("accessor",p.NORMAL):i.attributes.normal;d.push(A)}if(a){const A=p.COLOR_0!==void 0?t.getDependency("accessor",p.COLOR_0):i.attributes.color;c.push(A)}}return Promise.all([Promise.all(l),Promise.all(d),Promise.all(c)]).then(function(h){const m=h[0],p=h[1],A=h[2];return r&&(i.morphAttributes.position=m),o&&(i.morphAttributes.normal=p),a&&(i.morphAttributes.color=A),i.morphTargetsRelative=!0,i})}function iW(i,e){if(i.updateMorphTargets(),e.weights!==void 0)for(let t=0,r=e.weights.length;t<r;t++)i.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(i.morphTargetInfluences.length===t.length){i.morphTargetDictionary={};for(let r=0,o=t.length;r<o;r++)i.morphTargetDictionary[t[r]]=r}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function rW(i){const e=i.extensions&&i.extensions[Sr.KHR_DRACO_MESH_COMPRESSION];let t;return e?t="draco:"+e.bufferView+":"+e.indices+":"+tR(e.attributes):t=i.indices+":"+tR(i.attributes)+":"+i.mode,t}function tR(i){let e="";const t=Object.keys(i).sort();for(let r=0,o=t.length;r<o;r++)e+=t[r]+":"+i[t[r]]+";";return e}function Zw(i){switch(i){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function sW(i){return i.search(/\.jpe?g($|\?)/i)>0||i.search(/^data\:image\/jpeg/)===0?"image/jpeg":i.search(/\.webp($|\?)/i)>0||i.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const oW=new ki;class aW{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new LQ,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let r=!1,o=!1,a=-1;typeof navigator<"u"&&(r=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,o=navigator.userAgent.indexOf("Firefox")>-1,a=o?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||r||o&&a<98?this.textureLoader=new bM(this.options.manager):this.textureLoader=new hP(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Ec(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const r=this,o=this.json,a=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(l){return l._markDefs&&l._markDefs()}),Promise.all(this._invokeAll(function(l){return l.beforeRoot&&l.beforeRoot()})).then(function(){return Promise.all([r.getDependencies("scene"),r.getDependencies("animation"),r.getDependencies("camera")])}).then(function(l){const d={scene:l[0][o.scene||0],scenes:l[0],animations:l[1],cameras:l[2],asset:o.asset,parser:r,userData:{}};RA(a,d,o),kh(d,o),Promise.all(r._invokeAll(function(c){return c.afterRoot&&c.afterRoot(d)})).then(function(){e(d)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],r=this.json.meshes||[];for(let o=0,a=t.length;o<a;o++){const l=t[o].joints;for(let d=0,c=l.length;d<c;d++)e[l[d]].isBone=!0}for(let o=0,a=e.length;o<a;o++){const l=e[o];l.mesh!==void 0&&(this._addNodeRef(this.meshCache,l.mesh),l.skin!==void 0&&(r[l.mesh].isSkinnedMesh=!0)),l.camera!==void 0&&this._addNodeRef(this.cameraCache,l.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,r){if(e.refs[t]<=1)return r;const o=r.clone(),a=(l,d)=>{const c=this.associations.get(l);c!=null&&this.associations.set(d,c);for(const[h,m]of l.children.entries())a(m,d.children[h])};return a(r,o),o.name+="_instance_"+e.uses[t]++,o}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let r=0;r<t.length;r++){const o=e(t[r]);if(o)return o}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const r=[];for(let o=0;o<t.length;o++){const a=e(t[o]);a&&r.push(a)}return r}getDependency(e,t){const r=e+":"+t;let o=this.cache.get(r);if(!o){switch(e){case"scene":o=this.loadScene(t);break;case"node":o=this._invokeOne(function(a){return a.loadNode&&a.loadNode(t)});break;case"mesh":o=this._invokeOne(function(a){return a.loadMesh&&a.loadMesh(t)});break;case"accessor":o=this.loadAccessor(t);break;case"bufferView":o=this._invokeOne(function(a){return a.loadBufferView&&a.loadBufferView(t)});break;case"buffer":o=this.loadBuffer(t);break;case"material":o=this._invokeOne(function(a){return a.loadMaterial&&a.loadMaterial(t)});break;case"texture":o=this._invokeOne(function(a){return a.loadTexture&&a.loadTexture(t)});break;case"skin":o=this.loadSkin(t);break;case"animation":o=this._invokeOne(function(a){return a.loadAnimation&&a.loadAnimation(t)});break;case"camera":o=this.loadCamera(t);break;default:if(o=this._invokeOne(function(a){return a!=this&&a.getDependency&&a.getDependency(e,t)}),!o)throw new Error("Unknown type: "+e);break}this.cache.add(r,o)}return o}getDependencies(e){let t=this.cache.get(e);if(!t){const r=this,o=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(o.map(function(a,l){return r.getDependency(e,l)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],r=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[Sr.KHR_BINARY_GLTF].body);const o=this.options;return new Promise(function(a,l){r.load($m.resolveURL(t.uri,o.path),a,void 0,function(){l(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(r){const o=t.byteLength||0,a=t.byteOffset||0;return r.slice(a,a+o)})}loadAccessor(e){const t=this,r=this.json,o=this.json.accessors[e];if(o.bufferView===void 0&&o.sparse===void 0){const l=h2[o.type],d=Om[o.componentType],c=o.normalized===!0,h=new d(o.count*l);return Promise.resolve(new Qr(h,l,c))}const a=[];return o.bufferView!==void 0?a.push(this.getDependency("bufferView",o.bufferView)):a.push(null),o.sparse!==void 0&&(a.push(this.getDependency("bufferView",o.sparse.indices.bufferView)),a.push(this.getDependency("bufferView",o.sparse.values.bufferView))),Promise.all(a).then(function(l){const d=l[0],c=h2[o.type],h=Om[o.componentType],m=h.BYTES_PER_ELEMENT,p=m*c,A=o.byteOffset||0,v=o.bufferView!==void 0?r.bufferViews[o.bufferView].byteStride:void 0,y=o.normalized===!0;let x,C;if(v&&v!==p){const g=Math.floor(A/v),b="InterleavedBuffer:"+o.bufferView+":"+o.componentType+":"+g+":"+o.count;let _=t.cache.get(b);_||(x=new h(d,g*v,o.count*v/m),_=new U0(x,v/m),t.cache.add(b,_)),C=new sd(_,c,A%v/m,y)}else d===null?x=new h(o.count*c):x=new h(d,A,o.count*c),C=new Qr(x,c,y);if(o.sparse!==void 0){const g=h2.SCALAR,b=Om[o.sparse.indices.componentType],_=o.sparse.indices.byteOffset||0,S=o.sparse.values.byteOffset||0,R=new b(l[1],_,o.sparse.count*g),P=new h(l[2],S,o.sparse.count*c);d!==null&&(C=new Qr(C.array.slice(),C.itemSize,C.normalized));for(let O=0,D=R.length;O<D;O++){const L=R[O];if(C.setX(L,P[O*c]),c>=2&&C.setY(L,P[O*c+1]),c>=3&&C.setZ(L,P[O*c+2]),c>=4&&C.setW(L,P[O*c+3]),c>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return C})}loadTexture(e){const t=this.json,r=this.options,a=t.textures[e].source,l=t.images[a];let d=this.textureLoader;if(l.uri){const c=r.manager.getHandler(l.uri);c!==null&&(d=c)}return this.loadTextureImage(e,a,d)}loadTextureImage(e,t,r){const o=this,a=this.json,l=a.textures[e],d=a.images[t],c=(d.uri||d.bufferView)+":"+l.sampler;if(this.textureCache[c])return this.textureCache[c];const h=this.loadImageSource(t,r).then(function(m){m.flipY=!1,m.name=l.name||d.name||"",m.name===""&&typeof d.uri=="string"&&d.uri.startsWith("data:image/")===!1&&(m.name=d.uri);const A=(a.samplers||{})[l.sampler]||{};return m.magFilter=$I[A.magFilter]||ws,m.minFilter=$I[A.minFilter]||uu,m.wrapS=eR[A.wrapS]||rd,m.wrapT=eR[A.wrapT]||rd,o.associations.set(m,{textures:e}),m}).catch(function(){return null});return this.textureCache[c]=h,h}loadImageSource(e,t){const r=this,o=this.json,a=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(p=>p.clone());const l=o.images[e],d=self.URL||self.webkitURL;let c=l.uri||"",h=!1;if(l.bufferView!==void 0)c=r.getDependency("bufferView",l.bufferView).then(function(p){h=!0;const A=new Blob([p],{type:l.mimeType});return c=d.createObjectURL(A),c});else if(l.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const m=Promise.resolve(c).then(function(p){return new Promise(function(A,v){let y=A;t.isImageBitmapLoader===!0&&(y=function(x){const C=new As(x);C.needsUpdate=!0,A(C)}),t.load($m.resolveURL(p,a.path),y,void 0,v)})}).then(function(p){return h===!0&&d.revokeObjectURL(c),p.userData.mimeType=l.mimeType||sW(l.uri),p}).catch(function(p){throw console.error("THREE.GLTFLoader: Couldn't load texture",c),p});return this.sourceCache[e]=m,m}assignTexture(e,t,r,o){const a=this;return this.getDependency("texture",r.index).then(function(l){if(!l)return null;if(r.texCoord!==void 0&&r.texCoord>0&&(l=l.clone(),l.channel=r.texCoord),a.extensions[Sr.KHR_TEXTURE_TRANSFORM]){const d=r.extensions!==void 0?r.extensions[Sr.KHR_TEXTURE_TRANSFORM]:void 0;if(d){const c=a.associations.get(l);l=a.extensions[Sr.KHR_TEXTURE_TRANSFORM].extendTexture(l,d),a.associations.set(l,c)}}return o!==void 0&&(l.encoding=o),e[t]=l,l})}assignFinalMaterial(e){const t=e.geometry;let r=e.material;const o=t.attributes.tangent===void 0,a=t.attributes.color!==void 0,l=t.attributes.normal===void 0;if(e.isPoints){const d="PointsMaterial:"+r.uuid;let c=this.cache.get(d);c||(c=new Nx,oo.prototype.copy.call(c,r),c.color.copy(r.color),c.map=r.map,c.sizeAttenuation=!1,this.cache.add(d,c)),r=c}else if(e.isLine){const d="LineBasicMaterial:"+r.uuid;let c=this.cache.get(d);c||(c=new ca,oo.prototype.copy.call(c,r),c.color.copy(r.color),c.map=r.map,this.cache.add(d,c)),r=c}if(o||a||l){let d="ClonedMaterial:"+r.uuid+":";o&&(d+="derivative-tangents:"),a&&(d+="vertex-colors:"),l&&(d+="flat-shading:");let c=this.cache.get(d);c||(c=r.clone(),a&&(c.vertexColors=!0),l&&(c.flatShading=!0),o&&(c.normalScale&&(c.normalScale.y*=-1),c.clearcoatNormalScale&&(c.clearcoatNormalScale.y*=-1)),this.cache.add(d,c),this.associations.set(c,this.associations.get(r))),r=c}e.material=r}getMaterialType(){return su}loadMaterial(e){const t=this,r=this.json,o=this.extensions,a=r.materials[e];let l;const d={},c=a.extensions||{},h=[];if(c[Sr.KHR_MATERIALS_UNLIT]){const p=o[Sr.KHR_MATERIALS_UNLIT];l=p.getMaterialType(),h.push(p.extendParams(d,a,t))}else{const p=a.pbrMetallicRoughness||{};if(d.color=new Rn(1,1,1),d.opacity=1,Array.isArray(p.baseColorFactor)){const A=p.baseColorFactor;d.color.fromArray(A),d.opacity=A[3]}p.baseColorTexture!==void 0&&h.push(t.assignTexture(d,"map",p.baseColorTexture,Dr)),d.metalness=p.metallicFactor!==void 0?p.metallicFactor:1,d.roughness=p.roughnessFactor!==void 0?p.roughnessFactor:1,p.metallicRoughnessTexture!==void 0&&(h.push(t.assignTexture(d,"metalnessMap",p.metallicRoughnessTexture)),h.push(t.assignTexture(d,"roughnessMap",p.metallicRoughnessTexture))),l=this._invokeOne(function(A){return A.getMaterialType&&A.getMaterialType(e)}),h.push(Promise.all(this._invokeAll(function(A){return A.extendMaterialParams&&A.extendMaterialParams(e,d)})))}a.doubleSided===!0&&(d.side=pc);const m=a.alphaMode||d2.OPAQUE;if(m===d2.BLEND?(d.transparent=!0,d.depthWrite=!1):(d.transparent=!1,m===d2.MASK&&(d.alphaTest=a.alphaCutoff!==void 0?a.alphaCutoff:.5)),a.normalTexture!==void 0&&l!==fl&&(h.push(t.assignTexture(d,"normalMap",a.normalTexture)),d.normalScale=new Yt(1,1),a.normalTexture.scale!==void 0)){const p=a.normalTexture.scale;d.normalScale.set(p,p)}return a.occlusionTexture!==void 0&&l!==fl&&(h.push(t.assignTexture(d,"aoMap",a.occlusionTexture)),a.occlusionTexture.strength!==void 0&&(d.aoMapIntensity=a.occlusionTexture.strength)),a.emissiveFactor!==void 0&&l!==fl&&(d.emissive=new Rn().fromArray(a.emissiveFactor)),a.emissiveTexture!==void 0&&l!==fl&&h.push(t.assignTexture(d,"emissiveMap",a.emissiveTexture,Dr)),Promise.all(h).then(function(){const p=new l(d);return a.name&&(p.name=a.name),kh(p,a),t.associations.set(p,{materials:e}),a.extensions&&RA(o,p,a),p})}createUniqueName(e){const t=br.sanitizeNodeName(e||"");let r=t;for(let o=1;this.nodeNamesUsed[r];++o)r=t+"_"+o;return this.nodeNamesUsed[r]=!0,r}loadGeometries(e){const t=this,r=this.extensions,o=this.primitiveCache;function a(d){return r[Sr.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(d,t).then(function(c){return nR(c,d,t)})}const l=[];for(let d=0,c=e.length;d<c;d++){const h=e[d],m=rW(h),p=o[m];if(p)l.push(p.promise);else{let A;h.extensions&&h.extensions[Sr.KHR_DRACO_MESH_COMPRESSION]?A=a(h):A=nR(new Zi,h,t),o[m]={primitive:h,promise:A},l.push(A)}}return Promise.all(l)}loadMesh(e){const t=this,r=this.json,o=this.extensions,a=r.meshes[e],l=a.primitives,d=[];for(let c=0,h=l.length;c<h;c++){const m=l[c].material===void 0?tW(this.cache):this.getDependency("material",l[c].material);d.push(m)}return d.push(t.loadGeometries(l)),Promise.all(d).then(function(c){const h=c.slice(0,c.length-1),m=c[c.length-1],p=[];for(let v=0,y=m.length;v<y;v++){const x=m[v],C=l[v];let g;const b=h[v];if(C.mode===Bl.TRIANGLES||C.mode===Bl.TRIANGLE_STRIP||C.mode===Bl.TRIANGLE_FAN||C.mode===void 0)g=a.isSkinnedMesh===!0?new uM(x,b):new Do(x,b),g.isSkinnedMesh===!0&&g.normalizeSkinWeights(),C.mode===Bl.TRIANGLE_STRIP?g.geometry=JI(g.geometry,ZC):C.mode===Bl.TRIANGLE_FAN&&(g.geometry=JI(g.geometry,nx));else if(C.mode===Bl.LINES)g=new Cc(x,b);else if(C.mode===Bl.LINE_STRIP)g=new $u(x,b);else if(C.mode===Bl.LINE_LOOP)g=new dM(x,b);else if(C.mode===Bl.POINTS)g=new fM(x,b);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+C.mode);Object.keys(g.geometry.morphAttributes).length>0&&iW(g,a),g.name=t.createUniqueName(a.name||"mesh_"+e),kh(g,a),C.extensions&&RA(o,g,C),t.assignFinalMaterial(g),p.push(g)}for(let v=0,y=p.length;v<y;v++)t.associations.set(p[v],{meshes:e,primitives:v});if(p.length===1)return p[0];const A=new mc;t.associations.set(A,{meshes:e});for(let v=0,y=p.length;v<y;v++)A.add(p[v]);return A})}loadCamera(e){let t;const r=this.json.cameras[e],o=r[r.type];if(!o){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return r.type==="perspective"?t=new cs(AD.radToDeg(o.yfov),o.aspectRatio||1,o.znear||1,o.zfar||2e6):r.type==="orthographic"&&(t=new ju(-o.xmag,o.xmag,o.ymag,-o.ymag,o.znear,o.zfar)),r.name&&(t.name=this.createUniqueName(r.name)),kh(t,r),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],r=[];for(let o=0,a=t.joints.length;o<a;o++)r.push(this._loadNodeShallow(t.joints[o]));return t.inverseBindMatrices!==void 0?r.push(this.getDependency("accessor",t.inverseBindMatrices)):r.push(null),Promise.all(r).then(function(o){const a=o.pop(),l=o,d=[],c=[];for(let h=0,m=l.length;h<m;h++){const p=l[h];if(p){d.push(p);const A=new ki;a!==null&&A.fromArray(a.array,h*16),c.push(A)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[h])}return new z0(d,c)})}loadAnimation(e){const r=this.json.animations[e],o=r.name?r.name:"animation_"+e,a=[],l=[],d=[],c=[],h=[];for(let m=0,p=r.channels.length;m<p;m++){const A=r.channels[m],v=r.samplers[A.sampler],y=A.target,x=y.node,C=r.parameters!==void 0?r.parameters[v.input]:v.input,g=r.parameters!==void 0?r.parameters[v.output]:v.output;y.node!==void 0&&(a.push(this.getDependency("node",x)),l.push(this.getDependency("accessor",C)),d.push(this.getDependency("accessor",g)),c.push(v),h.push(y))}return Promise.all([Promise.all(a),Promise.all(l),Promise.all(d),Promise.all(c),Promise.all(h)]).then(function(m){const p=m[0],A=m[1],v=m[2],y=m[3],x=m[4],C=[];for(let g=0,b=p.length;g<b;g++){const _=p[g],S=A[g],R=v[g],P=y[g],O=x[g];if(_===void 0)continue;_.updateMatrix();let D;switch(Ph[O.path]){case Ph.weights:D=qm;break;case Ph.rotation:D=od;break;case Ph.position:case Ph.scale:default:D=Jm;break}const L=_.name?_.name:_.uuid,N=P.interpolation!==void 0?eW[P.interpolation]:Qf,H=[];Ph[O.path]===Ph.weights?_.traverse(function(K){K.morphTargetInfluences&&H.push(K.name?K.name:K.uuid)}):H.push(L);let J=R.array;if(R.normalized){const K=Zw(J.constructor),se=new Float32Array(J.length);for(let ae=0,ee=J.length;ae<ee;ae++)se[ae]=J[ae]*K;J=se}for(let K=0,se=H.length;K<se;K++){const ae=new D(H[K]+"."+Ph[O.path],S.array,J,N);P.interpolation==="CUBICSPLINE"&&(ae.createInterpolant=function(ne){const X=this instanceof od?$Q:UP;return new X(this.times,this.values,this.getValueSize()/3,ne)},ae.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),C.push(ae)}}return new Zm(o,void 0,C)})}createNodeMesh(e){const t=this.json,r=this,o=t.nodes[e];return o.mesh===void 0?null:r.getDependency("mesh",o.mesh).then(function(a){const l=r._getNodeRef(r.meshCache,o.mesh,a);return o.weights!==void 0&&l.traverse(function(d){if(d.isMesh)for(let c=0,h=o.weights.length;c<h;c++)d.morphTargetInfluences[c]=o.weights[c]}),l})}loadNode(e){const t=this.json,r=this,o=t.nodes[e],a=r._loadNodeShallow(e),l=[],d=o.children||[];for(let h=0,m=d.length;h<m;h++)l.push(r.getDependency("node",d[h]));const c=o.skin===void 0?Promise.resolve(null):r.getDependency("skin",o.skin);return Promise.all([a,Promise.all(l),c]).then(function(h){const m=h[0],p=h[1],A=h[2];A!==null&&m.traverse(function(v){v.isSkinnedMesh&&v.bind(A,oW)});for(let v=0,y=p.length;v<y;v++)m.add(p[v]);return m})}_loadNodeShallow(e){const t=this.json,r=this.extensions,o=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const a=t.nodes[e],l=a.name?o.createUniqueName(a.name):"",d=[],c=o._invokeOne(function(h){return h.createNodeMesh&&h.createNodeMesh(e)});return c&&d.push(c),a.camera!==void 0&&d.push(o.getDependency("camera",a.camera).then(function(h){return o._getNodeRef(o.cameraCache,a.camera,h)})),o._invokeAll(function(h){return h.createNodeAttachment&&h.createNodeAttachment(e)}).forEach(function(h){d.push(h)}),this.nodeCache[e]=Promise.all(d).then(function(h){let m;if(a.isBone===!0?m=new Fx:h.length>1?m=new mc:h.length===1?m=h[0]:m=new Tr,m!==h[0])for(let p=0,A=h.length;p<A;p++)m.add(h[p]);if(a.name&&(m.userData.name=a.name,m.name=l),kh(m,a),a.extensions&&RA(r,m,a),a.matrix!==void 0){const p=new ki;p.fromArray(a.matrix),m.applyMatrix4(p)}else a.translation!==void 0&&m.position.fromArray(a.translation),a.rotation!==void 0&&m.quaternion.fromArray(a.rotation),a.scale!==void 0&&m.scale.fromArray(a.scale);return o.associations.has(m)||o.associations.set(m,{}),o.associations.get(m).nodes=e,m}),this.nodeCache[e]}loadScene(e){const t=this.extensions,r=this.json.scenes[e],o=this,a=new mc;r.name&&(a.name=o.createUniqueName(r.name)),kh(a,r),r.extensions&&RA(t,a,r);const l=r.nodes||[],d=[];for(let c=0,h=l.length;c<h;c++)d.push(o.getDependency("node",l[c]));return Promise.all(d).then(function(c){for(let m=0,p=c.length;m<p;m++)a.add(c[m]);const h=m=>{const p=new Map;for(const[A,v]of o.associations)(A instanceof oo||A instanceof As)&&p.set(A,v);return m.traverse(A=>{const v=o.associations.get(A);v!=null&&p.set(A,v)}),p};return o.associations=h(a),a})}}function lW(i,e,t){const r=e.attributes,o=new _c;if(r.POSITION!==void 0){const d=t.json.accessors[r.POSITION],c=d.min,h=d.max;if(c!==void 0&&h!==void 0){if(o.set(new Ue(c[0],c[1],c[2]),new Ue(h[0],h[1],h[2])),d.normalized){const m=Zw(Om[d.componentType]);o.min.multiplyScalar(m),o.max.multiplyScalar(m)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const a=e.targets;if(a!==void 0){const d=new Ue,c=new Ue;for(let h=0,m=a.length;h<m;h++){const p=a[h];if(p.POSITION!==void 0){const A=t.json.accessors[p.POSITION],v=A.min,y=A.max;if(v!==void 0&&y!==void 0){if(c.setX(Math.max(Math.abs(v[0]),Math.abs(y[0]))),c.setY(Math.max(Math.abs(v[1]),Math.abs(y[1]))),c.setZ(Math.max(Math.abs(v[2]),Math.abs(y[2]))),A.normalized){const x=Zw(Om[A.componentType]);c.multiplyScalar(x)}d.max(c)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}o.expandByVector(d)}i.boundingBox=o;const l=new wc;o.getCenter(l.center),l.radius=o.min.distanceTo(o.max)/2,i.boundingSphere=l}function nR(i,e,t){const r=e.attributes,o=[];function a(l,d){return t.getDependency("accessor",l).then(function(c){i.setAttribute(d,c)})}for(const l in r){const d=Jw[l]||l.toLowerCase();d in i.attributes||o.push(a(r[l],d))}if(e.indices!==void 0&&!i.index){const l=t.getDependency("accessor",e.indices).then(function(d){i.setIndex(d)});o.push(l)}return kh(i,e),lW(i,e,t),Promise.all(o).then(function(){return e.targets!==void 0?nW(i,e.targets,t):i})}var iR={},cW={get exports(){return iR},set exports(i){iR=i}};(function(i,e){(function(r,o){i.exports=o()})(self,()=>(()=>{var t={"./node_modules/@ungap/custom-elements/index.js":()=>{/*! (c) Andrea Giammarchi @webreflection ISC */(function(){var l=function(vn,Nt){var ln=function(De){for(var st=0,At=De.length;st<At;st++)ei(De[st])},ei=function(De){var st=De.target,At=De.attributeName,ot=De.oldValue;st.attributeChangedCallback(At,ot,st.getAttribute(At))};return function(yn,De){var st=yn.constructor.observedAttributes;return st&&vn(De).then(function(){new Nt(ln).observe(yn,{attributes:!0,attributeOldValue:!0,attributeFilter:st});for(var At=0,ot=st.length;At<ot;At++)yn.hasAttribute(st[At])&&ei({target:yn,attributeName:st[At],oldValue:null})}),yn}};function d(vn,Nt){if(vn){if(typeof vn=="string")return c(vn,Nt);var ln=Object.prototype.toString.call(vn).slice(8,-1);if(ln==="Object"&&vn.constructor&&(ln=vn.constructor.name),ln==="Map"||ln==="Set")return Array.from(vn);if(ln==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ln))return c(vn,Nt)}}function c(vn,Nt){(Nt==null||Nt>vn.length)&&(Nt=vn.length);for(var ln=0,ei=new Array(Nt);ln<Nt;ln++)ei[ln]=vn[ln];return ei}function h(vn,Nt){var ln=typeof Symbol<"u"&&vn[Symbol.iterator]||vn["@@iterator"];if(!ln){if(Array.isArray(vn)||(ln=d(vn))||Nt&&vn&&typeof vn.length=="number"){ln&&(vn=ln);var ei=0,yn=function(){};return{s:yn,n:function(){return ei>=vn.length?{done:!0}:{done:!1,value:vn[ei++]}},e:function(ot){throw ot},f:yn}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var De=!0,st=!1,At;return{s:function(){ln=ln.call(vn)},n:function(){var ot=ln.next();return De=ot.done,ot},e:function(ot){st=!0,At=ot},f:function(){try{!De&&ln.return!=null&&ln.return()}finally{if(st)throw At}}}}/*! (c) Andrea Giammarchi - ISC */var m=!0,p=!1,A="querySelectorAll",v=function(Nt){var ln=arguments.length>1&&arguments[1]!==void 0?arguments[1]:document,ei=arguments.length>2&&arguments[2]!==void 0?arguments[2]:MutationObserver,yn=arguments.length>3&&arguments[3]!==void 0?arguments[3]:["*"],De=function ot(wt,xn,Nn,pn,Un,Kn){var be=h(wt),Ge;try{for(be.s();!(Ge=be.n()).done;){var et=Ge.value;(Kn||A in et)&&(Un?Nn.has(et)||(Nn.add(et),pn.delete(et),Nt(et,Un)):pn.has(et)||(pn.add(et),Nn.delete(et),Nt(et,Un)),Kn||ot(et[A](xn),xn,Nn,pn,Un,m))}}catch(Et){be.e(Et)}finally{be.f()}},st=new ei(function(ot){if(yn.length){var wt=yn.join(","),xn=new Set,Nn=new Set,pn=h(ot),Un;try{for(pn.s();!(Un=pn.n()).done;){var Kn=Un.value,be=Kn.addedNodes,Ge=Kn.removedNodes;De(Ge,wt,xn,Nn,p,p),De(be,wt,xn,Nn,m,p)}}catch(et){pn.e(et)}finally{pn.f()}}}),At=st.observe;return(st.observe=function(ot){return At.call(st,ot,{subtree:m,childList:m})})(ln),st},y="querySelectorAll",x=self,C=x.document,g=x.Element,b=x.MutationObserver,_=x.Set,S=x.WeakMap,R=function(Nt){return y in Nt},P=[].filter,O=function(vn){var Nt=new S,ln=function(pn){for(var Un=0,Kn=pn.length;Un<Kn;Un++)Nt.delete(pn[Un])},ei=function(){for(var pn=wt.takeRecords(),Un=0,Kn=pn.length;Un<Kn;Un++)st(P.call(pn[Un].removedNodes,R),!1),st(P.call(pn[Un].addedNodes,R),!0)},yn=function(pn){return pn.matches||pn.webkitMatchesSelector||pn.msMatchesSelector},De=function(pn,Un){var Kn;if(Un)for(var be,Ge=yn(pn),et=0,Et=At.length;et<Et;et++)Ge.call(pn,be=At[et])&&(Nt.has(pn)||Nt.set(pn,new _),Kn=Nt.get(pn),Kn.has(be)||(Kn.add(be),vn.handle(pn,Un,be)));else Nt.has(pn)&&(Kn=Nt.get(pn),Nt.delete(pn),Kn.forEach(function(vt){vn.handle(pn,Un,vt)}))},st=function(pn){for(var Un=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,Kn=0,be=pn.length;Kn<be;Kn++)De(pn[Kn],Un)},At=vn.query,ot=vn.root||C,wt=v(De,ot,b,At),xn=g.prototype.attachShadow;return xn&&(g.prototype.attachShadow=function(Nn){var pn=xn.call(this,Nn);return wt.observe(pn),pn}),At.length&&st(ot[y](At)),{drop:ln,flush:ei,observer:wt,parse:st}},D=self,L=D.document,N=D.Map,H=D.MutationObserver,J=D.Object,K=D.Set,se=D.WeakMap,ae=D.Element,ee=D.HTMLElement,ne=D.Node,X=D.Error,W=D.TypeError,ce=D.Reflect,he=J.defineProperty,xe=J.keys,ve=J.getOwnPropertyNames,Fe=J.setPrototypeOf,je=!self.customElements,rt=function(Nt){for(var ln=xe(Nt),ei=[],yn=ln.length,De=0;De<yn;De++)ei[De]=Nt[ln[De]],delete Nt[ln[De]];return function(){for(var st=0;st<yn;st++)Nt[ln[st]]=ei[st]}};if(je){var He=function(){var Nt=this.constructor;if(!xt.has(Nt))throw new W("Illegal constructor");var ln=xt.get(Nt);if(un)return An(un,ln);var ei=Ot.call(L,ln);return An(Fe(ei,Nt.prototype),ln)},Ot=L.createElement,xt=new N,gt=new N,It=new N,ct=new N,ut=[],Ct=function(Nt,ln,ei){var yn=It.get(ei);if(ln&&!yn.isPrototypeOf(Nt)){var De=rt(Nt);un=Fe(Nt,yn);try{new yn.constructor}finally{un=null,De()}}var st="".concat(ln?"":"dis","connectedCallback");st in yn&&Nt[st]()},qt=O({query:ut,handle:Ct}),Ft=qt.parse,un=null,fn=function(Nt){if(!gt.has(Nt)){var ln,ei=new Promise(function(yn){ln=yn});gt.set(Nt,{$:ei,_:ln})}return gt.get(Nt).$},An=l(fn,H);he(self,"customElements",{configurable:!0,value:{define:function(Nt,ln){if(ct.has(Nt))throw new X('the name "'.concat(Nt,'" has already been used with this registry'));xt.set(ln,Nt),It.set(Nt,ln.prototype),ct.set(Nt,ln),ut.push(Nt),fn(Nt).then(function(){Ft(L.querySelectorAll(Nt))}),gt.get(Nt)._(ln)},get:function(Nt){return ct.get(Nt)},whenDefined:fn}}),he(He.prototype=ee.prototype,"constructor",{value:He}),he(self,"HTMLElement",{configurable:!0,value:He}),he(L,"createElement",{configurable:!0,value:function(Nt,ln){var ei=ln&&ln.is,yn=ei?ct.get(ei):ct.get(Nt);return yn?new yn:Ot.call(L,Nt)}}),"isConnected"in ne.prototype||he(ne.prototype,"isConnected",{configurable:!0,get:function(){return!(this.ownerDocument.compareDocumentPosition(this)&this.DOCUMENT_POSITION_DISCONNECTED)}})}else if(je=!self.customElements.get("extends-li"),je)try{var Bn=function vn(){return self.Reflect.construct(HTMLLIElement,[],vn)};Bn.prototype=HTMLLIElement.prototype;var ci="extends-li";self.customElements.define("extends-li",Bn,{extends:"li"}),je=L.createElement("li",{is:ci}).outerHTML.indexOf(ci)<0;var ze=self.customElements,Pe=ze.get,qe=ze.whenDefined;he(self.customElements,"whenDefined",{configurable:!0,value:function(Nt){var ln=this;return qe.call(this,Nt).then(function(ei){return ei||Pe.call(ln,Nt)})}})}catch{}if(je){var ye=function(Nt){var ln=Oe.get(Nt);nn(ln.querySelectorAll(this),Nt.isConnected)},me=self.customElements,Re=L.createElement,Se=me.define,Be=me.get,Ee=me.upgrade,Xe=ce||{construct:function(Nt){return Nt.call(this)}},fe=Xe.construct,Oe=new se,$e=new K,le=new N,Q=new N,Z=new N,Ie=new N,Ae=[],Te=[],Ve=function(Nt){return Ie.get(Nt)||Be.call(me,Nt)},Tt=function(Nt,ln,ei){var yn=Z.get(ei);if(ln&&!yn.isPrototypeOf(Nt)){var De=rt(Nt);bi=Fe(Nt,yn);try{new yn.constructor}finally{bi=null,De()}}var st="".concat(ln?"":"dis","connectedCallback");st in yn&&Nt[st]()},Ht=O({query:Te,handle:Tt}),nn=Ht.parse,cn=O({query:Ae,handle:function(Nt,ln){Oe.has(Nt)&&(ln?$e.add(Nt):$e.delete(Nt),Te.length&&ye.call(Te,Nt))}}),Xn=cn.parse,cr=ae.prototype.attachShadow;cr&&(ae.prototype.attachShadow=function(vn){var Nt=cr.call(this,vn);return Oe.set(this,Nt),Nt});var Ni=function(Nt){if(!Q.has(Nt)){var ln,ei=new Promise(function(yn){ln=yn});Q.set(Nt,{$:ei,_:ln})}return Q.get(Nt).$},or=l(Ni,H),bi=null;ve(self).filter(function(vn){return/^HTML.*Element$/.test(vn)}).forEach(function(vn){var Nt=self[vn];function ln(){var ei=this.constructor;if(!le.has(ei))throw new W("Illegal constructor");var yn=le.get(ei),De=yn.is,st=yn.tag;if(De){if(bi)return or(bi,De);var At=Re.call(L,st);return At.setAttribute("is",De),or(Fe(At,ei.prototype),De)}else return fe.call(this,Nt,[],ei)}he(ln.prototype=Nt.prototype,"constructor",{value:ln}),he(self,vn,{value:ln})}),he(L,"createElement",{configurable:!0,value:function(Nt,ln){var ei=ln&&ln.is;if(ei){var yn=Ie.get(ei);if(yn&&le.get(yn).tag===Nt)return new yn}var De=Re.call(L,Nt);return ei&&De.setAttribute("is",ei),De}}),he(me,"get",{configurable:!0,value:Ve}),he(me,"whenDefined",{configurable:!0,value:Ni}),he(me,"upgrade",{configurable:!0,value:function(Nt){var ln=Nt.getAttribute("is");if(ln){var ei=Ie.get(ln);if(ei){or(Fe(Nt,ei.prototype),ln);return}}Ee.call(me,Nt)}}),he(me,"define",{configurable:!0,value:function(Nt,ln,ei){if(Ve(Nt))throw new X("'".concat(Nt,"' has already been defined as a custom element"));var yn,De=ei&&ei.extends;le.set(ln,De?{is:Nt,tag:De}:{is:"",tag:Nt}),De?(yn="".concat(De,'[is="').concat(Nt,'"]'),Z.set(yn,ln.prototype),Ie.set(Nt,ln),Te.push(yn)):(Se.apply(me,arguments),Ae.push(yn=Nt)),Ni(Nt).then(function(){De?(nn(L.querySelectorAll(yn)),$e.forEach(ye,[yn])):Xn(L.querySelectorAll(yn))}),Q.get(Nt)._(ln)}})}})()},"./node_modules/an-array/index.js":l=>{var d=Object.prototype.toString;l.exports=c;function c(h){return h.BYTES_PER_ELEMENT&&d.call(h.buffer)==="[object ArrayBuffer]"||Array.isArray(h)}},"./node_modules/as-number/index.js":l=>{l.exports=function(c,h){return typeof c=="number"?c:typeof h=="number"?h:0}},"./node_modules/base64-js/index.js":(l,d)=>{d.byteLength=x,d.toByteArray=g,d.fromByteArray=S;for(var c=[],h=[],m=typeof Uint8Array<"u"?Uint8Array:Array,p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",A=0,v=p.length;A<v;++A)c[A]=p[A],h[p.charCodeAt(A)]=A;h["-".charCodeAt(0)]=62,h["_".charCodeAt(0)]=63;function y(R){var P=R.length;if(P%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var O=R.indexOf("=");O===-1&&(O=P);var D=O===P?0:4-O%4;return[O,D]}function x(R){var P=y(R),O=P[0],D=P[1];return(O+D)*3/4-D}function C(R,P,O){return(P+O)*3/4-O}function g(R){var P,O=y(R),D=O[0],L=O[1],N=new m(C(R,D,L)),H=0,J=L>0?D-4:D,K;for(K=0;K<J;K+=4)P=h[R.charCodeAt(K)]<<18|h[R.charCodeAt(K+1)]<<12|h[R.charCodeAt(K+2)]<<6|h[R.charCodeAt(K+3)],N[H++]=P>>16&255,N[H++]=P>>8&255,N[H++]=P&255;return L===2&&(P=h[R.charCodeAt(K)]<<2|h[R.charCodeAt(K+1)]>>4,N[H++]=P&255),L===1&&(P=h[R.charCodeAt(K)]<<10|h[R.charCodeAt(K+1)]<<4|h[R.charCodeAt(K+2)]>>2,N[H++]=P>>8&255,N[H++]=P&255),N}function b(R){return c[R>>18&63]+c[R>>12&63]+c[R>>6&63]+c[R&63]}function _(R,P,O){for(var D,L=[],N=P;N<O;N+=3)D=(R[N]<<16&16711680)+(R[N+1]<<8&65280)+(R[N+2]&255),L.push(b(D));return L.join("")}function S(R){for(var P,O=R.length,D=O%3,L=[],N=16383,H=0,J=O-D;H<J;H+=N)L.push(_(R,H,H+N>J?J:H+N));return D===1?(P=R[O-1],L.push(c[P>>2]+c[P<<4&63]+"==")):D===2&&(P=(R[O-2]<<8)+R[O-1],L.push(c[P>>10]+c[P>>4&63]+c[P<<2&63]+"=")),L.join("")}},"./node_modules/buffer-equal/index.js":(l,d,c)=>{var h=c("./node_modules/buffer/index.js").Buffer;l.exports=function(m,p){if(h.isBuffer(m)&&h.isBuffer(p)){if(typeof m.equals=="function")return m.equals(p);if(m.length!==p.length)return!1;for(var A=0;A<m.length;A++)if(m[A]!==p[A])return!1;return!0}}},"./node_modules/buffer/index.js":(l,d,c)=>{/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */const h=c("./node_modules/base64-js/index.js"),m=c("./node_modules/ieee754/index.js"),p=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;d.Buffer=x,d.SlowBuffer=N,d.INSPECT_MAX_BYTES=50;const A=2147483647;d.kMaxLength=A,x.TYPED_ARRAY_SUPPORT=v(),!x.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function v(){try{const le=new Uint8Array(1),Q={foo:function(){return 42}};return Object.setPrototypeOf(Q,Uint8Array.prototype),Object.setPrototypeOf(le,Q),le.foo()===42}catch{return!1}}Object.defineProperty(x.prototype,"parent",{enumerable:!0,get:function(){if(x.isBuffer(this))return this.buffer}}),Object.defineProperty(x.prototype,"offset",{enumerable:!0,get:function(){if(x.isBuffer(this))return this.byteOffset}});function y(le){if(le>A)throw new RangeError('The value "'+le+'" is invalid for option "size"');const Q=new Uint8Array(le);return Object.setPrototypeOf(Q,x.prototype),Q}function x(le,Q,Z){if(typeof le=="number"){if(typeof Q=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return _(le)}return C(le,Q,Z)}x.poolSize=8192;function C(le,Q,Z){if(typeof le=="string")return S(le,Q);if(ArrayBuffer.isView(le))return P(le);if(le==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof le);if(Ee(le,ArrayBuffer)||le&&Ee(le.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ee(le,SharedArrayBuffer)||le&&Ee(le.buffer,SharedArrayBuffer)))return O(le,Q,Z);if(typeof le=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const Ie=le.valueOf&&le.valueOf();if(Ie!=null&&Ie!==le)return x.from(Ie,Q,Z);const Ae=D(le);if(Ae)return Ae;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof le[Symbol.toPrimitive]=="function")return x.from(le[Symbol.toPrimitive]("string"),Q,Z);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof le)}x.from=function(le,Q,Z){return C(le,Q,Z)},Object.setPrototypeOf(x.prototype,Uint8Array.prototype),Object.setPrototypeOf(x,Uint8Array);function g(le){if(typeof le!="number")throw new TypeError('"size" argument must be of type number');if(le<0)throw new RangeError('The value "'+le+'" is invalid for option "size"')}function b(le,Q,Z){return g(le),le<=0?y(le):Q!==void 0?typeof Z=="string"?y(le).fill(Q,Z):y(le).fill(Q):y(le)}x.alloc=function(le,Q,Z){return b(le,Q,Z)};function _(le){return g(le),y(le<0?0:L(le)|0)}x.allocUnsafe=function(le){return _(le)},x.allocUnsafeSlow=function(le){return _(le)};function S(le,Q){if((typeof Q!="string"||Q==="")&&(Q="utf8"),!x.isEncoding(Q))throw new TypeError("Unknown encoding: "+Q);const Z=H(le,Q)|0;let Ie=y(Z);const Ae=Ie.write(le,Q);return Ae!==Z&&(Ie=Ie.slice(0,Ae)),Ie}function R(le){const Q=le.length<0?0:L(le.length)|0,Z=y(Q);for(let Ie=0;Ie<Q;Ie+=1)Z[Ie]=le[Ie]&255;return Z}function P(le){if(Ee(le,Uint8Array)){const Q=new Uint8Array(le);return O(Q.buffer,Q.byteOffset,Q.byteLength)}return R(le)}function O(le,Q,Z){if(Q<0||le.byteLength<Q)throw new RangeError('"offset" is outside of buffer bounds');if(le.byteLength<Q+(Z||0))throw new RangeError('"length" is outside of buffer bounds');let Ie;return Q===void 0&&Z===void 0?Ie=new Uint8Array(le):Z===void 0?Ie=new Uint8Array(le,Q):Ie=new Uint8Array(le,Q,Z),Object.setPrototypeOf(Ie,x.prototype),Ie}function D(le){if(x.isBuffer(le)){const Q=L(le.length)|0,Z=y(Q);return Z.length===0||le.copy(Z,0,0,Q),Z}if(le.length!==void 0)return typeof le.length!="number"||Xe(le.length)?y(0):R(le);if(le.type==="Buffer"&&Array.isArray(le.data))return R(le.data)}function L(le){if(le>=A)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+A.toString(16)+" bytes");return le|0}function N(le){return+le!=le&&(le=0),x.alloc(+le)}x.isBuffer=function(Q){return Q!=null&&Q._isBuffer===!0&&Q!==x.prototype},x.compare=function(Q,Z){if(Ee(Q,Uint8Array)&&(Q=x.from(Q,Q.offset,Q.byteLength)),Ee(Z,Uint8Array)&&(Z=x.from(Z,Z.offset,Z.byteLength)),!x.isBuffer(Q)||!x.isBuffer(Z))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(Q===Z)return 0;let Ie=Q.length,Ae=Z.length;for(let Te=0,Ve=Math.min(Ie,Ae);Te<Ve;++Te)if(Q[Te]!==Z[Te]){Ie=Q[Te],Ae=Z[Te];break}return Ie<Ae?-1:Ae<Ie?1:0},x.isEncoding=function(Q){switch(String(Q).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},x.concat=function(Q,Z){if(!Array.isArray(Q))throw new TypeError('"list" argument must be an Array of Buffers');if(Q.length===0)return x.alloc(0);let Ie;if(Z===void 0)for(Z=0,Ie=0;Ie<Q.length;++Ie)Z+=Q[Ie].length;const Ae=x.allocUnsafe(Z);let Te=0;for(Ie=0;Ie<Q.length;++Ie){let Ve=Q[Ie];if(Ee(Ve,Uint8Array))Te+Ve.length>Ae.length?(x.isBuffer(Ve)||(Ve=x.from(Ve)),Ve.copy(Ae,Te)):Uint8Array.prototype.set.call(Ae,Ve,Te);else if(x.isBuffer(Ve))Ve.copy(Ae,Te);else throw new TypeError('"list" argument must be an Array of Buffers');Te+=Ve.length}return Ae};function H(le,Q){if(x.isBuffer(le))return le.length;if(ArrayBuffer.isView(le)||Ee(le,ArrayBuffer))return le.byteLength;if(typeof le!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof le);const Z=le.length,Ie=arguments.length>2&&arguments[2]===!0;if(!Ie&&Z===0)return 0;let Ae=!1;for(;;)switch(Q){case"ascii":case"latin1":case"binary":return Z;case"utf8":case"utf-8":return ye(le).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Z*2;case"hex":return Z>>>1;case"base64":return Se(le).length;default:if(Ae)return Ie?-1:ye(le).length;Q=(""+Q).toLowerCase(),Ae=!0}}x.byteLength=H;function J(le,Q,Z){let Ie=!1;if((Q===void 0||Q<0)&&(Q=0),Q>this.length||((Z===void 0||Z>this.length)&&(Z=this.length),Z<=0)||(Z>>>=0,Q>>>=0,Z<=Q))return"";for(le||(le="utf8");;)switch(le){case"hex":return He(this,Q,Z);case"utf8":case"utf-8":return xe(this,Q,Z);case"ascii":return je(this,Q,Z);case"latin1":case"binary":return rt(this,Q,Z);case"base64":return he(this,Q,Z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ot(this,Q,Z);default:if(Ie)throw new TypeError("Unknown encoding: "+le);le=(le+"").toLowerCase(),Ie=!0}}x.prototype._isBuffer=!0;function K(le,Q,Z){const Ie=le[Q];le[Q]=le[Z],le[Z]=Ie}x.prototype.swap16=function(){const Q=this.length;if(Q%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let Z=0;Z<Q;Z+=2)K(this,Z,Z+1);return this},x.prototype.swap32=function(){const Q=this.length;if(Q%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let Z=0;Z<Q;Z+=4)K(this,Z,Z+3),K(this,Z+1,Z+2);return this},x.prototype.swap64=function(){const Q=this.length;if(Q%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let Z=0;Z<Q;Z+=8)K(this,Z,Z+7),K(this,Z+1,Z+6),K(this,Z+2,Z+5),K(this,Z+3,Z+4);return this},x.prototype.toString=function(){const Q=this.length;return Q===0?"":arguments.length===0?xe(this,0,Q):J.apply(this,arguments)},x.prototype.toLocaleString=x.prototype.toString,x.prototype.equals=function(Q){if(!x.isBuffer(Q))throw new TypeError("Argument must be a Buffer");return this===Q?!0:x.compare(this,Q)===0},x.prototype.inspect=function(){let Q="";const Z=d.INSPECT_MAX_BYTES;return Q=this.toString("hex",0,Z).replace(/(.{2})/g,"$1 ").trim(),this.length>Z&&(Q+=" ... "),"<Buffer "+Q+">"},p&&(x.prototype[p]=x.prototype.inspect),x.prototype.compare=function(Q,Z,Ie,Ae,Te){if(Ee(Q,Uint8Array)&&(Q=x.from(Q,Q.offset,Q.byteLength)),!x.isBuffer(Q))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof Q);if(Z===void 0&&(Z=0),Ie===void 0&&(Ie=Q?Q.length:0),Ae===void 0&&(Ae=0),Te===void 0&&(Te=this.length),Z<0||Ie>Q.length||Ae<0||Te>this.length)throw new RangeError("out of range index");if(Ae>=Te&&Z>=Ie)return 0;if(Ae>=Te)return-1;if(Z>=Ie)return 1;if(Z>>>=0,Ie>>>=0,Ae>>>=0,Te>>>=0,this===Q)return 0;let Ve=Te-Ae,Tt=Ie-Z;const Ht=Math.min(Ve,Tt),nn=this.slice(Ae,Te),cn=Q.slice(Z,Ie);for(let Xn=0;Xn<Ht;++Xn)if(nn[Xn]!==cn[Xn]){Ve=nn[Xn],Tt=cn[Xn];break}return Ve<Tt?-1:Tt<Ve?1:0};function se(le,Q,Z,Ie,Ae){if(le.length===0)return-1;if(typeof Z=="string"?(Ie=Z,Z=0):Z>2147483647?Z=2147483647:Z<-2147483648&&(Z=-2147483648),Z=+Z,Xe(Z)&&(Z=Ae?0:le.length-1),Z<0&&(Z=le.length+Z),Z>=le.length){if(Ae)return-1;Z=le.length-1}else if(Z<0)if(Ae)Z=0;else return-1;if(typeof Q=="string"&&(Q=x.from(Q,Ie)),x.isBuffer(Q))return Q.length===0?-1:ae(le,Q,Z,Ie,Ae);if(typeof Q=="number")return Q=Q&255,typeof Uint8Array.prototype.indexOf=="function"?Ae?Uint8Array.prototype.indexOf.call(le,Q,Z):Uint8Array.prototype.lastIndexOf.call(le,Q,Z):ae(le,[Q],Z,Ie,Ae);throw new TypeError("val must be string, number or Buffer")}function ae(le,Q,Z,Ie,Ae){let Te=1,Ve=le.length,Tt=Q.length;if(Ie!==void 0&&(Ie=String(Ie).toLowerCase(),Ie==="ucs2"||Ie==="ucs-2"||Ie==="utf16le"||Ie==="utf-16le")){if(le.length<2||Q.length<2)return-1;Te=2,Ve/=2,Tt/=2,Z/=2}function Ht(cn,Xn){return Te===1?cn[Xn]:cn.readUInt16BE(Xn*Te)}let nn;if(Ae){let cn=-1;for(nn=Z;nn<Ve;nn++)if(Ht(le,nn)===Ht(Q,cn===-1?0:nn-cn)){if(cn===-1&&(cn=nn),nn-cn+1===Tt)return cn*Te}else cn!==-1&&(nn-=nn-cn),cn=-1}else for(Z+Tt>Ve&&(Z=Ve-Tt),nn=Z;nn>=0;nn--){let cn=!0;for(let Xn=0;Xn<Tt;Xn++)if(Ht(le,nn+Xn)!==Ht(Q,Xn)){cn=!1;break}if(cn)return nn}return-1}x.prototype.includes=function(Q,Z,Ie){return this.indexOf(Q,Z,Ie)!==-1},x.prototype.indexOf=function(Q,Z,Ie){return se(this,Q,Z,Ie,!0)},x.prototype.lastIndexOf=function(Q,Z,Ie){return se(this,Q,Z,Ie,!1)};function ee(le,Q,Z,Ie){Z=Number(Z)||0;const Ae=le.length-Z;Ie?(Ie=Number(Ie),Ie>Ae&&(Ie=Ae)):Ie=Ae;const Te=Q.length;Ie>Te/2&&(Ie=Te/2);let Ve;for(Ve=0;Ve<Ie;++Ve){const Tt=parseInt(Q.substr(Ve*2,2),16);if(Xe(Tt))return Ve;le[Z+Ve]=Tt}return Ve}function ne(le,Q,Z,Ie){return Be(ye(Q,le.length-Z),le,Z,Ie)}function X(le,Q,Z,Ie){return Be(me(Q),le,Z,Ie)}function W(le,Q,Z,Ie){return Be(Se(Q),le,Z,Ie)}function ce(le,Q,Z,Ie){return Be(Re(Q,le.length-Z),le,Z,Ie)}x.prototype.write=function(Q,Z,Ie,Ae){if(Z===void 0)Ae="utf8",Ie=this.length,Z=0;else if(Ie===void 0&&typeof Z=="string")Ae=Z,Ie=this.length,Z=0;else if(isFinite(Z))Z=Z>>>0,isFinite(Ie)?(Ie=Ie>>>0,Ae===void 0&&(Ae="utf8")):(Ae=Ie,Ie=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Te=this.length-Z;if((Ie===void 0||Ie>Te)&&(Ie=Te),Q.length>0&&(Ie<0||Z<0)||Z>this.length)throw new RangeError("Attempt to write outside buffer bounds");Ae||(Ae="utf8");let Ve=!1;for(;;)switch(Ae){case"hex":return ee(this,Q,Z,Ie);case"utf8":case"utf-8":return ne(this,Q,Z,Ie);case"ascii":case"latin1":case"binary":return X(this,Q,Z,Ie);case"base64":return W(this,Q,Z,Ie);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ce(this,Q,Z,Ie);default:if(Ve)throw new TypeError("Unknown encoding: "+Ae);Ae=(""+Ae).toLowerCase(),Ve=!0}},x.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function he(le,Q,Z){return Q===0&&Z===le.length?h.fromByteArray(le):h.fromByteArray(le.slice(Q,Z))}function xe(le,Q,Z){Z=Math.min(le.length,Z);const Ie=[];let Ae=Q;for(;Ae<Z;){const Te=le[Ae];let Ve=null,Tt=Te>239?4:Te>223?3:Te>191?2:1;if(Ae+Tt<=Z){let Ht,nn,cn,Xn;switch(Tt){case 1:Te<128&&(Ve=Te);break;case 2:Ht=le[Ae+1],(Ht&192)===128&&(Xn=(Te&31)<<6|Ht&63,Xn>127&&(Ve=Xn));break;case 3:Ht=le[Ae+1],nn=le[Ae+2],(Ht&192)===128&&(nn&192)===128&&(Xn=(Te&15)<<12|(Ht&63)<<6|nn&63,Xn>2047&&(Xn<55296||Xn>57343)&&(Ve=Xn));break;case 4:Ht=le[Ae+1],nn=le[Ae+2],cn=le[Ae+3],(Ht&192)===128&&(nn&192)===128&&(cn&192)===128&&(Xn=(Te&15)<<18|(Ht&63)<<12|(nn&63)<<6|cn&63,Xn>65535&&Xn<1114112&&(Ve=Xn))}}Ve===null?(Ve=65533,Tt=1):Ve>65535&&(Ve-=65536,Ie.push(Ve>>>10&1023|55296),Ve=56320|Ve&1023),Ie.push(Ve),Ae+=Tt}return Fe(Ie)}const ve=4096;function Fe(le){const Q=le.length;if(Q<=ve)return String.fromCharCode.apply(String,le);let Z="",Ie=0;for(;Ie<Q;)Z+=String.fromCharCode.apply(String,le.slice(Ie,Ie+=ve));return Z}function je(le,Q,Z){let Ie="";Z=Math.min(le.length,Z);for(let Ae=Q;Ae<Z;++Ae)Ie+=String.fromCharCode(le[Ae]&127);return Ie}function rt(le,Q,Z){let Ie="";Z=Math.min(le.length,Z);for(let Ae=Q;Ae<Z;++Ae)Ie+=String.fromCharCode(le[Ae]);return Ie}function He(le,Q,Z){const Ie=le.length;(!Q||Q<0)&&(Q=0),(!Z||Z<0||Z>Ie)&&(Z=Ie);let Ae="";for(let Te=Q;Te<Z;++Te)Ae+=fe[le[Te]];return Ae}function Ot(le,Q,Z){const Ie=le.slice(Q,Z);let Ae="";for(let Te=0;Te<Ie.length-1;Te+=2)Ae+=String.fromCharCode(Ie[Te]+Ie[Te+1]*256);return Ae}x.prototype.slice=function(Q,Z){const Ie=this.length;Q=~~Q,Z=Z===void 0?Ie:~~Z,Q<0?(Q+=Ie,Q<0&&(Q=0)):Q>Ie&&(Q=Ie),Z<0?(Z+=Ie,Z<0&&(Z=0)):Z>Ie&&(Z=Ie),Z<Q&&(Z=Q);const Ae=this.subarray(Q,Z);return Object.setPrototypeOf(Ae,x.prototype),Ae};function xt(le,Q,Z){if(le%1!==0||le<0)throw new RangeError("offset is not uint");if(le+Q>Z)throw new RangeError("Trying to access beyond buffer length")}x.prototype.readUintLE=x.prototype.readUIntLE=function(Q,Z,Ie){Q=Q>>>0,Z=Z>>>0,Ie||xt(Q,Z,this.length);let Ae=this[Q],Te=1,Ve=0;for(;++Ve<Z&&(Te*=256);)Ae+=this[Q+Ve]*Te;return Ae},x.prototype.readUintBE=x.prototype.readUIntBE=function(Q,Z,Ie){Q=Q>>>0,Z=Z>>>0,Ie||xt(Q,Z,this.length);let Ae=this[Q+--Z],Te=1;for(;Z>0&&(Te*=256);)Ae+=this[Q+--Z]*Te;return Ae},x.prototype.readUint8=x.prototype.readUInt8=function(Q,Z){return Q=Q>>>0,Z||xt(Q,1,this.length),this[Q]},x.prototype.readUint16LE=x.prototype.readUInt16LE=function(Q,Z){return Q=Q>>>0,Z||xt(Q,2,this.length),this[Q]|this[Q+1]<<8},x.prototype.readUint16BE=x.prototype.readUInt16BE=function(Q,Z){return Q=Q>>>0,Z||xt(Q,2,this.length),this[Q]<<8|this[Q+1]},x.prototype.readUint32LE=x.prototype.readUInt32LE=function(Q,Z){return Q=Q>>>0,Z||xt(Q,4,this.length),(this[Q]|this[Q+1]<<8|this[Q+2]<<16)+this[Q+3]*16777216},x.prototype.readUint32BE=x.prototype.readUInt32BE=function(Q,Z){return Q=Q>>>0,Z||xt(Q,4,this.length),this[Q]*16777216+(this[Q+1]<<16|this[Q+2]<<8|this[Q+3])},x.prototype.readBigUInt64LE=Oe(function(Q){Q=Q>>>0,ci(Q,"offset");const Z=this[Q],Ie=this[Q+7];(Z===void 0||Ie===void 0)&&ze(Q,this.length-8);const Ae=Z+this[++Q]*2**8+this[++Q]*2**16+this[++Q]*2**24,Te=this[++Q]+this[++Q]*2**8+this[++Q]*2**16+Ie*2**24;return BigInt(Ae)+(BigInt(Te)<<BigInt(32))}),x.prototype.readBigUInt64BE=Oe(function(Q){Q=Q>>>0,ci(Q,"offset");const Z=this[Q],Ie=this[Q+7];(Z===void 0||Ie===void 0)&&ze(Q,this.length-8);const Ae=Z*2**24+this[++Q]*2**16+this[++Q]*2**8+this[++Q],Te=this[++Q]*2**24+this[++Q]*2**16+this[++Q]*2**8+Ie;return(BigInt(Ae)<<BigInt(32))+BigInt(Te)}),x.prototype.readIntLE=function(Q,Z,Ie){Q=Q>>>0,Z=Z>>>0,Ie||xt(Q,Z,this.length);let Ae=this[Q],Te=1,Ve=0;for(;++Ve<Z&&(Te*=256);)Ae+=this[Q+Ve]*Te;return Te*=128,Ae>=Te&&(Ae-=Math.pow(2,8*Z)),Ae},x.prototype.readIntBE=function(Q,Z,Ie){Q=Q>>>0,Z=Z>>>0,Ie||xt(Q,Z,this.length);let Ae=Z,Te=1,Ve=this[Q+--Ae];for(;Ae>0&&(Te*=256);)Ve+=this[Q+--Ae]*Te;return Te*=128,Ve>=Te&&(Ve-=Math.pow(2,8*Z)),Ve},x.prototype.readInt8=function(Q,Z){return Q=Q>>>0,Z||xt(Q,1,this.length),this[Q]&128?(255-this[Q]+1)*-1:this[Q]},x.prototype.readInt16LE=function(Q,Z){Q=Q>>>0,Z||xt(Q,2,this.length);const Ie=this[Q]|this[Q+1]<<8;return Ie&32768?Ie|4294901760:Ie},x.prototype.readInt16BE=function(Q,Z){Q=Q>>>0,Z||xt(Q,2,this.length);const Ie=this[Q+1]|this[Q]<<8;return Ie&32768?Ie|4294901760:Ie},x.prototype.readInt32LE=function(Q,Z){return Q=Q>>>0,Z||xt(Q,4,this.length),this[Q]|this[Q+1]<<8|this[Q+2]<<16|this[Q+3]<<24},x.prototype.readInt32BE=function(Q,Z){return Q=Q>>>0,Z||xt(Q,4,this.length),this[Q]<<24|this[Q+1]<<16|this[Q+2]<<8|this[Q+3]},x.prototype.readBigInt64LE=Oe(function(Q){Q=Q>>>0,ci(Q,"offset");const Z=this[Q],Ie=this[Q+7];(Z===void 0||Ie===void 0)&&ze(Q,this.length-8);const Ae=this[Q+4]+this[Q+5]*2**8+this[Q+6]*2**16+(Ie<<24);return(BigInt(Ae)<<BigInt(32))+BigInt(Z+this[++Q]*256+this[++Q]*65536+this[++Q]*16777216)}),x.prototype.readBigInt64BE=Oe(function(Q){Q=Q>>>0,ci(Q,"offset");const Z=this[Q],Ie=this[Q+7];(Z===void 0||Ie===void 0)&&ze(Q,this.length-8);const Ae=(Z<<24)+this[++Q]*2**16+this[++Q]*2**8+this[++Q];return(BigInt(Ae)<<BigInt(32))+BigInt(this[++Q]*16777216+this[++Q]*65536+this[++Q]*256+Ie)}),x.prototype.readFloatLE=function(Q,Z){return Q=Q>>>0,Z||xt(Q,4,this.length),m.read(this,Q,!0,23,4)},x.prototype.readFloatBE=function(Q,Z){return Q=Q>>>0,Z||xt(Q,4,this.length),m.read(this,Q,!1,23,4)},x.prototype.readDoubleLE=function(Q,Z){return Q=Q>>>0,Z||xt(Q,8,this.length),m.read(this,Q,!0,52,8)},x.prototype.readDoubleBE=function(Q,Z){return Q=Q>>>0,Z||xt(Q,8,this.length),m.read(this,Q,!1,52,8)};function gt(le,Q,Z,Ie,Ae,Te){if(!x.isBuffer(le))throw new TypeError('"buffer" argument must be a Buffer instance');if(Q>Ae||Q<Te)throw new RangeError('"value" argument is out of bounds');if(Z+Ie>le.length)throw new RangeError("Index out of range")}x.prototype.writeUintLE=x.prototype.writeUIntLE=function(Q,Z,Ie,Ae){if(Q=+Q,Z=Z>>>0,Ie=Ie>>>0,!Ae){const Tt=Math.pow(2,8*Ie)-1;gt(this,Q,Z,Ie,Tt,0)}let Te=1,Ve=0;for(this[Z]=Q&255;++Ve<Ie&&(Te*=256);)this[Z+Ve]=Q/Te&255;return Z+Ie},x.prototype.writeUintBE=x.prototype.writeUIntBE=function(Q,Z,Ie,Ae){if(Q=+Q,Z=Z>>>0,Ie=Ie>>>0,!Ae){const Tt=Math.pow(2,8*Ie)-1;gt(this,Q,Z,Ie,Tt,0)}let Te=Ie-1,Ve=1;for(this[Z+Te]=Q&255;--Te>=0&&(Ve*=256);)this[Z+Te]=Q/Ve&255;return Z+Ie},x.prototype.writeUint8=x.prototype.writeUInt8=function(Q,Z,Ie){return Q=+Q,Z=Z>>>0,Ie||gt(this,Q,Z,1,255,0),this[Z]=Q&255,Z+1},x.prototype.writeUint16LE=x.prototype.writeUInt16LE=function(Q,Z,Ie){return Q=+Q,Z=Z>>>0,Ie||gt(this,Q,Z,2,65535,0),this[Z]=Q&255,this[Z+1]=Q>>>8,Z+2},x.prototype.writeUint16BE=x.prototype.writeUInt16BE=function(Q,Z,Ie){return Q=+Q,Z=Z>>>0,Ie||gt(this,Q,Z,2,65535,0),this[Z]=Q>>>8,this[Z+1]=Q&255,Z+2},x.prototype.writeUint32LE=x.prototype.writeUInt32LE=function(Q,Z,Ie){return Q=+Q,Z=Z>>>0,Ie||gt(this,Q,Z,4,4294967295,0),this[Z+3]=Q>>>24,this[Z+2]=Q>>>16,this[Z+1]=Q>>>8,this[Z]=Q&255,Z+4},x.prototype.writeUint32BE=x.prototype.writeUInt32BE=function(Q,Z,Ie){return Q=+Q,Z=Z>>>0,Ie||gt(this,Q,Z,4,4294967295,0),this[Z]=Q>>>24,this[Z+1]=Q>>>16,this[Z+2]=Q>>>8,this[Z+3]=Q&255,Z+4};function It(le,Q,Z,Ie,Ae){Bn(Q,Ie,Ae,le,Z,7);let Te=Number(Q&BigInt(4294967295));le[Z++]=Te,Te=Te>>8,le[Z++]=Te,Te=Te>>8,le[Z++]=Te,Te=Te>>8,le[Z++]=Te;let Ve=Number(Q>>BigInt(32)&BigInt(4294967295));return le[Z++]=Ve,Ve=Ve>>8,le[Z++]=Ve,Ve=Ve>>8,le[Z++]=Ve,Ve=Ve>>8,le[Z++]=Ve,Z}function ct(le,Q,Z,Ie,Ae){Bn(Q,Ie,Ae,le,Z,7);let Te=Number(Q&BigInt(4294967295));le[Z+7]=Te,Te=Te>>8,le[Z+6]=Te,Te=Te>>8,le[Z+5]=Te,Te=Te>>8,le[Z+4]=Te;let Ve=Number(Q>>BigInt(32)&BigInt(4294967295));return le[Z+3]=Ve,Ve=Ve>>8,le[Z+2]=Ve,Ve=Ve>>8,le[Z+1]=Ve,Ve=Ve>>8,le[Z]=Ve,Z+8}x.prototype.writeBigUInt64LE=Oe(function(Q,Z=0){return It(this,Q,Z,BigInt(0),BigInt("0xffffffffffffffff"))}),x.prototype.writeBigUInt64BE=Oe(function(Q,Z=0){return ct(this,Q,Z,BigInt(0),BigInt("0xffffffffffffffff"))}),x.prototype.writeIntLE=function(Q,Z,Ie,Ae){if(Q=+Q,Z=Z>>>0,!Ae){const Ht=Math.pow(2,8*Ie-1);gt(this,Q,Z,Ie,Ht-1,-Ht)}let Te=0,Ve=1,Tt=0;for(this[Z]=Q&255;++Te<Ie&&(Ve*=256);)Q<0&&Tt===0&&this[Z+Te-1]!==0&&(Tt=1),this[Z+Te]=(Q/Ve>>0)-Tt&255;return Z+Ie},x.prototype.writeIntBE=function(Q,Z,Ie,Ae){if(Q=+Q,Z=Z>>>0,!Ae){const Ht=Math.pow(2,8*Ie-1);gt(this,Q,Z,Ie,Ht-1,-Ht)}let Te=Ie-1,Ve=1,Tt=0;for(this[Z+Te]=Q&255;--Te>=0&&(Ve*=256);)Q<0&&Tt===0&&this[Z+Te+1]!==0&&(Tt=1),this[Z+Te]=(Q/Ve>>0)-Tt&255;return Z+Ie},x.prototype.writeInt8=function(Q,Z,Ie){return Q=+Q,Z=Z>>>0,Ie||gt(this,Q,Z,1,127,-128),Q<0&&(Q=255+Q+1),this[Z]=Q&255,Z+1},x.prototype.writeInt16LE=function(Q,Z,Ie){return Q=+Q,Z=Z>>>0,Ie||gt(this,Q,Z,2,32767,-32768),this[Z]=Q&255,this[Z+1]=Q>>>8,Z+2},x.prototype.writeInt16BE=function(Q,Z,Ie){return Q=+Q,Z=Z>>>0,Ie||gt(this,Q,Z,2,32767,-32768),this[Z]=Q>>>8,this[Z+1]=Q&255,Z+2},x.prototype.writeInt32LE=function(Q,Z,Ie){return Q=+Q,Z=Z>>>0,Ie||gt(this,Q,Z,4,2147483647,-2147483648),this[Z]=Q&255,this[Z+1]=Q>>>8,this[Z+2]=Q>>>16,this[Z+3]=Q>>>24,Z+4},x.prototype.writeInt32BE=function(Q,Z,Ie){return Q=+Q,Z=Z>>>0,Ie||gt(this,Q,Z,4,2147483647,-2147483648),Q<0&&(Q=4294967295+Q+1),this[Z]=Q>>>24,this[Z+1]=Q>>>16,this[Z+2]=Q>>>8,this[Z+3]=Q&255,Z+4},x.prototype.writeBigInt64LE=Oe(function(Q,Z=0){return It(this,Q,Z,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),x.prototype.writeBigInt64BE=Oe(function(Q,Z=0){return ct(this,Q,Z,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ut(le,Q,Z,Ie,Ae,Te){if(Z+Ie>le.length)throw new RangeError("Index out of range");if(Z<0)throw new RangeError("Index out of range")}function Ct(le,Q,Z,Ie,Ae){return Q=+Q,Z=Z>>>0,Ae||ut(le,Q,Z,4),m.write(le,Q,Z,Ie,23,4),Z+4}x.prototype.writeFloatLE=function(Q,Z,Ie){return Ct(this,Q,Z,!0,Ie)},x.prototype.writeFloatBE=function(Q,Z,Ie){return Ct(this,Q,Z,!1,Ie)};function qt(le,Q,Z,Ie,Ae){return Q=+Q,Z=Z>>>0,Ae||ut(le,Q,Z,8),m.write(le,Q,Z,Ie,52,8),Z+8}x.prototype.writeDoubleLE=function(Q,Z,Ie){return qt(this,Q,Z,!0,Ie)},x.prototype.writeDoubleBE=function(Q,Z,Ie){return qt(this,Q,Z,!1,Ie)},x.prototype.copy=function(Q,Z,Ie,Ae){if(!x.isBuffer(Q))throw new TypeError("argument should be a Buffer");if(Ie||(Ie=0),!Ae&&Ae!==0&&(Ae=this.length),Z>=Q.length&&(Z=Q.length),Z||(Z=0),Ae>0&&Ae<Ie&&(Ae=Ie),Ae===Ie||Q.length===0||this.length===0)return 0;if(Z<0)throw new RangeError("targetStart out of bounds");if(Ie<0||Ie>=this.length)throw new RangeError("Index out of range");if(Ae<0)throw new RangeError("sourceEnd out of bounds");Ae>this.length&&(Ae=this.length),Q.length-Z<Ae-Ie&&(Ae=Q.length-Z+Ie);const Te=Ae-Ie;return this===Q&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(Z,Ie,Ae):Uint8Array.prototype.set.call(Q,this.subarray(Ie,Ae),Z),Te},x.prototype.fill=function(Q,Z,Ie,Ae){if(typeof Q=="string"){if(typeof Z=="string"?(Ae=Z,Z=0,Ie=this.length):typeof Ie=="string"&&(Ae=Ie,Ie=this.length),Ae!==void 0&&typeof Ae!="string")throw new TypeError("encoding must be a string");if(typeof Ae=="string"&&!x.isEncoding(Ae))throw new TypeError("Unknown encoding: "+Ae);if(Q.length===1){const Ve=Q.charCodeAt(0);(Ae==="utf8"&&Ve<128||Ae==="latin1")&&(Q=Ve)}}else typeof Q=="number"?Q=Q&255:typeof Q=="boolean"&&(Q=Number(Q));if(Z<0||this.length<Z||this.length<Ie)throw new RangeError("Out of range index");if(Ie<=Z)return this;Z=Z>>>0,Ie=Ie===void 0?this.length:Ie>>>0,Q||(Q=0);let Te;if(typeof Q=="number")for(Te=Z;Te<Ie;++Te)this[Te]=Q;else{const Ve=x.isBuffer(Q)?Q:x.from(Q,Ae),Tt=Ve.length;if(Tt===0)throw new TypeError('The value "'+Q+'" is invalid for argument "value"');for(Te=0;Te<Ie-Z;++Te)this[Te+Z]=Ve[Te%Tt]}return this};const Ft={};function un(le,Q,Z){Ft[le]=class extends Z{constructor(){super(),Object.defineProperty(this,"message",{value:Q.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${le}]`,this.stack,delete this.name}get code(){return le}set code(Ae){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Ae,writable:!0})}toString(){return`${this.name} [${le}]: ${this.message}`}}}un("ERR_BUFFER_OUT_OF_BOUNDS",function(le){return le?`${le} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),un("ERR_INVALID_ARG_TYPE",function(le,Q){return`The "${le}" argument must be of type number. Received type ${typeof Q}`},TypeError),un("ERR_OUT_OF_RANGE",function(le,Q,Z){let Ie=`The value of "${le}" is out of range.`,Ae=Z;return Number.isInteger(Z)&&Math.abs(Z)>4294967296?Ae=fn(String(Z)):typeof Z=="bigint"&&(Ae=String(Z),(Z>BigInt(2)**BigInt(32)||Z<-(BigInt(2)**BigInt(32)))&&(Ae=fn(Ae)),Ae+="n"),Ie+=` It must be ${Q}. Received ${Ae}`,Ie},RangeError);function fn(le){let Q="",Z=le.length;const Ie=le[0]==="-"?1:0;for(;Z>=Ie+4;Z-=3)Q=`_${le.slice(Z-3,Z)}${Q}`;return`${le.slice(0,Z)}${Q}`}function An(le,Q,Z){ci(Q,"offset"),(le[Q]===void 0||le[Q+Z]===void 0)&&ze(Q,le.length-(Z+1))}function Bn(le,Q,Z,Ie,Ae,Te){if(le>Z||le<Q){const Ve=typeof Q=="bigint"?"n":"";let Tt;throw Te>3?Q===0||Q===BigInt(0)?Tt=`>= 0${Ve} and < 2${Ve} ** ${(Te+1)*8}${Ve}`:Tt=`>= -(2${Ve} ** ${(Te+1)*8-1}${Ve}) and < 2 ** ${(Te+1)*8-1}${Ve}`:Tt=`>= ${Q}${Ve} and <= ${Z}${Ve}`,new Ft.ERR_OUT_OF_RANGE("value",Tt,le)}An(Ie,Ae,Te)}function ci(le,Q){if(typeof le!="number")throw new Ft.ERR_INVALID_ARG_TYPE(Q,"number",le)}function ze(le,Q,Z){throw Math.floor(le)!==le?(ci(le,Z),new Ft.ERR_OUT_OF_RANGE(Z||"offset","an integer",le)):Q<0?new Ft.ERR_BUFFER_OUT_OF_BOUNDS:new Ft.ERR_OUT_OF_RANGE(Z||"offset",`>= ${Z?1:0} and <= ${Q}`,le)}const Pe=/[^+/0-9A-Za-z-_]/g;function qe(le){if(le=le.split("=")[0],le=le.trim().replace(Pe,""),le.length<2)return"";for(;le.length%4!==0;)le=le+"=";return le}function ye(le,Q){Q=Q||1/0;let Z;const Ie=le.length;let Ae=null;const Te=[];for(let Ve=0;Ve<Ie;++Ve){if(Z=le.charCodeAt(Ve),Z>55295&&Z<57344){if(!Ae){if(Z>56319){(Q-=3)>-1&&Te.push(239,191,189);continue}else if(Ve+1===Ie){(Q-=3)>-1&&Te.push(239,191,189);continue}Ae=Z;continue}if(Z<56320){(Q-=3)>-1&&Te.push(239,191,189),Ae=Z;continue}Z=(Ae-55296<<10|Z-56320)+65536}else Ae&&(Q-=3)>-1&&Te.push(239,191,189);if(Ae=null,Z<128){if((Q-=1)<0)break;Te.push(Z)}else if(Z<2048){if((Q-=2)<0)break;Te.push(Z>>6|192,Z&63|128)}else if(Z<65536){if((Q-=3)<0)break;Te.push(Z>>12|224,Z>>6&63|128,Z&63|128)}else if(Z<1114112){if((Q-=4)<0)break;Te.push(Z>>18|240,Z>>12&63|128,Z>>6&63|128,Z&63|128)}else throw new Error("Invalid code point")}return Te}function me(le){const Q=[];for(let Z=0;Z<le.length;++Z)Q.push(le.charCodeAt(Z)&255);return Q}function Re(le,Q){let Z,Ie,Ae;const Te=[];for(let Ve=0;Ve<le.length&&!((Q-=2)<0);++Ve)Z=le.charCodeAt(Ve),Ie=Z>>8,Ae=Z%256,Te.push(Ae),Te.push(Ie);return Te}function Se(le){return h.toByteArray(qe(le))}function Be(le,Q,Z,Ie){let Ae;for(Ae=0;Ae<Ie&&!(Ae+Z>=Q.length||Ae>=le.length);++Ae)Q[Ae+Z]=le[Ae];return Ae}function Ee(le,Q){return le instanceof Q||le!=null&&le.constructor!=null&&le.constructor.name!=null&&le.constructor.name===Q.name}function Xe(le){return le!==le}const fe=function(){const le="0123456789abcdef",Q=new Array(256);for(let Z=0;Z<16;++Z){const Ie=Z*16;for(let Ae=0;Ae<16;++Ae)Q[Ie+Ae]=le[Z]+le[Ae]}return Q}();function Oe(le){return typeof BigInt>"u"?$e:le}function $e(){throw new Error("BigInt not supported")}},"./node_modules/css-loader/dist/runtime/api.js":l=>{l.exports=function(d){var c=[];return c.toString=function(){return this.map(function(m){var p="",A=typeof m[5]<"u";return m[4]&&(p+="@supports (".concat(m[4],") {")),m[2]&&(p+="@media ".concat(m[2]," {")),A&&(p+="@layer".concat(m[5].length>0?" ".concat(m[5]):""," {")),p+=d(m),A&&(p+="}"),m[2]&&(p+="}"),m[4]&&(p+="}"),p}).join("")},c.i=function(m,p,A,v,y){typeof m=="string"&&(m=[[null,m,void 0]]);var x={};if(A)for(var C=0;C<this.length;C++){var g=this[C][0];g!=null&&(x[g]=!0)}for(var b=0;b<m.length;b++){var _=[].concat(m[b]);A&&x[_[0]]||(typeof y<"u"&&(typeof _[5]>"u"||(_[1]="@layer".concat(_[5].length>0?" ".concat(_[5]):""," {").concat(_[1],"}")),_[5]=y),p&&(_[2]&&(_[1]="@media ".concat(_[2]," {").concat(_[1],"}")),_[2]=p),v&&(_[4]?(_[1]="@supports (".concat(_[4],") {").concat(_[1],"}"),_[4]=v):_[4]="".concat(v)),c.push(_))}},c}},"./node_modules/css-loader/dist/runtime/getUrl.js":l=>{l.exports=function(d,c){return c||(c={}),d&&(d=String(d.__esModule?d.default:d),/^['"].*['"]$/.test(d)&&(d=d.slice(1,-1)),c.hash&&(d+=c.hash),/["'() \t\n]|(%20)/.test(d)||c.needQuotes?'"'.concat(d.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):d)}},"./node_modules/css-loader/dist/runtime/sourceMaps.js":l=>{l.exports=function(d){var c=d[1],h=d[3];if(!h)return c;if(typeof btoa=="function"){var m=btoa(unescape(encodeURIComponent(JSON.stringify(h)))),p="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(m),A="/*# ".concat(p," */");return[c].concat([A]).join(`
`)}return[c].join(`
`)}},"./node_modules/custom-event-polyfill/polyfill.js":()=>{(function(){if(!(typeof window>"u"))try{var l=new window.CustomEvent("test",{cancelable:!0});if(l.preventDefault(),l.defaultPrevented!==!0)throw new Error("Could not prevent default")}catch{var d=function(h,m){var p,A;return m=m||{},m.bubbles=!!m.bubbles,m.cancelable=!!m.cancelable,p=document.createEvent("CustomEvent"),p.initCustomEvent(h,m.bubbles,m.cancelable,m.detail),A=p.preventDefault,p.preventDefault=function(){A.call(this);try{Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}})}catch{this.defaultPrevented=!0}},p};d.prototype=window.Event.prototype,window.CustomEvent=d}})()},"./node_modules/debug/browser.js":(l,d,c)=>{d=l.exports=c("./node_modules/debug/debug.js"),d.log=p,d.formatArgs=m,d.save=A,d.load=v,d.useColors=h,d.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:y(),d.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function h(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}d.formatters.j=function(x){return JSON.stringify(x)};function m(){var x=arguments,C=this.useColors;if(x[0]=(C?"%c":"")+this.namespace+(C?" %c":" ")+x[0]+(C?"%c ":" "),!C)return x;var g="color: "+this.color;x=[x[0],g,"color: inherit"].concat(Array.prototype.slice.call(x,1));var b=0,_=0;return x[0].replace(/%[a-z%]/g,function(S){S!=="%%"&&(b++,S==="%c"&&(_=b))}),x.splice(_,0,g),x}function p(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function A(x){try{x==null?d.storage.removeItem("debug"):d.storage.debug=x}catch{}}function v(){var x;try{x=d.storage.debug}catch{}return x}d.enable(v());function y(){try{return window.localStorage}catch{}}},"./node_modules/debug/debug.js":(l,d)=>{d=l.exports=m,d.coerce=y,d.disable=A,d.enable=p,d.enabled=v,d.names=[],d.skips=[],d.formatters={};var c=0;function h(){return d.colors[c++%d.colors.length]}function m(x){function C(){}C.enabled=!1;function g(){var _=g;_.useColors==null&&(_.useColors=d.useColors()),_.color==null&&_.useColors&&(_.color=h());var S=Array.prototype.slice.call(arguments);S[0]=d.coerce(S[0]),typeof S[0]!="string"&&(S=["%o"].concat(S));var R=0;S[0]=S[0].replace(/%([a-z%])/g,function(O,D){if(O==="%%")return O;R++;var L=d.formatters[D];if(typeof L=="function"){var N=S[R];O=L.call(_,N),S.splice(R,1),R--}return O}),typeof d.formatArgs=="function"&&(S=d.formatArgs.apply(_,S));var P=g.log||d.log||console.log.bind(console);P.apply(_,S)}g.enabled=!0;var b=d.enabled(x)?g:C;return b.namespace=x,b}function p(x){d.save(x);for(var C=(x||"").split(/[\s,]+/),g=C.length,b=0;b<g;b++)C[b]&&(x=C[b].replace(/\*/g,".*?"),x[0]==="-"?d.skips.push(new RegExp("^"+x.substr(1)+"$")):d.names.push(new RegExp("^"+x+"$")))}function A(){d.enable("")}function v(x){var C,g;for(C=0,g=d.skips.length;C<g;C++)if(d.skips[C].test(x))return!1;for(C=0,g=d.names.length;C<g;C++)if(d.names[C].test(x))return!0;return!1}function y(x){return x instanceof Error?x.stack||x.message:x}},"./node_modules/deep-assign/index.js":(l,d,c)=>{var h=c("./node_modules/is-obj/index.js"),m=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable;function A(x){if(x==null)throw new TypeError("Sources cannot be null or undefined");return Object(x)}function v(x,C,g){var b=C[g];if(b!=null){if(m.call(x,g)&&(x[g]===void 0||x[g]===null))throw new TypeError("Cannot convert undefined or null to object ("+g+")");!m.call(x,g)||!h(b)?x[g]=b:x[g]=y(Object(x[g]),C[g])}}function y(x,C){if(x===C)return x;C=Object(C);for(var g in C)m.call(C,g)&&v(x,C,g);if(Object.getOwnPropertySymbols)for(var b=Object.getOwnPropertySymbols(C),_=0;_<b.length;_++)p.call(C,b[_])&&v(x,C,b[_]);return x}l.exports=function(C){C=A(C);for(var g=1;g<arguments.length;g++)y(C,arguments[g]);return C}},"./node_modules/dtype/index.js":l=>{l.exports=function(d){switch(d){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},"./node_modules/flatten-vertex-data/index.js":(l,d,c)=>{var h=c("./node_modules/dtype/index.js");l.exports=m;function m(p,A,v){if(!p)throw new TypeError("must specify data as first parameter");if(v=+(v||0)|0,Array.isArray(p)&&p[0]&&typeof p[0][0]=="number"){var y=p[0].length,x=p.length*y,C,g,b,_;(!A||typeof A=="string")&&(A=new(h(A||"float32"))(x+v));var S=A.length-v;if(x!==S)throw new Error("source length "+x+" ("+y+"x"+p.length+") does not match destination length "+S);for(C=0,b=v;C<p.length;C++)for(g=0;g<y;g++)A[b++]=p[C][g]===null?NaN:p[C][g]}else if(!A||typeof A=="string"){var R=h(A||"float32");if(Array.isArray(p)||A==="array")for(A=new R(p.length+v),C=0,b=v,_=A.length;b<_;b++,C++)A[b]=p[C]===null?NaN:p[C];else v===0?A=new R(p):(A=new R(p.length+v),A.set(p,v))}else A.set(p,v);return A}},"./node_modules/global/window.js":(l,d,c)=>{var h;typeof window<"u"?h=window:typeof c.g<"u"?h=c.g:typeof self<"u"?h=self:h={},l.exports=h},"./node_modules/ieee754/index.js":(l,d)=>{/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */d.read=function(c,h,m,p,A){var v,y,x=A*8-p-1,C=(1<<x)-1,g=C>>1,b=-7,_=m?A-1:0,S=m?-1:1,R=c[h+_];for(_+=S,v=R&(1<<-b)-1,R>>=-b,b+=x;b>0;v=v*256+c[h+_],_+=S,b-=8);for(y=v&(1<<-b)-1,v>>=-b,b+=p;b>0;y=y*256+c[h+_],_+=S,b-=8);if(v===0)v=1-g;else{if(v===C)return y?NaN:(R?-1:1)*(1/0);y=y+Math.pow(2,p),v=v-g}return(R?-1:1)*y*Math.pow(2,v-p)},d.write=function(c,h,m,p,A,v){var y,x,C,g=v*8-A-1,b=(1<<g)-1,_=b>>1,S=A===23?Math.pow(2,-24)-Math.pow(2,-77):0,R=p?0:v-1,P=p?1:-1,O=h<0||h===0&&1/h<0?1:0;for(h=Math.abs(h),isNaN(h)||h===1/0?(x=isNaN(h)?1:0,y=b):(y=Math.floor(Math.log(h)/Math.LN2),h*(C=Math.pow(2,-y))<1&&(y--,C*=2),y+_>=1?h+=S/C:h+=S*Math.pow(2,1-_),h*C>=2&&(y++,C/=2),y+_>=b?(x=0,y=b):y+_>=1?(x=(h*C-1)*Math.pow(2,A),y=y+_):(x=h*Math.pow(2,_-1)*Math.pow(2,A),y=0));A>=8;c[m+R]=x&255,R+=P,x/=256,A-=8);for(y=y<<A|x,g+=A;g>0;c[m+R]=y&255,R+=P,y/=256,g-=8);c[m+R-P]|=O*128}},"./node_modules/inherits/inherits_browser.js":l=>{typeof Object.create=="function"?l.exports=function(c,h){h&&(c.super_=h,c.prototype=Object.create(h.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}))}:l.exports=function(c,h){if(h){c.super_=h;var m=function(){};m.prototype=h.prototype,c.prototype=new m,c.prototype.constructor=c}}},"./node_modules/is-buffer/index.js":l=>{/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */l.exports=function(h){return h!=null&&(d(h)||c(h)||!!h._isBuffer)};function d(h){return!!h.constructor&&typeof h.constructor.isBuffer=="function"&&h.constructor.isBuffer(h)}function c(h){return typeof h.readFloatLE=="function"&&typeof h.slice=="function"&&d(h.slice(0,0))}},"./node_modules/is-function/index.js":l=>{l.exports=c;var d=Object.prototype.toString;function c(h){if(!h)return!1;var m=d.call(h);return m==="[object Function]"||typeof h=="function"&&m!=="[object RegExp]"||typeof window<"u"&&(h===window.setTimeout||h===window.alert||h===window.confirm||h===window.prompt)}},"./node_modules/is-obj/index.js":l=>{l.exports=function(d){var c=typeof d;return d!==null&&(c==="object"||c==="function")}},"./node_modules/layout-bmfont-text/index.js":(l,d,c)=>{var h=c("./node_modules/word-wrapper/index.js"),m=c("./node_modules/xtend/immutable.js"),p=c("./node_modules/as-number/index.js"),A=["x","e","a","o","n","s","r","c","u","m","v","w","z"],v=["m","w"],y=["H","I","N","E","F","K","L","T","U","V","W","X","Y","Z"],x="	".charCodeAt(0),C=" ".charCodeAt(0),g=0,b=1,_=2;l.exports=function(ae){return new S(ae)};function S(se){this.glyphs=[],this._measure=this.computeMetrics.bind(this),this.update(se)}S.prototype.update=function(se){if(se=m({measure:this._measure},se),this._opt=se,this._opt.tabSize=p(this._opt.tabSize,4),!se.font)throw new Error("must provide a valid bitmap font");var ae=this.glyphs,ee=se.text||"",ne=se.font;this._setupSpaceGlyphs(ne);var X=h.lines(ee,se),W=se.width||0;ae.length=0;var ce=X.reduce(function(gt,It){return Math.max(gt,It.width,W)},0),he=0,xe=0,ve=p(se.lineHeight,ne.common.lineHeight),Fe=ne.common.base,je=ve-Fe,rt=se.letterSpacing||0,He=ve*X.length-je,Ot=J(this._opt.align);xe-=He,this._width=ce,this._height=He,this._descender=ve-Fe,this._baseline=Fe,this._xHeight=D(ne),this._capHeight=N(ne),this._lineHeight=ve,this._ascender=ve-je-this._xHeight;var xt=this;X.forEach(function(gt,It){for(var ct=gt.start,ut=gt.end,Ct=gt.width,qt,Ft=ct;Ft<ut;Ft++){var un=ee.charCodeAt(Ft),fn=xt.getGlyph(ne,un);if(fn){qt&&(he+=H(ne,qt.id,fn.id));var An=he;Ot===b?An+=(ce-Ct)/2:Ot===_&&(An+=ce-Ct),ae.push({position:[An,xe],data:fn,index:Ft,line:It}),he+=fn.xadvance+rt,qt=fn}}xe+=ve,he=0}),this._linesTotal=X.length},S.prototype._setupSpaceGlyphs=function(se){if(this._fallbackSpaceGlyph=null,this._fallbackTabGlyph=null,!(!se.chars||se.chars.length===0)){var ae=O(se,C)||L(se)||se.chars[0],ee=this._opt.tabSize*ae.xadvance;this._fallbackSpaceGlyph=ae,this._fallbackTabGlyph=m(ae,{x:0,y:0,xadvance:ee,id:x,xoffset:0,yoffset:0,width:0,height:0})}},S.prototype.getGlyph=function(se,ae){var ee=O(se,ae);return ee||(ae===x?this._fallbackTabGlyph:ae===C?this._fallbackSpaceGlyph:null)},S.prototype.computeMetrics=function(se,ae,ee,ne){var X=this._opt.letterSpacing||0,W=this._opt.font,ce=0,he=0,xe=0,ve,Fe;if(!W.chars||W.chars.length===0)return{start:ae,end:ae,width:0};ee=Math.min(se.length,ee);for(var je=ae;je<ee;je++){var rt=se.charCodeAt(je),ve=this.getGlyph(W,rt);if(ve){ve.xoffset;var He=Fe?H(W,Fe.id,ve.id):0;ce+=He;var Ot=ce+ve.xadvance+X,xt=ce+ve.width;if(xt>=ne||Ot>=ne)break;ce=Ot,he=xt,Fe=ve}xe++}return Fe&&(he+=Fe.xoffset),{start:ae,end:ae+xe,width:he}},["width","height","descender","ascender","xHeight","baseline","capHeight","lineHeight"].forEach(R);function R(se){Object.defineProperty(S.prototype,se,{get:P(se),configurable:!0})}function P(se){return new Function(["return function "+se+"() {","  return this._"+se,"}"].join(`
`))()}function O(se,ae){if(!se.chars||se.chars.length===0)return null;var ee=K(se.chars,ae);return ee>=0?se.chars[ee]:null}function D(se){for(var ae=0;ae<A.length;ae++){var ee=A[ae].charCodeAt(0),ne=K(se.chars,ee);if(ne>=0)return se.chars[ne].height}return 0}function L(se){for(var ae=0;ae<v.length;ae++){var ee=v[ae].charCodeAt(0),ne=K(se.chars,ee);if(ne>=0)return se.chars[ne]}return 0}function N(se){for(var ae=0;ae<y.length;ae++){var ee=y[ae].charCodeAt(0),ne=K(se.chars,ee);if(ne>=0)return se.chars[ne].height}return 0}function H(se,ae,ee){if(!se.kernings||se.kernings.length===0)return 0;for(var ne=se.kernings,X=0;X<ne.length;X++){var W=ne[X];if(W.first===ae&&W.second===ee)return W.amount}return 0}function J(se){return se==="center"?b:se==="right"?_:g}function K(se,ae,ee){ee=ee||0;for(var ne=ee;ne<se.length;ne++)if(se[ne].id===ae)return ne;return-1}},"./node_modules/load-bmfont/browser.js":(l,d,c)=>{var h=c("./node_modules/buffer/index.js").Buffer,m=c("./node_modules/xhr/index.js"),p=function(){},A=c("./node_modules/parse-bmfont-ascii/index.js"),v=c("./node_modules/parse-bmfont-xml/lib/browser.js"),y=c("./node_modules/parse-bmfont-binary/index.js"),x=c("./node_modules/load-bmfont/lib/is-binary.js"),C=c("./node_modules/xtend/immutable.js"),g=function(){return self.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}();l.exports=function(S,R){R=typeof R=="function"?R:p,typeof S=="string"?S={uri:S}:S||(S={});var P=S.binary;P&&(S=_(S)),m(S,function(O,D,L){if(O)return R(O);if(!/^2/.test(D.statusCode))return R(new Error("http status code: "+D.statusCode));if(!L)return R(new Error("no body result"));var N=!1;if(b(L)){var H=new Uint8Array(L);L=h.from(H,"binary")}x(L)&&(N=!0,typeof L=="string"&&(L=h.from(L,"binary"))),N||(h.isBuffer(L)&&(L=L.toString(S.encoding)),L=L.trim());var J;try{var K=D.headers["content-type"];N?J=y(L):/json/.test(K)||L.charAt(0)==="{"?J=JSON.parse(L):/xml/.test(K)||L.charAt(0)==="<"?J=v(L):J=A(L)}catch(se){R(new Error("error parsing font "+se.message)),R=p}R(null,J)})};function b(S){var R=Object.prototype.toString;return R.call(S)==="[object ArrayBuffer]"}function _(S){if(g)return C(S,{responseType:"arraybuffer"});if(typeof self.XMLHttpRequest>"u")throw new Error("your browser does not support XHR loading");var R=new self.XMLHttpRequest;return R.overrideMimeType("text/plain; charset=x-user-defined"),C({xhr:R},S)}},"./node_modules/load-bmfont/lib/is-binary.js":(l,d,c)=>{var h=c("./node_modules/buffer/index.js").Buffer,m=c("./node_modules/buffer-equal/index.js"),p=h.from([66,77,70,3]);l.exports=function(A){return typeof A=="string"?A.substring(0,3)==="BMF":A.length>4&&m(A.slice(0,4),p)}},"./node_modules/object-assign/index.js":l=>{/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var d=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable;function m(A){if(A==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(A)}function p(){try{if(!Object.assign)return!1;var A=new String("abc");if(A[5]="de",Object.getOwnPropertyNames(A)[0]==="5")return!1;for(var v={},y=0;y<10;y++)v["_"+String.fromCharCode(y)]=y;var x=Object.getOwnPropertyNames(v).map(function(g){return v[g]});if(x.join("")!=="0123456789")return!1;var C={};return"abcdefghijklmnopqrst".split("").forEach(function(g){C[g]=g}),Object.keys(Object.assign({},C)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}l.exports=p()?Object.assign:function(A,v){for(var y,x=m(A),C,g=1;g<arguments.length;g++){y=Object(arguments[g]);for(var b in y)c.call(y,b)&&(x[b]=y[b]);if(d){C=d(y);for(var _=0;_<C.length;_++)h.call(y,C[_])&&(x[C[_]]=y[C[_]])}}return x}},"./node_modules/parse-bmfont-ascii/index.js":l=>{l.exports=function(p){if(!p)throw new Error("no data provided");p=p.toString().trim();var A={pages:[],chars:[],kernings:[]},v=p.split(/\r\n?|\n/g);if(v.length===0)throw new Error("no data in BMFont file");for(var y=0;y<v.length;y++){var x=d(v[y],y);if(x)if(x.key==="page"){if(typeof x.data.id!="number")throw new Error("malformed file at line "+y+" -- needs page id=N");if(typeof x.data.file!="string")throw new Error("malformed file at line "+y+' -- needs page file="path"');A.pages[x.data.id]=x.data.file}else x.key==="chars"||x.key==="kernings"||(x.key==="char"?A.chars.push(x.data):x.key==="kerning"?A.kernings.push(x.data):A[x.key]=x.data)}return A};function d(m,p){if(m=m.replace(/\t+/g," ").trim(),!m)return null;var A=m.indexOf(" ");if(A===-1)throw new Error("no named row at line "+p);var v=m.substring(0,A);m=m.substring(A+1),m=m.replace(/letter=[\'\"]\S+[\'\"]/gi,""),m=m.split("="),m=m.map(function(b){return b.trim().match(/(".*?"|[^"\s]+)+(?=\s*|\s*$)/g)});for(var y=[],x=0;x<m.length;x++){var C=m[x];x===0?y.push({key:C[0],data:""}):x===m.length-1?y[y.length-1].data=c(C[0]):(y[y.length-1].data=c(C[0]),y.push({key:C[1],data:""}))}var g={key:v,data:{}};return y.forEach(function(b){g.data[b.key]=b.data}),g}function c(m){return!m||m.length===0?"":m.indexOf('"')===0||m.indexOf("'")===0?m.substring(1,m.length-1):m.indexOf(",")!==-1?h(m):parseInt(m,10)}function h(m){return m.split(",").map(function(p){return parseInt(p,10)})}},"./node_modules/parse-bmfont-binary/index.js":l=>{var d=[66,77,70];l.exports=function(g){if(g.length<6)throw new Error("invalid buffer length for BMFont");var b=d.every(function(O,D){return g.readUInt8(D)===O});if(!b)throw new Error("BMFont missing BMF byte header");var _=3,S=g.readUInt8(_++);if(S>3)throw new Error("Only supports BMFont Binary v3 (BMFont App v1.10)");for(var R={kernings:[],chars:[]},P=0;P<5;P++)_+=c(R,g,_);return R};function c(C,g,b){if(b>g.length-1)return 0;var _=g.readUInt8(b++),S=g.readInt32LE(b);switch(b+=4,_){case 1:C.info=h(g,b);break;case 2:C.common=m(g,b);break;case 3:C.pages=p(g,b,S);break;case 4:C.chars=A(g,b,S);break;case 5:C.kernings=v(g,b,S);break}return 5+S}function h(C,g){var b={};b.size=C.readInt16LE(g);var _=C.readUInt8(g+2);return b.smooth=_>>7&1,b.unicode=_>>6&1,b.italic=_>>5&1,b.bold=_>>4&1,_>>3&1&&(b.fixedHeight=1),b.charset=C.readUInt8(g+3)||"",b.stretchH=C.readUInt16LE(g+4),b.aa=C.readUInt8(g+6),b.padding=[C.readInt8(g+7),C.readInt8(g+8),C.readInt8(g+9),C.readInt8(g+10)],b.spacing=[C.readInt8(g+11),C.readInt8(g+12)],b.outline=C.readUInt8(g+13),b.face=x(C,g+14),b}function m(C,g){var b={};return b.lineHeight=C.readUInt16LE(g),b.base=C.readUInt16LE(g+2),b.scaleW=C.readUInt16LE(g+4),b.scaleH=C.readUInt16LE(g+6),b.pages=C.readUInt16LE(g+8),C.readUInt8(g+10),b.packed=0,b.alphaChnl=C.readUInt8(g+11),b.redChnl=C.readUInt8(g+12),b.greenChnl=C.readUInt8(g+13),b.blueChnl=C.readUInt8(g+14),b}function p(C,g,b){for(var _=[],S=y(C,g),R=S.length+1,P=b/R,O=0;O<P;O++)_[O]=C.slice(g,g+S.length).toString("utf8"),g+=R;return _}function A(C,g,b){for(var _=[],S=b/20,R=0;R<S;R++){var P={},O=R*20;P.id=C.readUInt32LE(g+0+O),P.x=C.readUInt16LE(g+4+O),P.y=C.readUInt16LE(g+6+O),P.width=C.readUInt16LE(g+8+O),P.height=C.readUInt16LE(g+10+O),P.xoffset=C.readInt16LE(g+12+O),P.yoffset=C.readInt16LE(g+14+O),P.xadvance=C.readInt16LE(g+16+O),P.page=C.readUInt8(g+18+O),P.chnl=C.readUInt8(g+19+O),_[R]=P}return _}function v(C,g,b){for(var _=[],S=b/10,R=0;R<S;R++){var P={},O=R*10;P.first=C.readUInt32LE(g+0+O),P.second=C.readUInt32LE(g+4+O),P.amount=C.readInt16LE(g+8+O),_[R]=P}return _}function y(C,g){for(var b=g;b<C.length&&C[b]!==0;b++);return C.slice(g,b)}function x(C,g){return y(C,g).toString("utf8")}},"./node_modules/parse-bmfont-xml/lib/browser.js":(l,d,c)=>{var h=c("./node_modules/parse-bmfont-xml/lib/parse-attribs.js"),m=c("./node_modules/xml-parse-from-string/index.js"),p={scaleh:"scaleH",scalew:"scaleW",stretchh:"stretchH",lineheight:"lineHeight",alphachnl:"alphaChnl",redchnl:"redChnl",greenchnl:"greenChnl",bluechnl:"blueChnl"};l.exports=function(C){C=C.toString();var g=m(C),b={pages:[],chars:[],kernings:[]};["info","common"].forEach(function(L){var N=g.getElementsByTagName(L)[0];N&&(b[L]=h(A(N)))});var _=g.getElementsByTagName("pages")[0];if(!_)throw new Error("malformed file -- no <pages> element");for(var S=_.getElementsByTagName("page"),R=0;R<S.length;R++){var P=S[R],O=parseInt(P.getAttribute("id"),10),D=P.getAttribute("file");if(isNaN(O))throw new Error('malformed file -- page "id" attribute is NaN');if(!D)throw new Error('malformed file -- needs page "file" attribute');b.pages[parseInt(O,10)]=D}return["chars","kernings"].forEach(function(L){var N=g.getElementsByTagName(L)[0];if(N)for(var H=L.substring(0,L.length-1),J=N.getElementsByTagName(H),K=0;K<J.length;K++){var se=J[K];b[L].push(h(A(se)))}}),b};function A(x){var C=v(x);return C.reduce(function(g,b){var _=y(b.nodeName);return g[_]=b.nodeValue,g},{})}function v(x){for(var C=[],g=0;g<x.attributes.length;g++)C.push(x.attributes[g]);return C}function y(x){return p[x.toLowerCase()]||x}},"./node_modules/parse-bmfont-xml/lib/parse-attribs.js":l=>{var d="chasrset";l.exports=function(m){d in m&&(m.charset=m[d],delete m[d]);for(var p in m)p==="face"||p==="charset"||(p==="padding"||p==="spacing"?m[p]=c(m[p]):m[p]=parseInt(m[p],10));return m};function c(h){return h.split(",").map(function(m){return parseInt(m,10)})}},"./node_modules/parse-headers/parse-headers.js":l=>{var d=function(h){return h.replace(/^\s+|\s+$/g,"")},c=function(h){return Object.prototype.toString.call(h)==="[object Array]"};l.exports=function(h){if(!h)return{};for(var m={},p=d(h).split(`
`),A=0;A<p.length;A++){var v=p[A],y=v.indexOf(":"),x=d(v.slice(0,y)).toLowerCase(),C=d(v.slice(y+1));typeof m[x]>"u"?m[x]=C:c(m[x])?m[x].push(C):m[x]=[m[x],C]}return m}},"./node_modules/present/lib/present-browser.js":(l,d,c)=>{var h=c.g.performance||{},m=function(){for(var p=["now","webkitNow","msNow","mozNow","oNow"];p.length;){var A=p.shift();if(A in h)return h[A].bind(h)}var v=Date.now||function(){return new Date().getTime()},y=(h.timing||{}).navigationStart||v();return function(){return v()-y}}();m.performanceNow=h.now,m.noConflict=function(){h.now=m.performanceNow},m.conflict=function(){h.now=m},m.conflict(),l.exports=m},"./node_modules/process/browser.js":l=>{var d=l.exports={},c,h;function m(){throw new Error("setTimeout has not been defined")}function p(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?c=setTimeout:c=m}catch{c=m}try{typeof clearTimeout=="function"?h=clearTimeout:h=p}catch{h=p}})();function A(P){if(c===setTimeout)return setTimeout(P,0);if((c===m||!c)&&setTimeout)return c=setTimeout,setTimeout(P,0);try{return c(P,0)}catch{try{return c.call(null,P,0)}catch{return c.call(this,P,0)}}}function v(P){if(h===clearTimeout)return clearTimeout(P);if((h===p||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(P);try{return h(P)}catch{try{return h.call(null,P)}catch{return h.call(this,P)}}}var y=[],x=!1,C,g=-1;function b(){!x||!C||(x=!1,C.length?y=C.concat(y):g=-1,y.length&&_())}function _(){if(!x){var P=A(b);x=!0;for(var O=y.length;O;){for(C=y,y=[];++g<O;)C&&C[g].run();g=-1,O=y.length}C=null,x=!1,v(P)}}d.nextTick=function(P){var O=new Array(arguments.length-1);if(arguments.length>1)for(var D=1;D<arguments.length;D++)O[D-1]=arguments[D];y.push(new S(P,O)),y.length===1&&!x&&A(_)};function S(P,O){this.fun=P,this.array=O}S.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={};function R(){}d.on=R,d.addListener=R,d.once=R,d.off=R,d.removeListener=R,d.removeAllListeners=R,d.emit=R,d.prependListener=R,d.prependOnceListener=R,d.listeners=function(P){return[]},d.binding=function(P){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(P){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},"./node_modules/promise-polyfill/Promise.js":function(l){(function(d){var c=setTimeout,h=typeof setImmediate=="function"&&setImmediate||function(_){c(_,1)};function m(_,S){return function(){_.apply(S,arguments)}}var p=Array.isArray||function(_){return Object.prototype.toString.call(_)==="[object Array]"};function A(_){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");if(typeof _!="function")throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],b(_,m(y,this),m(x,this))}function v(_){var S=this;if(this._state===null){this._deferreds.push(_);return}h(function(){var R=S._state?_.onFulfilled:_.onRejected;if(R===null){(S._state?_.resolve:_.reject)(S._value);return}var P;try{P=R(S._value)}catch(O){_.reject(O);return}_.resolve(P)})}function y(_){try{if(_===this)throw new TypeError("A promise cannot be resolved with itself.");if(_&&(typeof _=="object"||typeof _=="function")){var S=_.then;if(typeof S=="function"){b(m(S,_),m(y,this),m(x,this));return}}this._state=!0,this._value=_,C.call(this)}catch(R){x.call(this,R)}}function x(_){this._state=!1,this._value=_,C.call(this)}function C(){for(var _=0,S=this._deferreds.length;_<S;_++)v.call(this,this._deferreds[_]);this._deferreds=null}function g(_,S,R,P){this.onFulfilled=typeof _=="function"?_:null,this.onRejected=typeof S=="function"?S:null,this.resolve=R,this.reject=P}function b(_,S,R){var P=!1;try{_(function(O){P||(P=!0,S(O))},function(O){P||(P=!0,R(O))})}catch(O){if(P)return;P=!0,R(O)}}A.prototype.catch=function(_){return this.then(null,_)},A.prototype.then=function(_,S){var R=this;return new A(function(P,O){v.call(R,new g(_,S,P,O))})},A.all=function(){var _=Array.prototype.slice.call(arguments.length===1&&p(arguments[0])?arguments[0]:arguments);return new A(function(S,R){if(_.length===0)return S([]);var P=_.length;function O(L,N){try{if(N&&(typeof N=="object"||typeof N=="function")){var H=N.then;if(typeof H=="function"){H.call(N,function(J){O(L,J)},R);return}}_[L]=N,--P===0&&S(_)}catch(J){R(J)}}for(var D=0;D<_.length;D++)O(D,_[D])})},A.resolve=function(_){return _&&typeof _=="object"&&_.constructor===A?_:new A(function(S){S(_)})},A.reject=function(_){return new A(function(S,R){R(_)})},A.race=function(_){return new A(function(S,R){for(var P=0,O=_.length;P<O;P++)_[P].then(S,R)})},A._setImmediateFn=function(S){h=S},l.exports?l.exports=A:d.Promise||(d.Promise=A)})(this)},"./node_modules/quad-indices/index.js":(l,d,c)=>{var h=c("./node_modules/dtype/index.js"),m=c("./node_modules/an-array/index.js"),p=c("./node_modules/is-buffer/index.js"),A=[0,2,3],v=[2,1,3];l.exports=function(x,C){(!x||!(m(x)||p(x)))&&(C=x||{},x=null),typeof C=="number"?C={count:C}:C=C||{};for(var g=typeof C.type=="string"?C.type:"uint16",b=typeof C.count=="number"?C.count:1,_=C.start||0,S=C.clockwise!==!1?A:v,R=S[0],P=S[1],O=S[2],D=b*6,L=x||new(h(g))(D),N=0,H=0;N<D;N+=6,H+=4){var J=N+_;L[J+0]=H+0,L[J+1]=H+1,L[J+2]=H+2,L[J+3]=H+R,L[J+4]=H+P,L[J+5]=H+O}return L}},"./node_modules/super-animejs/lib/anime.es.js":(l,d,c)=>{c.r(d),c.d(d,{default:()=>Kn});var h={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},m={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},p=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective"],A={CSS:{},springs:{}};function v(be,Ge,et){return Math.min(Math.max(be,Ge),et)}function y(be,Ge){return be.indexOf(Ge)>-1}function x(be,Ge){return be.apply(null,Ge)}var C=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i,g=/^rgb/,b=/^hsl/,_={arr:function(be){return Array.isArray(be)},obj:function(be){return y(Object.prototype.toString.call(be),"Object")},pth:function(be){return _.obj(be)&&be.hasOwnProperty("totalLength")},svg:function(be){return be instanceof SVGElement},inp:function(be){return be instanceof HTMLInputElement},dom:function(be){return be.nodeType||_.svg(be)},str:function(be){return typeof be=="string"},fnc:function(be){return typeof be=="function"},und:function(be){return typeof be>"u"},hex:function(be){return C.test(be)},rgb:function(be){return g.test(be)},hsl:function(be){return b.test(be)},col:function(be){return _.hex(be)||_.rgb(be)||_.hsl(be)},key:function(be){return!h.hasOwnProperty(be)&&!m.hasOwnProperty(be)&&be!=="targets"&&be!=="keyframes"}},S=/\(([^)]+)\)/;function R(be){var Ge=S.exec(be);return Ge?Ge[1].split(",").map(function(et){return parseFloat(et)}):[]}function P(be,Ge){var et=R(be),Et=v(_.und(et[0])?1:et[0],.1,100),vt=v(_.und(et[1])?100:et[1],.1,100),Gt=v(_.und(et[2])?10:et[2],.1,100),zt=v(_.und(et[3])?0:et[3],.1,100),an=Math.sqrt(vt/Et),bn=Gt/(2*Math.sqrt(vt*Et)),Bt=bn<1?an*Math.sqrt(1-bn*bn):0,Vn=1,ti=bn<1?(bn*an+-zt)/Bt:-zt+an;function si(Mn){var ui=Ge?Ge*Mn/1e3:Mn;return bn<1?ui=Math.exp(-ui*bn*an)*(Vn*Math.cos(Bt*ui)+ti*Math.sin(Bt*ui)):ui=(Vn+ti*ui)*Math.exp(-ui*an),Mn===0||Mn===1?Mn:1-ui}function gi(){var Mn=A.springs[be];if(Mn)return Mn;for(var ui=1/6,Ai=0,xi=0;;)if(Ai+=ui,si(Ai)===1){if(xi++,xi>=16)break}else xi=0;var Ir=Ai*ui*1e3;return A.springs[be]=Ir,Ir}return Ge?si:gi}function O(be,Ge){be===void 0&&(be=1),Ge===void 0&&(Ge=.5);var et=v(be,1,10),Et=v(Ge,.1,2);return function(vt){return vt===0||vt===1?vt:-et*Math.pow(2,10*(vt-1))*Math.sin((vt-1-Et/(Math.PI*2)*Math.asin(1/et))*(Math.PI*2)/Et)}}function D(be){return be===void 0&&(be=10),function(Ge){return Math.round(Ge*be)*(1/be)}}var L=function(){var be=11,Ge=1/(be-1);function et(Vn,ti){return 1-3*ti+3*Vn}function Et(Vn,ti){return 3*ti-6*Vn}function vt(Vn){return 3*Vn}function Gt(Vn,ti,si){return((et(ti,si)*Vn+Et(ti,si))*Vn+vt(ti))*Vn}function zt(Vn,ti,si){return 3*et(ti,si)*Vn*Vn+2*Et(ti,si)*Vn+vt(ti)}function an(Vn,ti,si,gi,Mn){var ui,Ai,xi=0;do Ai=ti+(si-ti)/2,ui=Gt(Ai,gi,Mn)-Vn,ui>0?si=Ai:ti=Ai;while(Math.abs(ui)>1e-7&&++xi<10);return Ai}function bn(Vn,ti,si,gi){for(var Mn=0;Mn<4;++Mn){var ui=zt(ti,si,gi);if(ui===0)return ti;var Ai=Gt(ti,si,gi)-Vn;ti-=Ai/ui}return ti}function Bt(Vn,ti,si,gi){if(!(0<=Vn&&Vn<=1&&0<=si&&si<=1))return;var Mn=new Float32Array(be);if(Vn!==ti||si!==gi)for(var ui=0;ui<be;++ui)Mn[ui]=Gt(ui*Ge,Vn,si);function Ai(xi){for(var Ir=0,Sn=1,fi=be-1;Sn!==fi&&Mn[Sn]<=xi;++Sn)Ir+=Ge;--Sn;var qr=(xi-Mn[Sn])/(Mn[Sn+1]-Mn[Sn]),rr=Ir+qr*Ge,q=zt(rr,Vn,si);return q>=.001?bn(xi,rr,Vn,si):q===0?rr:an(xi,Ir,Ir+Ge,Vn,si)}return function(xi){return Vn===ti&&si===gi||xi===0||xi===1?xi:Gt(Ai(xi),ti,gi)}}return Bt}(),N=function(){var be=["Quad","Cubic","Quart","Quint","Sine","Expo","Circ","Back","Elastic"],Ge={In:[[.55,.085,.68,.53],[.55,.055,.675,.19],[.895,.03,.685,.22],[.755,.05,.855,.06],[.47,0,.745,.715],[.95,.05,.795,.035],[.6,.04,.98,.335],[.6,-.28,.735,.045],O],Out:[[.25,.46,.45,.94],[.215,.61,.355,1],[.165,.84,.44,1],[.23,1,.32,1],[.39,.575,.565,1],[.19,1,.22,1],[.075,.82,.165,1],[.175,.885,.32,1.275],function(zt,an){return function(bn){return 1-O(zt,an)(1-bn)}}],InOut:[[.455,.03,.515,.955],[.645,.045,.355,1],[.77,0,.175,1],[.86,0,.07,1],[.445,.05,.55,.95],[1,0,0,1],[.785,.135,.15,.86],[.68,-.55,.265,1.55],function(zt,an){return function(bn){return bn<.5?O(zt,an)(bn*2)/2:1-O(zt,an)(bn*-2+2)/2}}]},et={linear:[.25,.25,.75,.75]};for(var Et in Ge)for(var vt=0,Gt=Ge[Et].length;vt<Gt;vt++)et["ease"+Et+be[vt]]=Ge[Et][vt];return et}();function H(be,Ge){if(_.fnc(be))return be;var et=be.split("(")[0],Et=N[et],vt=R(be);switch(et){case"spring":return P(be,Ge);case"cubicBezier":return x(L,vt);case"steps":return x(D,vt);default:return _.fnc(Et)?x(Et,vt):x(L,Et)}}function J(be){try{var Ge=document.querySelectorAll(be);return Ge}catch{return}}var K=[];function se(be,Ge){for(var et=K,Et=be.length,vt=arguments.length>=2?arguments[1]:void 0,Gt=0;Gt<Et;Gt++)if(Gt in be){var zt=be[Gt];Ge.call(vt,zt,Gt,be)&&et.push(zt)}return K=be,K.length=0,et}function ae(be,Ge){Ge||(Ge=[]);for(var et=0,Et=be.length;et<Et;et++){var vt=be[et];Array.isArray(vt)?ae(vt,Ge):Ge.push(vt)}return Ge}function ee(be){return _.arr(be)?be:(_.str(be)&&(be=J(be)||be),be instanceof NodeList||be instanceof HTMLCollection?[].slice.call(be):[be])}function ne(be,Ge){return be.some(function(et){return et===Ge})}function X(be){var Ge={};for(var et in be)Ge[et]=be[et];return Ge}function W(be,Ge){var et=X(be);for(var Et in be)et[Et]=Ge.hasOwnProperty(Et)?Ge[Et]:be[Et];return et}function ce(be,Ge){var et=X(be);for(var Et in Ge)et[Et]=_.und(be[Et])?Ge[Et]:be[Et];return et}var he=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g;function xe(be){var Ge=he.exec(be);return Ge?"rgba("+Ge[1]+",1)":be}var ve=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Fe=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i;function je(be){var Ge=be.replace(ve,function(zt,an,bn,Bt){return an+an+bn+bn+Bt+Bt}),et=Fe.exec(Ge),Et=parseInt(et[1],16),vt=parseInt(et[2],16),Gt=parseInt(et[3],16);return"rgba("+Et+","+vt+","+Gt+",1)"}var rt=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g,He=/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g;function Ot(be){var Ge=rt.exec(be)||He.exec(be),et=parseInt(Ge[1],10)/360,Et=parseInt(Ge[2],10)/100,vt=parseInt(Ge[3],10)/100,Gt=Ge[4]||1;function zt(si,gi,Mn){return Mn<0&&(Mn+=1),Mn>1&&(Mn-=1),Mn<.16666666666666666?si+(gi-si)*6*Mn:Mn<.5?gi:Mn<.6666666666666666?si+(gi-si)*(.6666666666666666-Mn)*6:si}var an,bn,Bt;if(Et==0)an=bn=Bt=vt;else{var Vn=vt<.5?vt*(1+Et):vt+Et-vt*Et,ti=2*vt-Vn;an=zt(ti,Vn,et+.3333333333333333),bn=zt(ti,Vn,et),Bt=zt(ti,Vn,et-.3333333333333333)}return"rgba("+an*255+","+bn*255+","+Bt*255+","+Gt+")"}function xt(be){if(_.rgb(be))return xe(be);if(_.hex(be))return je(be);if(_.hsl(be))return Ot(be)}var gt=/([\+\-]?[0-9#\.]+)(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/;function It(be){var Ge=gt.exec(be);if(Ge)return Ge[2]}function ct(be){if(y(be,"translate")||be==="perspective")return"px";if(y(be,"rotate")||y(be,"skew"))return"deg"}function ut(be,Ge){return _.fnc(be)?be(Ge.target,Ge.id,Ge.total):be}function Ct(be,Ge){return be.getAttribute(Ge)}function qt(be,Ge,et){var Et=It(Ge);if(ne([et,"deg","rad","turn"],Et))return Ge;var vt=A.CSS[Ge+et];if(!_.und(vt))return vt;var Gt=100,zt=document.createElement(be.tagName),an=be.parentNode&&be.parentNode!==document?be.parentNode:document.body;an.appendChild(zt),zt.style.position="absolute",zt.style.width=Gt+et;var bn=Gt/zt.offsetWidth;an.removeChild(zt);var Bt=bn*parseFloat(Ge);return A.CSS[Ge+et]=Bt,Bt}function Ft(be,Ge,et){if(Ge in be.style){var Et=Ge.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),vt=be.style[Ge]||getComputedStyle(be).getPropertyValue(Et)||"0";return et?qt(be,vt,et):vt}}function un(be,Ge){if(_.dom(be)&&!_.inp(be)&&(Ct(be,Ge)||_.svg(be)&&be[Ge]))return"attribute";if(_.dom(be)&&ne(p,Ge))return"transform";if(_.dom(be)&&Ge!=="transform"&&Ft(be,Ge))return"css";if(be[Ge]!=null)return"object"}var fn=/(\w+)\(([^)]*)\)/g;function An(be){if(_.dom(be)){for(var Ge=be.style.transform||"",et=new Map,Et;Et=fn.exec(Ge);)et.set(Et[1],Et[2]);return et}}function Bn(be,Ge,et,Et){var vt=y(Ge,"scale")?1:0+ct(Ge),Gt=An(be).get(Ge)||vt;return et&&(et.transforms.list.set(Ge,Gt),et.transforms.last=Ge),Et?qt(be,Gt,Et):Gt}function ci(be,Ge,et,Et){switch(un(be,Ge)){case"transform":return Bn(be,Ge,Et,et);case"css":return Ft(be,Ge,et);case"attribute":return Ct(be,Ge);default:return be[Ge]||0}}var ze=/^(\*=|\+=|-=)/;function Pe(be,Ge){var et=ze.exec(be);if(!et)return be;var Et=It(be)||0,vt=parseFloat(Ge),Gt=parseFloat(be.replace(et[0],""));switch(et[0][0]){case"+":return vt+Gt+Et;case"-":return vt-Gt+Et;case"*":return vt*Gt+Et}}var qe=/\s/g;function ye(be,Ge){if(_.col(be))return xt(be);var et=It(be),Et=et?be.substr(0,be.length-et.length):be;return Ge&&!qe.test(be)?Et+Ge:Et}function me(be,Ge){return Math.sqrt(Math.pow(Ge.x-be.x,2)+Math.pow(Ge.y-be.y,2))}function Re(be){return Math.PI*2*Ct(be,"r")}function Se(be){return Ct(be,"width")*2+Ct(be,"height")*2}function Be(be){return me({x:Ct(be,"x1"),y:Ct(be,"y1")},{x:Ct(be,"x2"),y:Ct(be,"y2")})}function Ee(be){for(var Ge=be.points,et=0,Et,vt=0;vt<Ge.numberOfItems;vt++){var Gt=Ge.getItem(vt);vt>0&&(et+=me(Et,Gt)),Et=Gt}return et}function Xe(be){var Ge=be.points;return Ee(be)+me(Ge.getItem(Ge.numberOfItems-1),Ge.getItem(0))}function fe(be){if(be.getTotalLength)return be.getTotalLength();switch(be.tagName.toLowerCase()){case"circle":return Re(be);case"rect":return Se(be);case"line":return Be(be);case"polyline":return Ee(be);case"polygon":return Xe(be)}}function Oe(be){var Ge=fe(be);return be.setAttribute("stroke-dasharray",Ge),Ge}function $e(be){for(var Ge=be.parentNode;_.svg(Ge)&&(Ge=Ge.parentNode,!!_.svg(Ge.parentNode)););return Ge}function le(be,Ge){var et=Ge||{},Et=et.el||$e(be),vt=Et.getBoundingClientRect(),Gt=Ct(Et,"viewBox"),zt=vt.width,an=vt.height,bn=et.viewBox||(Gt?Gt.split(" "):[0,0,zt,an]);return{el:Et,viewBox:bn,x:bn[0]/1,y:bn[1]/1,w:zt/bn[2],h:an/bn[3]}}function Q(be,Ge){var et=_.str(be)?J(be)[0]:be,Et=Ge||100;return function(vt){return{property:vt,el:et,svg:le(et),totalLength:fe(et)*(Et/100)}}}function Z(be,Ge){function et(an){an===void 0&&(an=0);var bn=Ge+an>=1?Ge+an:0;return be.el.getPointAtLength(bn)}var Et=le(be.el,be.svg),vt=et(),Gt=et(-1),zt=et(1);switch(be.property){case"x":return(vt.x-Et.x)*Et.w;case"y":return(vt.y-Et.y)*Et.h;case"angle":return Math.atan2(zt.y-Gt.y,zt.x-Gt.x)*180/Math.PI}}var Ie=/-?\d*\.?\d+/g;function Ae(be,Ge){var et=ye(_.pth(be)?be.totalLength:be,Ge)+"";return{original:et,numbers:et.match(Ie)?et.match(Ie).map(Number):[0],strings:_.str(be)||Ge?et.split(Ie):[]}}function Te(be){var Ge=be?ae(_.arr(be)?be.map(ee):ee(be)):[];return se(Ge,function(et,Et,vt){return vt.indexOf(et)===Et})}function Ve(be){var Ge=Te(be);return Ge.map(function(et,Et){return{target:et,id:Et,total:Ge.length,transforms:{list:An(et)}}})}var Tt=/^spring/;function Ht(be,Ge){var et=X(Ge);if(Tt.test(et.easing)&&(et.duration=P(et.easing)),_.arr(be)){var Et=be.length,vt=Et===2&&!_.obj(be[0]);vt?be={value:be}:_.fnc(Ge.duration)||(et.duration=Ge.duration/Et)}var Gt=_.arr(be)?be:[be];return Gt.map(function(zt,an){var bn=_.obj(zt)&&!_.pth(zt)?zt:{value:zt};return _.und(bn.delay)&&(bn.delay=an?0:Ge.delay),_.und(bn.endDelay)&&(bn.endDelay=an===Gt.length-1?Ge.endDelay:0),bn}).map(function(zt){return ce(zt,et)})}function nn(be){for(var Ge=se(ae(be.map(function(Gt){return Object.keys(Gt)})),function(Gt){return _.key(Gt)}).reduce(function(Gt,zt){return Gt.indexOf(zt)<0&&Gt.push(zt),Gt},[]),et={},Et=function(Gt){var zt=Ge[Gt];et[zt]=be.map(function(an){var bn={};for(var Bt in an)_.key(Bt)?Bt==zt&&(bn.value=an[Bt]):bn[Bt]=an[Bt];return bn})},vt=0;vt<Ge.length;vt++)Et(vt);return et}function cn(be,Ge){var et=[],Et=Ge.keyframes;Et&&(Ge=ce(nn(Et),Ge));for(var vt in Ge)_.key(vt)&&et.push({name:vt,tweens:Ht(Ge[vt],be)});return et}function Xn(be,Ge){var et={};for(var Et in be){var vt=ut(be[Et],Ge);_.arr(vt)&&(vt=vt.map(function(Gt){return ut(Gt,Ge)}),vt.length===1&&(vt=vt[0])),et[Et]=vt}return et.duration=parseFloat(et.duration),et.delay=parseFloat(et.delay),et}function cr(be,Ge){var et;return be.tweens.map(function(Et){var vt=Xn(Et,Ge),Gt=vt.value,zt=_.arr(Gt)?Gt[1]:Gt,an=It(zt),bn=ci(Ge.target,be.name,an,Ge),Bt=et?et.to.original:bn,Vn=_.arr(Gt)?Gt[0]:Bt,ti=It(Vn)||It(bn),si=an||ti;return _.und(zt)&&(zt=Bt),vt.from=Ae(Vn,si),vt.to=Ae(Pe(zt,Vn),si),vt.start=et?et.end:0,vt.end=vt.start+vt.delay+vt.duration+vt.endDelay,vt.easing=H(vt.easing,vt.duration),vt.isPath=_.pth(Gt),vt.isColor=_.col(vt.from.original),vt.isColor&&(vt.round=1),et=vt,vt})}var Ni={css:function(be,Ge,et){return be.style[Ge]=et},attribute:function(be,Ge,et){return be.setAttribute(Ge,et)},object:function(be,Ge,et){return be[Ge]=et},transform:function(be,Ge,et,Et,vt){if(Et.list.set(Ge,et),Ge===Et.last||vt){var Gt="";Et.list.forEach(function(zt,an){Gt+=an+"("+zt+") "}),be.style.transform=Gt}}};function or(be,Ge){for(var et=Ve(be),Et=0,vt=et.length;Et<vt;Et++){var Gt=et[Et];for(var zt in Ge){var an=ut(Ge[zt],Gt),bn=Gt.target,Bt=It(an),Vn=ci(bn,zt,Bt,Gt),ti=Bt||It(Vn),si=Pe(ye(an,ti),Vn),gi=un(bn,zt);Ni[gi](bn,zt,si,Gt.transforms,!0)}}}function bi(be,Ge){var et=un(be.target,Ge.name);if(et){var Et=cr(Ge,be),vt=Et[Et.length-1];return{type:et,property:Ge.name,animatable:be,tweens:Et,duration:vt.end,delay:Et[0].delay,endDelay:vt.endDelay}}}function vn(be,Ge){return se(ae(be.map(function(et){return Ge.map(function(Et){return bi(et,Et)})})),function(et){return!_.und(et)})}function Nt(be,Ge){var et=be.length,Et=function(Gt){return Gt.timelineOffset?Gt.timelineOffset:0},vt={};return vt.duration=et?Math.max.apply(Math,be.map(function(Gt){return Et(Gt)+Gt.duration})):Ge.duration,vt.delay=et?Math.min.apply(Math,be.map(function(Gt){return Et(Gt)+Gt.delay})):Ge.delay,vt.endDelay=et?vt.duration-Math.max.apply(Math,be.map(function(Gt){return Et(Gt)+Gt.duration-Gt.endDelay})):Ge.endDelay,vt}var ln=0;function ei(be){var Ge=W(h,be),et=W(m,be),Et=cn(et,be),vt=Ve(be.targets),Gt=vn(vt,Et),zt=Nt(Gt,et),an=ln;return ln++,ce(Ge,{id:an,children:[],animatables:vt,animations:Gt,duration:zt.duration,delay:zt.delay,endDelay:zt.endDelay})}var yn=[],De=[],st,At=function(){function be(){st=requestAnimationFrame(Ge)}function Ge(et){var Et=yn.length;if(Et){for(var vt=0;vt<Et;){var Gt=yn[vt];if(!Gt.paused)Gt.tick(et);else{var zt=yn.indexOf(Gt);zt>-1&&(yn.splice(zt,1),Et=yn.length)}vt++}be()}else st=cancelAnimationFrame(st)}return be}();function ot(){if(document.hidden){for(var be=0,Ge=yn.length;be<Ge;be++)activeInstance[be].pause();De=yn.slice(0),yn=[]}else for(var et=0,Et=De.length;et<Et;et++)De[et].play()}document.addEventListener("visibilitychange",ot);function wt(be){be===void 0&&(be={});var Ge=0,et=0,Et=0,vt,Gt=0,zt=null;function an(){return window.Promise&&new Promise(function(Sn){return zt=Sn})}var bn=an(),Bt=ei(be);function Vn(){Bt.reversed=!Bt.reversed;for(var Sn=0,fi=vt.length;Sn<fi;Sn++)vt[Sn].reversed=Bt.reversed}function ti(Sn){return Bt.reversed?Bt.duration-Sn:Sn}function si(){Ge=0,et=ti(Bt.currentTime)*(1/wt.speed)}function gi(Sn,fi){fi&&fi.seek(Sn-fi.timelineOffset)}function Mn(Sn){if(Bt.reversePlayback)for(var qr=Gt;qr--;)gi(Sn,vt[qr]);else for(var fi=0;fi<Gt;fi++)gi(Sn,vt[fi])}function ui(Sn){for(var fi=0,qr=Bt.animations,rr=qr.length;fi<rr;){var q=qr[fi],oe=q.animatable,pe=q.tweens,_e=pe.length-1,Ne=pe[_e];_e&&(Ne=se(pe,function(Ri){return Sn<Ri.end})[0]||Ne);for(var nt=v(Sn-Ne.start-Ne.delay,0,Ne.duration)/Ne.duration,at=isNaN(nt)?1:Ne.easing(nt),Kt=Ne.to.strings,Wt=Ne.round,pt=[],Rt=Ne.to.numbers.length,sn=void 0,Dn=0;Dn<Rt;Dn++){var Yn=void 0,hi=Ne.to.numbers[Dn],Di=Ne.from.numbers[Dn]||0;Ne.isPath?Yn=Z(Ne.value,at*hi):Yn=Di+at*(hi-Di),Wt&&(Ne.isColor&&Dn>2||(Yn=Math.round(Yn*Wt)/Wt)),pt.push(Yn)}var Pi=Kt.length;if(!Pi)sn=pt[0];else{sn=Kt[0];for(var Ei=0;Ei<Pi;Ei++){Kt[Ei];var oi=Kt[Ei+1],ar=pt[Ei];isNaN(ar)||(oi?sn+=ar+oi:sn+=ar+" ")}}Ni[q.type](oe.target,q.property,sn,oe.transforms),q.currentValue=sn,fi++}}function Ai(Sn){Bt[Sn]&&!Bt.passThrough&&Bt[Sn](Bt)}function xi(){Bt.remaining&&Bt.remaining!==!0&&Bt.remaining--}function Ir(Sn){var fi=Bt.duration,qr=Bt.delay,rr=fi-Bt.endDelay,q=ti(Sn);Bt.progress=v(q/fi*100,0,100),Bt.reversePlayback=q<Bt.currentTime,vt&&Mn(q),!Bt.began&&Bt.currentTime>0&&(Bt.began=!0,Ai("begin"),Ai("loopBegin")),q<=qr&&Bt.currentTime!==0&&ui(0),(q>=rr&&Bt.currentTime!==fi||!fi)&&ui(fi),q>qr&&q<rr?(Bt.changeBegan||(Bt.changeBegan=!0,Bt.changeCompleted=!1,Ai("changeBegin")),Ai("change"),ui(q)):Bt.changeBegan&&(Bt.changeCompleted=!0,Bt.changeBegan=!1,Ai("changeComplete")),Bt.currentTime=v(q,0,fi),Bt.began&&Ai("update"),Sn>=fi&&(et=0,xi(),Bt.remaining?(Ge=Et,Ai("loopComplete"),Ai("loopBegin"),Bt.direction==="alternate"&&Vn()):(Bt.paused=!0,Bt.completed||(Bt.completed=!0,Ai("loopComplete"),Ai("complete"),"Promise"in window&&(zt(),bn=an()))))}return Bt.reset=function(){var Sn=Bt.direction;Bt.passThrough=!1,Bt.currentTime=0,Bt.progress=0,Bt.paused=!0,Bt.began=!1,Bt.changeBegan=!1,Bt.completed=!1,Bt.changeCompleted=!1,Bt.reversePlayback=!1,Bt.reversed=Sn==="reverse",Bt.remaining=Bt.loop,vt=Bt.children,Gt=vt.length;for(var fi=Gt;fi--;)Bt.children[fi].reset();(Bt.reversed&&Bt.loop!==!0||Sn==="alternate"&&Bt.loop===1)&&Bt.remaining++,ui(0)},Bt.set=function(Sn,fi){return or(Sn,fi),Bt},Bt.tick=function(Sn){Et=Sn,Ge||(Ge=Et),Ir((Et+(et-Ge))*wt.speed)},Bt.seek=function(Sn){Ir(ti(Sn))},Bt.pause=function(){Bt.paused=!0,si()},Bt.play=function(){Bt.paused&&(Bt.paused=!1,yn.push(Bt),si(),st||At())},Bt.reverse=function(){Vn(),si()},Bt.restart=function(){Bt.reset(),Bt.play()},Bt.finished=bn,Bt.reset(),Bt.autoplay&&Bt.play(),Bt}function xn(be,Ge){for(var et=Ge.length;et--;)ne(be,Ge[et].animatable.target)&&Ge.splice(et,1)}function Nn(be){for(var Ge=Te(be),et=yn.length;et--;){var Et=yn[et],vt=Et.animations,Gt=Et.children;xn(Ge,vt);for(var zt=Gt.length;zt--;){var an=Gt[zt],bn=an.animations;xn(Ge,bn),!bn.length&&!an.children.length&&Gt.splice(zt,1)}!vt.length&&!Gt.length&&Et.pause()}}function pn(be,Ge){Ge===void 0&&(Ge={});var et=Ge.direction||"normal",Et=Ge.easing?H(Ge.easing):null,vt=Ge.grid,Gt=Ge.axis,zt=Ge.from||0,an=zt==="first",bn=zt==="center",Bt=zt==="last",Vn=_.arr(be),ti=parseFloat(Vn?be[0]:be),si=Vn?parseFloat(be[1]):0,gi=It(Vn?be[1]:be)||0,Mn=Ge.start||0+(Vn?ti:0),ui=[],Ai=0;return function(xi,Ir,Sn){if(an&&(zt=0),bn&&(zt=(Sn-1)/2),Bt&&(zt=Sn-1),!ui.length){for(var fi=0;fi<Sn;fi++){if(!vt)ui.push(Math.abs(zt-fi));else{var qr=bn?(vt[0]-1)/2:zt%vt[0],rr=bn?(vt[1]-1)/2:Math.floor(zt/vt[0]),q=fi%vt[0],oe=Math.floor(fi/vt[0]),pe=qr-q,_e=rr-oe,Ne=Math.sqrt(pe*pe+_e*_e);Gt==="x"&&(Ne=-pe),Gt==="y"&&(Ne=-_e),ui.push(Ne)}Ai=Math.max.apply(Math,ui)}Et&&(ui=ui.map(function(at){return Et(at/Ai)*Ai})),et==="reverse"&&(ui=ui.map(function(at){return Gt?at<0?at*-1:-at:Math.abs(Ai-at)}))}var nt=Vn?(si-ti)/Ai:ti;return Mn+nt*(Math.round(ui[Ir]*100)/100)+gi}}function Un(be){be===void 0&&(be={});var Ge=wt(be);return Ge.duration=0,Ge.add=function(et,Et){var vt=yn.indexOf(Ge),Gt=Ge.children;vt>-1&&yn.splice(vt,1);function zt(si){si.passThrough=!0}for(var an=0;an<Gt.length;an++)zt(Gt[an]);var bn=ce(et,W(m,be));bn.targets=bn.targets||be.targets;var Bt=Ge.duration;bn.autoplay=!1,bn.direction=Ge.direction,bn.timelineOffset=_.und(Et)?Bt:Pe(Et,Bt),zt(Ge),Ge.seek(bn.timelineOffset);var Vn=wt(bn);zt(Vn),Gt.push(Vn);var ti=Nt(Gt,be);return Ge.delay=ti.delay,Ge.endDelay=ti.endDelay,Ge.duration=ti.duration,Ge.seek(0),Ge.reset(),Ge.autoplay&&Ge.play(),Ge},Ge}wt.version="3.0.0",wt.speed=1,wt.running=yn,wt.remove=Nn,wt.get=ci,wt.set=or,wt.convertPx=qt,wt.path=Q,wt.setDashoffset=Oe,wt.stagger=pn,wt.timeline=Un,wt.easing=H,wt.penner=N,wt.random=function(be,Ge){return Math.floor(Math.random()*(Ge-be+1))+be};const Kn=wt},"./node_modules/three-bmfont-text/index.js":(l,d,c)=>{var h=c("./node_modules/layout-bmfont-text/index.js");c("./node_modules/inherits/inherits_browser.js");var m=c("./node_modules/quad-indices/index.js"),p=c("./node_modules/three-buffer-vertex-data/index.js"),A=c("./node_modules/object-assign/index.js"),v=c("./node_modules/three-bmfont-text/lib/vertices.js"),y=c("./node_modules/three-bmfont-text/lib/utils.js");l.exports=function(g){return new x(g)};class x extends THREE.BufferGeometry{constructor(g){super(),typeof g=="string"&&(g={text:g}),this._opt=A({},g),g&&this.update(g)}update(g){if(typeof g=="string"&&(g={text:g}),g=A({},this._opt,g),!g.font)throw new TypeError("must specify a { font } in options");this.layout=h(g);var b=g.flipY!==!1,_=g.font,S=_.common.scaleW,R=_.common.scaleH,P=this.layout.glyphs.filter(function(H){var J=H.data;return J.width*J.height>0});this.visibleGlyphs=P;var O=v.positions(P),D=v.uvs(P,S,R,b),L=m({clockwise:!0,type:"uint16",count:P.length});if(p.index(this,L,1,"uint16"),p.attr(this,"position",O,2),p.attr(this,"uv",D,2),!g.multipage&&"page"in this.attributes)this.removeAttribute("page");else if(g.multipage){var N=v.pages(P);p.attr(this,"page",N,1)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new THREE.Sphere);var g=this.attributes.position.array,b=this.attributes.position.itemSize;if(!g||!b||g.length<2){this.boundingSphere.radius=0,this.boundingSphere.center.set(0,0,0);return}y.computeSphere(g,this.boundingSphere),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.')}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new THREE.Box3);var g=this.boundingBox,b=this.attributes.position.array,_=this.attributes.position.itemSize;if(!b||!_||b.length<2){g.makeEmpty();return}y.computeBox(b,g)}}},"./node_modules/three-bmfont-text/lib/utils.js":l=>{var d=2,c={min:[0,0],max:[0,0]};function h(m){var p=m.length/d;c.min[0]=m[0],c.min[1]=m[1],c.max[0]=m[0],c.max[1]=m[1];for(var A=0;A<p;A++){var v=m[A*d+0],y=m[A*d+1];c.min[0]=Math.min(v,c.min[0]),c.min[1]=Math.min(y,c.min[1]),c.max[0]=Math.max(v,c.max[0]),c.max[1]=Math.max(y,c.max[1])}}l.exports.computeBox=function(m,p){h(m),p.min.set(c.min[0],c.min[1],0),p.max.set(c.max[0],c.max[1],0)},l.exports.computeSphere=function(m,p){h(m);var A=c.min[0],v=c.min[1],y=c.max[0],x=c.max[1],C=y-A,g=x-v,b=Math.sqrt(C*C+g*g);p.center.set(A+C/2,v+g/2,0),p.radius=b/2}},"./node_modules/three-bmfont-text/lib/vertices.js":l=>{l.exports.pages=function(c){var h=new Float32Array(c.length*4*1),m=0;return c.forEach(function(p){var A=p.data.page||0;h[m++]=A,h[m++]=A,h[m++]=A,h[m++]=A}),h},l.exports.uvs=function(c,h,m,p){var A=new Float32Array(c.length*4*2),v=0;return c.forEach(function(y){var x=y.data,C=x.x+x.width,g=x.y+x.height,b=x.x/h,_=x.y/m,S=C/h,R=g/m;p&&(_=(m-x.y)/m,R=(m-g)/m),A[v++]=b,A[v++]=_,A[v++]=b,A[v++]=R,A[v++]=S,A[v++]=R,A[v++]=S,A[v++]=_}),A},l.exports.positions=function(c){var h=new Float32Array(c.length*4*2),m=0;return c.forEach(function(p){var A=p.data,v=p.position[0]+A.xoffset,y=p.position[1]+A.yoffset,x=A.width,C=A.height;h[m++]=v,h[m++]=y,h[m++]=v,h[m++]=y+C,h[m++]=v+x,h[m++]=y+C,h[m++]=v+x,h[m++]=y}),h}},"./node_modules/three-buffer-vertex-data/index.js":(l,d,c)=>{var h=c("./node_modules/flatten-vertex-data/index.js");l.exports.attr=p,l.exports.index=m;function m(v,y,x,C){typeof x!="number"&&(x=1),typeof C!="string"&&(C="uint16");var g=!v.index&&typeof v.setIndex!="function",b=g?v.getAttribute("index"):v.index,_=A(b,y,x,C);_&&(g?v.addAttribute("index",_):v.index=_)}function p(v,y,x,C,g){if(typeof C!="number"&&(C=3),typeof g!="string"&&(g="float32"),Array.isArray(x)&&Array.isArray(x[0])&&x[0].length!==C)throw new Error("Nested vertex array has unexpected size; expected "+C+" but found "+x[0].length);var b=v.getAttribute(y),_=A(b,x,C,g);v.setAttribute(y,_)}function A(v,y,x,C){return y=y||[],y=h(y,C),v=new THREE.BufferAttribute(y,x),v.itemSize=x,v.needsUpdate=!0,v}},"./node_modules/webvr-polyfill/build/webvr-polyfill.js":function(l,d,c){/**
 * @license
 * webvr-polyfill
 * Copyright (c) 2015-2017 Google
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * cardboard-vr-display
 * Copyright (c) 2015-2017 Google
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * webvr-polyfill-dpdb 
 * Copyright (c) 2017 Google
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * wglu-preserve-state
 * Copyright (c) 2016, Brandon Jones.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *//**
 * @license
 * nosleep.js
 * Copyright (c) 2017, Rich Tibbett
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */(function(h,m){l.exports=m()})(this,function(){var h=typeof window<"u"?window:typeof c.g<"u"?c.g:typeof self<"u"?self:{};function m(O){return O&&O.__esModule&&Object.prototype.hasOwnProperty.call(O,"default")?O.default:O}function p(O,D){return D={exports:{}},O(D,D.exports),D.exports}var A=function(){return/Android/i.test(navigator.userAgent)||/iPhone|iPad|iPod/i.test(navigator.userAgent)},v=function(D,L){for(var N=0,H=D.length;N<H;N++)L[N]=D[N]},y=function(D,L){for(var N in L)L.hasOwnProperty(N)&&(D[N]=L[N]);return D},x=p(function(O,D){/**
 * @license
 * cardboard-vr-display
 * Copyright (c) 2015-2017 Google
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * gl-preserve-state
 * Copyright (c) 2016, Brandon Jones.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *//**
 * @license
 * webvr-polyfill-dpdb
 * Copyright (c) 2015-2017 Google
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * nosleep.js
 * Copyright (c) 2017, Rich Tibbett
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */(function(L,N){O.exports=N()})(h,function(){var L=function(q,oe){if(!(q instanceof oe))throw new TypeError("Cannot call a class as a function")},N=function(){function q(oe,pe){for(var _e=0;_e<pe.length;_e++){var Ne=pe[_e];Ne.enumerable=Ne.enumerable||!1,Ne.configurable=!0,"value"in Ne&&(Ne.writable=!0),Object.defineProperty(oe,Ne.key,Ne)}}return function(oe,pe,_e){return pe&&q(oe.prototype,pe),_e&&q(oe,_e),oe}}(),H=function(){function q(oe,pe){var _e=[],Ne=!0,nt=!1,at=void 0;try{for(var Kt=oe[Symbol.iterator](),Wt;!(Ne=(Wt=Kt.next()).done)&&(_e.push(Wt.value),!(pe&&_e.length===pe));Ne=!0);}catch(pt){nt=!0,at=pt}finally{try{!Ne&&Kt.return&&Kt.return()}finally{if(nt)throw at}}return _e}return function(oe,pe){if(Array.isArray(oe))return oe;if(Symbol.iterator in Object(oe))return q(oe,pe);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),J=.001,K=1,se=function(oe,pe){return"data:"+oe+","+encodeURIComponent(pe)},ae=function(oe,pe,_e){return oe+(pe-oe)*_e},ee=function(){var q=/iPad|iPhone|iPod/.test(navigator.platform);return function(){return q}}(),ne=function(){var q=navigator.userAgent.indexOf("Version")!==-1&&navigator.userAgent.indexOf("Android")!==-1&&navigator.userAgent.indexOf("Chrome")!==-1;return function(){return q}}(),X=function(){var q=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);return function(){return q}}(),W=function(){var q=navigator.userAgent.indexOf("Firefox")!==-1&&navigator.userAgent.indexOf("Android")!==-1;return function(){return q}}(),ce=function(){var q=navigator.userAgent.match(/.*Chrome\/([0-9]+)/),oe=q?parseInt(q[1],10):null;return function(){return oe}}(),he=function(){var q=!1;return q=ee()&&X()&&navigator.userAgent.indexOf("13_4")!==-1,function(){return q}}(),xe=function(){var q=!1;if(ce()===65){var oe=navigator.userAgent.match(/.*Chrome\/([0-9\.]*)/);if(oe){var pe=oe[1].split("."),_e=H(pe,4);_e[0],_e[1];var Ne=_e[2],nt=_e[3];q=parseInt(Ne,10)===3325&&parseInt(nt,10)<148}}return function(){return q}}(),ve=function(){var q=navigator.userAgent.indexOf("R7 Build")!==-1;return function(){return q}}(),Fe=function(){var oe=window.orientation==90||window.orientation==-90;return ve()?!oe:oe},je=function(oe){return!(isNaN(oe)||oe<=J||oe>K)},rt=function(){return Math.max(window.screen.width,window.screen.height)*window.devicePixelRatio},He=function(){return Math.min(window.screen.width,window.screen.height)*window.devicePixelRatio},Ot=function(oe){if(ne())return!1;if(oe.requestFullscreen)oe.requestFullscreen();else if(oe.webkitRequestFullscreen)oe.webkitRequestFullscreen();else if(oe.mozRequestFullScreen)oe.mozRequestFullScreen();else if(oe.msRequestFullscreen)oe.msRequestFullscreen();else return!1;return!0},xt=function(){if(document.exitFullscreen)document.exitFullscreen();else if(document.webkitExitFullscreen)document.webkitExitFullscreen();else if(document.mozCancelFullScreen)document.mozCancelFullScreen();else if(document.msExitFullscreen)document.msExitFullscreen();else return!1;return!0},gt=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},It=function(oe,pe,_e,Ne){var nt=oe.createShader(oe.VERTEX_SHADER);oe.shaderSource(nt,pe),oe.compileShader(nt);var at=oe.createShader(oe.FRAGMENT_SHADER);oe.shaderSource(at,_e),oe.compileShader(at);var Kt=oe.createProgram();oe.attachShader(Kt,nt),oe.attachShader(Kt,at);for(var Wt in Ne)oe.bindAttribLocation(Kt,Ne[Wt],Wt);return oe.linkProgram(Kt),oe.deleteShader(nt),oe.deleteShader(at),Kt},ct=function(oe,pe){for(var _e={},Ne=oe.getProgramParameter(pe,oe.ACTIVE_UNIFORMS),nt="",at=0;at<Ne;at++){var Kt=oe.getActiveUniform(pe,at);nt=Kt.name.replace("[0]",""),_e[nt]=oe.getUniformLocation(pe,nt)}return _e},ut=function(oe,pe,_e,Ne,nt,at,Kt){var Wt=1/(pe-_e),pt=1/(Ne-nt),Rt=1/(at-Kt);return oe[0]=-2*Wt,oe[1]=0,oe[2]=0,oe[3]=0,oe[4]=0,oe[5]=-2*pt,oe[6]=0,oe[7]=0,oe[8]=0,oe[9]=0,oe[10]=2*Rt,oe[11]=0,oe[12]=(pe+_e)*Wt,oe[13]=(nt+Ne)*pt,oe[14]=(Kt+at)*Rt,oe[15]=1,oe},Ct=function(){var oe=!1;return function(pe){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(pe)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(pe.substr(0,4)))&&(oe=!0)}(navigator.userAgent||navigator.vendor||window.opera),oe},qt=function(oe,pe){for(var _e in pe)pe.hasOwnProperty(_e)&&(oe[_e]=pe[_e]);return oe},Ft=function(oe){if(ee()){var pe=oe.style.width,_e=oe.style.height;oe.style.width=parseInt(pe)+1+"px",oe.style.height=parseInt(_e)+"px",setTimeout(function(){oe.style.width=pe,oe.style.height=_e},100)}window.canvas=oe},un=function(){var q=Math.PI/180,oe=Math.PI*.25;function pe(pt,Rt,sn,Dn){var Yn=Math.tan(Rt?Rt.upDegrees*q:oe),hi=Math.tan(Rt?Rt.downDegrees*q:oe),Di=Math.tan(Rt?Rt.leftDegrees*q:oe),Pi=Math.tan(Rt?Rt.rightDegrees*q:oe),Ei=2/(Di+Pi),oi=2/(Yn+hi);return pt[0]=Ei,pt[1]=0,pt[2]=0,pt[3]=0,pt[4]=0,pt[5]=oi,pt[6]=0,pt[7]=0,pt[8]=-((Di-Pi)*Ei*.5),pt[9]=(Yn-hi)*oi*.5,pt[10]=Dn/(sn-Dn),pt[11]=-1,pt[12]=0,pt[13]=0,pt[14]=Dn*sn/(sn-Dn),pt[15]=0,pt}function _e(pt,Rt,sn){var Dn=Rt[0],Yn=Rt[1],hi=Rt[2],Di=Rt[3],Pi=Dn+Dn,Ei=Yn+Yn,oi=hi+hi,ar=Dn*Pi,Ri=Dn*Ei,Ur=Dn*oi,vs=Yn*Ei,is=Yn*oi,ur=hi*oi,Fs=Di*Pi,Wr=Di*Ei,Ns=Di*oi;return pt[0]=1-(vs+ur),pt[1]=Ri+Ns,pt[2]=Ur-Wr,pt[3]=0,pt[4]=Ri-Ns,pt[5]=1-(ar+ur),pt[6]=is+Fs,pt[7]=0,pt[8]=Ur+Wr,pt[9]=is-Fs,pt[10]=1-(ar+vs),pt[11]=0,pt[12]=sn[0],pt[13]=sn[1],pt[14]=sn[2],pt[15]=1,pt}function Ne(pt,Rt,sn){var Dn=sn[0],Yn=sn[1],hi=sn[2],Di,Pi,Ei,oi,ar,Ri,Ur,vs,is,ur,Fs,Wr;return Rt===pt?(pt[12]=Rt[0]*Dn+Rt[4]*Yn+Rt[8]*hi+Rt[12],pt[13]=Rt[1]*Dn+Rt[5]*Yn+Rt[9]*hi+Rt[13],pt[14]=Rt[2]*Dn+Rt[6]*Yn+Rt[10]*hi+Rt[14],pt[15]=Rt[3]*Dn+Rt[7]*Yn+Rt[11]*hi+Rt[15]):(Di=Rt[0],Pi=Rt[1],Ei=Rt[2],oi=Rt[3],ar=Rt[4],Ri=Rt[5],Ur=Rt[6],vs=Rt[7],is=Rt[8],ur=Rt[9],Fs=Rt[10],Wr=Rt[11],pt[0]=Di,pt[1]=Pi,pt[2]=Ei,pt[3]=oi,pt[4]=ar,pt[5]=Ri,pt[6]=Ur,pt[7]=vs,pt[8]=is,pt[9]=ur,pt[10]=Fs,pt[11]=Wr,pt[12]=Di*Dn+ar*Yn+is*hi+Rt[12],pt[13]=Pi*Dn+Ri*Yn+ur*hi+Rt[13],pt[14]=Ei*Dn+Ur*Yn+Fs*hi+Rt[14],pt[15]=oi*Dn+vs*Yn+Wr*hi+Rt[15]),pt}function nt(pt,Rt){var sn=Rt[0],Dn=Rt[1],Yn=Rt[2],hi=Rt[3],Di=Rt[4],Pi=Rt[5],Ei=Rt[6],oi=Rt[7],ar=Rt[8],Ri=Rt[9],Ur=Rt[10],vs=Rt[11],is=Rt[12],ur=Rt[13],Fs=Rt[14],Wr=Rt[15],Ns=sn*Pi-Dn*Di,Ul=sn*Ei-Yn*Di,Fo=sn*oi-hi*Di,js=Dn*Ei-Yn*Pi,zl=Dn*oi-hi*Pi,Gl=Yn*oi-hi*Ei,Xs=ar*ur-Ri*is,ao=ar*Fs-Ur*is,Ca=ar*Wr-vs*is,qa=Ri*Fs-Ur*ur,yl=Ri*Wr-vs*ur,Hl=Ur*Wr-vs*Fs,vr=Ns*Hl-Ul*yl+Fo*qa+js*Ca-zl*ao+Gl*Xs;return vr?(vr=1/vr,pt[0]=(Pi*Hl-Ei*yl+oi*qa)*vr,pt[1]=(Yn*yl-Dn*Hl-hi*qa)*vr,pt[2]=(ur*Gl-Fs*zl+Wr*js)*vr,pt[3]=(Ur*zl-Ri*Gl-vs*js)*vr,pt[4]=(Ei*Ca-Di*Hl-oi*ao)*vr,pt[5]=(sn*Hl-Yn*Ca+hi*ao)*vr,pt[6]=(Fs*Fo-is*Gl-Wr*Ul)*vr,pt[7]=(ar*Gl-Ur*Fo+vs*Ul)*vr,pt[8]=(Di*yl-Pi*Ca+oi*Xs)*vr,pt[9]=(Dn*Ca-sn*yl-hi*Xs)*vr,pt[10]=(is*zl-ur*Fo+Wr*Ns)*vr,pt[11]=(Ri*Fo-ar*zl-vs*Ns)*vr,pt[12]=(Pi*ao-Di*qa-Ei*Xs)*vr,pt[13]=(sn*qa-Dn*ao+Yn*Xs)*vr,pt[14]=(ur*Ul-is*js-Fs*Ns)*vr,pt[15]=(ar*js-Ri*Ul+Ur*Ns)*vr,pt):null}var at=new Float32Array([0,0,0,1]),Kt=new Float32Array([0,0,0]);function Wt(pt,Rt,sn,Dn,Yn,hi){pe(pt,Dn||null,hi.depthNear,hi.depthFar);var Di=sn.orientation||at,Pi=sn.position||Kt;_e(Rt,Di,Pi),Yn&&Ne(Rt,Rt,Yn),nt(Rt,Rt)}return function(pt,Rt,sn){return!pt||!Rt?!1:(pt.pose=Rt,pt.timestamp=Rt.timestamp,Wt(pt.leftProjectionMatrix,pt.leftViewMatrix,Rt,sn._getFieldOfView("left"),sn._getEyeOffset("left"),sn),Wt(pt.rightProjectionMatrix,pt.rightViewMatrix,Rt,sn._getFieldOfView("right"),sn._getEyeOffset("right"),sn),!0)}}(),fn=function(){var oe=window.self!==window.top,pe=An(document.referrer),_e=An(window.location.href);return oe&&pe!==_e},An=function(oe){var pe,_e=oe.indexOf("://");_e!==-1?pe=_e+3:pe=0;var Ne=oe.indexOf("/",pe);return Ne===-1&&(Ne=oe.length),oe.substring(0,Ne)},Bn=function(oe){if(oe.w>1)return console.warn("getQuaternionAngle: w > 1"),0;var pe=2*Math.acos(oe.w);return pe},ci=function(){var q={};return function(oe,pe){q[oe]===void 0&&(console.warn("webvr-polyfill: "+pe),q[oe]=!0)}}(),ze=function(oe,pe){var _e=pe?"Please use "+pe+" instead.":"";ci(oe,oe+" has been deprecated. This may not work on native WebVR displays. "+_e)};function Pe(q,oe,pe){if(!oe){pe(q);return}for(var _e=[],Ne=null,nt=0;nt<oe.length;++nt){var at=oe[nt];switch(at){case q.TEXTURE_BINDING_2D:case q.TEXTURE_BINDING_CUBE_MAP:var Kt=oe[++nt];if(Kt<q.TEXTURE0||Kt>q.TEXTURE31){console.error("TEXTURE_BINDING_2D or TEXTURE_BINDING_CUBE_MAP must be followed by a valid texture unit"),_e.push(null,null);break}Ne||(Ne=q.getParameter(q.ACTIVE_TEXTURE)),q.activeTexture(Kt),_e.push(q.getParameter(at),null);break;case q.ACTIVE_TEXTURE:Ne=q.getParameter(q.ACTIVE_TEXTURE),_e.push(null);break;default:_e.push(q.getParameter(at));break}}pe(q);for(var nt=0;nt<oe.length;++nt){var at=oe[nt],Wt=_e[nt];switch(at){case q.ACTIVE_TEXTURE:break;case q.ARRAY_BUFFER_BINDING:q.bindBuffer(q.ARRAY_BUFFER,Wt);break;case q.COLOR_CLEAR_VALUE:q.clearColor(Wt[0],Wt[1],Wt[2],Wt[3]);break;case q.COLOR_WRITEMASK:q.colorMask(Wt[0],Wt[1],Wt[2],Wt[3]);break;case q.CURRENT_PROGRAM:q.useProgram(Wt);break;case q.ELEMENT_ARRAY_BUFFER_BINDING:q.bindBuffer(q.ELEMENT_ARRAY_BUFFER,Wt);break;case q.FRAMEBUFFER_BINDING:q.bindFramebuffer(q.FRAMEBUFFER,Wt);break;case q.RENDERBUFFER_BINDING:q.bindRenderbuffer(q.RENDERBUFFER,Wt);break;case q.TEXTURE_BINDING_2D:var Kt=oe[++nt];if(Kt<q.TEXTURE0||Kt>q.TEXTURE31)break;q.activeTexture(Kt),q.bindTexture(q.TEXTURE_2D,Wt);break;case q.TEXTURE_BINDING_CUBE_MAP:var Kt=oe[++nt];if(Kt<q.TEXTURE0||Kt>q.TEXTURE31)break;q.activeTexture(Kt),q.bindTexture(q.TEXTURE_CUBE_MAP,Wt);break;case q.VIEWPORT:q.viewport(Wt[0],Wt[1],Wt[2],Wt[3]);break;case q.BLEND:case q.CULL_FACE:case q.DEPTH_TEST:case q.SCISSOR_TEST:case q.STENCIL_TEST:Wt?q.enable(at):q.disable(at);break;default:console.log("No GL restore behavior for 0x"+at.toString(16));break}Ne&&q.activeTexture(Ne)}}var qe=Pe,ye=["attribute vec2 position;","attribute vec3 texCoord;","varying vec2 vTexCoord;","uniform vec4 viewportOffsetScale[2];","void main() {","  vec4 viewport = viewportOffsetScale[int(texCoord.z)];","  vTexCoord = (texCoord.xy * viewport.zw) + viewport.xy;","  gl_Position = vec4( position, 1.0, 1.0 );","}"].join(`
`),me=["precision mediump float;","uniform sampler2D diffuse;","varying vec2 vTexCoord;","void main() {","  gl_FragColor = texture2D(diffuse, vTexCoord);","}"].join(`
`);function Re(q,oe,pe,_e){this.gl=q,this.cardboardUI=oe,this.bufferScale=pe,this.dirtySubmitFrameBindings=_e,this.ctxAttribs=q.getContextAttributes(),this.instanceExt=q.getExtension("ANGLE_instanced_arrays"),this.meshWidth=20,this.meshHeight=20,this.bufferWidth=q.drawingBufferWidth,this.bufferHeight=q.drawingBufferHeight,this.realBindFramebuffer=q.bindFramebuffer,this.realEnable=q.enable,this.realDisable=q.disable,this.realColorMask=q.colorMask,this.realClearColor=q.clearColor,this.realViewport=q.viewport,ee()||(this.realCanvasWidth=Object.getOwnPropertyDescriptor(q.canvas.__proto__,"width"),this.realCanvasHeight=Object.getOwnPropertyDescriptor(q.canvas.__proto__,"height")),this.isPatched=!1,this.lastBoundFramebuffer=null,this.cullFace=!1,this.depthTest=!1,this.blend=!1,this.scissorTest=!1,this.stencilTest=!1,this.viewport=[0,0,0,0],this.colorMask=[!0,!0,!0,!0],this.clearColor=[0,0,0,0],this.attribs={position:0,texCoord:1},this.program=It(q,ye,me,this.attribs),this.uniforms=ct(q,this.program),this.viewportOffsetScale=new Float32Array(8),this.setTextureBounds(),this.vertexBuffer=q.createBuffer(),this.indexBuffer=q.createBuffer(),this.indexCount=0,this.renderTarget=q.createTexture(),this.framebuffer=q.createFramebuffer(),this.depthStencilBuffer=null,this.depthBuffer=null,this.stencilBuffer=null,this.ctxAttribs.depth&&this.ctxAttribs.stencil?this.depthStencilBuffer=q.createRenderbuffer():this.ctxAttribs.depth?this.depthBuffer=q.createRenderbuffer():this.ctxAttribs.stencil&&(this.stencilBuffer=q.createRenderbuffer()),this.patch(),this.onResize()}Re.prototype.destroy=function(){var q=this.gl;this.unpatch(),q.deleteProgram(this.program),q.deleteBuffer(this.vertexBuffer),q.deleteBuffer(this.indexBuffer),q.deleteTexture(this.renderTarget),q.deleteFramebuffer(this.framebuffer),this.depthStencilBuffer&&q.deleteRenderbuffer(this.depthStencilBuffer),this.depthBuffer&&q.deleteRenderbuffer(this.depthBuffer),this.stencilBuffer&&q.deleteRenderbuffer(this.stencilBuffer),this.cardboardUI&&this.cardboardUI.destroy()},Re.prototype.onResize=function(){var q=this.gl,oe=this,pe=[q.RENDERBUFFER_BINDING,q.TEXTURE_BINDING_2D,q.TEXTURE0];qe(q,pe,function(_e){oe.realBindFramebuffer.call(_e,_e.FRAMEBUFFER,null),oe.scissorTest&&oe.realDisable.call(_e,_e.SCISSOR_TEST),oe.realColorMask.call(_e,!0,!0,!0,!0),oe.realViewport.call(_e,0,0,_e.drawingBufferWidth,_e.drawingBufferHeight),oe.realClearColor.call(_e,0,0,0,1),_e.clear(_e.COLOR_BUFFER_BIT),oe.realBindFramebuffer.call(_e,_e.FRAMEBUFFER,oe.framebuffer),_e.bindTexture(_e.TEXTURE_2D,oe.renderTarget),_e.texImage2D(_e.TEXTURE_2D,0,oe.ctxAttribs.alpha?_e.RGBA:_e.RGB,oe.bufferWidth,oe.bufferHeight,0,oe.ctxAttribs.alpha?_e.RGBA:_e.RGB,_e.UNSIGNED_BYTE,null),_e.texParameteri(_e.TEXTURE_2D,_e.TEXTURE_MAG_FILTER,_e.LINEAR),_e.texParameteri(_e.TEXTURE_2D,_e.TEXTURE_MIN_FILTER,_e.LINEAR),_e.texParameteri(_e.TEXTURE_2D,_e.TEXTURE_WRAP_S,_e.CLAMP_TO_EDGE),_e.texParameteri(_e.TEXTURE_2D,_e.TEXTURE_WRAP_T,_e.CLAMP_TO_EDGE),_e.framebufferTexture2D(_e.FRAMEBUFFER,_e.COLOR_ATTACHMENT0,_e.TEXTURE_2D,oe.renderTarget,0),oe.ctxAttribs.depth&&oe.ctxAttribs.stencil?(_e.bindRenderbuffer(_e.RENDERBUFFER,oe.depthStencilBuffer),_e.renderbufferStorage(_e.RENDERBUFFER,_e.DEPTH_STENCIL,oe.bufferWidth,oe.bufferHeight),_e.framebufferRenderbuffer(_e.FRAMEBUFFER,_e.DEPTH_STENCIL_ATTACHMENT,_e.RENDERBUFFER,oe.depthStencilBuffer)):oe.ctxAttribs.depth?(_e.bindRenderbuffer(_e.RENDERBUFFER,oe.depthBuffer),_e.renderbufferStorage(_e.RENDERBUFFER,_e.DEPTH_COMPONENT16,oe.bufferWidth,oe.bufferHeight),_e.framebufferRenderbuffer(_e.FRAMEBUFFER,_e.DEPTH_ATTACHMENT,_e.RENDERBUFFER,oe.depthBuffer)):oe.ctxAttribs.stencil&&(_e.bindRenderbuffer(_e.RENDERBUFFER,oe.stencilBuffer),_e.renderbufferStorage(_e.RENDERBUFFER,_e.STENCIL_INDEX8,oe.bufferWidth,oe.bufferHeight),_e.framebufferRenderbuffer(_e.FRAMEBUFFER,_e.STENCIL_ATTACHMENT,_e.RENDERBUFFER,oe.stencilBuffer)),!_e.checkFramebufferStatus(_e.FRAMEBUFFER)===_e.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer incomplete!"),oe.realBindFramebuffer.call(_e,_e.FRAMEBUFFER,oe.lastBoundFramebuffer),oe.scissorTest&&oe.realEnable.call(_e,_e.SCISSOR_TEST),oe.realColorMask.apply(_e,oe.colorMask),oe.realViewport.apply(_e,oe.viewport),oe.realClearColor.apply(_e,oe.clearColor)}),this.cardboardUI&&this.cardboardUI.onResize()},Re.prototype.patch=function(){if(!this.isPatched){var q=this,oe=this.gl.canvas,pe=this.gl;ee()||(oe.width=rt()*this.bufferScale,oe.height=He()*this.bufferScale,Object.defineProperty(oe,"width",{configurable:!0,enumerable:!0,get:function(){return q.bufferWidth},set:function(Ne){q.bufferWidth=Ne,q.realCanvasWidth.set.call(oe,Ne),q.onResize()}}),Object.defineProperty(oe,"height",{configurable:!0,enumerable:!0,get:function(){return q.bufferHeight},set:function(Ne){q.bufferHeight=Ne,q.realCanvasHeight.set.call(oe,Ne),q.onResize()}})),this.lastBoundFramebuffer=pe.getParameter(pe.FRAMEBUFFER_BINDING),this.lastBoundFramebuffer==null&&(this.lastBoundFramebuffer=this.framebuffer,this.gl.bindFramebuffer(pe.FRAMEBUFFER,this.framebuffer)),this.gl.bindFramebuffer=function(_e,Ne){q.lastBoundFramebuffer=Ne||q.framebuffer,q.realBindFramebuffer.call(pe,_e,q.lastBoundFramebuffer)},this.cullFace=pe.getParameter(pe.CULL_FACE),this.depthTest=pe.getParameter(pe.DEPTH_TEST),this.blend=pe.getParameter(pe.BLEND),this.scissorTest=pe.getParameter(pe.SCISSOR_TEST),this.stencilTest=pe.getParameter(pe.STENCIL_TEST),pe.enable=function(_e){switch(_e){case pe.CULL_FACE:q.cullFace=!0;break;case pe.DEPTH_TEST:q.depthTest=!0;break;case pe.BLEND:q.blend=!0;break;case pe.SCISSOR_TEST:q.scissorTest=!0;break;case pe.STENCIL_TEST:q.stencilTest=!0;break}q.realEnable.call(pe,_e)},pe.disable=function(_e){switch(_e){case pe.CULL_FACE:q.cullFace=!1;break;case pe.DEPTH_TEST:q.depthTest=!1;break;case pe.BLEND:q.blend=!1;break;case pe.SCISSOR_TEST:q.scissorTest=!1;break;case pe.STENCIL_TEST:q.stencilTest=!1;break}q.realDisable.call(pe,_e)},this.colorMask=pe.getParameter(pe.COLOR_WRITEMASK),pe.colorMask=function(_e,Ne,nt,at){q.colorMask[0]=_e,q.colorMask[1]=Ne,q.colorMask[2]=nt,q.colorMask[3]=at,q.realColorMask.call(pe,_e,Ne,nt,at)},this.clearColor=pe.getParameter(pe.COLOR_CLEAR_VALUE),pe.clearColor=function(_e,Ne,nt,at){q.clearColor[0]=_e,q.clearColor[1]=Ne,q.clearColor[2]=nt,q.clearColor[3]=at,q.realClearColor.call(pe,_e,Ne,nt,at)},this.viewport=pe.getParameter(pe.VIEWPORT),pe.viewport=function(_e,Ne,nt,at){q.viewport[0]=_e,q.viewport[1]=Ne,q.viewport[2]=nt,q.viewport[3]=at,q.realViewport.call(pe,_e,Ne,nt,at)},this.isPatched=!0,Ft(oe)}},Re.prototype.unpatch=function(){if(this.isPatched){var q=this.gl,oe=this.gl.canvas;ee()||(Object.defineProperty(oe,"width",this.realCanvasWidth),Object.defineProperty(oe,"height",this.realCanvasHeight)),oe.width=this.bufferWidth,oe.height=this.bufferHeight,q.bindFramebuffer=this.realBindFramebuffer,q.enable=this.realEnable,q.disable=this.realDisable,q.colorMask=this.realColorMask,q.clearColor=this.realClearColor,q.viewport=this.realViewport,this.lastBoundFramebuffer==this.framebuffer&&q.bindFramebuffer(q.FRAMEBUFFER,null),this.isPatched=!1,setTimeout(function(){Ft(oe)},1)}},Re.prototype.setTextureBounds=function(q,oe){q||(q=[0,0,.5,1]),oe||(oe=[.5,0,.5,1]),this.viewportOffsetScale[0]=q[0],this.viewportOffsetScale[1]=q[1],this.viewportOffsetScale[2]=q[2],this.viewportOffsetScale[3]=q[3],this.viewportOffsetScale[4]=oe[0],this.viewportOffsetScale[5]=oe[1],this.viewportOffsetScale[6]=oe[2],this.viewportOffsetScale[7]=oe[3]},Re.prototype.submitFrame=function(){var q=this.gl,oe=this,pe=[];if(this.dirtySubmitFrameBindings||pe.push(q.CURRENT_PROGRAM,q.ARRAY_BUFFER_BINDING,q.ELEMENT_ARRAY_BUFFER_BINDING,q.TEXTURE_BINDING_2D,q.TEXTURE0),qe(q,pe,function(Ne){oe.realBindFramebuffer.call(Ne,Ne.FRAMEBUFFER,null);var nt=0,at=0;oe.instanceExt&&(nt=Ne.getVertexAttrib(oe.attribs.position,oe.instanceExt.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE),at=Ne.getVertexAttrib(oe.attribs.texCoord,oe.instanceExt.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE)),oe.cullFace&&oe.realDisable.call(Ne,Ne.CULL_FACE),oe.depthTest&&oe.realDisable.call(Ne,Ne.DEPTH_TEST),oe.blend&&oe.realDisable.call(Ne,Ne.BLEND),oe.scissorTest&&oe.realDisable.call(Ne,Ne.SCISSOR_TEST),oe.stencilTest&&oe.realDisable.call(Ne,Ne.STENCIL_TEST),oe.realColorMask.call(Ne,!0,!0,!0,!0),oe.realViewport.call(Ne,0,0,Ne.drawingBufferWidth,Ne.drawingBufferHeight),(oe.ctxAttribs.alpha||ee())&&(oe.realClearColor.call(Ne,0,0,0,1),Ne.clear(Ne.COLOR_BUFFER_BIT)),Ne.useProgram(oe.program),Ne.bindBuffer(Ne.ELEMENT_ARRAY_BUFFER,oe.indexBuffer),Ne.bindBuffer(Ne.ARRAY_BUFFER,oe.vertexBuffer),Ne.enableVertexAttribArray(oe.attribs.position),Ne.enableVertexAttribArray(oe.attribs.texCoord),Ne.vertexAttribPointer(oe.attribs.position,2,Ne.FLOAT,!1,20,0),Ne.vertexAttribPointer(oe.attribs.texCoord,3,Ne.FLOAT,!1,20,8),oe.instanceExt&&(nt!=0&&oe.instanceExt.vertexAttribDivisorANGLE(oe.attribs.position,0),at!=0&&oe.instanceExt.vertexAttribDivisorANGLE(oe.attribs.texCoord,0)),Ne.activeTexture(Ne.TEXTURE0),Ne.uniform1i(oe.uniforms.diffuse,0),Ne.bindTexture(Ne.TEXTURE_2D,oe.renderTarget),Ne.uniform4fv(oe.uniforms.viewportOffsetScale,oe.viewportOffsetScale),Ne.drawElements(Ne.TRIANGLES,oe.indexCount,Ne.UNSIGNED_SHORT,0),oe.cardboardUI&&oe.cardboardUI.renderNoState(),oe.realBindFramebuffer.call(oe.gl,Ne.FRAMEBUFFER,oe.framebuffer),oe.ctxAttribs.preserveDrawingBuffer||(oe.realClearColor.call(Ne,0,0,0,0),Ne.clear(Ne.COLOR_BUFFER_BIT)),oe.dirtySubmitFrameBindings||oe.realBindFramebuffer.call(Ne,Ne.FRAMEBUFFER,oe.lastBoundFramebuffer),oe.cullFace&&oe.realEnable.call(Ne,Ne.CULL_FACE),oe.depthTest&&oe.realEnable.call(Ne,Ne.DEPTH_TEST),oe.blend&&oe.realEnable.call(Ne,Ne.BLEND),oe.scissorTest&&oe.realEnable.call(Ne,Ne.SCISSOR_TEST),oe.stencilTest&&oe.realEnable.call(Ne,Ne.STENCIL_TEST),oe.realColorMask.apply(Ne,oe.colorMask),oe.realViewport.apply(Ne,oe.viewport),(oe.ctxAttribs.alpha||!oe.ctxAttribs.preserveDrawingBuffer)&&oe.realClearColor.apply(Ne,oe.clearColor),oe.instanceExt&&(nt!=0&&oe.instanceExt.vertexAttribDivisorANGLE(oe.attribs.position,nt),at!=0&&oe.instanceExt.vertexAttribDivisorANGLE(oe.attribs.texCoord,at))}),ee()){var _e=q.canvas;(_e.width!=oe.bufferWidth||_e.height!=oe.bufferHeight)&&(oe.bufferWidth=_e.width,oe.bufferHeight=_e.height,oe.onResize())}},Re.prototype.updateDeviceInfo=function(q){var oe=this.gl,pe=this,_e=[oe.ARRAY_BUFFER_BINDING,oe.ELEMENT_ARRAY_BUFFER_BINDING];qe(oe,_e,function(Ne){var nt=pe.computeMeshVertices_(pe.meshWidth,pe.meshHeight,q);if(Ne.bindBuffer(Ne.ARRAY_BUFFER,pe.vertexBuffer),Ne.bufferData(Ne.ARRAY_BUFFER,nt,Ne.STATIC_DRAW),!pe.indexCount){var at=pe.computeMeshIndices_(pe.meshWidth,pe.meshHeight);Ne.bindBuffer(Ne.ELEMENT_ARRAY_BUFFER,pe.indexBuffer),Ne.bufferData(Ne.ELEMENT_ARRAY_BUFFER,at,Ne.STATIC_DRAW),pe.indexCount=at.length}})},Re.prototype.computeMeshVertices_=function(q,oe,pe){for(var _e=new Float32Array(2*q*oe*5),Ne=pe.getLeftEyeVisibleTanAngles(),nt=pe.getLeftEyeNoLensTanAngles(),at=pe.getLeftEyeVisibleScreenRect(nt),Kt=0,Wt=0;Wt<2;Wt++){for(var pt=0;pt<oe;pt++)for(var Rt=0;Rt<q;Rt++,Kt++){var sn=Rt/(q-1),Dn=pt/(oe-1),Yn=sn,hi=Dn,Di=ae(Ne[0],Ne[2],sn),Pi=ae(Ne[3],Ne[1],Dn),Ei=Math.sqrt(Di*Di+Pi*Pi),oi=pe.distortion.distortInverse(Ei),ar=Di*oi/Ei,Ri=Pi*oi/Ei;sn=(ar-nt[0])/(nt[2]-nt[0]),Dn=(Ri-nt[3])/(nt[1]-nt[3]),sn=(at.x+sn*at.width-.5)*2,Dn=(at.y+Dn*at.height-.5)*2,_e[Kt*5+0]=sn,_e[Kt*5+1]=Dn,_e[Kt*5+2]=Yn,_e[Kt*5+3]=hi,_e[Kt*5+4]=Wt}var Ur=Ne[2]-Ne[0];Ne[0]=-(Ur+Ne[0]),Ne[2]=Ur-Ne[2],Ur=nt[2]-nt[0],nt[0]=-(Ur+nt[0]),nt[2]=Ur-nt[2],at.x=1-(at.x+at.width)}return _e},Re.prototype.computeMeshIndices_=function(q,oe){for(var pe=new Uint16Array(2*(q-1)*(oe-1)*6),_e=q/2,Ne=oe/2,nt=0,at=0,Kt=0;Kt<2;Kt++)for(var Wt=0;Wt<oe;Wt++)for(var pt=0;pt<q;pt++,nt++)pt==0||Wt==0||(pt<=_e==Wt<=Ne?(pe[at++]=nt,pe[at++]=nt-q-1,pe[at++]=nt-q,pe[at++]=nt-q-1,pe[at++]=nt,pe[at++]=nt-1):(pe[at++]=nt-1,pe[at++]=nt-q,pe[at++]=nt,pe[at++]=nt-q,pe[at++]=nt-1,pe[at++]=nt-q-1));return pe},Re.prototype.getOwnPropertyDescriptor_=function(q,oe){var pe=Object.getOwnPropertyDescriptor(q,oe);return(pe.get===void 0||pe.set===void 0)&&(pe.configurable=!0,pe.enumerable=!0,pe.get=function(){return this.getAttribute(oe)},pe.set=function(_e){this.setAttribute(oe,_e)}),pe};var Se=["attribute vec2 position;","uniform mat4 projectionMat;","void main() {","  gl_Position = projectionMat * vec4( position, -1.0, 1.0 );","}"].join(`
`),Be=["precision mediump float;","uniform vec4 color;","void main() {","  gl_FragColor = color;","}"].join(`
`),Ee=Math.PI/180,Xe=60,fe=12,Oe=20,$e=1,le=.75,Q=.3125,Z=4,Ie=28,Ae=1.5;function Te(q){this.gl=q,this.attribs={position:0},this.program=It(q,Se,Be,this.attribs),this.uniforms=ct(q,this.program),this.vertexBuffer=q.createBuffer(),this.gearOffset=0,this.gearVertexCount=0,this.arrowOffset=0,this.arrowVertexCount=0,this.projMat=new Float32Array(16),this.listener=null,this.onResize()}Te.prototype.destroy=function(){var q=this.gl;this.listener&&q.canvas.removeEventListener("click",this.listener,!1),q.deleteProgram(this.program),q.deleteBuffer(this.vertexBuffer)},Te.prototype.listen=function(q,oe){var pe=this.gl.canvas;this.listener=function(_e){var Ne=pe.clientWidth/2,nt=Ie*Ae;_e.clientX>Ne-nt&&_e.clientX<Ne+nt&&_e.clientY>pe.clientHeight-nt?q(_e):_e.clientX<nt&&_e.clientY<nt&&oe(_e)},pe.addEventListener("click",this.listener,!1)},Te.prototype.onResize=function(){var q=this.gl,oe=this,pe=[q.ARRAY_BUFFER_BINDING];qe(q,pe,function(_e){var Ne=[],nt=_e.drawingBufferWidth/2,at=Math.max(screen.width,screen.height)*window.devicePixelRatio,Kt=_e.drawingBufferWidth/at,Wt=Kt*window.devicePixelRatio,pt=Z*Wt/2,Rt=Ie*Ae*Wt,sn=Ie*Wt/2,Dn=(Ie*Ae-Ie)*Wt;Ne.push(nt-pt,Rt),Ne.push(nt-pt,_e.drawingBufferHeight),Ne.push(nt+pt,Rt),Ne.push(nt+pt,_e.drawingBufferHeight),oe.gearOffset=Ne.length/2;function Yn(oi,ar){var Ri=(90-oi)*Ee,Ur=Math.cos(Ri),vs=Math.sin(Ri);Ne.push(Q*Ur*sn+nt,Q*vs*sn+sn),Ne.push(ar*Ur*sn+nt,ar*vs*sn+sn)}for(var hi=0;hi<=6;hi++){var Di=hi*Xe;Yn(Di,$e),Yn(Di+fe,$e),Yn(Di+Oe,le),Yn(Di+(Xe-Oe),le),Yn(Di+(Xe-fe),$e)}oe.gearVertexCount=Ne.length/2-oe.gearOffset,oe.arrowOffset=Ne.length/2;function Pi(oi,ar){Ne.push(Dn+oi,_e.drawingBufferHeight-Dn-ar)}var Ei=pt/Math.sin(45*Ee);Pi(0,sn),Pi(sn,0),Pi(sn+Ei,Ei),Pi(Ei,sn+Ei),Pi(Ei,sn-Ei),Pi(0,sn),Pi(sn,sn*2),Pi(sn+Ei,sn*2-Ei),Pi(Ei,sn-Ei),Pi(0,sn),Pi(Ei,sn-pt),Pi(Ie*Wt,sn-pt),Pi(Ei,sn+pt),Pi(Ie*Wt,sn+pt),oe.arrowVertexCount=Ne.length/2-oe.arrowOffset,_e.bindBuffer(_e.ARRAY_BUFFER,oe.vertexBuffer),_e.bufferData(_e.ARRAY_BUFFER,new Float32Array(Ne),_e.STATIC_DRAW)})},Te.prototype.render=function(){var q=this.gl,oe=this,pe=[q.CULL_FACE,q.DEPTH_TEST,q.BLEND,q.SCISSOR_TEST,q.STENCIL_TEST,q.COLOR_WRITEMASK,q.VIEWPORT,q.CURRENT_PROGRAM,q.ARRAY_BUFFER_BINDING];qe(q,pe,function(_e){_e.disable(_e.CULL_FACE),_e.disable(_e.DEPTH_TEST),_e.disable(_e.BLEND),_e.disable(_e.SCISSOR_TEST),_e.disable(_e.STENCIL_TEST),_e.colorMask(!0,!0,!0,!0),_e.viewport(0,0,_e.drawingBufferWidth,_e.drawingBufferHeight),oe.renderNoState()})},Te.prototype.renderNoState=function(){var q=this.gl;q.useProgram(this.program),q.bindBuffer(q.ARRAY_BUFFER,this.vertexBuffer),q.enableVertexAttribArray(this.attribs.position),q.vertexAttribPointer(this.attribs.position,2,q.FLOAT,!1,8,0),q.uniform4f(this.uniforms.color,1,1,1,1),ut(this.projMat,0,q.drawingBufferWidth,0,q.drawingBufferHeight,.1,1024),q.uniformMatrix4fv(this.uniforms.projectionMat,!1,this.projMat),q.drawArrays(q.TRIANGLE_STRIP,0,4),q.drawArrays(q.TRIANGLE_STRIP,this.gearOffset,this.gearVertexCount),q.drawArrays(q.TRIANGLE_STRIP,this.arrowOffset,this.arrowVertexCount)};function Ve(q){this.coefficients=q}Ve.prototype.distortInverse=function(q){for(var oe=0,pe=1,_e=q-this.distort(oe);Math.abs(pe-oe)>1e-4;){var Ne=q-this.distort(pe),nt=pe-Ne*((pe-oe)/(Ne-_e));oe=pe,pe=nt,_e=Ne}return pe},Ve.prototype.distort=function(q){for(var oe=q*q,pe=0,_e=0;_e<this.coefficients.length;_e++)pe=oe*(pe+this.coefficients[_e]);return(pe+1)*q};var Tt=Math.PI/180,Ht=180/Math.PI,nn=function(oe,pe,_e){this.x=oe||0,this.y=pe||0,this.z=_e||0};nn.prototype={constructor:nn,set:function(oe,pe,_e){return this.x=oe,this.y=pe,this.z=_e,this},copy:function(oe){return this.x=oe.x,this.y=oe.y,this.z=oe.z,this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){var oe=this.length();if(oe!==0){var pe=1/oe;this.multiplyScalar(pe)}else this.x=0,this.y=0,this.z=0;return this},multiplyScalar:function(oe){this.x*=oe,this.y*=oe,this.z*=oe},applyQuaternion:function(oe){var pe=this.x,_e=this.y,Ne=this.z,nt=oe.x,at=oe.y,Kt=oe.z,Wt=oe.w,pt=Wt*pe+at*Ne-Kt*_e,Rt=Wt*_e+Kt*pe-nt*Ne,sn=Wt*Ne+nt*_e-at*pe,Dn=-nt*pe-at*_e-Kt*Ne;return this.x=pt*Wt+Dn*-nt+Rt*-Kt-sn*-at,this.y=Rt*Wt+Dn*-at+sn*-nt-pt*-Kt,this.z=sn*Wt+Dn*-Kt+pt*-at-Rt*-nt,this},dot:function(oe){return this.x*oe.x+this.y*oe.y+this.z*oe.z},crossVectors:function(oe,pe){var _e=oe.x,Ne=oe.y,nt=oe.z,at=pe.x,Kt=pe.y,Wt=pe.z;return this.x=Ne*Wt-nt*Kt,this.y=nt*at-_e*Wt,this.z=_e*Kt-Ne*at,this}};var cn=function(oe,pe,_e,Ne){this.x=oe||0,this.y=pe||0,this.z=_e||0,this.w=Ne!==void 0?Ne:1};cn.prototype={constructor:cn,set:function(oe,pe,_e,Ne){return this.x=oe,this.y=pe,this.z=_e,this.w=Ne,this},copy:function(oe){return this.x=oe.x,this.y=oe.y,this.z=oe.z,this.w=oe.w,this},setFromEulerXYZ:function(oe,pe,_e){var Ne=Math.cos(oe/2),nt=Math.cos(pe/2),at=Math.cos(_e/2),Kt=Math.sin(oe/2),Wt=Math.sin(pe/2),pt=Math.sin(_e/2);return this.x=Kt*nt*at+Ne*Wt*pt,this.y=Ne*Wt*at-Kt*nt*pt,this.z=Ne*nt*pt+Kt*Wt*at,this.w=Ne*nt*at-Kt*Wt*pt,this},setFromEulerYXZ:function(oe,pe,_e){var Ne=Math.cos(oe/2),nt=Math.cos(pe/2),at=Math.cos(_e/2),Kt=Math.sin(oe/2),Wt=Math.sin(pe/2),pt=Math.sin(_e/2);return this.x=Kt*nt*at+Ne*Wt*pt,this.y=Ne*Wt*at-Kt*nt*pt,this.z=Ne*nt*pt-Kt*Wt*at,this.w=Ne*nt*at+Kt*Wt*pt,this},setFromAxisAngle:function(oe,pe){var _e=pe/2,Ne=Math.sin(_e);return this.x=oe.x*Ne,this.y=oe.y*Ne,this.z=oe.z*Ne,this.w=Math.cos(_e),this},multiply:function(oe){return this.multiplyQuaternions(this,oe)},multiplyQuaternions:function(oe,pe){var _e=oe.x,Ne=oe.y,nt=oe.z,at=oe.w,Kt=pe.x,Wt=pe.y,pt=pe.z,Rt=pe.w;return this.x=_e*Rt+at*Kt+Ne*pt-nt*Wt,this.y=Ne*Rt+at*Wt+nt*Kt-_e*pt,this.z=nt*Rt+at*pt+_e*Wt-Ne*Kt,this.w=at*Rt-_e*Kt-Ne*Wt-nt*pt,this},inverse:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this.normalize(),this},normalize:function(){var oe=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return oe===0?(this.x=0,this.y=0,this.z=0,this.w=1):(oe=1/oe,this.x=this.x*oe,this.y=this.y*oe,this.z=this.z*oe,this.w=this.w*oe),this},slerp:function(oe,pe){if(pe===0)return this;if(pe===1)return this.copy(oe);var _e=this.x,Ne=this.y,nt=this.z,at=this.w,Kt=at*oe.w+_e*oe.x+Ne*oe.y+nt*oe.z;if(Kt<0?(this.w=-oe.w,this.x=-oe.x,this.y=-oe.y,this.z=-oe.z,Kt=-Kt):this.copy(oe),Kt>=1)return this.w=at,this.x=_e,this.y=Ne,this.z=nt,this;var Wt=Math.acos(Kt),pt=Math.sqrt(1-Kt*Kt);if(Math.abs(pt)<.001)return this.w=.5*(at+this.w),this.x=.5*(_e+this.x),this.y=.5*(Ne+this.y),this.z=.5*(nt+this.z),this;var Rt=Math.sin((1-pe)*Wt)/pt,sn=Math.sin(pe*Wt)/pt;return this.w=at*Rt+this.w*sn,this.x=_e*Rt+this.x*sn,this.y=Ne*Rt+this.y*sn,this.z=nt*Rt+this.z*sn,this},setFromUnitVectors:function(){var q,oe,pe=1e-6;return function(_e,Ne){return q===void 0&&(q=new nn),oe=_e.dot(Ne)+1,oe<pe?(oe=0,Math.abs(_e.x)>Math.abs(_e.z)?q.set(-_e.y,_e.x,0):q.set(0,-_e.z,_e.y)):q.crossVectors(_e,Ne),this.x=q.x,this.y=q.y,this.z=q.z,this.w=oe,this.normalize(),this}}()};function Xn(q){this.width=q.width||rt(),this.height=q.height||He(),this.widthMeters=q.widthMeters,this.heightMeters=q.heightMeters,this.bevelMeters=q.bevelMeters}var cr=new Xn({widthMeters:.11,heightMeters:.062,bevelMeters:.004}),Ni=new Xn({widthMeters:.1038,heightMeters:.0584,bevelMeters:.004}),or={CardboardV1:new vn({id:"CardboardV1",label:"Cardboard I/O 2014",fov:40,interLensDistance:.06,baselineLensDistance:.035,screenLensDistance:.042,distortionCoefficients:[.441,.156],inverseCoefficients:[-.4410035,.42756155,-.4804439,.5460139,-.58821183,.5733938,-.48303202,.33299083,-.17573841,.0651772,-.01488963,.001559834]}),CardboardV2:new vn({id:"CardboardV2",label:"Cardboard I/O 2015",fov:60,interLensDistance:.064,baselineLensDistance:.035,screenLensDistance:.039,distortionCoefficients:[.34,.55],inverseCoefficients:[-.33836704,-.18162185,.862655,-1.2462051,1.0560602,-.58208317,.21609078,-.05444823,.009177956,-.0009904169,6183535e-11,-16981803e-13]})};function bi(q,oe){this.viewer=or.CardboardV2,this.updateDeviceParams(q),this.distortion=new Ve(this.viewer.distortionCoefficients);for(var pe=0;pe<oe.length;pe++){var _e=oe[pe];or[_e.id]=new vn(_e)}}bi.prototype.updateDeviceParams=function(q){this.device=this.determineDevice_(q)||this.device},bi.prototype.getDevice=function(){return this.device},bi.prototype.setViewer=function(q){this.viewer=q,this.distortion=new Ve(this.viewer.distortionCoefficients)},bi.prototype.determineDevice_=function(q){if(!q)return ee()?(console.warn("Using fallback iOS device measurements."),Ni):(console.warn("Using fallback Android device measurements."),cr);var oe=.0254,pe=oe/q.xdpi,_e=oe/q.ydpi,Ne=rt(),nt=He();return new Xn({widthMeters:pe*Ne,heightMeters:_e*nt,bevelMeters:q.bevelMm*.001})},bi.prototype.getDistortedFieldOfViewLeftEye=function(){var q=this.viewer,oe=this.device,pe=this.distortion,_e=q.screenLensDistance,Ne=(oe.widthMeters-q.interLensDistance)/2,nt=q.interLensDistance/2,at=q.baselineLensDistance-oe.bevelMeters,Kt=oe.heightMeters-at,Wt=Ht*Math.atan(pe.distort(Ne/_e)),pt=Ht*Math.atan(pe.distort(nt/_e)),Rt=Ht*Math.atan(pe.distort(at/_e)),sn=Ht*Math.atan(pe.distort(Kt/_e));return{leftDegrees:Math.min(Wt,q.fov),rightDegrees:Math.min(pt,q.fov),downDegrees:Math.min(Rt,q.fov),upDegrees:Math.min(sn,q.fov)}},bi.prototype.getLeftEyeVisibleTanAngles=function(){var q=this.viewer,oe=this.device,pe=this.distortion,_e=Math.tan(-Tt*q.fov),Ne=Math.tan(Tt*q.fov),nt=Math.tan(Tt*q.fov),at=Math.tan(-Tt*q.fov),Kt=oe.widthMeters/4,Wt=oe.heightMeters/2,pt=q.baselineLensDistance-oe.bevelMeters-Wt,Rt=q.interLensDistance/2-Kt,sn=-pt,Dn=q.screenLensDistance,Yn=pe.distort((Rt-Kt)/Dn),hi=pe.distort((sn+Wt)/Dn),Di=pe.distort((Rt+Kt)/Dn),Pi=pe.distort((sn-Wt)/Dn),Ei=new Float32Array(4);return Ei[0]=Math.max(_e,Yn),Ei[1]=Math.min(Ne,hi),Ei[2]=Math.min(nt,Di),Ei[3]=Math.max(at,Pi),Ei},bi.prototype.getLeftEyeNoLensTanAngles=function(){var q=this.viewer,oe=this.device,pe=this.distortion,_e=new Float32Array(4),Ne=pe.distortInverse(Math.tan(-Tt*q.fov)),nt=pe.distortInverse(Math.tan(Tt*q.fov)),at=pe.distortInverse(Math.tan(Tt*q.fov)),Kt=pe.distortInverse(Math.tan(-Tt*q.fov)),Wt=oe.widthMeters/4,pt=oe.heightMeters/2,Rt=q.baselineLensDistance-oe.bevelMeters-pt,sn=q.interLensDistance/2-Wt,Dn=-Rt,Yn=q.screenLensDistance,hi=(sn-Wt)/Yn,Di=(Dn+pt)/Yn,Pi=(sn+Wt)/Yn,Ei=(Dn-pt)/Yn;return _e[0]=Math.max(Ne,hi),_e[1]=Math.min(nt,Di),_e[2]=Math.min(at,Pi),_e[3]=Math.max(Kt,Ei),_e},bi.prototype.getLeftEyeVisibleScreenRect=function(q){var oe=this.viewer,pe=this.device,_e=oe.screenLensDistance,Ne=(pe.widthMeters-oe.interLensDistance)/2,nt=oe.baselineLensDistance-pe.bevelMeters,at=(q[0]*_e+Ne)/pe.widthMeters,Kt=(q[1]*_e+nt)/pe.heightMeters,Wt=(q[2]*_e+Ne)/pe.widthMeters,pt=(q[3]*_e+nt)/pe.heightMeters;return{x:at,y:pt,width:Wt-at,height:Kt-pt}},bi.prototype.getFieldOfViewLeftEye=function(q){return q?this.getUndistortedFieldOfViewLeftEye():this.getDistortedFieldOfViewLeftEye()},bi.prototype.getFieldOfViewRightEye=function(q){var oe=this.getFieldOfViewLeftEye(q);return{leftDegrees:oe.rightDegrees,rightDegrees:oe.leftDegrees,upDegrees:oe.upDegrees,downDegrees:oe.downDegrees}},bi.prototype.getUndistortedFieldOfViewLeftEye=function(){var q=this.getUndistortedParams_();return{leftDegrees:Ht*Math.atan(q.outerDist),rightDegrees:Ht*Math.atan(q.innerDist),downDegrees:Ht*Math.atan(q.bottomDist),upDegrees:Ht*Math.atan(q.topDist)}},bi.prototype.getUndistortedViewportLeftEye=function(){var q=this.getUndistortedParams_(),oe=this.viewer,pe=this.device,_e=oe.screenLensDistance,Ne=pe.widthMeters/_e,nt=pe.heightMeters/_e,at=pe.width/Ne,Kt=pe.height/nt,Wt=Math.round((q.eyePosX-q.outerDist)*at),pt=Math.round((q.eyePosY-q.bottomDist)*Kt);return{x:Wt,y:pt,width:Math.round((q.eyePosX+q.innerDist)*at)-Wt,height:Math.round((q.eyePosY+q.topDist)*Kt)-pt}},bi.prototype.getUndistortedParams_=function(){var q=this.viewer,oe=this.device,pe=this.distortion,_e=q.screenLensDistance,Ne=q.interLensDistance/2/_e,nt=oe.widthMeters/_e,at=oe.heightMeters/_e,Kt=nt/2-Ne,Wt=(q.baselineLensDistance-oe.bevelMeters)/_e,pt=q.fov,Rt=pe.distortInverse(Math.tan(Tt*pt)),sn=Math.min(Kt,Rt),Dn=Math.min(Ne,Rt),Yn=Math.min(Wt,Rt),hi=Math.min(at-Wt,Rt);return{outerDist:sn,innerDist:Dn,topDist:hi,bottomDist:Yn,eyePosX:Kt,eyePosY:Wt}};function vn(q){this.id=q.id,this.label=q.label,this.fov=q.fov,this.interLensDistance=q.interLensDistance,this.baselineLensDistance=q.baselineLensDistance,this.screenLensDistance=q.screenLensDistance,this.distortionCoefficients=q.distortionCoefficients,this.inverseCoefficients=q.inverseCoefficients}bi.Viewers=or;var Nt=1,ln="2019-11-09T17:36:14Z",ei=[{type:"android",rules:[{mdmh:"asus/*/Nexus 7/*"},{ua:"Nexus 7"}],dpi:[320.8,323],bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_X00PD/*"},{ua:"ASUS_X00PD"}],dpi:245,bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_X008D/*"},{ua:"ASUS_X008D"}],dpi:282,bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_Z00AD/*"},{ua:"ASUS_Z00AD"}],dpi:[403,404.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 2 XL/*"},{ua:"Pixel 2 XL"}],dpi:537.9,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 3 XL/*"},{ua:"Pixel 3 XL"}],dpi:[558.5,553.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel XL/*"},{ua:"Pixel XL"}],dpi:[537.9,533],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 3/*"},{ua:"Pixel 3"}],dpi:442.4,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 2/*"},{ua:"Pixel 2"}],dpi:441,bw:3,ac:500},{type:"android",rules:[{mdmh:"Google/*/Pixel/*"},{ua:"Pixel"}],dpi:[432.6,436.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC6435LVW/*"},{ua:"HTC6435LVW"}],dpi:[449.7,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC One XL/*"},{ua:"HTC One XL"}],dpi:[315.3,314.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"htc/*/Nexus 9/*"},{ua:"Nexus 9"}],dpi:289,bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One M9/*"},{ua:"HTC One M9"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One_M8/*"},{ua:"HTC One_M8"}],dpi:[449.7,447.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One/*"},{ua:"HTC One"}],dpi:472.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/Nexus 6P/*"},{ua:"Nexus 6P"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/BLN-L24/*"},{ua:"HONORBLN-L24"}],dpi:480,bw:4,ac:500},{type:"android",rules:[{mdmh:"Huawei/*/BKL-L09/*"},{ua:"BKL-L09"}],dpi:403,bw:3.47,ac:500},{type:"android",rules:[{mdmh:"LENOVO/*/Lenovo PB2-690Y/*"},{ua:"Lenovo PB2-690Y"}],dpi:[457.2,454.713],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5X/*"},{ua:"Nexus 5X"}],dpi:[422,419.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS345/*"},{ua:"LGMS345"}],dpi:[221.7,219.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D800/*"},{ua:"LG-D800"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D850/*"},{ua:"LG-D850"}],dpi:[537.9,541.9],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/VS985 4G/*"},{ua:"VS985 4G"}],dpi:[537.9,535.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5/*"},{ua:"Nexus 5 B"}],dpi:[442.4,444.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 4/*"},{ua:"Nexus 4"}],dpi:[319.8,318.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LG-P769/*"},{ua:"LG-P769"}],dpi:[240.6,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS323/*"},{ua:"LGMS323"}],dpi:[206.6,204.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGLS996/*"},{ua:"LGLS996"}],dpi:[403.4,401.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/4560MMX/*"},{ua:"4560MMX"}],dpi:[240,219.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/A250/*"},{ua:"Micromax A250"}],dpi:[480,446.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/Micromax AQ4501/*"},{ua:"Micromax AQ4501"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/G5/*"},{ua:"Moto G (5) Plus"}],dpi:[403.4,403],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/DROID RAZR/*"},{ua:"DROID RAZR"}],dpi:[368.1,256.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT830C/*"},{ua:"XT830C"}],dpi:[254,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1021/*"},{ua:"XT1021"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1023/*"},{ua:"XT1023"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1028/*"},{ua:"XT1028"}],dpi:[326.6,327.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1034/*"},{ua:"XT1034"}],dpi:[326.6,328.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1053/*"},{ua:"XT1053"}],dpi:[315.3,316.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1562/*"},{ua:"XT1562"}],dpi:[403.4,402.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/Nexus 6/*"},{ua:"Nexus 6 B"}],dpi:[494.3,489.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1063/*"},{ua:"XT1063"}],dpi:[295,296.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1064/*"},{ua:"XT1064"}],dpi:[295,295.6],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1092/*"},{ua:"XT1092"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1095/*"},{ua:"XT1095"}],dpi:[422,423.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/G4/*"},{ua:"Moto G (4)"}],dpi:401,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/A0001/*"},{ua:"A0001"}],dpi:[403.4,401],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1001/*"},{ua:"ONE E1001"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1003/*"},{ua:"ONE E1003"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1005/*"},{ua:"ONE E1005"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2001/*"},{ua:"ONE A2001"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2003/*"},{ua:"ONE A2003"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2005/*"},{ua:"ONE A2005"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A3000/*"},{ua:"ONEPLUS A3000"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A3003/*"},{ua:"ONEPLUS A3003"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A3010/*"},{ua:"ONEPLUS A3010"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A5000/*"},{ua:"ONEPLUS A5000 "}],dpi:[403.411,399.737],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A5010/*"},{ua:"ONEPLUS A5010"}],dpi:[403,400],bw:2,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A6000/*"},{ua:"ONEPLUS A6000"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A6003/*"},{ua:"ONEPLUS A6003"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A6010/*"},{ua:"ONEPLUS A6010"}],dpi:401,bw:2,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A6013/*"},{ua:"ONEPLUS A6013"}],dpi:401,bw:2,ac:500},{type:"android",rules:[{mdmh:"OPPO/*/X909/*"},{ua:"X909"}],dpi:[442.4,444.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9082/*"},{ua:"GT-I9082"}],dpi:[184.7,185.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G360P/*"},{ua:"SM-G360P"}],dpi:[196.7,205.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Nexus S/*"},{ua:"Nexus S"}],dpi:[234.5,229.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[304.8,303.9],bw:5,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-T230NU/*"},{ua:"SM-T230NU"}],dpi:216,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SGH-T399/*"},{ua:"SGH-T399"}],dpi:[217.7,231.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SGH-M919/*"},{ua:"SGH-M919"}],dpi:[440.8,437.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N9005/*"},{ua:"SM-N9005"}],dpi:[386.4,387],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SM-N900A/*"},{ua:"SAMSUNG-SM-N900A"}],dpi:[386.4,387.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9500/*"},{ua:"GT-I9500"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/GT-I9505/*"},{ua:"GT-I9505"}],dpi:439.4,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900F/*"},{ua:"SM-G900F"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900M/*"},{ua:"SM-G900M"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G800F/*"},{ua:"SM-G800F"}],dpi:326.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G906S/*"},{ua:"SM-G906S"}],dpi:[562.7,572.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[306.7,304.8],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-T535/*"},{ua:"SM-T535"}],dpi:[142.6,136.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-N920C/*"},{ua:"SM-N920C"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920P/*"},{ua:"SM-N920P"}],dpi:[386.3655,390.144],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920W8/*"},{ua:"SM-N920W8"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300I/*"},{ua:"GT-I9300I"}],dpi:[304.8,305.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9195/*"},{ua:"GT-I9195"}],dpi:[249.4,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SPH-L520/*"},{ua:"SPH-L520"}],dpi:[249.4,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SGH-I717/*"},{ua:"SAMSUNG-SGH-I717"}],dpi:285.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SPH-D710/*"},{ua:"SPH-D710"}],dpi:[217.7,204.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-N7100/*"},{ua:"GT-N7100"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SCH-I605/*"},{ua:"SCH-I605"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Galaxy Nexus/*"},{ua:"Galaxy Nexus"}],dpi:[315.3,314.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910H/*"},{ua:"SM-N910H"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910C/*"},{ua:"SM-N910C"}],dpi:[515.2,520.2],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G130M/*"},{ua:"SM-G130M"}],dpi:[165.9,164.8],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G928I/*"},{ua:"SM-G928I"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G920F/*"},{ua:"SM-G920F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G920P/*"},{ua:"SM-G920P"}],dpi:[522.5,577],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G925F/*"},{ua:"SM-G925F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G925V/*"},{ua:"SM-G925V"}],dpi:[522.5,576.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G930F/*"},{ua:"SM-G930F"}],dpi:576.6,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G935F/*"},{ua:"SM-G935F"}],dpi:533,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G950F/*"},{ua:"SM-G950F"}],dpi:[562.707,565.293],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G955U/*"},{ua:"SM-G955U"}],dpi:[522.514,525.762],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G955F/*"},{ua:"SM-G955F"}],dpi:[522.514,525.762],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G960F/*"},{ua:"SM-G960F"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G9600/*"},{ua:"SM-G9600"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960T/*"},{ua:"SM-G960T"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960N/*"},{ua:"SM-G960N"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960U/*"},{ua:"SM-G960U"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G9608/*"},{ua:"SM-G9608"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960FD/*"},{ua:"SM-G960FD"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960W/*"},{ua:"SM-G960W"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G965F/*"},{ua:"SM-G965F"}],dpi:529,bw:2,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/C6903/*"},{ua:"C6903"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/D6653/*"},{ua:"D6653"}],dpi:[428.6,427.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6653/*"},{ua:"E6653"}],dpi:[428.6,425.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6853/*"},{ua:"E6853"}],dpi:[403.4,401.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/SGP321/*"},{ua:"SGP321"}],dpi:[224.7,224.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"TCT/*/ALCATEL ONE TOUCH Fierce/*"},{ua:"ALCATEL ONE TOUCH Fierce"}],dpi:[240,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"THL/*/thl 5000/*"},{ua:"thl 5000"}],dpi:[480,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Fly/*/IQ4412/*"},{ua:"IQ4412"}],dpi:307.9,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"ZTE/*/ZTE Blade L2/*"},{ua:"ZTE Blade L2"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"BENEVE/*/VR518/*"},{ua:"VR518"}],dpi:480,bw:3,ac:500},{type:"ios",rules:[{res:[640,960]}],dpi:[325.1,328.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[640,1136]}],dpi:[317.1,320.2],bw:3,ac:1e3},{type:"ios",rules:[{res:[750,1334]}],dpi:326.4,bw:4,ac:1e3},{type:"ios",rules:[{res:[1242,2208]}],dpi:[453.6,458.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2001]}],dpi:[410.9,415.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2436]}],dpi:458,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/EML-L29/*"},{ua:"EML-L29"}],dpi:428,bw:3.45,ac:500},{type:"android",rules:[{mdmh:"Nokia/*/Nokia 7.1/*"},{ua:"Nokia 7.1"}],dpi:[432,431.9],bw:3,ac:500},{type:"ios",rules:[{res:[1242,2688]}],dpi:458,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G570M/*"},{ua:"SM-G570M"}],dpi:320,bw:3.684,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G970F/*"},{ua:"SM-G970F"}],dpi:438,bw:2.281,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G973F/*"},{ua:"SM-G973F"}],dpi:550,bw:2.002,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G975F/*"},{ua:"SM-G975F"}],dpi:522,bw:2.054,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G977F/*"},{ua:"SM-G977F"}],dpi:505,bw:2.334,ac:500},{type:"ios",rules:[{res:[828,1792]}],dpi:326,bw:5,ac:500}],yn={format:Nt,last_updated:ln,devices:ei};function De(q,oe){if(this.dpdb=yn,this.recalculateDeviceParams_(),q){this.onDeviceParamsUpdated=oe;var pe=new XMLHttpRequest,_e=this;pe.open("GET",q,!0),pe.addEventListener("load",function(){_e.loading=!1,pe.status>=200&&pe.status<=299?(_e.dpdb=JSON.parse(pe.response),_e.recalculateDeviceParams_()):console.error("Error loading online DPDB!")}),pe.send()}}De.prototype.getDeviceParams=function(){return this.deviceParams},De.prototype.recalculateDeviceParams_=function(){var q=this.calcDeviceParams_();q?(this.deviceParams=q,this.onDeviceParamsUpdated&&this.onDeviceParamsUpdated(this.deviceParams)):console.error("Failed to recalculate device parameters.")},De.prototype.calcDeviceParams_=function(){var q=this.dpdb;if(!q)return console.error("DPDB not available."),null;if(q.format!=1)return console.error("DPDB has unexpected format version."),null;if(!q.devices||!q.devices.length)return console.error("DPDB does not have a devices section."),null;var oe=navigator.userAgent||navigator.vendor||window.opera,pe=rt(),_e=He();if(!q.devices)return console.error("DPDB has no devices section."),null;for(var Ne=0;Ne<q.devices.length;Ne++){var nt=q.devices[Ne];if(!nt.rules){console.warn("Device["+Ne+"] has no rules section.");continue}if(nt.type!="ios"&&nt.type!="android"){console.warn("Device["+Ne+"] has invalid type.");continue}if(ee()==(nt.type=="ios")){for(var at=!1,Kt=0;Kt<nt.rules.length;Kt++){var Wt=nt.rules[Kt];if(this.ruleMatches_(Wt,oe,pe,_e)){at=!0;break}}if(at){var pt=nt.dpi[0]||nt.dpi,Rt=nt.dpi[1]||nt.dpi;return new st({xdpi:pt,ydpi:Rt,bevelMm:nt.bw})}}}return console.warn("No DPDB device match."),null},De.prototype.ruleMatches_=function(q,oe,pe,_e){if(!q.ua&&!q.res||(q.ua&&q.ua.substring(0,2)==="SM"&&(q.ua=q.ua.substring(0,7)),q.ua&&oe.indexOf(q.ua)<0))return!1;if(q.res){if(!q.res[0]||!q.res[1])return!1;var Ne=q.res[0],nt=q.res[1];if(Math.min(pe,_e)!=Math.min(Ne,nt)||Math.max(pe,_e)!=Math.max(Ne,nt))return!1}return!0};function st(q){this.xdpi=q.xdpi,this.ydpi=q.ydpi,this.bevelMm=q.bevelMm}function At(q,oe){this.set(q,oe)}At.prototype.set=function(q,oe){this.sample=q,this.timestampS=oe},At.prototype.copy=function(q){this.set(q.sample,q.timestampS)};function ot(q,oe){this.kFilter=q,this.isDebug=oe,this.currentAccelMeasurement=new At,this.currentGyroMeasurement=new At,this.previousGyroMeasurement=new At,ee()?this.filterQ=new cn(-1,0,0,1):this.filterQ=new cn(1,0,0,1),this.previousFilterQ=new cn,this.previousFilterQ.copy(this.filterQ),this.accelQ=new cn,this.isOrientationInitialized=!1,this.estimatedGravity=new nn,this.measuredGravity=new nn,this.gyroIntegralQ=new cn}ot.prototype.addAccelMeasurement=function(q,oe){this.currentAccelMeasurement.set(q,oe)},ot.prototype.addGyroMeasurement=function(q,oe){this.currentGyroMeasurement.set(q,oe);var pe=oe-this.previousGyroMeasurement.timestampS;je(pe)&&this.run_(),this.previousGyroMeasurement.copy(this.currentGyroMeasurement)},ot.prototype.run_=function(){if(!this.isOrientationInitialized){this.accelQ=this.accelToQuaternion_(this.currentAccelMeasurement.sample),this.previousFilterQ.copy(this.accelQ),this.isOrientationInitialized=!0;return}var q=this.currentGyroMeasurement.timestampS-this.previousGyroMeasurement.timestampS,oe=this.gyroToQuaternionDelta_(this.currentGyroMeasurement.sample,q);this.gyroIntegralQ.multiply(oe),this.filterQ.copy(this.previousFilterQ),this.filterQ.multiply(oe);var pe=new cn;pe.copy(this.filterQ),pe.inverse(),this.estimatedGravity.set(0,0,-1),this.estimatedGravity.applyQuaternion(pe),this.estimatedGravity.normalize(),this.measuredGravity.copy(this.currentAccelMeasurement.sample),this.measuredGravity.normalize();var _e=new cn;_e.setFromUnitVectors(this.estimatedGravity,this.measuredGravity),_e.inverse(),this.isDebug&&console.log("Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)",Ht*Bn(_e),this.estimatedGravity.x.toFixed(1),this.estimatedGravity.y.toFixed(1),this.estimatedGravity.z.toFixed(1),this.measuredGravity.x.toFixed(1),this.measuredGravity.y.toFixed(1),this.measuredGravity.z.toFixed(1));var Ne=new cn;Ne.copy(this.filterQ),Ne.multiply(_e),this.filterQ.slerp(Ne,1-this.kFilter),this.previousFilterQ.copy(this.filterQ)},ot.prototype.getOrientation=function(){return this.filterQ},ot.prototype.accelToQuaternion_=function(q){var oe=new nn;oe.copy(q),oe.normalize();var pe=new cn;return pe.setFromUnitVectors(new nn(0,0,-1),oe),pe.inverse(),pe},ot.prototype.gyroToQuaternionDelta_=function(q,oe){var pe=new cn,_e=new nn;return _e.copy(q),_e.normalize(),pe.setFromAxisAngle(_e,q.length()*oe),pe};function wt(q,oe){this.predictionTimeS=q,this.isDebug=oe,this.previousQ=new cn,this.previousTimestampS=null,this.deltaQ=new cn,this.outQ=new cn}wt.prototype.getPrediction=function(q,oe,pe){if(!this.previousTimestampS)return this.previousQ.copy(q),this.previousTimestampS=pe,q;var _e=new nn;_e.copy(oe),_e.normalize();var Ne=oe.length();if(Ne<Tt*20)return this.isDebug&&console.log("Moving slowly, at %s deg/s: no prediction",(Ht*Ne).toFixed(1)),this.outQ.copy(q),this.previousQ.copy(q),this.outQ;var nt=Ne*this.predictionTimeS;return this.deltaQ.setFromAxisAngle(_e,nt),this.outQ.copy(this.previousQ),this.outQ.multiply(this.deltaQ),this.previousQ.copy(q),this.previousTimestampS=pe,this.outQ};function xn(q,oe,pe,_e){this.yawOnly=pe,this.accelerometer=new nn,this.gyroscope=new nn,this.filter=new ot(q,_e),this.posePredictor=new wt(oe,_e),this.isFirefoxAndroid=W(),this.isIOS=ee();var Ne=ce();this.isDeviceMotionInRadians=!this.isIOS&&Ne&&Ne<66,this.isWithoutDeviceMotion=xe()||he(),this.filterToWorldQ=new cn,ee()?this.filterToWorldQ.setFromAxisAngle(new nn(1,0,0),Math.PI/2):this.filterToWorldQ.setFromAxisAngle(new nn(1,0,0),-Math.PI/2),this.inverseWorldToScreenQ=new cn,this.worldToScreenQ=new cn,this.originalPoseAdjustQ=new cn,this.originalPoseAdjustQ.setFromAxisAngle(new nn(0,0,1),-window.orientation*Math.PI/180),this.setScreenTransform_(),Fe()&&this.filterToWorldQ.multiply(this.inverseWorldToScreenQ),this.resetQ=new cn,this.orientationOut_=new Float32Array(4),this.start()}xn.prototype.getPosition=function(){return null},xn.prototype.getOrientation=function(){var q=void 0;if(this.isWithoutDeviceMotion&&this._deviceOrientationQ){this.deviceOrientationFixQ=this.deviceOrientationFixQ||function(){var Ne=new cn().setFromAxisAngle(new nn(0,0,-1),0),nt=new cn;return window.orientation===-90?nt.setFromAxisAngle(new nn(0,1,0),Math.PI/-2):nt.setFromAxisAngle(new nn(0,1,0),Math.PI/2),Ne.multiply(nt)}(),this.deviceOrientationFilterToWorldQ=this.deviceOrientationFilterToWorldQ||function(){var Ne=new cn;return Ne.setFromAxisAngle(new nn(1,0,0),-Math.PI/2),Ne}(),q=this._deviceOrientationQ;var pe=new cn;return pe.copy(q),pe.multiply(this.deviceOrientationFilterToWorldQ),pe.multiply(this.resetQ),pe.multiply(this.worldToScreenQ),pe.multiplyQuaternions(this.deviceOrientationFixQ,pe),this.yawOnly&&(pe.x=0,pe.z=0,pe.normalize()),this.orientationOut_[0]=pe.x,this.orientationOut_[1]=pe.y,this.orientationOut_[2]=pe.z,this.orientationOut_[3]=pe.w,this.orientationOut_}else{var oe=this.filter.getOrientation();q=this.posePredictor.getPrediction(oe,this.gyroscope,this.previousTimestampS)}var pe=new cn;return pe.copy(this.filterToWorldQ),pe.multiply(this.resetQ),pe.multiply(q),pe.multiply(this.worldToScreenQ),this.yawOnly&&(pe.x=0,pe.z=0,pe.normalize()),this.orientationOut_[0]=pe.x,this.orientationOut_[1]=pe.y,this.orientationOut_[2]=pe.z,this.orientationOut_[3]=pe.w,this.orientationOut_},xn.prototype.resetPose=function(){this.resetQ.copy(this.filter.getOrientation()),this.resetQ.x=0,this.resetQ.y=0,this.resetQ.z*=-1,this.resetQ.normalize(),Fe()&&this.resetQ.multiply(this.inverseWorldToScreenQ),this.resetQ.multiply(this.originalPoseAdjustQ)},xn.prototype.onDeviceOrientation_=function(q){this._deviceOrientationQ=this._deviceOrientationQ||new cn;var oe=q.alpha,pe=q.beta,_e=q.gamma;oe=(oe||0)*Math.PI/180,pe=(pe||0)*Math.PI/180,_e=(_e||0)*Math.PI/180,this._deviceOrientationQ.setFromEulerYXZ(pe,oe,-_e)},xn.prototype.onDeviceMotion_=function(q){this.updateDeviceMotion_(q)},xn.prototype.updateDeviceMotion_=function(q){var oe=q.accelerationIncludingGravity,pe=q.rotationRate,_e=q.timeStamp/1e3,Ne=_e-this.previousTimestampS;if(Ne<0){ci("fusion-pose-sensor:invalid:non-monotonic","Invalid timestamps detected: non-monotonic timestamp from devicemotion"),this.previousTimestampS=_e;return}else if(Ne<=J||Ne>K){ci("fusion-pose-sensor:invalid:outside-threshold","Invalid timestamps detected: Timestamp from devicemotion outside expected range."),this.previousTimestampS=_e;return}this.accelerometer.set(-oe.x,-oe.y,-oe.z),pe&&(ve()?this.gyroscope.set(-pe.beta,pe.alpha,pe.gamma):this.gyroscope.set(pe.alpha,pe.beta,pe.gamma),this.isDeviceMotionInRadians||this.gyroscope.multiplyScalar(Math.PI/180),this.filter.addGyroMeasurement(this.gyroscope,_e)),this.filter.addAccelMeasurement(this.accelerometer,_e),this.previousTimestampS=_e},xn.prototype.onOrientationChange_=function(q){this.setScreenTransform_()},xn.prototype.onMessage_=function(q){var oe=q.data;if(!(!oe||!oe.type)){var pe=oe.type.toLowerCase();pe==="devicemotion"&&this.updateDeviceMotion_(oe.deviceMotionEvent)}},xn.prototype.setScreenTransform_=function(){switch(this.worldToScreenQ.set(0,0,0,1),window.orientation){case 0:break;case 90:this.worldToScreenQ.setFromAxisAngle(new nn(0,0,1),-Math.PI/2);break;case-90:this.worldToScreenQ.setFromAxisAngle(new nn(0,0,1),Math.PI/2);break}this.inverseWorldToScreenQ.copy(this.worldToScreenQ),this.inverseWorldToScreenQ.inverse()},xn.prototype.start=function(){this.onDeviceMotionCallback_=this.onDeviceMotion_.bind(this),this.onOrientationChangeCallback_=this.onOrientationChange_.bind(this),this.onMessageCallback_=this.onMessage_.bind(this),this.onDeviceOrientationCallback_=this.onDeviceOrientation_.bind(this),ee()&&fn()&&window.addEventListener("message",this.onMessageCallback_),window.addEventListener("orientationchange",this.onOrientationChangeCallback_),this.isWithoutDeviceMotion?window.addEventListener("deviceorientation",this.onDeviceOrientationCallback_):window.addEventListener("devicemotion",this.onDeviceMotionCallback_)},xn.prototype.stop=function(){window.removeEventListener("devicemotion",this.onDeviceMotionCallback_),window.removeEventListener("deviceorientation",this.onDeviceOrientationCallback_),window.removeEventListener("orientationchange",this.onOrientationChangeCallback_),window.removeEventListener("message",this.onMessageCallback_)};var Nn=60,pn=new nn(1,0,0),Un=new nn(0,0,1),Kn=new cn;Kn.setFromAxisAngle(pn,-Math.PI/2),Kn.multiply(new cn().setFromAxisAngle(Un,Math.PI/2));var be=function(){function q(oe){L(this,q),this.config=oe,this.sensor=null,this.fusionSensor=null,this._out=new Float32Array(4),this.api=null,this.errors=[],this._sensorQ=new cn,this._outQ=new cn,this._onSensorRead=this._onSensorRead.bind(this),this._onSensorError=this._onSensorError.bind(this),this.init()}return N(q,[{key:"init",value:function(){var pe=null;try{pe=new RelativeOrientationSensor({frequency:Nn,referenceFrame:"screen"}),pe.addEventListener("error",this._onSensorError)}catch(_e){this.errors.push(_e),_e.name==="SecurityError"?(console.error("Cannot construct sensors due to the Feature Policy"),console.warn('Attempting to fall back using "devicemotion"; however this will fail in the future without correct permissions.'),this.useDeviceMotion()):_e.name==="ReferenceError"?this.useDeviceMotion():console.error(_e)}pe&&(this.api="sensor",this.sensor=pe,this.sensor.addEventListener("reading",this._onSensorRead),this.sensor.start())}},{key:"useDeviceMotion",value:function(){this.api="devicemotion",this.fusionSensor=new xn(this.config.K_FILTER,this.config.PREDICTION_TIME_S,this.config.YAW_ONLY,this.config.DEBUG),this.sensor&&(this.sensor.removeEventListener("reading",this._onSensorRead),this.sensor.removeEventListener("error",this._onSensorError),this.sensor=null)}},{key:"getOrientation",value:function(){if(this.fusionSensor)return this.fusionSensor.getOrientation();if(!this.sensor||!this.sensor.quaternion)return this._out[0]=this._out[1]=this._out[2]=0,this._out[3]=1,this._out;var pe=this.sensor.quaternion;this._sensorQ.set(pe[0],pe[1],pe[2],pe[3]);var _e=this._outQ;return _e.copy(Kn),_e.multiply(this._sensorQ),this.config.YAW_ONLY&&(_e.x=_e.z=0,_e.normalize()),this._out[0]=_e.x,this._out[1]=_e.y,this._out[2]=_e.z,this._out[3]=_e.w,this._out}},{key:"_onSensorError",value:function(pe){this.errors.push(pe.error),pe.error.name==="NotAllowedError"?console.error("Permission to access sensor was denied"):pe.error.name==="NotReadableError"?console.error("Sensor could not be read"):console.error(pe.error),this.useDeviceMotion()}},{key:"_onSensorRead",value:function(){}}]),q}(),Ge="<svg width='198' height='240' viewBox='0 0 198 240' xmlns='http://www.w3.org/2000/svg'><g fill='none' fill-rule='evenodd'><path d='M149.625 109.527l6.737 3.891v.886c0 .177.013.36.038.549.01.081.02.162.027.242.14 1.415.974 2.998 2.105 3.999l5.72 5.062.081-.09s4.382-2.53 5.235-3.024l25.97 14.993v54.001c0 .771-.386 1.217-.948 1.217-.233 0-.495-.076-.772-.236l-23.967-13.838-.014.024-27.322 15.775-.85-1.323c-4.731-1.529-9.748-2.74-14.951-3.61a.27.27 0 0 0-.007.024l-5.067 16.961-7.891 4.556-.037-.063v27.59c0 .772-.386 1.217-.948 1.217-.232 0-.495-.076-.772-.236l-42.473-24.522c-.95-.549-1.72-1.877-1.72-2.967v-1.035l-.021.047a5.111 5.111 0 0 0-1.816-.399 5.682 5.682 0 0 0-.546.001 13.724 13.724 0 0 1-1.918-.041c-1.655-.153-3.2-.6-4.404-1.296l-46.576-26.89.005.012-10.278-18.75c-1.001-1.827-.241-4.216 1.698-5.336l56.011-32.345a4.194 4.194 0 0 1 2.099-.572c1.326 0 2.572.659 3.227 1.853l.005-.003.227.413-.006.004a9.63 9.63 0 0 0 1.477 2.018l.277.27c1.914 1.85 4.468 2.801 7.113 2.801 1.949 0 3.948-.517 5.775-1.572.013 0 7.319-4.219 7.319-4.219a4.194 4.194 0 0 1 2.099-.572c1.326 0 2.572.658 3.226 1.853l3.25 5.928.022-.018 6.785 3.917-.105-.182 46.881-26.965m0-1.635c-.282 0-.563.073-.815.218l-46.169 26.556-5.41-3.124-3.005-5.481c-.913-1.667-2.699-2.702-4.66-2.703-1.011 0-2.02.274-2.917.792a3825 3825 0 0 1-7.275 4.195l-.044.024a9.937 9.937 0 0 1-4.957 1.353c-2.292 0-4.414-.832-5.976-2.342l-.252-.245a7.992 7.992 0 0 1-1.139-1.534 1.379 1.379 0 0 0-.06-.122l-.227-.414a1.718 1.718 0 0 0-.095-.154c-.938-1.574-2.673-2.545-4.571-2.545-1.011 0-2.02.274-2.917.792L3.125 155.502c-2.699 1.559-3.738 4.94-2.314 7.538l10.278 18.75c.177.323.448.563.761.704l46.426 26.804c1.403.81 3.157 1.332 5.072 1.508a15.661 15.661 0 0 0 2.146.046 4.766 4.766 0 0 1 .396 0c.096.004.19.011.283.022.109 1.593 1.159 3.323 2.529 4.114l42.472 24.522c.524.302 1.058.455 1.59.455 1.497 0 2.583-1.2 2.583-2.852v-26.562l7.111-4.105a1.64 1.64 0 0 0 .749-.948l4.658-15.593c4.414.797 8.692 1.848 12.742 3.128l.533.829a1.634 1.634 0 0 0 2.193.531l26.532-15.317L193 192.433c.523.302 1.058.455 1.59.455 1.497 0 2.583-1.199 2.583-2.852v-54.001c0-.584-.312-1.124-.818-1.416l-25.97-14.993a1.633 1.633 0 0 0-1.636.001c-.606.351-2.993 1.73-4.325 2.498l-4.809-4.255c-.819-.725-1.461-1.933-1.561-2.936a7.776 7.776 0 0 0-.033-.294 2.487 2.487 0 0 1-.023-.336v-.886c0-.584-.312-1.123-.817-1.416l-6.739-3.891a1.633 1.633 0 0 0-.817-.219' fill='#455A64'/><path d='M96.027 132.636l46.576 26.891c1.204.695 1.979 1.587 2.242 2.541l-.01.007-81.374 46.982h-.001c-1.654-.152-3.199-.6-4.403-1.295l-46.576-26.891 83.546-48.235' fill='#FAFAFA'/><path d='M63.461 209.174c-.008 0-.015 0-.022-.002-1.693-.156-3.228-.609-4.441-1.309l-46.576-26.89a.118.118 0 0 1 0-.203l83.546-48.235a.117.117 0 0 1 .117 0l46.576 26.891c1.227.708 2.021 1.612 2.296 2.611a.116.116 0 0 1-.042.124l-.021.016-81.375 46.981a.11.11 0 0 1-.058.016zm-50.747-28.303l46.401 26.79c1.178.68 2.671 1.121 4.32 1.276l81.272-46.922c-.279-.907-1.025-1.73-2.163-2.387l-46.517-26.857-83.313 48.1z' fill='#607D8B'/><path d='M148.327 165.471a5.85 5.85 0 0 1-.546.001c-1.894-.083-3.302-1.038-3.145-2.132a2.693 2.693 0 0 0-.072-1.105l-81.103 46.822c.628.058 1.272.073 1.918.042.182-.009.364-.009.546-.001 1.894.083 3.302 1.038 3.145 2.132l79.257-45.759' fill='#FFF'/><path d='M69.07 211.347a.118.118 0 0 1-.115-.134c.045-.317-.057-.637-.297-.925-.505-.61-1.555-1.022-2.738-1.074a5.966 5.966 0 0 0-.535.001 14.03 14.03 0 0 1-1.935-.041.117.117 0 0 1-.103-.092.116.116 0 0 1 .055-.126l81.104-46.822a.117.117 0 0 1 .171.07c.104.381.129.768.074 1.153-.045.316.057.637.296.925.506.61 1.555 1.021 2.739 1.073.178.008.357.008.535-.001a.117.117 0 0 1 .064.218l-79.256 45.759a.114.114 0 0 1-.059.016zm-3.405-2.372c.089 0 .177.002.265.006 1.266.056 2.353.488 2.908 1.158.227.274.35.575.36.882l78.685-45.429c-.036 0-.072-.001-.107-.003-1.267-.056-2.354-.489-2.909-1.158-.282-.34-.402-.724-.347-1.107a2.604 2.604 0 0 0-.032-.91L63.846 208.97a13.91 13.91 0 0 0 1.528.012c.097-.005.194-.007.291-.007z' fill='#607D8B'/><path d='M2.208 162.134c-1.001-1.827-.241-4.217 1.698-5.337l56.011-32.344c1.939-1.12 4.324-.546 5.326 1.281l.232.41a9.344 9.344 0 0 0 1.47 2.021l.278.27c3.325 3.214 8.583 3.716 12.888 1.23l7.319-4.22c1.94-1.119 4.324-.546 5.325 1.282l3.25 5.928-83.519 48.229-10.278-18.75z' fill='#FAFAFA'/><path d='M12.486 181.001a.112.112 0 0 1-.031-.005.114.114 0 0 1-.071-.056L2.106 162.19c-1.031-1.88-.249-4.345 1.742-5.494l56.01-32.344a4.328 4.328 0 0 1 2.158-.588c1.415 0 2.65.702 3.311 1.882.01.008.018.017.024.028l.227.414a.122.122 0 0 1 .013.038 9.508 9.508 0 0 0 1.439 1.959l.275.266c1.846 1.786 4.344 2.769 7.031 2.769 1.977 0 3.954-.538 5.717-1.557a.148.148 0 0 1 .035-.013l7.284-4.206a4.321 4.321 0 0 1 2.157-.588c1.427 0 2.672.716 3.329 1.914l3.249 5.929a.116.116 0 0 1-.044.157l-83.518 48.229a.116.116 0 0 1-.059.016zm49.53-57.004c-.704 0-1.41.193-2.041.557l-56.01 32.345c-1.882 1.086-2.624 3.409-1.655 5.179l10.221 18.645 83.317-48.112-3.195-5.829c-.615-1.122-1.783-1.792-3.124-1.792a4.08 4.08 0 0 0-2.04.557l-7.317 4.225a.148.148 0 0 1-.035.013 11.7 11.7 0 0 1-5.801 1.569c-2.748 0-5.303-1.007-7.194-2.835l-.278-.27a9.716 9.716 0 0 1-1.497-2.046.096.096 0 0 1-.013-.037l-.191-.347a.11.11 0 0 1-.023-.029c-.615-1.123-1.783-1.793-3.124-1.793z' fill='#607D8B'/><path d='M42.434 155.808c-2.51-.001-4.697-1.258-5.852-3.365-1.811-3.304-.438-7.634 3.059-9.654l12.291-7.098a7.599 7.599 0 0 1 3.789-1.033c2.51 0 4.697 1.258 5.852 3.365 1.811 3.304.439 7.634-3.059 9.654l-12.291 7.098a7.606 7.606 0 0 1-3.789 1.033zm13.287-20.683a7.128 7.128 0 0 0-3.555.971l-12.291 7.098c-3.279 1.893-4.573 5.942-2.883 9.024 1.071 1.955 3.106 3.122 5.442 3.122a7.13 7.13 0 0 0 3.556-.97l12.291-7.098c3.279-1.893 4.572-5.942 2.883-9.024-1.072-1.955-3.106-3.123-5.443-3.123z' fill='#607D8B'/><path d='M149.588 109.407l6.737 3.89v.887c0 .176.013.36.037.549.011.081.02.161.028.242.14 1.415.973 2.998 2.105 3.999l7.396 6.545c.177.156.358.295.541.415 1.579 1.04 2.95.466 3.062-1.282.049-.784.057-1.595.023-2.429l-.003-.16v-1.151l25.987 15.003v54c0 1.09-.77 1.53-1.72.982l-42.473-24.523c-.95-.548-1.72-1.877-1.72-2.966v-34.033' fill='#FAFAFA'/><path d='M194.553 191.25c-.257 0-.54-.085-.831-.253l-42.472-24.521c-.981-.567-1.779-1.943-1.779-3.068v-34.033h.234v34.033c0 1.051.745 2.336 1.661 2.866l42.473 24.521c.424.245.816.288 1.103.122.285-.164.442-.52.442-1.002v-53.933l-25.753-14.868.003 1.106c.034.832.026 1.654-.024 2.439-.054.844-.396 1.464-.963 1.746-.619.309-1.45.173-2.28-.373a5.023 5.023 0 0 1-.553-.426l-7.397-6.544c-1.158-1.026-1.999-2.625-2.143-4.076a9.624 9.624 0 0 0-.027-.238 4.241 4.241 0 0 1-.038-.564v-.82l-6.68-3.856.117-.202 6.738 3.89.058.034v.954c0 .171.012.351.036.533.011.083.021.165.029.246.138 1.395.948 2.935 2.065 3.923l7.397 6.545c.173.153.35.289.527.406.758.499 1.504.63 2.047.359.49-.243.786-.795.834-1.551.05-.778.057-1.591.024-2.417l-.004-.163v-1.355l.175.1 25.987 15.004.059.033v54.068c0 .569-.198.996-.559 1.204a1.002 1.002 0 0 1-.506.131' fill='#607D8B'/><path d='M145.685 163.161l24.115 13.922-25.978 14.998-1.462-.307c-6.534-2.17-13.628-3.728-21.019-4.616-4.365-.524-8.663 1.096-9.598 3.62a2.746 2.746 0 0 0-.011 1.928c1.538 4.267 4.236 8.363 7.995 12.135l.532.845-25.977 14.997-24.115-13.922 75.518-43.6' fill='#FFF'/><path d='M94.282 220.818l-.059-.033-24.29-14.024.175-.101 75.577-43.634.058.033 24.29 14.024-26.191 15.122-.045-.01-1.461-.307c-6.549-2.174-13.613-3.725-21.009-4.614a13.744 13.744 0 0 0-1.638-.097c-3.758 0-7.054 1.531-7.837 3.642a2.62 2.62 0 0 0-.01 1.848c1.535 4.258 4.216 8.326 7.968 12.091l.016.021.526.835.006.01.064.102-.105.061-25.977 14.998-.058.033zm-23.881-14.057l23.881 13.788 24.802-14.32c.546-.315.846-.489 1.017-.575l-.466-.74c-3.771-3.787-6.467-7.881-8.013-12.168a2.851 2.851 0 0 1 .011-2.008c.815-2.199 4.203-3.795 8.056-3.795.557 0 1.117.033 1.666.099 7.412.891 14.491 2.445 21.041 4.621.836.175 1.215.254 1.39.304l25.78-14.884-23.881-13.788-75.284 43.466z' fill='#607D8B'/><path d='M167.23 125.979v50.871l-27.321 15.773-6.461-14.167c-.91-1.996-3.428-1.738-5.624.574a10.238 10.238 0 0 0-2.33 4.018l-6.46 21.628-27.322 15.774v-50.871l75.518-43.6' fill='#FFF'/><path d='M91.712 220.567a.127.127 0 0 1-.059-.016.118.118 0 0 1-.058-.101v-50.871c0-.042.023-.08.058-.101l75.519-43.6a.117.117 0 0 1 .175.101v50.871c0 .041-.023.08-.059.1l-27.321 15.775a.118.118 0 0 1-.094.01.12.12 0 0 1-.071-.063l-6.46-14.168c-.375-.822-1.062-1.275-1.934-1.275-1.089 0-2.364.686-3.5 1.881a10.206 10.206 0 0 0-2.302 3.972l-6.46 21.627a.118.118 0 0 1-.054.068L91.77 220.551a.12.12 0 0 1-.058.016zm.117-50.92v50.601l27.106-15.65 6.447-21.583a10.286 10.286 0 0 1 2.357-4.065c1.18-1.242 2.517-1.954 3.669-1.954.969 0 1.731.501 2.146 1.411l6.407 14.051 27.152-15.676v-50.601l-75.284 43.466z' fill='#607D8B'/><path d='M168.543 126.213v50.87l-27.322 15.774-6.46-14.168c-.91-1.995-3.428-1.738-5.624.574a10.248 10.248 0 0 0-2.33 4.019l-6.461 21.627-27.321 15.774v-50.87l75.518-43.6' fill='#FFF'/><path d='M93.025 220.8a.123.123 0 0 1-.059-.015.12.12 0 0 1-.058-.101v-50.871c0-.042.023-.08.058-.101l75.518-43.6a.112.112 0 0 1 .117 0c.036.02.059.059.059.1v50.871a.116.116 0 0 1-.059.101l-27.321 15.774a.111.111 0 0 1-.094.01.115.115 0 0 1-.071-.062l-6.46-14.168c-.375-.823-1.062-1.275-1.935-1.275-1.088 0-2.363.685-3.499 1.881a10.19 10.19 0 0 0-2.302 3.971l-6.461 21.628a.108.108 0 0 1-.053.067l-27.322 15.775a.12.12 0 0 1-.058.015zm.117-50.919v50.6l27.106-15.649 6.447-21.584a10.293 10.293 0 0 1 2.357-4.065c1.179-1.241 2.516-1.954 3.668-1.954.969 0 1.732.502 2.147 1.412l6.407 14.051 27.152-15.676v-50.601l-75.284 43.466z' fill='#607D8B'/><path d='M169.8 177.083l-27.322 15.774-6.46-14.168c-.91-1.995-3.428-1.738-5.625.574a10.246 10.246 0 0 0-2.329 4.019l-6.461 21.627-27.321 15.774v-50.87l75.518-43.6v50.87z' fill='#FAFAFA'/><path d='M94.282 220.917a.234.234 0 0 1-.234-.233v-50.871c0-.083.045-.161.117-.202l75.518-43.601a.234.234 0 1 1 .35.202v50.871a.233.233 0 0 1-.116.202l-27.322 15.775a.232.232 0 0 1-.329-.106l-6.461-14.168c-.36-.789-.992-1.206-1.828-1.206-1.056 0-2.301.672-3.415 1.844a10.099 10.099 0 0 0-2.275 3.924l-6.46 21.628a.235.235 0 0 1-.107.136l-27.322 15.774a.23.23 0 0 1-.116.031zm.233-50.969v50.331l26.891-15.525 6.434-21.539a10.41 10.41 0 0 1 2.384-4.112c1.201-1.265 2.569-1.991 3.753-1.991 1.018 0 1.818.526 2.253 1.48l6.354 13.934 26.982-15.578v-50.331l-75.051 43.331z' fill='#607D8B'/><path d='M109.894 199.943c-1.774 0-3.241-.725-4.244-2.12a.224.224 0 0 1 .023-.294.233.233 0 0 1 .301-.023c.78.547 1.705.827 2.75.827 1.323 0 2.754-.439 4.256-1.306 5.311-3.067 9.631-10.518 9.631-16.611 0-1.927-.442-3.56-1.278-4.724a.232.232 0 0 1 .323-.327c1.671 1.172 2.591 3.381 2.591 6.219 0 6.242-4.426 13.863-9.865 17.003-1.574.908-3.084 1.356-4.488 1.356zm-2.969-1.542c.813.651 1.82.877 2.968.877h.001c1.321 0 2.753-.327 4.254-1.194 5.311-3.067 9.632-10.463 9.632-16.556 0-1.979-.463-3.599-1.326-4.761.411 1.035.625 2.275.625 3.635 0 6.243-4.426 13.883-9.865 17.023-1.574.909-3.084 1.317-4.49 1.317-.641 0-1.243-.149-1.799-.341z' fill='#607D8B'/><path d='M113.097 197.23c5.384-3.108 9.748-10.636 9.748-16.814 0-2.051-.483-3.692-1.323-4.86-1.784-1.252-4.374-1.194-7.257.47-5.384 3.108-9.748 10.636-9.748 16.814 0 2.051.483 3.692 1.323 4.86 1.784 1.252 4.374 1.194 7.257-.47' fill='#FAFAFA'/><path d='M108.724 198.614c-1.142 0-2.158-.213-3.019-.817-.021-.014-.04.014-.055-.007-.894-1.244-1.367-2.948-1.367-4.973 0-6.242 4.426-13.864 9.865-17.005 1.574-.908 3.084-1.363 4.49-1.363 1.142 0 2.158.309 3.018.913a.23.23 0 0 1 .056.056c.894 1.244 1.367 2.972 1.367 4.997 0 6.243-4.426 13.783-9.865 16.923-1.574.909-3.084 1.276-4.49 1.276zm-2.718-1.109c.774.532 1.688.776 2.718.776 1.323 0 2.754-.413 4.256-1.28 5.311-3.066 9.631-10.505 9.631-16.598 0-1.909-.434-3.523-1.255-4.685-.774-.533-1.688-.799-2.718-.799-1.323 0-2.755.441-4.256 1.308-5.311 3.066-9.631 10.506-9.631 16.599 0 1.909.434 3.517 1.255 4.679z' fill='#607D8B'/><path d='M149.318 114.262l-9.984 8.878 15.893 11.031 5.589-6.112-11.498-13.797' fill='#FAFAFA'/><path d='M169.676 120.84l-9.748 5.627c-3.642 2.103-9.528 2.113-13.147.024-3.62-2.089-3.601-5.488.041-7.591l9.495-5.608-6.729-3.885-81.836 47.071 45.923 26.514 3.081-1.779c.631-.365.869-.898.618-1.39-2.357-4.632-2.593-9.546-.683-14.262 5.638-13.92 24.509-24.815 48.618-28.07 8.169-1.103 16.68-.967 24.704.394.852.145 1.776.008 2.407-.357l3.081-1.778-25.825-14.91' fill='#FAFAFA'/><path d='M113.675 183.459a.47.47 0 0 1-.233-.062l-45.924-26.515a.468.468 0 0 1 .001-.809l81.836-47.071a.467.467 0 0 1 .466 0l6.729 3.885a.467.467 0 0 1-.467.809l-6.496-3.75-80.9 46.533 44.988 25.973 2.848-1.644c.192-.111.62-.409.435-.773-2.416-4.748-2.658-9.814-.7-14.65 2.806-6.927 8.885-13.242 17.582-18.263 8.657-4.998 19.518-8.489 31.407-10.094 8.198-1.107 16.79-.97 24.844.397.739.125 1.561.007 2.095-.301l2.381-1.374-25.125-14.506a.467.467 0 0 1 .467-.809l25.825 14.91a.467.467 0 0 1 0 .809l-3.081 1.779c-.721.417-1.763.575-2.718.413-7.963-1.351-16.457-1.486-24.563-.392-11.77 1.589-22.512 5.039-31.065 9.977-8.514 4.916-14.456 11.073-17.183 17.805-1.854 4.578-1.623 9.376.666 13.875.37.725.055 1.513-.8 2.006l-3.081 1.78a.476.476 0 0 1-.234.062' fill='#455A64'/><path d='M153.316 128.279c-2.413 0-4.821-.528-6.652-1.586-1.818-1.049-2.82-2.461-2.82-3.975 0-1.527 1.016-2.955 2.861-4.02l9.493-5.607a.233.233 0 1 1 .238.402l-9.496 5.609c-1.696.979-2.628 2.263-2.628 3.616 0 1.34.918 2.608 2.585 3.571 3.549 2.049 9.343 2.038 12.914-.024l9.748-5.628a.234.234 0 0 1 .234.405l-9.748 5.628c-1.858 1.072-4.296 1.609-6.729 1.609' fill='#607D8B'/><path d='M113.675 182.992l-45.913-26.508M113.675 183.342a.346.346 0 0 1-.175-.047l-45.913-26.508a.35.35 0 1 1 .35-.607l45.913 26.508a.35.35 0 0 1-.175.654' fill='#455A64'/><path d='M67.762 156.484v54.001c0 1.09.77 2.418 1.72 2.967l42.473 24.521c.95.549 1.72.11 1.72-.98v-54.001' fill='#FAFAFA'/><path d='M112.727 238.561c-.297 0-.62-.095-.947-.285l-42.473-24.521c-1.063-.613-1.895-2.05-1.895-3.27v-54.001a.35.35 0 1 1 .701 0v54.001c0 .96.707 2.18 1.544 2.663l42.473 24.522c.344.198.661.243.87.122.206-.119.325-.411.325-.799v-54.001a.35.35 0 1 1 .7 0v54.001c0 .655-.239 1.154-.675 1.406a1.235 1.235 0 0 1-.623.162' fill='#455A64'/><path d='M112.86 147.512h-.001c-2.318 0-4.499-.522-6.142-1.471-1.705-.984-2.643-2.315-2.643-3.749 0-1.445.952-2.791 2.68-3.788l12.041-6.953c1.668-.962 3.874-1.493 6.212-1.493 2.318 0 4.499.523 6.143 1.472 1.704.984 2.643 2.315 2.643 3.748 0 1.446-.952 2.791-2.68 3.789l-12.042 6.952c-1.668.963-3.874 1.493-6.211 1.493zm12.147-16.753c-2.217 0-4.298.497-5.861 1.399l-12.042 6.952c-1.502.868-2.33 1.998-2.33 3.182 0 1.173.815 2.289 2.293 3.142 1.538.889 3.596 1.378 5.792 1.378h.001c2.216 0 4.298-.497 5.861-1.399l12.041-6.953c1.502-.867 2.33-1.997 2.33-3.182 0-1.172-.814-2.288-2.292-3.142-1.539-.888-3.596-1.377-5.793-1.377z' fill='#607D8B'/><path d='M165.63 123.219l-5.734 3.311c-3.167 1.828-8.286 1.837-11.433.02-3.147-1.817-3.131-4.772.036-6.601l5.734-3.31 11.397 6.58' fill='#FAFAFA'/><path d='M154.233 117.448l9.995 5.771-4.682 2.704c-1.434.827-3.352 1.283-5.399 1.283-2.029 0-3.923-.449-5.333-1.263-1.29-.744-2-1.694-2-2.674 0-.991.723-1.955 2.036-2.713l5.383-3.108m0-.809l-5.734 3.31c-3.167 1.829-3.183 4.784-.036 6.601 1.568.905 3.623 1.357 5.684 1.357 2.077 0 4.159-.46 5.749-1.377l5.734-3.311-11.397-6.58M145.445 179.667c-1.773 0-3.241-.85-4.243-2.245-.067-.092-.057-.275.023-.356.08-.081.207-.12.3-.055.781.548 1.706.812 2.751.811 1.322 0 2.754-.446 4.256-1.313 5.31-3.066 9.631-10.522 9.631-16.615 0-1.927-.442-3.562-1.279-4.726a.235.235 0 0 1 .024-.301.232.232 0 0 1 .3-.027c1.67 1.172 2.59 3.38 2.59 6.219 0 6.242-4.425 13.987-9.865 17.127-1.573.908-3.083 1.481-4.488 1.481zM142.476 178c.814.651 1.82 1.002 2.969 1.002 1.322 0 2.753-.452 4.255-1.32 5.31-3.065 9.631-10.523 9.631-16.617 0-1.98-.463-3.63-1.325-4.793.411 1.035.624 2.26.624 3.62 0 6.242-4.425 13.875-9.865 17.015-1.573.909-3.084 1.376-4.489 1.376a5.49 5.49 0 0 1-1.8-.283z' fill='#607D8B'/><path d='M148.648 176.704c5.384-3.108 9.748-10.636 9.748-16.813 0-2.052-.483-3.693-1.322-4.861-1.785-1.252-4.375-1.194-7.258.471-5.383 3.108-9.748 10.636-9.748 16.813 0 2.051.484 3.692 1.323 4.86 1.785 1.253 4.374 1.195 7.257-.47' fill='#FAFAFA'/><path d='M144.276 178.276c-1.143 0-2.158-.307-3.019-.911a.217.217 0 0 1-.055-.054c-.895-1.244-1.367-2.972-1.367-4.997 0-6.241 4.425-13.875 9.865-17.016 1.573-.908 3.084-1.369 4.489-1.369 1.143 0 2.158.307 3.019.91a.24.24 0 0 1 .055.055c.894 1.244 1.367 2.971 1.367 4.997 0 6.241-4.425 13.875-9.865 17.016-1.573.908-3.084 1.369-4.489 1.369zm-2.718-1.172c.773.533 1.687.901 2.718.901 1.322 0 2.754-.538 4.256-1.405 5.31-3.066 9.631-10.567 9.631-16.661 0-1.908-.434-3.554-1.256-4.716-.774-.532-1.688-.814-2.718-.814-1.322 0-2.754.433-4.256 1.3-5.31 3.066-9.631 10.564-9.631 16.657 0 1.91.434 3.576 1.256 4.738z' fill='#607D8B'/><path d='M150.72 172.361l-.363-.295a24.105 24.105 0 0 0 2.148-3.128 24.05 24.05 0 0 0 1.977-4.375l.443.149a24.54 24.54 0 0 1-2.015 4.46 24.61 24.61 0 0 1-2.19 3.189M115.917 191.514l-.363-.294a24.174 24.174 0 0 0 2.148-3.128 24.038 24.038 0 0 0 1.976-4.375l.443.148a24.48 24.48 0 0 1-2.015 4.461 24.662 24.662 0 0 1-2.189 3.188M114 237.476V182.584 237.476' fill='#607D8B'/><g><path d='M81.822 37.474c.017-.135-.075-.28-.267-.392-.327-.188-.826-.21-1.109-.045l-6.012 3.471c-.131.076-.194.178-.191.285.002.132.002.461.002.578v.043l-.007.128-6.591 3.779c-.001 0-2.077 1.046-2.787 5.192 0 0-.912 6.961-.898 19.745.015 12.57.606 17.07 1.167 21.351.22 1.684 3.001 2.125 3.001 2.125.331.04.698-.027 1.08-.248l75.273-43.551c1.808-1.069 2.667-3.719 3.056-6.284 1.213-7.99 1.675-32.978-.275-39.878-.196-.693-.51-1.083-.868-1.282l-2.086-.79c-.727.028-1.416.467-1.534.535L82.032 37.072l-.21.402' fill='#FFF'/><path d='M144.311 1.701l2.085.79c.358.199.672.589.868 1.282 1.949 6.9 1.487 31.887.275 39.878-.39 2.565-1.249 5.215-3.056 6.284L69.21 93.486a1.78 1.78 0 0 1-.896.258l-.183-.011c0 .001-2.782-.44-3.003-2.124-.56-4.282-1.151-8.781-1.165-21.351-.015-12.784.897-19.745.897-19.745.71-4.146 2.787-5.192 2.787-5.192l6.591-3.779.007-.128v-.043c0-.117 0-.446-.002-.578-.003-.107.059-.21.191-.285l6.012-3.472a.98.98 0 0 1 .481-.11c.218 0 .449.053.627.156.193.112.285.258.268.392l.211-.402 60.744-34.836c.117-.068.806-.507 1.534-.535m0-.997l-.039.001c-.618.023-1.283.244-1.974.656l-.021.012-60.519 34.706a2.358 2.358 0 0 0-.831-.15c-.365 0-.704.084-.98.244l-6.012 3.471c-.442.255-.699.69-.689 1.166l.001.15-6.08 3.487c-.373.199-2.542 1.531-3.29 5.898l-.006.039c-.009.07-.92 7.173-.906 19.875.014 12.62.603 17.116 1.172 21.465l.002.015c.308 2.355 3.475 2.923 3.836 2.98l.034.004c.101.013.204.019.305.019a2.77 2.77 0 0 0 1.396-.392l75.273-43.552c1.811-1.071 2.999-3.423 3.542-6.997 1.186-7.814 1.734-33.096-.301-40.299-.253-.893-.704-1.527-1.343-1.882l-.132-.062-2.085-.789a.973.973 0 0 0-.353-.065' fill='#455A64'/><path d='M128.267 11.565l1.495.434-56.339 32.326' fill='#FFF'/><path d='M74.202 90.545a.5.5 0 0 1-.25-.931l18.437-10.645a.499.499 0 1 1 .499.864L74.451 90.478l-.249.067M75.764 42.654l-.108-.062.046-.171 5.135-2.964.17.045-.045.171-5.135 2.964-.063.017M70.52 90.375V46.421l.063-.036L137.84 7.554v43.954l-.062.036L70.52 90.375zm.25-43.811v43.38l66.821-38.579V7.985L70.77 46.564z' fill='#607D8B'/><path d='M86.986 83.182c-.23.149-.612.384-.849.523l-11.505 6.701c-.237.139-.206.252.068.252h.565c.275 0 .693-.113.93-.252L87.7 83.705c.237-.139.428-.253.425-.256a11.29 11.29 0 0 1-.006-.503c0-.274-.188-.377-.418-.227l-.715.463' fill='#607D8B'/><path d='M75.266 90.782H74.7c-.2 0-.316-.056-.346-.166-.03-.11.043-.217.215-.317l11.505-6.702c.236-.138.615-.371.844-.519l.715-.464a.488.488 0 0 1 .266-.089c.172 0 .345.13.345.421 0 .214.001.363.003.437l.006.004-.004.069c-.003.075-.003.075-.486.356l-11.505 6.702a2.282 2.282 0 0 1-.992.268zm-.6-.25l.034.001h.566c.252 0 .649-.108.866-.234l11.505-6.702c.168-.098.294-.173.361-.214-.004-.084-.004-.218-.004-.437l-.095-.171-.131.049-.714.463c-.232.15-.616.386-.854.525l-11.505 6.702-.029.018z' fill='#607D8B'/><path d='M75.266 89.871H74.7c-.2 0-.316-.056-.346-.166-.03-.11.043-.217.215-.317l11.505-6.702c.258-.151.694-.268.993-.268h.565c.2 0 .316.056.346.166.03.11-.043.217-.215.317l-11.505 6.702a2.282 2.282 0 0 1-.992.268zm-.6-.25l.034.001h.566c.252 0 .649-.107.866-.234l11.505-6.702.03-.018-.035-.001h-.565c-.252 0-.649.108-.867.234l-11.505 6.702-.029.018zM74.37 90.801v-1.247 1.247' fill='#607D8B'/><path d='M68.13 93.901c-.751-.093-1.314-.737-1.439-1.376-.831-4.238-1.151-8.782-1.165-21.352-.015-12.784.897-19.745.897-19.745.711-4.146 2.787-5.192 2.787-5.192l74.859-43.219c.223-.129 2.487-1.584 3.195.923 1.95 6.9 1.488 31.887.275 39.878-.389 2.565-1.248 5.215-3.056 6.283L69.21 93.653c-.382.221-.749.288-1.08.248 0 0-2.781-.441-3.001-2.125-.561-4.281-1.152-8.781-1.167-21.351-.014-12.784.898-19.745.898-19.745.71-4.146 2.787-5.191 2.787-5.191l6.598-3.81.871-.119 6.599-3.83.046-.461L68.13 93.901' fill='#FAFAFA'/><path d='M68.317 94.161l-.215-.013h-.001l-.244-.047c-.719-.156-2.772-.736-2.976-2.292-.568-4.34-1.154-8.813-1.168-21.384-.014-12.654.891-19.707.9-19.777.725-4.231 2.832-5.338 2.922-5.382l6.628-3.827.87-.119 6.446-3.742.034-.334a.248.248 0 0 1 .273-.223.248.248 0 0 1 .223.272l-.059.589-6.752 3.919-.87.118-6.556 3.785c-.031.016-1.99 1.068-2.666 5.018-.007.06-.908 7.086-.894 19.702.014 12.539.597 16.996 1.161 21.305.091.691.689 1.154 1.309 1.452a1.95 1.95 0 0 1-.236-.609c-.781-3.984-1.155-8.202-1.17-21.399-.014-12.653.891-19.707.9-19.777.725-4.231 2.832-5.337 2.922-5.382-.004.001 74.444-42.98 74.846-43.212l.028-.017c.904-.538 1.72-.688 2.36-.433.555.221.949.733 1.172 1.52 2.014 7.128 1.46 32.219.281 39.983-.507 3.341-1.575 5.515-3.175 6.462L69.335 93.869a2.023 2.023 0 0 1-1.018.292zm-.147-.507c.293.036.604-.037.915-.217l75.273-43.551c1.823-1.078 2.602-3.915 2.934-6.106 1.174-7.731 1.731-32.695-.268-39.772-.178-.631-.473-1.032-.876-1.192-.484-.193-1.166-.052-1.921.397l-.034.021-74.858 43.218c-.031.017-1.989 1.069-2.666 5.019-.007.059-.908 7.085-.894 19.702.015 13.155.386 17.351 1.161 21.303.09.461.476.983 1.037 1.139.114.025.185.037.196.039h.001z' fill='#455A64'/><path d='M69.317 68.982c.489-.281.885-.056.885.505 0 .56-.396 1.243-.885 1.525-.488.282-.884.057-.884-.504 0-.56.396-1.243.884-1.526' fill='#FFF'/><path d='M68.92 71.133c-.289 0-.487-.228-.487-.625 0-.56.396-1.243.884-1.526a.812.812 0 0 1 .397-.121c.289 0 .488.229.488.626 0 .56-.396 1.243-.885 1.525a.812.812 0 0 1-.397.121m.794-2.459a.976.976 0 0 0-.49.147c-.548.317-.978 1.058-.978 1.687 0 .486.271.812.674.812a.985.985 0 0 0 .491-.146c.548-.317.978-1.057.978-1.687 0-.486-.272-.813-.675-.813' fill='#8097A2'/><path d='M68.92 70.947c-.271 0-.299-.307-.299-.439 0-.491.361-1.116.79-1.363a.632.632 0 0 1 .303-.096c.272 0 .301.306.301.438 0 .491-.363 1.116-.791 1.364a.629.629 0 0 1-.304.096m.794-2.086a.812.812 0 0 0-.397.121c-.488.283-.884.966-.884 1.526 0 .397.198.625.487.625a.812.812 0 0 0 .397-.121c.489-.282.885-.965.885-1.525 0-.397-.199-.626-.488-.626' fill='#8097A2'/><path d='M69.444 85.35c.264-.152.477-.031.477.272 0 .303-.213.67-.477.822-.263.153-.477.031-.477-.271 0-.302.214-.671.477-.823' fill='#FFF'/><path d='M69.23 86.51c-.156 0-.263-.123-.263-.337 0-.302.214-.671.477-.823a.431.431 0 0 1 .214-.066c.156 0 .263.124.263.338 0 .303-.213.67-.477.822a.431.431 0 0 1-.214.066m.428-1.412c-.1 0-.203.029-.307.09-.32.185-.57.618-.57.985 0 .309.185.524.449.524a.63.63 0 0 0 .308-.09c.32-.185.57-.618.57-.985 0-.309-.185-.524-.45-.524' fill='#8097A2'/><path d='M69.23 86.322l-.076-.149c0-.235.179-.544.384-.661l.12-.041.076.151c0 .234-.179.542-.383.66l-.121.04m.428-1.038a.431.431 0 0 0-.214.066c-.263.152-.477.521-.477.823 0 .214.107.337.263.337a.431.431 0 0 0 .214-.066c.264-.152.477-.519.477-.822 0-.214-.107-.338-.263-.338' fill='#8097A2'/><path d='M139.278 7.769v43.667L72.208 90.16V46.493l67.07-38.724' fill='#455A64'/><path d='M72.083 90.375V46.421l.063-.036 67.257-38.831v43.954l-.062.036-67.258 38.831zm.25-43.811v43.38l66.821-38.579V7.985L72.333 46.564z' fill='#607D8B'/></g><path d='M125.737 88.647l-7.639 3.334V84l-11.459 4.713v8.269L99 100.315l13.369 3.646 13.368-15.314' fill='#455A64'/></g></svg>";function et(){this.loadIcon_();var q=document.createElement("div"),at=q.style;at.position="fixed",at.top=0,at.right=0,at.bottom=0,at.left=0,at.backgroundColor="gray",at.fontFamily="sans-serif",at.zIndex=1e6;var oe=document.createElement("img");oe.src=this.icon;var at=oe.style;at.marginLeft="25%",at.marginTop="25%",at.width="50%",q.appendChild(oe);var pe=document.createElement("div"),at=pe.style;at.textAlign="center",at.fontSize="16px",at.lineHeight="24px",at.margin="24px 25%",at.width="50%",pe.innerHTML="Place your phone into your Cardboard viewer.",q.appendChild(pe);var _e=document.createElement("div"),at=_e.style;at.backgroundColor="#CFD8DC",at.position="fixed",at.bottom=0,at.width="100%",at.height="48px",at.padding="14px 24px",at.boxSizing="border-box",at.color="#656A6B",q.appendChild(_e);var Ne=document.createElement("div");Ne.style.float="left",Ne.innerHTML="No Cardboard viewer?";var nt=document.createElement("a");nt.href="https://www.google.com/get/cardboard/get-cardboard/",nt.innerHTML="get one",nt.target="_blank";var at=nt.style;at.float="right",at.fontWeight=600,at.textTransform="uppercase",at.borderLeft="1px solid gray",at.paddingLeft="24px",at.textDecoration="none",at.color="#656A6B",_e.appendChild(Ne),_e.appendChild(nt),this.overlay=q,this.text=pe,this.hide()}et.prototype.show=function(q){!q&&!this.overlay.parentElement?document.body.appendChild(this.overlay):q&&(this.overlay.parentElement&&this.overlay.parentElement!=q&&this.overlay.parentElement.removeChild(this.overlay),q.appendChild(this.overlay)),this.overlay.style.display="block";var oe=this.overlay.querySelector("img"),pe=oe.style;Fe()?(pe.width="20%",pe.marginLeft="40%",pe.marginTop="3%"):(pe.width="50%",pe.marginLeft="25%",pe.marginTop="25%")},et.prototype.hide=function(){this.overlay.style.display="none"},et.prototype.showTemporarily=function(q,oe){this.show(oe),this.timer=setTimeout(this.hide.bind(this),q)},et.prototype.disableShowTemporarily=function(){clearTimeout(this.timer)},et.prototype.update=function(){this.disableShowTemporarily(),!Fe()&&Ct()?this.show():this.hide()},et.prototype.loadIcon_=function(){this.icon=se("image/svg+xml",Ge)};var Et="CardboardV1",vt="WEBVR_CARDBOARD_VIEWER",Gt="webvr-polyfill-viewer-selector";function zt(q){try{this.selectedKey=localStorage.getItem(vt)}catch(oe){console.error("Failed to load viewer profile: %s",oe)}this.selectedKey||(this.selectedKey=q||Et),this.dialog=this.createDialog_(bi.Viewers),this.root=null,this.onChangeCallbacks_=[]}zt.prototype.show=function(q){this.root=q,q.appendChild(this.dialog);var oe=this.dialog.querySelector("#"+this.selectedKey);oe.checked=!0,this.dialog.style.display="block"},zt.prototype.hide=function(){this.root&&this.root.contains(this.dialog)&&this.root.removeChild(this.dialog),this.dialog.style.display="none"},zt.prototype.getCurrentViewer=function(){return bi.Viewers[this.selectedKey]},zt.prototype.getSelectedKey_=function(){var q=this.dialog.querySelector("input[name=field]:checked");return q?q.id:null},zt.prototype.onChange=function(q){this.onChangeCallbacks_.push(q)},zt.prototype.fireOnChange_=function(q){for(var oe=0;oe<this.onChangeCallbacks_.length;oe++)this.onChangeCallbacks_[oe](q)},zt.prototype.onSave_=function(){if(this.selectedKey=this.getSelectedKey_(),!this.selectedKey||!bi.Viewers[this.selectedKey]){console.error("ViewerSelector.onSave_: this should never happen!");return}this.fireOnChange_(bi.Viewers[this.selectedKey]);try{localStorage.setItem(vt,this.selectedKey)}catch(q){console.error("Failed to save viewer profile: %s",q)}this.hide()},zt.prototype.createDialog_=function(q){var oe=document.createElement("div");oe.classList.add(Gt),oe.style.display="none";var pe=document.createElement("div"),nt=pe.style;nt.position="fixed",nt.left=0,nt.top=0,nt.width="100%",nt.height="100%",nt.background="rgba(0, 0, 0, 0.3)",pe.addEventListener("click",this.hide.bind(this));var _e=280,Ne=document.createElement("div"),nt=Ne.style;nt.boxSizing="border-box",nt.position="fixed",nt.top="24px",nt.left="50%",nt.marginLeft=-_e/2+"px",nt.width=_e+"px",nt.padding="24px",nt.overflow="hidden",nt.background="#fafafa",nt.fontFamily="'Roboto', sans-serif",nt.boxShadow="0px 5px 20px #666",Ne.appendChild(this.createH1_("Select your viewer"));for(var at in q)Ne.appendChild(this.createChoice_(at,q[at].label));return Ne.appendChild(this.createButton_("Save",this.onSave_.bind(this))),oe.appendChild(pe),oe.appendChild(Ne),oe},zt.prototype.createH1_=function(q){var oe=document.createElement("h1"),pe=oe.style;return pe.color="black",pe.fontSize="20px",pe.fontWeight="bold",pe.marginTop=0,pe.marginBottom="24px",oe.innerHTML=q,oe},zt.prototype.createChoice_=function(q,oe){var pe=document.createElement("div");pe.style.marginTop="8px",pe.style.color="black";var _e=document.createElement("input");_e.style.fontSize="30px",_e.setAttribute("id",q),_e.setAttribute("type","radio"),_e.setAttribute("value",q),_e.setAttribute("name","field");var Ne=document.createElement("label");return Ne.style.marginLeft="4px",Ne.setAttribute("for",q),Ne.innerHTML=oe,pe.appendChild(_e),pe.appendChild(Ne),pe},zt.prototype.createButton_=function(q,oe){var pe=document.createElement("button");pe.innerHTML=q;var _e=pe.style;return _e.float="right",_e.textTransform="uppercase",_e.color="#1094f7",_e.fontSize="14px",_e.letterSpacing=0,_e.border=0,_e.background="none",_e.marginTop="16px",pe.addEventListener("click",oe),pe};var an=typeof window<"u"?window:typeof h<"u"?h:typeof self<"u"?self:{};function bn(q){return q&&q.__esModule&&Object.prototype.hasOwnProperty.call(q,"default")?q.default:q}function Bt(q,oe){return oe={exports:{}},q(oe,oe.exports),oe.exports}var Vn=Bt(function(q,oe){(function(_e,Ne){q.exports=Ne()})(an,function(){return function(pe){var _e={};function Ne(nt){if(_e[nt])return _e[nt].exports;var at=_e[nt]={i:nt,l:!1,exports:{}};return pe[nt].call(at.exports,at,at.exports,Ne),at.l=!0,at.exports}return Ne.m=pe,Ne.c=_e,Ne.d=function(nt,at,Kt){Ne.o(nt,at)||Object.defineProperty(nt,at,{configurable:!1,enumerable:!0,get:Kt})},Ne.n=function(nt){var at=nt&&nt.__esModule?function(){return nt.default}:function(){return nt};return Ne.d(at,"a",at),at},Ne.o=function(nt,at){return Object.prototype.hasOwnProperty.call(nt,at)},Ne.p="",Ne(Ne.s=0)}([function(pe,_e,Ne){var nt=function(){function Rt(sn,Dn){for(var Yn=0;Yn<Dn.length;Yn++){var hi=Dn[Yn];hi.enumerable=hi.enumerable||!1,hi.configurable=!0,"value"in hi&&(hi.writable=!0),Object.defineProperty(sn,hi.key,hi)}}return function(sn,Dn,Yn){return Dn&&Rt(sn.prototype,Dn),Yn&&Rt(sn,Yn),sn}}();function at(Rt,sn){if(!(Rt instanceof sn))throw new TypeError("Cannot call a class as a function")}var Kt=Ne(1),Wt=typeof navigator<"u"&&parseFloat((""+(/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))<10&&!window.MSStream,pt=function(){function Rt(){at(this,Rt),Wt?this.noSleepTimer=null:(this.noSleepVideo=document.createElement("video"),this.noSleepVideo.setAttribute("playsinline",""),this.noSleepVideo.setAttribute("src",Kt),this.noSleepVideo.addEventListener("timeupdate",function(sn){this.noSleepVideo.currentTime>.5&&(this.noSleepVideo.currentTime=Math.random())}.bind(this)))}return nt(Rt,[{key:"enable",value:function(){Wt?(this.disable(),this.noSleepTimer=window.setInterval(function(){window.location.href="/",window.setTimeout(window.stop,0)},15e3)):this.noSleepVideo.play()}},{key:"disable",value:function(){Wt?this.noSleepTimer&&(window.clearInterval(this.noSleepTimer),this.noSleepTimer=null):this.noSleepVideo.pause()}}]),Rt}();pe.exports=pt},function(pe,_e,Ne){pe.exports="data:video/mp4;base64,AAAAIGZ0eXBtcDQyAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAACKBtZGF0AAAC8wYF///v3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE0MiByMjQ3OSBkZDc5YTYxIC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNCAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTEgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MToweDExMSBtZT1oZXggc3VibWU9MiBwc3k9MSBwc3lfcmQ9MS4wMDowLjAwIG1peGVkX3JlZj0wIG1lX3JhbmdlPTE2IGNocm9tYV9tZT0xIHRyZWxsaXM9MCA4eDhkY3Q9MCBjcW09MCBkZWFkem9uZT0yMSwxMSBmYXN0X3Bza2lwPTEgY2hyb21hX3FwX29mZnNldD0wIHRocmVhZHM9NiBsb29rYWhlYWRfdGhyZWFkcz0xIHNsaWNlZF90aHJlYWRzPTAgbnI9MCBkZWNpbWF0ZT0xIGludGVybGFjZWQ9MCBibHVyYXlfY29tcGF0PTAgY29uc3RyYWluZWRfaW50cmE9MCBiZnJhbWVzPTMgYl9weXJhbWlkPTIgYl9hZGFwdD0xIGJfYmlhcz0wIGRpcmVjdD0xIHdlaWdodGI9MSBvcGVuX2dvcD0wIHdlaWdodHA9MSBrZXlpbnQ9MzAwIGtleWludF9taW49MzAgc2NlbmVjdXQ9NDAgaW50cmFfcmVmcmVzaD0wIHJjX2xvb2thaGVhZD0xMCByYz1jcmYgbWJ0cmVlPTEgY3JmPTIwLjAgcWNvbXA9MC42MCBxcG1pbj0wIHFwbWF4PTY5IHFwc3RlcD00IHZidl9tYXhyYXRlPTIwMDAwIHZidl9idWZzaXplPTI1MDAwIGNyZl9tYXg9MC4wIG5hbF9ocmQ9bm9uZSBmaWxsZXI9MCBpcF9yYXRpbz0xLjQwIGFxPTE6MS4wMACAAAAAOWWIhAA3//p+C7v8tDDSTjf97w55i3SbRPO4ZY+hkjD5hbkAkL3zpJ6h/LR1CAABzgB1kqqzUorlhQAAAAxBmiQYhn/+qZYADLgAAAAJQZ5CQhX/AAj5IQADQGgcIQADQGgcAAAACQGeYUQn/wALKCEAA0BoHAAAAAkBnmNEJ/8ACykhAANAaBwhAANAaBwAAAANQZpoNExDP/6plgAMuSEAA0BoHAAAAAtBnoZFESwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBnqVEJ/8ACykhAANAaBwAAAAJAZ6nRCf/AAsoIQADQGgcIQADQGgcAAAADUGarDRMQz/+qZYADLghAANAaBwAAAALQZ7KRRUsK/8ACPkhAANAaBwAAAAJAZ7pRCf/AAsoIQADQGgcIQADQGgcAAAACQGe60Qn/wALKCEAA0BoHAAAAA1BmvA0TEM//qmWAAy5IQADQGgcIQADQGgcAAAAC0GfDkUVLCv/AAj5IQADQGgcAAAACQGfLUQn/wALKSEAA0BoHCEAA0BoHAAAAAkBny9EJ/8ACyghAANAaBwAAAANQZs0NExDP/6plgAMuCEAA0BoHAAAAAtBn1JFFSwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBn3FEJ/8ACyghAANAaBwAAAAJAZ9zRCf/AAsoIQADQGgcIQADQGgcAAAADUGbeDRMQz/+qZYADLkhAANAaBwAAAALQZ+WRRUsK/8ACPghAANAaBwhAANAaBwAAAAJAZ+1RCf/AAspIQADQGgcAAAACQGft0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bm7w0TEM//qmWAAy4IQADQGgcAAAAC0Gf2kUVLCv/AAj5IQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHAAAAAkBn/tEJ/8ACykhAANAaBwAAAANQZvgNExDP/6plgAMuSEAA0BoHCEAA0BoHAAAAAtBnh5FFSwr/wAI+CEAA0BoHAAAAAkBnj1EJ/8ACyghAANAaBwhAANAaBwAAAAJAZ4/RCf/AAspIQADQGgcAAAADUGaJDRMQz/+qZYADLghAANAaBwAAAALQZ5CRRUsK/8ACPkhAANAaBwhAANAaBwAAAAJAZ5hRCf/AAsoIQADQGgcAAAACQGeY0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bmmg0TEM//qmWAAy5IQADQGgcAAAAC0GehkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGepUQn/wALKSEAA0BoHAAAAAkBnqdEJ/8ACyghAANAaBwAAAANQZqsNExDP/6plgAMuCEAA0BoHCEAA0BoHAAAAAtBnspFFSwr/wAI+SEAA0BoHAAAAAkBnulEJ/8ACyghAANAaBwhAANAaBwAAAAJAZ7rRCf/AAsoIQADQGgcAAAADUGa8DRMQz/+qZYADLkhAANAaBwhAANAaBwAAAALQZ8ORRUsK/8ACPkhAANAaBwAAAAJAZ8tRCf/AAspIQADQGgcIQADQGgcAAAACQGfL0Qn/wALKCEAA0BoHAAAAA1BmzQ0TEM//qmWAAy4IQADQGgcAAAAC0GfUkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGfcUQn/wALKCEAA0BoHAAAAAkBn3NEJ/8ACyghAANAaBwhAANAaBwAAAANQZt4NExC//6plgAMuSEAA0BoHAAAAAtBn5ZFFSwr/wAI+CEAA0BoHCEAA0BoHAAAAAkBn7VEJ/8ACykhAANAaBwAAAAJAZ+3RCf/AAspIQADQGgcAAAADUGbuzRMQn/+nhAAYsAhAANAaBwhAANAaBwAAAAJQZ/aQhP/AAspIQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHAAACiFtb292AAAAbG12aGQAAAAA1YCCX9WAgl8AAAPoAAAH/AABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAGGlvZHMAAAAAEICAgAcAT////v7/AAAF+XRyYWsAAABcdGtoZAAAAAPVgIJf1YCCXwAAAAEAAAAAAAAH0AAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAygAAAMoAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAB9AAABdwAAEAAAAABXFtZGlhAAAAIG1kaGQAAAAA1YCCX9WAgl8AAV+QAAK/IFXEAAAAAAAtaGRscgAAAAAAAAAAdmlkZQAAAAAAAAAAAAAAAFZpZGVvSGFuZGxlcgAAAAUcbWluZgAAABR2bWhkAAAAAQAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAAE3HN0YmwAAACYc3RzZAAAAAAAAAABAAAAiGF2YzEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAygDKAEgAAABIAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAY//8AAAAyYXZjQwFNQCj/4QAbZ01AKOyho3ySTUBAQFAAAAMAEAAr8gDxgxlgAQAEaO+G8gAAABhzdHRzAAAAAAAAAAEAAAA8AAALuAAAABRzdHNzAAAAAAAAAAEAAAABAAAB8GN0dHMAAAAAAAAAPAAAAAEAABdwAAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAAC7gAAAAAQAAF3AAAAABAAAAAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAEEc3RzegAAAAAAAAAAAAAAPAAAAzQAAAAQAAAADQAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAANAAAADQAAAQBzdGNvAAAAAAAAADwAAAAwAAADZAAAA3QAAAONAAADoAAAA7kAAAPQAAAD6wAAA/4AAAQXAAAELgAABEMAAARcAAAEbwAABIwAAAShAAAEugAABM0AAATkAAAE/wAABRIAAAUrAAAFQgAABV0AAAVwAAAFiQAABaAAAAW1AAAFzgAABeEAAAX+AAAGEwAABiwAAAY/AAAGVgAABnEAAAaEAAAGnQAABrQAAAbPAAAG4gAABvUAAAcSAAAHJwAAB0AAAAdTAAAHcAAAB4UAAAeeAAAHsQAAB8gAAAfjAAAH9gAACA8AAAgmAAAIQQAACFQAAAhnAAAIhAAACJcAAAMsdHJhawAAAFx0a2hkAAAAA9WAgl/VgIJfAAAAAgAAAAAAAAf8AAAAAAAAAAAAAAABAQAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAACsm1kaWEAAAAgbWRoZAAAAADVgIJf1YCCXwAArEQAAWAAVcQAAAAAACdoZGxyAAAAAAAAAABzb3VuAAAAAAAAAAAAAAAAU3RlcmVvAAAAAmNtaW5mAAAAEHNtaGQAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAidzdGJsAAAAZ3N0c2QAAAAAAAAAAQAAAFdtcDRhAAAAAAAAAAEAAAAAAAAAAAACABAAAAAArEQAAAAAADNlc2RzAAAAAAOAgIAiAAIABICAgBRAFQAAAAADDUAAAAAABYCAgAISEAaAgIABAgAAABhzdHRzAAAAAAAAAAEAAABYAAAEAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAAUc3RzegAAAAAAAAAGAAAAWAAAAXBzdGNvAAAAAAAAAFgAAAOBAAADhwAAA5oAAAOtAAADswAAA8oAAAPfAAAD5QAAA/gAAAQLAAAEEQAABCgAAAQ9AAAEUAAABFYAAARpAAAEgAAABIYAAASbAAAErgAABLQAAATHAAAE3gAABPMAAAT5AAAFDAAABR8AAAUlAAAFPAAABVEAAAVXAAAFagAABX0AAAWDAAAFmgAABa8AAAXCAAAFyAAABdsAAAXyAAAF+AAABg0AAAYgAAAGJgAABjkAAAZQAAAGZQAABmsAAAZ+AAAGkQAABpcAAAauAAAGwwAABskAAAbcAAAG7wAABwYAAAcMAAAHIQAABzQAAAc6AAAHTQAAB2QAAAdqAAAHfwAAB5IAAAeYAAAHqwAAB8IAAAfXAAAH3QAAB/AAAAgDAAAICQAACCAAAAg1AAAIOwAACE4AAAhhAAAIeAAACH4AAAiRAAAIpAAACKoAAAiwAAAItgAACLwAAAjCAAAAFnVkdGEAAAAObmFtZVN0ZXJlbwAAAHB1ZHRhAAAAaG1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAAO2lsc3QAAAAzqXRvbwAAACtkYXRhAAAAAQAAAABIYW5kQnJha2UgMC4xMC4yIDIwMTUwNjExMDA="}])})}),ti=bn(Vn),si=1e3,gi=[0,0,.5,1],Mn=[.5,0,.5,1],ui=window.requestAnimationFrame,Ai=window.cancelAnimationFrame;function xi(){this.leftProjectionMatrix=new Float32Array(16),this.leftViewMatrix=new Float32Array(16),this.rightProjectionMatrix=new Float32Array(16),this.rightViewMatrix=new Float32Array(16),this.pose=null}function Ir(q){Object.defineProperties(this,{hasPosition:{writable:!1,enumerable:!0,value:q.hasPosition},hasExternalDisplay:{writable:!1,enumerable:!0,value:q.hasExternalDisplay},canPresent:{writable:!1,enumerable:!0,value:q.canPresent},maxLayers:{writable:!1,enumerable:!0,value:q.maxLayers},hasOrientation:{enumerable:!0,get:function(){return ze("VRDisplayCapabilities.prototype.hasOrientation","VRDisplay.prototype.getFrameData"),q.hasOrientation}}})}function Sn(q){q=q||{};var oe="wakelock"in q?q.wakelock:!0;this.isPolyfilled=!0,this.displayId=si++,this.displayName="",this.depthNear=.01,this.depthFar=1e4,this.isPresenting=!1,Object.defineProperty(this,"isConnected",{get:function(){return ze("VRDisplay.prototype.isConnected","VRDisplayCapabilities.prototype.hasExternalDisplay"),!1}}),this.capabilities=new Ir({hasPosition:!1,hasOrientation:!1,hasExternalDisplay:!1,canPresent:!1,maxLayers:1}),this.stageParameters=null,this.waitingForPresent_=!1,this.layer_=null,this.originalParent_=null,this.fullscreenElement_=null,this.fullscreenWrapper_=null,this.fullscreenElementCachedStyle_=null,this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null,oe&&Ct()&&(this.wakelock_=new ti)}Sn.prototype.getFrameData=function(q){return un(q,this._getPose(),this)},Sn.prototype.getPose=function(){return ze("VRDisplay.prototype.getPose","VRDisplay.prototype.getFrameData"),this._getPose()},Sn.prototype.resetPose=function(){return ze("VRDisplay.prototype.resetPose"),this._resetPose()},Sn.prototype.getImmediatePose=function(){return ze("VRDisplay.prototype.getImmediatePose","VRDisplay.prototype.getFrameData"),this._getPose()},Sn.prototype.requestAnimationFrame=function(q){return ui(q)},Sn.prototype.cancelAnimationFrame=function(q){return Ai(q)},Sn.prototype.wrapForFullscreen=function(q){if(ee())return q;if(!this.fullscreenWrapper_){this.fullscreenWrapper_=document.createElement("div");var oe=["height: "+Math.min(screen.height,screen.width)+"px !important","top: 0 !important","left: 0 !important","right: 0 !important","border: 0","margin: 0","padding: 0","z-index: 999999 !important","position: fixed"];this.fullscreenWrapper_.setAttribute("style",oe.join("; ")+";"),this.fullscreenWrapper_.classList.add("webvr-polyfill-fullscreen-wrapper")}if(this.fullscreenElement_==q)return this.fullscreenWrapper_;if(this.fullscreenElement_&&(this.originalParent_?this.originalParent_.appendChild(this.fullscreenElement_):this.fullscreenElement_.parentElement.removeChild(this.fullscreenElement_)),this.fullscreenElement_=q,this.originalParent_=q.parentElement,this.originalParent_||document.body.appendChild(q),!this.fullscreenWrapper_.parentElement){var pe=this.fullscreenElement_.parentElement;pe.insertBefore(this.fullscreenWrapper_,this.fullscreenElement_),pe.removeChild(this.fullscreenElement_)}this.fullscreenWrapper_.insertBefore(this.fullscreenElement_,this.fullscreenWrapper_.firstChild),this.fullscreenElementCachedStyle_=this.fullscreenElement_.getAttribute("style");var _e=this;function Ne(){if(_e.fullscreenElement_){var nt=["position: absolute","top: 0","left: 0","width: "+Math.max(screen.width,screen.height)+"px","height: "+Math.min(screen.height,screen.width)+"px","border: 0","margin: 0","padding: 0"];_e.fullscreenElement_.setAttribute("style",nt.join("; ")+";")}}return Ne(),this.fullscreenWrapper_},Sn.prototype.removeFullscreenWrapper=function(){if(this.fullscreenElement_){var q=this.fullscreenElement_;this.fullscreenElementCachedStyle_?q.setAttribute("style",this.fullscreenElementCachedStyle_):q.removeAttribute("style"),this.fullscreenElement_=null,this.fullscreenElementCachedStyle_=null;var oe=this.fullscreenWrapper_.parentElement;return this.fullscreenWrapper_.removeChild(q),this.originalParent_===oe?oe.insertBefore(q,this.fullscreenWrapper_):this.originalParent_&&this.originalParent_.appendChild(q),oe.removeChild(this.fullscreenWrapper_),q}},Sn.prototype.requestPresent=function(q){var oe=this.isPresenting,pe=this;return q instanceof Array||(ze("VRDisplay.prototype.requestPresent with non-array argument","an array of VRLayers as the first argument"),q=[q]),new Promise(function(_e,Ne){if(!pe.capabilities.canPresent){Ne(new Error("VRDisplay is not capable of presenting."));return}if(q.length==0||q.length>pe.capabilities.maxLayers){Ne(new Error("Invalid number of layers."));return}var nt=q[0];if(!nt.source){_e();return}var at=nt.leftBounds||gi,Kt=nt.rightBounds||Mn;if(oe){var Wt=pe.layer_;Wt.source!==nt.source&&(Wt.source=nt.source);for(var pt=0;pt<4;pt++)Wt.leftBounds[pt]=at[pt],Wt.rightBounds[pt]=Kt[pt];pe.wrapForFullscreen(pe.layer_.source),pe.updatePresent_(),_e();return}if(pe.layer_={predistorted:nt.predistorted,source:nt.source,leftBounds:at.slice(0),rightBounds:Kt.slice(0)},pe.waitingForPresent_=!1,pe.layer_&&pe.layer_.source){var Rt=pe.wrapForFullscreen(pe.layer_.source),sn=function(){var hi=gt();pe.isPresenting=Rt===hi,pe.isPresenting?(screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape-primary").catch(function(Di){console.error("screen.orientation.lock() failed due to",Di.message)}),pe.waitingForPresent_=!1,pe.beginPresent_(),_e()):(screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock(),pe.removeFullscreenWrapper(),pe.disableWakeLock(),pe.endPresent_(),pe.removeFullscreenListeners_()),pe.fireVRDisplayPresentChange_()},Dn=function(){pe.waitingForPresent_&&(pe.removeFullscreenWrapper(),pe.removeFullscreenListeners_(),pe.disableWakeLock(),pe.waitingForPresent_=!1,pe.isPresenting=!1,Ne(new Error("Unable to present.")))};pe.addFullscreenListeners_(Rt,sn,Dn),Ot(Rt)?(pe.enableWakeLock(),pe.waitingForPresent_=!0):(ee()||ne())&&(pe.enableWakeLock(),pe.isPresenting=!0,pe.beginPresent_(),pe.fireVRDisplayPresentChange_(),_e())}!pe.waitingForPresent_&&!ee()&&(xt(),Ne(new Error("Unable to present.")))})},Sn.prototype.exitPresent=function(){var q=this.isPresenting,oe=this;return this.isPresenting=!1,this.layer_=null,this.disableWakeLock(),new Promise(function(pe,_e){q?(!xt()&&ee()&&(oe.endPresent_(),oe.fireVRDisplayPresentChange_()),ne()&&(oe.removeFullscreenWrapper(),oe.removeFullscreenListeners_(),oe.endPresent_(),oe.fireVRDisplayPresentChange_()),pe()):_e(new Error("Was not presenting to VRDisplay."))})},Sn.prototype.getLayers=function(){return this.layer_?[this.layer_]:[]},Sn.prototype.fireVRDisplayPresentChange_=function(){var q=new CustomEvent("vrdisplaypresentchange",{detail:{display:this}});window.dispatchEvent(q)},Sn.prototype.fireVRDisplayConnect_=function(){var q=new CustomEvent("vrdisplayconnect",{detail:{display:this}});window.dispatchEvent(q)},Sn.prototype.addFullscreenListeners_=function(q,oe,pe){this.removeFullscreenListeners_(),this.fullscreenEventTarget_=q,this.fullscreenChangeHandler_=oe,this.fullscreenErrorHandler_=pe,oe&&(document.fullscreenEnabled?q.addEventListener("fullscreenchange",oe,!1):document.webkitFullscreenEnabled?q.addEventListener("webkitfullscreenchange",oe,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenchange",oe,!1):document.msFullscreenEnabled&&q.addEventListener("msfullscreenchange",oe,!1)),pe&&(document.fullscreenEnabled?q.addEventListener("fullscreenerror",pe,!1):document.webkitFullscreenEnabled?q.addEventListener("webkitfullscreenerror",pe,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenerror",pe,!1):document.msFullscreenEnabled&&q.addEventListener("msfullscreenerror",pe,!1))},Sn.prototype.removeFullscreenListeners_=function(){if(this.fullscreenEventTarget_){var q=this.fullscreenEventTarget_;if(this.fullscreenChangeHandler_){var oe=this.fullscreenChangeHandler_;q.removeEventListener("fullscreenchange",oe,!1),q.removeEventListener("webkitfullscreenchange",oe,!1),document.removeEventListener("mozfullscreenchange",oe,!1),q.removeEventListener("msfullscreenchange",oe,!1)}if(this.fullscreenErrorHandler_){var pe=this.fullscreenErrorHandler_;q.removeEventListener("fullscreenerror",pe,!1),q.removeEventListener("webkitfullscreenerror",pe,!1),document.removeEventListener("mozfullscreenerror",pe,!1),q.removeEventListener("msfullscreenerror",pe,!1)}this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null}},Sn.prototype.enableWakeLock=function(){this.wakelock_&&this.wakelock_.enable()},Sn.prototype.disableWakeLock=function(){this.wakelock_&&this.wakelock_.disable()},Sn.prototype.beginPresent_=function(){},Sn.prototype.endPresent_=function(){},Sn.prototype.submitFrame=function(q){},Sn.prototype.getEyeParameters=function(q){return null};var fi={ADDITIONAL_VIEWERS:[],DEFAULT_VIEWER:"",MOBILE_WAKE_LOCK:!0,DEBUG:!1,DPDB_URL:"https://dpdb.webvr.rocks/dpdb.json",K_FILTER:.98,PREDICTION_TIME_S:.04,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,YAW_ONLY:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1},qr={LEFT:"left",RIGHT:"right"};function rr(q){var oe=qt({},fi);q=qt(oe,q||{}),Sn.call(this,{wakelock:q.MOBILE_WAKE_LOCK}),this.config=q,this.displayName="Cardboard VRDisplay",this.capabilities=new Ir({hasPosition:!1,hasOrientation:!0,hasExternalDisplay:!1,canPresent:!0,maxLayers:1}),this.stageParameters=null,this.bufferScale_=this.config.BUFFER_SCALE,this.poseSensor_=new be(this.config),this.distorter_=null,this.cardboardUI_=null,this.dpdb_=new De(this.config.DPDB_URL,this.onDeviceParamsUpdated_.bind(this)),this.deviceInfo_=new bi(this.dpdb_.getDeviceParams(),q.ADDITIONAL_VIEWERS),this.viewerSelector_=new zt(q.DEFAULT_VIEWER),this.viewerSelector_.onChange(this.onViewerChanged_.bind(this)),this.deviceInfo_.setViewer(this.viewerSelector_.getCurrentViewer()),this.config.ROTATE_INSTRUCTIONS_DISABLED||(this.rotateInstructions_=new et),ee()&&window.addEventListener("resize",this.onResize_.bind(this))}return rr.prototype=Object.create(Sn.prototype),rr.prototype._getPose=function(){return{position:null,orientation:this.poseSensor_.getOrientation(),linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},rr.prototype._resetPose=function(){this.poseSensor_.resetPose&&this.poseSensor_.resetPose()},rr.prototype._getFieldOfView=function(q){var oe;if(q==qr.LEFT)oe=this.deviceInfo_.getFieldOfViewLeftEye();else if(q==qr.RIGHT)oe=this.deviceInfo_.getFieldOfViewRightEye();else return console.error("Invalid eye provided: %s",q),null;return oe},rr.prototype._getEyeOffset=function(q){var oe;if(q==qr.LEFT)oe=[-this.deviceInfo_.viewer.interLensDistance*.5,0,0];else if(q==qr.RIGHT)oe=[this.deviceInfo_.viewer.interLensDistance*.5,0,0];else return console.error("Invalid eye provided: %s",q),null;return oe},rr.prototype.getEyeParameters=function(q){var oe=this._getEyeOffset(q),pe=this._getFieldOfView(q),_e={offset:oe,renderWidth:this.deviceInfo_.device.width*.5*this.bufferScale_,renderHeight:this.deviceInfo_.device.height*this.bufferScale_};return Object.defineProperty(_e,"fieldOfView",{enumerable:!0,get:function(){return ze("VRFieldOfView","VRFrameData's projection matrices"),pe}}),_e},rr.prototype.onDeviceParamsUpdated_=function(q){this.config.DEBUG&&console.log("DPDB reported that device params were updated."),this.deviceInfo_.updateDeviceParams(q),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_)},rr.prototype.updateBounds_=function(){this.layer_&&this.distorter_&&(this.layer_.leftBounds||this.layer_.rightBounds)&&this.distorter_.setTextureBounds(this.layer_.leftBounds,this.layer_.rightBounds)},rr.prototype.beginPresent_=function(){var q=this.layer_.source.getContext("webgl");q||(q=this.layer_.source.getContext("experimental-webgl")),q||(q=this.layer_.source.getContext("webgl2")),q&&(this.layer_.predistorted?this.config.CARDBOARD_UI_DISABLED||(q.canvas.width=rt()*this.bufferScale_,q.canvas.height=He()*this.bufferScale_,this.cardboardUI_=new Te(q)):(this.config.CARDBOARD_UI_DISABLED||(this.cardboardUI_=new Te(q)),this.distorter_=new Re(q,this.cardboardUI_,this.config.BUFFER_SCALE,this.config.DIRTY_SUBMIT_FRAME_BINDINGS),this.distorter_.updateDeviceInfo(this.deviceInfo_)),this.cardboardUI_&&this.cardboardUI_.listen(function(oe){this.viewerSelector_.show(this.layer_.source.parentElement),oe.stopPropagation(),oe.preventDefault()}.bind(this),function(oe){this.exitPresent(),oe.stopPropagation(),oe.preventDefault()}.bind(this)),this.rotateInstructions_&&(Fe()&&Ct()?this.rotateInstructions_.showTemporarily(3e3,this.layer_.source.parentElement):this.rotateInstructions_.update()),this.orientationHandler=this.onOrientationChange_.bind(this),window.addEventListener("orientationchange",this.orientationHandler),this.vrdisplaypresentchangeHandler=this.updateBounds_.bind(this),window.addEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler),this.fireVRDisplayDeviceParamsChange_())},rr.prototype.endPresent_=function(){this.distorter_&&(this.distorter_.destroy(),this.distorter_=null),this.cardboardUI_&&(this.cardboardUI_.destroy(),this.cardboardUI_=null),this.rotateInstructions_&&this.rotateInstructions_.hide(),this.viewerSelector_.hide(),window.removeEventListener("orientationchange",this.orientationHandler),window.removeEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler)},rr.prototype.updatePresent_=function(){this.endPresent_(),this.beginPresent_()},rr.prototype.submitFrame=function(q){if(this.distorter_)this.updateBounds_(),this.distorter_.submitFrame();else if(this.cardboardUI_&&this.layer_){var oe=this.layer_.source.getContext("webgl");oe||(oe=this.layer_.source.getContext("experimental-webgl")),oe||(oe=this.layer_.source.getContext("webgl2"));var pe=oe.canvas;(pe.width!=this.lastWidth||pe.height!=this.lastHeight)&&this.cardboardUI_.onResize(),this.lastWidth=pe.width,this.lastHeight=pe.height,this.cardboardUI_.render()}},rr.prototype.onOrientationChange_=function(q){this.viewerSelector_.hide(),this.rotateInstructions_&&this.rotateInstructions_.update(),this.onResize_()},rr.prototype.onResize_=function(q){if(this.layer_){var oe=this.layer_.source.getContext("webgl");oe||(oe=this.layer_.source.getContext("experimental-webgl")),oe||(oe=this.layer_.source.getContext("webgl2"));var pe=["position: absolute","top: 0","left: 0","width: 100vw","height: 100vh","border: 0","margin: 0","padding: 0px","box-sizing: content-box"];oe.canvas.setAttribute("style",pe.join("; ")+";"),Ft(oe.canvas)}},rr.prototype.onViewerChanged_=function(q){this.deviceInfo_.setViewer(q),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_),this.fireVRDisplayDeviceParamsChange_()},rr.prototype.fireVRDisplayDeviceParamsChange_=function(){var q=new CustomEvent("vrdisplaydeviceparamschange",{detail:{vrdisplay:this,deviceInfo:this.deviceInfo_}});window.dispatchEvent(q)},rr.VRFrameData=xi,rr.VRDisplay=Sn,rr})}),C=m(x),g="0.10.12",b={ADDITIONAL_VIEWERS:[],DEFAULT_VIEWER:"",PROVIDE_MOBILE_VRDISPLAY:!0,MOBILE_WAKE_LOCK:!0,DEBUG:!1,DPDB_URL:"https://dpdb.webvr.rocks/dpdb.json",K_FILTER:.98,PREDICTION_TIME_S:.04,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,YAW_ONLY:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1};function _(O){this.config=y(y({},b),O),this.polyfillDisplays=[],this.enabled=!1,this.hasNative="getVRDisplays"in navigator,this.native={},this.native.getVRDisplays=navigator.getVRDisplays,this.native.VRFrameData=window.VRFrameData,this.native.VRDisplay=window.VRDisplay,(!this.hasNative||this.config.PROVIDE_MOBILE_VRDISPLAY&&A())&&(this.enable(),this.getVRDisplays().then(function(D){D&&D[0]&&D[0].fireVRDisplayConnect_&&D[0].fireVRDisplayConnect_()}))}_.prototype.getPolyfillDisplays=function(){if(this._polyfillDisplaysPopulated)return this.polyfillDisplays;if(A()){var O=new C({ADDITIONAL_VIEWERS:this.config.ADDITIONAL_VIEWERS,DEFAULT_VIEWER:this.config.DEFAULT_VIEWER,MOBILE_WAKE_LOCK:this.config.MOBILE_WAKE_LOCK,DEBUG:this.config.DEBUG,DPDB_URL:this.config.DPDB_URL,CARDBOARD_UI_DISABLED:this.config.CARDBOARD_UI_DISABLED,K_FILTER:this.config.K_FILTER,PREDICTION_TIME_S:this.config.PREDICTION_TIME_S,ROTATE_INSTRUCTIONS_DISABLED:this.config.ROTATE_INSTRUCTIONS_DISABLED,YAW_ONLY:this.config.YAW_ONLY,BUFFER_SCALE:this.config.BUFFER_SCALE,DIRTY_SUBMIT_FRAME_BINDINGS:this.config.DIRTY_SUBMIT_FRAME_BINDINGS});this.polyfillDisplays.push(O)}return this._polyfillDisplaysPopulated=!0,this.polyfillDisplays},_.prototype.enable=function(){if(this.enabled=!0,this.hasNative&&this.native.VRFrameData){var O=this.native.VRFrameData,D=new this.native.VRFrameData,L=this.native.VRDisplay.prototype.getFrameData;window.VRDisplay.prototype.getFrameData=function(N){if(N instanceof O){L.call(this,N);return}L.call(this,D),N.pose=D.pose,v(D.leftProjectionMatrix,N.leftProjectionMatrix),v(D.rightProjectionMatrix,N.rightProjectionMatrix),v(D.leftViewMatrix,N.leftViewMatrix),v(D.rightViewMatrix,N.rightViewMatrix)}}navigator.getVRDisplays=this.getVRDisplays.bind(this),window.VRDisplay=C.VRDisplay,window.VRFrameData=C.VRFrameData},_.prototype.getVRDisplays=function(){var O=this;return this.config,this.hasNative?this.native.getVRDisplays.call(navigator).then(function(D){return D.length>0?D:O.getPolyfillDisplays()}):Promise.resolve(this.getPolyfillDisplays())},_.version=g,_.VRFrameData=C.VRFrameData,_.VRDisplay=C.VRDisplay;var S=Object.freeze({default:_}),R=S&&_||S;typeof h<"u"&&h.window&&(h.document||(h.document=h.window.document),h.navigator||(h.navigator=h.window.navigator));var P=R;return P})},"./node_modules/word-wrapper/index.js":l=>{var d=/\n/,c=`
`,h=/\s/;l.exports=function(x,C){var g=l.exports.lines(x,C);return g.map(function(b){return x.substring(b.start,b.end)}).join(`
`)},l.exports.lines=function(C,g){if(g=g||{},g.width===0&&g.mode!=="nowrap")return[];C=C||"";var b=typeof g.width=="number"?g.width:Number.MAX_VALUE,_=Math.max(0,g.start||0),S=typeof g.end=="number"?g.end:C.length,R=g.mode,P=g.measure||y;return R==="pre"?A(P,C,_,S,b):v(P,C,_,S,b,R)};function m(x,C,g,b){var _=x.indexOf(C,g);return _===-1||_>b?b:_}function p(x){return h.test(x)}function A(x,C,g,b,_){for(var S=[],R=g,P=g;P<b&&P<C.length;P++){var O=C.charAt(P),D=d.test(O);if(D||P===b-1){var L=D?P:P+1,N=x(C,R,L,_);S.push(N),R=P+1}}return S}function v(x,C,g,b,_,S){var R=[],P=_;for(S==="nowrap"&&(P=Number.MAX_VALUE);g<b&&g<C.length;){for(var O=m(C,c,g,b);g<O&&p(C.charAt(g));)g++;var D=x(C,g,O,P),L=g+(D.end-D.start),N=L+c.length;if(L<O){for(;L>g&&!p(C.charAt(L));)L--;if(L===g)N>g+c.length&&N--,L=N;else for(N=L;L>g&&p(C.charAt(L-c.length));)L--}if(L>=g){var H=x(C,g,L,P);R.push(H)}g=N}return R}function y(x,C,g,b){var _=Math.min(b,g-C);return{start:C,end:C+_}}},"./node_modules/xhr/index.js":(l,d,c)=>{var h=c("./node_modules/global/window.js"),m=c("./node_modules/is-function/index.js"),p=c("./node_modules/parse-headers/parse-headers.js"),A=c("./node_modules/xtend/immutable.js");l.exports=C,l.exports.default=C,C.XMLHttpRequest=h.XMLHttpRequest||_,C.XDomainRequest="withCredentials"in new C.XMLHttpRequest?C.XMLHttpRequest:h.XDomainRequest,v(["get","put","post","patch","head","delete"],function(S){C[S==="delete"?"del":S]=function(R,P,O){return P=x(R,P,O),P.method=S.toUpperCase(),g(P)}});function v(S,R){for(var P=0;P<S.length;P++)R(S[P])}function y(S){for(var R in S)if(S.hasOwnProperty(R))return!1;return!0}function x(S,R,P){var O=S;return m(R)?(P=R,typeof S=="string"&&(O={uri:S})):O=A(R,{uri:S}),O.callback=P,O}function C(S,R,P){return R=x(S,R,P),g(R)}function g(S){if(typeof S.callback>"u")throw new Error("callback argument missing");var R=!1,P=function(ve,Fe,je){R||(R=!0,S.callback(ve,Fe,je))};function O(){H.readyState===4&&setTimeout(N,0)}function D(){var xe=void 0;if(H.response?xe=H.response:xe=H.responseText||b(H),W)try{xe=JSON.parse(xe)}catch{}return xe}function L(xe){return clearTimeout(ce),xe instanceof Error||(xe=new Error(""+(xe||"Unknown XMLHttpRequest Error"))),xe.statusCode=0,P(xe,he)}function N(){if(!K){var xe;clearTimeout(ce),S.useXDR&&H.status===void 0?xe=200:xe=H.status===1223?204:H.status;var ve=he,Fe=null;return xe!==0?(ve={body:D(),statusCode:xe,method:ae,headers:{},url:se,rawRequest:H},H.getAllResponseHeaders&&(ve.headers=p(H.getAllResponseHeaders()))):Fe=new Error("Internal XMLHttpRequest Error"),P(Fe,ve,ve.body)}}var H=S.xhr||null;H||(S.cors||S.useXDR?H=new C.XDomainRequest:H=new C.XMLHttpRequest);var J,K,se=H.url=S.uri||S.url,ae=H.method=S.method||"GET",ee=S.body||S.data,ne=H.headers=S.headers||{},X=!!S.sync,W=!1,ce,he={body:void 0,headers:{},statusCode:0,method:ae,url:se,rawRequest:H};if("json"in S&&S.json!==!1&&(W=!0,ne.accept||ne.Accept||(ne.Accept="application/json"),ae!=="GET"&&ae!=="HEAD"&&(ne["content-type"]||ne["Content-Type"]||(ne["Content-Type"]="application/json"),ee=JSON.stringify(S.json===!0?ee:S.json))),H.onreadystatechange=O,H.onload=N,H.onerror=L,H.onprogress=function(){},H.onabort=function(){K=!0},H.ontimeout=L,H.open(ae,se,!X,S.username,S.password),X||(H.withCredentials=!!S.withCredentials),!X&&S.timeout>0&&(ce=setTimeout(function(){if(!K){K=!0,H.abort("timeout");var xe=new Error("XMLHttpRequest timeout");xe.code="ETIMEDOUT",L(xe)}},S.timeout)),H.setRequestHeader)for(J in ne)ne.hasOwnProperty(J)&&H.setRequestHeader(J,ne[J]);else if(S.headers&&!y(S.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in S&&(H.responseType=S.responseType),"beforeSend"in S&&typeof S.beforeSend=="function"&&S.beforeSend(H),H.send(ee||null),H}function b(S){try{if(S.responseType==="document")return S.responseXML;var R=S.responseXML&&S.responseXML.documentElement.nodeName==="parsererror";if(S.responseType===""&&!R)return S.responseXML}catch{}return null}function _(){}},"./node_modules/xml-parse-from-string/index.js":l=>{l.exports=function(){return typeof self.DOMParser<"u"?function(c){var h=new self.DOMParser;return h.parseFromString(c,"application/xml")}:typeof self.ActiveXObject<"u"&&new self.ActiveXObject("Microsoft.XMLDOM")?function(c){var h=new self.ActiveXObject("Microsoft.XMLDOM");return h.async="false",h.loadXML(c),h}:function(c){var h=document.createElement("div");return h.innerHTML=c,h}}()},"./node_modules/xtend/immutable.js":l=>{l.exports=c;var d=Object.prototype.hasOwnProperty;function c(){for(var h={},m=0;m<arguments.length;m++){var p=arguments[m];for(var A in p)d.call(p,A)&&(h[A]=p[A])}return h}},"./src/components/animation.js":(l,d,c)=>{var h=c("./node_modules/super-animejs/lib/anime.es.js").default,m=c("./src/core/component.js").components,p=c("./src/core/component.js").registerComponent,A=c("./src/lib/three.js"),v=c("./src/utils/index.js"),y=new A.Color,x=new A.Color,C=v.entity.getComponentProperty,g=v.entity.setComponentProperty,b={},_="color",S="position",R="rotation",P="scale",O="components",D="object3D";l.exports.Component=p("animation",{schema:{autoplay:{default:!0},delay:{default:0},dir:{default:""},dur:{default:1e3},easing:{default:"easeInQuad"},elasticity:{default:400},enabled:{default:!0},from:{default:""},loop:{default:0,parse:function(ne){return ne===!0||ne==="true"?!0:ne===!1||ne==="false"?!1:parseInt(ne,10)}},property:{default:""},startEvents:{type:"array"},pauseEvents:{type:"array"},resumeEvents:{type:"array"},round:{default:!1},to:{default:""},type:{default:""},isRawProperty:{default:!1}},multiple:!0,init:function(){var ne=this;this.eventDetail={name:this.attrName},this.time=0,this.animation=null,this.animationIsPlaying=!1,this.onStartEvent=this.onStartEvent.bind(this),this.beginAnimation=this.beginAnimation.bind(this),this.pauseAnimation=this.pauseAnimation.bind(this),this.resumeAnimation=this.resumeAnimation.bind(this),this.fromColor={},this.toColor={},this.targets={},this.targetsArray=[],this.updateConfigForDefault=this.updateConfigForDefault.bind(this),this.updateConfigForRawColor=this.updateConfigForRawColor.bind(this),this.config={complete:function(){ne.animationIsPlaying=!1,ne.el.emit("animationcomplete",ne.eventDetail,!1),ne.id&&ne.el.emit("animationcomplete__"+ne.id,ne.eventDetail,!1)}}},update:function(ne){var X=this.config,W=this.data;this.animationIsPlaying=!1,this.data.enabled&&W.property&&(X.autoplay=!1,X.direction=W.dir,X.duration=W.dur,X.easing=W.easing,X.elasticity=W.elasticity,X.loop=W.loop,X.round=W.round,this.createAndStartAnimation())},tick:function(ne,X){this.animationIsPlaying&&(this.time+=X,this.animation.tick(this.time))},remove:function(){this.pauseAnimation(),this.removeEventListeners()},pause:function(){this.paused=!0,this.pausedWasPlaying=this.animationIsPlaying,this.pauseAnimation(),this.removeEventListeners()},play:function(){this.paused&&(this.paused=!1,this.addEventListeners(),this.pausedWasPlaying&&(this.resumeAnimation(),this.pausedWasPlaying=!1))},createAndStartAnimation:function(){var ne=this.data;if(this.updateConfig(),this.animationIsPlaying=!1,this.animation=h(this.config),this.animation.began=!0,this.removeEventListeners(),this.addEventListeners(),!(!ne.autoplay||ne.startEvents&&ne.startEvents.length)){if(ne.delay){setTimeout(this.beginAnimation,ne.delay);return}this.beginAnimation()}},beginAnimation:function(){this.updateConfig(),this.animation.began=!0,this.time=0,this.animationIsPlaying=!0,this.stopRelatedAnimations(),this.el.emit("animationbegin",this.eventDetail,!1)},pauseAnimation:function(){this.animationIsPlaying=!1},resumeAnimation:function(){this.animationIsPlaying=!0},onStartEvent:function(){if(this.data.enabled){if(this.updateConfig(),this.animation&&this.animation.pause(),this.animation=h(this.config),this.data.delay){setTimeout(this.beginAnimation,this.data.delay);return}this.beginAnimation()}},updateConfigForRawColor:function(){var ne=this.config,X=this.data,W=this.el,ce,he,xe;if(!this.waitComponentInitRawProperty(this.updateConfigForRawColor)){ce=X.from===""?K(W,X.property):X.from,xe=X.to,this.setColorConfig(ce,xe),ce=this.fromColor,xe=this.toColor,this.targetsArray.length=0,this.targetsArray.push(ce),ne.targets=this.targetsArray;for(he in xe)ne[he]=xe[he];ne.update=function(){var ve={};return function(Fe){var je;je=Fe.animatables[0].target,!(je.r===ve.r&&je.g===ve.g&&je.b===ve.b)&&se(W,X.property,je,X.type)}}()}},updateConfigForDefault:function(){var ne=this.config,X=this.data,W=this.el,ce,he,xe,ve;this.waitComponentInitRawProperty(this.updateConfigForDefault)||(X.from===""?ce=ee(X)?K(W,X.property):C(W,X.property):ce=X.from,ve=X.to,xe=!isNaN(ce||ve),xe?(ce=parseFloat(ce),ve=parseFloat(ve)):(ce=ce&&ce.toString(),ve=ve&&ve.toString()),he=X.to==="true"||X.to==="false"||X.to===!0||X.to===!1,he&&(ce=X.from==="true"||X.from===!0?1:0,ve=X.to==="true"||X.to===!0?1:0),this.targets.aframeProperty=ce,ne.targets=this.targets,ne.aframeProperty=ve,ne.update=function(){var Fe;return function(je){var rt;rt=je.animatables[0].target.aframeProperty,rt!==Fe&&(Fe=rt,he&&(rt=rt>=1),ee(X)?se(W,X.property,rt,X.type):g(W,X.property,rt))}}())},updateConfigForVector:function(){var ne=this.config,X=this.data,W=this.el,ce,he,xe;he=X.from!==""?v.coordinates.parse(X.from):C(W,X.property),xe=v.coordinates.parse(X.to),X.property===R&&(N(he),N(xe)),this.targetsArray.length=0,this.targetsArray.push(he),ne.targets=this.targetsArray;for(ce in xe)ne[ce]=xe[ce];if(X.property===S||X.property===R||X.property===P){ne.update=function(){var ve={};return function(Fe){var je=Fe.animatables[0].target;X.property===P&&(je.x=Math.max(1e-4,je.x),je.y=Math.max(1e-4,je.y),je.z=Math.max(1e-4,je.z)),!(je.x===ve.x&&je.y===ve.y&&je.z===ve.z)&&(ve.x=je.x,ve.y=je.y,ve.z=je.z,W.object3D[X.property].set(je.x,je.y,je.z))}}();return}ne.update=function(){var ve={};return function(Fe){var je=Fe.animatables[0].target;je.x===ve.x&&je.y===ve.y&&je.z===ve.z||(ve.x=je.x,ve.y=je.y,ve.z=je.z,g(W,X.property,je))}}()},updateConfig:function(){var ne;ne=L(this.el,this.data.property),ee(this.data)&&this.data.type===_?this.updateConfigForRawColor():ne==="vec2"||ne==="vec3"||ne==="vec4"?this.updateConfigForVector():this.updateConfigForDefault()},waitComponentInitRawProperty:function(ne){var X,W=this.data,ce=this.el,he=this;return W.from!==""||!W.property.startsWith(O)||(X=ae(W.property)[1],ce.components[X])?!1:(ce.addEventListener("componentinitialized",function xe(ve){ve.detail.name===X&&(ne(),he.animation=h(he.config),ce.removeEventListener("componentinitialized",xe))}),!0)},stopRelatedAnimations:function(){var ne,X;for(X in this.el.components)ne=this.el.components[X],X!==this.attrName&&ne.name==="animation"&&ne.animationIsPlaying&&ne.data.property===this.data.property&&(ne.animationIsPlaying=!1)},addEventListeners:function(){var ne=this.data,X=this.el;H(X,ne.startEvents,this.onStartEvent),H(X,ne.pauseEvents,this.pauseAnimation),H(X,ne.resumeEvents,this.resumeAnimation)},removeEventListeners:function(){var ne=this.data,X=this.el;J(X,ne.startEvents,this.onStartEvent),J(X,ne.pauseEvents,this.pauseAnimation),J(X,ne.resumeEvents,this.resumeAnimation)},setColorConfig:function(ne,X){y.set(ne),x.set(X),ne=this.fromColor,X=this.toColor,ne.r=y.r,ne.g=y.g,ne.b=y.b,X.r=x.r,X.g=x.g,X.b=x.b}});function L(ne,X){var W,ce,he,xe;return he=X.split("."),ce=he[0],xe=he[1],W=ne.components[ce]||m[ce],!W||xe&&!W.schema[xe]?null:xe?W.schema[xe].type:W.schema.type}function N(ne){ne.x=A.MathUtils.degToRad(ne.x),ne.y=A.MathUtils.degToRad(ne.y),ne.z=A.MathUtils.degToRad(ne.z)}function H(ne,X,W){var ce;for(ce=0;ce<X.length;ce++)ne.addEventListener(X[ce],W)}function J(ne,X,W){var ce;for(ce=0;ce<X.length;ce++)ne.removeEventListener(X[ce],W)}function K(ne,X){var W,ce,he;for(ce=ae(X),he=ne,W=0;W<ce.length;W++)he=he[ce[W]];if(he===void 0)throw console.log(ne),new Error("[animation] property ("+X+") could not be found");return he}function se(ne,X,W,ce){var he,xe,ve,Fe;for(X.startsWith("object3D.rotation")&&(W=A.MathUtils.degToRad(W)),xe=ae(X),Fe=ne,he=0;he<xe.length-1;he++)Fe=Fe[xe[he]];if(ve=xe[xe.length-1],ce===_){"r"in Fe[ve]?(Fe[ve].r=W.r,Fe[ve].g=W.g,Fe[ve].b=W.b):(Fe[ve].x=W.r,Fe[ve].y=W.g,Fe[ve].z=W.b);return}Fe[ve]=W}function ae(ne){return ne in b||(b[ne]=ne.split(".")),b[ne]}function ee(ne){return ne.isRawProperty||ne.property.startsWith(O)||ne.property.startsWith(D)}},"./src/components/camera.js":(l,d,c)=>{var h=c("./src/core/component.js").registerComponent,m=c("./src/lib/three.js");l.exports.Component=h("camera",{schema:{active:{default:!0},far:{default:1e4},fov:{default:80,min:0},near:{default:.005,min:0},spectator:{default:!1},zoom:{default:1,min:0}},init:function(){var p,A=this.el;p=this.camera=new m.PerspectiveCamera,A.setObject3D("camera",p)},update:function(p){var A=this.data,v=this.camera;v.aspect=A.aspect||window.innerWidth/window.innerHeight,v.far=A.far,v.fov=A.fov,v.near=A.near,v.zoom=A.zoom,v.updateProjectionMatrix(),this.updateActiveCamera(p),this.updateSpectatorCamera(p)},updateActiveCamera:function(p){var A=this.data,v=this.el,y=this.system;p&&p.active===A.active||A.spectator||(A.active&&y.activeCameraEl!==v?y.setActiveCamera(v):!A.active&&y.activeCameraEl===v&&y.disableActiveCamera())},updateSpectatorCamera:function(p){var A=this.data,v=this.el,y=this.system;p&&p.spectator===A.spectator||(A.spectator&&y.spectatorCameraEl!==v?y.setSpectatorCamera(v):!A.spectator&&y.spectatorCameraEl===v&&y.disableSpectatorCamera())},remove:function(){this.el.removeObject3D("camera")}})},"./src/components/cursor.js":(l,d,c)=>{var h=c("./src/core/component.js").registerComponent,m=c("./src/utils/index.js"),p=m.bind,A={CLICK:"click",FUSING:"fusing",MOUSEENTER:"mouseenter",MOUSEDOWN:"mousedown",MOUSELEAVE:"mouseleave",MOUSEUP:"mouseup"},v={FUSING:"cursor-fusing",HOVERING:"cursor-hovering",HOVERED:"cursor-hovered"},y={DOWN:["mousedown","touchstart"],UP:["mouseup","touchend"]},x={DOWN:["selectstart"],UP:["selectend"]},C="a-mouse-cursor-hover";l.exports.Component=h("cursor",{dependencies:["raycaster"],schema:{downEvents:{default:[]},fuse:{default:m.device.isMobile()},fuseTimeout:{default:1500,min:0},mouseCursorStylesEnabled:{default:!0},upEvents:{default:[]},rayOrigin:{default:"entity",oneOf:["mouse","entity","xrselect"]}},multiple:!0,init:function(){var g=this;this.fuseTimeout=void 0,this.cursorDownEl=null,this.intersectedEl=null,this.canvasBounds=document.body.getBoundingClientRect(),this.isCursorDown=!1,this.activeXRInput=null,this.updateCanvasBounds=m.debounce(function(){g.canvasBounds=g.el.sceneEl.canvas.getBoundingClientRect()},500),this.eventDetail={},this.intersectedEventDetail={cursorEl:this.el},this.onCursorDown=p(this.onCursorDown,this),this.onCursorUp=p(this.onCursorUp,this),this.onIntersection=p(this.onIntersection,this),this.onIntersectionCleared=p(this.onIntersectionCleared,this),this.onMouseMove=p(this.onMouseMove,this),this.onEnterVR=p(this.onEnterVR,this)},update:function(g){this.data.rayOrigin!==g.rayOrigin&&this.updateMouseEventListeners()},tick:function(){var g=this.el.sceneEl.frame,b=this.activeXRInput;this.data.rayOrigin==="xrselect"&&g&&b&&this.onMouseMove({frame:g,inputSource:b,type:"fakeselectevent"})},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners()},remove:function(){var g=this.el;g.removeState(v.HOVERING),g.removeState(v.FUSING),clearTimeout(this.fuseTimeout),this.intersectedEl&&this.intersectedEl.removeState(v.HOVERED),this.removeEventListeners()},addEventListeners:function(){var g,b=this.data,_=this.el,S=this;function R(){g=_.sceneEl.canvas,!(b.downEvents.length||b.upEvents.length)&&(y.DOWN.forEach(function(P){g.addEventListener(P,S.onCursorDown)}),y.UP.forEach(function(P){g.addEventListener(P,S.onCursorUp)}))}g=_.sceneEl.canvas,g?R():_.sceneEl.addEventListener("render-target-loaded",R),b.downEvents.forEach(function(P){_.addEventListener(P,S.onCursorDown)}),b.upEvents.forEach(function(P){_.addEventListener(P,S.onCursorUp)}),_.addEventListener("raycaster-intersection",this.onIntersection),_.addEventListener("raycaster-closest-entity-changed",this.onIntersection),_.addEventListener("raycaster-intersection-cleared",this.onIntersectionCleared),_.sceneEl.addEventListener("rendererresize",this.updateCanvasBounds),_.sceneEl.addEventListener("enter-vr",this.onEnterVR),window.addEventListener("resize",this.updateCanvasBounds),window.addEventListener("scroll",this.updateCanvasBounds),this.updateMouseEventListeners()},removeEventListeners:function(){var g,b=this.data,_=this.el,S=this;g=_.sceneEl.canvas,g&&!b.downEvents.length&&!b.upEvents.length&&(y.DOWN.forEach(function(R){g.removeEventListener(R,S.onCursorDown)}),y.UP.forEach(function(R){g.removeEventListener(R,S.onCursorUp)})),b.downEvents.forEach(function(R){_.removeEventListener(R,S.onCursorDown)}),b.upEvents.forEach(function(R){_.removeEventListener(R,S.onCursorUp)}),_.removeEventListener("raycaster-intersection",this.onIntersection),_.removeEventListener("raycaster-intersection-cleared",this.onIntersectionCleared),g.removeEventListener("mousemove",this.onMouseMove),g.removeEventListener("touchstart",this.onMouseMove),g.removeEventListener("touchmove",this.onMouseMove),_.sceneEl.removeEventListener("rendererresize",this.updateCanvasBounds),_.sceneEl.removeEventListener("enter-vr",this.onEnterVR),window.removeEventListener("resize",this.updateCanvasBounds),window.removeEventListener("scroll",this.updateCanvasBounds)},updateMouseEventListeners:function(){var g,b=this.el;g=b.sceneEl.canvas,g.removeEventListener("mousemove",this.onMouseMove),g.removeEventListener("touchmove",this.onMouseMove),b.setAttribute("raycaster","useWorldCoordinates",!1),this.data.rayOrigin==="mouse"&&(g.addEventListener("mousemove",this.onMouseMove,!1),g.addEventListener("touchmove",this.onMouseMove,!1),b.setAttribute("raycaster","useWorldCoordinates",!0),this.updateCanvasBounds())},onMouseMove:function(){var g=new THREE.Vector3,b=new THREE.Vector2,_=new THREE.Vector3,S={origin:_,direction:g};return function(R){var P=this.canvasBounds,O=this.el.sceneEl.camera,D,L,N,H,J,K,se,ae;O.parent.updateMatrixWorld(),R.type==="touchmove"||R.type==="touchstart"?L=R.touches.item(0):L=R,D=L.clientX-P.left,N=L.clientY-P.top,b.x=D/P.width*2-1,b.y=-(N/P.height)*2+1,this.data.rayOrigin==="xrselect"&&(R.type==="selectstart"||R.type==="fakeselectevent")?(H=R.frame,J=R.inputSource,K=this.el.renderer.xr.getReferenceSpace(),se=H.getPose(J.targetRaySpace,K),ae=se.transform,g.set(0,0,-1),g.applyQuaternion(ae.orientation),_.copy(ae.position)):R.type==="fakeselectout"?(g.set(0,1,0),_.set(0,9999,0)):O&&O.isPerspectiveCamera?(_.setFromMatrixPosition(O.matrixWorld),g.set(b.x,b.y,.5).unproject(O).sub(_).normalize()):O&&O.isOrthographicCamera?(_.set(b.x,b.y,(O.near+O.far)/(O.near-O.far)).unproject(O),g.set(0,0,-1).transformDirection(O.matrixWorld)):console.error("AFRAME.Raycaster: Unsupported camera type: "+O.type),this.el.setAttribute("raycaster",S),R.type==="touchmove"&&R.preventDefault()}}(),onCursorDown:function(g){this.isCursorDown=!0,this.data.rayOrigin==="mouse"&&g.type==="touchstart"&&(this.onMouseMove(g),this.el.components.raycaster.checkIntersections(),g.preventDefault()),this.data.rayOrigin==="xrselect"&&g.type==="selectstart"&&(this.activeXRInput=g.inputSource,this.onMouseMove(g),this.el.components.raycaster.checkIntersections(),this.el.components.raycaster.intersectedEls.length&&this.el.sceneEl.components["ar-hit-test"]!==void 0&&this.el.sceneEl.getAttribute("ar-hit-test").enabled&&(this.el.sceneEl.setAttribute("ar-hit-test","enabled",!1),this.reenableARHitTest=!0)),this.twoWayEmit(A.MOUSEDOWN,g),this.cursorDownEl=this.intersectedEl},onCursorUp:function(g){if(this.isCursorDown){this.isCursorDown=!1;var b=this.data;this.twoWayEmit(A.MOUSEUP,g),this.reenableARHitTest===!0&&(this.el.sceneEl.setAttribute("ar-hit-test","enabled",!0),this.reenableARHitTest=void 0),this.cursorDownEl&&this.cursorDownEl!==this.intersectedEl&&(this.intersectedEventDetail.intersection=null,this.cursorDownEl.emit(A.MOUSEUP,this.intersectedEventDetail)),(!b.fuse||b.rayOrigin==="mouse"||b.rayOrigin==="xrselect")&&this.intersectedEl&&this.cursorDownEl===this.intersectedEl&&this.twoWayEmit(A.CLICK,g),b.rayOrigin==="xrselect"&&this.activeXRInput===g.inputSource&&this.onMouseMove({type:"fakeselectout"}),this.activeXRInput=null,this.cursorDownEl=null,g.type==="touchend"&&g.preventDefault()}},onIntersection:function(g){var b,_=this.el,S,R,P;S=g.detail.els[0]===_?1:0,P=g.detail.intersections[S],R=g.detail.els[S],R&&this.intersectedEl!==R&&(this.intersectedEl&&(b=this.el.components.raycaster.getIntersection(this.intersectedEl),b&&b.distance<=P.distance)||(this.clearCurrentIntersection(!0),this.setIntersection(R,P)))},onIntersectionCleared:function(g){var b=g.detail.clearedEls;b.indexOf(this.intersectedEl)!==-1&&this.clearCurrentIntersection()},onEnterVR:function(){this.clearCurrentIntersection(!0);var g=this.el.sceneEl.xrSession,b=this;g&&this.data.rayOrigin!=="mouse"&&(x.DOWN.forEach(function(_){g.addEventListener(_,b.onCursorDown)}),x.UP.forEach(function(_){g.addEventListener(_,b.onCursorUp)}))},setIntersection:function(g,b){var _=this.el,S=this.data,R=this;this.intersectedEl!==g&&(this.intersectedEl=g,_.addState(v.HOVERING),g.addState(v.HOVERED),this.twoWayEmit(A.MOUSEENTER),this.data.mouseCursorStylesEnabled&&this.data.rayOrigin==="mouse"&&this.el.sceneEl.canvas.classList.add(C),!(S.fuseTimeout===0||!S.fuse||S.rayOrigin==="xrselect"||S.rayOrigin==="mouse")&&(_.addState(v.FUSING),this.twoWayEmit(A.FUSING),this.fuseTimeout=setTimeout(function(){_.removeState(v.FUSING),R.twoWayEmit(A.CLICK)},S.fuseTimeout)))},clearCurrentIntersection:function(g){var b,_,S,R=this.el;this.intersectedEl&&(this.intersectedEl.removeState(v.HOVERED),R.removeState(v.HOVERING),R.removeState(v.FUSING),this.twoWayEmit(A.MOUSELEAVE),this.data.mouseCursorStylesEnabled&&this.data.rayOrigin==="mouse"&&this.el.sceneEl.canvas.classList.remove(C),this.intersectedEl=null,clearTimeout(this.fuseTimeout),g!==!0&&(S=this.el.components.raycaster.intersections,S.length!==0&&(b=S[0].object.el===R?1:0,_=S[b],_&&this.setIntersection(_.object.el,_))))},twoWayEmit:function(g,b){var _=this.el,S=this.intersectedEl,R;function P(O,D){b instanceof MouseEvent?O.mouseEvent=b:typeof TouchEvent<"u"&&b instanceof TouchEvent&&(O.touchEvent=b)}R=this.el.components.raycaster.getIntersection(S),this.eventDetail.intersectedEl=S,this.eventDetail.intersection=R,P(this.eventDetail),_.emit(g,this.eventDetail),S&&(this.intersectedEventDetail.intersection=R,P(this.intersectedEventDetail),S.emit(g,this.intersectedEventDetail))}})},"./src/components/daydream-controls.js":(l,d,c)=>{var h=c("./src/core/component.js").registerComponent,m=c("./src/utils/bind.js"),p=c("./src/utils/tracked-controls.js"),A=p.checkControllerPresentAndSetup,v=p.emitIfAxesChanged,y=p.onButtonEvent,x="https://cdn.aframe.io/controllers/google/",C=x+"vr_controller_daydream.obj",g=x+"vr_controller_daydream.mtl",b=c("./src/utils/index.js").device.isWebXRAvailable,_="google-daydream",S="Daydream Controller",R=b?_:S,P={axes:{trackpad:[0,1]},buttons:["trackpad","menu","system"]},O={axes:{touchpad:[0,1]},buttons:["none","none","touchpad","menu","system"]},D=b?O:P;l.exports.Component=h("daydream-controls",{schema:{hand:{default:""},buttonColor:{type:"color",default:"#000000"},buttonTouchedColor:{type:"color",default:"#777777"},buttonHighlightColor:{type:"color",default:"#FFFFFF"},model:{default:!0},orientationOffset:{type:"vec3"},armModel:{default:!0}},mapping:D,bindMethods:function(){this.onModelLoaded=m(this.onModelLoaded,this),this.onControllersUpdate=m(this.onControllersUpdate,this),this.checkIfControllerPresent=m(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=m(this.removeControllersUpdateListener,this),this.onAxisMoved=m(this.onAxisMoved,this)},init:function(){var L=this;this.onButtonChanged=m(this.onButtonChanged,this),this.onButtonDown=function(N){y(N.detail.id,"down",L)},this.onButtonUp=function(N){y(N.detail.id,"up",L)},this.onButtonTouchStart=function(N){y(N.detail.id,"touchstart",L)},this.onButtonTouchEnd=function(N){y(N.detail.id,"touchend",L)},this.controllerPresent=!1,this.lastControllerCheck=0,this.bindMethods()},addEventListeners:function(){var L=this.el;L.addEventListener("buttonchanged",this.onButtonChanged),L.addEventListener("buttondown",this.onButtonDown),L.addEventListener("buttonup",this.onButtonUp),L.addEventListener("touchstart",this.onButtonTouchStart),L.addEventListener("touchend",this.onButtonTouchEnd),L.addEventListener("model-loaded",this.onModelLoaded),L.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var L=this.el;L.removeEventListener("buttonchanged",this.onButtonChanged),L.removeEventListener("buttondown",this.onButtonDown),L.removeEventListener("buttonup",this.onButtonUp),L.removeEventListener("touchstart",this.onButtonTouchStart),L.removeEventListener("touchend",this.onButtonTouchEnd),L.removeEventListener("model-loaded",this.onModelLoaded),L.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){A(this,R,this.data.hand?{hand:this.data.hand}:{})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var L=this.el,N=this.data;L.setAttribute("tracked-controls",{armModel:N.armModel,hand:N.hand,idPrefix:R,id:R,orientationOffset:N.orientationOffset}),this.data.model&&this.el.setAttribute("obj-model",{obj:C,mtl:g})},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelLoaded:function(L){var N=L.detail.model,H;this.data.model&&(H=this.buttonMeshes={},H.menu=N.getObjectByName("AppButton_AppButton_Cylinder.004"),H.system=N.getObjectByName("HomeButton_HomeButton_Cylinder.005"),H.trackpad=N.getObjectByName("TouchPad_TouchPad_Cylinder.003"),H.touchpad=N.getObjectByName("TouchPad_TouchPad_Cylinder.003"),N.position.set(0,0,-.04))},onAxisMoved:function(L){v(this,this.mapping.axes,L)},onButtonChanged:function(L){var N=this.mapping.buttons[L.detail.id];N&&this.el.emit(N+"changed",L.detail.state)},updateModel:function(L,N){this.data.model&&this.updateButtonModel(L,N)},updateButtonModel:function(L,N){var H=this.buttonMeshes;if(!(!H||!H[L])){var J;switch(N){case"down":J=this.data.buttonHighlightColor;break;case"touchstart":J=this.data.buttonTouchedColor;break;default:J=this.data.buttonColor}H[L].material.color.set(J)}}})},"./src/components/gearvr-controls.js":(l,d,c)=>{var h=c("./src/core/component.js").registerComponent,m=c("./src/utils/bind.js"),p=c("./src/utils/tracked-controls.js"),A=p.checkControllerPresentAndSetup,v=p.emitIfAxesChanged,y=p.onButtonEvent,x=c("./src/utils/index.js").device.isWebXRAvailable,C="https://cdn.aframe.io/controllers/samsung/",g=C+"gear_vr_controller.obj",b=C+"gear_vr_controller.mtl",_="samsung-gearvr",S="Gear VR",R=x?_:S,P={axes:{trackpad:[0,1]},buttons:["trackpad","trigger"]},O={axes:{touchpad:[0,1]},buttons:["trigger","none","touchpad","none","menu"]},D=x?O:P;l.exports.Component=h("gearvr-controls",{schema:{hand:{default:""},buttonColor:{type:"color",default:"#000000"},buttonTouchedColor:{type:"color",default:"#777777"},buttonHighlightColor:{type:"color",default:"#FFFFFF"},model:{default:!0},orientationOffset:{type:"vec3"},armModel:{default:!0}},mapping:D,bindMethods:function(){this.onModelLoaded=m(this.onModelLoaded,this),this.onControllersUpdate=m(this.onControllersUpdate,this),this.checkIfControllerPresent=m(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=m(this.removeControllersUpdateListener,this),this.onAxisMoved=m(this.onAxisMoved,this)},init:function(){var L=this;this.onButtonChanged=m(this.onButtonChanged,this),this.onButtonDown=function(N){y(N.detail.id,"down",L)},this.onButtonUp=function(N){y(N.detail.id,"up",L)},this.onButtonTouchStart=function(N){y(N.detail.id,"touchstart",L)},this.onButtonTouchEnd=function(N){y(N.detail.id,"touchend",L)},this.controllerPresent=!1,this.lastControllerCheck=0,this.bindMethods()},addEventListeners:function(){var L=this.el;L.addEventListener("buttonchanged",this.onButtonChanged),L.addEventListener("buttondown",this.onButtonDown),L.addEventListener("buttonup",this.onButtonUp),L.addEventListener("touchstart",this.onButtonTouchStart),L.addEventListener("touchend",this.onButtonTouchEnd),L.addEventListener("model-loaded",this.onModelLoaded),L.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var L=this.el;L.removeEventListener("buttonchanged",this.onButtonChanged),L.removeEventListener("buttondown",this.onButtonDown),L.removeEventListener("buttonup",this.onButtonUp),L.removeEventListener("touchstart",this.onButtonTouchStart),L.removeEventListener("touchend",this.onButtonTouchEnd),L.removeEventListener("model-loaded",this.onModelLoaded),L.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){A(this,R,this.data.hand?{hand:this.data.hand}:{})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var L=this.el,N=this.data;L.setAttribute("tracked-controls",{armModel:N.armModel,hand:N.hand,idPrefix:R,id:R,orientationOffset:N.orientationOffset}),this.data.model&&this.el.setAttribute("obj-model",{obj:g,mtl:b})},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelLoaded:function(L){var N=L.detail.model,H;this.data.model&&(H=this.buttonMeshes={},H.trigger=N.children[2],H.trackpad=N.children[1],H.touchpad=N.children[1])},onButtonChanged:function(L){var N=this.mapping.buttons[L.detail.id];N&&this.el.emit(N+"changed",L.detail.state)},onAxisMoved:function(L){v(this,this.mapping.axes,L)},updateModel:function(L,N){this.data.model&&this.updateButtonModel(L,N)},updateButtonModel:function(L,N){var H=this.buttonMeshes;if(!(!H||!H[L])){var J;switch(N){case"down":J=this.data.buttonHighlightColor;break;case"touchstart":J=this.data.buttonTouchedColor;break;default:J=this.data.buttonColor}H[L].material.color.set(J)}}})},"./src/components/generic-tracked-controller-controls.js":(l,d,c)=>{var h=c("./src/core/component.js").registerComponent,m=c("./src/utils/bind.js"),p=c("./src/utils/tracked-controls.js"),A=p.checkControllerPresentAndSetup,v=p.emitIfAxesChanged,y=p.onButtonEvent,x="generic",C={axes:{touchpad:[0,1],thumbstick:[2,3]},buttons:["trigger","squeeze","touchpad","thumbstick"]};l.exports.Component=h("generic-tracked-controller-controls",{schema:{hand:{default:""},defaultModel:{default:!0},defaultModelColor:{default:"gray"},orientationOffset:{type:"vec3"},disabled:{default:!1}},mapping:C,bindMethods:function(){this.onControllersUpdate=m(this.onControllersUpdate,this),this.checkIfControllerPresent=m(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=m(this.removeControllersUpdateListener,this),this.onAxisMoved=m(this.onAxisMoved,this)},init:function(){var g=this;this.onButtonChanged=m(this.onButtonChanged,this),this.onButtonDown=function(b){y(b.detail.id,"down",g)},this.onButtonUp=function(b){y(b.detail.id,"up",g)},this.onButtonTouchStart=function(b){y(b.detail.id,"touchstart",g)},this.onButtonTouchEnd=function(b){y(b.detail.id,"touchend",g)},this.controllerPresent=!1,this.wasControllerConnected=!1,this.lastControllerCheck=0,this.rendererSystem=this.el.sceneEl.systems.renderer,this.bindMethods(),this.el.addEventListener("controllerconnected",function(b){b.detail.name!==g.name&&(g.wasControllerConnected=!0,g.removeEventListeners(),g.removeControllersUpdateListener())})},addEventListeners:function(){var g=this.el;g.addEventListener("buttonchanged",this.onButtonChanged),g.addEventListener("buttondown",this.onButtonDown),g.addEventListener("buttonup",this.onButtonUp),g.addEventListener("touchstart",this.onButtonTouchStart),g.addEventListener("touchend",this.onButtonTouchEnd),g.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var g=this.el;g.removeEventListener("buttonchanged",this.onButtonChanged),g.removeEventListener("buttondown",this.onButtonDown),g.removeEventListener("buttonup",this.onButtonUp),g.removeEventListener("touchstart",this.onButtonTouchStart),g.removeEventListener("touchend",this.onButtonTouchEnd),g.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var g=this.data,b=g.hand?g.hand:void 0;A(this,x,{hand:b,iterateControllerProfiles:!0})},play:function(){this.wasControllerConnected||(this.checkIfControllerPresent(),this.addControllersUpdateListener())},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var g=this.el,b=this.data;if(this.el.components["tracked-controls"]){this.removeEventListeners();return}g.setAttribute("tracked-controls",{hand:b.hand,idPrefix:x,orientationOffset:b.orientationOffset,iterateControllerProfiles:!0}),this.data.defaultModel&&this.initDefaultModel()},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(g){var b=this.mapping.buttons[g.detail.id];b&&this.el.emit(b+"changed",g.detail.state)},onAxisMoved:function(g){v(this,this.mapping.axes,g)},initDefaultModel:function(){var g=this.modelEl=document.createElement("a-entity");g.setAttribute("geometry",{primitive:"sphere",radius:.03}),g.setAttribute("material",{color:this.data.color}),this.el.appendChild(g)}})},"./src/components/geometry.js":(l,d,c)=>{var h=c("./src/core/geometry.js").geometries,m=c("./src/core/geometry.js").geometryNames,p=c("./src/core/component.js").registerComponent,A=c("./src/lib/three.js"),v=new A.BufferGeometry;l.exports.Component=p("geometry",{schema:{buffer:{default:!0},primitive:{default:"box",oneOf:m,schemaChange:!0},skipCache:{default:!1}},init:function(){this.geometry=null},update:function(y){var x=this.data,C=this.el,g,b=this.system;this.geometry&&(b.unuseGeometry(y),this.geometry=null),this.geometry=b.getOrCreateGeometry(x),g=C.getObject3D("mesh"),g?g.geometry=this.geometry:(g=new A.Mesh,g.geometry=this.geometry,this.el.getAttribute("material")||(g.material=new A.MeshStandardMaterial({color:Math.random()*16777215,metalness:0,roughness:.5})),C.setObject3D("mesh",g))},remove:function(){this.system.unuseGeometry(this.data),this.el.getObject3D("mesh").geometry=v,this.geometry=null},updateSchema:function(y){var x=this.oldData&&this.oldData.primitive,C=y.primitive,g=h[C]&&h[C].schema;if(!g)throw new Error("Unknown geometry schema `"+C+"`");x&&x===C||this.extendSchema(g)}})},"./src/components/gltf-model.js":(l,d,c)=>{var h=c("./src/core/component.js").registerComponent,m=c("./src/lib/three.js"),p=c("./src/utils/index.js"),A=p.debug("components:gltf-model:warn");l.exports.Component=h("gltf-model",{schema:{type:"model"},init:function(){var v=this,y=this.system.getDRACOLoader(),x=this.system.getMeshoptDecoder(),C=this.system.getKTX2Loader();this.model=null,this.loader=new m.GLTFLoader,y&&this.loader.setDRACOLoader(y),x?this.ready=x.then(function(g){v.loader.setMeshoptDecoder(g)}):this.ready=Promise.resolve(),C&&this.loader.setKTX2Loader(C)},update:function(){var v=this,y=this.el,x=this.data;x&&(this.remove(),this.ready.then(function(){v.loader.load(x,function(g){v.model=g.scene||g.scenes[0],v.model.animations=g.animations,y.setObject3D("mesh",v.model),y.emit("model-loaded",{format:"gltf",model:v.model})},void 0,function(g){var b=g&&g.message?g.message:"Failed to load glTF model";A(b),y.emit("model-error",{format:"gltf",src:x})})}))},remove:function(){this.model&&this.el.removeObject3D("mesh")}})},"./src/components/hand-controls.js":(l,d,c)=>{var h=c("./src/core/component.js").registerComponent,m={toonLeft:"https://cdn.aframe.io/controllers/hands/leftHand.glb",toonRight:"https://cdn.aframe.io/controllers/hands/rightHand.glb",lowPolyLeft:"https://cdn.aframe.io/controllers/hands/leftHandLow.glb",lowPolyRight:"https://cdn.aframe.io/controllers/hands/rightHandLow.glb",highPolyLeft:"https://cdn.aframe.io/controllers/hands/leftHandHigh.glb",highPolyRight:"https://cdn.aframe.io/controllers/hands/rightHandHigh.glb"},p={open:"Open",point:"Point",pointThumb:"Point + Thumb",fist:"Fist",hold:"Hold",thumbUp:"Thumb Up"},A={};A[p.fist]="grip",A[p.thumbUp]="pistol",A[p.point]="pointing",l.exports.Component=h("hand-controls",{schema:{color:{default:"white",type:"color"},hand:{default:"left"},handModelStyle:{default:"lowPoly",oneOf:["lowPoly","highPoly","toon"]}},init:function(){var x=this,C=this.el;this.gesture=p.open,this.pressedButtons={},this.touchedButtons={},this.loader=new THREE.GLTFLoader,this.loader.setCrossOrigin("anonymous"),this.onGripDown=function(){x.handleButton("grip","down")},this.onGripUp=function(){x.handleButton("grip","up")},this.onTrackpadDown=function(){x.handleButton("trackpad","down")},this.onTrackpadUp=function(){x.handleButton("trackpad","up")},this.onTrackpadTouchStart=function(){x.handleButton("trackpad","touchstart")},this.onTrackpadTouchEnd=function(){x.handleButton("trackpad","touchend")},this.onTriggerDown=function(){x.handleButton("trigger","down")},this.onTriggerUp=function(){x.handleButton("trigger","up")},this.onTriggerTouchStart=function(){x.handleButton("trigger","touchstart")},this.onTriggerTouchEnd=function(){x.handleButton("trigger","touchend")},this.onGripTouchStart=function(){x.handleButton("grip","touchstart")},this.onGripTouchEnd=function(){x.handleButton("grip","touchend")},this.onThumbstickDown=function(){x.handleButton("thumbstick","down")},this.onThumbstickUp=function(){x.handleButton("thumbstick","up")},this.onAorXTouchStart=function(){x.handleButton("AorX","touchstart")},this.onAorXTouchEnd=function(){x.handleButton("AorX","touchend")},this.onBorYTouchStart=function(){x.handleButton("BorY","touchstart")},this.onBorYTouchEnd=function(){x.handleButton("BorY","touchend")},this.onSurfaceTouchStart=function(){x.handleButton("surface","touchstart")},this.onSurfaceTouchEnd=function(){x.handleButton("surface","touchend")},this.onControllerConnected=this.onControllerConnected.bind(this),this.onControllerDisconnected=this.onControllerDisconnected.bind(this),C.addEventListener("controllerconnected",this.onControllerConnected),C.addEventListener("controllerdisconnected",this.onControllerDisconnected),C.object3D.visible=!1},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners()},tick:function(x,C){var g=this.el.getObject3D("mesh");!g||!g.mixer||g.mixer.update(C/1e3)},onControllerConnected:function(){this.el.object3D.visible=!0},onControllerDisconnected:function(){this.el.object3D.visible=!1},addEventListeners:function(){var x=this.el;x.addEventListener("gripdown",this.onGripDown),x.addEventListener("gripup",this.onGripUp),x.addEventListener("trackpaddown",this.onTrackpadDown),x.addEventListener("trackpadup",this.onTrackpadUp),x.addEventListener("trackpadtouchstart",this.onTrackpadTouchStart),x.addEventListener("trackpadtouchend",this.onTrackpadTouchEnd),x.addEventListener("triggerdown",this.onTriggerDown),x.addEventListener("triggerup",this.onTriggerUp),x.addEventListener("triggertouchstart",this.onTriggerTouchStart),x.addEventListener("triggertouchend",this.onTriggerTouchEnd),x.addEventListener("griptouchstart",this.onGripTouchStart),x.addEventListener("griptouchend",this.onGripTouchEnd),x.addEventListener("thumbstickdown",this.onThumbstickDown),x.addEventListener("thumbstickup",this.onThumbstickUp),x.addEventListener("abuttontouchstart",this.onAorXTouchStart),x.addEventListener("abuttontouchend",this.onAorXTouchEnd),x.addEventListener("bbuttontouchstart",this.onBorYTouchStart),x.addEventListener("bbuttontouchend",this.onBorYTouchEnd),x.addEventListener("xbuttontouchstart",this.onAorXTouchStart),x.addEventListener("xbuttontouchend",this.onAorXTouchEnd),x.addEventListener("ybuttontouchstart",this.onBorYTouchStart),x.addEventListener("ybuttontouchend",this.onBorYTouchEnd),x.addEventListener("surfacetouchstart",this.onSurfaceTouchStart),x.addEventListener("surfacetouchend",this.onSurfaceTouchEnd)},removeEventListeners:function(){var x=this.el;x.removeEventListener("gripdown",this.onGripDown),x.removeEventListener("gripup",this.onGripUp),x.removeEventListener("trackpaddown",this.onTrackpadDown),x.removeEventListener("trackpadup",this.onTrackpadUp),x.removeEventListener("trackpadtouchstart",this.onTrackpadTouchStart),x.removeEventListener("trackpadtouchend",this.onTrackpadTouchEnd),x.removeEventListener("triggerdown",this.onTriggerDown),x.removeEventListener("triggerup",this.onTriggerUp),x.removeEventListener("triggertouchstart",this.onTriggerTouchStart),x.removeEventListener("triggertouchend",this.onTriggerTouchEnd),x.removeEventListener("griptouchstart",this.onGripTouchStart),x.removeEventListener("griptouchend",this.onGripTouchEnd),x.removeEventListener("thumbstickdown",this.onThumbstickDown),x.removeEventListener("thumbstickup",this.onThumbstickUp),x.removeEventListener("abuttontouchstart",this.onAorXTouchStart),x.removeEventListener("abuttontouchend",this.onAorXTouchEnd),x.removeEventListener("bbuttontouchstart",this.onBorYTouchStart),x.removeEventListener("bbuttontouchend",this.onBorYTouchEnd),x.removeEventListener("xbuttontouchstart",this.onAorXTouchStart),x.removeEventListener("xbuttontouchend",this.onAorXTouchEnd),x.removeEventListener("ybuttontouchstart",this.onBorYTouchStart),x.removeEventListener("ybuttontouchend",this.onBorYTouchEnd),x.removeEventListener("surfacetouchstart",this.onSurfaceTouchStart),x.removeEventListener("surfacetouchend",this.onSurfaceTouchEnd)},update:function(x){var C,g=this.el,b=this.data.hand,_=this.data.handModelStyle,S=this.data.color,R=this;if(C={hand:b,model:!1},b!==x){var P=m[_+b.charAt(0).toUpperCase()+b.slice(1)];this.loader.load(P,function(O){var D=O.scene.children[0],L=b==="left"?Math.PI/2:-Math.PI/2;D.mixer=new THREE.AnimationMixer(D),R.clips=O.animations,g.setObject3D("mesh",D);var N=D.children[1].material;N.color=new THREE.Color(S),D.position.set(0,0,0),D.rotation.set(0,0,L),g.setAttribute("magicleap-controls",C),g.setAttribute("vive-controls",C),g.setAttribute("oculus-touch-controls",C),g.setAttribute("windows-motion-controls",C),g.setAttribute("hp-mixed-reality-controls",C)})}},remove:function(){this.el.removeObject3D("mesh")},handleButton:function(x,C){var g,b=C==="down",_=C==="touchstart";if(C.indexOf("touch")===0){if(_===this.touchedButtons[x])return;this.touchedButtons[x]=_}else{if(b===this.pressedButtons[x])return;this.pressedButtons[x]=b}g=this.gesture,this.gesture=this.determineGesture(),this.gesture!==g&&(this.animateGesture(this.gesture,g),this.emitGestureEvents(this.gesture,g))},determineGesture:function(){var x,C=this.pressedButtons.grip,g=this.pressedButtons.surface||this.touchedButtons.surface,b=this.pressedButtons.trackpad||this.touchedButtons.trackpad,_=this.pressedButtons.trigger||this.touchedButtons.trigger,S=this.touchedButtons.AorX||this.touchedButtons.BorY,R=y(this.el.components["tracked-controls"]);return R?C||_?x=p.fist:b&&(x=p.point):C?g||S||b?x=_?p.fist:p.point:x=_?p.thumbUp:p.pointThumb:_&&(x=p.hold),x},getClip:function(x){var C,g;for(g=0;g<this.clips.length;g++)if(C=this.clips[g],C.name===x)return C},animateGesture:function(x,C){if(x){this.playAnimation(x||p.open,C,!1);return}this.playAnimation(C,C,!0)},emitGestureEvents:function(x,C){var g=this.el,b;C!==x&&(b=v(C,!1),b&&g.emit(b),b=v(x,!0),b&&g.emit(b))},playAnimation:function(x,C,g){var b,_,S=this.el.getObject3D("mesh"),R;if(S){if(S.mixer.stopAllAction(),b=this.getClip(x),R=S.mixer.clipAction(b),R.clampWhenFinished=!0,R.loop=THREE.LoopRepeat,R.repetitions=0,R.timeScale=g?-1:1,R.time=g?b.duration:0,R.weight=1,!C||x===C){S.mixer.stopAllAction(),R.play();return}b=this.getClip(C),_=S.mixer.clipAction(b),_.weight=.15,_.play(),R.play(),_.crossFadeTo(R,.15,!0)}}});function v(x,C){var g;if(x){if(g=A[x],g==="grip")return g+(C?"close":"open");if(g==="point")return g+(C?"up":"down");if(g==="pointing"||g==="pistol")return g+(C?"start":"end")}}function y(x){var C=x&&x.controller,g=C&&(C.id&&C.id.indexOf("OpenVR ")===0||C.profiles&&C.profiles[0]&&C.profiles[0]==="htc-vive");return g}},"./src/components/hand-tracking-controls.js":(l,d,c)=>{var h=c("./src/core/component.js").registerComponent,m=c("./src/utils/bind.js"),p=c("./src/utils/tracked-controls.js"),A=p.checkControllerPresentAndSetup,v="https://cdn.aframe.io/controllers/oculus-hands/v4/left.glb",y="https://cdn.aframe.io/controllers/oculus-hands/v4/right.glb",x=["wrist","thumb-metacarpal","thumb-phalanx-proximal","thumb-phalanx-distal","thumb-tip","index-finger-metacarpal","index-finger-phalanx-proximal","index-finger-phalanx-intermediate","index-finger-phalanx-distal","index-finger-tip","middle-finger-metacarpal","middle-finger-phalanx-proximal","middle-finger-phalanx-intermediate","middle-finger-phalanx-distal","middle-finger-tip","ring-finger-metacarpal","ring-finger-phalanx-proximal","ring-finger-phalanx-intermediate","ring-finger-phalanx-distal","ring-finger-tip","pinky-finger-metacarpal","pinky-finger-phalanx-proximal","pinky-finger-phalanx-intermediate","pinky-finger-phalanx-distal","pinky-finger-tip"],C=.015,g=.03,b=.5;l.exports.Component=h("hand-tracking-controls",{schema:{hand:{default:"right",oneOf:["left","right"]},modelStyle:{default:"mesh",oneOf:["dots","mesh"]},modelColor:{default:"white"}},bindMethods:function(){this.onControllersUpdate=m(this.onControllersUpdate,this),this.checkIfControllerPresent=m(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=m(this.removeControllersUpdateListener,this)},addEventListeners:function(){this.el.addEventListener("model-loaded",this.onModelLoaded);for(var _=0;_<this.jointEls.length;++_)this.jointEls[_].object3D.visible=!0},removeEventListeners:function(){this.el.removeEventListener("model-loaded",this.onModelLoaded);for(var _=0;_<this.jointEls.length;++_)this.jointEls[_].object3D.visible=!1},init:function(){var _=this.el.sceneEl,S=_.getAttribute("webxr").optionalFeatures;S.push("hand-tracking"),_.setAttribute("webxr",{optionalFeatures:S}),this.onModelLoaded=this.onModelLoaded.bind(this),this.jointEls=[],this.controllerPresent=!1,this.isPinched=!1,this.pinchEventDetail={position:new THREE.Vector3},this.indexTipPosition=new THREE.Vector3,this.bindMethods(),this.updateReferenceSpace=this.updateReferenceSpace.bind(this),this.el.sceneEl.addEventListener("enter-vr",this.updateReferenceSpace),this.el.sceneEl.addEventListener("exit-vr",this.updateReferenceSpace)},updateReferenceSpace:function(){var _=this,S=this.el.sceneEl.xrSession;if(this.referenceSpace=void 0,!!S){var R=_.el.sceneEl.systems.webxr.sessionReferenceSpaceType;S.requestReferenceSpace(R).then(function(P){_.referenceSpace=P.getOffsetReferenceSpace(new XRRigidTransform({x:0,y:1.5,z:0}))}).catch(function(P){throw _.el.sceneEl.systems.webxr.warnIfFeatureNotRequested(R,"tracked-controls-webxr uses reference space "+R),P})}},checkIfControllerPresent:function(){var _=this.data,S=_.hand?_.hand:void 0;A(this,"",{hand:S,iterateControllerProfiles:!0,handTracking:!0})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},tick:function(){var _=this.el.sceneEl,S=this.el.components["tracked-controls"]&&this.el.components["tracked-controls"].controller,R=_.frame,P=this.el.components["tracked-controls-webxr"];!S||!R||!P||S.hand&&(this.el.object3D.position.set(0,0,0),this.el.object3D.rotation.set(0,0,0),R.getJointPose&&this.updateHandModel(),this.detectGesture())},updateHandModel:function(){this.data.modelStyle==="dots"&&this.updateHandDotsModel(),this.data.modelStyle==="mesh"&&this.updateHandMeshModel()},getBone:function(_){for(var S=this.bones,R=0;R<S.length;R++)if(S[R].name===_)return S[R];return null},updateHandMeshModel:function(){var _=this.el.sceneEl.frame,S=this.el.components["tracked-controls"]&&this.el.components["tracked-controls"].controller,R=this.referenceSpace;if(!(!S||!this.mesh||!R)){this.mesh.visible=!1;for(var P of S.hand.values()){var O,D,L;D=_.getJointPose(P,R),O=this.getBone(P.jointName),O!=null&&D&&(L=D.transform,this.mesh.visible=!0,O.position.copy(L.position),O.quaternion.copy(L.orientation))}}},updateHandDotsModel:function(){var _=this.el.sceneEl.frame,S=this.el.components["tracked-controls"]&&this.el.components["tracked-controls"].controller,R=this.el.components["tracked-controls-webxr"],P=R.system.referenceSpace,O,D,L,N=0;for(var H of S.hand.values())O=this.jointEls[N++],D=O.object3D,L=_.getJointPose(H,P),O.object3D.visible=!!L,L&&(D.matrix.elements=L.transform.matrix,D.matrix.decompose(D.position,D.rotation,D.scale),O.setAttribute("scale",{x:L.radius,y:L.radius,z:L.radius}))},detectGesture:function(){this.detectPinch()},detectPinch:function(){var _=new THREE.Vector3;return function(){var S=this.el.sceneEl.frame,R=this.indexTipPosition,P=this.el.components["tracked-controls"]&&this.el.components["tracked-controls"].controller,O=this.el.components["tracked-controls-webxr"],D=this.referenceSpace||O.system.referenceSpace,L=P.hand.get("index-finger-tip"),N=P.hand.get("thumb-tip");if(!(!L||!N)){var H=S.getJointPose(L,D),J=S.getJointPose(N,D);if(!(!H||!J)){_.copy(J.transform.position),R.copy(H.transform.position);var K=R.distanceTo(_);K<C&&this.isPinched===!1&&(this.isPinched=!0,this.pinchEventDetail.position.copy(R).lerp(_,b),this.pinchEventDetail.position.y+=1.5,this.el.emit("pinchstarted",this.pinchEventDetail)),K>g&&this.isPinched===!0&&(this.isPinched=!1,this.pinchEventDetail.position.copy(R).lerp(_,b),this.pinchEventDetail.position.y+=1.5,this.el.emit("pinchended",this.pinchEventDetail)),this.isPinched&&(this.pinchEventDetail.position.copy(R).lerp(_,b),this.pinchEventDetail.position.y+=1.5,this.el.emit("pinchmoved",this.pinchEventDetail)),R.y+=1.5}}}}(),pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var _=this.el,S=this.data;_.setAttribute("tracked-controls",{hand:S.hand,iterateControllerProfiles:!0,handTrackingEnabled:!0}),this.initDefaultModel()},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){var _;this.checkIfControllerPresent(),_=this.el.components["tracked-controls"]&&this.el.components["tracked-controls"].controller,this.el.getObject3D("mesh")&&(!_||!_.hand||!_.hand[0])&&(this.el.getObject3D("mesh").visible=!1)},initDefaultModel:function(){this.el.getObject3D("mesh")||(this.data.modelStyle==="dots"&&this.initDotsModel(),this.data.modelStyle==="mesh"&&this.initMeshHandModel())},initDotsModel:function(){if(this.jointEls.length===0)for(var _=0;_<x.length;++_){var S=this.jointEl=document.createElement("a-entity");S.setAttribute("geometry",{primitive:"sphere",radius:1}),S.setAttribute("material",{color:this.data.modelColor}),S.object3D.visible=!1,this.el.appendChild(S),this.jointEls.push(S)}},initMeshHandModel:function(){var _=this.data.hand==="left"?v:y;this.el.setAttribute("gltf-model",_)},onModelLoaded:function(){var _=this.mesh=this.el.getObject3D("mesh").children[0],S=this.skinnedMesh=_.getObjectByProperty("type","SkinnedMesh");this.skinnedMesh&&(this.bones=S.skeleton.bones,this.el.removeObject3D("mesh"),_.position.set(0,1.5,0),_.rotation.set(0,0,0),S.frustumCulled=!1,S.material=new THREE.MeshStandardMaterial({skinning:!0,color:this.data.modelColor}),this.el.setObject3D("mesh",_))}})},"./src/components/hide-on-enter-ar.js":(l,d,c)=>{var h=c("./src/core/component.js").registerComponent;l.exports.Component=h("hide-on-enter-ar",{init:function(){var m=this;this.el.sceneEl.addEventListener("enter-vr",function(){m.el.sceneEl.is("ar-mode")&&(m.el.object3D.visible=!1)}),this.el.sceneEl.addEventListener("exit-vr",function(){m.el.object3D.visible=!0})}})},"./src/components/hp-mixed-reality-controls.js":(l,d,c)=>{var h=c("./src/utils/bind.js"),m=c("./src/core/component.js").registerComponent,p=c("./src/lib/three.js"),A=c("./src/utils/tracked-controls.js"),v=A.checkControllerPresentAndSetup,y=A.emitIfAxesChanged,x=A.onButtonEvent,C="hp-mixed-reality",g="https://cdn.aframe.io/controllers/hp/mixed-reality/",b={x:0,y:0,z:.06},_={_x:Math.PI/4,_y:0,_z:0,_order:"XYZ"},S={left:{axes:{touchpad:[2,3]},buttons:["trigger","grip","none","thumbstick","xbutton","ybutton"]},right:{axes:{touchpad:[2,3]},buttons:["trigger","grip","none","thumbstick","abutton","bbutton"]}};l.exports.Component=m("hp-mixed-reality-controls",{schema:{hand:{default:"none"},model:{default:!0},orientationOffset:{type:"vec3"}},mapping:S,init:function(){var R=this;this.controllerPresent=!1,this.lastControllerCheck=0,this.onButtonChanged=h(this.onButtonChanged,this),this.onButtonDown=function(P){x(P.detail.id,"down",R,R.data.hand)},this.onButtonUp=function(P){x(P.detail.id,"up",R,R.data.hand)},this.onButtonTouchEnd=function(P){x(P.detail.id,"touchend",R,R.data.hand)},this.onButtonTouchStart=function(P){x(P.detail.id,"touchstart",R,R.data.hand)},this.previousButtonValues={},this.rendererSystem=this.el.sceneEl.systems.renderer,this.bindMethods()},update:function(){var R=this.data;this.controllerIndex=R.hand==="right"?0:R.hand==="left"?1:2},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=h(this.onModelLoaded,this),this.onControllersUpdate=h(this.onControllersUpdate,this),this.checkIfControllerPresent=h(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=h(this.removeControllersUpdateListener,this),this.onAxisMoved=h(this.onAxisMoved,this)},addEventListeners:function(){var R=this.el;R.addEventListener("buttonchanged",this.onButtonChanged),R.addEventListener("buttondown",this.onButtonDown),R.addEventListener("buttonup",this.onButtonUp),R.addEventListener("touchstart",this.onButtonTouchStart),R.addEventListener("touchend",this.onButtonTouchEnd),R.addEventListener("axismove",this.onAxisMoved),R.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var R=this.el;R.removeEventListener("buttonchanged",this.onButtonChanged),R.removeEventListener("buttondown",this.onButtonDown),R.removeEventListener("buttonup",this.onButtonUp),R.removeEventListener("touchstart",this.onButtonTouchStart),R.removeEventListener("touchend",this.onButtonTouchEnd),R.removeEventListener("axismove",this.onAxisMoved),R.removeEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var R=this.data;v(this,C,{index:this.controllerIndex,hand:R.hand})},injectTrackedControls:function(){var R=this.el,P=this.data;R.setAttribute("tracked-controls",{idPrefix:C,hand:P.hand,controller:this.controllerIndex,orientationOffset:P.orientationOffset}),this.data.model&&this.el.setAttribute("gltf-model",g+this.data.hand+".glb")},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(R){var P=this.mapping[this.data.hand].buttons[R.detail.id],O;P&&(P==="trigger"&&(O=R.detail.state.value,console.log("analog value of trigger press: "+O)),this.el.emit(P+"changed",R.detail.state))},onModelLoaded:function(R){var P=R.detail.model;this.data.model&&(P.position.copy(b),P.rotation.copy(_),this.el.emit("controllermodelready",{name:"hp-mixed-reality-controls",model:this.data.model,rayOrigin:new p.Vector3(0,0,0)}))},onAxisMoved:function(R){y(this,this.mapping.axes,R)}})},"./src/components/index.js":(l,d,c)=>{c("./src/components/animation.js"),c("./src/components/camera.js"),c("./src/components/cursor.js"),c("./src/components/daydream-controls.js"),c("./src/components/gearvr-controls.js"),c("./src/components/geometry.js"),c("./src/components/generic-tracked-controller-controls.js"),c("./src/components/gltf-model.js"),c("./src/components/hand-tracking-controls.js"),c("./src/components/hand-controls.js"),c("./src/components/hide-on-enter-ar.js"),c("./src/components/hp-mixed-reality-controls.js"),c("./src/components/layer.js"),c("./src/components/laser-controls.js"),c("./src/components/light.js"),c("./src/components/line.js"),c("./src/components/link.js"),c("./src/components/look-controls.js"),c("./src/components/magicleap-controls.js"),c("./src/components/material.js"),c("./src/components/obj-model.js"),c("./src/components/oculus-go-controls.js"),c("./src/components/oculus-touch-controls.js"),c("./src/components/position.js"),c("./src/components/raycaster.js"),c("./src/components/rotation.js"),c("./src/components/scale.js"),c("./src/components/shadow.js"),c("./src/components/sound.js"),c("./src/components/text.js"),c("./src/components/tracked-controls.js"),c("./src/components/tracked-controls-webvr.js"),c("./src/components/tracked-controls-webxr.js"),c("./src/components/visible.js"),c("./src/components/valve-index-controls.js"),c("./src/components/vive-controls.js"),c("./src/components/vive-focus-controls.js"),c("./src/components/wasd-controls.js"),c("./src/components/windows-motion-controls.js"),c("./src/components/scene/ar-hit-test.js"),c("./src/components/scene/background.js"),c("./src/components/scene/debug.js"),c("./src/components/scene/device-orientation-permission-ui.js"),c("./src/components/scene/embedded.js"),c("./src/components/scene/inspector.js"),c("./src/components/scene/fog.js"),c("./src/components/scene/keyboard-shortcuts.js"),c("./src/components/scene/pool.js"),c("./src/components/scene/reflection.js"),c("./src/components/scene/screenshot.js"),c("./src/components/scene/stats.js"),c("./src/components/scene/vr-mode-ui.js")},"./src/components/laser-controls.js":(l,d,c)=>{var h=c("./src/core/component.js").registerComponent,m=c("./src/utils/index.js");h("laser-controls",{schema:{hand:{default:"right"},model:{default:!0},defaultModelColor:{type:"color",default:"grey"}},init:function(){var p=this.config,A=this.data,v=this.el,y=this,x={hand:A.hand,model:A.model};v.setAttribute("daydream-controls",x),v.setAttribute("gearvr-controls",x),v.setAttribute("hp-mixed-reality-controls",x),v.setAttribute("magicleap-controls",x),v.setAttribute("oculus-go-controls",x),v.setAttribute("oculus-touch-controls",x),v.setAttribute("valve-index-controls",x),v.setAttribute("vive-controls",x),v.setAttribute("vive-focus-controls",x),v.setAttribute("windows-motion-controls",x),v.setAttribute("generic-tracked-controller-controls",{hand:x.hand}),v.addEventListener("controllerconnected",C),v.addEventListener("controllerdisconnected",g),v.addEventListener("controllermodelready",function(b){C(b),y.modelReady=!0});function C(b){var _=p[b.detail.name];if(_){var S=m.extend({showLine:!0},_.raycaster||{});b.detail.rayOrigin&&(S.origin=b.detail.rayOrigin.origin,S.direction=b.detail.rayOrigin.direction,S.showLine=!0),b.detail.rayOrigin||!y.modelReady?v.setAttribute("raycaster",S):v.setAttribute("raycaster","showLine",!0),v.setAttribute("cursor",m.extend({fuse:!1},_.cursor))}}function g(){v.setAttribute("raycaster","showLine",!1)}},config:{"daydream-controls":{cursor:{downEvents:["trackpaddown","triggerdown"],upEvents:["trackpadup","triggerup"]}},"gearvr-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{origin:{x:0,y:.001,z:0}}},"generic-tracked-controller-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]}},"hp-mixed-reality-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{origin:{x:0,y:0,z:0}}},"magicleap-controls":{cursor:{downEvents:["trackpaddown","triggerdown"],upEvents:["trackpadup","triggerup"]}},"oculus-go-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{origin:{x:0,y:5e-4,z:0}}},"oculus-touch-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{origin:{x:0,y:0,z:0}}},"valve-index-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]}},"vive-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]}},"vive-focus-controls":{cursor:{downEvents:["trackpaddown","triggerdown"],upEvents:["trackpadup","triggerup"]}},"windows-motion-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{showLine:!1}}}})},"./src/components/layer.js":(l,d,c)=>{var h=c("./src/core/component.js").registerComponent,m=c("./src/utils/index.js"),p=m.debug("components:layer:warn");l.exports.Component=h("layer",{schema:{type:{default:"quad",oneOf:["quad","monocubemap","stereocubemap"]},src:{type:"map"},rotateCubemap:{default:!1},width:{default:0},height:{default:0}},init:function(){var v=this.el.sceneEl.renderer.getContext();this.quaternion=new THREE.Quaternion,this.position=new THREE.Vector3,this.bindMethods(),this.needsRedraw=!1,this.frameBuffer=v.createFramebuffer();var y=this.el.sceneEl.getAttribute("webxr").requiredFeatures;y.push("layers"),this.el.sceneEl.getAttribute("webxr","requiredFeatures",y),this.el.sceneEl.addEventListener("enter-vr",this.onEnterVR),this.el.sceneEl.addEventListener("exit-vr",this.onExitVR)},bindMethods:function(){this.onRequestedReferenceSpace=this.onRequestedReferenceSpace.bind(this),this.onEnterVR=this.onEnterVR.bind(this),this.onExitVR=this.onExitVR.bind(this)},update:function(v){this.data.src!==v.src&&this.updateSrc()},updateSrc:function(){var v=this.data.type;if(this.texture=void 0,v==="quad"){this.loadQuadImage();return}if(v==="monocubemap"||v==="stereocubemap"){this.loadCubeMapImages();return}},loadCubeMapImages:function(){var v,y=this.xrGLFactory,x=this.el.sceneEl.frame,C=this.data.src,g=this.data.type;this.visibilityChanged=!1,this.layer&&(g!=="monocubemap"&&g!=="stereocubemap"||(C.complete?this.pendingCubeMapUpdate=!1:this.pendingCubeMapUpdate=!0,this.loadingScreen?this.loadingScreen=!1:this.loadingScreen=!0,g==="monocubemap"?(v=y.getSubImage(this.layer,x),this.loadCubeMapImage(v.colorTexture,C,0)):(v=y.getSubImage(this.layer,x,"left"),this.loadCubeMapImage(v.colorTexture,C,0),v=y.getSubImage(this.layer,x,"right"),this.loadCubeMapImage(v.colorTexture,C,6))))},loadQuadImage:function(){var v=this.data.src,y=this;this.el.sceneEl.systems.material.loadTexture(v,{src:v},function(C){y.el.sceneEl.renderer.initTexture(C),y.texture=C,v.tagName==="VIDEO"&&setTimeout(function(){y.textureIsVideo=!0},1e3),y.layer&&(y.layer.height=y.data.height/2||y.texture.image.height/1e3,y.layer.width=y.data.width/2||y.texture.image.width/1e3,y.needsRedraw=!0),y.updateQuadPanel()})},preGenerateCubeMapTextures:function(v,y){this.data.type==="monocubemap"?this.generateCubeMapTextures(v,0,y):(this.generateCubeMapTextures(v,0,y),this.generateCubeMapTextures(v,6,y))},generateCubeMapTextures:function(v,y,x){for(var C=this.data,g=this.cubeFaceSize,b=Math.min(v.width,v.height),_=[],S,R,P=0;P<6;P++){var O=document.createElement("CANVAS");O.width=O.height=g;var D=O.getContext("2d");C.rotateCubemap&&(P===2||P===3)&&(D.save(),D.translate(g,g),D.rotate(Math.PI)),D.drawImage(v,(P+y)*b,0,b,b,0,0,g,g),D.restore(),x&&x(),_.push(O)}return C.rotateCubemap&&(S=_[0],R=_[1],_[0]=R,_[1]=S,S=_[4],R=_[5],_[4]=R,_[5]=S),x&&x(),_},loadCubeMapImage:function(v,y,x){var C=this.el.sceneEl.renderer.getContext(),g;C.pixelStorei(C.UNPACK_FLIP_Y_WEBGL,!1),C.bindTexture(C.TEXTURE_CUBE_MAP,v),!y.complete||this.loadingScreen?g=this.loadingScreenImages:g=this.generateCubeMapTextures(y,x);var b=0;g.forEach(function(_,S){C.texSubImage2D(C.TEXTURE_CUBE_MAP_POSITIVE_X+S,0,0,0,C.RGBA,C.UNSIGNED_BYTE,_),b=C.getError()}),b!==0&&console.log("renderingError, WebGL Error Code: "+b),C.bindTexture(C.TEXTURE_CUBE_MAP,null)},tick:function(){this.el.sceneEl.xrSession&&(!this.layer&&this.el.sceneEl.is("vr-mode")&&this.initLayer(),this.updateTransform(),this.data.src.complete&&(this.pendingCubeMapUpdate||this.loadingScreen||this.visibilityChanged)&&this.loadCubeMapImages(),!(!this.needsRedraw&&!this.layer.needsRedraw&&!this.textureIsVideo)&&(this.data.type==="quad"&&this.draw(),this.needsRedraw=!1))},initLayer:function(){var v=this,y=this.data.type;if(this.el.sceneEl.xrSession.onvisibilitychange=function(x){v.visibilityChanged=x.session.visibilityState!=="hidden"},y==="quad"){this.initQuadLayer();return}if(y==="monocubemap"||y==="stereocubemap"){this.initCubeMapLayer();return}},initQuadLayer:function(){var v=this.el.sceneEl,y=v.renderer.getContext(),x=this.xrGLFactory=new XRWebGLBinding(v.xrSession,y);this.texture&&(this.layer=x.createQuadLayer({space:this.referenceSpace,viewPixelHeight:2048,viewPixelWidth:2048,height:this.data.height/2||this.texture.image.height/1e3,width:this.data.width/2||this.texture.image.width/1e3}),this.initLoadingScreenImages(),v.renderer.xr.addLayer(this.layer))},initCubeMapLayer:function(){var v=this.data.src,y=this.el.sceneEl,x=y.renderer.getContext(),C=x.getParameter(x.MAX_CUBE_MAP_TEXTURE_SIZE),g=this.cubeFaceSize=Math.min(C,Math.min(v.width,v.height)),b=this.xrGLFactory=new XRWebGLBinding(y.xrSession,x);this.layer=b.createCubeLayer({space:this.referenceSpace,viewPixelWidth:g,viewPixelHeight:g,layout:this.data.type==="monocubemap"?"mono":"stereo",isStatic:!1}),this.initLoadingScreenImages(),this.loadCubeMapImages(),y.renderer.xr.addLayer(this.layer)},initLoadingScreenImages:function(){for(var v=this.cubeFaceSize,y=this.loadingScreenImages=[],x=0;x<6;x++){var C=document.createElement("CANVAS");C.width=C.height=v;var g=C.getContext("2d");C.width=C.height=v,g.fillStyle="black",g.fillRect(0,0,v,v),x!==2&&x!==3&&(g.translate(v,0),g.scale(-1,1),g.fillStyle="white",g.font="30px Arial",g.fillText("Loading",v/2,v/2)),y.push(C)}},destroyLayer:function(){this.layer&&(this.el.sceneEl.renderer.xr.removeLayer(this.layer),this.layer.destroy(),this.layer=void 0)},toggleCompositorLayer:function(){this.enableCompositorLayer(!this.layerEnabled)},enableCompositorLayer:function(v){this.layerEnabled=v,this.quadPanelEl.object3D.visible=!this.layerEnabled},updateQuadPanel:function(){var v=this.quadPanelEl;this.quadPanelEl||(v=this.quadPanelEl=document.createElement("a-entity"),this.el.appendChild(v)),v.setAttribute("material",{shader:"flat",src:this.data.src,transparent:!0}),v.setAttribute("geometry",{primitive:"plane",height:this.data.height||this.texture.image.height/1e3,width:this.data.width||this.texture.image.height/1e3})},draw:function(){var v=this.el.sceneEl,y=this.el.sceneEl.renderer.getContext(),x=this.xrGLFactory.getSubImage(this.layer,v.frame),C=v.renderer.properties.get(this.texture).__webglTexture,g=y.getParameter(y.FRAMEBUFFER_BINDING);y.viewport(x.viewport.x,x.viewport.y,x.viewport.width,x.viewport.height),y.bindFramebuffer(y.FRAMEBUFFER,this.frameBuffer),y.framebufferTexture2D(y.FRAMEBUFFER,y.COLOR_ATTACHMENT0,y.TEXTURE_2D,x.colorTexture,0),A(y,C,x,this.data.src),y.bindFramebuffer(y.FRAMEBUFFER,g)},updateTransform:function(){var v=this.el,y=this.position,x=this.quaternion;v.object3D.updateMatrixWorld(),y.setFromMatrixPosition(v.object3D.matrixWorld),x.setFromRotationMatrix(v.object3D.matrixWorld),this.layerEnabled||y.set(0,0,1e8),this.layer.transform=new XRRigidTransform(y,x)},onEnterVR:function(){var v=this.el.sceneEl,y=v.xrSession;if(!v.hasWebXR||!XRWebGLBinding||!y){p("The layer component requires WebXR and the layers API enabled");return}y.requestReferenceSpace("local-floor").then(this.onRequestedReferenceSpace),this.needsRedraw=!0,this.layerEnabled=!0,this.quadPanelEl&&(this.quadPanelEl.object3D.visible=!1),this.data.src.play&&this.data.src.play()},onExitVR:function(){this.quadPanelEl&&(this.quadPanelEl.object3D.visible=!0),this.destroyLayer()},onRequestedReferenceSpace:function(v){this.referenceSpace=v}});function A(v,y,x,C){var g=v.createFramebuffer();let b=x.viewport.x,_=x.viewport.y,S=x.viewport.x+x.viewport.width,R=x.viewport.y+x.viewport.height;C.tagName==="VIDEO"&&(v.bindTexture(v.TEXTURE_2D,y),v.texSubImage2D(v.TEXTURE_2D,0,0,0,C.width,C.height,v.RGB,v.UNSIGNED_BYTE,C)),v.bindFramebuffer(v.READ_FRAMEBUFFER,g),v.framebufferTexture2D(v.READ_FRAMEBUFFER,v.COLOR_ATTACHMENT0,v.TEXTURE_2D,y,0),v.readBuffer(v.COLOR_ATTACHMENT0),v.blitFramebuffer(0,0,C.width,C.height,b,_,S,R,v.COLOR_BUFFER_BIT,v.NEAREST),v.bindFramebuffer(v.READ_FRAMEBUFFER,null),v.deleteFramebuffer(g)}},"./src/components/light.js":(l,d,c)=>{var h=c("./src/utils/bind.js"),m=c("./src/utils/index.js"),p=m.diff,A=c("./src/utils/debug.js"),v=c("./src/core/component.js").registerComponent,y=c("./src/lib/three.js"),x=c("./src/utils/math.js"),C=y.MathUtils.degToRad,g=A("components:light:warn"),b=new y.CubeTextureLoader,_={};l.exports.Component=v("light",{schema:{angle:{default:60,if:{type:["spot"]}},color:{type:"color",if:{type:["ambient","directional","hemisphere","point","spot"]}},envMap:{default:"",if:{type:["probe"]}},groundColor:{type:"color",if:{type:["hemisphere"]}},decay:{default:1,if:{type:["point","spot"]}},distance:{default:0,min:0,if:{type:["point","spot"]}},intensity:{default:1,min:0,if:{type:["ambient","directional","hemisphere","point","spot","probe"]}},penumbra:{default:0,min:0,max:1,if:{type:["spot"]}},type:{default:"directional",oneOf:["ambient","directional","hemisphere","point","spot","probe"],schemaChange:!0},target:{type:"selector",if:{type:["spot","directional"]}},castShadow:{default:!1,if:{type:["point","spot","directional"]}},shadowBias:{default:0,if:{castShadow:!0}},shadowCameraFar:{default:500,if:{castShadow:!0}},shadowCameraFov:{default:90,if:{castShadow:!0}},shadowCameraNear:{default:.5,if:{castShadow:!0}},shadowCameraTop:{default:5,if:{castShadow:!0}},shadowCameraRight:{default:5,if:{castShadow:!0}},shadowCameraBottom:{default:-5,if:{castShadow:!0}},shadowCameraLeft:{default:-5,if:{castShadow:!0}},shadowCameraVisible:{default:!1,if:{castShadow:!0}},shadowCameraAutomatic:{default:"",if:{type:["directional"]}},shadowMapHeight:{default:512,if:{castShadow:!0}},shadowMapWidth:{default:512,if:{castShadow:!0}},shadowRadius:{default:1,if:{castShadow:!0}}},init:function(){var S=this.el;this.light=null,this.defaultTarget=null,this.rendererSystem=this.el.sceneEl.systems.renderer,this.system.registerLight(S)},update:function(S){var R=this.data,P=p(R,S),O=this.light,D=this.rendererSystem,L=this;if(O&&!("type"in P)){var N=!1;Object.keys(P).forEach(function(H){var J=R[H];switch(H){case"color":{O.color.set(J),D.applyColorCorrection(O.color);break}case"groundColor":{O.groundColor.set(J),D.applyColorCorrection(O.groundColor);break}case"angle":{O.angle=C(J);break}case"target":{J===null?(R.type==="spot"||R.type==="directional")&&(O.target=L.defaultTarget):J.hasLoaded?L.onSetTarget(J,O):J.addEventListener("loaded",h(L.onSetTarget,L,J,O));break}case"envMap":L.updateProbeMap(R,O);break;case"castShadow":case"shadowBias":case"shadowCameraFar":case"shadowCameraFov":case"shadowCameraNear":case"shadowCameraTop":case"shadowCameraRight":case"shadowCameraBottom":case"shadowCameraLeft":case"shadowCameraVisible":case"shadowMapHeight":case"shadowMapWidth":case"shadowRadius":N||(L.updateShadow(),N=!0);break;case"shadowCameraAutomatic":R.shadowCameraAutomatic?L.shadowCameraAutomaticEls=Array.from(document.querySelectorAll(R.shadowCameraAutomatic)):L.shadowCameraAutomaticEls=[];break;default:O[H]=J}});return}this.setLight(this.data),this.updateShadow()},tick:function(){var S=new y.Box3,R=new y.Vector3,P=new y.Vector3,O=new y.Matrix4,D=new y.Sphere,L=new y.Vector3;return function(){if(this.data.type==="directional"&&this.light.shadow&&this.light.shadow.camera instanceof y.OrthographicCamera&&this.shadowCameraAutomaticEls.length){var N=this.light.shadow.camera;N.getWorldDirection(R),N.getWorldPosition(P),O.copy(N.matrixWorld),O.invert(),N.near=1,N.left=1e5,N.right=-1e5,N.top=-1e5,N.bottom=1e5,this.shadowCameraAutomaticEls.forEach(function(H){S.setFromObject(H.object3D),S.getBoundingSphere(D);var J=x.distanceOfPointFromPlane(P,R,D.center),K=x.nearestPointInPlane(P,R,D.center,L),se=K.applyMatrix4(O);N.near=Math.min(-J-D.radius-1,N.near),N.left=Math.min(-D.radius+se.x,N.left),N.right=Math.max(D.radius+se.x,N.right),N.top=Math.max(D.radius+se.y,N.top),N.bottom=Math.min(-D.radius+se.y,N.bottom)}),N.updateProjectionMatrix()}}}(),setLight:function(S){var R=this.el,P=this.getLight(S);P&&(this.light&&R.removeObject3D("light"),this.light=P,this.light.el=R,R.setObject3D("light",this.light),(S.type==="spot"||S.type==="directional"||S.type==="hemisphere")&&R.getObject3D("light").translateY(-1),S.type==="spot"&&(R.setObject3D("light-target",this.defaultTarget),R.getObject3D("light-target").position.set(0,0,-1)),S.shadowCameraAutomatic?this.shadowCameraAutomaticEls=Array.from(document.querySelectorAll(S.shadowCameraAutomatic)):this.shadowCameraAutomaticEls=[])},updateShadow:function(){var S=this.el,R=this.data,P=this.light;P.castShadow=R.castShadow;var O=S.getObject3D("cameraHelper");if(R.shadowCameraVisible&&!O?S.setObject3D("cameraHelper",new y.CameraHelper(P.shadow.camera)):!R.shadowCameraVisible&&O&&S.removeObject3D("cameraHelper"),!R.castShadow)return P;P.shadow.bias=R.shadowBias,P.shadow.radius=R.shadowRadius,P.shadow.mapSize.height=R.shadowMapHeight,P.shadow.mapSize.width=R.shadowMapWidth,P.shadow.camera.near=R.shadowCameraNear,P.shadow.camera.far=R.shadowCameraFar,P.shadow.camera instanceof y.OrthographicCamera?(P.shadow.camera.top=R.shadowCameraTop,P.shadow.camera.right=R.shadowCameraRight,P.shadow.camera.bottom=R.shadowCameraBottom,P.shadow.camera.left=R.shadowCameraLeft):P.shadow.camera.fov=R.shadowCameraFov,P.shadow.camera.updateProjectionMatrix(),O&&O.update()},getLight:function(S){var R=S.angle,P=new y.Color(S.color);this.rendererSystem.applyColorCorrection(P),P=P.getHex();var O=S.decay,D=S.distance,L=new y.Color(S.groundColor);this.rendererSystem.applyColorCorrection(L),L=L.getHex();var N=S.intensity,H=S.type,J=S.target,K=null;switch(H.toLowerCase()){case"ambient":return new y.AmbientLight(P,N);case"directional":return K=new y.DirectionalLight(P,N),this.defaultTarget=K.target,J&&(J.hasLoaded?this.onSetTarget(J,K):J.addEventListener("loaded",h(this.onSetTarget,this,J,K))),K;case"hemisphere":return new y.HemisphereLight(P,L,N);case"point":return new y.PointLight(P,N,D,O);case"spot":return K=new y.SpotLight(P,N,D,C(R),S.penumbra,O),this.defaultTarget=K.target,J&&(J.hasLoaded?this.onSetTarget(J,K):J.addEventListener("loaded",h(this.onSetTarget,this,J,K))),K;case"probe":return K=new y.LightProbe,this.updateProbeMap(S,K),K;default:g("%s is not a valid light type. Choose from ambient, directional, hemisphere, point, spot.",H)}},updateProbeMap:function(S,R){S.envMap||R.copy(new y.LightProbe),_[S.envMap]instanceof window.Promise&&_[S.envMap].then(function(P){R.copy(P)}),_[S.envMap]instanceof y.LightProbe&&R.copy(_[S.envMap]),_[S.envMap]=new window.Promise(function(P){m.srcLoader.validateCubemapSrc(S.envMap,function(D){b.load(D,function(L){var N=y.LightProbeGenerator.fromCubeTexture(L);_[S.envMap]=N,R.copy(N)})})})},onSetTarget:function(S,R){R.target=S.object3D},remove:function(){var S=this.el;S.removeObject3D("light"),S.getObject3D("cameraHelper")&&S.removeObject3D("cameraHelper")}})},"./src/components/line.js":(l,d,c)=>{var h=c("./src/core/component.js").registerComponent;l.exports.Component=h("line",{schema:{start:{type:"vec3",default:{x:0,y:0,z:0}},end:{type:"vec3",default:{x:0,y:0,z:0}},color:{type:"color",default:"#74BEC1"},opacity:{type:"number",default:1},visible:{default:!0}},multiple:!0,init:function(){var p=this.data,A,v;this.rendererSystem=this.el.sceneEl.systems.renderer,v=this.material=new THREE.LineBasicMaterial({color:p.color,opacity:p.opacity,transparent:p.opacity<1,visible:p.visible}),A=this.geometry=new THREE.BufferGeometry,A.setAttribute("position",new THREE.BufferAttribute(new Float32Array(6),3)),this.rendererSystem.applyColorCorrection(v.color),this.line=new THREE.Line(A,v),this.el.setObject3D(this.attrName,this.line)},update:function(p){var A=this.data,v=this.geometry,y=!1,x=this.material,C=v.attributes.position.array;m(A.start,p.start)||(C[0]=A.start.x,C[1]=A.start.y,C[2]=A.start.z,y=!0),m(A.end,p.end)||(C[3]=A.end.x,C[4]=A.end.y,C[5]=A.end.z,y=!0),y&&(v.attributes.position.needsUpdate=!0,v.computeBoundingSphere()),x.color.setStyle(A.color),this.rendererSystem.applyColorCorrection(x.color),x.opacity=A.opacity,x.transparent=A.opacity<1,x.visible=A.visible},remove:function(){this.el.removeObject3D(this.attrName,this.line)}});function m(p,A){return!p||!A?!1:p.x===A.x&&p.y===A.y&&p.z===A.z}},"./src/components/link.js":(l,d,c)=>{var h=c("./src/core/component.js").registerComponent,m=c("./src/core/shader.js").registerShader,p=c("./src/lib/three.js");l.exports.Component=h("link",{schema:{backgroundColor:{default:"red",type:"color"},borderColor:{default:"white",type:"color"},highlighted:{default:!1},highlightedColor:{default:"#24CAFF",type:"color"},href:{default:""},image:{type:"asset"},on:{default:"click"},peekMode:{default:!1},title:{default:""},titleColor:{default:"white",type:"color"},visualAspectEnabled:{default:!1}},init:function(){this.navigate=this.navigate.bind(this),this.previousQuaternion=void 0,this.quaternionClone=new p.Quaternion,this.hiddenEls=[]},update:function(A){var v=this.data,y=this.el,x,C;v.visualAspectEnabled&&(this.initVisualAspect(),x=v.highlighted?v.highlightedColor:v.backgroundColor,C=v.highlighted?v.highlightedColor:v.borderColor,y.setAttribute("material","backgroundColor",x),y.setAttribute("material","strokeColor",C),v.on!==A.on&&this.updateEventListener(),A.peekMode!==void 0&&v.peekMode!==A.peekMode&&this.updatePeekMode(),!(!v.image||A.image===v.image)&&y.setAttribute("material","pano",typeof v.image=="string"?v.image:v.image.src))},updatePeekMode:function(){var A=this.el,v=this.sphereEl;this.data.peekMode?(this.hideAll(),A.getObject3D("mesh").visible=!1,v.setAttribute("visible",!0)):(this.showAll(),A.getObject3D("mesh").visible=!0,v.setAttribute("visible",!1))},play:function(){this.updateEventListener()},pause:function(){this.removeEventListener()},updateEventListener:function(){var A=this.el;A.isPlaying&&(this.removeEventListener(),A.addEventListener(this.data.on,this.navigate))},removeEventListener:function(){var A=this.data.on;A&&this.el.removeEventListener(A,this.navigate)},initVisualAspect:function(){var A=this.el,v,y,x;!this.data.visualAspectEnabled||this.visualAspectInitialized||(x=this.textEl=this.textEl||document.createElement("a-entity"),y=this.sphereEl=this.sphereEl||document.createElement("a-entity"),v=this.semiSphereEl=this.semiSphereEl||document.createElement("a-entity"),A.setAttribute("geometry",{primitive:"circle",radius:1,segments:64}),A.setAttribute("material",{shader:"portal",pano:this.data.image,side:"double"}),x.setAttribute("text",{color:this.data.titleColor,align:"center",font:"kelsonsans",value:this.data.title||this.data.href,width:4}),x.setAttribute("position","0 1.5 0"),A.appendChild(x),v.setAttribute("geometry",{primitive:"sphere",radius:1,phiStart:0,segmentsWidth:64,segmentsHeight:64,phiLength:180,thetaStart:0,thetaLength:360}),v.setAttribute("material",{shader:"portal",borderEnabled:0,pano:this.data.image,side:"back"}),v.setAttribute("rotation","0 180 0"),v.setAttribute("position","0 0 0"),v.setAttribute("visible",!1),A.appendChild(v),y.setAttribute("geometry",{primitive:"sphere",radius:10,segmentsWidth:64,segmentsHeight:64}),y.setAttribute("material",{shader:"portal",borderEnabled:0,pano:this.data.image,side:"back"}),y.setAttribute("visible",!1),A.appendChild(y),this.visualAspectInitialized=!0)},navigate:function(){window.location=this.data.href},tick:function(){var A=new p.Vector3,v=new p.Vector3,y=new p.Quaternion,x=new p.Vector3;return function(){var C=this.el,g=C.object3D,b=C.sceneEl.camera,_,S,R=this.textEl;if(this.data.visualAspectEnabled)if(g.updateMatrixWorld(),b.parent.updateMatrixWorld(),b.updateMatrixWorld(),g.matrix.decompose(v,y,x),v.setFromMatrixPosition(g.matrixWorld),A.setFromMatrixPosition(b.matrixWorld),S=v.distanceTo(A),S>20)this.previousQuaternion||(this.quaternionClone.copy(y),this.previousQuaternion=this.quaternionClone),g.lookAt(A);else{if(_=this.calculateCameraPortalOrientation(),S<.5){if(this.semiSphereEl.getAttribute("visible")===!0)return;R.setAttribute("text","width",1.5),_<=0?(R.setAttribute("position","0 0 0.75"),R.setAttribute("rotation","0 180 0"),this.semiSphereEl.setAttribute("rotation","0 0 0")):(R.setAttribute("position","0 0 -0.75"),R.setAttribute("rotation","0 0 0"),this.semiSphereEl.setAttribute("rotation","0 180 0")),C.getObject3D("mesh").visible=!1,this.semiSphereEl.setAttribute("visible",!0),this.peekCameraPortalOrientation=_}else _<=0?R.setAttribute("rotation","0 180 0"):R.setAttribute("rotation","0 0 0"),R.setAttribute("text","width",5),R.setAttribute("position","0 1.5 0"),C.getObject3D("mesh").visible=!0,this.semiSphereEl.setAttribute("visible",!1),this.peekCameraPortalOrientation=void 0;this.previousQuaternion&&(g.quaternion.copy(this.previousQuaternion),this.previousQuaternion=void 0)}}}(),hideAll:function(){var A=this.el,v=this.hiddenEls,y=this;v.length>0||A.sceneEl.object3D.traverse(function(x){x&&x.el&&x.el.hasAttribute("link-controls")||!x.el||x===A.sceneEl.object3D||x.el===A||x.el===y.sphereEl||x.el===A.sceneEl.cameraEl||x.el.getAttribute("visible")===!1||x.el===y.textEl||x.el===y.semiSphereEl||(x.el.setAttribute("visible",!1),v.push(x.el))})},showAll:function(){this.hiddenEls.forEach(function(A){A.setAttribute("visible",!0)}),this.hiddenEls=[]},calculateCameraPortalOrientation:function(){var A=new p.Matrix4,v=new p.Vector3,y=new p.Vector3(0,0,1),x=new p.Vector3(0,0,0);return function(){var C=this.el,g=C.sceneEl.camera;return v.set(0,0,0),y.set(0,0,1),x.set(0,0,0),C.object3D.matrixWorld.extractRotation(A),y.applyMatrix4(A),C.object3D.updateMatrixWorld(),C.object3D.localToWorld(x),g.parent.parent.updateMatrixWorld(),g.parent.updateMatrixWorld(),g.updateMatrixWorld(),g.localToWorld(v),v.sub(x).normalize(),y.normalize(),Math.sign(y.dot(v))}}(),remove:function(){this.removeEventListener()}}),m("portal",{schema:{borderEnabled:{default:1,type:"int",is:"uniform"},backgroundColor:{default:"red",type:"color",is:"uniform"},pano:{type:"map",is:"uniform"},strokeColor:{default:"white",type:"color",is:"uniform"}},vertexShader:["vec3 portalPosition;","varying vec3 vWorldPosition;","varying float vDistanceToCenter;","varying float vDistance;","void main() {","vDistanceToCenter = clamp(length(position - vec3(0.0, 0.0, 0.0)), 0.0, 1.0);","portalPosition = (modelMatrix * vec4(0.0, 0.0, 0.0, 1.0)).xyz;","vDistance = length(portalPosition - cameraPosition);","vWorldPosition = (modelMatrix * vec4(position, 1.0)).xyz;","gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","}"].join(`
`),fragmentShader:["#define RECIPROCAL_PI2 0.15915494","uniform sampler2D pano;","uniform vec3 strokeColor;","uniform vec3 backgroundColor;","uniform float borderEnabled;","varying float vDistanceToCenter;","varying float vDistance;","varying vec3 vWorldPosition;","void main() {","vec3 direction = normalize(vWorldPosition - cameraPosition);","vec2 sampleUV;","float borderThickness = clamp(exp(-vDistance / 50.0), 0.6, 0.95);","sampleUV.y = clamp(direction.y * 0.5  + 0.5, 0.0, 1.0);","sampleUV.x = atan(direction.z, -direction.x) * -RECIPROCAL_PI2 + 0.5;","if (vDistanceToCenter > borderThickness && borderEnabled == 1.0) {","gl_FragColor = vec4(strokeColor, 1.0);","} else {","gl_FragColor = mix(texture2D(pano, sampleUV), vec4(backgroundColor, 1.0), clamp(pow((vDistance / 15.0), 2.0), 0.0, 1.0));","}","}"].join(`
`)})},"./src/components/look-controls.js":(l,d,c)=>{var h=c("./src/core/component.js").registerComponent,m=c("./src/lib/three.js"),p=c("./src/utils/index.js"),A=p.bind,v=Math.PI/2;l.exports.Component=h("look-controls",{dependencies:["position","rotation"],schema:{enabled:{default:!0},magicWindowTrackingEnabled:{default:!0},pointerLockEnabled:{default:!1},reverseMouseDrag:{default:!1},reverseTouchDrag:{default:!1},touchEnabled:{default:!0},mouseEnabled:{default:!0}},init:function(){this.deltaYaw=0,this.previousHMDPosition=new m.Vector3,this.hmdQuaternion=new m.Quaternion,this.magicWindowAbsoluteEuler=new m.Euler,this.magicWindowDeltaEuler=new m.Euler,this.position=new m.Vector3,this.magicWindowObject=new m.Object3D,this.rotation={},this.deltaRotation={},this.savedPose=null,this.pointerLocked=!1,this.setupMouseControls(),this.bindMethods(),this.previousMouseEvent={},this.setupMagicWindowControls(),this.savedPose={position:new m.Vector3,rotation:new m.Euler},(this.el.sceneEl.is("vr-mode")||this.el.sceneEl.is("ar-mode"))&&this.onEnterVR()},setupMagicWindowControls:function(){var y,x=this.data;(p.device.isMobile()||p.device.isMobileDeviceRequestingDesktopSite())&&(y=this.magicWindowControls=new m.DeviceOrientationControls(this.magicWindowObject),typeof DeviceOrientationEvent<"u"&&DeviceOrientationEvent.requestPermission&&(y.enabled=!1,this.el.sceneEl.components["device-orientation-permission-ui"].permissionGranted?y.enabled=x.magicWindowTrackingEnabled:this.el.sceneEl.addEventListener("deviceorientationpermissiongranted",function(){y.enabled=x.magicWindowTrackingEnabled})))},update:function(y){var x=this.data;x.enabled!==y.enabled&&this.updateGrabCursor(x.enabled),y&&!x.magicWindowTrackingEnabled&&y.magicWindowTrackingEnabled&&(this.magicWindowAbsoluteEuler.set(0,0,0),this.magicWindowDeltaEuler.set(0,0,0)),this.magicWindowControls&&(this.magicWindowControls.enabled=x.magicWindowTrackingEnabled),y&&!x.pointerLockEnabled!==y.pointerLockEnabled&&(this.removeEventListeners(),this.addEventListeners(),this.pointerLocked&&this.exitPointerLock())},tick:function(y){var x=this.data;x.enabled&&this.updateOrientation()},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners(),this.pointerLocked&&this.exitPointerLock()},remove:function(){this.removeEventListeners(),this.pointerLocked&&this.exitPointerLock()},bindMethods:function(){this.onMouseDown=A(this.onMouseDown,this),this.onMouseMove=A(this.onMouseMove,this),this.onMouseUp=A(this.onMouseUp,this),this.onTouchStart=A(this.onTouchStart,this),this.onTouchMove=A(this.onTouchMove,this),this.onTouchEnd=A(this.onTouchEnd,this),this.onEnterVR=A(this.onEnterVR,this),this.onExitVR=A(this.onExitVR,this),this.onPointerLockChange=A(this.onPointerLockChange,this),this.onPointerLockError=A(this.onPointerLockError,this)},setupMouseControls:function(){this.mouseDown=!1,this.pitchObject=new m.Object3D,this.yawObject=new m.Object3D,this.yawObject.position.y=10,this.yawObject.add(this.pitchObject)},addEventListeners:function(){var y=this.el.sceneEl,x=y.canvas;if(!x){y.addEventListener("render-target-loaded",A(this.addEventListeners,this));return}x.addEventListener("mousedown",this.onMouseDown,!1),window.addEventListener("mousemove",this.onMouseMove,!1),window.addEventListener("mouseup",this.onMouseUp,!1),x.addEventListener("touchstart",this.onTouchStart),window.addEventListener("touchmove",this.onTouchMove),window.addEventListener("touchend",this.onTouchEnd),y.addEventListener("enter-vr",this.onEnterVR),y.addEventListener("exit-vr",this.onExitVR),this.data.pointerLockEnabled&&(document.addEventListener("pointerlockchange",this.onPointerLockChange,!1),document.addEventListener("mozpointerlockchange",this.onPointerLockChange,!1),document.addEventListener("pointerlockerror",this.onPointerLockError,!1))},removeEventListeners:function(){var y=this.el.sceneEl,x=y&&y.canvas;x&&(x.removeEventListener("mousedown",this.onMouseDown),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.onMouseUp),x.removeEventListener("touchstart",this.onTouchStart),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd),y.removeEventListener("enter-vr",this.onEnterVR),y.removeEventListener("exit-vr",this.onExitVR),document.removeEventListener("pointerlockchange",this.onPointerLockChange,!1),document.removeEventListener("mozpointerlockchange",this.onPointerLockChange,!1),document.removeEventListener("pointerlockerror",this.onPointerLockError,!1))},updateOrientation:function(){var y=this.el.object3D,x=this.pitchObject,C=this.yawObject,g=this.el.sceneEl;(g.is("vr-mode")||g.is("ar-mode"))&&g.checkHeadsetConnected()||(this.updateMagicWindowOrientation(),y.rotation.x=this.magicWindowDeltaEuler.x+x.rotation.x,y.rotation.y=this.magicWindowDeltaEuler.y+C.rotation.y,y.rotation.z=this.magicWindowDeltaEuler.z)},updateMagicWindowOrientation:function(){var y=this.magicWindowAbsoluteEuler,x=this.magicWindowDeltaEuler;this.magicWindowControls&&this.magicWindowControls.enabled&&(this.magicWindowControls.update(),y.setFromQuaternion(this.magicWindowObject.quaternion,"YXZ"),!this.previousMagicWindowYaw&&y.y!==0&&(this.previousMagicWindowYaw=y.y),this.previousMagicWindowYaw&&(x.x=y.x,x.y+=y.y-this.previousMagicWindowYaw,x.z=y.z,this.previousMagicWindowYaw=y.y))},onMouseMove:function(y){var x,C,g,b=this.pitchObject,_=this.previousMouseEvent,S=this.yawObject;!this.data.enabled||!this.mouseDown&&!this.pointerLocked||(this.pointerLocked?(C=y.movementX||y.mozMovementX||0,g=y.movementY||y.mozMovementY||0):(C=y.screenX-_.screenX,g=y.screenY-_.screenY),this.previousMouseEvent.screenX=y.screenX,this.previousMouseEvent.screenY=y.screenY,x=this.data.reverseMouseDrag?1:-1,S.rotation.y+=C*.002*x,b.rotation.x+=g*.002*x,b.rotation.x=Math.max(-v,Math.min(v,b.rotation.x)))},onMouseDown:function(y){var x=this.el.sceneEl;if(!(!this.data.enabled||!this.data.mouseEnabled||(x.is("vr-mode")||x.is("ar-mode"))&&x.checkHeadsetConnected())&&y.button===0){var C=x&&x.canvas;this.mouseDown=!0,this.previousMouseEvent.screenX=y.screenX,this.previousMouseEvent.screenY=y.screenY,this.showGrabbingCursor(),this.data.pointerLockEnabled&&!this.pointerLocked&&(C.requestPointerLock?C.requestPointerLock():C.mozRequestPointerLock&&C.mozRequestPointerLock())}},showGrabbingCursor:function(){this.el.sceneEl.canvas.style.cursor="grabbing"},hideGrabbingCursor:function(){this.el.sceneEl.canvas.style.cursor=""},onMouseUp:function(){this.mouseDown=!1,this.hideGrabbingCursor()},onTouchStart:function(y){y.touches.length!==1||!this.data.touchEnabled||this.el.sceneEl.is("vr-mode")||this.el.sceneEl.is("ar-mode")||(this.touchStart={x:y.touches[0].pageX,y:y.touches[0].pageY},this.touchStarted=!0)},onTouchMove:function(y){var x,C=this.el.sceneEl.canvas,g,b=this.yawObject;!this.touchStarted||!this.data.touchEnabled||(g=2*Math.PI*(y.touches[0].pageX-this.touchStart.x)/C.clientWidth,x=this.data.reverseTouchDrag?1:-1,b.rotation.y-=g*.5*x,this.touchStart={x:y.touches[0].pageX,y:y.touches[0].pageY})},onTouchEnd:function(){this.touchStarted=!1},onEnterVR:function(){var y=this.el.sceneEl;y.checkHeadsetConnected()&&(this.saveCameraPose(),this.el.object3D.position.set(0,0,0),this.el.object3D.rotation.set(0,0,0),y.hasWebXR&&(this.el.object3D.matrixAutoUpdate=!1,this.el.object3D.updateMatrix()))},onExitVR:function(){this.el.sceneEl.checkHeadsetConnected()&&(this.restoreCameraPose(),this.previousHMDPosition.set(0,0,0),this.el.object3D.matrixAutoUpdate=!0)},onPointerLockChange:function(){this.pointerLocked=!!(document.pointerLockElement||document.mozPointerLockElement)},onPointerLockError:function(){this.pointerLocked=!1},exitPointerLock:function(){document.exitPointerLock(),this.pointerLocked=!1},updateGrabCursor:function(y){var x=this.el.sceneEl;function C(){x.canvas.classList.add("a-grab-cursor")}function g(){x.canvas.classList.remove("a-grab-cursor")}if(!x.canvas){y?x.addEventListener("render-target-loaded",C):x.addEventListener("render-target-loaded",g);return}if(y){C();return}g()},saveCameraPose:function(){var y=this.el;this.savedPose.position.copy(y.object3D.position),this.savedPose.rotation.copy(y.object3D.rotation),this.hasSavedPose=!0},restoreCameraPose:function(){var y=this.el,x=this.savedPose;this.hasSavedPose&&(y.object3D.position.copy(x.position),y.object3D.rotation.copy(x.rotation),this.hasSavedPose=!1)}})},"./src/components/magicleap-controls.js":(l,d,c)=>{var h=c("./src/utils/bind.js"),m=c("./src/core/component.js").registerComponent,p=c("./src/utils/tracked-controls.js"),A=p.checkControllerPresentAndSetup,v=p.emitIfAxesChanged,y=p.onButtonEvent,x="magicleap",C="-one",g=x+C,b="https://cdn.aframe.io/controllers/magicleap/magicleap-one-controller.glb",_={axes:{touchpad:[0,1]},buttons:["trigger","grip","touchpad","menu"]};l.exports.Component=m("magicleap-controls",{schema:{hand:{default:"none"},model:{default:!0},orientationOffset:{type:"vec3"}},mapping:_,init:function(){var S=this;this.controllerPresent=!1,this.lastControllerCheck=0,this.onButtonChanged=h(this.onButtonChanged,this),this.onButtonDown=function(R){y(R.detail.id,"down",S)},this.onButtonUp=function(R){y(R.detail.id,"up",S)},this.onButtonTouchEnd=function(R){y(R.detail.id,"touchend",S)},this.onButtonTouchStart=function(R){y(R.detail.id,"touchstart",S)},this.previousButtonValues={},this.rendererSystem=this.el.sceneEl.systems.renderer,this.bindMethods()},update:function(){var S=this.data;this.controllerIndex=S.hand==="right"?0:S.hand==="left"?1:2},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=h(this.onModelLoaded,this),this.onControllersUpdate=h(this.onControllersUpdate,this),this.checkIfControllerPresent=h(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=h(this.removeControllersUpdateListener,this),this.onAxisMoved=h(this.onAxisMoved,this)},addEventListeners:function(){var S=this.el;S.addEventListener("buttonchanged",this.onButtonChanged),S.addEventListener("buttondown",this.onButtonDown),S.addEventListener("buttonup",this.onButtonUp),S.addEventListener("touchstart",this.onButtonTouchStart),S.addEventListener("touchend",this.onButtonTouchEnd),S.addEventListener("axismove",this.onAxisMoved),S.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var S=this.el;S.removeEventListener("buttonchanged",this.onButtonChanged),S.removeEventListener("buttondown",this.onButtonDown),S.removeEventListener("buttonup",this.onButtonUp),S.removeEventListener("touchstart",this.onButtonTouchStart),S.removeEventListener("touchend",this.onButtonTouchEnd),S.removeEventListener("axismove",this.onAxisMoved),S.removeEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var S=this.data;A(this,g,{index:this.controllerIndex,hand:S.hand})},injectTrackedControls:function(){var S=this.el,R=this.data;S.setAttribute("tracked-controls",{idPrefix:g,hand:R.hand,controller:this.controllerIndex,orientationOffset:R.orientationOffset}),this.data.model&&this.el.setAttribute("gltf-model",b)},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(S){var R=this.mapping.buttons[S.detail.id],P;R&&(R==="trigger"&&(P=S.detail.state.value,console.log("analog value of trigger press: "+P)),this.el.emit(R+"changed",S.detail.state))},onModelLoaded:function(S){var R=S.detail.model;R.scale.set(.01,.01,.01)},onAxisMoved:function(S){v(this,this.mapping.axes,S)},updateModel:function(S,R){},setButtonColor:function(S,R){}})},"./src/components/material.js":(l,d,c)=>{var h=c("./src/utils/index.js"),m=c("./src/core/component.js"),p=c("./src/lib/three.js"),A=c("./src/core/shader.js"),v=h.debug("components:material:error"),y=m.registerComponent,x=A.shaders,C=A.shaderNames;l.exports.Component=y("material",{schema:{alphaTest:{default:0,min:0,max:1},depthTest:{default:!0},depthWrite:{default:!0},flatShading:{default:!1},npot:{default:!1},offset:{type:"vec2",default:{x:0,y:0}},opacity:{default:1,min:0,max:1},repeat:{type:"vec2",default:{x:1,y:1}},shader:{default:"standard",oneOf:C,schemaChange:!0},side:{default:"front",oneOf:["front","back","double"]},transparent:{default:!1},vertexColors:{type:"string",default:"none",oneOf:["face","vertex"]},visible:{default:!0},blending:{default:"normal",oneOf:["none","normal","additive","subtractive","multiply"]},dithering:{default:!0}},init:function(){this.material=null},update:function(R){var P=this.data;(!this.shader||P.shader!==R.shader)&&this.updateShader(P.shader),this.shader.update(this.data),this.updateMaterial(R)},updateSchema:function(R){var P,O,D,L;O=R&&R.shader,P=this.oldData&&this.oldData.shader,L=O||P,D=x[L]&&x[L].schema,D||v("Unknown shader schema "+L),!(P&&O===P)&&(this.extendSchema(D),this.updateBehavior())},updateBehavior:function(){var R,P=this.el.sceneEl,O=this.schema,D=this,L;function N(H,J){var K;for(K in L)L[K]=H;D.shader.update(L)}this.tick=void 0,L={};for(R in O)O[R].type==="time"&&(this.tick=N,L[R]=!0);P&&(this.tick?P.addBehavior(this):P.removeBehavior(this))},updateShader:function(R){var P=this.data,O=x[R]&&x[R].Shader,D;if(!O)throw new Error("Unknown shader "+R);D=this.shader=new O,D.el=this.el,D.init(P),this.setMaterial(D.material),this.updateSchema(P)},updateMaterial:function(R){var P=this.data,O=this.material,D;O.alphaTest=P.alphaTest,O.depthTest=P.depthTest!==!1,O.depthWrite=P.depthWrite!==!1,O.opacity=P.opacity,O.flatShading=P.flatShading,O.side=g(P.side),O.transparent=P.transparent!==!1||P.opacity<1,O.vertexColors=b(P.vertexColors),O.visible=P.visible,O.blending=_(P.blending),O.dithering=P.dithering;for(D in R)break;D&&(R.alphaTest!==P.alphaTest||R.side!==P.side||R.vertexColors!==P.vertexColors)&&(O.needsUpdate=!0)},remove:function(){var R=new p.MeshBasicMaterial,P=this.material,O=this.el.getObject3D("mesh");O&&(O.material=R),S(P,this.system)},setMaterial:function(R){var P=this.el,O,D=this.system;this.material&&S(this.material,D),this.material=R,D.registerMaterial(R),O=P.getObject3D("mesh"),O?O.material=R:P.addEventListener("object3dset",function L(N){N.detail.type!=="mesh"||N.target!==P||(P.getObject3D("mesh").material=R,P.removeEventListener("object3dset",L))})}});function g(R){switch(R){case"back":return p.BackSide;case"double":return p.DoubleSide;default:return p.FrontSide}}function b(R){switch(R){case"face":return p.FaceColors;case"vertex":return p.VertexColors;default:return p.NoColors}}function _(R){switch(R){case"none":return p.NoBlending;case"additive":return p.AdditiveBlending;case"subtractive":return p.SubtractiveBlending;case"multiply":return p.MultiplyBlending;default:return p.NormalBlending}}function S(R,P){R.dispose(),P.unregisterMaterial(R)}},"./src/components/obj-model.js":(l,d,c)=>{var h=c("./src/utils/debug.js"),m=c("./src/core/component.js").registerComponent,p=c("./src/lib/three.js"),A=h("components:obj-model:warn");l.exports.Component=m("obj-model",{schema:{mtl:{type:"model"},obj:{type:"model"}},init:function(){var v=this;this.model=null,this.objLoader=new p.OBJLoader,this.mtlLoader=new p.MTLLoader(this.objLoader.manager),this.mtlLoader.crossOrigin="",this.el.addEventListener("componentinitialized",function(y){v.model&&y.detail.name==="material"&&v.applyMaterial()})},update:function(){var v=this.data;v.obj&&(this.resetMesh(),this.loadObj(v.obj,v.mtl))},remove:function(){this.model&&this.resetMesh()},resetMesh:function(){this.el.removeObject3D("mesh")},loadObj:function(v,y){var x=this,C=this.el,g=this.mtlLoader,b=this.objLoader,_=this.el.sceneEl.systems.renderer,S=y.substr(0,y.lastIndexOf("/")+1);if(y){C.hasAttribute("material")&&A("Material component properties are ignored when a .MTL is provided"),g.setResourcePath(S),g.load(y,function(R){R.preload(),b.setMaterials(R),b.load(v,function(P){x.model=P,x.model.traverse(function(O){if(O.isMesh){var D=O.material;D.color&&_.applyColorCorrection(D.color),D.map&&_.applyColorCorrection(D.map),D.emissive&&_.applyColorCorrection(D.emissive),D.emissiveMap&&_.applyColorCorrection(D.emissiveMap)}}),C.setObject3D("mesh",P),C.emit("model-loaded",{format:"obj",model:P})})});return}b.load(v,function(P){x.model=P,x.applyMaterial(),C.setObject3D("mesh",P),C.emit("model-loaded",{format:"obj",model:P})})},applyMaterial:function(){var v=this.el.components.material;v&&this.model.traverse(function(y){y instanceof p.Mesh&&(y.material=v.material)})}})},"./src/components/oculus-go-controls.js":(l,d,c)=>{var h=c("./src/core/component.js").registerComponent,m=c("./src/utils/bind.js"),p=c("./src/utils/tracked-controls.js"),A=p.checkControllerPresentAndSetup,v=p.emitIfAxesChanged,y=p.onButtonEvent,x=c("./src/utils/index.js").device.isWebXRAvailable,C="oculus-go",g="Oculus Go",b="https://cdn.aframe.io/controllers/oculus/go/oculus-go-controller.gltf",_=x?C:g,S={axes:{trackpad:[0,1]},buttons:["trackpad","trigger"]},R={axes:{touchpad:[0,1]},buttons:["trigger","none","touchpad"]},P=x?R:S;l.exports.Component=h("oculus-go-controls",{schema:{hand:{default:""},buttonColor:{type:"color",default:"#FFFFFF"},buttonTouchedColor:{type:"color",default:"#BBBBBB"},buttonHighlightColor:{type:"color",default:"#7A7A7A"},model:{default:!0},orientationOffset:{type:"vec3"},armModel:{default:!0}},mapping:P,bindMethods:function(){this.onModelLoaded=m(this.onModelLoaded,this),this.onControllersUpdate=m(this.onControllersUpdate,this),this.checkIfControllerPresent=m(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=m(this.removeControllersUpdateListener,this),this.onAxisMoved=m(this.onAxisMoved,this)},init:function(){var O=this;this.onButtonChanged=m(this.onButtonChanged,this),this.onButtonDown=function(D){y(D.detail.id,"down",O)},this.onButtonUp=function(D){y(D.detail.id,"up",O)},this.onButtonTouchStart=function(D){y(D.detail.id,"touchstart",O)},this.onButtonTouchEnd=function(D){y(D.detail.id,"touchend",O)},this.controllerPresent=!1,this.lastControllerCheck=0,this.rendererSystem=this.el.sceneEl.systems.renderer,this.bindMethods()},addEventListeners:function(){var O=this.el;O.addEventListener("buttonchanged",this.onButtonChanged),O.addEventListener("buttondown",this.onButtonDown),O.addEventListener("buttonup",this.onButtonUp),O.addEventListener("touchstart",this.onButtonTouchStart),O.addEventListener("touchend",this.onButtonTouchEnd),O.addEventListener("model-loaded",this.onModelLoaded),O.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var O=this.el;O.removeEventListener("buttonchanged",this.onButtonChanged),O.removeEventListener("buttondown",this.onButtonDown),O.removeEventListener("buttonup",this.onButtonUp),O.removeEventListener("touchstart",this.onButtonTouchStart),O.removeEventListener("touchend",this.onButtonTouchEnd),O.removeEventListener("model-loaded",this.onModelLoaded),O.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){A(this,_,this.data.hand?{hand:this.data.hand}:{})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var O=this.el,D=this.data;O.setAttribute("tracked-controls",{armModel:D.armModel,hand:D.hand,idPrefix:_,orientationOffset:D.orientationOffset}),this.data.model&&this.el.setAttribute("gltf-model",b)},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelLoaded:function(O){var D=O.detail.model,L;this.data.model&&(L=this.buttonMeshes={},L.trigger=D.getObjectByName("oculus_go_button_trigger"),L.trackpad=D.getObjectByName("oculus_go_touchpad"),L.touchpad=D.getObjectByName("oculus_go_touchpad"))},onButtonChanged:function(O){var D=this.mapping.buttons[O.detail.id];D&&this.el.emit(D+"changed",O.detail.state)},onAxisMoved:function(O){v(this,this.mapping.axes,O)},updateModel:function(O,D){this.data.model&&this.updateButtonModel(O,D)},updateButtonModel:function(O,D){var L=this.buttonMeshes;if(!(!L||!L[O])){var N,H;switch(D){case"down":N=this.data.buttonHighlightColor;break;case"touchstart":N=this.data.buttonTouchedColor;break;default:N=this.data.buttonColor}H=L[O],H.material.color.set(N),this.rendererSystem.applyColorCorrection(H.material.color)}}})},"./src/components/oculus-touch-controls.js":(l,d,c)=>{var h=c("./src/utils/bind.js"),m=c("./src/core/component.js").registerComponent,p=c("./src/lib/three.js"),A=c("./src/utils/tracked-controls.js"),v=A.checkControllerPresentAndSetup,y=A.emitIfAxesChanged,x=A.onButtonEvent,C=c("./src/utils/index.js").device.isWebXRAvailable,g="oculus-touch",b="Oculus Touch",_=C?g:b,S="https://cdn.aframe.io/controllers/oculus/oculus-touch-controller-",R="https://cdn.aframe.io/controllers/meta/",P={left:{modelUrl:S+"left.gltf",rayOrigin:{origin:{x:.008,y:-.01,z:0},direction:{x:0,y:-.8,z:-1}},modelPivotOffset:new p.Vector3(-.005,.003,-.055),modelPivotRotation:new p.Euler(0,0,0)},right:{modelUrl:S+"right.gltf",rayOrigin:{origin:{x:-.008,y:-.01,z:0},direction:{x:0,y:-.8,z:-1}},modelPivotOffset:new p.Vector3(.005,.003,-.055),modelPivotRotation:new p.Euler(0,0,0)}},O={left:{modelUrl:S+"left.gltf",rayOrigin:{origin:{x:.002,y:-.005,z:-.03},direction:{x:0,y:-.8,z:-1}},modelPivotOffset:new p.Vector3(-.005,.036,-.037),modelPivotRotation:new p.Euler(Math.PI/4.5,0,0)},right:{modelUrl:S+"right.gltf",rayOrigin:{origin:{x:-.002,y:-.005,z:-.03},direction:{x:0,y:-.8,z:-1}},modelPivotOffset:new p.Vector3(.005,.036,-.037),modelPivotRotation:new p.Euler(Math.PI/4.5,0,0)}},D=C?O:P,L="oculus-touch",N={"oculus-touch":D,"oculus-touch-v2":{left:{modelUrl:S+"gen2-left.gltf",rayOrigin:{origin:{x:-.006,y:-.03,z:-.04},direction:{x:0,y:-.9,z:-1}},modelPivotOffset:new p.Vector3(0,-.007,-.021),modelPivotRotation:new p.Euler(-Math.PI/4,0,0)},right:{modelUrl:S+"gen2-right.gltf",rayOrigin:{origin:{x:.006,y:-.03,z:-.04},direction:{x:0,y:-.9,z:-1}},modelPivotOffset:new p.Vector3(0,-.007,-.021),modelPivotRotation:new p.Euler(-Math.PI/4,0,0)}},"oculus-touch-v3":{left:{modelUrl:S+"v3-left.glb",rayOrigin:{origin:{x:.0065,y:-.0186,z:-.05},direction:{x:.12394785839500175,y:-.5944043672340157,z:-.7945567170519814}},modelPivotOffset:new p.Vector3(0,0,0),modelPivotRotation:new p.Euler(0,0,0)},right:{modelUrl:S+"v3-right.glb",rayOrigin:{origin:{x:-.0065,y:-.0186,z:-.05},direction:{x:-.12394785839500175,y:-.5944043672340157,z:-.7945567170519814}},modelPivotOffset:new p.Vector3(0,0,0),modelPivotRotation:new p.Euler(0,0,0)}},"meta-quest-touch-pro":{left:{modelUrl:R+"quest-touch-pro-left.glb",rayOrigin:{origin:{x:.0065,y:-.0186,z:-.05},direction:{x:.12394785839500175,y:-.5944043672340157,z:-.7945567170519814}},modelPivotOffset:new p.Vector3(0,0,0),modelPivotRotation:new p.Euler(0,0,0)},right:{modelUrl:R+"quest-touch-pro-right.glb",rayOrigin:{origin:{x:-.0065,y:-.0186,z:-.05},direction:{x:-.12394785839500175,y:-.5944043672340157,z:-.7945567170519814}},modelPivotOffset:new p.Vector3(0,0,0),modelPivotRotation:new p.Euler(0,0,0)}}},H={left:{axes:{thumbstick:[0,1]},buttons:["thumbstick","trigger","grip","xbutton","ybutton","surface"]},right:{axes:{thumbstick:[0,1]},buttons:["thumbstick","trigger","grip","abutton","bbutton","surface"]}},J={left:{axes:{thumbstick:[2,3]},buttons:["trigger","grip","none","thumbstick","xbutton","ybutton","surface"]},right:{axes:{thumbstick:[2,3]},buttons:["trigger","grip","none","thumbstick","abutton","bbutton","surface"]}},K=C?J:H;l.exports.Component=m("oculus-touch-controls",{schema:{hand:{default:"left"},buttonColor:{type:"color",default:"#999"},buttonTouchColor:{type:"color",default:"#8AB"},buttonHighlightColor:{type:"color",default:"#2DF"},model:{default:!0},controllerType:{default:"auto",oneOf:["auto","oculus-touch","oculus-touch-v2","oculus-touch-v3"]},orientationOffset:{type:"vec3",default:{x:43,y:0,z:0}}},mapping:K,bindMethods:function(){this.onButtonChanged=h(this.onButtonChanged,this),this.onThumbstickMoved=h(this.onThumbstickMoved,this),this.onModelLoaded=h(this.onModelLoaded,this),this.onControllersUpdate=h(this.onControllersUpdate,this),this.checkIfControllerPresent=h(this.checkIfControllerPresent,this),this.onAxisMoved=h(this.onAxisMoved,this)},init:function(){var ae=this;this.onButtonDown=function(ee){x(ee.detail.id,"down",ae,ae.data.hand)},this.onButtonUp=function(ee){x(ee.detail.id,"up",ae,ae.data.hand)},this.onButtonTouchStart=function(ee){x(ee.detail.id,"touchstart",ae,ae.data.hand)},this.onButtonTouchEnd=function(ee){x(ee.detail.id,"touchend",ae,ae.data.hand)},this.controllerPresent=!1,this.lastControllerCheck=0,this.previousButtonValues={},this.rendererSystem=this.el.sceneEl.systems.renderer,this.bindMethods(),this.triggerEuler=new p.Euler},addEventListeners:function(){var ae=this.el;ae.addEventListener("buttonchanged",this.onButtonChanged),ae.addEventListener("buttondown",this.onButtonDown),ae.addEventListener("buttonup",this.onButtonUp),ae.addEventListener("touchstart",this.onButtonTouchStart),ae.addEventListener("touchend",this.onButtonTouchEnd),ae.addEventListener("axismove",this.onAxisMoved),ae.addEventListener("model-loaded",this.onModelLoaded),ae.addEventListener("thumbstickmoved",this.onThumbstickMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var ae=this.el;ae.removeEventListener("buttonchanged",this.onButtonChanged),ae.removeEventListener("buttondown",this.onButtonDown),ae.removeEventListener("buttonup",this.onButtonUp),ae.removeEventListener("touchstart",this.onButtonTouchStart),ae.removeEventListener("touchend",this.onButtonTouchEnd),ae.removeEventListener("axismove",this.onAxisMoved),ae.removeEventListener("model-loaded",this.onModelLoaded),ae.removeEventListener("thumbstickmoved",this.onThumbstickMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){v(this,_,{hand:this.data.hand,iterateControllerProfiles:!0})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},loadModel:function(ae){var ee=this.data,ne;if(ee.model){if(this.displayModel=N[ee.controllerType]||N[L],ee.controllerType==="auto"){var X=this.el.sceneEl.systems["tracked-controls-webvr"];if(X&&X.vrDisplay){var W=X.vrDisplay.displayName;/^Oculus Quest$/.test(W)&&(this.displayModel=N["oculus-touch-v2"])}else{ne=L;for(var ce=Object.keys(N),he=0;he<ae.profiles.length;he++)if(ce.indexOf(ae.profiles[he])!==-1){ne=ae.profiles[he];break}this.displayModel=N[ne]}}var xe=this.displayModel[ee.hand].modelUrl;this.isOculusTouchV3=this.displayModel===N["oculus-touch-v3"],this.el.setAttribute("gltf-model",xe)}},injectTrackedControls:function(ae){var ee=this.data,ne=g,X=ee.hand==="right"?"Oculus Touch (Right)":"Oculus Touch (Left)",W=C?ne:X;this.el.setAttribute("tracked-controls",{id:W,hand:ee.hand,orientationOffset:ee.orientationOffset,handTrackingEnabled:!1,iterateControllerProfiles:!0,space:"gripSpace"}),this.loadModel(ae)},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(ae){var ee=this.mapping[this.data.hand].buttons[ae.detail.id];if(ee){if(this.isOculusTouchV3)this.onButtonChangedV3(ae);else{var ne=this.buttonMeshes,X;(ee==="trigger"||ee==="grip")&&(X=ae.detail.state.value),ne&&(ee==="trigger"&&ne.trigger&&(ne.trigger.rotation.x=this.originalXRotationTrigger-X*(Math.PI/26)),ee==="grip"&&ne.grip&&(X*=this.data.hand==="left"?-1:1,ne.grip.position.x=this.originalXPositionGrip+X*.004))}this.el.emit(ee+"changed",ae.detail.state)}},clickButtons:["xbutton","ybutton","abutton","bbutton","thumbstick"],onButtonChangedV3:function(ae){var ee=this.mapping[this.data.hand].buttons[ae.detail.id],ne=this.buttonObjects,X;X=ae.detail.state.value,X*=this.data.hand==="left"?-1:1,ee==="trigger"?(this.triggerEuler.copy(this.buttonRanges.trigger.min.rotation),this.triggerEuler.x+=X*this.buttonRanges.trigger.diff.x,this.triggerEuler.y+=X*this.buttonRanges.trigger.diff.y,this.triggerEuler.z+=X*this.buttonRanges.trigger.diff.z,ne.trigger.setRotationFromEuler(this.triggerEuler)):ee==="grip"?ne.grip.position.x=ne.grip.minX+X*.004:this.clickButtons.includes(ee)&&(ne[ee].position.y=X===0?this.buttonRanges[ee].unpressedY:this.buttonRanges[ee].pressedY)},onModelLoaded:function(ae){if(this.data.model){if(this.isOculusTouchV3)this.onOculusTouchV3ModelLoaded(ae);else{var ee=this.controllerObject3D=ae.detail.model,ne;ne=this.buttonMeshes={},ne.grip=ee.getObjectByName("buttonHand"),this.originalXPositionGrip=ne.grip&&ne.grip.position.x,ne.trigger=ee.getObjectByName("buttonTrigger"),this.originalXRotationTrigger=ne.trigger&&ne.trigger.rotation.x,ne.thumbstick=ee.getObjectByName("stick"),ne.xbutton=ee.getObjectByName("buttonX"),ne.abutton=ee.getObjectByName("buttonA"),ne.ybutton=ee.getObjectByName("buttonY"),ne.bbutton=ee.getObjectByName("buttonB")}for(var X in this.buttonMeshes)this.buttonMeshes[X]&&se(this.buttonMeshes[X]);this.applyOffset(ae.detail.model),this.el.emit("controllermodelready",{name:"oculus-touch-controls",model:this.data.model,rayOrigin:this.displayModel[this.data.hand].rayOrigin})}},applyOffset:function(ae){ae.position.copy(this.displayModel[this.data.hand].modelPivotOffset),ae.rotation.copy(this.displayModel[this.data.hand].modelPivotRotation)},onOculusTouchV3ModelLoaded:function(ae){var ee=this.controllerObject3D=ae.detail.model,ne=this.buttonObjects={},X=this.buttonMeshes={},W=this.buttonRanges={};X.grip=ee.getObjectByName("squeeze"),ne.grip=ee.getObjectByName("xr_standard_squeeze_pressed_value"),W.grip={min:ee.getObjectByName("xr_standard_squeeze_pressed_min"),max:ee.getObjectByName("xr_standard_squeeze_pressed_max")},ne.grip.minX=ne.grip.position.x,X.thumbstick=ee.getObjectByName("thumbstick"),ne.thumbstick=ee.getObjectByName("xr_standard_thumbstick_pressed_value"),W.thumbstick={min:ee.getObjectByName("xr_standard_thumbstick_pressed_min"),max:ee.getObjectByName("xr_standard_thumbstick_pressed_max"),originalRotation:this.buttonObjects.thumbstick.rotation.clone()},W.thumbstick.pressedY=ne.thumbstick.position.y,W.thumbstick.unpressedY=W.thumbstick.pressedY+Math.abs(W.thumbstick.max.position.y)-Math.abs(W.thumbstick.min.position.y),X.trigger=ee.getObjectByName("trigger"),ne.trigger=ee.getObjectByName("xr_standard_trigger_pressed_value"),W.trigger={min:ee.getObjectByName("xr_standard_trigger_pressed_min"),max:ee.getObjectByName("xr_standard_trigger_pressed_max")},W.trigger.diff={x:Math.abs(W.trigger.max.rotation.x)-Math.abs(W.trigger.min.rotation.x),y:Math.abs(W.trigger.max.rotation.y)-Math.abs(W.trigger.min.rotation.y),z:Math.abs(W.trigger.max.rotation.z)-Math.abs(W.trigger.min.rotation.z)};var ce=this.data.hand==="left"?"x":"a",he=this.data.hand==="left"?"y":"b",xe=ce+"button",ve=he+"button";X[xe]=ee.getObjectByName(ce+"_button"),ne[xe]=ee.getObjectByName(ce+"_button_pressed_value"),W[xe]={min:ee.getObjectByName(ce+"_button_pressed_min"),max:ee.getObjectByName(ce+"_button_pressed_max")},X[ve]=ee.getObjectByName(he+"_button"),ne[ve]=ee.getObjectByName(he+"_button_pressed_value"),W[ve]={min:ee.getObjectByName(he+"_button_pressed_min"),max:ee.getObjectByName(he+"_button_pressed_max")},W[xe].unpressedY=ne[xe].position.y,W[xe].pressedY=W[xe].unpressedY+Math.abs(W[xe].max.position.y)-Math.abs(W[xe].min.position.y),W[ve].unpressedY=ne[ve].position.y,W[ve].pressedY=W[ve].unpressedY-Math.abs(W[ve].max.position.y)+Math.abs(W[ve].min.position.y)},onAxisMoved:function(ae){y(this,this.mapping[this.data.hand].axes,ae)},onThumbstickMoved:function(ae){if(!(!this.isOculusTouchV3||!this.buttonMeshes||!this.buttonMeshes.thumbstick))for(var ee in ae.detail)this.buttonObjects.thumbstick.rotation[this.axisMap[ee]]=this.buttonRanges.thumbstick.originalRotation[this.axisMap[ee]]-Math.PI/8*ae.detail[ee]*(ee==="y"||this.data.hand==="right"?-1:1)},axisMap:{y:"x",x:"z"},updateModel:function(ae,ee){this.data.model&&this.updateButtonModel(ae,ee)},updateButtonModel:function(ae,ee){var ne,X=ee==="up"||ee==="touchend"?this.buttonMeshes[ae].originalColor||this.data.buttonColor:ee==="touchstart"?this.data.buttonTouchColor:this.data.buttonHighlightColor,W=this.buttonMeshes;W&&W[ae]&&(ne=W[ae],ne.material.color.set(X),this.rendererSystem.applyColorCorrection(ne.material.color))}});function se(ae){ae.traverse(function(ee){if(ee.type!=="Mesh")return;let ne=ee.material.clone();ae.originalColor=ee.material.color,ee.material.dispose(),ee.material=ne})}},"./src/components/position.js":(l,d,c)=>{var h=c("./src/core/component.js").registerComponent;l.exports.Component=h("position",{schema:{type:"vec3"},update:function(){var m=this.el.object3D,p=this.data;m.position.set(p.x,p.y,p.z)},remove:function(){this.el.object3D.position.set(0,0,0)}})},"./src/components/raycaster.js":(l,d,c)=>{var h=c("./src/core/component.js").registerComponent,m=c("./src/lib/three.js"),p=c("./src/utils/index.js"),A=p.debug("components:raycaster:warn"),v=/^[\w\s-.,[\]#]*$/,y={childList:!0,attributes:!0,subtree:!0},x={INTERSECT:"raycaster-intersected",INTERSECTION:"raycaster-intersection",INTERSECT_CLEAR:"raycaster-intersected-cleared",INTERSECTION_CLEAR:"raycaster-intersection-cleared",INTERSECTION_CLOSEST_ENTITY_CHANGED:"raycaster-closest-entity-changed"};l.exports.Component=h("raycaster",{schema:{autoRefresh:{default:!0},direction:{type:"vec3",default:{x:0,y:0,z:-1}},enabled:{default:!0},far:{default:1e3},interval:{default:0},near:{default:0},objects:{default:""},origin:{type:"vec3"},showLine:{default:!1},lineColor:{default:"white"},lineOpacity:{default:1},useWorldCoordinates:{default:!1}},multiple:!0,init:function(){this.clearedIntersectedEls=[],this.unitLineEndVec3=new m.Vector3,this.intersectedEls=[],this.intersections=[],this.newIntersectedEls=[],this.newIntersections=[],this.objects=[],this.prevCheckTime=void 0,this.prevIntersectedEls=[],this.rawIntersections=[],this.raycaster=new m.Raycaster,this.updateOriginDirection(),this.setDirty=this.setDirty.bind(this),this.updateLine=this.updateLine.bind(this),this.observer=new MutationObserver(this.setDirty),this.dirty=!0,this.lineEndVec3=new m.Vector3,this.otherLineEndVec3=new m.Vector3,this.lineData={end:this.lineEndVec3},this.getIntersection=this.getIntersection.bind(this),this.intersectedDetail={el:this.el,getIntersection:this.getIntersection},this.intersectedClearedDetail={el:this.el},this.intersectionClearedDetail={clearedEls:this.clearedIntersectedEls},this.intersectionDetail={}},update:function(g){var b=this.data,_=this.el,S=this.raycaster;S.far=b.far,S.near=b.near,b.showLine&&(b.far!==g.far||b.origin!==g.origin||b.direction!==g.direction||!g.showLine)&&(this.unitLineEndVec3.copy(b.origin).add(b.direction).normalize(),this.drawLine()),!b.showLine&&g.showLine&&_.removeAttribute("line"),b.objects!==g.objects&&!v.test(b.objects)&&A('[raycaster] Selector "'+b.objects+'" may not update automatically with DOM changes.'),b.objects||A('[raycaster] For performance, please define raycaster.objects when using raycaster or cursor components to whitelist which entities to intersect with. e.g., raycaster="objects: [data-raycastable]".'),b.autoRefresh!==g.autoRefresh&&_.isPlaying&&(b.autoRefresh?this.addEventListeners():this.removeEventListeners()),g.enabled&&!b.enabled&&this.clearAllIntersections(),this.setDirty()},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners()},remove:function(){this.data.showLine&&this.el.removeAttribute("line"),this.clearAllIntersections()},addEventListeners:function(){this.data.autoRefresh&&(this.observer.observe(this.el.sceneEl,y),this.el.sceneEl.addEventListener("object3dset",this.setDirty),this.el.sceneEl.addEventListener("object3dremove",this.setDirty))},removeEventListeners:function(){this.observer.disconnect(),this.el.sceneEl.removeEventListener("object3dset",this.setDirty),this.el.sceneEl.removeEventListener("object3dremove",this.setDirty)},setDirty:function(){this.dirty=!0},refreshObjects:function(){var g=this.data,b;b=g.objects?this.el.sceneEl.querySelectorAll(g.objects):this.el.sceneEl.querySelectorAll("*"),this.objects=this.flattenObject3DMaps(b),this.dirty=!1},tock:function(g){var b=this.data,_=this.prevCheckTime;b.enabled&&(_&&g-_<b.interval||(this.prevCheckTime=g,this.checkIntersections()))},checkIntersections:function(){var g=this.clearedIntersectedEls,b=this.el,_=this.data,S,R=this.intersectedEls,P,O=this.intersections,D=this.newIntersectedEls,L=this.newIntersections,N=this.prevIntersectedEls,H=this.rawIntersections;for(this.dirty&&this.refreshObjects(),C(this.prevIntersectedEls,this.intersectedEls),this.updateOriginDirection(),H.length=0,this.raycaster.intersectObjects(this.objects,!0,H),O.length=0,R.length=0,S=0;S<H.length;S++)P=H[S],!(_.showLine&&P.object===b.getObject3D("line"))&&P.object.el&&(O.push(P),R.push(P.object.el));for(L.length=0,D.length=0,S=0;S<O.length;S++)N.indexOf(O[S].object.el)===-1&&(L.push(O[S]),D.push(O[S].object.el));for(g.length=0,S=0;S<N.length;S++)R.indexOf(N[S])===-1&&(N[S].emit(x.INTERSECT_CLEAR,this.intersectedClearedDetail),g.push(N[S]));for(g.length&&b.emit(x.INTERSECTION_CLEAR,this.intersectionClearedDetail),S=0;S<D.length;S++)D[S].emit(x.INTERSECT,this.intersectedDetail);L.length&&(this.intersectionDetail.els=D,this.intersectionDetail.intersections=L,b.emit(x.INTERSECTION,this.intersectionDetail)),(N.length===0&&O.length>0||N.length>0&&O.length===0||N.length&&O.length&&N[0]!==O[0].object.el)&&(this.intersectionDetail.els=this.intersectedEls,this.intersectionDetail.intersections=O,b.emit(x.INTERSECTION_CLOSEST_ENTITY_CHANGED,this.intersectionDetail)),_.showLine&&setTimeout(this.updateLine)},updateLine:function(){var g=this.el,b=this.intersections,_;b.length&&(b[0].object.el===g&&b[1]?_=b[1].distance:_=b[0].distance),this.drawLine(_)},getIntersection:function(g){var b,_;for(b=0;b<this.intersections.length;b++)if(_=this.intersections[b],_.object.el===g)return _;return null},updateOriginDirection:function(){var g=new m.Vector3,b=new m.Vector3;return function(){var S=this.el,R=this.data;if(R.useWorldCoordinates){this.raycaster.set(R.origin,R.direction);return}S.object3D.updateMatrixWorld(),b.setFromMatrixPosition(S.object3D.matrixWorld),(R.origin.x!==0||R.origin.y!==0||R.origin.z!==0)&&(b=S.object3D.localToWorld(b.copy(R.origin))),g.copy(R.direction).transformDirection(S.object3D.matrixWorld).normalize(),this.raycaster.set(b,g)}}(),drawLine:function(g){var b=this.data,_=this.el,S;S=this.lineData.end===this.lineEndVec3?this.otherLineEndVec3:this.lineEndVec3,g===void 0&&(g=b.far===1/0?1e3:b.far),this.lineData.start=b.origin,this.lineData.end=S.copy(this.unitLineEndVec3).multiplyScalar(g),this.lineData.color=b.lineColor,this.lineData.opacity=b.lineOpacity,_.setAttribute("line",this.lineData)},flattenObject3DMaps:function(g){var b,_,S=this.objects,R=this.el.sceneEl.object3D;function P(D){return D.parent?P(D.parent):D===R}for(S.length=0,_=0;_<g.length;_++){var O=g[_];if(O.isEntity&&O.object3D&&P(O.object3D))for(b in O.object3DMap)S.push(O.getObject3D(b))}return S},clearAllIntersections:function(){var g;for(g=0;g<this.intersectedEls.length;g++)this.intersectedEls[g].emit(x.INTERSECT_CLEAR,this.intersectedClearedDetail);C(this.clearedIntersectedEls,this.intersectedEls),this.intersectedEls.length=0,this.intersections.length=0,this.el.emit(x.INTERSECTION_CLEAR,this.intersectionClearedDetail)}});function C(g,b){var _;for(g.length=b.length,_=0;_<b.length;_++)g[_]=b[_]}},"./src/components/rotation.js":(l,d,c)=>{var h=c("./src/lib/three.js").MathUtils.degToRad,m=c("./src/core/component.js").registerComponent;l.exports.Component=m("rotation",{schema:{type:"vec3"},update:function(){var p=this.data,A=this.el.object3D;A.rotation.set(h(p.x),h(p.y),h(p.z)),A.rotation.order="YXZ"},remove:function(){this.el.object3D.rotation.set(0,0,0)}})},"./src/components/scale.js":(l,d,c)=>{var h=c("./src/core/component.js").registerComponent,m=1e-5;l.exports.Component=h("scale",{schema:{type:"vec3",default:{x:1,y:1,z:1}},update:function(){var p=this.data,A=this.el.object3D,v=p.x===0?m:p.x,y=p.y===0?m:p.y,x=p.z===0?m:p.z;A.scale.set(v,y,x)},remove:function(){this.el.object3D.scale.set(1,1,1)}})},"./src/components/scene/ar-hit-test.js":(l,d,c)=>{var h="data:image/webp;base64,UklGRkQHAABXRUJQVlA4WAoAAAAQAAAA/wEA/wEAQUxQSL0DAAARDzD/ERGCjrY9sYYFfgo6aa1kJ7K0w9Lo3AadLSVeFxevQwj5kuM8RfR/Atw/C0+ozB/oUBrloFZs6ElSW88j1KA4yExNWQaqRZquIDF0JYmlq0hAuUDTFu66tng3teW7pa3cQf1V1edvur54M/Slm6Wv3Gx9zw0MXlQLntcsBN6wkHjTQuYtC4W3LTw8mGRVG57TbAROtxHfZNhInGkjc5aNwtk2Hg6Mvki14k+NkZzCwQgCxalcAv3kddRTPI1DcUrXId1FLf1uHpzaQz4tquhZVLlKesbVpqKeTj0n0F5PpXDlFN9UqmhalL/ImuZFo6KmToWLoKlddMprqlS8cKovBvHo2kTiFV2LN4msaxKZl3QNiair8xYRdDWivIvXVXmbcMqJ51UebZuFXxZt6xd4laxtciqRtA3Cv0nU1t+kEUFbI8JvCa+tvkm3FDlO/W+OR99+kWEp/YYo+tYfTVnf/K8cE/F///3vv//993eeL+a+uvjawLcX3xjYvJotBFY3kVjTRGFtE+BU2AiMbiQyhpHMWEYeBozAH5qNBYRDB5KBCaTDBKKBAZTDBoKBDjwHAN5ABeCJBsAZcAAC0YHHxAYSMYBiYgGZWEA2MYFCbCCZGAAIANFEB+AnYgMQTDQAYSJ2AN5EBZAm4gDgTDgAeSIu4DGygTIRN1CMLOCZiACykQlg4jsAycgA8AO+BxCNdJyDkcbwRirDGXGnx8w+FDPrkM3MQ9JQZMYhiiwV/RDMtIM3U1/DmXHUo+IR2kSR2ToWkQ1NIn2qf2J8LCqJKiDUiSADHY3whirhdHgZ94HKaR97PhE+twEUJUFoAcgyTct8hfSxSkShASDKdMJ/ritKHwgyQ0sD4D/miCxU5SbhOOUDTnZpccCjYP/i0bZ/8bAgtVGEoGapWIQXyzKVKLwgNJFk2rtMIgoNRJlOZF7SNSSyUEeQmbxBFKEmtYjEe8S8zOZ1AkJVCmS88FJOtF40Ksg4oUaFiygk3C8qlTVNyl8UTevCUdAE2t14PfVqU1FPp57TopKeQZWromddTQp6QOfTOEQt/ZDuipZ11w/wOiqO8dRORcc6BQEkDQMClaHcn5wV9yLbxsNZNgpn2sicYSNxuo34Js1G4FQbnuNsOPa28PCWhcKbFjJvWEi8ZiHwqgXPcxbc5db33Cx95WboSzddX7yp+vyN0+eul7ZyN7Xlu64t3jVt4c5pc4JLV5EYupJE0xUknC4nOjVlmaYpyLit53HCQ0+ScnqceNcS5dzUkd0/CwMAVlA4IGADAAAQXwCdASoAAgACP8ne6Wy/tjCpqJ/IA/A5CWlu4XYBG/Pz8AfwD8APz//f3v8E1fuHZnxKYACtfuHZnxKYACrYTb5mOslhxu843ecbvON3nG7zjd3a0VCn7G1MABVxwH/Xd25gAK1+4dmfEpe2+PHhQaj75++riG6FuYACtfuHZnxKYACRrK3q9xO8Ss3uWKnMhs/rDF1hi6wxdYYusMXWGI5QRcCFDZog5OgqNlse1NDuz/UoFa/cOzPiUwAEsAOK4/nu5eZHK2tlXxJfNYlMABWv3Dsz4bvNJ5YA/LtxJ38SmAArX7h2Z8Sk5vdZUYv7mZPiUwAFa/cOzPh21s5OgZxf1mfEpemRyFr/rM+JS9noA/LtxJ38SmAAlUJIotzAASn6TjdhK+D3Dsz4dyvB7h2Z8O2tnJ0DOL+sz4lL2nKLT4lL/+iSLOocxq639w7M34MNZdm55uJ8v8ra2cpVZnxKTq2F3PN/cNksAfl24k7+JTAASqrD37h2Z7b1W+VtbOUqsz4lJ1bC7nm/uGyWAPy7cSd/EpgAJVVh79w7M9t6rfK2tnKVWZ8Sk6thdzzf3DZLAH5duJO/iUwAEqqw9+4dme29VvlbWzlKrM+JSdWwu55v7hslgD8u3EnfxKYACVVYe/cOzPbeq3ytrZylVme0kYJ8557FLerqFrzIbPrrf3DZLAH5duJO/iUvaVMS9BoaF4p7pSDFTP1XMyfElelrM0DOL+sz4eBJ13nV1OppBGPuKb4YzXQgq9uH19uS/0+JS9t9fr6ZUlQBelDG6GMgq97otb5QMPJwtKyBTbFp8Sl7b6/X0ykkawEOsgdiE6Fi0vb/Eve6xkwsmug0Z4nGNHQO8839bpTsjpz7SWIJxKagvd1QWMa6FYT1KEw3j4XDT6vJ9Xk+nyfT5Pq8n1eEmk5dinMM/9Fcfz4Z3Dsz3KD2dw7LxBRxKrqUUGQPH/7zxr1KIfNpLEJ0MZB2ITM/0Z2EFoh12NlXnEcpYcbvON3nG7zjd5xu84vfcNIAAP7+y8ceyzbVxkakPYY4lcr72fqOnDwipv+yxC71wAADBrjKnAAAAAAAAAAAAAAw7oNGHttqWONcoFN/2WIDc2pa6WVFtFYROlsaMaTXdcOjXHz93+YxAglKa4AAAAA=",m=c("./src/core/component.js").registerComponent,p=c("./src/lib/three.js"),A=21,v=function(){var g=new p.Quaternion,b=new p.Vector3;function _(S,R,P){R.position.copy(S.transform.position),R.quaternion.copy(S.transform.orientation),b.copy(P),g.copy(S.transform.orientation),b.applyQuaternion(g),R.position.sub(b)}return _}();v.tempFakePose={transform:{orientation:new p.Quaternion,position:new p.Vector3}};function y(g,b){this.renderer=g,this.xrHitTestSource=null,g.xr.addEventListener("sessionend",function(){this.xrHitTestSource=null}.bind(this)),g.xr.addEventListener("sessionstart",function(){this.sessionStart(b)}.bind(this)),this.renderer.xr.isPresenting&&this.sessionStart(b)}y.prototype.previousFrameAnchors=new Set,y.prototype.anchorToObject3D=new Map;function x(g){console.warn(g.message),console.warn('Cannot requestHitTestSource Are you missing: webxr="optionalFeatures: hit-test;" from <a-scene>?')}y.prototype.sessionStart=function(b){if(this.session=this.renderer.xr.getSession(),!("requestHitTestSource"in this.session)){x({message:"No requestHitTestSource on the session."});return}b.space?this.session.requestHitTestSource(b).then(function(_){this.xrHitTestSource=_}.bind(this)).catch(x):b.profile&&this.session.requestHitTestSourceForTransientInput(b).then(function(_){this.xrHitTestSource=_,this.transient=!0}.bind(this)).catch(x)},y.prototype.anchorFromLastHitTestResult=function(g,b){var _=this.lastHitTest;if(_){var S={object3D:g,offset:b};Array.from(this.anchorToObject3D.entries()).forEach(function(R){var P=R[1].object3D,O=R[0];P===g&&(this.anchorToObject3D.delete(O),O.delete())}.bind(this)),_.createAnchor&&_.createAnchor().then(function(R){this.anchorToObject3D.set(R,S)}.bind(this)).catch(function(R){console.warn(R.message),console.warn('Cannot create anchor, are you missing: webxr="optionalFeatures: anchors;" from <a-scene>?')})}},y.prototype.doHit=function(b){if(this.renderer.xr.isPresenting){var _=this.renderer.xr.getReferenceSpace(),S=b.getViewerPose(_),R,P;if(this.xrHitTestSource&&S)return this.transient?(R=b.getHitTestResultsForTransientInput(this.xrHitTestSource),R.length>0?(P=R[0].results,P.length>0?(this.lastHitTest=P[0],P[0].getPose(_)):!1):!1):(R=b.getHitTestResults(this.xrHitTestSource),R.length>0?(this.lastHitTest=R[0],R[0].getPose(_)):!1)}},y.updateAnchorPoses=function(g,b){var _=g.trackedAnchors||y.prototype.previousFrameAnchors;y.prototype.previousFrameAnchors.forEach(function(S){_.has(S)||y.prototype.anchorToObject3D.delete(S)}),_.forEach(function(S){var R,P,O,D;try{R=g.getPose(S.anchorSpace,b)}catch{}R&&(P=y.prototype.anchorToObject3D.get(S),O=P.offset,D=P.object3D,v(R,D,O))})};var C;l.exports.Component=m("ar-hit-test",{schema:{target:{type:"selector"},enabled:{default:!0},src:{default:h,type:"map"},type:{default:"footprint",oneOf:["footprint","map"]},footprintDepth:{default:.1},mapSize:{type:"vec2",default:{x:.5,y:.5}}},init:function(){this.hitTest=null,this.imageDataArray=new Uint8ClampedArray(1048576),this.imageData=new ImageData(this.imageDataArray,512,512),this.textureCache=new Map,this.orthoCam=new p.OrthographicCamera,this.orthoCam.layers.set(A),this.textureTarget=new p.WebGLRenderTarget(512,512,{}),this.basicMaterial=new p.MeshBasicMaterial({color:0,side:p.DoubleSide}),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.context.imageSmoothingEnabled=!1,this.canvas.width=512,this.canvas.height=512,this.canvasTexture=new p.CanvasTexture(this.canvas,{alpha:!0}),this.canvasTexture.flipY=!1;var g=this.el.getAttribute("webxr"),b=g.optionalFeatures;(!b.includes("hit-test")||!b.includes("anchors"))&&(b.push("hit-test"),b.push("anchors"),this.el.setAttribute("webxr",g)),this.el.sceneEl.renderer.xr.addEventListener("sessionend",function(){this.hitTest=null}.bind(this)),this.el.sceneEl.renderer.xr.addEventListener("sessionstart",function(){if(this.el.is("ar-mode")){var _=this.el.sceneEl.renderer,S=this.session=_.xr.getSession();this.hasPosedOnce=!1,this.bboxMesh.visible=!1,C||(C=new Map),S.requestReferenceSpace("viewer").then(function(O){this.hitTest=new y(_,{space:O}),C.set(O,this.hitTest),this.el.emit("ar-hit-test-start")}.bind(this));var R="generic-touchscreen",P=new y(_,{profile:R});S.addEventListener("selectstart",function(O){if(this.data.enabled===!0){var D=O.inputSource;this.bboxMesh.visible=!0,this.hasPosedOnce===!0&&(this.el.emit("ar-hit-test-select-start",{inputSource:D,position:this.bboxMesh.position,orientation:this.bboxMesh.quaternion}),D.profiles[0]===R?this.hitTest=P:(this.hitTest=C.get(D)||new y(_,{space:D.targetRaySpace}),C.set(D,this.hitTest)))}}.bind(this)),S.addEventListener("selectend",function(O){if(!this.hitTest||this.data.enabled!==!0){this.hitTest=null;return}var D=O.inputSource,L;this.hasPosedOnce===!0&&(this.bboxMesh.visible=!1,this.data.target&&(L=this.data.target.object3D,L&&(v.tempFakePose.transform.position.copy(this.bboxMesh.position),v.tempFakePose.transform.orientation.copy(this.bboxMesh.quaternion),v(v.tempFakePose,L,this.bboxOffset),L.visible=!0,this.hitTest.anchorFromLastHitTestResult(L,this.bboxOffset))),this.el.emit("ar-hit-test-select",{inputSource:D,position:this.bboxMesh.position,orientation:this.bboxMesh.quaternion})),this.hitTest=null}.bind(this))}}.bind(this)),this.bboxOffset=new p.Vector3,this.update=this.update.bind(this),this.makeBBox()},update:function(){this.data.enabled===!1&&(this.hitTest=null,this.bboxMesh.visible=!1),this.data.target&&(this.data.target.object3D?(this.data.target.addEventListener("model-loaded",this.update),this.data.target.object3D.layers.enable(A),this.data.target.object3D.traverse(function(g){g.layers.enable(A)})):this.data.target.addEventListener("loaded",this.update,{once:!0})),this.bboxNeedsUpdate=!0},makeBBox:function(){var g=new p.PlaneGeometry(1,1),b=new p.MeshBasicMaterial({transparent:!0,color:16777215});g.rotateX(-Math.PI/2),g.rotateY(-Math.PI/2),this.bbox=new p.Box3,this.bboxMesh=new p.Mesh(g,b),this.el.setObject3D("ar-hit-test",this.bboxMesh),this.bboxMesh.visible=!1},updateFootprint:function(){var g,b=this.el.sceneEl.renderer,_,S,R=b.xr.enabled;this.bboxMesh.material.map=this.canvasTexture,this.bboxMesh.material.needsUpdate=!0,this.orthoCam.rotation.set(-Math.PI/2,0,-Math.PI/2),this.orthoCam.position.copy(this.bboxMesh.position),this.orthoCam.position.y-=this.bboxMesh.scale.y/2,this.orthoCam.near=.1,this.orthoCam.far=this.orthoCam.near+this.data.footprintDepth*this.bboxMesh.scale.y,this.orthoCam.position.y+=this.orthoCam.far,this.orthoCam.right=this.bboxMesh.scale.z/2,this.orthoCam.left=-this.bboxMesh.scale.z/2,this.orthoCam.top=this.bboxMesh.scale.x/2,this.orthoCam.bottom=-this.bboxMesh.scale.x/2,this.orthoCam.updateProjectionMatrix(),_=b.getRenderTarget(),b.setRenderTarget(this.textureTarget),b.xr.enabled=!1,S=this.el.object3D.background,this.el.object3D.overrideMaterial=this.basicMaterial,this.el.object3D.background=null,b.render(this.el.object3D,this.orthoCam),this.el.object3D.background=S,this.el.object3D.overrideMaterial=null,b.xr.enabled=R,b.setRenderTarget(_),b.readRenderTargetPixels(this.textureTarget,0,0,512,512,this.imageDataArray),this.context.putImageData(this.imageData,0,0),this.context.shadowColor="white",this.context.shadowBlur=10,this.context.drawImage(this.canvas,0,0),g=this.context.getImageData(0,0,512,512);for(var P=0;P<262144;P++)g.data[P*4+3]!==0&&g.data[P*4+3]!==255&&(g.data[P*4+3]=128);this.context.putImageData(g,0,0),this.canvasTexture.needsUpdate=!0},tick:function(){var g,b=this.el.sceneEl.frame,_=this.el.sceneEl.renderer;if(b&&y.updateAnchorPoses(b,_.xr.getReferenceSpace()),this.bboxNeedsUpdate){if(this.bboxNeedsUpdate=!1,!this.data.target||this.data.type==="map"){var S;this.textureCache.has(this.data.src)?S=this.textureCache.get(this.data.src):(S=new p.TextureLoader().load(this.data.src),this.textureCache.set(this.data.src,S)),this.bboxMesh.material.map=S,this.bboxMesh.material.needsUpdate=!0}this.data.target&&this.data.target.object3D?(this.bbox.setFromObject(this.data.target.object3D),this.bbox.getCenter(this.bboxMesh.position),this.bbox.getSize(this.bboxMesh.scale),this.data.type==="footprint"&&(this.bboxMesh.scale.x*=1.04,this.bboxMesh.scale.z*=1.04,this.updateFootprint()),this.bboxMesh.position.y-=this.bboxMesh.scale.y/2,this.bboxOffset.copy(this.bboxMesh.position),this.bboxOffset.sub(this.data.target.object3D.position)):this.bboxMesh.scale.set(this.data.mapSize.x,1,this.data.mapSize.y)}this.hitTest&&(g=this.hitTest.doHit(b),g&&(this.hasPosedOnce!==!0&&(this.hasPosedOnce=!0,this.el.emit("ar-hit-test-achieved")),this.bboxMesh.visible=!0,this.bboxMesh.position.copy(g.transform.position),this.bboxMesh.quaternion.copy(g.transform.orientation)))}})},"./src/components/scene/background.js":(l,d,c)=>{var h=c("./src/core/component.js").registerComponent,m=c("./src/core/component.js").components;l.exports.Component=h("background",{schema:{color:{type:"color",default:"black"},transparent:{default:!1}},update:function(){var p=this.data,A=this.el.object3D;p.transparent?A.background=null:A.background=new THREE.Color(p.color)},remove:function(){var p=this.data,A=this.el.object3D;if(p.transparent){A.background=null;return}A.background=m[this.name].schema.color.default}})},"./src/components/scene/debug.js":(l,d,c)=>{var h=c("./src/core/component.js").registerComponent;l.exports.Component=h("debug",{schema:{default:!0}})},"./src/components/scene/device-orientation-permission-ui.js":(l,d,c)=>{var h=c("./src/core/component.js").registerComponent,m=c("./src/utils/index.js"),p=m.bind,A=c("./src/constants/index.js"),v="a-modal",y="a-dialog",x="a-dialog-text",C="a-dialog-text-container",g="a-dialog-buttons-container",b="a-dialog-button",_="a-dialog-allow-button",S="a-dialog-deny-button",R="a-dialog-ok-button";l.exports.Component=h("device-orientation-permission-ui",{schema:{enabled:{default:!0},deviceMotionMessage:{default:"This immersive website requires access to your device motion sensors."},httpsMessage:{default:"Access this site over HTTPS to enter VR mode and grant access to the device sensors."},denyButtonText:{default:"Deny"},allowButtonText:{default:"Allow"},cancelButtonText:{default:"Cancel"}},init:function(){var L=this;if(this.data.enabled){if(location.hostname!=="localhost"&&location.hostname!=="127.0.0.1"&&location.protocol==="http:"&&this.showHTTPAlert(),typeof DeviceOrientationEvent>"u"||!DeviceOrientationEvent.requestPermission){this.permissionGranted=!0;return}this.onDeviceMotionDialogAllowClicked=p(this.onDeviceMotionDialogAllowClicked,this),this.onDeviceMotionDialogDenyClicked=p(this.onDeviceMotionDialogDenyClicked,this),DeviceOrientationEvent.requestPermission().then(function(){L.el.emit("deviceorientationpermissiongranted"),L.permissionGranted=!0}).catch(function(){L.devicePermissionDialogEl=P(L.data.denyButtonText,L.data.allowButtonText,L.data.deviceMotionMessage,L.onDeviceMotionDialogAllowClicked,L.onDeviceMotionDialogDenyClicked),L.el.appendChild(L.devicePermissionDialogEl)})}},remove:function(){this.devicePermissionDialogEl&&this.el.removeChild(this.devicePermissionDialogEl)},onDeviceMotionDialogDenyClicked:function(){this.remove()},showHTTPAlert:function(){var L=this,N=O(L.data.cancelButtonText,L.data.httpsMessage,function(){L.el.removeChild(N)});this.el.appendChild(N)},onDeviceMotionDialogAllowClicked:function(){var L=this;this.el.emit("deviceorientationpermissionrequested"),DeviceOrientationEvent.requestPermission().then(function(N){N==="granted"?(L.el.emit("deviceorientationpermissiongranted"),L.permissionGranted=!0):L.el.emit("deviceorientationpermissionrejected"),L.remove()}).catch(console.error)}});function P(L,N,H,J,K){var se,ae,ee;return se=document.createElement("div"),se.classList.add(g),ae=document.createElement("button"),ae.classList.add(b,S),ae.setAttribute(A.AFRAME_INJECTED,""),ae.innerHTML=L,se.appendChild(ae),ee=document.createElement("button"),ee.classList.add(b,_),ee.setAttribute(A.AFRAME_INJECTED,""),ee.innerHTML=N,se.appendChild(ee),ee.addEventListener("click",function(ne){ne.stopPropagation(),J()}),ae.addEventListener("click",function(ne){ne.stopPropagation(),K()}),D(H,se)}function O(L,N,H){var J,K;return J=document.createElement("div"),J.classList.add(g),K=document.createElement("button"),K.classList.add(b,R),K.setAttribute(A.AFRAME_INJECTED,""),K.innerHTML=L,J.appendChild(K),K.addEventListener("click",function(se){se.stopPropagation(),H()}),D(N,J)}function D(L,N){var H,J,K,se;return H=document.createElement("div"),H.classList.add(v),H.setAttribute(A.AFRAME_INJECTED,""),J=document.createElement("div"),J.className=y,J.setAttribute(A.AFRAME_INJECTED,""),H.appendChild(J),K=document.createElement("div"),K.classList.add(C),J.appendChild(K),se=document.createElement("div"),se.classList.add(x),se.innerHTML=L,K.appendChild(se),J.appendChild(N),H}},"./src/components/scene/embedded.js":(l,d,c)=>{var h=c("./src/core/component.js").registerComponent;l.exports.Component=h("embedded",{dependencies:["vr-mode-ui"],schema:{default:!0},update:function(){var m=this.el,p=m.querySelector(".a-enter-vr");this.data===!0?(p&&p.classList.add("embedded"),m.removeFullScreenStyles()):(p&&p.classList.remove("embedded"),m.addFullScreenStyles())}})},"./src/components/scene/fog.js":(l,d,c)=>{var h=c("./src/core/component.js").registerComponent,m=c("./src/lib/three.js"),p=c("./src/utils/debug.js"),A=p("components:fog:warn");l.exports.Component=h("fog",{schema:{color:{type:"color",default:"#000"},density:{default:25e-5},far:{default:1e3,min:0},near:{default:1,min:0},type:{default:"linear",oneOf:["linear","exponential"]}},update:function(){var y=this.data,x=this.el,C=this.el.object3D.fog;if(!x.isScene){A("Fog component can only be applied to <a-scene>");return}if(!C||y.type!==C.name){x.object3D.fog=v(y),x.systems.material.updateMaterials();return}Object.keys(this.schema).forEach(function(g){var b=y[g];g==="color"&&(b=new m.Color(b)),C[g]=b})},remove:function(){var y=this.el.object3D.fog;y&&(y.far=0,y.near=.1)}});function v(y){var x;return y.type==="exponential"?x=new m.FogExp2(y.color,y.density):x=new m.Fog(y.color,y.near,y.far),x.name=y.type,x}},"./src/components/scene/inspector.js":(l,d,c)=>{var h=c("./src/constants/index.js").AFRAME_INJECTED,m=c("./package.json"),p=c("./src/core/component.js").registerComponent,A=c("./src/utils/index.js");function v(b){var _=b.split(".");return _[2]="x",_.join(".")}var y="https://unpkg.com/aframe-inspector@"+v(m.version)+"/dist/aframe-inspector.min.js",x=y,C="Loading Inspector",g="Error loading Inspector";l.exports.Component=p("inspector",{schema:{url:{default:x}},init:function(){this.firstPlay=!0,this.onKeydown=this.onKeydown.bind(this),this.onMessage=this.onMessage.bind(this),this.initOverlay(),window.addEventListener("keydown",this.onKeydown),window.addEventListener("message",this.onMessage)},play:function(){var b;this.firstPlay&&(b=A.getUrlParameter("inspector"),b!=="false"&&b&&(this.openInspector(),this.firstPlay=!1))},initOverlay:function(){var b='<span class="dots"><span>.</span><span>.</span><span>.</span></span>';this.loadingMessageEl=document.createElement("div"),this.loadingMessageEl.classList.add("a-inspector-loader"),this.loadingMessageEl.innerHTML=C+b},remove:function(){this.removeEventListeners()},onKeydown:function(b){var _=b.keyCode===73&&(b.ctrlKey&&b.altKey||b.getModifierState("AltGraph"));_&&this.openInspector()},showLoader:function(){document.body.appendChild(this.loadingMessageEl)},hideLoader:function(){document.body.removeChild(this.loadingMessageEl)},onMessage:function(b){b.data==="INJECT_AFRAME_INSPECTOR"&&this.openInspector()},openInspector:function(b){var _=this,S;if(AFRAME.INSPECTOR||AFRAME.inspectorInjected){AFRAME.INSPECTOR.open(b);return}this.showLoader(),S=document.createElement("script"),S.src=this.data.url,S.setAttribute("data-name","aframe-inspector"),S.setAttribute(h,""),S.onload=function(){AFRAME.INSPECTOR.open(b),_.hideLoader(),_.removeEventListeners()},S.onerror=function(){_.loadingMessageEl.innerHTML=g},document.head.appendChild(S),AFRAME.inspectorInjected=!0},removeEventListeners:function(){window.removeEventListener("keydown",this.onKeydown),window.removeEventListener("message",this.onMessage)}})},"./src/components/scene/keyboard-shortcuts.js":(l,d,c)=>{var h=c("./src/core/component.js").registerComponent,m=c("./src/utils/index.js").shouldCaptureKeyEvent;l.exports.Component=h("keyboard-shortcuts",{schema:{enterVR:{default:!0},exitVR:{default:!0}},init:function(){this.onKeyup=this.onKeyup.bind(this)},update:function(p){var A=this.data;this.enterVREnabled=A.enterVR},play:function(){window.addEventListener("keyup",this.onKeyup,!1)},pause:function(){window.removeEventListener("keyup",this.onKeyup)},onKeyup:function(p){var A=this.el;m(p)&&(this.enterVREnabled&&p.keyCode===70&&A.enterVR(),this.enterVREnabled&&p.keyCode===27&&A.exitVR())}})},"./src/components/scene/pool.js":(l,d,c)=>{var h=c("./src/utils/debug.js"),m=c("./src/core/component.js").registerComponent,p=h("components:pool:warn");l.exports.Component=m("pool",{schema:{container:{default:""},mixin:{default:""},size:{default:0},dynamic:{default:!1}},multiple:!0,initPool:function(){var A;for(this.availableEls=[],this.usedEls=[],this.data.mixin||p("No mixin provided for pool component."),this.data.container&&(this.container=document.querySelector(this.data.container),this.container||p("Container "+this.data.container+" not found.")),this.container=this.container||this.el,A=0;A<this.data.size;++A)this.createEntity()},update:function(A){var v=this.data;(A.mixin!==v.mixin||A.size!==v.size)&&this.initPool()},createEntity:function(){var A;A=document.createElement("a-entity"),A.play=this.wrapPlay(A.play),A.setAttribute("mixin",this.data.mixin),A.object3D.visible=!1,A.pause(),this.container.appendChild(A),this.availableEls.push(A);var v=this.usedEls;A.addEventListener("loaded",function(){v.indexOf(A)===-1&&(A.object3DParent=A.object3D.parent,A.object3D.parent.remove(A.object3D))})},wrapPlay:function(A){var v=this.usedEls;return function(){v.indexOf(this)!==-1&&A.call(this)}},requestEntity:function(){var A;if(this.availableEls.length===0){if(this.data.dynamic===!1){p("Requested entity from empty pool: "+this.attrName);return}else p("Requested entity from empty pool. This pool is dynamic and will resize automatically. You might want to increase its initial size: "+this.attrName);this.createEntity()}return A=this.availableEls.shift(),this.usedEls.push(A),A.object3DParent&&(A.object3DParent.add(A.object3D),this.updateRaycasters()),A.object3D.visible=!0,A},returnEntity:function(A){var v=this.usedEls.indexOf(A);if(v===-1){p("The returned entity was not previously pooled from "+this.attrName);return}return this.usedEls.splice(v,1),this.availableEls.push(A),A.object3DParent=A.object3D.parent,A.object3D.parent.remove(A.object3D),this.updateRaycasters(),A.object3D.visible=!1,A.pause(),A},updateRaycasters(){var A=document.querySelectorAll("[raycaster]");A.forEach(function(v){v.components.raycaster.setDirty()})}})},"./src/components/scene/reflection.js":(l,d,c)=>{var h=c("./src/core/component.js").registerComponent;function m(p,A,v,y){var x=Math.max(p.primaryLightIntensity.x,Math.max(p.primaryLightIntensity.y,p.primaryLightIntensity.z));A.sh.fromArray(p.sphericalHarmonicsCoefficients),A.intensity=1,v&&(v.color.setRGB(p.primaryLightIntensity.x/x,p.primaryLightIntensity.y/x,p.primaryLightIntensity.z/x),v.intensity=x,y.copy(p.primaryLightDirection))}l.exports.Component=h("reflection",{schema:{directionalLight:{type:"selector"}},init:function(){var p=this;this.cubeRenderTarget=new THREE.WebGLCubeRenderTarget(16),this.cubeCamera=new THREE.CubeCamera(.1,1e3,this.cubeRenderTarget),this.lightingEstimationTexture=new THREE.WebGLCubeRenderTarget(16).texture,this.needsVREnvironmentUpdate=!0;var A=this.el.getAttribute("webxr"),v=A.optionalFeatures;v.includes("light-estimation")||(v.push("light-estimation"),this.el.setAttribute("webxr",A)),this.el.addEventListener("enter-vr",function(){var y=p.el.renderer,x=y.xr.getSession();x.requestLightProbe&&p.el.is("ar-mode")&&p.startLightProbe()}),this.el.addEventListener("exit-vr",function(){p.stopLightProbe()}),this.el.object3D.environment=this.cubeRenderTarget.texture},stopLightProbe:function(){this.xrLightProbe=null,this.probeLight&&(this.probeLight.components.light.light.intensity=0),this.needsVREnvironmentUpdate=!0,this.el.object3D.environment=this.cubeRenderTarget.texture},startLightProbe:function(){this.needsLightProbeUpdate=!0},setupLightProbe:function(){var p=this.el.renderer,A=p.xr.getSession(),v=this,y=p.getContext();if(!this.probeLight){var x=document.createElement("a-light");x.setAttribute("type","probe"),x.setAttribute("intensity",0),this.el.appendChild(x),this.probeLight=x}switch(A.preferredReflectionFormat){case"srgba8":y.getExtension("EXT_sRGB");break;case"rgba16f":y.getExtension("OES_texture_half_float");break}this.glBinding=new XRWebGLBinding(A,y),y.getExtension("EXT_sRGB"),y.getExtension("OES_texture_half_float"),A.requestLightProbe().then(function(C){v.xrLightProbe=C,C.addEventListener("reflectionchange",v.updateXRCubeMap.bind(v))}).catch(function(C){console.warn("Lighting estimation not supported: "+C.message),console.warn('Are you missing: webxr="optionalFeatures: light-estimation;" from <a-scene>?')})},updateXRCubeMap:function(){var p=this.el.renderer,A=this.glBinding.getReflectionCubeMap(this.xrLightProbe);if(A){var v=p.properties.get(this.lightingEstimationTexture);v.__webglTexture=A,this.lightingEstimationTexture.needsPMREMUpdate=!0,this.el.object3D.environment=this.lightingEstimationTexture}},tick:function(){var p=this.el.object3D,A=this.el.renderer,v=this.el.frame;if(v&&this.xrLightProbe){var y=v.getLightEstimate(this.xrLightProbe);y&&m(y,this.probeLight.components.light.light,this.data.directionalLight&&this.data.directionalLight.components.light.light,this.data.directionalLight&&this.data.directionalLight.object3D.position)}this.needsVREnvironmentUpdate&&(p.environment=null,this.needsVREnvironmentUpdate=!1,this.cubeCamera.position.set(0,1.6,0),this.cubeCamera.update(A,p),p.environment=this.cubeRenderTarget.texture),this.needsLightProbeUpdate&&v&&(this.setupLightProbe(),this.needsLightProbeUpdate=!1)},remove:function(){this.el.object3D.environment=null,this.probeLight&&this.el.removeChild(this.probeLight)}})},"./src/components/scene/screenshot.js":(l,d,c)=>{var h=c("./src/core/component.js").registerComponent,m=c("./src/lib/three.js"),p=["attribute vec3 position;","attribute vec2 uv;","uniform mat4 projectionMatrix;","uniform mat4 modelViewMatrix;","varying vec2 vUv;","void main()  {","  vUv = vec2( 1.- uv.x, uv.y );","  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join(`
`),A=["precision mediump float;","uniform samplerCube map;","varying vec2 vUv;","#define M_PI 3.141592653589793238462643383279","void main() {","  vec2 uv = vUv;","  float longitude = uv.x * 2. * M_PI - M_PI + M_PI / 2.;","  float latitude = uv.y * M_PI;","  vec3 dir = vec3(","    - sin( longitude ) * sin( latitude ),","    cos( latitude ),","    - cos( longitude ) * sin( latitude )","  );","  normalize( dir );","  gl_FragColor = vec4( textureCube( map, dir ).rgb, 1.0 );","}"].join(`
`);l.exports.Component=h("screenshot",{schema:{width:{default:4096},height:{default:2048},camera:{type:"selector"}},init:function(){var v=this.el,y=this;v.renderer?x():v.addEventListener("render-target-loaded",x);function x(){var C=v.renderer.getContext();C&&(y.cubeMapSize=C.getParameter(C.MAX_CUBE_MAP_TEXTURE_SIZE),y.material=new m.RawShaderMaterial({uniforms:{map:{type:"t",value:null}},vertexShader:p,fragmentShader:A,side:m.DoubleSide}),y.quad=new m.Mesh(new m.PlaneGeometry(1,1),y.material),y.quad.visible=!1,y.camera=new m.OrthographicCamera(-.5,.5,.5,-.5,-1e4,1e4),y.canvas=document.createElement("canvas"),y.ctx=y.canvas.getContext("2d"),v.object3D.add(y.quad),y.onKeyDown=y.onKeyDown.bind(y))}},getRenderTarget:function(v,y){return new m.WebGLRenderTarget(v,y,{encoding:this.el.sceneEl.renderer.outputEncoding,minFilter:m.LinearFilter,magFilter:m.LinearFilter,wrapS:m.ClampToEdgeWrapping,wrapT:m.ClampToEdgeWrapping,format:m.RGBAFormat,type:m.UnsignedByteType})},resize:function(v,y){this.quad.scale.set(v,y,1),this.camera.left=-1*v/2,this.camera.right=v/2,this.camera.top=y/2,this.camera.bottom=-1*y/2,this.camera.updateProjectionMatrix(),this.canvas.width=v,this.canvas.height=y},play:function(){window.addEventListener("keydown",this.onKeyDown)},onKeyDown:function(v){var y=v.keyCode===83&&v.ctrlKey&&v.altKey;if(!(!this.data||!y)){var x=v.shiftKey?"equirectangular":"perspective";this.capture(x)}},setCapture:function(v){var y=this.el,x,C,g,b;return v==="perspective"?(this.quad.visible=!1,C=this.data.camera&&this.data.camera.components.camera.camera||y.camera,x={width:this.data.width,height:this.data.height}):(C=this.camera,b=new m.WebGLCubeRenderTarget(Math.min(this.cubeMapSize,2048),{format:m.RGBFormat,generateMipmaps:!0,minFilter:m.LinearMipmapLinearFilter,encoding:m.sRGBEncoding}),g=new m.CubeCamera(y.camera.near,y.camera.far,b),y.camera.getWorldPosition(g.position),y.camera.getWorldQuaternion(g.quaternion),g.update(y.renderer,y.object3D),this.quad.material.uniforms.map.value=g.renderTarget.texture,x={width:this.data.width,height:this.data.height},this.quad.visible=!0),{camera:C,size:x,projection:v}},capture:function(v){var y=this.el.renderer.xr.enabled,x=this.el.renderer,C;x.xr.enabled=!1,C=this.setCapture(v),this.renderCapture(C.camera,C.size,C.projection),this.saveCapture(),x.xr.enabled=y},getCanvas:function(v){var y=this.el.renderer.xr.enabled,x=this.el.renderer,C=this.setCapture(v);return x.xr.enabled=!1,this.renderCapture(C.camera,C.size,C.projection),x.xr.enabled=y,this.canvas},renderCapture:function(v,y,x){var C=this.el.renderer.autoClear,g=this.el,b,_,S,R=g.renderer;_=this.getRenderTarget(y.width,y.height),S=new Uint8Array(4*y.width*y.height),this.resize(y.width,y.height),R.autoClear=!0,R.clear(),R.setRenderTarget(_),R.render(g.object3D,v),R.autoClear=C,R.readRenderTargetPixels(_,0,0,y.width,y.height,S),R.setRenderTarget(null),x==="perspective"&&(S=this.flipPixelsVertically(S,y.width,y.height)),b=new ImageData(new Uint8ClampedArray(S),y.width,y.height),this.quad.visible=!1,this.ctx.putImageData(b,0,0)},flipPixelsVertically:function(v,y,x){for(var C=v.slice(0),g=0;g<y;++g)for(var b=0;b<x;++b)C[g*4+b*y*4]=v[g*4+(x-b)*y*4],C[g*4+1+b*y*4]=v[g*4+1+(x-b)*y*4],C[g*4+2+b*y*4]=v[g*4+2+(x-b)*y*4],C[g*4+3+b*y*4]=v[g*4+3+(x-b)*y*4];return C},saveCapture:function(){this.canvas.toBlob(function(v){var y="screenshot-"+document.title.toLowerCase()+"-"+Date.now()+".png",x=document.createElement("a"),C=URL.createObjectURL(v);x.href=C,x.setAttribute("download",y),x.innerHTML="downloading...",x.style.display="none",document.body.appendChild(x),setTimeout(function(){x.click(),document.body.removeChild(x)},1)},"image/png")}})},"./src/components/scene/stats.js":(l,d,c)=>{var h=c("./src/core/component.js").registerComponent,m=c("./vendor/rStats.js"),p=c("./src/utils/index.js");c("./vendor/rStats.extras.js"),c("./src/lib/rStatsAframe.js");var A=window.aframeStats,v=p.bind,y="a-hidden",x=window.threeStats;l.exports.Component=h("stats",{schema:{default:!0},init:function(){var g=this.el;p.getUrlParameter("stats")!=="false"&&(this.stats=C(g),this.statsEl=document.querySelector(".rs-base"),this.hideBound=v(this.hide,this),this.showBound=v(this.show,this),g.addEventListener("enter-vr",this.hideBound),g.addEventListener("exit-vr",this.showBound))},update:function(){if(this.stats)return this.data?this.show():this.hide()},remove:function(){this.el.removeEventListener("enter-vr",this.hideBound),this.el.removeEventListener("exit-vr",this.showBound),this.statsEl&&this.statsEl.parentNode.removeChild(this.statsEl)},tick:function(){var g=this.stats;g&&(g("rAF").tick(),g("FPS").frame(),g().update())},hide:function(){this.statsEl.classList.add(y)},show:function(){this.statsEl.classList.remove(y)}});function C(g){var b=new x(g.renderer),_=new A(g),S=g.isMobile?[]:[b,_];return new m({css:[],values:{fps:{caption:"fps",below:30}},groups:[{caption:"Framerate",values:["fps","raf"]}],plugins:S})}},"./src/components/scene/vr-mode-ui.js":(l,d,c)=>{var h=c("./src/core/component.js").registerComponent,m=c("./src/constants/index.js"),p=c("./src/utils/index.js"),A=p.bind,v="a-enter-vr",y="a-enter-ar",x="a-enter-vr-button",C="a-enter-ar-button",g="a-hidden",b="a-orientation-modal";l.exports.Component=h("vr-mode-ui",{dependencies:["canvas"],schema:{enabled:{default:!0},cardboardModeEnabled:{default:!1},enterVRButton:{default:""},enterARButton:{default:""}},init:function(){var O=this,D=this.el;p.getUrlParameter("ui")!=="false"&&(this.insideLoader=!1,this.enterVREl=null,this.enterAREl=null,this.orientationModalEl=null,this.bindMethods(),D.addEventListener("enter-vr",this.updateEnterInterfaces),D.addEventListener("exit-vr",this.updateEnterInterfaces),D.addEventListener("update-vr-devices",this.updateEnterInterfaces),window.addEventListener("message",function(L){L.data.type==="loaderReady"&&(O.insideLoader=!0,O.remove())}),window.addEventListener("orientationchange",this.toggleOrientationModalIfNeeded))},bindMethods:function(){this.onEnterVRButtonClick=A(this.onEnterVRButtonClick,this),this.onEnterARButtonClick=A(this.onEnterARButtonClick,this),this.onModalClick=A(this.onModalClick,this),this.toggleOrientationModalIfNeeded=A(this.toggleOrientationModalIfNeeded,this),this.updateEnterInterfaces=A(this.updateEnterInterfaces,this)},onModalClick:function(){this.el.exitVR()},onEnterVRButtonClick:function(){this.el.enterVR()},onEnterARButtonClick:function(){this.el.enterAR()},update:function(){var O=this.data,D=this.el;if(!O.enabled||this.insideLoader||p.getUrlParameter("ui")==="false")return this.remove();this.enterVREl||this.enterAREl||this.orientationModalEl||(O.enterVRButton?(this.enterVREl=document.querySelector(O.enterVRButton),this.enterVREl.addEventListener("click",this.onEnterVRButtonClick)):(this.enterVREl=_(this.onEnterVRButtonClick),D.appendChild(this.enterVREl)),O.enterARButton?(this.enterAREl=document.querySelector(O.enterARButton),this.enterAREl.addEventListener("click",this.onEnterARButtonClick)):(this.enterAREl=S(this.onEnterARButtonClick),D.appendChild(this.enterAREl)),this.orientationModalEl=R(this.onModalClick),D.appendChild(this.orientationModalEl),this.updateEnterInterfaces())},remove:function(){[this.enterVREl,this.enterAREl,this.orientationModalEl].forEach(function(O){O&&O.parentNode&&O.parentNode.removeChild(O)}),this.enterVREl=void 0,this.enterAREl=void 0,this.orientationModalEl=void 0},updateEnterInterfaces:function(){this.toggleEnterVRButtonIfNeeded(),this.toggleEnterARButtonIfNeeded(),this.toggleOrientationModalIfNeeded()},toggleEnterVRButtonIfNeeded:function(){var O=this.el;this.enterVREl&&(O.is("vr-mode")||(O.isMobile||p.device.isMobileDeviceRequestingDesktopSite())&&!this.data.cardboardModeEnabled&&!p.device.checkVRSupport()?this.enterVREl.classList.add(g):(p.device.checkVRSupport()||this.enterVREl.classList.add("fullscreen"),this.enterVREl.classList.remove(g)))},toggleEnterARButtonIfNeeded:function(){var O=this.el;this.enterAREl&&(O.is("vr-mode")||!p.device.checkARSupport()?this.enterAREl.classList.add(g):this.enterAREl.classList.remove(g))},toggleOrientationModalIfNeeded:function(){var O=this.el,D=this.orientationModalEl;!D||!O.isMobile||(!p.device.isLandscape()&&O.is("vr-mode")?D.classList.remove(g):D.classList.add(g))}});function _(O){var D,L;return L=document.createElement("div"),L.classList.add(v),L.setAttribute(m.AFRAME_INJECTED,""),D=document.createElement("button"),D.className=x,D.setAttribute("title","Enter VR mode with a headset or fullscreen without"),D.setAttribute(m.AFRAME_INJECTED,""),p.device.isMobile()&&P(D),L.appendChild(D),D.addEventListener("click",function(N){O(),N.stopPropagation()}),L}function S(O){var D,L;return L=document.createElement("div"),L.classList.add(y),L.setAttribute(m.AFRAME_INJECTED,""),D=document.createElement("button"),D.className=C,D.setAttribute("title","Enter AR mode with a headset or handheld device."),D.setAttribute(m.AFRAME_INJECTED,""),p.device.isMobile()&&P(D),L.appendChild(D),D.addEventListener("click",function(N){O(),N.stopPropagation()}),L}function R(O){var D=document.createElement("div");D.className=b,D.classList.add(g),D.setAttribute(m.AFRAME_INJECTED,"");var L=document.createElement("button");return L.setAttribute(m.AFRAME_INJECTED,""),L.innerHTML="Exit VR",L.addEventListener("click",O),D.appendChild(L),D}function P(O){O.addEventListener("touchstart",function(){O.classList.remove("resethover")}),O.addEventListener("touchend",function(){O.classList.add("resethover")})}},"./src/components/shadow.js":(l,d,c)=>{var h=c("./src/core/component.js"),m=c("./src/lib/three.js"),p=c("./src/utils/bind.js"),A=h.registerComponent;l.exports.Component=A("shadow",{schema:{cast:{default:!0},receive:{default:!0}},init:function(){this.onMeshChanged=p(this.update,this),this.el.addEventListener("object3dset",this.onMeshChanged),this.system.setShadowMapEnabled(!0)},update:function(){var v=this.data;this.updateDescendants(v.cast,v.receive)},remove:function(){var v=this.el;v.removeEventListener("object3dset",this.onMeshChanged),this.updateDescendants(!1,!1)},updateDescendants:function(v,y){var x=this.el.sceneEl;this.el.object3D.traverse(function(C){if(C instanceof m.Mesh&&(C.castShadow=v,C.receiveShadow=y,x.hasLoaded&&C.material))for(var g=Array.isArray(C.material)?C.material:[C.material],b=0;b<g.length;b++)g[b].needsUpdate=!0})}})},"./src/components/sound.js":(l,d,c)=>{var h=c("./src/core/component.js").registerComponent,m=c("./src/utils/debug.js"),p=c("./src/lib/three.js"),A=m("components:sound:warn");l.exports.Component=h("sound",{schema:{autoplay:{default:!1},distanceModel:{default:"inverse",oneOf:["linear","inverse","exponential"]},loop:{default:!1},maxDistance:{default:1e4},on:{default:""},poolSize:{default:1},positional:{default:!0},refDistance:{default:1},rolloffFactor:{default:1},src:{type:"audio"},volume:{default:1}},multiple:!0,init:function(){var v=this;this.listener=null,this.audioLoader=new p.AudioLoader,this.pool=new p.Group,this.loaded=!1,this.mustPlay=!1,this.playSoundBound=function(){v.playSound()}},update:function(v){var y=this.data,x,C,g=y.src!==v.src;if(g){if(!y.src)return;this.setupSound()}for(x=0;x<this.pool.children.length;x++)C=this.pool.children[x],y.positional&&(C.setDistanceModel(y.distanceModel),C.setMaxDistance(y.maxDistance),C.setRefDistance(y.refDistance),C.setRolloffFactor(y.rolloffFactor)),C.setLoop(y.loop),C.setVolume(y.volume),C.isPaused=!1;if(y.on!==v.on&&this.updateEventListener(v.on),g){var b=this;this.loaded=!1,this.audioLoader.load(y.src,function(_){for(x=0;x<b.pool.children.length;x++)C=b.pool.children[x],C.setBuffer(_);b.loaded=!0,p.Cache.remove(y.src),(b.data.autoplay||b.mustPlay)&&b.playSound(),b.el.emit("sound-loaded",b.evtDetail,!1)})}},pause:function(){this.stopSound(),this.removeEventListener()},play:function(){this.data.autoplay&&this.playSound(),this.updateEventListener()},remove:function(){var v,y;this.removeEventListener(),this.el.getObject3D(this.attrName)&&this.el.removeObject3D(this.attrName);try{for(v=0;v<this.pool.children.length;v++)y=this.pool.children[v],y.disconnect()}catch{A("Audio source not properly disconnected")}},updateEventListener:function(v){var y=this.el;v&&y.removeEventListener(v,this.playSoundBound),y.addEventListener(this.data.on,this.playSoundBound)},removeEventListener:function(){this.el.removeEventListener(this.data.on,this.playSoundBound)},setupSound:function(){var v=this.el,y,x=v.sceneEl,C=this,g;this.pool.children.length>0&&(this.stopSound(),v.removeObject3D("sound"));var b=this.listener=x.audioListener||new p.AudioListener;for(x.audioListener=b,x.camera&&x.camera.add(b),x.addEventListener("camera-set-active",function(_){_.detail.cameraEl.getObject3D("camera").add(b)}),this.pool=new p.Group,y=0;y<this.data.poolSize;y++)g=this.data.positional?new p.PositionalAudio(b):new p.Audio(b),this.pool.add(g);for(v.setObject3D(this.attrName,this.pool),y=0;y<this.pool.children.length;y++)g=this.pool.children[y],g.onEnded=function(){this.isPlaying=!1,C.el.emit("sound-ended",C.evtDetail,!1)}},pauseSound:function(){var v,y;for(this.isPlaying=!1,v=0;v<this.pool.children.length;v++)y=this.pool.children[v],!(!y.source||!y.source.buffer||!y.isPlaying||y.isPaused)&&(y.isPaused=!0,y.pause())},playSound:function(v){var y,x,C;if(!this.loaded){A("Sound not loaded yet. It will be played once it finished loading"),this.mustPlay=!0;return}for(y=!1,this.isPlaying=!0,x=0;x<this.pool.children.length;x++)if(C=this.pool.children[x],!C.isPlaying&&C.buffer&&!y){v&&v(C),C.play(),C.isPaused=!1,y=!0;continue}if(!y){A("All the sounds are playing. If you need to play more sounds simultaneously consider increasing the size of pool with the `poolSize` attribute.",this.el);return}this.mustPlay=!1},stopSound:function(){var v,y;for(this.isPlaying=!1,v=0;v<this.pool.children.length;v++){if(y=this.pool.children[v],!y.source||!y.source.buffer)return;y.stop()}}})},"./src/components/text.js":(l,d,c)=>{var h=c("./node_modules/three-bmfont-text/index.js"),m=c("./node_modules/load-bmfont/browser.js"),p=c("./src/core/component.js").registerComponent,A=c("./src/core/shader.js"),v=c("./src/lib/three.js"),y=c("./src/utils/index.js"),x=y.debug("components:text:error"),C=A.shaders,g=y.debug("components:text:warn"),b=1,_=16,S="https://cdn.aframe.io/fonts/",R={aileronsemibold:S+"Aileron-Semibold.fnt",dejavu:S+"DejaVu-sdf.fnt",exo2bold:S+"Exo2Bold.fnt",exo2semibold:S+"Exo2SemiBold.fnt",kelsonsans:S+"KelsonSans.fnt",monoid:S+"Monoid.fnt",mozillavr:S+"mozillavr.fnt",roboto:S+"Roboto-msdf.json",sourcecodepro:S+"SourceCodePro.fnt"},P=["roboto"],O="roboto";l.exports.FONTS=R;var D=new X,L={},N={},H=/^\w+:/;l.exports.Component=p("text",{multiple:!0,schema:{align:{type:"string",default:"left",oneOf:["left","right","center"]},alphaTest:{default:.5},anchor:{default:"center",oneOf:["left","right","center","align"]},baseline:{default:"center",oneOf:["top","center","bottom"]},color:{type:"color",default:"#FFF"},font:{type:"string",default:O},fontImage:{type:"string"},height:{type:"number"},letterSpacing:{type:"number",default:0},lineHeight:{type:"number"},negate:{type:"boolean",default:!0},opacity:{type:"number",default:1},shader:{default:"sdf",oneOf:C},side:{default:"front",oneOf:["front","back","double"]},tabSize:{default:4},transparent:{default:!0},value:{type:"string"},whiteSpace:{default:"normal",oneOf:["normal","pre","nowrap"]},width:{type:"number"},wrapCount:{type:"number",default:40},wrapPixels:{type:"number"},xOffset:{type:"number",default:0},yOffset:{type:"number",default:0},zOffset:{type:"number",default:.001}},init:function(){this.shaderData={},this.geometry=h(),this.createOrUpdateMaterial()},update:function(W){var ce=this.data,he=this.currentFont;if(N[ce.font]?this.texture=N[ce.font]:(this.texture=N[ce.font]=new v.Texture,this.texture.anisotropy=_),this.createOrUpdateMaterial(),W.font!==ce.font){this.updateFont();return}he&&(this.updateGeometry(this.geometry,he),this.updateLayout())},remove:function(){this.geometry.dispose(),this.geometry=null,this.el.removeObject3D(this.attrName),this.material.dispose(),this.material=null,this.texture.dispose(),this.texture=null,this.shaderObject&&delete this.shaderObject},createOrUpdateMaterial:function(){var W=this.data,ce,he=this.material,xe,ve=this.shaderData,Fe;if(Fe=W.shader,P.indexOf(W.font)!==-1||W.font.indexOf("-msdf.")>=0?Fe="msdf":W.font in R&&P.indexOf(W.font)===-1&&(Fe="sdf"),ce=(this.shaderObject&&this.shaderObject.name)!==Fe,ve.alphaTest=W.alphaTest,ve.color=W.color,ve.map=this.texture,ve.opacity=W.opacity,ve.side=J(W.side),ve.transparent=W.transparent,ve.negate=W.negate,!ce){this.shaderObject.update(ve),he.transparent=ve.transparent,he.side=ve.side;return}xe=ae(this.el,Fe,ve),this.material=xe.material,this.shaderObject=xe.shader,this.material.side=ve.side,this.mesh&&(this.mesh.material=this.material)},updateFont:function(){var W=this.data,ce=this.el,he,xe=this.geometry,ve=this;W.font||g("No font specified. Using the default font."),this.mesh&&(this.mesh.visible=!1),he=this.lookupFont(W.font||O)||W.font,D.get(he,function(){return K(he,W.yOffset)}).then(function(je){var rt;if(je.pages.length!==1)throw new Error("Currently only single-page bitmap fonts are supported.");L[he]||(je.widthFactor=L[je]=ne(je)),ve.currentFont=je,rt=ve.getFontImageSrc(),D.get(rt,function(){return se(rt)}).then(function(He){var Ot=ve.texture;Ot&&(Ot.image=He,Ot.needsUpdate=!0,N[W.font]=Ot,ve.texture=Ot,ve.initMesh(),ve.currentFont=je,ve.updateGeometry(xe,je),ve.updateLayout(),ve.mesh.visible=!0,ce.emit("textfontset",{font:W.font,fontObj:je}))}).catch(function(He){x(He.message),x(He.stack)})}).catch(function(Fe){x(Fe.message),x(Fe.stack)})},initMesh:function(){this.mesh||(this.mesh=new v.Mesh(this.geometry,this.material),this.el.setObject3D(this.attrName,this.mesh))},getFontImageSrc:function(){if(this.data.fontImage)return this.data.fontImage;var W=this.lookupFont(this.data.font||O)||this.data.font,ce=this.currentFont.pages[0];return ce.match(H)&&ce.indexOf("http")!==0?W.replace(/(\.fnt)|(\.json)/,".png"):v.LoaderUtils.extractUrlBase(W)+ce},updateLayout:function(){var W,ce,he=this.el,xe=this.data,ve=this.geometry,Fe,je,rt,He=this.mesh,Ot,xt,gt,It,ct;if(!(!He||!ve.layout)){if(Fe=he.getAttribute("geometry"),gt=xe.width||Fe&&Fe.width||b,Ot=ee(xe.wrapPixels,xe.wrapCount,this.currentFont.widthFactor),xt=gt/Ot,rt=ve.layout,je=xt*(rt.height+rt.descender),Fe&&Fe.primitive==="plane"&&(Fe.width||he.setAttribute("geometry","width",gt),Fe.height||he.setAttribute("geometry","height",je)),W=xe.anchor==="align"?xe.align:xe.anchor,W==="left")It=0;else if(W==="right")It=-1*rt.width;else if(W==="center")It=-1*rt.width/2;else throw new TypeError("Invalid text.anchor property value",W);if(ce=xe.baseline,ce==="bottom")ct=0;else if(ce==="top")ct=-1*rt.height+rt.ascender;else if(ce==="center")ct=-1*rt.height/2;else throw new TypeError("Invalid text.baseline property value",ce);He.position.x=It*xt+xe.xOffset,He.position.y=ct*xt,He.position.z=xe.zOffset,He.scale.set(xt,-1*xt,xt)}},lookupFont:function(W){return R[W]},updateGeometry:function(){var W={},ce={},he=/\\n/g,xe=/\\t/g;return function(ve,Fe){var je=this.data;ce.font=Fe,ce.lineHeight=je.lineHeight&&isFinite(je.lineHeight)?je.lineHeight:Fe.common.lineHeight,ce.text=je.value.toString().replace(he,`
`).replace(xe,"	"),ce.width=ee(je.wrapPixels,je.wrapCount,Fe.widthFactor),ve.update(y.extend(W,je,ce))}}()});function J(W){switch(W){case"back":return v.FrontSide;case"double":return v.DoubleSide;default:return v.BackSide}}function K(W,ce){return new Promise(function(he,xe){m(W,function(ve,Fe){if(ve){x("Error loading font",W),xe(ve);return}W.indexOf("/Roboto-msdf.json")>=0&&(ce=30),ce&&Fe.chars.map(function(rt){rt.yoffset+=ce}),he(Fe)})})}function se(W){return new Promise(function(ce,he){new v.ImageLoader().load(W,function(xe){ce(xe)},void 0,function(){x("Error loading font image",W),he(null)})})}function ae(W,ce,he){var xe,ve;return ve=new C[ce].Shader,ve.el=W,ve.init(he),ve.update(he),xe=ve.material,xe.transparent=he.transparent,{material:xe,shader:ve}}function ee(W,ce,he){return W||(.5+ce)*he}function ne(W){var ce=0,he=0,xe=0;return W.chars.map(function(ve){ce+=ve.xadvance,ve.id>=48&&ve.id<=57&&(xe++,he+=ve.xadvance)}),xe?he/xe:ce/W.chars.length}function X(){var W=this.cache={};this.get=function(ce,he){return ce in W||(W[ce]=he()),W[ce]}}},"./src/components/tracked-controls-webvr.js":(l,d,c)=>{var h=c("./src/core/component.js").registerComponent,m=c("./src/utils/tracked-controls.js"),p=c("./src/constants/index.js").DEFAULT_CAMERA_HEIGHT,A=c("./src/lib/three.js"),v=c("./src/constants/index.js").DEFAULT_HANDEDNESS,y={x:.175,y:-.3,z:-.03},x={x:0,y:0,z:-.175},C={touches:[]},g={AXISMOVE:"axismove",BUTTONCHANGED:"buttonchanged",BUTTONDOWN:"buttondown",BUTTONUP:"buttonup",TOUCHSTART:"touchstart",TOUCHEND:"touchend"};l.exports.Component=h("tracked-controls-webvr",{schema:{autoHide:{default:!0},controller:{default:0},id:{type:"string",default:""},hand:{type:"string",default:""},idPrefix:{type:"string",default:""},orientationOffset:{type:"vec3"},armModel:{default:!1},headElement:{type:"selector"}},init:function(){this.axis=this.el.components["tracked-controls"].axis=[0,0,0],this.buttonStates=this.el.components["tracked-controls"].buttonStates={},this.changedAxes=[],this.targetControllerNumber=this.data.controller,this.axisMoveEventDetail={axis:this.axis,changed:this.changedAxes},this.deltaControllerPosition=new A.Vector3,this.controllerQuaternion=new A.Quaternion,this.controllerEuler=new A.Euler,this.updateGamepad(),this.buttonEventDetails={}},tick:function(b,_){var S=this.el.getObject3D("mesh");S&&S.update&&S.update(_/1e3),this.updateGamepad(),this.updatePose(),this.updateButtons()},defaultUserHeight:function(){return p},getHeadElement:function(){return this.data.headElement||this.el.sceneEl.camera.el},updateGamepad:function(){var b=this.data,_=m.findMatchingControllerWebVR(this.system.controllers,b.id,b.idPrefix,b.hand,b.controller);this.controller=_,this.el.components["tracked-controls"].controller=_,this.data.autoHide&&(this.el.object3D.visible=!!this.controller)},applyArmModel:function(b){var _=this.controller,S=this.controllerEuler,R=this.controllerQuaternion,P=this.deltaControllerPosition,O,D,L,N,H;D=this.getHeadElement(),L=D.object3D,H=this.defaultUserHeight(),N=_.pose,O=(_?_.hand:void 0)||v,b.copy(L.position),P.set(y.x*(O==="left"?-1:O==="right"?1:0),y.y,y.z),P.multiplyScalar(H),P.applyAxisAngle(L.up,L.rotation.y),b.add(P),P.set(x.x,x.y,x.z),P.multiplyScalar(H),N.orientation?R.fromArray(N.orientation):R.copy(L.quaternion),S.setFromQuaternion(R),S.set(S.x,S.y,0),P.applyEuler(S),b.add(P)},updatePose:function(){var b=this.controller,_=this.data,S=this.el.object3D,R,P=this.system.vrDisplay,O;b&&(R=b.pose,R.position?S.position.fromArray(R.position):_.armModel&&this.applyArmModel(S.position),R.orientation&&S.quaternion.fromArray(R.orientation),P&&R.position&&(O=this.el.sceneEl.renderer.xr.getStandingMatrix(),S.matrix.compose(S.position,S.quaternion,S.scale),S.matrix.multiplyMatrices(O,S.matrix),S.matrix.decompose(S.position,S.quaternion,S.scale)),S.rotateX(this.data.orientationOffset.x*A.MathUtils.DEG2RAD),S.rotateY(this.data.orientationOffset.y*A.MathUtils.DEG2RAD),S.rotateZ(this.data.orientationOffset.z*A.MathUtils.DEG2RAD))},updateButtons:function(){var b,_=this.controller,S;if(_){for(S=0;S<_.buttons.length;++S)this.buttonStates[S]||(this.buttonStates[S]={pressed:!1,touched:!1,value:0}),this.buttonEventDetails[S]||(this.buttonEventDetails[S]={id:S,state:this.buttonStates[S]}),b=_.buttons[S],this.handleButton(S,b);this.handleAxes()}},handleButton:function(b,_){var S;return S=this.handlePress(b,_)|this.handleTouch(b,_)|this.handleValue(b,_),S?(this.el.emit(g.BUTTONCHANGED,this.buttonEventDetails[b],!1),!0):!1},handleAxes:function(){var b=!1,_=this.controller.axes,S,R=this.axis,P=this.changedAxes;for(this.changedAxes.splice(0,this.changedAxes.length),S=0;S<_.length;++S)P.push(R[S]!==_[S]),P[S]&&(b=!0);if(!b)return!1;for(this.axis.splice(0,this.axis.length),S=0;S<_.length;S++)this.axis.push(_[S]);return this.el.emit(g.AXISMOVE,this.axisMoveEventDetail,!1),!0},handlePress:function(b,_){var S,R=this.buttonStates[b];return _.pressed===R.pressed?!1:(S=_.pressed?g.BUTTONDOWN:g.BUTTONUP,this.el.emit(S,this.buttonEventDetails[b],!1),R.pressed=_.pressed,!0)},handleTouch:function(b,_){var S,R=this.buttonStates[b];return _.touched===R.touched?!1:(S=_.touched?g.TOUCHSTART:g.TOUCHEND,this.el.emit(S,this.buttonEventDetails[b],!1,C),R.touched=_.touched,!0)},handleValue:function(b,_){var S=this.buttonStates[b];return _.value===S.value?!1:(S.value=_.value,!0)}})},"./src/components/tracked-controls-webxr.js":(l,d,c)=>{var h=c("./src/utils/tracked-controls.js"),m=c("./src/core/component.js").registerComponent,p={AXISMOVE:"axismove",BUTTONCHANGED:"buttonchanged",BUTTONDOWN:"buttondown",BUTTONUP:"buttonup",TOUCHSTART:"touchstart",TOUCHEND:"touchend"};l.exports.Component=m("tracked-controls-webxr",{schema:{id:{type:"string",default:""},hand:{type:"string",default:""},handTrackingEnabled:{default:!1},index:{type:"int",default:-1},iterateControllerProfiles:{default:!1},space:{type:"string",oneOf:["targetRaySpace","gripSpace"],default:"gripSpace"}},init:function(){this.updateController=this.updateController.bind(this),this.buttonEventDetails={},this.buttonStates=this.el.components["tracked-controls"].buttonStates={},this.axis=this.el.components["tracked-controls"].axis=[0,0,0],this.changedAxes=[],this.axisMoveEventDetail={axis:this.axis,changed:this.changedAxes}},update:function(){this.updateController()},play:function(){var A=this.el.sceneEl;this.updateController(),A.addEventListener("controllersupdated",this.updateController)},pause:function(){var A=this.el.sceneEl;A.removeEventListener("controllersupdated",this.updateController)},isControllerPresent:function(A){return!(!this.controller||this.controller.gamepad||A.inputSource.handedness!=="none"&&A.inputSource.handedness!==this.data.hand)},updateController:function(){this.controller=h.findMatchingControllerWebXR(this.system.controllers,this.data.id,this.data.hand,this.data.index,this.data.iterateControllerProfiles,this.data.handTrackingEnabled),this.el.components["tracked-controls"].controller=this.controller,this.data.autoHide&&(this.el.object3D.visible=!!this.controller)},tick:function(){var A=this.el.sceneEl,v=this.controller,y=A.frame;!v||!A.frame||!this.system.referenceSpace||v.hand||(this.pose=y.getPose(v[this.data.space],this.system.referenceSpace),this.updatePose(),this.updateButtons())},updatePose:function(){var A=this.el.object3D,v=this.pose;v&&(A.matrix.elements=v.transform.matrix,A.matrix.decompose(A.position,A.rotation,A.scale))},updateButtons:function(){var A,v,y=this.controller,x;if(!(!y||!y.gamepad)){for(x=y.gamepad,v=0;v<x.buttons.length;++v)this.buttonStates[v]||(this.buttonStates[v]={pressed:!1,touched:!1,value:0}),this.buttonEventDetails[v]||(this.buttonEventDetails[v]={id:v,state:this.buttonStates[v]}),A=x.buttons[v],this.handleButton(v,A);this.handleAxes()}},handleButton:function(A,v){var y;return y=this.handlePress(A,v)|this.handleTouch(A,v)|this.handleValue(A,v),y?(this.el.emit(p.BUTTONCHANGED,this.buttonEventDetails[A],!1),!0):!1},handleAxes:function(){var A=!1,v=this.controller.gamepad.axes,y,x=this.axis,C=this.changedAxes;for(this.changedAxes.splice(0,this.changedAxes.length),y=0;y<v.length;++y)C.push(x[y]!==v[y]),C[y]&&(A=!0);if(!A)return!1;for(this.axis.splice(0,this.axis.length),y=0;y<v.length;y++)this.axis.push(v[y]);return this.el.emit(p.AXISMOVE,this.axisMoveEventDetail,!1),!0},handlePress:function(A,v){var y,x=this.buttonStates[A];return v.pressed===x.pressed?!1:(y=v.pressed?p.BUTTONDOWN:p.BUTTONUP,this.el.emit(y,this.buttonEventDetails[A],!1),x.pressed=v.pressed,!0)},handleTouch:function(A,v){var y,x=this.buttonStates[A];return v.touched===x.touched?!1:(y=v.touched?p.TOUCHSTART:p.TOUCHEND,this.el.emit(y,this.buttonEventDetails[A],!1),x.touched=v.touched,!0)},handleValue:function(A,v){var y=this.buttonStates[A];return v.value===y.value?!1:(y.value=v.value,!0)}})},"./src/components/tracked-controls.js":(l,d,c)=>{var h=c("./src/core/component.js").registerComponent;l.exports.Component=h("tracked-controls",{schema:{autoHide:{default:!0},controller:{default:-1},id:{type:"string",default:""},hand:{type:"string",default:""},idPrefix:{type:"string",default:""},handTrackingEnabled:{default:!1},orientationOffset:{type:"vec3"},armModel:{default:!1},headElement:{type:"selector"},iterateControllerProfiles:{default:!1},space:{type:"string",oneOf:["targetRaySpace","gripSpace"],default:"targetRaySpace"}},update:function(){var m=this.data,p=this.el;p.sceneEl.hasWebXR?p.setAttribute("tracked-controls-webxr",{id:m.id,hand:m.hand,index:m.controller,iterateControllerProfiles:m.iterateControllerProfiles,handTrackingEnabled:m.handTrackingEnabled,space:m.space}):p.setAttribute("tracked-controls-webvr",m)}})},"./src/components/valve-index-controls.js":(l,d,c)=>{var h=c("./src/core/component.js").registerComponent,m=c("./src/utils/bind.js"),p=c("./src/lib/three.js"),A=c("./src/utils/tracked-controls.js"),v=A.checkControllerPresentAndSetup,y=A.emitIfAxesChanged,x=A.onButtonEvent,C="https://cdn.aframe.io/controllers/valve/index/valve-index-",g={left:C+"left.glb",right:C+"right.glb"},b="valve",_=c("./src/utils/index.js").device.isWebXRAvailable,S={left:{x:-.00023692678902063457,y:.04724540367838371,z:-.061959880395271096},right:{x:.002471558599671131,y:.055765208987076195,z:-.061068168708348844}},R={left:{x:0,y:-.05,z:.06},right:{x:0,y:-.05,z:.06}},P={left:{_x:.692295102620542,_y:-.0627618864318427,_z:-.06265893149611756,_order:"XYZ"},right:{_x:.6484021229942998,_y:-.032563619881892894,_z:-.1327973171917482,_order:"XYZ"}},O={left:{_x:Math.PI/3,_y:0,_z:0,_order:"XYZ"},right:{_x:Math.PI/3,_y:0,_z:0,_order:"XYZ"}},D=_?O:P,L=_?R:S;l.exports.Component=h("valve-index-controls",{schema:{hand:{default:"left"},buttonColor:{type:"color",default:"#FAFAFA"},buttonHighlightColor:{type:"color",default:"#22D1EE"},model:{default:!0},orientationOffset:{type:"vec3"}},mapping:{axes:{trackpad:[0,1],thumbstick:[2,3]},buttons:["trigger","grip","trackpad","thumbstick","abutton"]},init:function(){var N=this;this.controllerPresent=!1,this.lastControllerCheck=0,this.onButtonChanged=m(this.onButtonChanged,this),this.onButtonDown=function(H){x(H.detail.id,"down",N)},this.onButtonUp=function(H){x(H.detail.id,"up",N)},this.onButtonTouchEnd=function(H){x(H.detail.id,"touchend",N)},this.onButtonTouchStart=function(H){x(H.detail.id,"touchstart",N)},this.previousButtonValues={},this.rendererSystem=this.el.sceneEl.systems.renderer,this.bindMethods()},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=m(this.onModelLoaded,this),this.onControllersUpdate=m(this.onControllersUpdate,this),this.checkIfControllerPresent=m(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=m(this.removeControllersUpdateListener,this),this.onAxisMoved=m(this.onAxisMoved,this)},addEventListeners:function(){var N=this.el;N.addEventListener("buttonchanged",this.onButtonChanged),N.addEventListener("buttondown",this.onButtonDown),N.addEventListener("buttonup",this.onButtonUp),N.addEventListener("touchend",this.onButtonTouchEnd),N.addEventListener("touchstart",this.onButtonTouchStart),N.addEventListener("model-loaded",this.onModelLoaded),N.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var N=this.el;N.removeEventListener("buttonchanged",this.onButtonChanged),N.removeEventListener("buttondown",this.onButtonDown),N.removeEventListener("buttonup",this.onButtonUp),N.removeEventListener("touchend",this.onButtonTouchEnd),N.removeEventListener("touchstart",this.onButtonTouchStart),N.removeEventListener("model-loaded",this.onModelLoaded),N.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var N=this.data,H=N.hand==="right"?0:N.hand==="left"?1:2;v(this,b,{index:H,iterateControllerProfiles:!0,hand:N.hand})},injectTrackedControls:function(){var N=this.el,H=this.data;N.setAttribute("tracked-controls",{idPrefix:b,controller:H.hand==="right"?1:H.hand==="left"?0:2,hand:H.hand,orientationOffset:H.orientationOffset}),this.loadModel()},loadModel:function(){var N=this.data;N.model&&this.el.setAttribute("gltf-model",""+g[N.hand])},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(N){var H=this.mapping.buttons[N.detail.id],J=this.buttonMeshes,K;H&&(H==="trigger"&&(K=N.detail.state.value,J&&J.trigger&&(J.trigger.rotation.x=this.triggerOriginalRotationX-K*(Math.PI/40))),this.el.emit(H+"changed",N.detail.state))},onModelLoaded:function(N){var H,J=N.detail.model,K=this;this.data.model&&(H=this.buttonMeshes={},H.grip={left:J.getObjectByName("leftgrip"),right:J.getObjectByName("rightgrip")},H.menu=J.getObjectByName("menubutton"),H.system=J.getObjectByName("systembutton"),H.trackpad=J.getObjectByName("touchpad"),H.trigger=J.getObjectByName("trigger"),this.triggerOriginalRotationX=H.trigger.rotation.x,Object.keys(H).forEach(function(se){K.setButtonColor(se,K.data.buttonColor)}),J.position.copy(L[this.data.hand]),J.rotation.copy(D[this.data.hand]),this.el.emit("controllermodelready",{name:"valve-index-controlls",model:this.data.model,rayOrigin:new p.Vector3(0,0,0)}))},onAxisMoved:function(N){y(this,this.mapping.axes,N)},updateModel:function(N,H){var J,K;this.data.model&&(K=H.indexOf("touch")!==-1,!K&&(J=H==="up"?this.data.buttonColor:this.data.buttonHighlightColor,this.setButtonColor(N,J)))},setButtonColor:function(N,H){}})},"./src/components/visible.js":(l,d,c)=>{var h=c("./src/core/component.js").registerComponent;l.exports.Component=h("visible",{schema:{default:!0},update:function(){this.el.object3D.visible=this.data}})},"./src/components/vive-controls.js":(l,d,c)=>{var h=c("./src/core/component.js").registerComponent,m=c("./src/utils/bind.js"),p=c("./src/utils/tracked-controls.js"),A=p.checkControllerPresentAndSetup,v=p.emitIfAxesChanged,y=p.onButtonEvent,x="https://cdn.aframe.io/controllers/vive/vr_controller_vive.obj",C="https://cdn.aframe.io/controllers/vive/vr_controller_vive.mtl",g=c("./src/utils/index.js").device.isWebXRAvailable,b="htc-vive",_="OpenVR ",S=g?b:_,R={axes:{trackpad:[0,1]},buttons:["trackpad","trigger","grip","menu","system"]},P={axes:{thumbstick:[0,1]},buttons:["trigger","grip","trackpad","none","menu"]},O=g?P:R;l.exports.Component=h("vive-controls",{schema:{hand:{default:"left"},buttonColor:{type:"color",default:"#FAFAFA"},buttonHighlightColor:{type:"color",default:"#22D1EE"},model:{default:!0},orientationOffset:{type:"vec3"}},mapping:O,init:function(){var D=this;this.controllerPresent=!1,this.lastControllerCheck=0,this.onButtonChanged=m(this.onButtonChanged,this),this.onButtonDown=function(L){y(L.detail.id,"down",D)},this.onButtonUp=function(L){y(L.detail.id,"up",D)},this.onButtonTouchEnd=function(L){y(L.detail.id,"touchend",D)},this.onButtonTouchStart=function(L){y(L.detail.id,"touchstart",D)},this.previousButtonValues={},this.rendererSystem=this.el.sceneEl.systems.renderer,this.bindMethods()},update:function(){var D=this.data;this.controllerIndex=D.hand==="right"?0:D.hand==="left"?1:2},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=m(this.onModelLoaded,this),this.onControllersUpdate=m(this.onControllersUpdate,this),this.checkIfControllerPresent=m(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=m(this.removeControllersUpdateListener,this),this.onAxisMoved=m(this.onAxisMoved,this)},addEventListeners:function(){var D=this.el;D.addEventListener("buttonchanged",this.onButtonChanged),D.addEventListener("buttondown",this.onButtonDown),D.addEventListener("buttonup",this.onButtonUp),D.addEventListener("touchend",this.onButtonTouchEnd),D.addEventListener("touchstart",this.onButtonTouchStart),D.addEventListener("model-loaded",this.onModelLoaded),D.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var D=this.el;D.removeEventListener("buttonchanged",this.onButtonChanged),D.removeEventListener("buttondown",this.onButtonDown),D.removeEventListener("buttonup",this.onButtonUp),D.removeEventListener("touchend",this.onButtonTouchEnd),D.removeEventListener("touchstart",this.onButtonTouchStart),D.removeEventListener("model-loaded",this.onModelLoaded),D.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var D=this.data;A(this,S,{index:this.controllerIndex,hand:D.hand})},injectTrackedControls:function(){var D=this.el,L=this.data;D.setAttribute("tracked-controls",{idPrefix:S,hand:L.hand,controller:this.controllerIndex,orientationOffset:L.orientationOffset}),this.data.model&&this.el.setAttribute("obj-model",{obj:x,mtl:C})},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(D){var L=this.mapping.buttons[D.detail.id],N=this.buttonMeshes,H;L&&(L==="trigger"&&(H=D.detail.state.value,N&&N.trigger&&(N.trigger.rotation.x=-H*(Math.PI/12))),this.el.emit(L+"changed",D.detail.state))},onModelLoaded:function(D){var L,N=D.detail.model,H=this;this.data.model&&(L=this.buttonMeshes={},L.grip={left:N.getObjectByName("leftgrip"),right:N.getObjectByName("rightgrip")},L.menu=N.getObjectByName("menubutton"),L.system=N.getObjectByName("systembutton"),L.trackpad=N.getObjectByName("touchpad"),L.trigger=N.getObjectByName("trigger"),Object.keys(L).forEach(function(J){H.setButtonColor(J,H.data.buttonColor)}),N.position.set(0,-.015,.04))},onAxisMoved:function(D){v(this,this.mapping.axes,D)},updateModel:function(D,L){var N,H;this.data.model&&(H=L.indexOf("touch")!==-1,!H&&(N=L==="up"?this.data.buttonColor:this.data.buttonHighlightColor,this.setButtonColor(D,N)))},setButtonColor:function(D,L){var N=this.buttonMeshes,H=this.rendererSystem;if(N){if(D==="grip"){N.grip.left.material.color.set(L),N.grip.right.material.color.set(L),H.applyColorCorrection(N.grip.left.material.color),H.applyColorCorrection(N.grip.right.material.color);return}N[D].material.color.set(L),H.applyColorCorrection(N[D].material.color)}}})},"./src/components/vive-focus-controls.js":(l,d,c)=>{var h=c("./src/core/component.js").registerComponent,m=c("./src/utils/bind.js"),p=c("./src/utils/tracked-controls.js"),A=p.checkControllerPresentAndSetup,v=p.emitIfAxesChanged,y=p.onButtonEvent,x="HTC Vive Focus",C="https://cdn.aframe.io/controllers/vive/focus-controller/focus-controller.gltf";l.exports.Component=h("vive-focus-controls",{schema:{hand:{default:""},buttonTouchedColor:{type:"color",default:"#BBBBBB"},buttonHighlightColor:{type:"color",default:"#7A7A7A"},model:{default:!0},orientationOffset:{type:"vec3"},armModel:{default:!0}},mapping:{axes:{trackpad:[0,1]},buttons:["trackpad","trigger"]},bindMethods:function(){this.onModelLoaded=m(this.onModelLoaded,this),this.onControllersUpdate=m(this.onControllersUpdate,this),this.checkIfControllerPresent=m(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=m(this.removeControllersUpdateListener,this),this.onAxisMoved=m(this.onAxisMoved,this)},init:function(){var g=this;this.onButtonChanged=m(this.onButtonChanged,this),this.onButtonDown=function(b){y(b.detail.id,"down",g)},this.onButtonUp=function(b){y(b.detail.id,"up",g)},this.onButtonTouchStart=function(b){y(b.detail.id,"touchstart",g)},this.onButtonTouchEnd=function(b){y(b.detail.id,"touchend",g)},this.controllerPresent=!1,this.lastControllerCheck=0,this.bindMethods()},addEventListeners:function(){var g=this.el;g.addEventListener("buttonchanged",this.onButtonChanged),g.addEventListener("buttondown",this.onButtonDown),g.addEventListener("buttonup",this.onButtonUp),g.addEventListener("touchstart",this.onButtonTouchStart),g.addEventListener("touchend",this.onButtonTouchEnd),g.addEventListener("model-loaded",this.onModelLoaded),g.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0,this.addControllersUpdateListener()},removeEventListeners:function(){var g=this.el;g.removeEventListener("buttonchanged",this.onButtonChanged),g.removeEventListener("buttondown",this.onButtonDown),g.removeEventListener("buttonup",this.onButtonUp),g.removeEventListener("touchstart",this.onButtonTouchStart),g.removeEventListener("touchend",this.onButtonTouchEnd),g.removeEventListener("model-loaded",this.onModelLoaded),g.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1,this.removeControllersUpdateListener()},checkIfControllerPresent:function(){A(this,x,this.data.hand?{hand:this.data.hand}:{})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var g=this.el,b=this.data;g.setAttribute("tracked-controls",{armModel:b.armModel,idPrefix:x,orientationOffset:b.orientationOffset}),this.data.model&&this.el.setAttribute("gltf-model",C)},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelLoaded:function(g){var b=g.detail.model,_;this.data.model&&(_=this.buttonMeshes={},_.trigger=b.getObjectByName("BumperKey"),_.triggerPressed=b.getObjectByName("BumperKey_Press"),_.triggerPressed&&(_.triggerPressed.visible=!1),_.trackpad=b.getObjectByName("TouchPad"),_.trackpadPressed=b.getObjectByName("TouchPad_Press"),_.trackpadPressed&&(_.trackpadPressed.visible=!1))},onButtonChanged:function(g){var b=this.mapping.buttons[g.detail.id];b&&this.el.emit(b+"changed",g.detail.state)},onAxisMoved:function(g){v(this,this.mapping.axes,g)},updateModel:function(g,b){this.data.model&&this.updateButtonModel(g,b)},updateButtonModel:function(g,b){var _=this.buttonMeshes,S=g+"Pressed";if(!(!_||!_[g]||!_[S])){var R;switch(b){case"down":R=this.data.buttonHighlightColor;break;case"touchstart":R=this.data.buttonTouchedColor;break}R&&_[S].material.color.set(R),_[S].visible=!!R,_[g].visible=!R}}})},"./src/components/wasd-controls.js":(l,d,c)=>{var h=c("./src/constants/index.js").keyboardevent.KEYCODE_TO_CODE,m=c("./src/core/component.js").registerComponent,p=c("./src/lib/three.js"),A=c("./src/utils/index.js"),v=A.bind,y=A.shouldCaptureKeyEvent,x=1e-5,C=.2,g=["KeyW","KeyA","KeyS","KeyD","ArrowUp","ArrowLeft","ArrowRight","ArrowDown"];l.exports.Component=m("wasd-controls",{schema:{acceleration:{default:65},adAxis:{default:"x",oneOf:["x","y","z"]},adEnabled:{default:!0},adInverted:{default:!1},enabled:{default:!0},fly:{default:!1},wsAxis:{default:"z",oneOf:["x","y","z"]},wsEnabled:{default:!0},wsInverted:{default:!1}},init:function(){this.keys={},this.easing=1.1,this.velocity=new p.Vector3,this.onBlur=v(this.onBlur,this),this.onContextMenu=v(this.onContextMenu,this),this.onFocus=v(this.onFocus,this),this.onKeyDown=v(this.onKeyDown,this),this.onKeyUp=v(this.onKeyUp,this),this.onVisibilityChange=v(this.onVisibilityChange,this),this.attachVisibilityEventListeners()},tick:function(_,S){var R=this.data,P=this.el,O=this.velocity;!O[R.adAxis]&&!O[R.wsAxis]&&b(this.keys)||(S=S/1e3,this.updateVelocity(S),!(!O[R.adAxis]&&!O[R.wsAxis])&&P.object3D.position.add(this.getMovementVector(S)))},update:function(_){_.adAxis!==this.data.adAxis&&(this.velocity[_.adAxis]=0),_.wsAxis!==this.data.wsAxis&&(this.velocity[_.wsAxis]=0)},remove:function(){this.removeKeyEventListeners(),this.removeVisibilityEventListeners()},play:function(){this.attachKeyEventListeners()},pause:function(){this.keys={},this.removeKeyEventListeners()},updateVelocity:function(_){var S,R,P,O=this.data,D=this.keys,L=this.velocity,N,H;if(R=O.adAxis,N=O.wsAxis,_>C){L[R]=0,L[N]=0;return}var J=Math.pow(1/this.easing,_*60);L[R]!==0&&(L[R]=L[R]*J),L[N]!==0&&(L[N]=L[N]*J),Math.abs(L[R])<x&&(L[R]=0),Math.abs(L[N])<x&&(L[N]=0),O.enabled&&(S=O.acceleration,O.adEnabled&&(P=O.adInverted?-1:1,(D.KeyA||D.ArrowLeft)&&(L[R]-=P*S*_),(D.KeyD||D.ArrowRight)&&(L[R]+=P*S*_)),O.wsEnabled&&(H=O.wsInverted?-1:1,(D.KeyW||D.ArrowUp)&&(L[N]-=H*S*_),(D.KeyS||D.ArrowDown)&&(L[N]+=H*S*_)))},getMovementVector:function(){var _=new p.Vector3(0,0,0),S=new p.Euler(0,0,0,"YXZ");return function(R){var P=this.el.getAttribute("rotation"),O=this.velocity,D;return _.copy(O),_.multiplyScalar(R),P&&(D=this.data.fly?P.x:0,S.set(p.MathUtils.degToRad(D),p.MathUtils.degToRad(P.y),0),_.applyEuler(S)),_}}(),attachVisibilityEventListeners:function(){window.oncontextmenu=this.onContextMenu,window.addEventListener("blur",this.onBlur),window.addEventListener("focus",this.onFocus),document.addEventListener("visibilitychange",this.onVisibilityChange)},removeVisibilityEventListeners:function(){window.removeEventListener("blur",this.onBlur),window.removeEventListener("focus",this.onFocus),document.removeEventListener("visibilitychange",this.onVisibilityChange)},attachKeyEventListeners:function(){window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp)},removeKeyEventListeners:function(){window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp)},onContextMenu:function(){for(var _=Object.keys(this.keys),S=0;S<_.length;S++)delete this.keys[_[S]]},onBlur:function(){this.pause()},onFocus:function(){this.play()},onVisibilityChange:function(){document.hidden?this.onBlur():this.onFocus()},onKeyDown:function(_){var S;y(_)&&(S=_.code||h[_.keyCode],g.indexOf(S)!==-1&&(this.keys[S]=!0))},onKeyUp:function(_){var S;S=_.code||h[_.keyCode],delete this.keys[S]}});function b(_){var S;for(S in _)return!1;return!0}},"./src/components/windows-motion-controls.js":(l,d,c)=>{var h=c("./src/core/component.js").registerComponent,m=c("./src/utils/bind.js"),p=c("./src/utils/tracked-controls.js"),A=p.checkControllerPresentAndSetup,v=p.emitIfAxesChanged,y=p.onButtonEvent,x=c("./src/utils/index.js"),C=x.debug("components:windows-motion-controls:debug"),g=x.debug("components:windows-motion-controls:warn"),b=c("./src/constants/index.js").DEFAULT_HANDEDNESS,_="https://cdn.aframe.io/controllers/microsoft/",S={left:"left.glb",right:"right.glb",default:"universal.glb"},R=c("./src/utils/index.js").device.isWebXRAvailable,P="windows-mixed-reality",O="Spatial Controller (Spatial Interaction Source) ",D=/([0-9a-zA-Z]+-[0-9a-zA-Z]+)$/,L=R?P:O,N={axes:{thumbstick:[0,1],trackpad:[2,3]},buttons:["thumbstick","trigger","grip","menu","trackpad"],axisMeshNames:["THUMBSTICK_X","THUMBSTICK_Y","TOUCHPAD_TOUCH_X","TOUCHPAD_TOUCH_Y"],buttonMeshNames:{trigger:"SELECT",menu:"MENU",grip:"GRASP",thumbstick:"THUMBSTICK_PRESS",trackpad:"TOUCHPAD_PRESS"},pointingPoseMeshName:"POINTING_POSE"},H={axes:{touchpad:[0,1],thumbstick:[2,3]},buttons:["trigger","squeeze","touchpad","thumbstick","menu"],axisMeshNames:["TOUCHPAD_TOUCH_X","TOUCHPAD_TOUCH_X","THUMBSTICK_X","THUMBSTICK_Y"],buttonMeshNames:{trigger:"SELECT",menu:"MENU",squeeze:"GRASP",thumbstick:"THUMBSTICK_PRESS",touchpad:"TOUCHPAD_PRESS"},pointingPoseMeshName:"POINTING_POSE"},J=R?H:N;l.exports.Component=h("windows-motion-controls",{schema:{hand:{default:b},pair:{default:0},model:{default:!0},hideDisconnected:{default:!0}},mapping:J,bindMethods:function(){this.onModelError=m(this.onModelError,this),this.onModelLoaded=m(this.onModelLoaded,this),this.onControllersUpdate=m(this.onControllersUpdate,this),this.checkIfControllerPresent=m(this.checkIfControllerPresent,this),this.onAxisMoved=m(this.onAxisMoved,this)},init:function(){var K=this,se=this.el;this.onButtonChanged=m(this.onButtonChanged,this),this.onButtonDown=function(ae){y(ae.detail.id,"down",K)},this.onButtonUp=function(ae){y(ae.detail.id,"up",K)},this.onButtonTouchStart=function(ae){y(ae.detail.id,"touchstart",K)},this.onButtonTouchEnd=function(ae){y(ae.detail.id,"touchend",K)},this.onControllerConnected=function(){K.setModelVisibility(!0)},this.onControllerDisconnected=function(){K.setModelVisibility(!1)},this.controllerPresent=!1,this.lastControllerCheck=0,this.previousButtonValues={},this.bindMethods(),this.loadedMeshInfo={buttonMeshes:null,axisMeshes:null},this.rayOrigin={origin:new THREE.Vector3,direction:new THREE.Vector3(0,0,-1),createdFromMesh:!1},se.addEventListener("controllerconnected",this.onControllerConnected),se.addEventListener("controllerdisconnected",this.onControllerDisconnected)},addEventListeners:function(){var K=this.el;K.addEventListener("buttonchanged",this.onButtonChanged),K.addEventListener("buttondown",this.onButtonDown),K.addEventListener("buttonup",this.onButtonUp),K.addEventListener("touchstart",this.onButtonTouchStart),K.addEventListener("touchend",this.onButtonTouchEnd),K.addEventListener("axismove",this.onAxisMoved),K.addEventListener("model-error",this.onModelError),K.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var K=this.el;K.removeEventListener("buttonchanged",this.onButtonChanged),K.removeEventListener("buttondown",this.onButtonDown),K.removeEventListener("buttonup",this.onButtonUp),K.removeEventListener("touchstart",this.onButtonTouchStart),K.removeEventListener("touchend",this.onButtonTouchEnd),K.removeEventListener("axismove",this.onAxisMoved),K.removeEventListener("model-error",this.onModelError),K.removeEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!1},checkIfControllerPresent:function(){A(this,L,{hand:this.data.hand,index:this.data.pair,iterateControllerProfiles:!0})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},updateControllerModel:function(){if(!this.data.model||this.rayOrigin.createdFromMesh){this.modelReady();return}var K=this.createControllerModelUrl();this.loadModel(K)},createControllerModelUrl:function(K){var se=this.el.components["tracked-controls"],ae=se?se.controller:null,ee="default",ne=this.data.hand,X;if(ae&&!window.hasNativeWebXRImplementation&&(ne=ae.hand,!K)){var W=ae.id.match(D);ee=W&&W[0]||ee}return X=S[ne]||S.default,_+ee+"/"+X},injectTrackedControls:function(){var K=this.data;this.el.setAttribute("tracked-controls",{idPrefix:L,controller:K.pair,hand:K.hand,armModel:!1}),this.updateControllerModel()},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelError:function(K){var se=this.createControllerModelUrl(!0);K.detail.src!==se?(g("Failed to load controller model for device, attempting to load default."),this.loadModel(se)):g("Failed to load default controller model.")},loadModel:function(K){this.el.setAttribute("gltf-model","url("+K+")")},onModelLoaded:function(K){var se=this.controllerModel=K.detail.model,ae=this.loadedMeshInfo,ee,ne,X,W;if(C("Processing model"),ae.buttonMeshes={},ae.axisMeshes={},se){for(ee=0;ee<this.mapping.buttons.length;ee++){if(ne=this.mapping.buttonMeshNames[this.mapping.buttons[ee]],!ne){C("Skipping unknown button at index: "+ee+" with mapped name: "+this.mapping.buttons[ee]);continue}if(X=se.getObjectByName(ne),!X){g("Missing button mesh with name: "+ne);continue}W={index:ee,value:ce(X,"VALUE"),pressed:ce(X,"PRESSED"),unpressed:ce(X,"UNPRESSED")},W.value&&W.pressed&&W.unpressed?ae.buttonMeshes[this.mapping.buttons[ee]]=W:g("Missing button submesh under mesh with name: "+ne+"(VALUE: "+!!W.value+", PRESSED: "+!!W.pressed+", UNPRESSED:"+!!W.unpressed+")")}for(ee=0;ee<this.mapping.axisMeshNames.length;ee++){if(ne=this.mapping.axisMeshNames[ee],!ne){C("Skipping unknown axis at index: "+ee);continue}if(X=se.getObjectByName(ne),!X){g("Missing axis mesh with name: "+ne);continue}W={index:ee,value:ce(X,"VALUE"),min:ce(X,"MIN"),max:ce(X,"MAX")},W.value&&W.min&&W.max?ae.axisMeshes[ee]=W:g("Missing axis submesh under mesh with name: "+ne+"(VALUE: "+!!W.value+", MIN: "+!!W.min+", MAX:"+!!W.max+")")}this.calculateRayOriginFromMesh(se),this.setModelVisibility()}C("Model load complete.");function ce(he,xe){for(var ve=0,Fe=he.children.length;ve<Fe;ve++){var je=he.children[ve];if(je&&je.name===xe)return je}}},calculateRayOriginFromMesh:function(){var K=new THREE.Quaternion;return function(se){var ae;if(this.rayOrigin.origin.set(0,0,0),this.rayOrigin.direction.set(0,0,-1),this.rayOrigin.createdFromMesh=!0,ae=se.getObjectByName(this.mapping.pointingPoseMeshName),ae){var ee=se.parent;ee&&(se.parent=null,se.updateMatrixWorld(!0),se.parent=ee),ae.getWorldPosition(this.rayOrigin.origin),ae.getWorldQuaternion(K),this.rayOrigin.direction.applyQuaternion(K),ee&&se.updateMatrixWorld(!0)}else C("Mesh does not contain pointing origin data, defaulting to none.");this.modelReady()}}(),lerpAxisTransform:function(){var K=new THREE.Quaternion;return function(se,ae){var ee=this.loadedMeshInfo.axisMeshes[se];if(ee){var ne=ee.min,X=ee.max,W=ee.value,ce=ae*.5+.5;W.setRotationFromQuaternion(K.copy(ne.quaternion).slerp(X.quaternion,ce)),W.position.lerpVectors(ne.position,X.position,ce)}}}(),lerpButtonTransform:function(){var K=new THREE.Quaternion;return function(se,ae){var ee=this.loadedMeshInfo.buttonMeshes[se];if(ee){var ne=ee.unpressed,X=ee.pressed,W=ee.value;W.setRotationFromQuaternion(K.copy(ne.quaternion).slerp(X.quaternion,ae)),W.position.lerpVectors(ne.position,X.position,ae)}}}(),modelReady:function(){this.el.emit("controllermodelready",{name:"windows-motion-controls",model:this.data.model,rayOrigin:this.rayOrigin})},onButtonChanged:function(K){var se=this.mapping.buttons[K.detail.id];se&&(this.loadedMeshInfo&&this.loadedMeshInfo.buttonMeshes&&this.lerpButtonTransform(se,K.detail.state.value),this.el.emit(se+"changed",K.detail.state))},onAxisMoved:function(K){var se=this.mapping.axisMeshNames.length;if(this.loadedMeshInfo&&this.loadedMeshInfo.axisMeshes)for(var ae=0;ae<se;ae++)this.lerpAxisTransform(ae,K.detail.axis[ae]||0);v(this,this.mapping.axes,K)},setModelVisibility:function(K){var se=this.el.getObject3D("mesh");K=K!==void 0?K:this.modelVisible,this.modelVisible=K,se&&(se.visible=K)}})},"./src/constants/index.js":(l,d,c)=>{l.exports={AFRAME_INJECTED:"aframe-injected",DEFAULT_CAMERA_HEIGHT:1.6,DEFAULT_HANDEDNESS:"right",keyboardevent:c("./src/constants/keyboardevent.js")}},"./src/constants/keyboardevent.js":l=>{l.exports={KEYCODE_TO_CODE:{38:"ArrowUp",37:"ArrowLeft",40:"ArrowDown",39:"ArrowRight",87:"KeyW",65:"KeyA",83:"KeyS",68:"KeyD"}}},"./src/core/a-assets.js":(l,d,c)=>{var h=c("./src/core/a-node.js").ANode,m=c("./src/utils/bind.js"),p=c("./src/utils/debug.js"),A=c("./src/lib/three.js"),v=new A.FileLoader,y=p("core:a-assets:warn");class x extends h{constructor(){super(),this.isAssets=!0,this.fileLoader=v,this.timeout=null}connectedCallback(){if(document.readyState==="loading"){document.addEventListener("DOMContentLoaded",this.connectedCallback.bind(this));return}this.doConnectedCallback()}doConnectedCallback(){var D=this,L,N=[],H,J,K,se,ae;if(super.connectedCallback(),!this.parentNode.isScene)throw new Error("<a-assets> must be a child of a <a-scene>.");for(se=this.querySelectorAll("img"),L=0;L<se.length;L++)K=b(se[L]),N.push(new Promise(function(ee,ne){A.Cache.add(se[L].getAttribute("src"),K),K.onload=ee,K.onerror=ne}));for(J=this.querySelectorAll("audio, video"),L=0;L<J.length;L++)H=b(J[L]),!H.src&&!H.srcObject&&y("Audio/video asset has neither `src` nor `srcObject` attributes."),N.push(g(H));Promise.allSettled(N).then(m(this.load,this)),ae=parseInt(this.getAttribute("timeout"),10)||3e3,this.timeout=setTimeout(function(){D.hasLoaded||(y("Asset loading timed out in ",ae,"ms"),D.emit("timeout"),D.load())},ae)}disconnectedCallback(){super.disconnectedCallback(),this.timeout&&clearTimeout(this.timeout)}load(){super.load.call(this,null,function(L){return L.isAssetItem&&L.hasAttribute("src")})}}customElements.define("a-assets",x);class C extends h{constructor(){super(),this.data=null,this.isAssetItem=!0}connectedCallback(){var D=this,L=this.getAttribute("src");v.setResponseType(this.getAttribute("response-type")||R(L)),v.load(L,function(H){D.data=H,setTimeout(function(){h.prototype.load.call(D)})},function(H){D.emit("progress",{loadedBytes:H.loaded,totalBytes:H.total,xhr:H})},function(H){D.emit("error",{xhr:H})})}}customElements.define("a-asset-item",C);function g(O){if(!(!O.hasAttribute("autoplay")&&O.getAttribute("preload")!=="auto"))return new Promise(function(D,L){if(O.readyState===4)return D();if(O.error)return L();O.addEventListener("loadeddata",N,!1),O.addEventListener("progress",N,!1),O.addEventListener("error",L,!1);function N(){for(var H=0,J=0;J<O.buffered.length;J++)H+=O.buffered.end(J)-O.buffered.start(J);H>=O.duration&&(O.tagName==="VIDEO"&&A.Cache.add(O.getAttribute("src"),O),D())}})}function b(O){var D=_(O);return D.tagName&&D.tagName.toLowerCase()==="video"&&(D.setAttribute("playsinline",""),D.setAttribute("webkit-playsinline","")),D!==O&&(O.parentNode.appendChild(D),O.parentNode.removeChild(O)),D}function _(O){var D,L;return O.hasAttribute("crossorigin")||(L=O.getAttribute("src"),L!==null&&(L.indexOf("://")===-1||S(L)===window.location.host))?O:(y('Cross-origin element (e.g., <img>) was requested without `crossorigin` set. A-Frame will re-request the asset with `crossorigin` attribute set. Please set `crossorigin` on the element (e.g., <img crossorigin="anonymous">)',L),O.crossOrigin="anonymous",D=O.cloneNode(!0),D)}function S(O){var D=O.indexOf("://")>-1?O.split("/")[2]:O.split("/")[0];return D.substring(0,D.indexOf(":"))}function R(O){var D=P(O),L=D.lastIndexOf(".");if(L>=0){var N=D.slice(L,O.search(/\?|#|$/));if(N===".glb")return"arraybuffer"}return"text"}l.exports.inferResponseType=R;function P(O){var D=document.createElement("a");D.href=O;var L=D.search.replace(/^\?/,""),N=O.replace(L,"").replace("?","");return N.substring(N.lastIndexOf("/")+1)}l.exports.getFileNameFromURL=P},"./src/core/a-cubemap.js":(l,d,c)=>{var h=c("./src/utils/debug.js"),m=h("core:cubemap:warn");class p extends HTMLElement{constructor(v){return v=super(v),v.srcs=v.validate(),v}validate(){var v=this.querySelectorAll("[src]"),y,x=[];if(v.length===6){for(y=0;y<v.length;y++)x.push(v[y].getAttribute("src"));return x}m("<a-cubemap> did not contain exactly six elements each with a `src` attribute.")}}customElements.define("a-cubemap",p)},"./src/core/a-entity.js":(l,d,c)=>{var h=c("./src/core/a-node.js").ANode,m=c("./src/core/component.js").components,p=c("./src/lib/three.js"),A=c("./src/utils/index.js"),v=A.debug("core:a-entity:debug"),y=A.debug("core:a-entity:warn"),x="__",C=["position","rotation","scale","visible"],g={once:!0};class b extends h{constructor(){super(),this.components={},this.initializingComponents={},this.componentsToUpdate={},this.isEntity=!0,this.isPlaying=!1,this.object3D=new p.Group,this.object3D.el=this,this.object3DMap={},this.parentEl=null,this.rotationObj={},this.states=[]}attributeChangedCallback(L,N,H){var J=this.components[L];if(super.attributeChangedCallback(),J&&J.justInitialized&&H===""){delete J.justInitialized;return}!J&&H===null||this.setEntityAttribute(L,N,H)}connectedCallback(){if(document.readyState==="loading"){document.addEventListener("DOMContentLoaded",this.connectedCallback.bind(this));return}b.prototype.doConnectedCallback.call(this)}doConnectedCallback(){var L=this,N,H;if(super.connectedCallback(),H=this.sceneEl,this.addToParent(),!this.isScene){if(!H){this.load();return}if(N=H.querySelector("a-assets"),N&&!N.hasLoaded){N.addEventListener("loaded",function(){L.load()});return}this.load()}}disconnectedCallback(){var L;if(this.parentEl){for(L in this.components)this.removeComponent(L,!1);this.isScene||(this.removeFromParent(),super.disconnectedCallback(),this.object3D.el=null)}}getObject3D(L){return this.object3DMap[L]}setObject3D(L,N){var H,J=this;if(!(N instanceof p.Object3D))throw new Error("`Entity.setObject3D` was called with an object that was not an instance of THREE.Object3D.");H=this.getObject3D(L),H&&this.object3D.remove(H),N.el=this,N.children.length&&N.traverse(function(se){se.el=J}),this.object3D.add(N),this.object3DMap[L]=N,this.emit("object3dset",{object:N,type:L})}removeObject3D(L){var N=this.getObject3D(L);if(!N){y("Tried to remove `Object3D` of type:",L,"which was not defined.");return}this.object3D.remove(N),delete this.object3DMap[L],this.emit("object3dremove",{type:L})}getOrCreateObject3D(L,N){var H=this.getObject3D(L);return!H&&N&&(H=new N,this.setObject3D(L,H)),y("`getOrCreateObject3D` has been deprecated. Use `setObject3D()` and `object3dset` event instead."),H}add(L){if(!L.object3D)throw new Error("Trying to add an element that doesn't have an `object3D`");this.object3D.add(L.object3D),this.emit("child-attached",{el:L})}addToParent(){var L=this.parentEl=this.parentNode;!L||!L.add||this.attachedToParent||(L.add(this),this.attachedToParent=!0)}removeFromParent(){var L=this.parentEl;this.parentEl.remove(this),this.attachedToParent=!1,this.parentEl=null,L.emit("child-detached",{el:this})}load(){var L=this;this.hasLoaded||!this.parentEl||super.load.call(this,function(){L.parentEl&&(L.updateComponents(),(L.isScene||L.parentEl.isPlaying)&&L.play())})}remove(L){L?this.object3D.remove(L.object3D):this.parentNode.removeChild(this)}getChildEntities(){for(var L=this.children,N=[],H=0;H<L.length;H++){var J=L[H];J instanceof b&&N.push(J)}return N}initComponent(L,N,H){var J,K,se,ae,ee;if(se=A.split(L,x),ae=se[0],K=se.length>2?se.slice(1).join("__"):se[1],!!m[ae]&&(ee=_(this,L)||N!==void 0,!(!ee&&!H)&&!(L in this.components))){if(this.initComponentDependencies(ae),K&&!m[ae].multiple)throw new Error("Trying to initialize multiple components of type `"+ae+"`. There can only be one component of this type per entity.");J=new m[ae].Component(this,N,K),this.isPlaying&&J.play(),this.hasAttribute(L)||(J.justInitialized=!0,window.HTMLElement.prototype.setAttribute.call(this,L,"")),v("Component initialized: %s",L)}}initComponentDependencies(L){var N=this,H=m[L],J,K;if(H&&(J=m[L].dependencies,!!J))for(K=0;K<J.length;K++)N.initComponent(J[K],window.HTMLElement.prototype.getAttribute.call(N,J[K])||void 0,!0)}removeComponent(L,N){var H;if(H=this.components[L],!!H){if(!H.initialized){this.addEventListener("componentinitialized",function J(K){K.detail.name===L&&(this.removeComponent(L,N),this.removeEventListener("componentinitialized",J))});return}H.pause(),H.remove(),N&&(H.destroy(),delete this.components[L]),this.emit("componentremoved",H.evtDetail,!1)}}updateComponents(){var L,N,H,J,K=this.componentsToUpdate;if(this.hasLoaded){for(H=0;H<this.mixinEls.length;H++)for(J in this.mixinEls[H].componentCache)P(J)&&(K[J]=!0);if(this.getExtraComponents){N=this.getExtraComponents();for(J in N)P(J)&&(K[J]=!0)}for(H=0;H<this.attributes.length;++H)J=this.attributes[H].name,C.indexOf(J)===-1&&P(J)&&(K[J]=!0);for(H=0;H<C.length;H++)J=C[H],this.hasAttribute(J)&&this.updateComponent(J,this.getDOMAttribute(J));for(J in K)L=R(this.getDOMAttribute(J),N&&N[J]),this.updateComponent(J,L),delete K[J]}}updateComponent(L,N,H){var J=this.components[L];if(J){if(N===null&&!_(this,L)){this.removeComponent(L,!0);return}J.updateProperties(N,H);return}this.initComponent(L,N,!1)}removeAttribute(L,N){var H=this.components[L];if(H&&N===void 0&&this.removeComponent(L,!0),H&&N!==void 0){H.resetProperty(N);return}L==="mixin"&&this.mixinUpdate(""),window.HTMLElement.prototype.removeAttribute.call(this,L)}play(){var L,N,H;if(!(this.isPlaying||!this.hasLoaded)){this.isPlaying=!0;for(H in this.components)this.components[H].play();for(L=this.getChildEntities(),N=0;N<L.length;N++)L[N].play();this.emit("play")}}pause(){var L,N,H;if(this.isPlaying){this.isPlaying=!1;for(H in this.components)this.components[H].pause();for(L=this.getChildEntities(),N=0;N<L.length;N++)L[N].pause();this.emit("pause")}}setEntityAttribute(L,N,H){if(m[L]||this.components[L]){this.updateComponent(L,H);return}if(L==="mixin"){if(H===this.computedMixinStr)return;this.mixinUpdate(H,N)}}mixinUpdate(L,N){var H=b.componentsUpdated,J,K,se,ae,ee=this;if(!this.hasLoaded){this.addEventListener("loaded",function(){ee.mixinUpdate(L,N)},g);return}for(N=N||this.getAttribute("mixin"),se=this.updateMixins(L,N),H.length=0,ae=0;ae<this.mixinEls.length;ae++)for(J in this.mixinEls[ae].componentCache)H.indexOf(J)===-1&&(this.components[J]?this.components[J].handleMixinUpdate():this.initComponent(J,null),H.push(J));for(ae=0;ae<se.oldMixinIds.length;ae++)if(K=document.getElementById(se.oldMixinIds[ae]),!!K)for(J in K.componentCache)H.indexOf(J)===-1&&this.components[J]&&(this.getDOMAttribute(J)?this.components[J].handleMixinUpdate():this.removeComponent(J,!0))}setAttribute(L,N,H){var J=b.singlePropUpdate,K,se,ae,ee,ne,X;if(ee=L.indexOf(x),ae=ee>0?L.substring(0,ee):L,!m[ae]){L==="mixin"&&this.mixinUpdate(N),super.setAttribute.call(this,L,N);return}if(!this.components[L]&&this.hasAttribute(L)&&this.updateComponent(L,window.HTMLElement.prototype.getAttribute.call(this,L)),typeof H<"u"&&typeof N=="string"&&N.length>0&&typeof A.styleParser.parse(N)=="string"){for(X in J)delete J[X];K=J,K[N]=H,se=!1}else K=N,se=H===!0;this.updateComponent(L,K,se),ne=this.sceneEl&&this.sceneEl.getAttribute("debug"),ne&&this.components[L].flushToDOM()}flushToDOM(L){var N=this.components,H,J=this.children,K,se;for(se in N)N[se].flushToDOM();if(L)for(K=0;K<J.length;++K)H=J[K],H.flushToDOM&&H.flushToDOM(L)}getAttribute(L){var N;return L==="position"?this.object3D.position:L==="rotation"?O(this):L==="scale"?this.object3D.scale:L==="visible"?this.object3D.visible:(N=this.components[L],N?N.data:window.HTMLElement.prototype.getAttribute.call(this,L))}getDOMAttribute(L){var N=this.components[L];return N?N.attrValue:window.HTMLElement.prototype.getAttribute.call(this,L)}addState(L){this.is(L)||(this.states.push(L),this.emit("stateadded",L))}removeState(L){var N=this.states.indexOf(L);N!==-1&&(this.states.splice(N,1),this.emit("stateremoved",L))}is(L){return this.states.indexOf(L)!==-1}inspect(){this.sceneEl.components.inspector.openInspector(this)}destroy(){var L;if(this.parentNode){y("Entity can only be destroyed if detached from scenegraph.");return}for(L in this.components)this.components[L].destroy()}}function _(D,L){return D.components[L]&&D.components[L].attrValue?!0:S(L,D.mixinEls)}function S(D,L){var N,H=!1;for(N=0;N<L.length&&(H=L[N].hasAttribute(D),!H);++N);return H}function R(D,L){return L?L.constructor===Object?A.extend(L,A.styleParser.parse(D||{})):D||L:D}function P(D){return D.indexOf(x)!==-1&&(D=A.split(D,x)[0]),!!m[D]}function O(D){var L=p.MathUtils.radToDeg,N=D.object3D.rotation,H=D.rotationObj;return H.x=L(N.x),H.y=L(N.y),H.z=L(N.z),H}b.componentsUpdated=[],b.singlePropUpdate={},customElements.define("a-entity",b),l.exports.AEntity=b},"./src/core/a-mixin.js":(l,d,c)=>{var h=c("./src/core/a-node.js").ANode,m=c("./src/core/component.js").components,p=c("./src/utils/index.js"),A="__";class v extends h{constructor(){super(),this.componentCache={},this.isMixin=!0}connectedCallback(){if(document.readyState==="loading"){document.addEventListener("DOMContentLoaded",this.connectedCallback.bind(this));return}this.doConnectedCallback()}doConnectedCallback(){super.connectedCallback(),this.sceneEl=this.closestScene(),this.id=this.getAttribute("id"),this.cacheAttributes(),this.updateEntities(),this.load()}attributeChangedCallback(x,C,g){super.attributeChangedCallback(),this.cacheAttribute(x,g),this.updateEntities()}setAttribute(x,C){window.HTMLElement.prototype.setAttribute.call(this,x,C),this.cacheAttribute(x,C)}cacheAttribute(x,C){var g,b;b=p.split(x,A)[0],g=m[b],g&&(C===void 0&&(C=window.HTMLElement.prototype.getAttribute.call(this,x)),this.componentCache[x]=g.parseAttrValueForCache(C))}getAttribute(x){return this.componentCache[x]||window.HTMLElement.prototype.getAttribute.call(this,x)}cacheAttributes(){var x=this.attributes,C,g;for(g=0;g<x.length;g++)C=x[g].name,this.cacheAttribute(C)}updateEntities(){var x,C,g;if(this.sceneEl)for(C=this.sceneEl.querySelectorAll("[mixin~="+this.id+"]"),g=0;g<C.length;g++)x=C[g],!(!x.hasLoaded||x.isMixin)&&x.mixinUpdate(this.id)}}customElements.define("a-mixin",v)},"./src/core/a-node.js":(l,d,c)=>{var h=c("./src/utils/index.js"),m=h.debug("core:a-node:warn"),p={"a-scene":!0,"a-assets":!0,"a-assets-items":!0,"a-cubemap":!0,"a-mixin":!0,"a-node":!0,"a-entity":!0};function A(y){return y.tagName.toLowerCase()in p||y.isNode}class v extends HTMLElement{constructor(){super(),this.computedMixinStr="",this.hasLoaded=!1,this.isNode=!0,this.mixinEls=[]}connectedCallback(){if(document.readyState==="loading"){document.addEventListener("DOMContentLoaded",this.connectedCallback.bind(this));return}v.prototype.doConnectedCallback.call(this)}doConnectedCallback(){var x;this.sceneEl=this.closestScene(),this.sceneEl||m("You are attempting to attach <"+this.tagName+"> outside of an A-Frame scene. Append this element to `<a-scene>` instead."),this.hasLoaded=!1,this.emit("nodeready",void 0,!1),this.isMixin||(x=this.getAttribute("mixin"),x&&this.updateMixins(x))}attributeChangedCallback(x,C,g){g!==this.computedMixinStr&&x==="mixin"&&!this.isMixin&&this.updateMixins(g,C)}closestScene(){for(var x=this;x&&!x.isScene;)x=x.parentElement;return x}closest(x){for(var C=this.matches||this.mozMatchesSelector||this.msMatchesSelector||this.oMatchesSelector||this.webkitMatchesSelector,g=this;g&&!C.call(g,x);)g=g.parentElement;return g}disconnectedCallback(){this.hasLoaded=!1}load(x,C){var g,b,_=this;this.hasLoaded||(C=C||A,g=this.getChildren(),b=g.filter(C).map(function(S){return new Promise(function(P,O){if(S.hasLoaded)return P();S.addEventListener("loaded",P),S.addEventListener("error",O)})}),Promise.allSettled(b).then(function(R){R.forEach(function(O){O.status==="rejected"&&m("Rendering scene with errors on node: ",O.reason.target)}),_.hasLoaded=!0,x&&x(),_.setupMutationObserver(),_.emit("loaded",void 0,!1)}))}setupMutationObserver(){var x=this,C={attributes:!0,attributeOldValue:!0},g=new MutationObserver(function(_){var S;for(S=0;S<_.length;S++)if(_[S].type==="attributes"){var R=_[S].attributeName,P=window.HTMLElement.prototype.getAttribute.call(x,R),O=_[S].oldValue;x.attributeChangedCallback(R,O,P)}});g.observe(this,C)}getChildren(){return Array.prototype.slice.call(this.children,0)}updateMixins(x,C){var g=v.newMixinIdArray,b=v.oldMixinIdArray,_=v.mixinIds,S,R,P;for(g.length=0,b.length=0,R=x?h.split(x.trim(),/\s+/):g,P=C?h.split(C.trim(),/\s+/):b,_.newMixinIds=R,_.oldMixinIds=P,S=0;S<P.length;S++)R.indexOf(P[S])===-1&&this.unregisterMixin(P[S]);for(this.computedMixinStr="",this.mixinEls.length=0,S=0;S<R.length;S++)this.registerMixin(document.getElementById(R[S]));return this.computedMixinStr&&(this.computedMixinStr=this.computedMixinStr.trim(),window.HTMLElement.prototype.setAttribute.call(this,"mixin",this.computedMixinStr)),_}registerMixin(x){var C,g,b;if(x){if(b=x.getAttribute("mixin"),b)for(C=h.split(b.trim(),/\s+/),g=0;g<C.length;g++)this.registerMixin(document.getElementById(C[g]));this.computedMixinStr=this.computedMixinStr+" "+x.id,this.mixinEls.push(x)}}setAttribute(x,C){x==="mixin"&&this.updateMixins(C),window.HTMLElement.prototype.setAttribute.call(this,x,C)}unregisterMixin(x){var C,g=this.mixinEls,b;for(C=0;C<g.length;++C)if(b=g[C],x===b.id){g.splice(C,1);break}}emit(x,C,g,b){var _=v.evtData;g===void 0&&(g=!0),_.bubbles=!!g,_.detail=C,b&&(_=h.extend({},b,_)),this.dispatchEvent(new CustomEvent(x,_))}}v.evtData={},v.newMixinIdArray=[],v.oldMixinIdArray=[],v.mixinIds={},customElements.define("a-node",v),l.exports.ANode=v,l.exports.knownTags=p},"./src/core/component.js":(l,d,c)=>{var h=c("./src/core/schema.js"),m=c("./src/core/scene/scenes.js"),p=c("./src/core/system.js"),A=c("./src/utils/index.js"),v=l.exports.components={},y=h.parseProperties,x=h.parseProperty,C=h.process,g=h.isSingleProperty,b=h.stringifyProperties,_=h.stringifyProperty,S=A.styleParser,R=A.debug("core:component:warn"),P=document.currentScript,O=new RegExp("[A-Z]+"),D={},L=l.exports.Component=function(W,ce,he){var xe=this;this.el=W,this.id=he,this.attrName=this.name+(he?"__"+he:""),this.evtDetail={id:this.id,name:this.name},this.initialized=!1,this.isSingleProperty=g(this.schema),this.isSinglePropertyObject=this.isSingleProperty&&ne(x(void 0,this.schema))&&!(this.schema.default instanceof window.HTMLElement),this.isObjectBased=!this.isSingleProperty||this.isSinglePropertyObject,this.el.components[this.attrName]=this,this.objectPool=D[this.name];var ve=this.events;this.events={},N(this,ve),this.attrValue=void 0,this.isObjectBased?(this.nextData=this.objectPool.use(),A.objectPool.removeUnusedKeys(this.nextData,this.schema),this.oldData=this.objectPool.use(),A.objectPool.removeUnusedKeys(this.oldData,this.schema),this.previousOldData=this.objectPool.use(),A.objectPool.removeUnusedKeys(this.previousOldData,this.schema),this.parsingAttrValue=this.objectPool.use(),A.objectPool.removeUnusedKeys(this.parsingAttrValue,this.schema)):(this.nextData=void 0,this.oldData=void 0,this.previousOldData=void 0,this.parsingAttrValue=void 0),this.throttledEmitComponentChanged=A.throttleLeadingAndTrailing(function(){W.emit("componentchanged",xe.evtDetail,!1)},200),this.updateProperties(ce)};L.prototype={schema:{},init:function(){},events:{},update:function(W){},updateSchema:void 0,tick:void 0,tock:void 0,play:function(){},pause:function(){},remove:function(){},parse:function(W,ce){var he=this.schema;return this.isSingleProperty?x(W,he):y(S.parse(W),he,!0,this.name,ce)},stringify:function(W){var ce=this.schema;return typeof W=="string"?W:this.isSingleProperty?_(W,ce):(W=b(W,ce),S.stringify(W))},updateCachedAttrValue:function(W,ce){var he,xe,ve;if(W!==void 0){if(W===null){this.isObjectBased&&this.attrValue&&this.objectPool.recycle(this.attrValue),this.attrValue=void 0;return}if(W instanceof Object&&!(W instanceof window.HTMLElement)?(xe=this.objectPool.use(),he=A.extend(xe,W)):he=this.parseAttrValueForCache(W),this.isObjectBased&&!ce&&this.attrValue)for(ve in this.attrValue)he[ve]===void 0&&(he[ve]=this.attrValue[ve]);this.isObjectBased&&!this.attrValue&&(this.attrValue=this.objectPool.use()),A.objectPool.clearObject(this.attrValue),this.attrValue=K(this.attrValue,he,this.isObjectBased),A.objectPool.clearObject(xe)}},parseAttrValueForCache:function(W){var ce;return typeof W!="string"?W:(this.isSingleProperty?(ce=this.schema.parse(W),typeof ce=="string"&&(ce=W)):(A.objectPool.clearObject(this.parsingAttrValue),ce=S.parse(W,this.parsingAttrValue)),ce)},flushToDOM:function(W){var ce=W?this.data:this.attrValue;ce!=null&&window.HTMLElement.prototype.setAttribute.call(this.el,this.attrName,this.stringify(ce))},updateProperties:function(W,ce){var he=this.el;if(!he.hasLoaded){this.updateCachedAttrValue(W);return}W!==null&&(W=this.parseAttrValueForCache(W)),this.updateCachedAttrValue(W,ce),this.initialized?(this.updateComponent(W,ce),this.callUpdateHandler()):this.initComponent()},initComponent:function(){var W=this.el,ce;this.updateSchema&&this.updateSchema(this.buildData(this.attrValue,!1,!0)),this.data=this.buildData(this.attrValue),!W.initializingComponents[this.name]&&(W.initializingComponents[this.name]=!0,this.init(),this.initialized=!0,delete W.initializingComponents[this.name],this.oldData=K(this.oldData,this.data,this.isObjectBased),ce=this.isObjectBased?this.objectPool.use():void 0,this.update(ce),this.isObjectBased&&this.objectPool.recycle(ce),W.isPlaying&&this.play(),W.emit("componentinitialized",this.evtDetail,!1))},updateComponent:function(W,ce){var he,xe;if(ce){this.updateSchema&&this.updateSchema(this.buildData(this.attrValue,!0,!0)),this.data=this.buildData(this.attrValue,!0,!1);return}if(this.isSingleProperty){this.isObjectBased&&x(W,this.schema),this.data=W;return}if(y(W,this.schema,!0,this.name),this.schemaChangeKeys.length){for(he in W)if(this.schema[he].schemaChange){xe=!0;break}}if(xe){this.updateSchema&&this.updateSchema(this.buildData(this.attrValue,!0,!0)),this.data=this.buildData(this.attrValue,!0,!1);return}for(he in W)W[he]!==void 0&&(this.data[he]=W[he])},callUpdateHandler:function(){var W;this.previousOldData instanceof Object&&A.objectPool.clearObject(this.previousOldData),this.isObjectBased?J(this.previousOldData,this.oldData):this.previousOldData=this.oldData,W=!A.deepEqual(this.oldData,this.data),!(!this.isPositionRotationScale&&!W)&&(this.oldData instanceof Object&&A.objectPool.clearObject(this.oldData),this.oldData=K(this.oldData,this.data,this.isObjectBased),this.update(this.previousOldData),this.throttledEmitComponentChanged())},handleMixinUpdate:function(){this.data=this.buildData(this.attrValue),this.callUpdateHandler()},resetProperty:function(W){if(this.isObjectBased){if(!(W in this.attrValue))return;delete this.attrValue[W],this.data[W]=this.schema[W].default}else this.attrValue=this.schema.default,this.data=this.schema.default;this.updateProperties(this.attrValue)},extendSchema:function(W){var ce;ce=A.extend({},v[this.name].schema),A.extend(ce,W),this.schema=C(ce),this.el.emit("schemachanged",this.evtDetail)},buildData:function(W,ce,he){var xe,ve,Fe,je,rt,He=this.nextData,Ot=this.schema,xt,gt=this.el.mixinEls,It;if(xe=W&&W.constructor===Array?W.length:W!=null,this.isObjectBased&&A.objectPool.clearObject(He),this.isSingleProperty)this.isObjectBased?ve=J(He,Ot.default):ve=X(Ot.default)?A.clone(Ot.default):Ot.default;else{It=!ce&&this.attrValue,ve=It instanceof Object?J(He,It):He;for(je in Ot)Fe=Ot[je].default,ve[je]===void 0&&(ve[je]=X(Fe)?A.clone(Fe):Fe)}for(xt=0;xt<gt.length;xt++)rt=gt[xt].getAttribute(this.attrName),rt&&(ve=K(ve,rt,this.isObjectBased));if(xe){if(this.isSingleProperty)return ne(W)?(J(this.parsingAttrValue,W),x(this.parsingAttrValue,Ot)):x(W,Ot);ve=K(ve,W,this.isObjectBased)}else if(this.isSingleProperty)return x(ve,Ot);return y(ve,Ot,void 0,this.name,he)},eventsAttach:function(){var W;this.eventsDetach();for(W in this.events)this.el.addEventListener(W,this.events[W])},eventsDetach:function(){var W;for(W in this.events)this.el.removeEventListener(W,this.events[W])},destroy:function(){this.objectPool.recycle(this.attrValue),this.objectPool.recycle(this.oldData),this.objectPool.recycle(this.parsingAttrValue),this.attrValue=this.oldData=this.parsingAttrValue=void 0}};function N(W,ce){var he;for(he in ce)W.events[he]=ce[he].bind(W)}if(window.debug)var H=l.exports.registrationOrderWarnings={};l.exports.registerComponent=function(W,ce){var he,xe,ve={},Fe,je;if(document.currentScript&&document.currentScript!==P&&m.forEach(function(He){He.hasLoaded||document.currentScript.compareDocumentPosition(He)!==Node.DOCUMENT_POSITION_FOLLOWING&&(R("The component `"+W+"` was registered in a <script> tag after the scene. Component <script> tags in an HTML file should be declared *before* the scene such that the component is available to entities during scene initialization."),window.debug&&(H[W]=!0))}),O.test(W)===!0&&R("The component name `"+W+"` contains uppercase characters, but HTML will ignore the capitalization of attribute names. Change the name to be lowercase: `"+W.toLowerCase()+"`"),W.indexOf("__")!==-1)throw new Error("The component name `"+W+"` is not allowed. The sequence __ (double underscore) is reserved to specify an id for multiple components of the same type");if(Object.keys(ce).forEach(function(rt){ve[rt]={value:ce[rt],writable:!0}}),v[W])throw new Error("The component `"+W+"` has been already registered. Check that you are not loading two versions of the same component or two different components of the same name.");if(he=function(rt,He,Ot){L.call(this,rt,He,Ot)},he.prototype=Object.create(L.prototype,ve),he.prototype.name=W,he.prototype.isPositionRotationScale=W==="position"||W==="rotation"||W==="scale",he.prototype.constructor=he,he.prototype.system=p&&p.systems[W],he.prototype.play=ee(he.prototype.play),he.prototype.pause=ae(he.prototype.pause),Fe=A.extend(C(he.prototype.schema,he.prototype.name)),je=g(he.prototype.schema),!je){he.prototype.schemaChangeKeys=[];for(xe in Fe)Fe[xe].schemaChange&&he.prototype.schemaChangeKeys.push(xe)}return D[W]=A.objectPool.createPool(),v[W]={Component:he,dependencies:he.prototype.dependencies,isSingleProp:je,multiple:he.prototype.multiple,name:W,parse:he.prototype.parse,parseAttrValueForCache:he.prototype.parseAttrValueForCache,schema:Fe,stringify:he.prototype.stringify,type:he.prototype.type},he};function J(W,ce){var he,xe;for(xe in ce)ce[xe]!==void 0&&(he=ce[xe],W[xe]=X(he)?A.clone(he):he);return W}function K(W,ce,he){var xe;if(he&&ce.constructor===Object){for(xe in ce)ce[xe]!==void 0&&(ce[xe]&&ce[xe].constructor===Object?W[xe]=A.clone(ce[xe]):W[xe]=ce[xe]);return W}return ce}function se(W){return W.tick||W.tock}function ae(W){return function(){var he=this.el.sceneEl;this.isPlaying&&(W.call(this),this.isPlaying=!1,this.eventsDetach(),se(this)&&he.removeBehavior(this))}}function ee(W){return function(){var he=this.el.sceneEl,xe=this.el.isPlaying&&!this.isPlaying;!this.initialized||!xe||(W.call(this),this.isPlaying=!0,this.eventsAttach(),se(this)&&he.addBehavior(this))}}function ne(W){return W&&W.constructor===Object&&!(W instanceof window.HTMLElement)}function X(W){return W&&(W.constructor===Object||W.constructor===Array)&&!(W instanceof window.HTMLElement)}},"./src/core/geometry.js":(l,d,c)=>{var h=c("./src/core/schema.js"),m=h.process,p=l.exports.geometries={},A=l.exports.geometryNames=[],v=c("./src/lib/three.js"),y=l.exports.Geometry=function(){};y.prototype={schema:{},init:function(x){return this.geometry=new v.BufferGeometry,this.geometry},update:function(x){}},l.exports.registerGeometry=function(x,C){var g,b={};if(Object.keys(C).forEach(function(S){b[S]={value:C[S],writable:!0}}),p[x])throw new Error("The geometry `"+x+"` has been already registered");return g=function(){y.call(this)},g.prototype=Object.create(y.prototype,b),g.prototype.name=x,g.prototype.constructor=g,p[x]={Geometry:g,schema:m(g.prototype.schema)},A.push(x),g}},"./src/core/propertyTypes.js":(l,d,c)=>{var h=c("./src/utils/coordinates.js"),m=c("./node_modules/debug/browser.js"),p=m("core:propertyTypes:warn"),A=m("core:propertyTypes:warn"),v=l.exports.propertyTypes={},y=/[,> .[\]:]/,x=/\url\((.+)\)/;C("audio","",_),C("array",[],g,b),C("asset","",_),C("boolean",!1,P),C("color","#FFF",S,R),C("int",0,O),C("number",0,D),C("map","",_),C("model","",_),C("selector",null,L,H),C("selectorAll",null,N,J),C("src","",K),C("string","",S,R),C("time",0,O),C("vec2",{x:0,y:0},se,h.stringify),C("vec3",{x:0,y:0,z:0},se,h.stringify),C("vec4",{x:0,y:0,z:0,w:1},se,h.stringify);function C(ne,X,W,ce){if("type"in v){p("Property type "+ne+" is already registered.");return}v[ne]={default:X,parse:W||S,stringify:ce||R}}l.exports.registerPropertyType=C;function g(ne){if(Array.isArray(ne))return ne;if(!ne||typeof ne!="string")return[];return ne.split(",").map(X);function X(W){return W.trim()}}function b(ne){return ne.join(", ")}function _(ne){var X,W;if(typeof ne!="string")return ne;if(W=ne.match(x),W)return W[1];if(ne.charAt(0)==="#"){if(X=document.getElementById(ne.substring(1)),X)return X.tagName==="CANVAS"||X.tagName==="VIDEO"||X.tagName==="IMG"?X:X.getAttribute("src");A('"'+ne+'" asset not found.');return}return ne}function S(ne){return ne}function R(ne){return ne===null?"null":ne.toString()}function P(ne){return ne!=="false"&&ne!==!1}function O(ne){return parseInt(ne,10)}function D(ne){return parseFloat(ne,10)}function L(ne){return ne?typeof ne!="string"?ne:ne[0]==="#"&&!y.test(ne)?document.getElementById(ne.substring(1)):document.querySelector(ne):null}function N(ne){return ne?typeof ne!="string"?ne:Array.prototype.slice.call(document.querySelectorAll(ne),0):null}function H(ne){return ne.getAttribute?"#"+ne.getAttribute("id"):R(ne)}function J(ne){return ne instanceof Array?ne.map(function(X){return"#"+X.getAttribute("id")}).join(", "):R(ne)}function K(ne){return A("`src` property type is deprecated. Use `asset` instead."),_(ne)}function se(ne){return h.parse(ne,this.default)}function ae(ne,X){return ne==="audio"&&typeof X!="string"||ne==="array"&&!Array.isArray(X)||ne==="asset"&&typeof X!="string"||ne==="boolean"&&typeof X!="boolean"||ne==="color"&&typeof X!="string"||ne==="int"&&typeof X!="number"||ne==="number"&&typeof X!="number"||ne==="map"&&typeof X!="string"||ne==="model"&&typeof X!="string"||ne==="selector"&&typeof X!="string"&&X!==null||ne==="selectorAll"&&typeof X!="string"&&X!==null||ne==="src"&&typeof X!="string"||ne==="string"&&typeof X!="string"||ne==="time"&&typeof X!="number"?!1:ne==="vec2"?ee(X,2):ne==="vec3"?ee(X,3):ne==="vec4"?ee(X,4):!0}l.exports.isValidDefaultValue=ae;function ee(ne,X){if(ne===null)return!0;if(typeof ne!="object"||Object.keys(ne).length!==X)return!1;var W=ne.x,ce=ne.y,he=ne.z,xe=ne.w;return!(typeof W!="number"||typeof ce!="number"||X>2&&typeof he!="number"||X>3&&typeof xe!="number")}l.exports.isValidDefaultCoordinate=ee},"./src/core/scene/a-scene.js":(l,d,c)=>{var h=c("./src/core/scene/metaTags.js").inject,m=c("./src/core/scene/wakelock.js"),p=c("./src/core/scene/loadingScreen.js"),A=c("./src/core/scene/scenes.js"),v=c("./src/core/system.js").systems,y=c("./src/lib/three.js"),x=c("./src/utils/index.js"),C=c("./src/core/a-entity.js").AEntity,g=c("./src/core/a-node.js").ANode,b=c("./src/core/scene/postMessage.js"),_=x.bind,S=x.device.isIOS(),R=x.device.isMobile(),P=x.device.isWebXRAvailable,O=x.debug("core:a-scene:warn");S&&c("./src/utils/ios-orientationchange-blank-bug.js");class D extends C{constructor(){var ee;super(),ee=this,ee.clock=new y.Clock,ee.isIOS=S,ee.isMobile=R,ee.hasWebXR=P,ee.isAR=!1,ee.isScene=!0,ee.object3D=new y.Scene,ee.object3D.onAfterRender=function(ne,X,W){ee.isPlaying&&ee.tock(ee.time,ee.delta,W)},ee.resize=_(ee.resize,ee),ee.render=_(ee.render,ee),ee.systems={},ee.systemNames=[],ee.time=ee.delta=0,ee.behaviors={tick:[],tock:[]},ee.hasLoaded=!1,ee.isPlaying=!1,ee.originalHTML=ee.innerHTML}addFullScreenStyles(){document.documentElement.classList.add("a-fullscreen")}removeFullScreenStyles(){document.documentElement.classList.remove("a-fullscreen")}connectedCallback(){if(document.readyState==="loading"){document.addEventListener("DOMContentLoaded",this.connectedCallback.bind(this));return}this.doConnectedCallback()}doConnectedCallback(){var ee=this,ne=this.hasAttribute("embedded");this.setAttribute("inspector",""),this.setAttribute("keyboard-shortcuts",""),this.setAttribute("screenshot",""),this.setAttribute("vr-mode-ui",""),this.setAttribute("device-orientation-permission-ui",""),super.connectedCallback(),se(this),this.setupRenderer(),p.setup(this,N),this.resize(),ne||this.addFullScreenStyles(),b(this),h(this),m(this),this.onVRPresentChangeBound=_(this.onVRPresentChange,this),window.addEventListener("vrdisplaypresentchange",this.onVRPresentChangeBound),this.enterVRBound=function(){ee.enterVR()},this.exitVRBound=function(){ee.exitVR()},this.exitVRTrueBound=function(){ee.exitVR(!0)},this.pointerRestrictedBound=function(){ee.pointerRestricted()},this.pointerUnrestrictedBound=function(){ee.pointerUnrestricted()},P||(window.addEventListener("vrdisplaydeactivate",this.exitVRBound),window.addEventListener("vrdisplaydisconnect",this.exitVRTrueBound),window.addEventListener("vrdisplaypointerrestricted",this.pointerRestrictedBound),window.addEventListener("vrdisplaypointerunrestricted",this.pointerUnrestrictedBound)),window.addEventListener("sessionend",this.resize),this.addEventListener("cameraready",function(){ee.attachedCallbackPostCamera()}),this.initSystems(),this.hasWebXR&&navigator.xr&&navigator.xr.addEventListener&&navigator.xr.addEventListener("sessiongranted",function(){ee.enterVR()})}attachedCallbackPostCamera(){var ee,ne=this;window.addEventListener("load",ee),window.addEventListener("resize",function(){ne.isIOS?setTimeout(ne.resize,100):ne.resize()}),this.play(),A.push(this)}initSystems(){var ee;this.initSystem("camera");for(ee in v)ee!=="camera"&&this.initSystem(ee)}initSystem(ee){this.systems[ee]||(this.systems[ee]=new v[ee](this),this.systemNames.push(ee))}disconnectedCallback(){var ee=A.indexOf(this);super.disconnectedCallback(),A.splice(ee,1),window.removeEventListener("vrdisplaypresentchange",this.onVRPresentChangeBound),window.removeEventListener("vrdisplayactivate",this.enterVRBound),window.removeEventListener("vrdisplaydeactivate",this.exitVRBound),window.removeEventListener("vrdisplayconnect",this.enterVRBound),window.removeEventListener("vrdisplaydisconnect",this.exitVRTrueBound),window.removeEventListener("vrdisplaypointerrestricted",this.pointerRestrictedBound),window.removeEventListener("vrdisplaypointerunrestricted",this.pointerUnrestrictedBound),window.removeEventListener("sessionend",this.resize),this.renderer.dispose()}addBehavior(ee){var ne,X=this.behaviors,W;for(W in X)ee[W]&&(ne=this.behaviors[W],ne.indexOf(ee)===-1&&ne.push(ee))}getPointerLockElement(){return document.pointerLockElement}checkHeadsetConnected(){return x.device.checkHeadsetConnected()}enterAR(){var ee;if(!this.hasWebXR)throw ee="Failed to enter AR mode, WebXR not supported.",new Error(ee);if(!x.device.checkARSupport())throw ee="Failed to enter AR, WebXR immersive-ar mode not supported in your browser or device.",new Error(ee);return this.enterVR(!0)}enterVR(ee){var ne=this,X,W=ne.renderer.xr,ce;if(this.is("vr-mode"))return Promise.resolve("Already in VR.");if(this.checkHeadsetConnected()||this.isMobile){var he=ne.getAttribute("renderer");if(W.enabled=!0,this.hasWebXR){this.xrSession&&this.xrSession.removeEventListener("end",this.exitVRBound);var xe=this.sceneEl.systems.webxr.sessionReferenceSpaceType;W.setReferenceSpaceType(xe);var ve=ee?"immersive-ar":"immersive-vr";return ce=this.sceneEl.systems.webxr.sessionConfiguration,new Promise(function(He,Ot){navigator.xr.requestSession(ve,ce).then(function(gt){ne.xrSession=gt,W.layersEnabled=ce.requiredFeatures.indexOf("layers")!==-1,W.setSession(gt).then(function(){W.setFoveation(he.foveationLevel)}),gt.addEventListener("end",ne.exitVRBound),je(He)},function(gt){var It=ve==="immersive-ar",ct=It?"AR":"VR";throw new Error("Failed to enter "+ct+" mode (`requestSession`) "+gt)})})}else{if(X=x.device.getVRDisplay(),W.setDevice(X),X.isPresenting&&!window.hasNativeWebVRImplementation)return je(),Promise.resolve();var Fe={highRefreshRate:he.highRefreshRate};return X.requestPresent([{source:this.canvas,attributes:Fe}]).then(je,rt)}}return je(),Promise.resolve();function je(He){var Ot;window.hasNativeWebVRImplementation&&!window.hasNativeWebXRImplementation&&(Ot=new CustomEvent("vrdisplaypresentchange",{detail:{display:x.device.getVRDisplay()}}),window.dispatchEvent(Ot)),ee?ne.addState("ar-mode"):ne.addState("vr-mode"),ne.emit("enter-vr",{target:ne}),!P&&ne.isMobile&&screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape"),ne.addFullScreenStyles(),!ne.isMobile&&!ne.checkHeadsetConnected()&&J(ne.canvas),ne.resize(),He&&He()}function rt(He){throw ne.removeState("vr-mode"),He&&He.message?new Error("Failed to enter VR mode (`requestPresent`): "+He.message):new Error("Failed to enter VR mode (`requestPresent`).")}}exitVR(){var ee=this,ne,X=this.renderer.xr;if(!this.is("vr-mode")&&!this.is("ar-mode"))return Promise.resolve("Not in immersive mode.");if(this.checkHeadsetConnected()||this.isMobile){if(X.enabled=!1,ne=x.device.getVRDisplay(),this.hasWebXR)this.xrSession.removeEventListener("end",this.exitVRBound),this.xrSession.end().then(function(){},function(){}),this.xrSession=void 0;else if(ne.isPresenting)return ne.exitPresent().then(W,ce)}else K();return W(),Promise.resolve();function W(){ee.removeState("vr-mode"),ee.removeState("ar-mode"),ee.isMobile&&screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock(),ee.hasAttribute("embedded")&&ee.removeFullScreenStyles(),ee.resize(),ee.isIOS&&x.forceCanvasResizeSafariMobile(ee.canvas),ee.renderer.setPixelRatio(window.devicePixelRatio),ee.emit("exit-vr",{target:ee})}function ce(he){throw he&&he.message?new Error("Failed to exit VR mode (`exitPresent`): "+he.message):new Error("Failed to exit VR mode (`exitPresent`).")}}pointerRestricted(){if(this.canvas){var ee=this.getPointerLockElement();ee&&ee!==this.canvas&&document.exitPointerLock&&document.exitPointerLock(),this.canvas.requestPointerLock&&this.canvas.requestPointerLock()}}pointerUnrestricted(){var ee=this.getPointerLockElement();ee&&ee===this.canvas&&document.exitPointerLock&&document.exitPointerLock()}onVRPresentChange(ee){var ne=ee.display||ee.detail.display;if(ne&&ne.isPresenting){this.enterVR();return}this.exitVR()}getAttribute(ee){var ne=this.systems[ee];return ne?ne.data:C.prototype.getAttribute.call(this,ee)}getComputedAttribut(ee){O("`getComputedAttribute` is deprecated. Use `getAttribute` instead."),this.getAttribute(ee)}getDOMAttribute(ee){var ne=this.systems[ee];return ne?ne.data:C.prototype.getDOMAttribute.call(this,ee)}setAttribute(ee,ne,X){var W=this.systems[ee];if(W){g.prototype.setAttribute.call(this,ee,ne),W.updateProperties(ne);return}C.prototype.setAttribute.call(this,ee,ne,X)}removeBehavior(ee){var ne,X,W=this.behaviors,ce;for(X in W)ee[X]&&(ne=this.behaviors[X],ce=ne.indexOf(ee),ce!==-1&&ne.splice(ce,1))}resize(){var ee=this.camera,ne=this.canvas,X,W,ce,he=this.renderer.xr.isPresenting;W=this.renderer.xr.enabled&&he,!(!ee||!ne||this.is("vr-mode")&&(this.isMobile||W))&&(X=this.getAttribute("embedded")&&!this.is("vr-mode"),ce=N(ne,X,this.maxCanvasSize,this.is("vr-mode")),ee.aspect=ce.width/ce.height,ee.updateProjectionMatrix(),this.renderer.setSize(ce.width,ce.height,!1),this.emit("rendererresize",null,!1))}setupRenderer(){var ee=this,ne,X,W,ce;ce={alpha:!0,antialias:!R,canvas:this.canvas,logarithmicDepthBuffer:!1,powerPreference:"high-performance"},this.maxCanvasSize={height:1920,width:1920},this.hasAttribute("renderer")&&(W=this.getAttribute("renderer"),X=x.styleParser.parse(W),X.precision&&(ce.precision=X.precision+"p"),X.antialias&&X.antialias!=="auto"&&(ce.antialias=X.antialias==="true"),X.logarithmicDepthBuffer&&X.logarithmicDepthBuffer!=="auto"&&(ce.logarithmicDepthBuffer=X.logarithmicDepthBuffer==="true"),X.alpha&&(ce.alpha=X.alpha==="true"),this.maxCanvasSize={width:X.maxCanvasWidth?parseInt(X.maxCanvasWidth):this.maxCanvasSize.width,height:X.maxCanvasHeight?parseInt(X.maxCanvasHeight):this.maxCanvasSize.height}),ne=this.renderer=new y.WebGLRenderer(ce),ne.setPixelRatio(window.devicePixelRatio),ne.sortObjects=!1,this.camera&&ne.xr.setPoseTarget(this.camera.el.object3D),this.addEventListener("camera-set-active",function(){ne.xr.setPoseTarget(ee.camera.el.object3D)})}play(){var ee=this,ne=this;if(this.renderStarted){C.prototype.play.call(this);return}this.addEventListener("loaded",function(){var X=this.renderer,W,ce=this.renderer.xr;C.prototype.play.call(this),!ne.renderStarted&&(ne.resize(),ne.renderer&&(window.performance&&window.performance.mark("render-started"),p.remove(),W=x.device.getVRDisplay(),W&&W.isPresenting&&(ce.setDevice(W),ce.enabled=!0,ne.enterVR()),X.setAnimationLoop(this.render),ne.renderStarted=!0,ne.emit("renderstart")))}),setTimeout(function(){C.prototype.load.call(ee)})}updateComponent(ee){ee in v||C.prototype.updateComponent.apply(this,arguments)}tick(ee,ne){var X,W=this.systems;for(X=0;X<this.behaviors.tick.length;X++)this.behaviors.tick[X].el.isPlaying&&this.behaviors.tick[X].tick(ee,ne);for(X=0;X<this.systemNames.length;X++)W[this.systemNames[X]].tick&&W[this.systemNames[X]].tick(ee,ne)}tock(ee,ne,X){var W,ce=this.systems;for(W=0;W<this.behaviors.tock.length;W++)this.behaviors.tock[W].el.isPlaying&&this.behaviors.tock[W].tock(ee,ne,X);for(W=0;W<this.systemNames.length;W++)ce[this.systemNames[W]].tock&&ce[this.systemNames[W]].tock(ee,ne,X)}render(ee,ne){var X=this.renderer;this.frame=ne,this.delta=this.clock.getDelta()*1e3,this.time=this.clock.elapsedTime*1e3,this.isPlaying&&this.tick(this.time,this.delta);var W=null;this.is("ar-mode")&&(W=this.object3D.background,this.object3D.background=null),X.render(this.object3D,this.camera),W&&(this.object3D.background=W)}}function L(ae,ee){var ne,X=window.devicePixelRatio;return!ee||ee.width===-1&&ee.height===-1||ae.width*X<ee.width&&ae.height*X<ee.height||(ne=ae.width/ae.height,ae.width*X>ee.width&&ee.width!==-1&&(ae.width=Math.round(ee.width/X),ae.height=Math.round(ee.width/ne/X)),ae.height*X>ee.height&&ee.height!==-1&&(ae.height=Math.round(ee.height/X),ae.width=Math.round(ee.height*ne/X))),ae}window.customElements.define("a-scene",D);function N(ae,ee,ne,X){if(!ae.parentElement)return{height:0,width:0};if(ee){var W;return W={height:ae.parentElement.offsetHeight,width:ae.parentElement.offsetWidth},L(W,ne)}return H(ne,X)}function H(ae,ee){var ne;return ne={height:document.body.offsetHeight,width:document.body.offsetWidth},ee?ne:L(ne,ae)}function J(ae){var ee=ae.requestFullscreen||ae.webkitRequestFullscreen||ae.mozRequestFullScreen||ae.msRequestFullscreen;ee.apply(ae,[{navigationUI:"hide"}])}function K(){var ae=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement;ae&&(document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen())}function se(ae){var ee;ee=document.createElement("canvas"),ee.classList.add("a-canvas"),ee.dataset.aframeCanvas=!0,ae.appendChild(ee),document.addEventListener("fullscreenchange",ne),document.addEventListener("mozfullscreenchange",ne),document.addEventListener("webkitfullscreenchange",ne),document.addEventListener("MSFullscreenChange",ne),ee.addEventListener("touchmove",function(X){X.preventDefault()}),ae.canvas=ee,ae.emit("render-target-loaded",{target:ee}),setTimeout(_(ae.resize,ae),0);function ne(){var X=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement;X||ae.exitVR(),document.activeElement.blur(),document.body.focus()}}l.exports.setupCanvas=se,l.exports.AScene=D},"./src/core/scene/loadingScreen.js":(l,d,c)=>{var h=c("./src/utils/index.js"),m=h.styleParser,p,A,v,y="loading-screen",x="a-loader-title";l.exports.setup=function(_,S){p=_,v=S;var R=p.hasAttribute(y)?m.parse(p.getAttribute(y)):void 0,P=R&&R.dotsColor||"white",O=R&&R.backgroundColor||"#24CAFF",D=R===void 0||R.enabled==="true"||R.enabled===void 0,L,N,H,J,K,se,ae,ee,ne,X;D&&(L=new THREE.Scene,N=new THREE.SphereGeometry(.2,36,18,0,2*Math.PI,0,Math.PI),H=new THREE.MeshBasicMaterial({color:P}),J=new THREE.Mesh(N,H),K=J.clone(),se=J.clone(),ae=new THREE.PerspectiveCamera(80,window.innerWidth/window.innerHeight,5e-4,1e4),ee=new THREE.Clock,ne=0,X=function(){p.renderer.render(L,ae),ne=ee.getElapsedTime()%4,J.visible=ne>=1,K.visible=ne>=2,se.visible=ne>=3},L.background=new THREE.Color(O),L.add(ae),J.position.set(-1,0,-15),K.position.set(0,0,-15),se.position.set(1,0,-15),ae.add(J),ae.add(K),ae.add(se),g(),setTimeout(function(){p.hasLoaded||(C(ae),A.style.display="block",window.addEventListener("resize",function(){C(ae)}),p.renderer.setAnimationLoop(X))},200))},l.exports.remove=function(){window.removeEventListener("resize",C),A&&(A.style.display="none")};function C(b){var _=p.hasAttribute("embedded"),S=v(p.canvas,_,p.maxCanvasSize,p.is("vr-mode"));b.aspect=S.width/S.height,b.updateProjectionMatrix(),p.renderer.setSize(S.width,S.height,!1)}function g(){A=document.createElement("div"),A.className=x,A.innerHTML=document.title,A.style.display="none",p.appendChild(A)}},"./src/core/scene/metaTags.js":(l,d,c)=>{var h=c("./src/constants/index.js"),m=c("./src/utils/index.js").extend,p=l.exports.MOBILE_HEAD_TAGS=[v({name:"viewport",content:"width=device-width,initial-scale=1,maximum-scale=1,shrink-to-fit=no,user-scalable=no,minimal-ui,viewport-fit=cover"}),v({name:"mobile-web-app-capable",content:"yes"}),v({name:"theme-color",content:"black"})],A=[v({name:"apple-mobile-web-app-capable",content:"yes"}),v({name:"apple-mobile-web-app-status-bar-style",content:"black"}),y({rel:"apple-touch-icon",href:"https://aframe.io/images/aframe-logo-152.png"})];function v(C){return{tagName:"meta",attributes:C,exists:function(){return document.querySelector('meta[name="'+C.name+'"]')}}}function y(C){return{tagName:"link",attributes:C,exists:function(){return document.querySelector('link[rel="'+C.rel+'"]')}}}l.exports.inject=function(g){var b=document.head,_=b.querySelector("script"),S,R=[];return p.forEach(P),g.isIOS&&A.forEach(P),R;function P(O){!O||O.exists()||(S=x(O),S&&(_?_.parentNode.insertBefore(S,_):b.appendChild(S),R.push(S)))}};function x(C){if(!(!C||!C.tagName)){var g=document.createElement(C.tagName);return g.setAttribute(h.AFRAME_INJECTED,""),m(g,C.attributes)}}},"./src/core/scene/postMessage.js":(l,d,c)=>{var h=c("./src/utils/bind.js"),m=c("./src/utils/index.js").isIframed;l.exports=function(v){m()&&window.addEventListener("message",h(p,v))};function p(A){var v=this;if(A.data)switch(A.data.type){case"vr":switch(A.data.data){case"enter":v.enterVR();break;case"exit":v.exitVR();break}}}},"./src/core/scene/scenes.js":l=>{l.exports=[]},"./src/core/scene/wakelock.js":(l,d,c)=>{var h=c("./vendor/wakelock/wakelock.js");l.exports=function(p){if(p.isMobile){var A=p.wakelock=new h;p.addEventListener("enter-vr",function(){A.request()}),p.addEventListener("exit-vr",function(){A.release()})}}},"./src/core/schema.js":(l,d,c)=>{var h=c("./src/utils/index.js"),m=c("./src/core/propertyTypes.js"),p=h.debug,A=m.isValidDefaultValue,v=m.propertyTypes,y=p("core:schema:warn");function x(_){return"type"in _?typeof _.type=="string":"default"in _}l.exports.isSingleProperty=x,l.exports.process=function(_,S){var R;if(x(_))return C(_,S);for(R in _)_[R]=C(_[R],S);return _};function C(_,S){var R=_.default,P,O,D=_.type;return _.type?_.type==="bool"?D="boolean":_.type==="float"&&(D="number"):R!==void 0&&(typeof R=="boolean"||typeof R=="number")?D=typeof R:Array.isArray(R)?D="array":D="string",O=v[D],O||y("Unknown property type for component `"+S+"`: "+D),P=!!_.parse,_.parse=_.parse||O.parse,_.stringify=_.stringify||O.stringify,_.type=D,"default"in _?!P&&!A(D,R)&&y("Default value `"+R+"` does not match type `"+D+"` in component `"+S+"`"):_.default=O.default,_}l.exports.processPropertyDefinition=C,l.exports.parseProperties=function(){var _=[];return function(S,R,P,O,D){var L,N,H,J;_.length=0;for(N in P?S:R)P&&S[N]===void 0||_.push(N);if(S===null||typeof S!="object")return S;for(N in S)S[N]!==void 0&&!R[N]&&!D&&y("Unknown property `"+N+"` for component/system `"+O+"`.");for(L=0;L<_.length;L++){if(N=_[L],H=R[N],J=S[N],!R[N])return;S[N]=g(J,H)}return S}}();function g(_,S){return(_==null||_==="")&&(_=S.default,Array.isArray(_)&&(_=_.slice())),S.parse(_,S.default)}l.exports.parseProperty=g,l.exports.stringifyProperties=function(_,S){var R,P,O,D={},L;for(R in _)P=S[R],O=_[R],L=O,typeof L=="object"&&(L=b(O,P),P||y("Unknown component property: "+R)),D[R]=L;return D};function b(_,S){return typeof _!="object"?_:!S||_===null?JSON.stringify(_):S.stringify(_)}l.exports.stringifyProperty=b},"./src/core/shader.js":(l,d,c)=>{var h=c("./src/core/schema.js"),m=h.process,p=l.exports.shaders={},A=l.exports.shaderNames=[],v=c("./src/lib/three.js"),y=c("./src/utils/index.js"),x={array:"v3",color:"v3",int:"i",number:"f",map:"t",time:"f",vec2:"v2",vec3:"v3",vec4:"v4"},C=l.exports.Shader=function(){};C.prototype={schema:{},vertexShader:"void main() {gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);}",fragmentShader:"void main() {gl_FragColor = vec4(1.0, 0.0, 1.0, 1.0);}",init:function(g){return this.attributes=this.initVariables(g,"attribute"),this.uniforms=this.initVariables(g,"uniform"),this.material=new(this.raw?v.RawShaderMaterial:v.ShaderMaterial)({uniforms:this.uniforms,vertexShader:this.vertexShader,fragmentShader:this.fragmentShader}),this.material},initVariables:function(g,b){var _,S=this.schema,R={},P;for(_ in S)S[_].is===b&&(P=x[S[_].type],R[_]={type:P,value:void 0});return R},update:function(g){this.updateVariables(g,"attribute"),this.updateVariables(g,"uniform")},updateVariables:function(g,b){var _,S,R=this.schema,P;P=b==="uniform"?this.uniforms:this.attributes;for(_ in g)if(!(!R[_]||R[_].is!==b)){if(R[_].type==="map"){if(!P[_]||P[_].value===g[_])continue;S="_texture_"+_,this.setMapOnTextureLoad(P,_,S),y.material.updateMapMaterialFromData(S,_,this,g);continue}P[_].value=this.parseValue(R[_].type,g[_]),P[_].needsUpdate=!0}},parseValue:function(g,b){var _;switch(g){case"vec2":return new v.Vector2(b.x,b.y);case"vec3":return new v.Vector3(b.x,b.y,b.z);case"vec4":return new v.Vector4(b.x,b.y,b.z,b.w);case"color":return _=new v.Color(b),new v.Vector3(_.r,_.g,_.b);case"map":return v.ImageUtils.loadTexture(b);default:return b}},setMapOnTextureLoad:function(g,b,_){var S=this;this.el.addEventListener("materialtextureloaded",function(){g[b].value=S.material[_],g[b].needsUpdate=!0})}},l.exports.registerShader=function(g,b){var _,S={};if(Object.keys(b).forEach(function(R){S[R]={value:b[R],writable:!0}}),p[g])throw new Error("The shader "+g+" has been already registered");return _=function(){C.call(this)},_.prototype=Object.create(C.prototype,S),_.prototype.name=g,_.prototype.constructor=_,p[g]={Shader:_,schema:m(_.prototype.schema)},A.push(g),_}},"./src/core/system.js":(l,d,c)=>{var h=c("./src/core/component.js"),m=c("./src/core/schema.js"),p=c("./src/utils/index.js"),A=m.parseProperties,v=m.parseProperty,y=m.process,x=m.isSingleProperty,C=p.styleParser,g=l.exports.systems={},b=l.exports.System=function(_){var S=h&&h.components[this.name];this.el=_,this.sceneEl=_,S&&(S.Component.prototype.system=this),this.buildData(),this.init(),this.update({})};b.prototype={schema:{},init:function(){},update:function(_){},updateProperties:function(_){var S=this.data;Object.keys(m).length&&(this.buildData(_),this.update(S))},buildData:function(_){var S=this.schema;Object.keys(S).length&&(_=_||window.HTMLElement.prototype.getAttribute.call(this.sceneEl,this.name),x(S)?this.data=v(_,S):this.data=A(C.parse(_)||{},S))},tick:void 0,tock:void 0,play:function(){},pause:function(){}},l.exports.registerSystem=function(_,S){var R,P,O={},D=p.findAllScenes(document);if(Object.keys(S).forEach(function(L){O[L]={value:S[L],writable:!0}}),g[_])throw new Error("The system `"+_+"` has been already registered. Check that you are not loading two versions of the same system or two different systems of the same name.");for(P=function(L){b.call(this,L)},P.prototype=Object.create(b.prototype,O),P.prototype.name=_,P.prototype.constructor=P,P.prototype.schema=p.extend(y(P.prototype.schema)),g[_]=P,R=0;R<D.length;R++)D[R].initSystem(_)}},"./src/extras/components/index.js":(l,d,c)=>{c("./src/extras/components/pivot.js")},"./src/extras/components/pivot.js":(l,d,c)=>{var h=c("./src/core/component.js").registerComponent,m=c("./src/lib/three.js"),p=new m.Vector3,A=new m.Vector3;h("pivot",{dependencies:["position"],schema:{type:"vec3"},init:function(){var v=this.data,y=this.el,x=y.object3D.parent,C=y.object3D,g=new m.Group;p.copy(C.position),A.copy(C.rotation),x.remove(C),g.add(C),x.add(g),y.object3D=g,C.position.set(-1*v.x,-1*v.y,-1*v.z),g.position.set(v.x+p.x,v.y+p.y,v.z+p.z),g.rotation.copy(C.rotation),C.rotation.set(0,0,0)}})},"./src/extras/primitives/getMeshMixin.js":(l,d,c)=>{var h=c("./src/core/component.js").components,m=c("./src/core/shader.js").shaders,p=c("./src/utils/index.js"),A={};Object.keys(h.material.schema).forEach(v),Object.keys(m.standard.schema).forEach(v);function v(y){var x=y.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();y==="fog"&&(x="material-fog"),y==="visible"&&(x="material-visible"),A[x]="material."+y}l.exports=function(){return{defaultComponents:{material:{}},mappings:p.extend({},A)}}},"./src/extras/primitives/index.js":(l,d,c)=>{c("./src/extras/primitives/primitives/a-camera.js"),c("./src/extras/primitives/primitives/a-cursor.js"),c("./src/extras/primitives/primitives/a-curvedimage.js"),c("./src/extras/primitives/primitives/a-gltf-model.js"),c("./src/extras/primitives/primitives/a-image.js"),c("./src/extras/primitives/primitives/a-light.js"),c("./src/extras/primitives/primitives/a-link.js"),c("./src/extras/primitives/primitives/a-obj-model.js"),c("./src/extras/primitives/primitives/a-sky.js"),c("./src/extras/primitives/primitives/a-sound.js"),c("./src/extras/primitives/primitives/a-text.js"),c("./src/extras/primitives/primitives/a-video.js"),c("./src/extras/primitives/primitives/a-videosphere.js"),c("./src/extras/primitives/primitives/meshPrimitives.js")},"./src/extras/primitives/primitives.js":(l,d,c)=>{var h=c("./src/core/a-node.js").knownTags,m=c("./src/core/a-entity.js").AEntity,p=c("./src/core/component.js").components,A=c("./src/utils/index.js"),v=A.debug,y=A.entity.setComponentProperty,x=v("extras:primitives:debug"),C=v("extras:primitives:warn"),g=v("extras:primitives:error"),b=l.exports.primitives={};l.exports.registerPrimitive=function(P,O){if(P=P.toLowerCase(),h[P]){g("Trying to register primitive "+P+" that has been already previously registered");return}h[P]=!0,x("Registering <%s>",P),O.defaultAttributes&&C("The 'defaultAttributes' object is deprecated. Use 'defaultComponents' instead.");var D=O.mappings||{},L=class extends m{constructor(){super(),this.defaultComponentsFromPrimitive=O.defaultComponents||O.defaultAttributes||{},this.deprecated=O.deprecated||null,this.deprecatedMappings=O.deprecatedMappings||{},this.mappings=D,O.deprecated&&console.warn(O.deprecated),this.resolveMappingCollisions()}resolveMappingCollisions(){var N=this.mappings,H=this;Object.keys(N).forEach(function(K){var se;K!==K.toLowerCase()&&C("Mapping keys should be specified in lower case. The mapping key "+K+" may not be recognized"),p[K]&&(se=N[K].replace(".","-"),N[se]=N[K],delete N[K],console.warn("The primitive "+H.tagName.toLowerCase()+" has a mapping collision. The attribute "+K+" has the same name as a registered component and has been renamed to "+se))})}getExtraComponents(){var N,H,J,K,se,ae,ee=this;for(H=A.clone(this.defaultComponentsFromPrimitive),se=this.getAttribute("mixin"),se&&(se=se.trim().split(" "),se.forEach(function(xe){var ve=ee.sceneEl.querySelector("#"+xe).componentCache;Object.keys(ve).forEach(function(je){H[je]=ne(H[je],ve[je])})})),J=0;J<this.attributes.length;J++)if(N=this.attributes[J],K=this.mappings[N.name],K){ae=A.entity.getComponentPropertyPath(K),ae.constructor===Array?(H[ae[0]]=H[ae[0]]||{},H[ae[0]][ae[1]]=N.value.trim()):H[ae]=N.value.trim();continue}return H;function ne(he,xe){return X(he)?W(xe):X(xe)?W(he):ce(he)&&ce(xe)?A.extendDeep(he,xe):W(xe)}function X(he){return typeof he>"u"}function W(he){return ce(he)?A.extendDeep({},he):he}function ce(he){return he!==null&&he.constructor===Object}}attributeChangedCallback(N,H,J){var K=this.mappings[N];if(N in this.deprecatedMappings&&console.warn(this.deprecatedMappings[N]),!N||!K){super.attributeChangedCallback(N,H,J);return}y(this,K,J)}};return customElements.define(P,L),L.mappings=D,b[P]=L,L};function _(R,P){var O=p[R].schema;Object.keys(O).map(function(D){var L=D.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();P[L]!==void 0&&(L=R+"-"+D),P[L]=R+"."+D})}function S(R,P,O){O=O||{},Object.keys(P).map(function(L){_(L,O)}),l.exports.registerPrimitive(R,A.extendDeep({},null,{defaultComponents:P,mappings:O}))}l.exports.definePrimitive=S},"./src/extras/primitives/primitives/a-camera.js":(l,d,c)=>{var h=c("./src/extras/primitives/primitives.js").registerPrimitive;h("a-camera",{defaultComponents:{camera:{},"look-controls":{},"wasd-controls":{},position:{x:0,y:1.6,z:0}},mappings:{active:"camera.active",far:"camera.far",fov:"camera.fov","look-controls-enabled":"look-controls.enabled",near:"camera.near","pointer-lock-enabled":"look-controls.pointerLockEnabled","wasd-controls-enabled":"wasd-controls.enabled","reverse-mouse-drag":"look-controls.reverseMouseDrag",zoom:"camera.zoom"}})},"./src/extras/primitives/primitives/a-cursor.js":(l,d,c)=>{var h=c("./src/extras/primitives/getMeshMixin.js"),m=c("./src/extras/primitives/primitives.js").registerPrimitive,p=c("./src/utils/index.js");m("a-cursor",p.extendDeep({},h(),{defaultComponents:{cursor:{},geometry:{primitive:"ring",radiusOuter:.016,radiusInner:.01,segmentsTheta:32},material:{color:"#000",shader:"flat",opacity:.8},position:{x:0,y:0,z:-1}},mappings:{far:"raycaster.far",fuse:"cursor.fuse","fuse-timeout":"cursor.fuseTimeout",interval:"raycaster.interval",objects:"raycaster.objects"}}))},"./src/extras/primitives/primitives/a-curvedimage.js":(l,d,c)=>{var h=c("./src/extras/primitives/getMeshMixin.js"),m=c("./src/extras/primitives/primitives.js").registerPrimitive,p=c("./src/utils/index.js");m("a-curvedimage",p.extendDeep({},h(),{defaultComponents:{geometry:{height:1,primitive:"cylinder",radius:2,segmentsRadial:48,thetaLength:270,openEnded:!0,thetaStart:0},material:{color:"#FFF",shader:"flat",side:"double",transparent:!0,repeat:"-1 1"}},mappings:{height:"geometry.height","open-ended":"geometry.openEnded",radius:"geometry.radius",segments:"geometry.segmentsRadial",start:"geometry.thetaStart","theta-length":"geometry.thetaLength","theta-start":"geometry.thetaStart",width:"geometry.thetaLength"}}))},"./src/extras/primitives/primitives/a-gltf-model.js":(l,d,c)=>{var h=c("./src/extras/primitives/primitives.js").registerPrimitive;h("a-gltf-model",{mappings:{src:"gltf-model"}})},"./src/extras/primitives/primitives/a-image.js":(l,d,c)=>{var h=c("./src/extras/primitives/getMeshMixin.js"),m=c("./src/extras/primitives/primitives.js").registerPrimitive,p=c("./src/utils/index.js");m("a-image",p.extendDeep({},h(),{defaultComponents:{geometry:{primitive:"plane"},material:{color:"#FFF",shader:"flat",side:"double",transparent:!0}},mappings:{height:"geometry.height",width:"geometry.width"}}))},"./src/extras/primitives/primitives/a-light.js":(l,d,c)=>{var h=c("./src/extras/primitives/primitives.js").registerPrimitive;h("a-light",{defaultComponents:{light:{}},mappings:{angle:"light.angle",color:"light.color","ground-color":"light.groundColor",decay:"light.decay",distance:"light.distance",intensity:"light.intensity",penumbra:"light.penumbra",type:"light.type",target:"light.target",envmap:"light.envMap","shadow-camera-automatic":"light.shadowCameraAutomatic"}})},"./src/extras/primitives/primitives/a-link.js":(l,d,c)=>{var h=c("./src/extras/primitives/primitives.js").registerPrimitive;h("a-link",{defaultComponents:{link:{visualAspectEnabled:!0}},mappings:{href:"link.href",image:"link.image",title:"link.title"}})},"./src/extras/primitives/primitives/a-obj-model.js":(l,d,c)=>{var h=c("./src/extras/primitives/getMeshMixin.js")(),m=c("./src/extras/primitives/primitives.js").registerPrimitive,p=c("./src/utils/index.js");m("a-obj-model",p.extendDeep({},h,{defaultComponents:{"obj-model":{}},mappings:{src:"obj-model.obj",mtl:"obj-model.mtl"}}))},"./src/extras/primitives/primitives/a-sky.js":(l,d,c)=>{var h=c("./src/extras/primitives/getMeshMixin.js"),m=c("./src/extras/primitives/primitives.js").registerPrimitive,p=c("./src/utils/index.js"),A=c("./src/extras/primitives/primitives/meshPrimitives.js");m("a-sky",p.extendDeep({},h(),{defaultComponents:{geometry:{primitive:"sphere",radius:500,segmentsWidth:64,segmentsHeight:32},material:{color:"#FFF",side:"back",shader:"flat",npot:!0},scale:"-1 1 1"},mappings:p.extendDeep({},A["a-sphere"].mappings)}))},"./src/extras/primitives/primitives/a-sound.js":(l,d,c)=>{var h=c("./src/extras/primitives/primitives.js").registerPrimitive;h("a-sound",{defaultComponents:{sound:{}},mappings:{src:"sound.src",on:"sound.on",autoplay:"sound.autoplay",loop:"sound.loop",volume:"sound.volume"}})},"./src/extras/primitives/primitives/a-text.js":(l,d,c)=>{var h=c("./src/extras/primitives/primitives.js").definePrimitive;h("a-text",{text:{anchor:"align",width:5}})},"./src/extras/primitives/primitives/a-video.js":(l,d,c)=>{var h=c("./src/extras/primitives/getMeshMixin.js"),m=c("./src/extras/primitives/primitives.js").registerPrimitive,p=c("./src/utils/index.js");m("a-video",p.extendDeep({},h(),{defaultComponents:{geometry:{primitive:"plane"},material:{color:"#FFF",shader:"flat",side:"double",transparent:!0}},mappings:{height:"geometry.height",width:"geometry.width"}}))},"./src/extras/primitives/primitives/a-videosphere.js":(l,d,c)=>{var h=c("./src/extras/primitives/getMeshMixin.js"),m=c("./src/extras/primitives/primitives.js").registerPrimitive,p=c("./src/utils/index.js");m("a-videosphere",p.extendDeep({},h(),{defaultComponents:{geometry:{primitive:"sphere",radius:500,segmentsWidth:64,segmentsHeight:32},material:{color:"#FFF",shader:"flat",side:"back",npot:!0},scale:"-1 1 1"},mappings:{radius:"geometry.radius","segments-height":"geometry.segmentsHeight","segments-width":"geometry.segmentsWidth"}}))},"./src/extras/primitives/primitives/meshPrimitives.js":(l,d,c)=>{var h=c("./src/extras/primitives/getMeshMixin.js"),m=c("./src/core/geometry.js").geometries,p=c("./src/core/geometry.js").geometryNames,A=c("./src/extras/primitives/primitives.js").registerPrimitive,v=c("./src/utils/index.js"),y=l.exports={};p.forEach(function(g){var b=m[g],_=x(g),S={};Object.keys(b.schema).forEach(function(D){S[x(D)]="geometry."+D});var R="a-"+_,P=A(R,v.extendDeep({},h(),{defaultComponents:{geometry:{primitive:g}},mappings:S}));y[R]=P});function x(C){return C.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}},"./src/geometries/box.js":(l,d,c)=>{var h=c("./src/core/geometry.js").registerGeometry,m=c("./src/lib/three.js");h("box",{schema:{depth:{default:1,min:0},height:{default:1,min:0},width:{default:1,min:0},segmentsHeight:{default:1,min:1,max:20,type:"int"},segmentsWidth:{default:1,min:1,max:20,type:"int"},segmentsDepth:{default:1,min:1,max:20,type:"int"}},init:function(p){this.geometry=new m.BoxGeometry(p.width,p.height,p.depth,p.segmentsWidth,p.segmentsHeight,p.segmentsDepth)}})},"./src/geometries/circle.js":(l,d,c)=>{var h=c("./src/core/geometry.js").registerGeometry,m=c("./src/lib/three.js"),p=m.MathUtils.degToRad;h("circle",{schema:{radius:{default:1,min:0},segments:{default:32,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(A){this.geometry=new m.CircleGeometry(A.radius,A.segments,p(A.thetaStart),p(A.thetaLength))}})},"./src/geometries/cone.js":(l,d,c)=>{var h=c("./src/core/geometry.js").registerGeometry,m=c("./src/lib/three.js"),p=m.MathUtils.degToRad;h("cone",{schema:{height:{default:1,min:0},openEnded:{default:!1},radiusBottom:{default:1,min:0},radiusTop:{default:.01,min:0},segmentsHeight:{default:18,min:1,type:"int"},segmentsRadial:{default:36,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(A){this.geometry=new m.CylinderGeometry(A.radiusTop,A.radiusBottom,A.height,A.segmentsRadial,A.segmentsHeight,A.openEnded,p(A.thetaStart),p(A.thetaLength))}})},"./src/geometries/cylinder.js":(l,d,c)=>{var h=c("./src/core/geometry.js").registerGeometry,m=c("./src/lib/three.js"),p=m.MathUtils.degToRad;h("cylinder",{schema:{height:{default:1,min:0},openEnded:{default:!1},radius:{default:1,min:0},segmentsHeight:{default:18,min:1,type:"int"},segmentsRadial:{default:36,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(A){this.geometry=new m.CylinderGeometry(A.radius,A.radius,A.height,A.segmentsRadial,A.segmentsHeight,A.openEnded,p(A.thetaStart),p(A.thetaLength))}})},"./src/geometries/dodecahedron.js":(l,d,c)=>{var h=c("./src/core/geometry.js").registerGeometry,m=c("./src/lib/three.js");h("dodecahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(p){this.geometry=new m.DodecahedronGeometry(p.radius,p.detail)}})},"./src/geometries/icosahedron.js":(l,d,c)=>{var h=c("./src/core/geometry.js").registerGeometry,m=c("./src/lib/three.js");h("icosahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(p){this.geometry=new m.IcosahedronGeometry(p.radius,p.detail)}})},"./src/geometries/index.js":(l,d,c)=>{c("./src/geometries/box.js"),c("./src/geometries/circle.js"),c("./src/geometries/cone.js"),c("./src/geometries/cylinder.js"),c("./src/geometries/dodecahedron.js"),c("./src/geometries/icosahedron.js"),c("./src/geometries/octahedron.js"),c("./src/geometries/plane.js"),c("./src/geometries/ring.js"),c("./src/geometries/sphere.js"),c("./src/geometries/tetrahedron.js"),c("./src/geometries/torus.js"),c("./src/geometries/torusKnot.js"),c("./src/geometries/triangle.js")},"./src/geometries/octahedron.js":(l,d,c)=>{var h=c("./src/core/geometry.js").registerGeometry,m=c("./src/lib/three.js");h("octahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(p){this.geometry=new m.OctahedronGeometry(p.radius,p.detail)}})},"./src/geometries/plane.js":(l,d,c)=>{var h=c("./src/core/geometry.js").registerGeometry,m=c("./src/lib/three.js");h("plane",{schema:{height:{default:1,min:0},width:{default:1,min:0},segmentsHeight:{default:1,min:1,max:20,type:"int"},segmentsWidth:{default:1,min:1,max:20,type:"int"}},init:function(p){this.geometry=new m.PlaneGeometry(p.width,p.height,p.segmentsWidth,p.segmentsHeight)}})},"./src/geometries/ring.js":(l,d,c)=>{var h=c("./src/core/geometry.js").registerGeometry,m=c("./src/lib/three.js"),p=m.MathUtils.degToRad;h("ring",{schema:{radiusInner:{default:.8,min:0},radiusOuter:{default:1.2,min:0},segmentsPhi:{default:10,min:1,type:"int"},segmentsTheta:{default:32,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(A){this.geometry=new m.RingGeometry(A.radiusInner,A.radiusOuter,A.segmentsTheta,A.segmentsPhi,p(A.thetaStart),p(A.thetaLength))}})},"./src/geometries/sphere.js":(l,d,c)=>{var h=c("./src/core/geometry.js").registerGeometry,m=c("./src/lib/three.js"),p=m.MathUtils.degToRad;h("sphere",{schema:{radius:{default:1,min:0},phiLength:{default:360},phiStart:{default:0,min:0},thetaLength:{default:180,min:0},thetaStart:{default:0},segmentsHeight:{default:18,min:2,type:"int"},segmentsWidth:{default:36,min:3,type:"int"}},init:function(A){this.geometry=new m.SphereGeometry(A.radius,A.segmentsWidth,A.segmentsHeight,p(A.phiStart),p(A.phiLength),p(A.thetaStart),p(A.thetaLength))}})},"./src/geometries/tetrahedron.js":(l,d,c)=>{var h=c("./src/core/geometry.js").registerGeometry,m=c("./src/lib/three.js");h("tetrahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(p){this.geometry=new m.TetrahedronGeometry(p.radius,p.detail)}})},"./src/geometries/torus.js":(l,d,c)=>{var h=c("./src/core/geometry.js").registerGeometry,m=c("./src/lib/three.js"),p=m.MathUtils.degToRad;h("torus",{schema:{arc:{default:360},radius:{default:1,min:0},radiusTubular:{default:.2,min:0},segmentsRadial:{default:36,min:2,type:"int"},segmentsTubular:{default:32,min:3,type:"int"}},init:function(A){this.geometry=new m.TorusGeometry(A.radius,A.radiusTubular*2,A.segmentsRadial,A.segmentsTubular,p(A.arc))}})},"./src/geometries/torusKnot.js":(l,d,c)=>{var h=c("./src/core/geometry.js").registerGeometry,m=c("./src/lib/three.js");h("torusKnot",{schema:{p:{default:2,min:1},q:{default:3,min:1},radius:{default:1,min:0},radiusTubular:{default:.2,min:0},segmentsRadial:{default:8,min:3,type:"int"},segmentsTubular:{default:100,min:3,type:"int"}},init:function(p){this.geometry=new m.TorusKnotGeometry(p.radius,p.radiusTubular*2,p.segmentsTubular,p.segmentsRadial,p.p,p.q)}})},"./src/geometries/triangle.js":(l,d,c)=>{var h=c("./src/core/geometry.js").registerGeometry,m=c("./src/lib/three.js"),p=new m.Quaternion,A=new m.Vector3(0,0,1),v=new m.Vector2,y=new m.Vector2,x=new m.Vector2;h("triangle",{schema:{vertexA:{type:"vec3",default:{x:0,y:.5,z:0}},vertexB:{type:"vec3",default:{x:-.5,y:-.5,z:0}},vertexC:{type:"vec3",default:{x:.5,y:-.5,z:0}}},init:function(C){var g,b,_,S,R,P,O,D,L;_=new m.Triangle,_.a.set(C.vertexA.x,C.vertexA.y,C.vertexA.z),_.b.set(C.vertexB.x,C.vertexB.y,C.vertexB.z),_.c.set(C.vertexC.x,C.vertexC.y,C.vertexC.z),b=_.getNormal(new m.Vector3),p.setFromUnitVectors(b,A),S=_.a.clone().applyQuaternion(p),R=_.b.clone().applyQuaternion(p),P=_.c.clone().applyQuaternion(p),v.set(Math.min(S.x,R.x,P.x),Math.min(S.y,R.y,P.y)),y.set(Math.max(S.x,R.x,P.x),Math.max(S.y,R.y,P.y)),x.set(0,0).subVectors(y,v),S=new m.Vector2().subVectors(S,v).divide(x),R=new m.Vector2().subVectors(R,v).divide(x),P=new m.Vector2().subVectors(P,v).divide(x),g=this.geometry=new m.BufferGeometry,O=[_.a.x,_.a.y,_.a.z,_.b.x,_.b.y,_.b.z,_.c.x,_.c.y,_.c.z],D=[b.x,b.y,b.z,b.x,b.y,b.z,b.x,b.y,b.z],L=[S.x,S.y,R.x,R.y,P.x,P.y],g.setAttribute("position",new m.Float32BufferAttribute(O,3)),g.setAttribute("normal",new m.Float32BufferAttribute(D,3)),g.setAttribute("uv",new m.Float32BufferAttribute(L,2))}})},"./src/index.js":(l,d,c)=>{if(window.Promise=window.Promise||c("./node_modules/promise-polyfill/Promise.js"),c("./node_modules/@ungap/custom-elements/index.js"),window.hasNativeWebVRImplementation=!!window.navigator.getVRDisplays||!!window.navigator.getVRDevices,window.hasNativeWebXRImplementation=navigator.xr!==void 0,!window.hasNativeWebXRImplementation&&!window.hasNativeWebVRImplementation){var h=c("./src/utils/isIOSOlderThan10.js"),m=h(window.navigator.userAgent)?1/window.devicePixelRatio:1,p=c("./node_modules/webvr-polyfill/build/webvr-polyfill.js"),A={BUFFER_SCALE:m,CARDBOARD_UI_DISABLED:!0,ROTATE_INSTRUCTIONS_DISABLED:!0,MOBILE_WAKE_LOCK:!!window.cordova};window.webvrpolyfill=new p(A)}var v=c("./src/utils/index.js"),y=v.debug;v.isIE11&&(c("./node_modules/custom-event-polyfill/polyfill.js"),c("./vendor/starts-with-polyfill.js"));var x=y("A-Frame:error"),C=y("A-Frame:warn");window.document.currentScript&&window.document.currentScript.parentNode!==window.document.head&&!window.debug&&C("Put the A-Frame <script> tag in the <head> of the HTML *before* the scene to ensure everything for A-Frame is properly registered before they are used from HTML."),!window.cordova&&window.location.protocol==="file:"&&x("This HTML file is currently being served via the file:// protocol. Assets, textures, and models WILL NOT WORK due to cross-origin policy! Please use a local or hosted server: https://aframe.io/docs/0.5.0/introduction/getting-started.html#using-a-local-server."),c("./node_modules/present/lib/present-browser.js"),v.device.isBrowserEnvironment&&(c("./src/style/aframe.css"),c("./src/style/rStats.css"));var g=c("./src/core/scene/a-scene.js").AScene,b=c("./src/core/component.js").components,_=c("./src/core/component.js").registerComponent,S=c("./src/core/geometry.js").registerGeometry,R=c("./src/extras/primitives/primitives.js").registerPrimitive,P=c("./src/core/shader.js").registerShader,O=c("./src/core/system.js").registerSystem,D=c("./src/core/shader.js").shaders,L=c("./src/core/system.js").systems,N=window.THREE=c("./src/lib/three.js"),H=c("./package.json");c("./src/components/index.js"),c("./src/geometries/index.js"),c("./src/shaders/index.js"),c("./src/systems/index.js");var J=c("./src/core/a-node.js").ANode,K=c("./src/core/a-entity.js").AEntity;c("./src/core/a-assets.js"),c("./src/core/a-cubemap.js"),c("./src/core/a-mixin.js"),c("./src/extras/components/index.js"),c("./src/extras/primitives/index.js"),console.log("A-Frame Version: 1.4.1 (Date 2023-01-04, Commit #5183a179)"),console.log("THREE Version (https://github.com/supermedium/three.js):",H.dependencies["super-three"]),console.log("WebVR Polyfill Version:",H.dependencies["webvr-polyfill"]),l.exports=window.AFRAME={AComponent:c("./src/core/component.js").Component,AEntity:K,ANode:J,ANIME:c("./node_modules/super-animejs/lib/anime.es.js").default,AScene:g,components:b,coreComponents:Object.keys(b),geometries:c("./src/core/geometry.js").geometries,registerComponent:_,registerGeometry:S,registerPrimitive:R,registerShader:P,registerSystem:O,primitives:{getMeshMixin:c("./src/extras/primitives/getMeshMixin.js"),primitives:c("./src/extras/primitives/primitives.js").primitives},scenes:c("./src/core/scene/scenes.js"),schema:c("./src/core/schema.js"),shaders:D,systems:L,THREE:N,utils:v,version:H.version}},"./src/lib/rStatsAframe.js":l=>{window.aframeStats=function(d){var c=null,h=d,m={te:{caption:"Entities"},lt:{caption:"Load Time"}},p=[{caption:"A-Frame",values:["te","lt"]}];function A(){c("te").set(v()),window.performance.getEntriesByName&&c("lt").set(window.performance.getEntriesByName("render-started")[0].startTime.toFixed(0))}function v(){var g=h.querySelectorAll("*");return Array.prototype.slice.call(g).filter(function(b){return b.isEntity}),g.length}function y(){}function x(){}function C(g){c=g}return{update:A,start:y,end:x,attach:C,values:m,groups:p,fractions:[]}},l.exports={aframeStats:window.aframeStats}},"./src/lib/three.js":(l,d,c)=>{var h=c("./src/lib/three.module.js").default;h.TextureLoader&&(h.TextureLoader.prototype.crossOrigin="anonymous"),h.ImageLoader&&(h.ImageLoader.prototype.crossOrigin="anonymous"),h.Cache&&(h.Cache.enabled=!0),h.DRACOLoader.prototype.crossOrigin="anonymous",h.GLTFLoader.prototype.crossOrigin="anonymous",h.KTX2Loader.prototype.crossOrigin="anonymous",h.MTLLoader.prototype.crossOrigin="anonymous",h.OBJLoader.prototype.crossOrigin="anonymous",l.exports=h},"./src/lib/three.module.js":(l,d,c)=>{c.r(d),c.d(d,{default:()=>_});var h=c("./node_modules/super-three/build/three.module.js"),m=c("./node_modules/super-three/examples/jsm/loaders/DRACOLoader.js"),p=c("./node_modules/super-three/examples/jsm/loaders/GLTFLoader.js"),A=c("./node_modules/super-three/examples/jsm/loaders/KTX2Loader.js"),v=c("./node_modules/super-three/examples/jsm/loaders/OBJLoader.js"),y=c("./node_modules/super-three/examples/jsm/loaders/MTLLoader.js"),x=c("./node_modules/super-three/examples/jsm/utils/BufferGeometryUtils.js"),C=c("./node_modules/super-three/examples/jsm/lights/LightProbeGenerator.js"),g=c("./node_modules/object-assign/index.js"),b=window.THREE=g({},h);c("./vendor/DeviceOrientationControls.js"),b.DRACOLoader=m.DRACOLoader,b.GLTFLoader=p.GLTFLoader,b.KTX2Loader=A.KTX2Loader,b.OBJLoader=v.OBJLoader,b.MTLLoader=y.MTLLoader,b.BufferGeometryUtils=x,b.LightProbeGenerator=C.LightProbeGenerator;const _=b},"./src/shaders/flat.js":(l,d,c)=>{var h=c("./src/core/shader.js").registerShader,m=c("./src/lib/three.js"),p=c("./src/utils/index.js");l.exports.Shader=h("flat",{schema:{color:{type:"color"},fog:{default:!0},height:{default:256},offset:{type:"vec2",default:{x:0,y:0}},repeat:{type:"vec2",default:{x:1,y:1}},src:{type:"map"},width:{default:512},wireframe:{default:!1},wireframeLinewidth:{default:2},toneMapped:{default:!0}},init:function(v){this.rendererSystem=this.el.sceneEl.systems.renderer,this.materialData={color:new m.Color},this.textureSrc=null,A(v,this.materialData),this.rendererSystem.applyColorCorrection(this.materialData.color),this.material=new m.MeshBasicMaterial(this.materialData)},update:function(v){this.updateMaterial(v),p.material.updateMap(this,v)},updateMaterial:function(v){var y;A(v,this.materialData),this.rendererSystem.applyColorCorrection(this.materialData.color);for(y in this.materialData)this.material[y]=this.materialData[y]}});function A(v,y){return y.color.set(v.color),y.fog=v.fog,y.wireframe=v.wireframe,y.toneMapped=v.toneMapped,y.wireframeLinewidth=v.wireframeLinewidth,y}},"./src/shaders/index.js":(l,d,c)=>{c("./src/shaders/flat.js"),c("./src/shaders/standard.js"),c("./src/shaders/phong.js"),c("./src/shaders/sdf.js"),c("./src/shaders/msdf.js"),c("./src/shaders/ios10hls.js"),c("./src/shaders/shadow.js")},"./src/shaders/ios10hls.js":(l,d,c)=>{var h=c("./src/core/shader.js").registerShader;l.exports.Shader=h("ios10hls",{schema:{src:{type:"map",is:"uniform"},opacity:{type:"number",is:"uniform",default:1}},vertexShader:["varying vec2 vUV;","void main(void) {","  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","  vUV = uv;","}"].join(`
`),fragmentShader:["uniform sampler2D src;","uniform float opacity;","varying vec2 vUV;","void main() {","  vec2 offset = vec2(0, 0);","  vec2 repeat = vec2(1, 1);","  vec4 color = texture2D(src, vec2(vUV.x / repeat.x + offset.x, (1.0 - vUV.y) / repeat.y + offset.y)).bgra;","  gl_FragColor = vec4(color.rgb, opacity);","}"].join(`
`)})},"./src/shaders/msdf.js":(l,d,c)=>{var h=c("./src/core/shader.js").registerShader,m=!!document.createElement("canvas").getContext("webgl2"),p=["attribute vec2 uv;","attribute vec3 position;","uniform mat4 projectionMatrix;","uniform mat4 modelViewMatrix;","varying vec2 vUV;","void main(void) {","  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","  vUV = uv;","}"].join(`
`),A=["#version 300 es","in vec2 uv;","in vec3 position;","uniform mat4 projectionMatrix;","uniform mat4 modelViewMatrix;","out vec2 vUV;","void main(void) {","  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","  vUV = uv;","}"].join(`
`),v=m?A:p,y=["#ifdef GL_OES_standard_derivatives","#extension GL_OES_standard_derivatives: enable","#endif","precision highp float;","uniform bool negate;","uniform float alphaTest;","uniform float opacity;","uniform sampler2D map;","uniform vec3 color;","varying vec2 vUV;","float median(float r, float g, float b) {","  return max(min(r, g), min(max(r, g), b));","}","#define BIG_ENOUGH 0.001","#define MODIFIED_ALPHATEST (0.02 * isBigEnough / BIG_ENOUGH)","void main() {","  vec3 sampleColor = texture2D(map, vUV).rgb;","  if (negate) { sampleColor = 1.0 - sampleColor; }","  float sigDist = median(sampleColor.r, sampleColor.g, sampleColor.b) - 0.5;","  float alpha = clamp(sigDist / fwidth(sigDist) + 0.5, 0.0, 1.0);","  float dscale = 0.353505;","  vec2 duv = dscale * (dFdx(vUV) + dFdy(vUV));","  float isBigEnough = max(abs(duv.x), abs(duv.y));","  // Do modified alpha test.","  if (isBigEnough > BIG_ENOUGH) {","    float ratio = BIG_ENOUGH / isBigEnough;","    alpha = ratio * alpha + (1.0 - ratio) * (sigDist + 0.5);","  }","  // Do modified alpha test.","  if (alpha < alphaTest * MODIFIED_ALPHATEST) { discard; return; }","  gl_FragColor = vec4(color.xyz, alpha * opacity);","}"].join(`
`),x=["#version 300 es","precision highp float;","uniform bool negate;","uniform float alphaTest;","uniform float opacity;","uniform sampler2D map;","uniform vec3 color;","in vec2 vUV;","out vec4 fragColor;","float median(float r, float g, float b) {","  return max(min(r, g), min(max(r, g), b));","}","#define BIG_ENOUGH 0.001","#define MODIFIED_ALPHATEST (0.02 * isBigEnough / BIG_ENOUGH)","void main() {","  vec3 sampleColor = texture(map, vUV).rgb;","  if (negate) { sampleColor = 1.0 - sampleColor; }","  float sigDist = median(sampleColor.r, sampleColor.g, sampleColor.b) - 0.5;","  float alpha = clamp(sigDist / fwidth(sigDist) + 0.5, 0.0, 1.0);","  float dscale = 0.353505;","  vec2 duv = dscale * (dFdx(vUV) + dFdy(vUV));","  float isBigEnough = max(abs(duv.x), abs(duv.y));","  // Do modified alpha test.","  if (isBigEnough > BIG_ENOUGH) {","    float ratio = BIG_ENOUGH / isBigEnough;","    alpha = ratio * alpha + (1.0 - ratio) * (sigDist + 0.5);","  }","  // Do modified alpha test.","  if (alpha < alphaTest * MODIFIED_ALPHATEST) { discard; return; }","  fragColor = vec4(color.xyz, alpha * opacity);","}"].join(`
`),C=m?x:y;l.exports.Shader=h("msdf",{schema:{alphaTest:{type:"number",is:"uniform",default:.5},color:{type:"color",is:"uniform",default:"white"},map:{type:"map",is:"uniform"},negate:{type:"boolean",is:"uniform",default:!0},opacity:{type:"number",is:"uniform",default:1}},raw:!0,vertexShader:v,fragmentShader:C})},"./src/shaders/phong.js":(l,d,c)=>{var h=c("./src/core/shader.js").registerShader,m=c("./src/lib/three.js"),p=c("./src/utils/index.js"),A=new m.CubeTextureLoader,v={};l.exports.Shader=h("phong",{schema:{color:{type:"color"},emissive:{type:"color",default:"black"},emissiveIntensity:{default:1},specular:{type:"color",default:"#111111"},transparent:{default:!1},fog:{default:!0},offset:{type:"vec2",default:{x:0,y:0}},repeat:{type:"vec2",default:{x:1,y:1}},src:{type:"map"},envMap:{default:""},sphericalEnvMap:{type:"map"},shininess:{default:30},flatShading:{default:!1},wireframe:{default:!1},wireframeLinewidth:{default:2},combine:{oneOF:["multiply","mix","add"],default:"mix"},reflectivity:{default:.9},refractionRatio:{default:.98},refract:{default:!1},normalMap:{type:"map"},normalScale:{type:"vec2",default:{x:1,y:1}},normalTextureOffset:{type:"vec2"},normalTextureRepeat:{type:"vec2",default:{x:1,y:1}},displacementMap:{type:"map"},displacementScale:{default:1},displacementBias:{default:.5},displacementTextureOffset:{type:"vec2"},displacementTextureRepeat:{type:"vec2",default:{x:1,y:1}},bumpMap:{type:"map"},bumpMapScale:{default:1},bumpTextureOffset:{type:"vec2"},bumpTextureRepeat:{type:"vec2",default:{x:1,y:1}}},init:function(x){this.rendererSystem=this.el.sceneEl.systems.renderer,this.materialData={color:new m.Color,specular:new m.Color,emissive:new m.Color},this.textureSrc=null,y(x,this.materialData),this.rendererSystem.applyColorCorrection(this.materialData.color),this.material=new m.MeshPhongMaterial(this.materialData),p.material.updateMap(this,x)},update:function(x){this.updateMaterial(x),p.material.updateMap(this,x),x.normalMap&&p.material.updateDistortionMap("normal",this,x),x.displacementMap&&p.material.updateDistortionMap("displacement",this,x),x.ambientOcclusionMap&&p.material.updateDistortionMap("ambientOcclusion",this,x),x.bump&&p.material.updateDistortionMap("bump",this,x),this.updateEnvMap(x)},updateMaterial:function(x){var C;y(x,this.materialData),this.rendererSystem.applyColorCorrection(this.materialData.color);for(C in this.materialData)this.material[C]=this.materialData[C]},updateEnvMap:function(x){var C=this,g=this.material,b=x.envMap,_=x.sphericalEnvMap,S=x.refract,R=this.el.sceneEl;if(!b&&!_||this.isLoadingEnvMap){Object.defineProperty(g,"envMap",{get:function(){return R.object3D.environment},set:function(P){delete this.envMap,this.envMap=P}}),g.needsUpdate=!0;return}if(this.isLoadingEnvMap=!0,delete g.envMap,_){this.el.sceneEl.systems.material.loadTexture(_,{src:_},function(O){C.isLoadingEnvMap=!1,O.mapping=S?m.EquirectangularRefractionMapping:m.EquirectangularReflectionMapping,g.envMap=O,p.material.handleTextureEvents(C.el,O),g.needsUpdate=!0});return}if(v[b]){v[b].then(function(P){C.isLoadingEnvMap=!1,g.envMap=P,p.material.handleTextureEvents(C.el,P),g.needsUpdate=!0});return}v[b]=new Promise(function(P){p.srcLoader.validateCubemapSrc(b,function(D){A.load(D,function(L){C.isLoadingEnvMap=!1,g.envMap=L,L.mapping=S?m.CubeRefractionMapping:m.CubeReflectionMapping,p.material.handleTextureEvents(C.el,L),P(L)})})})}});function y(x,C){switch(C.color.set(x.color),C.specular.set(x.emissive),C.emissive.set(x.emissive),C.emissiveIntensity=x.emissiveIntensity,C.fog=x.fog,C.transparent=x.transparent,C.wireframe=x.wireframe,C.wireframeLinewidth=x.wireframeLinewidth,C.shininess=x.shininess,C.flatShading=x.flatShading,C.wireframe=x.wireframe,C.wireframeLinewidth=x.wireframeLinewidth,C.reflectivity=x.reflectivity,C.refractionRatio=x.refractionRatio,x.combine){case"mix":C.combine=m.MixOperation;break;case"multiply":C.combine=m.MultiplyOperation;break;case"add":C.combine=m.AddOperation;break}return x.normalMap&&(C.normalScale=x.normalScale),x.ambientOcclusionMap&&(C.aoMapIntensity=x.ambientOcclusionMapIntensity),x.bumpMap&&(C.aoMapIntensity=x.bumpMapScale),x.displacementMap&&(C.displacementScale=x.displacementScale,C.displacementBias=x.displacementBias),C}},"./src/shaders/sdf.js":(l,d,c)=>{var h=c("./src/core/shader.js").registerShader,m=!!document.createElement("canvas").getContext("webgl2"),p=["attribute vec2 uv;","attribute vec3 position;","uniform mat4 projectionMatrix;","uniform mat4 modelViewMatrix;","varying vec2 vUV;","void main(void) {","  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","  vUV = uv;","}"].join(`
`),A=["#version 300 es","in vec2 uv;","in vec3 position;","uniform mat4 projectionMatrix;","uniform mat4 modelViewMatrix;","out vec2 vUV;","void main(void) {","  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","  vUV = uv;","}"].join(`
`),v=m?A:p,y=["#ifdef GL_OES_standard_derivatives","#extension GL_OES_standard_derivatives: enable","#endif","precision highp float;","uniform float alphaTest;","uniform float opacity;","uniform sampler2D map;","uniform vec3 color;","varying vec2 vUV;","#ifdef GL_OES_standard_derivatives","  float contour(float width, float value) {","    return smoothstep(0.5 - value, 0.5 + value, width);","  }","#else","  float aastep(float value, float afwidth) {","    return smoothstep(0.5 - afwidth, 0.5 + afwidth, value);","  }","#endif","#define BIG_ENOUGH 0.001","#define MODIFIED_ALPHATEST (0.02 * isBigEnough / BIG_ENOUGH)","#define ALL_SMOOTH 0.4","#define ALL_ROUGH 0.02","#define DISCARD_ALPHA (alphaTest / (2.2 - 1.2 * ratio))","void main() {","  #ifdef GL_OES_standard_derivatives","    vec2 uv = vUV;","    vec4 texColor = texture2D(map, uv);","    float dist = texColor.a;","    float width = fwidth(dist);","    float alpha = contour(dist, width);","    float dscale = 0.353505;","    vec2 duv = dscale * (dFdx(uv) + dFdy(uv));","    float isBigEnough = max(abs(duv.x), abs(duv.y));","    if (isBigEnough > BIG_ENOUGH) {","      float ratio = BIG_ENOUGH / isBigEnough;","      alpha = ratio * alpha + (1.0 - ratio) * dist;","    }","    if (isBigEnough <= BIG_ENOUGH) {","      vec4 box = vec4 (uv - duv, uv + duv);","      alpha = (alpha + 0.5 * (","        contour(texture2D(map, box.xy).a, width)","        + contour(texture2D(map, box.zw).a, width)","        + contour(texture2D(map, box.xw).a, width)","        + contour(texture2D(map, box.zy).a, width)","      )) / 3.0;","    }","    if (alpha < alphaTest * MODIFIED_ALPHATEST) { discard; return; }","  #else","    vec4 texColor = texture2D(map, vUV);","    float value = texColor.a;","    float afwidth = (1.0 / 32.0) * (1.4142135623730951 / (2.0 * gl_FragCoord.w));","    float alpha = aastep(value, afwidth);","    float ratio = (gl_FragCoord.w >= ALL_SMOOTH) ? 1.0 : (gl_FragCoord.w < ALL_ROUGH) ? 0.0 : (gl_FragCoord.w - ALL_ROUGH) / (ALL_SMOOTH - ALL_ROUGH);","    if (alpha < alphaTest) { if (ratio >= 1.0) { discard; return; } alpha = 0.0; }","    alpha = alpha * ratio + (1.0 - ratio) * value;","    if (ratio < 1.0 && alpha <= DISCARD_ALPHA) { discard; return; }","  #endif","  gl_FragColor = vec4(color, opacity * alpha);","}"].join(`
`),x=["#version 300 es","precision highp float;","uniform float alphaTest;","uniform float opacity;","uniform sampler2D map;","uniform vec3 color;","in vec2 vUV;","out vec4 fragColor;","#ifdef GL_OES_standard_derivatives","  float contour(float width, float value) {","    return smoothstep(0.5 - value, 0.5 + value, width);","  }","#else","  float aastep(float value, float afwidth) {","    return smoothstep(0.5 - afwidth, 0.5 + afwidth, value);","  }","#endif","#define BIG_ENOUGH 0.001","#define MODIFIED_ALPHATEST (0.02 * isBigEnough / BIG_ENOUGH)","#define ALL_SMOOTH 0.4","#define ALL_ROUGH 0.02","#define DISCARD_ALPHA (alphaTest / (2.2 - 1.2 * ratio))","void main() {","  #ifdef GL_OES_standard_derivatives","    vec2 uv = vUV;","    vec4 texColor = texture(map, uv);","    float dist = texColor.a;","    float width = fwidth(dist);","    float alpha = contour(dist, width);","    float dscale = 0.353505;","    vec2 duv = dscale * (dFdx(uv) + dFdy(uv));","    float isBigEnough = max(abs(duv.x), abs(duv.y));","    if (isBigEnough > BIG_ENOUGH) {","      float ratio = BIG_ENOUGH / isBigEnough;","      alpha = ratio * alpha + (1.0 - ratio) * dist;","    }","    if (isBigEnough <= BIG_ENOUGH) {","      vec4 box = vec4 (uv - duv, uv + duv);","      alpha = (alpha + 0.5 * (","        contour(texture(map, box.xy).a, width)","        + contour(texture(map, box.zw).a, width)","        + contour(texture(map, box.xw).a, width)","        + contour(texture(map, box.zy).a, width)","      )) / 3.0;","    }","    if (alpha < alphaTest * MODIFIED_ALPHATEST) { discard; return; }","  #else","    vec4 texColor = texture(map, vUV);","    float value = texColor.a;","    float afwidth = (1.0 / 32.0) * (1.4142135623730951 / (2.0 * gl_FragCoord.w));","    float alpha = aastep(value, afwidth);","    float ratio = (gl_FragCoord.w >= ALL_SMOOTH) ? 1.0 : (gl_FragCoord.w < ALL_ROUGH) ? 0.0 : (gl_FragCoord.w - ALL_ROUGH) / (ALL_SMOOTH - ALL_ROUGH);","    if (alpha < alphaTest) { if (ratio >= 1.0) { discard; return; } alpha = 0.0; }","    alpha = alpha * ratio + (1.0 - ratio) * value;","    if (ratio < 1.0 && alpha <= DISCARD_ALPHA) { discard; return; }","  #endif","  fragColor = vec4(color, opacity * alpha);","}"].join(`
`),C=m?x:y;l.exports.Shader=h("sdf",{schema:{alphaTest:{type:"number",is:"uniform",default:.5},color:{type:"color",is:"uniform",default:"white"},map:{type:"map",is:"uniform"},opacity:{type:"number",is:"uniform",default:1}},raw:!0,vertexShader:v,fragmentShader:C})},"./src/shaders/shadow.js":(l,d,c)=>{var h=c("./src/core/shader.js").registerShader,m=c("./src/lib/three.js");l.exports.Shader=h("shadow",{schema:{opacity:{default:.5},transparent:{default:!0},alphaToCoverage:{default:!0}},init:function(p){this.rendererSystem=this.el.sceneEl.systems.renderer,this.material=new m.ShadowMaterial},update:function(p){this.material.opacity=p.opacity,this.material.alphaToCoverage=p.alphaToCoverage,this.material.transparent=p.transparent}})},"./src/shaders/standard.js":(l,d,c)=>{var h=c("./src/core/shader.js").registerShader,m=c("./src/lib/three.js"),p=c("./src/utils/index.js"),A=new m.CubeTextureLoader,v={};l.exports.Shader=h("standard",{schema:{ambientOcclusionMap:{type:"map"},ambientOcclusionMapIntensity:{default:1},ambientOcclusionTextureOffset:{type:"vec2"},ambientOcclusionTextureRepeat:{type:"vec2",default:{x:1,y:1}},color:{type:"color"},displacementMap:{type:"map"},displacementScale:{default:1},displacementBias:{default:.5},displacementTextureOffset:{type:"vec2"},displacementTextureRepeat:{type:"vec2",default:{x:1,y:1}},emissive:{type:"color",default:"#000"},emissiveIntensity:{default:1},envMap:{default:""},fog:{default:!0},height:{default:256},metalness:{default:0,min:0,max:1},metalnessMap:{type:"map"},metalnessTextureOffset:{type:"vec2"},metalnessTextureRepeat:{type:"vec2",default:{x:1,y:1}},normalMap:{type:"map"},normalScale:{type:"vec2",default:{x:1,y:1}},normalTextureOffset:{type:"vec2"},normalTextureRepeat:{type:"vec2",default:{x:1,y:1}},offset:{type:"vec2",default:{x:0,y:0}},repeat:{type:"vec2",default:{x:1,y:1}},roughness:{default:.5,min:0,max:1},roughnessMap:{type:"map"},roughnessTextureOffset:{type:"vec2"},roughnessTextureRepeat:{type:"vec2",default:{x:1,y:1}},sphericalEnvMap:{type:"map"},src:{type:"map"},width:{default:512},wireframe:{default:!1},wireframeLinewidth:{default:2}},init:function(x){this.rendererSystem=this.el.sceneEl.systems.renderer,this.materialData={color:new m.Color,emissive:new m.Color},y(x,this.materialData),this.rendererSystem.applyColorCorrection(this.materialData.color),this.rendererSystem.applyColorCorrection(this.materialData.emissive),this.material=new m.MeshStandardMaterial(this.materialData)},update:function(x){this.updateMaterial(x),p.material.updateMap(this,x),x.normalMap&&p.material.updateDistortionMap("normal",this,x),x.displacementMap&&p.material.updateDistortionMap("displacement",this,x),x.ambientOcclusionMap&&p.material.updateDistortionMap("ambientOcclusion",this,x),x.metalnessMap&&p.material.updateDistortionMap("metalness",this,x),x.roughnessMap&&p.material.updateDistortionMap("roughness",this,x),this.updateEnvMap(x)},updateMaterial:function(x){var C,g=this.material;y(x,this.materialData),this.rendererSystem.applyColorCorrection(this.materialData.color),this.rendererSystem.applyColorCorrection(this.materialData.emissive);for(C in this.materialData)g[C]=this.materialData[C]},updateEnvMap:function(x){var C=this,g=this.material,b=x.envMap,_=x.sphericalEnvMap;if(!b&&!_||this.isLoadingEnvMap){g.envMap=null,g.needsUpdate=!0;return}if(this.isLoadingEnvMap=!0,_){this.el.sceneEl.systems.material.loadTexture(_,{src:_},function(R){C.isLoadingEnvMap=!1,R.mapping=m.EquirectangularReflectionMapping,g.envMap=R,p.material.handleTextureEvents(C.el,R),g.needsUpdate=!0});return}if(v[b]){v[b].then(function(S){C.isLoadingEnvMap=!1,g.envMap=S,p.material.handleTextureEvents(C.el,S),g.needsUpdate=!0});return}v[b]=new Promise(function(S){p.srcLoader.validateCubemapSrc(b,function(P){A.load(P,function(O){C.isLoadingEnvMap=!1,g.envMap=O,p.material.handleTextureEvents(C.el,O),S(O)})})})}});function y(x,C){return C.color.set(x.color),C.emissive.set(x.emissive),C.emissiveIntensity=x.emissiveIntensity,C.fog=x.fog,C.metalness=x.metalness,C.roughness=x.roughness,C.wireframe=x.wireframe,C.wireframeLinewidth=x.wireframeLinewidth,x.normalMap&&(C.normalScale=x.normalScale),x.ambientOcclusionMap&&(C.aoMapIntensity=x.ambientOcclusionMapIntensity),x.displacementMap&&(C.displacementScale=x.displacementScale,C.displacementBias=x.displacementBias),C}},"./src/systems/camera.js":(l,d,c)=>{var h=c("./src/constants/index.js"),m=c("./src/core/system.js").registerSystem,p="data-aframe-default-camera";l.exports.System=m("camera",{init:function(){this.activeCameraEl=null,this.render=this.render.bind(this),this.unwrapRender=this.unwrapRender.bind(this),this.wrapRender=this.wrapRender.bind(this),this.initialCameraFound=!1,this.numUserCameras=0,this.numUserCamerasChecked=0,this.setupInitialCamera()},setupInitialCamera:function(){var v,y,x=this.sceneEl,C=this;if(x.camera&&!x.camera.el.getAttribute("camera").spectator){x.emit("cameraready",{cameraEl:x.camera.el});return}if(v=x.querySelectorAll("a-camera, :not(a-mixin)[camera]"),!v.length){this.createDefaultCamera();return}for(this.numUserCameras=v.length,y=0;y<v.length;y++)v[y].addEventListener("object3dset",function(g){g.detail.type==="camera"&&C.checkUserCamera(this)}),v[y].isNode?v[y].load():v[y].addEventListener("nodeready",function(){this.load()})},checkUserCamera:function(v){var y,x=this.el.sceneEl;if(this.numUserCamerasChecked++,!this.initialCameraFound){if(y=v.getAttribute("camera"),!y.active||y.spectator){this.numUserCamerasChecked===this.numUserCameras&&this.createDefaultCamera();return}this.initialCameraFound=!0,x.camera=v.getObject3D("camera"),x.emit("cameraready",{cameraEl:v})}},createDefaultCamera:function(){var v,y=this.sceneEl;v=document.createElement("a-entity"),v.setAttribute("camera",{active:!0}),v.setAttribute("position",{x:0,y:h.DEFAULT_CAMERA_HEIGHT,z:0}),v.setAttribute("wasd-controls",""),v.setAttribute("look-controls",""),v.setAttribute(h.AFRAME_INJECTED,""),v.addEventListener("object3dset",function(x){x.detail.type==="camera"&&(y.camera=x.detail.object,y.emit("cameraready",{cameraEl:v}))}),y.appendChild(v)},disableActiveCamera:function(){var v,y;v=this.sceneEl.querySelectorAll(":not(a-mixin)[camera]"),y=v[v.length-1],y.setAttribute("camera","active",!0)},setActiveCamera:function(v){var y,x,C,g,b=this.activeCameraEl,_=this.sceneEl;if(g=v.getObject3D("camera"),!(!g||v===this.activeCameraEl)){var S=_.querySelector("["+p+"]"),R=S&&S.querySelector(":not(a-mixin)[camera]");for(v!==R&&A(_),this.activeCameraEl=v,this.activeCameraEl.play(),_.camera=g,b&&b.setAttribute("camera","active",!1),x=_.querySelectorAll(":not(a-mixin)[camera]"),C=0;C<x.length;C++)y=x[C],!(!y.isEntity||v===y)&&(y.setAttribute("camera","active",!1),y.pause());_.emit("camera-set-active",{cameraEl:v})}},setSpectatorCamera:function(v){var y,x=this.spectatorCameraEl,C=this.sceneEl,g;y=v.getObject3D("camera"),!(!y||v===this.spectatorCameraEl)&&(x&&x.setAttribute("camera","spectator",!1),g=this.spectatorCameraEl=v,C.addEventListener("enter-vr",this.wrapRender),C.addEventListener("exit-vr",this.unwrapRender),g.setAttribute("camera","active",!1),g.play(),C.emit("camera-set-spectator",{cameraEl:v}))},disableSpectatorCamera:function(){this.spectatorCameraEl=void 0},wrapRender:function(){!this.spectatorCameraEl||this.originalRender||(this.originalRender=this.sceneEl.renderer.render,this.sceneEl.renderer.render=this.render)},unwrapRender:function(){this.originalRender&&(this.sceneEl.renderer.render=this.originalRender,this.originalRender=void 0)},render:function(v,y){var x,C=this.sceneEl,g;x=C.renderer.xr.enabled,this.originalRender.call(C.renderer,v,y),!(!this.spectatorCameraEl||C.isMobile||!x)&&(g=this.spectatorCameraEl.components.camera.camera,C.renderer.xr.enabled=!1,this.originalRender.call(C.renderer,v,g),C.renderer.xr.enabled=x)}});function A(v){var y,x=v.camera;x&&(y=v.querySelector("["+p+"]"),y&&v.removeChild(y))}},"./src/systems/geometry.js":(l,d,c)=>{var h=c("./src/core/geometry.js").geometries,m=c("./src/core/system.js").registerSystem;l.exports.System=m("geometry",{init:function(){this.cache={},this.cacheCount={}},clearCache:function(){this.cache={},this.cacheCount={}},getOrCreateGeometry:function(y){var x=this.cache,C,g;return y.skipCache?p(y):(g=this.hash(y),C=x[g],v(this.cacheCount,g),C||(C=p(y),x[g]=C,C))},unuseGeometry:function(y){var x=this.cache,C=this.cacheCount,g,b;y.skipCache||(b=this.hash(y),x[b]&&(A(C,b),!(C[b]>0)&&(g=x[b],g.dispose(),delete x[b],delete C[b])))},hash:function(y){return JSON.stringify(y)}});function p(y){var x=y.primitive,C=h[x]&&h[x].Geometry,g=new C;if(!C)throw new Error("Unknown geometry `"+x+"`");return g.init(y),g.geometry}function A(y,x){y[x]--}function v(y,x){y[x]=y[x]===void 0?1:y[x]+1}},"./src/systems/gltf-model.js":(l,d,c)=>{var h=c("./src/core/system.js").registerSystem,m=c("./src/lib/three.js");function p(A){return new Promise(function(v,y){var x=document.createElement("script");document.body.appendChild(x),x.onload=v,x.onerror=y,x.async=!0,x.src=A})}l.exports.System=h("gltf-model",{schema:{dracoDecoderPath:{default:"https://www.gstatic.com/draco/versioned/decoders/1.5.5/"},basisTranscoderPath:{default:""},meshoptDecoderPath:{default:""}},init:function(){this.update()},update:function(){var A=this.data.dracoDecoderPath,v=this.data.basisTranscoderPath,y=this.data.meshoptDecoderPath;!this.dracoLoader&&A&&(this.dracoLoader=new m.DRACOLoader,this.dracoLoader.setDecoderPath(A)),!this.ktx2Loader&&v&&(this.ktx2Loader=new m.KTX2Loader,this.ktx2Loader.setTranscoderPath(v).detectSupport(this.el.renderer)),!this.meshoptDecoder&&y&&(this.meshoptDecoder=p(y).then(function(){return window.MeshoptDecoder.ready}).then(function(){return window.MeshoptDecoder}))},getDRACOLoader:function(){return this.dracoLoader},getKTX2Loader:function(){return this.ktx2Loader},getMeshoptDecoder:function(){return this.meshoptDecoder}})},"./src/systems/index.js":(l,d,c)=>{c("./src/systems/camera.js"),c("./src/systems/geometry.js"),c("./src/systems/gltf-model.js"),c("./src/systems/light.js"),c("./src/systems/material.js"),c("./src/systems/renderer.js"),c("./src/systems/shadow.js"),c("./src/systems/tracked-controls-webvr.js"),c("./src/systems/tracked-controls-webxr.js"),c("./src/systems/webxr.js")},"./src/systems/light.js":(l,d,c)=>{var h=c("./src/core/system.js").registerSystem,m=c("./src/utils/bind.js"),p=c("./src/constants/index.js"),A="data-aframe-default-light";l.exports.System=h("light",{schema:{defaultLightsEnabled:{default:!0}},init:function(){this.defaultLights=!1,this.userDefinedLights=!1,this.sceneEl.addEventListener("loaded",m(this.setupDefaultLights,this))},registerLight:function(v){v.hasAttribute(A)||(this.removeDefaultLights(),this.userDefinedLights=!0)},removeDefaultLights:function(){var v,y=this.sceneEl;if(this.defaultLights){v=document.querySelectorAll("["+A+"]");for(var x=0;x<v.length;x++)y.removeChild(v[x]);this.defaultLights=!1}},setupDefaultLights:function(){var v=this.sceneEl,y,x;this.userDefinedLights||this.defaultLights||!this.data.defaultLightsEnabled||(y=document.createElement("a-entity"),y.setAttribute("light",{color:"#BBB",type:"ambient"}),y.setAttribute(A,""),y.setAttribute(p.AFRAME_INJECTED,""),v.appendChild(y),x=document.createElement("a-entity"),x.setAttribute("light",{color:"#FFF",intensity:.6,castShadow:!0}),x.setAttribute("position",{x:-.5,y:1,z:1}),x.setAttribute(A,""),x.setAttribute(p.AFRAME_INJECTED,""),v.appendChild(x),this.defaultLights=!0)}})},"./src/systems/material.js":(l,d,c)=>{var h=c("./src/core/system.js").registerSystem,m=c("./src/lib/three.js"),p=c("./src/utils/index.js"),A=c("./src/utils/material.js").isHLS,v=c("./src/utils/material.js").setTextureProperties,y=p.bind,x=p.debug,C=x("components:texture:error"),g=new m.TextureLoader,b=x("components:texture:warn");g.setCrossOrigin("anonymous"),l.exports.System=h("material",{init:function(){this.materials={},this.textureCounts={},this.textureCache={},this.sceneEl.addEventListener("materialtextureloaded",y(this.onMaterialTextureLoaded,this))},clearTextureCache:function(){this.textureCache={}},loadTexture:function(O,D,L){var N=this;if(O.tagName==="CANVAS"){this.loadCanvas(O,D,L);return}if(O.tagName==="VIDEO"){!O.src&&!O.srcObject&&!O.childElementCount&&b("Video element was defined with neither `source` elements nor `src` / `srcObject` attributes."),this.loadVideo(O,D,L);return}p.srcLoader.validateSrc(O,H,J);function H(K){N.loadImage(K,D,L)}function J(K){N.loadVideo(K,D,L)}},loadImage:function(O,D,L){var N=this.hash(D),H=this.textureCache;if(H[N]){H[N].then(L);return}H[N]=S(O,D),H[N].then(L)},loadCanvas:function(O,D,L){var N;N=new m.CanvasTexture(O),v(N,D),L(N)},loadVideo:function(O,D,L){var N,H,J=this.textureCache,K,se;function ae(ee){ee.texture.needsUpdate=!0,L(ee.texture,ee.videoEl)}if(typeof O!="string"){if(K=O,N=this.hashVideo(D,K),J[N]){J[N].then(ae);return}P(K)}if(K=K||R(O,D.width,D.height),N=this.hashVideo(D,K),J[N]){J[N].then(ae);return}H=new m.VideoTexture(K),H.minFilter=m.LinearFilter,v(H,D),this.sceneEl.isIOS&&A(K.src||K.getAttribute("src"),K.type||K.getAttribute("type"))&&(H.format=m.RGBAFormat,H.needsCorrectionBGRA=!0,H.flipY=!1,H.needsCorrectionFlipY=!0),se={texture:H,videoEl:K},J[N]=Promise.resolve(se),ae(se)},hash:function(O){return O.src.tagName&&(O=p.extendDeep({},O),O.src=O.src.src),JSON.stringify(O)},hashVideo:function(O,D){return _(O,D)},registerMaterial:function(O){this.materials[O.uuid]=O},unregisterMaterial:function(O){delete this.materials[O.uuid];var D=this.textureCounts;Object.keys(O).filter(function(L){return O[L]&&O[L].isTexture}).forEach(function(L){D[O[L].uuid]--,D[O[L].uuid]<=0&&O[L].dispose()})},updateMaterials:function(O){var D=this.materials;Object.keys(D).forEach(function(L){D[L].needsUpdate=!0})},onMaterialTextureLoaded:function(O){this.textureCounts[O.detail.texture.uuid]||(this.textureCounts[O.detail.texture.uuid]=0),this.textureCounts[O.detail.texture.uuid]++}});function _(O,D){var L,N=D.getAttribute("id"),H,J;if(N)return N;for(H="",J=O||{},L=0;L<D.attributes.length;L++)J[D.attributes[L].name]=D.attributes[L].value;return Object.keys(J).sort().forEach(function(K){H+=K+":"+J[K]+";"}),H}function S(O,D){return new Promise(L);function L(N,H){var J=typeof O!="string";function K(se){v(se,D),se.needsUpdate=!0,N(se)}if(J){K(new m.Texture(O));return}g.load(O,K,function(){},function(se){C("`$s` could not be fetched (Error code: %s; Response: %s)",se.status,se.statusText)})}}function R(O,D,L){var N=document.createElement("video");return N.width=D,N.height=L,N.setAttribute("playsinline",""),N.setAttribute("webkit-playsinline",""),N.autoplay=!0,N.loop=!0,N.crossOrigin="anonymous",N.addEventListener("error",function(){b("`$s` is not a valid video",O)},!0),N.src=O,N}function P(O){return O.autoplay=O.hasAttribute("autoplay")&&O.getAttribute("autoplay")!=="false",O.controls=O.hasAttribute("controls")&&O.getAttribute("controls")!=="false",O.getAttribute("loop")==="false"&&O.removeAttribute("loop"),O.getAttribute("preload")==="false"&&(O.preload="none"),O.crossOrigin=O.crossOrigin||"anonymous",O.setAttribute("playsinline",""),O.setAttribute("webkit-playsinline",""),O}},"./src/systems/renderer.js":(l,d,c)=>{var h=c("./src/core/system.js").registerSystem,m=c("./src/utils/index.js"),p=c("./src/lib/three.js"),A=m.debug,v=A("components:renderer:warn");l.exports.System=h("renderer",{schema:{antialias:{default:"auto",oneOf:["true","false","auto"]},highRefreshRate:{default:m.device.isOculusBrowser()},logarithmicDepthBuffer:{default:"auto",oneOf:["true","false","auto"]},maxCanvasWidth:{default:1920},maxCanvasHeight:{default:1920},physicallyCorrectLights:{default:!1},exposure:{default:1,if:{toneMapping:["ACESFilmic","linear","reinhard","cineon"]}},toneMapping:{default:"no",oneOf:["no","ACESFilmic","linear","reinhard","cineon"]},precision:{default:"high",oneOf:["high","medium","low"]},sortObjects:{default:!1},colorManagement:{default:!1},gammaOutput:{default:!1},alpha:{default:!0},foveationLevel:{default:1}},init:function(){var y=this.data,x=this.el,C=this.data.toneMapping.charAt(0).toUpperCase()+this.data.toneMapping.slice(1),g=x.renderer;g.sortObjects=y.sortObjects,g.physicallyCorrectLights=y.physicallyCorrectLights,g.toneMapping=p[C+"ToneMapping"],(y.colorManagement||y.gammaOutput)&&(g.outputEncoding=p.sRGBEncoding,y.gammaOutput&&v('Property `gammaOutput` is deprecated. Use `renderer="colorManagement: true;"` instead.')),x.hasAttribute("antialias")&&v('Component `antialias` is deprecated. Use `renderer="antialias: true"` instead.'),x.hasAttribute("logarithmicDepthBuffer")&&v('Component `logarithmicDepthBuffer` is deprecated. Use `renderer="logarithmicDepthBuffer: true"` instead.')},update:function(){var y=this.data,x=this.el,C=x.renderer,g=this.data.toneMapping.charAt(0).toUpperCase()+this.data.toneMapping.slice(1);C.toneMapping=p[g+"ToneMapping"],C.toneMappingExposure=y.exposure,C.xr.setFoveation(y.foveationLevel)},applyColorCorrection:function(y){!this.data.colorManagement||!y||(y.isColor?y.convertSRGBToLinear():y.isTexture&&(y.encoding=p.sRGBEncoding))}})},"./src/systems/shadow.js":(l,d,c)=>{var h=c("./src/core/system.js").registerSystem,m=c("./src/lib/three.js"),p={basic:m.BasicShadowMap,pcf:m.PCFShadowMap,pcfsoft:m.PCFSoftShadowMap};l.exports.System=h("shadow",{schema:{enabled:{default:!0},autoUpdate:{default:!0},type:{default:"pcf",oneOf:["basic","pcf","pcfsoft"]}},init:function(){var A=this.sceneEl,v=this.data;this.shadowMapEnabled=!1,A.renderer&&(A.renderer.shadowMap.type=p[v.type],A.renderer.shadowMap.autoUpdate=v.autoUpdate,this.setShadowMapEnabled(this.shadowMapEnabled))},update:function(A){A.enabled!==this.data.enabled&&this.setShadowMapEnabled(this.data.enabled)},setShadowMapEnabled:function(A){var v=this.sceneEl.renderer;this.shadowMapEnabled=this.data.enabled&&A,v&&(v.shadowMap.enabled=this.shadowMapEnabled)}})},"./src/systems/tracked-controls-webvr.js":(l,d,c)=>{var h=c("./src/core/system.js").registerSystem,m=c("./src/utils/index.js"),p=m.device.isWebXRAvailable;l.exports.System=h("tracked-controls-webvr",{init:function(){var A=this;this.controllers=[],this.isChrome=navigator.userAgent.indexOf("Chrome")!==-1,this.updateControllerList(),this.throttledUpdateControllerList=m.throttle(this.updateControllerList,500,this),!p&&navigator.getVRDisplays&&this.sceneEl.addEventListener("enter-vr",function(){navigator.getVRDisplays().then(function(v){v.length&&(A.vrDisplay=v[0])})})},tick:function(){this.isChrome?this.updateControllerList():this.throttledUpdateControllerList()},updateControllerList:function(){var A=this.controllers,v,y,x,C;if(y=navigator.getGamepads&&navigator.getGamepads(),!!y){for(C=A.length,A.length=0,x=0;x<y.length;++x)v=y[x],v&&v.pose&&A.push(v);A.length!==C&&this.el.emit("controllersupdated",void 0,!1)}}})},"./src/systems/tracked-controls-webxr.js":(l,d,c)=>{var h=c("./src/core/system.js").registerSystem,m=c("./src/utils/index.js");l.exports.System=h("tracked-controls-webxr",{init:function(){this.controllers=[],this.oldControllers=[],this.oldControllersLength=0,this.throttledUpdateControllerList=m.throttle(this.updateControllerList,500,this),this.updateReferenceSpace=this.updateReferenceSpace.bind(this),this.el.addEventListener("enter-vr",this.updateReferenceSpace),this.el.addEventListener("exit-vr",this.updateReferenceSpace)},tick:function(){this.throttledUpdateControllerList()},updateReferenceSpace:function(){var p=this,A=this.el.xrSession;if(!A){this.referenceSpace=void 0,this.controllers=[],this.oldControllersLength>0&&(this.oldControllersLength=0,this.el.emit("controllersupdated",void 0,!1));return}var v=p.el.sceneEl.systems.webxr.sessionReferenceSpaceType;A.requestReferenceSpace(v).then(function(y){p.referenceSpace=y}).catch(function(y){throw p.el.sceneEl.systems.webxr.warnIfFeatureNotRequested(v,'tracked-controls-webxr uses reference space "'+v+'".'),y})},updateControllerList:function(){var p=this.el.xrSession,A=this.oldControllers,v;if(!p){if(this.oldControllersLength===0)return;this.oldControllersLength=0,this.controllers=[],this.el.emit("controllersupdated",void 0,!1);return}if(p.inputSources){if(this.controllers=p.inputSources,this.oldControllersLength===this.controllers.length){var y=!0;for(v=0;v<this.controllers.length;++v)if(!(this.controllers[v]===A[v]&&this.controllers[v].gamepad===A[v].gamepad)){y=!1;break}if(y)return}for(A.length=0,v=0;v<this.controllers.length;v++)A.push(this.controllers[v]);this.oldControllersLength=this.controllers.length,this.el.emit("controllersupdated",void 0,!1)}}})},"./src/systems/webxr.js":(l,d,c)=>{var h=c("./src/core/system.js").registerSystem,m=c("./src/utils/index.js"),p=m.debug("systems:webxr:warn");l.exports.System=h("webxr",{schema:{referenceSpaceType:{type:"string",default:"local-floor"},requiredFeatures:{type:"array",default:["local-floor"]},optionalFeatures:{type:"array",default:["bounded-floor"]},overlayElement:{type:"selector"}},update:function(){var A=this.data;this.sessionConfiguration={requiredFeatures:A.requiredFeatures,optionalFeatures:A.optionalFeatures},this.sessionReferenceSpaceType=A.referenceSpaceType,A.overlayElement&&(A.overlayElement.classList.remove("a-dom-overlay"),A.optionalFeatures.includes("dom-overlay")||(A.optionalFeatures.push("dom-overlay"),this.el.setAttribute("webxr",A)),this.warnIfFeatureNotRequested("dom-overlay"),this.sessionConfiguration.domOverlay={root:A.overlayElement},A.overlayElement.classList.add("a-dom-overlay"))},wasFeatureRequested:function(A){return!!(A==="viewer"||A==="local"||this.sessionConfiguration.requiredFeatures.includes(A)||this.sessionConfiguration.optionalFeatures.includes(A))},warnIfFeatureNotRequested:function(A,v){if(!this.wasFeatureRequested(A)){var y='Please add the feature "'+A+`" to a-scene's webxr system options in requiredFeatures/optionalFeatures.`;p((v?v+" ":"")+y)}}})},"./src/utils/bind.js":l=>{l.exports=function(c,h){return function(m){return function(){var A=m.concat(Array.prototype.slice.call(arguments,0));return c.apply(h,A)}}(Array.prototype.slice.call(arguments,2))}},"./src/utils/coordinates.js":(l,d,c)=>{var h=c("./src/utils/debug.js"),m=c("./node_modules/object-assign/index.js"),p=h("utils:coordinates:warn"),A=["x","y","z","w"],v=/^\s*((-?\d*\.{0,1}\d+(e-?\d+)?)\s+){2,3}(-?\d*\.{0,1}\d+(e-?\d+)?)\s*$/;l.exports.regex=v;var y="object",x=/\s+/g;function C(S,R){var P,O,D,L,N,H,J,K,se;if(S&&S instanceof Object)return H=S.x===void 0?R&&R.x:S.x,J=S.y===void 0?R&&R.y:S.y,K=S.z===void 0?R&&R.z:S.z,se=S.w===void 0?R&&R.w:S.w,H!=null&&(S.x=_(H)),J!=null&&(S.y=_(J)),K!=null&&(S.z=_(K)),se!=null&&(S.w=_(se)),S;if(S==null)return typeof R===y?m({},R):R;for(P=S.trim().split(x),N={},L=0;L<A.length;L++)if(D=A[L],P[L])N[D]=parseFloat(P[L],10);else{if(O=R&&R[D],O===void 0)continue;N[D]=_(O)}return N}l.exports.parse=C;function g(S){var R;return typeof S!==y?S:(R=S.x+" "+S.y,S.z!=null&&(R+=" "+S.z),S.w!=null&&(R+=" "+S.w),R)}l.exports.stringify=g;function b(S){return v.test(S)}l.exports.isCoordinates=b,l.exports.isCoordinate=function(S){return p("`AFRAME.utils.isCoordinate` has been renamed to `AFRAME.utils.isCoordinates`"),b(S)};function _(S){return S!=null&&S.constructor===String?parseFloat(S,10):S}l.exports.toVector3=function(S){return new THREE.Vector3(S.x,S.y,S.z)}},"./src/utils/debug.js":(l,d,c)=>{var h=c("./node_modules/process/browser.js"),m=c("./node_modules/debug/browser.js"),p=c("./node_modules/object-assign/index.js"),A={colors:{debug:"gray",error:"red",info:"gray",warn:"orange"}},v=function(b){var _=m(b);return _.color=x(b),_};p(v,m);function y(b){var _=b.split(":");return _[_.length-1]}function x(b){var _=y(b),S=A.colors&&A.colors[_];return S||null}function C(){try{return window.localStorage}catch{}}var g=C();g&&(parseInt(g.logs,10)||g.logs==="true")?v.enable("*"):v.enable("*:error,*:info,*:warn"),h.browser&&(window.logs=v),l.exports=v},"./src/utils/device.js":(l,d,c)=>{var h=c("./node_modules/process/browser.js"),m=c("./node_modules/debug/browser.js")("device:error"),p,A=!1,v=!1,y=l.exports.isWebXRAvailable=!window.debug&&navigator.xr!==void 0;if(window.addEventListener("vrdisplayactivate",function(K){var se;y||(se=document.createElement("canvas"),p=K.display,se.getContext("webgl",{}),p.requestPresent([{source:se}]).then(function(){},function(){}))}),y){var x=function(){var K=document.querySelector("a-scene");if(!K){window.addEventListener("DOMContentLoaded",x);return}K.hasLoaded?K.components["vr-mode-ui"].updateEnterInterfaces():K.addEventListener("loaded",x)},C=function(K){m("WebXR session support error: "+K.message)};navigator.xr.isSessionSupported?(navigator.xr.isSessionSupported("immersive-vr").then(function(K){A=K,x()}).catch(C),navigator.xr.isSessionSupported("immersive-ar").then(function(K){v=K,x()}).catch(function(){})):navigator.xr.supportsSession?(navigator.xr.supportsSession("immersive-vr").then(function(){A=!0,x()}).catch(C),navigator.xr.supportsSession("immersive-ar").then(function(){v=!0,x()}).catch(function(){})):m("WebXR has neither isSessionSupported or supportsSession?!")}else navigator.getVRDisplays&&navigator.getVRDisplays().then(function(K){var se=document.querySelector("a-scene");p=K.length&&K[0],se&&se.emit("displayconnected",{vrDisplay:p})});function g(){return p}l.exports.getVRDisplay=g;function b(){return A||v||!!g()}l.exports.checkHeadsetConnected=b;function _(){return v}l.exports.checkARSupport=_;function S(){return A}l.exports.checkVRSupport=S;var R=function(){var K=!1;return function(se){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(se)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(se.substr(0,4)))&&(K=!0),(O()||P()||J())&&(K=!0),H()&&(K=!1)}(window.navigator.userAgent||window.navigator.vendor||window.opera),function(){return K}}();l.exports.isMobile=R;function P(K){var se=K||window.navigator.userAgent;return/ipad|Nexus (7|9)|xoom|sch-i800|playbook|tablet|kindle/i.test(se)}l.exports.isTablet=P;function O(){return/iPad|iPhone|iPod/.test(window.navigator.platform)}l.exports.isIOS=O;function D(){return!R()&&!H()&&window.orientation!==void 0}l.exports.isMobileDeviceRequestingDesktopSite=D;function L(){return/(OculusBrowser)/i.test(window.navigator.userAgent)}l.exports.isOculusBrowser=L;function N(){return/(Mobile VR)/i.test(window.navigator.userAgent)}l.exports.isFirefoxReality=N;function H(){return L()||N()}l.exports.isMobileVR=H;function J(){return/R7 Build/.test(window.navigator.userAgent)}l.exports.isR7=J,l.exports.isLandscape=function(){var K=window.orientation;return J()&&(K+=90),K===90||K===-90},l.exports.isBrowserEnvironment=!!(!h||h.browser),l.exports.isNodeEnvironment=!l.exports.isBrowserEnvironment},"./src/utils/entity.js":l=>{var d={};function c(h,m){return m=m||".",d[m]||(d[m]={}),h.indexOf(m)!==-1?d[m][h]=h.split(m):d[m][h]=h,d[m][h]}l.exports.getComponentPropertyPath=c,l.exports.propertyPathCache=d,l.exports.getComponentProperty=function(h,m,p){var A;return p=p||".",m.indexOf(p)!==-1?(A=c(m,p),A.constructor===String?h.getAttribute(A):h.getAttribute(A[0])[A[1]]):h.getAttribute(m)},l.exports.setComponentProperty=function(h,m,p,A){var v;if(A=A||".",m.indexOf(A)!==-1){v=c(m,A),v.constructor===String?h.setAttribute(v,p):h.setAttribute(v[0],v[1],p);return}h.setAttribute(m,p)}},"./src/utils/forceCanvasResizeSafariMobile.js":l=>{l.exports=function(c){var h=c.style.width,m=c.style.height;c.style.width=parseInt(h,10)+1+"px",c.style.height=parseInt(m,10)+1+"px",setTimeout(function(){c.style.width=h,c.style.height=m},200)}},"./src/utils/index.js":(l,d,c)=>{var h=c("./src/utils/debug.js"),m=c("./node_modules/deep-assign/index.js"),p=c("./src/utils/device.js"),A=c("./node_modules/object-assign/index.js"),v=c("./src/utils/object-pool.js"),y=h("utils:warn");l.exports.bind=c("./src/utils/bind.js"),l.exports.coordinates=c("./src/utils/coordinates.js"),l.exports.debug=h,l.exports.device=p,l.exports.entity=c("./src/utils/entity.js"),l.exports.forceCanvasResizeSafariMobile=c("./src/utils/forceCanvasResizeSafariMobile.js"),l.exports.isIE11=c("./src/utils/is-ie11.js"),l.exports.material=c("./src/utils/material.js"),l.exports.objectPool=v,l.exports.split=c("./src/utils/split.js").split,l.exports.styleParser=c("./src/utils/styleParser.js"),l.exports.trackedControls=c("./src/utils/tracked-controls.js"),l.exports.checkHeadsetConnected=function(){return y("`utils.checkHeadsetConnected` has moved to `utils.device.checkHeadsetConnected`"),p.checkHeadsetConnected(arguments)},l.exports.isGearVR=l.exports.device.isGearVR=function(){y("`utils.isGearVR` has been deprecated, use `utils.device.isMobileVR`")},l.exports.isIOS=function(){return y("`utils.isIOS` has moved to `utils.device.isIOS`"),p.isIOS(arguments)},l.exports.isOculusGo=l.exports.device.isOculusGo=function(){y("`utils.isOculusGo` has been deprecated, use `utils.device.isMobileVR`")},l.exports.isMobile=function(){return y("`utils.isMobile has moved to `utils.device.isMobile`"),p.isMobile(arguments)},l.exports.throttle=function(C,g,b){var _;return b&&(C=l.exports.bind(C,b)),function(){var S=Date.now(),R=typeof _>"u"?g:S-_;(typeof _>"u"||R>=g)&&(_=S,C.apply(null,arguments))}},l.exports.throttleLeadingAndTrailing=function(C,g,b){var _,S;return b&&(C=l.exports.bind(C,b)),function(){var R=Date.now(),P=typeof _>"u"?g:R-_,O=arguments;typeof _>"u"||P>=g?(clearTimeout(S),_=R,C.apply(null,O)):(clearTimeout(S),S=setTimeout(function(){_=Date.now(),C.apply(this,O)},g-P))}},l.exports.throttleTick=function(C,g,b){var _;return b&&(C=l.exports.bind(C,b)),function(S,R){var P=typeof _>"u"?R:S-_;(typeof _>"u"||P>=g)&&(_=S,C(S,P))}},l.exports.debounce=function(C,g,b){var _;return function(){var S=this,R=arguments,P=function(){_=null,b||C.apply(S,R)},O=b&&!_;clearTimeout(_),_=setTimeout(P,g),O&&C.apply(S,R)}},l.exports.extend=A,l.exports.extendDeep=m,l.exports.clone=function(C){return JSON.parse(JSON.stringify(C))};var x=function(){var C=v.createPool(function(){return[]});return function(g,b){var _,S,R,P,O,D;if(g===void 0||b===void 0||g===null||b===null||!(g&&b&&g.constructor===Object&&b.constructor===Object||g.constructor===Array&&b.constructor===Array))return g===b;S=C.use(),R=C.use(),S.length=0,R.length=0;for(_ in g)S.push(_);for(_ in b)R.push(_);if(S.length!==R.length)return C.recycle(S),C.recycle(R),!1;for(P=0;P<S.length;++P)if(O=g[S[P]],D=b[S[P]],typeof O=="object"||typeof D=="object"||Array.isArray(O)&&Array.isArray(D)){if(O===D)continue;if(!x(O,D))return C.recycle(S),C.recycle(R),!1}else if(O!==D)return C.recycle(S),C.recycle(R),!1;return C.recycle(S),C.recycle(R),!0}}();l.exports.deepEqual=x,l.exports.diff=function(){var C=[];return function(g,b,_){var S,R,P,O,D,L,N;O=_||{},C.length=0;for(D in g)C.push(D);if(!b)return O;for(P in b)C.indexOf(P)===-1&&C.push(P);for(L=0;L<C.length;L++)D=C[L],S=g[D],R=b[D],N=S&&R&&S.constructor===Object&&R.constructor===Object,(N&&!x(S,R)||!N&&S!==R)&&(O[D]=R);return O}}(),l.exports.shouldCaptureKeyEvent=function(C){return C.metaKey?!1:document.activeElement===document.body},l.exports.splitString=function(C,g){typeof g>"u"&&(g=" ");var b=new RegExp(g,"g");return C=(C||"").replace(b,g),C.split(g)},l.exports.getElData=function(C,g){g=g||{};var b={};Object.keys(g).forEach(_);function _(S){C.hasAttribute(S)&&(b[S]=C.getAttribute(S))}return b},l.exports.getUrlParameter=function(C){C=C.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var g=new RegExp("[\\?&]"+C+"=([^&#]*)"),b=g.exec(location.search);return b===null?"":decodeURIComponent(b[1].replace(/\+/g," "))},l.exports.isIframed=function(){return window.top!==window.self},l.exports.findAllScenes=function(C){for(var g=[],b=C.getElementsByTagName("*"),_=0,S=b.length;_<S;_++)b[_].isScene&&g.push(b[_]);return g},l.exports.srcLoader=c("./src/utils/src-loader.js")},"./src/utils/ios-orientationchange-blank-bug.js":()=>{window.addEventListener("orientationchange",function(){document.documentElement.style.height="initial",setTimeout(function(){document.documentElement.style.height="100%",setTimeout(function(){window.scrollTo(0,1)},500)},500)})},"./src/utils/is-ie11.js":l=>{function d(){var c=-1,h=navigator.userAgent,m;return navigator.appName==="Microsoft Internet Explorer"?(m=new RegExp("MSIE ([0-9]{1,}[\\.0-9]{0,})"),m.exec(h)!=null&&(c=parseFloat(RegExp.$1))):navigator.appName==="Netscape"&&(m=new RegExp("Trident/.*rv:([0-9]{1,}[\\.0-9]{0,})"),m.exec(h)!=null&&(c=parseFloat(RegExp.$1))),c}l.exports=d()===11},"./src/utils/isIOSOlderThan10.js":l=>{l.exports=function(c){return/(iphone|ipod|ipad).*os.(7_|8_|9_)/i.test(c)}},"./src/utils/material.js":(l,d,c)=>{var h=c("./src/lib/three.js"),m=["application/x-mpegurl","application/vnd.apple.mpegurl"],p=new Set(["emissiveMap","envMap","map","specularMap"]);function A(y,x){var C=x.offset||{x:0,y:0},g=x.repeat||{x:1,y:1},b=x.npot||!1;b&&(y.wrapS=h.ClampToEdgeWrapping,y.wrapT=h.ClampToEdgeWrapping,y.magFilter=h.LinearFilter,y.minFilter=h.LinearFilter),(g.x!==1||g.y!==1)&&(y.wrapS=h.RepeatWrapping,y.wrapT=h.RepeatWrapping,y.repeat.set(g.x,g.y)),(C.x!==0||C.y!==0)&&y.offset.set(C.x,C.y)}l.exports.setTextureProperties=A,l.exports.updateMapMaterialFromData=function(y,x,C,g){var b=C.el,_=C.material,S=b.sceneEl.systems.renderer,R=g[x];if(C.materialSrcs||(C.materialSrcs={}),!R){delete C.materialSrcs[y],O(null);return}if(R===C.materialSrcs[y]&&_[y]){A(_[y],g);return}C.materialSrcs[y]=R,R instanceof h.Texture?O(R):b.sceneEl.systems.material.loadTexture(R,{src:R,repeat:g.repeat,offset:g.offset,npot:g.npot},P);function P(D){C.materialSrcs[y]===R&&O(D)}function O(D){_[y]=D,D&&p.has(y)&&S.applyColorCorrection(D),_.needsUpdate=!0,v(b,D)}},l.exports.updateMap=function(y,x){return l.exports.updateMapMaterialFromData("map","src",y,x)},l.exports.updateDistortionMap=function(y,x,C){var g=y;y==="ambientOcclusion"&&(g="ao");var b=x.el,_=x.material,S=b.sceneEl.systems.renderer,R=C[y+"Map"],P={};if(P.src=R,P.offset=C[y+"TextureOffset"],P.repeat=C[y+"TextureRepeat"],P.wrap=C[y+"TextureWrap"],R){if(R===x[y+"TextureSrc"])return;x[y+"TextureSrc"]=R,b.sceneEl.systems.material.loadTexture(R,P,O);return}if(!_.map)return;O(null);function O(D){var L=g+"Map";_[L]=D,D&&p.has(L)&&S.applyColorCorrection(D),D&&A(D,C),_.needsUpdate=!0,v(b,D)}};function v(y,x){x&&(y.emit("materialtextureloaded",{src:x.image,texture:x}),!(!x.image||x.image.tagName!=="VIDEO")&&(x.image.addEventListener("loadeddata",function(){!y.components||!y.components.material||(x.needsCorrectionBGRA&&x.needsCorrectionFlipY&&["standard","flat"].indexOf(y.components.material.data.shader)!==-1&&y.setAttribute("material","shader","ios10hls"),y.emit("materialvideoloadeddata",{src:x.image,texture:x}))}),x.image.addEventListener("ended",function(){y.emit("materialvideoended",{src:x.image,texture:x})})))}l.exports.handleTextureEvents=v,l.exports.isHLS=function(y,x){return!!(x&&m.includes(x.toLowerCase())||y&&y.toLowerCase().indexOf(".m3u8")>0)}},"./src/utils/math.js":l=>{function d(h,m,p){var A=m.dot(h);return(A-m.dot(p))/m.length()}function c(h,m,p,A){var v=d(h,m,p);return A.copy(m),A.multiplyScalar(v),A.add(p),A}l.exports.distanceOfPointFromPlane=d,l.exports.nearestPointInPlane=c},"./src/utils/object-pool.js":l=>{var d=Object.freeze(Object.create(null));function c(){return{}}l.exports.createPool=function(A){var v=[],y=null;A=A||c;function x(){var _;return(y===null||y===v.length)&&g(v.length||5),_=v[y],v[y++]=d,h(_),_}function C(_){if(_ instanceof Object){if(y===null||y===-1){v[v.length]=_;return}v[--y]=_}}function g(_){var S,R;if(_=_===void 0?v.length:_,_>0&&y==null&&(y=0),_>0)for(S=v.length,v.length+=Number(_),R=S;R<v.length;R++)v[R]=A();return v.length}function b(){return v.length}return{grow:g,pool:v,recycle:C,size:b,use:x}};function h(p){var A;if(!(!p||p.constructor!==Object))for(A in p)p[A]=void 0}l.exports.clearObject=h;function m(p,A){var v;if(!(!p||p.constructor!==Object))for(v in p)v in A||delete p[v]}l.exports.removeUnusedKeys=m},"./src/utils/split.js":l=>{l.exports.split=function(){var d={};return function(c,h){return h in d||(d[h]={}),c in d[h]||(d[h][c]=c.split(h)),d[h][c]}}()},"./src/utils/src-loader.js":(l,d,c)=>{var h=c("./src/utils/debug.js"),m=h("utils:src-loader:warn");function p(g,b,_){y(g,function(R){if(R){b(g);return}_(g)})}function A(g,b){var _,S="",R,P,O=[];for(R=0;R<5;R++)S+="(url\\((?:[^\\)]+)\\),\\s*)";S+="(url\\((?:[^\\)]+)\\)\\s*)",P=g.match(new RegExp(S));function D(L){O.push(L),O.length===6&&b(O)}if(P){for(R=1;R<7;R++)p(v(P[R]),D);return}if(_=C(g),!!_){if(_.tagName==="A-CUBEMAP"&&_.srcs)return b(_.srcs);m('Selector "%s" does not point to <a-cubemap>',g)}}function v(g){var b=g.match(/\url\((.+)\)/);if(b)return b[1]}function y(g,b){var _;if(g.tagName){b(g.tagName==="IMG");return}_=new XMLHttpRequest,_.open("HEAD",g),_.addEventListener("load",function(S){var R;_.status>=200&&_.status<300?(R=_.getResponseHeader("Content-Type"),R==null?x(g,b):R.startsWith("image")?b(!0):b(!1)):x(g,b),_.abort()}),_.send()}function x(g,b){var _=new Image;_.addEventListener("load",S);function S(){b(!0)}_.addEventListener("error",R);function R(){b(!1)}_.src=g}function C(g){try{var b=document.querySelector(g);return b||m('No element was found matching the selector: "%s"',g),b}catch{m('"%s" is not a valid selector',g);return}}l.exports={parseUrl:v,validateSrc:p,validateCubemapSrc:A}},"./src/utils/styleParser.js":l=>{var d=/-([a-z])/g;l.exports.parse=function(y,x){var C;return typeof y!="string"||(C=p(y,x),C[""])?y:h(C)},l.exports.stringify=function(y){return typeof y=="string"?y:A(y)};function c(y){return y.replace(d,v)}l.exports.toCamelCase=c;function h(y){var x,C;for(C in y)x=c(C),C!==x&&(y[x]=y[C],delete y[C]);return y}l.exports.transformKeysToCamelCase=h;var m=function(){var y=[],x=/url\([^)]+$/;return function(g){var b="",_,S=0,R=";";for(y.length=0;S<g.length;){if(_=g.indexOf(R,S),_===-1&&(_=g.length),b+=g.substring(S,_),x.test(b)){b+=";",S=_+1;continue}y.push(b.trim()),b="",S=_+1}return y}}();function p(y,x){var C,g,b,_,S,R;for(x=x||{},C=m(y),g=0;g<C.length;g++)b=C[g],b&&(_=b.indexOf(":"),S=b.substr(0,_).trim(),R=b.substr(_+1).trim(),x[S]=R);return x}function A(y){var x,C=0,g=0,b="";for(x in y)C++;for(x in y)b+=x+": "+y[x],g<C-1&&(b+="; "),g++;return b}function v(y){return y[1].toUpperCase()}},"./src/utils/tracked-controls.js":(l,d,c)=>{var h=c("./src/constants/index.js").DEFAULT_HANDEDNESS,m=["x","y","z","w"],p=2;l.exports.checkControllerPresentAndSetup=function(C,g,b){var _=C.el,S,R=_.sceneEl.hasWebXR,P=R?v:A,O;if(S=P(C,g,b),O=!!S,C.controllerPresent&&!C.controllerEventsActive&&!R&&C.addEventListeners(),O===C.controllerPresent)return O;C.controllerPresent=O,O?(C.addEventListeners(),C.injectTrackedControls(S),_.emit("controllerconnected",{name:C.name,component:C})):(C.removeEventListeners(),_.emit("controllerdisconnected",{name:C.name,component:C}))};function A(C,g,b){var _,S=C.el.sceneEl,R,P=b.index||0;return!g||(R=S&&S.systems["tracked-controls-webvr"],!R)||(_=R.controllers,!_.length)?!1:!!y(_,null,g,b.hand,P)}function v(C,g,b){var _,S=C.el.sceneEl,R=S&&S.systems["tracked-controls-webxr"];return!R||(_=R.controllers,!_||!_.length)?!1:x(_,g,b.hand,b.index,b.iterateControllerProfiles,b.handTracking)}l.exports.isControllerPresentWebVR=A,l.exports.isControllerPresentWebXR=v;function y(C,g,b,_,S){var R,P,O=0,D=S>=0?S:0;for(P=0;P<C.length;P++)if(R=C[P],!(b&&!R.id.startsWith(b))&&!(!b&&R.id!==g)&&!(_&&R.hand&&_!==R.hand)){if(_&&!R.hand)D=p*S+(_===h?0:1);else return R;if(O===D)return R;++O}}function x(C,g,b,_,S,R){var P,O,D,L=!1,N,H;for(P=0;P<C.length;P++){if(D=C[P],H=D.profiles,R)L=D.hand;else if(S)for(O=0;O<H.length&&(L=H[O].startsWith(g),!L);O++);else L=H.length>0&&H[0].startsWith(g);if(L){if(N=D.handedness==="right"||D.handedness==="left",N){if(D.handedness===b)return C[P]}else if(P===_)return C[P]}}}l.exports.findMatchingControllerWebVR=y,l.exports.findMatchingControllerWebXR=x,l.exports.emitIfAxesChanged=function(C,g,b){var _,S,R,P,O;for(S in g){for(_=g[S],R=!1,O=0;O<_.length;O++)b.detail.changed[_[O]]&&(R=!0);if(R){for(P={},O=0;O<_.length;O++)P[m[O]]=b.detail.axis[_[O]];C.el.emit(S+"moved",P)}}},l.exports.onButtonEvent=function(C,g,b,_){var S=_?b.mapping[_]:b.mapping,R=S.buttons[C];b.el.emit(R+g),b.updateModel&&b.updateModel(R,g)}},"./vendor/DeviceOrientationControls.js":()=>{THREE.DeviceOrientationControls=function(l){var d=this;this.object=l,this.object.rotation.reorder("YXZ"),this.enabled=!0,this.deviceOrientation={},this.screenOrientation=0,this.alphaOffset=0;var c=function(p){d.deviceOrientation=p},h=function(){d.screenOrientation=window.orientation||0},m=function(){var p=new THREE.Vector3(0,0,1),A=new THREE.Euler,v=new THREE.Quaternion,y=new THREE.Quaternion(-Math.sqrt(.5),0,0,Math.sqrt(.5));return function(x,C,g,b,_){A.set(g,C,-b,"YXZ"),x.setFromEuler(A),x.multiply(y),x.multiply(v.setFromAxisAngle(p,-_))}}();this.connect=function(){h(),window.addEventListener("orientationchange",h,!1),window.addEventListener("deviceorientation",c,!1),d.enabled=!0},this.disconnect=function(){window.removeEventListener("orientationchange",h,!1),window.removeEventListener("deviceorientation",c,!1),d.enabled=!1},this.update=function(){if(d.enabled!==!1){var p=d.deviceOrientation;if(p){var A=p.alpha?THREE.MathUtils.degToRad(p.alpha)+d.alphaOffset:0,v=p.beta?THREE.MathUtils.degToRad(p.beta):0,y=p.gamma?THREE.MathUtils.degToRad(p.gamma):0,x=d.screenOrientation?THREE.MathUtils.degToRad(d.screenOrientation):0;m(d.object.quaternion,A,v,y,x)}}},this.dispose=function(){d.disconnect()},this.connect()}},"./vendor/rStats.extras.js":l=>{window.glStats=function(){var d=null,c=0,h=0,m=0,p=0,A=0,v=0,y=0;function x(O,D){return function(){D.apply(this,arguments),O.apply(this,arguments)}}WebGLRenderingContext.prototype.drawArrays=x(WebGLRenderingContext.prototype.drawArrays,function(){c++,arguments[0]==this.POINTS?v+=arguments[2]:A+=arguments[2]}),WebGLRenderingContext.prototype.drawElements=x(WebGLRenderingContext.prototype.drawElements,function(){h++,p+=arguments[1]/3,A+=arguments[1]}),WebGLRenderingContext.prototype.useProgram=x(WebGLRenderingContext.prototype.useProgram,function(){m++}),WebGLRenderingContext.prototype.bindTexture=x(WebGLRenderingContext.prototype.bindTexture,function(){y++});var C={allcalls:{over:3e3,caption:"Calls (hook)"},drawelements:{caption:"drawElements (hook)"},drawarrays:{caption:"drawArrays (hook)"}},g=[{caption:"WebGL",values:["allcalls","drawelements","drawarrays","useprogram","bindtexture","glfaces","glvertices","glpoints"]}],b=[{base:"allcalls",steps:["drawelements","drawarrays"]}];function _(){d("allcalls").set(c+h),d("drawElements").set(h),d("drawArrays").set(c),d("bindTexture").set(y),d("useProgram").set(m),d("glfaces").set(p),d("glvertices").set(A),d("glpoints").set(v)}function S(){c=0,h=0,m=0,p=0,A=0,v=0,y=0}function R(){}function P(O){d=O}return{update:_,start:S,end:R,attach:P,values:C,groups:g,fractions:b}},window.threeStats=function(d){var c=null,h={"renderer.info.memory.geometries":{caption:"Geometries"},"renderer.info.memory.textures":{caption:"Textures"},"renderer.info.programs":{caption:"Programs"},"renderer.info.render.calls":{caption:"Calls"},"renderer.info.render.triangles":{caption:"Triangles",over:1e3},"renderer.info.render.points":{caption:"Points"}},m=[{caption:"Three.js - Memory",values:["renderer.info.memory.geometries","renderer.info.programs","renderer.info.memory.textures"]},{caption:"Three.js - Render",values:["renderer.info.render.calls","renderer.info.render.triangles","renderer.info.render.points"]}],p=[];function A(){c("renderer.info.memory.geometries").set(d.info.memory.geometries),c("renderer.info.programs").set(d.info.programs.length),c("renderer.info.memory.textures").set(d.info.memory.textures),c("renderer.info.render.calls").set(d.info.render.calls),c("renderer.info.render.triangles").set(d.info.render.triangles),c("renderer.info.render.points").set(d.info.render.points)}function v(){}function y(){}function x(C){c=C}return{update:A,start:v,end:y,attach:x,values:h,groups:m,fractions:p}},window.BrowserStats=function(){var d=null,c=0,h=0;window.performance&&!performance.memory&&(performance.memory={usedJSHeapSize:0,totalJSHeapSize:0}),performance.memory.totalJSHeapSize===0&&console.warn("totalJSHeapSize === 0... performance.memory is only available in Chrome .");var m={memory:{caption:"Used Memory",average:!0,avgMs:1e3,over:22},total:{caption:"Total Memory"}},p=[{caption:"Browser",values:["memory","total"]}],A=[{base:"total",steps:["memory"]}],v=Math.log(1024);function y(_){var S=100,R=Math.floor(Math.log(_)/v);return Math.round(_*S/Math.pow(1024,R))/S}function x(){c=y(performance.memory.usedJSHeapSize),h=y(performance.memory.totalJSHeapSize),d("memory").set(c),d("total").set(h)}function C(){c=0}function g(){}function b(_){d=_}return{update:x,start:C,end:g,attach:b,values:m,groups:p,fractions:A}},l.exports={glStats:window.glStats,threeStats:window.threeStats,BrowserStats:window.BrowserStats}},"./vendor/rStats.js":l=>{(function(){"performance"in window||(window.performance={});var d=window.performance;if(!("now"in d)){var c=Date.now();d.timing&&d.timing.navigationStart&&(c=d.timing.navigationStart),d.now=function(){return Date.now()-c}}d.mark||(d.mark=function(){}),d.measure||(d.measure=function(){})})(),window.rStats=function(c){function h(H,J){for(var K=Object.keys(H),se=0,ae=K.length;se<ae;se++)J(K[se])}function m(H){var J=document.createElement("link");J.href=H,J.rel="stylesheet",J.type="text/css",document.getElementsByTagName("head")[0].appendChild(J)}var p=c||{},A=p.colours||["#850700","#c74900","#fcb300","#284280","#4c7c0c"],v="https://fonts.googleapis.com/css?family=Roboto+Condensed:400,700,300",y=(p.CSSPath?p.CSSPath:"")+"rStats.css",x=p.css||[v,y];x.forEach(function(H){m(H)}),p.values||(p.values={});var C,g,b=10,_=200,S={};function R(H,J,K){var se=K||{},ae=document.createElement("canvas"),ee=ae.getContext("2d"),ne=0,X=0,W=se.color?se.color:"#666666",ce=document.createElement("canvas"),he=ce.getContext("2d");ce.width=1,ce.height=2*b,he.fillStyle="#444444",he.fillRect(0,0,1,2*b),he.fillStyle=W,he.fillRect(0,b,1,b),he.fillStyle="#ffffff",he.globalAlpha=.5,he.fillRect(0,b,1,1),he.globalAlpha=1;var xe=document.createElement("canvas"),ve=xe.getContext("2d");xe.width=1,xe.height=2*b,ve.fillStyle="#444444",ve.fillRect(0,0,1,2*b),ve.fillStyle="#b70000",ve.fillRect(0,b,1,b),ve.globalAlpha=.5,ve.fillStyle="#ffffff",ve.fillRect(0,b,1,1),ve.globalAlpha=1;function Fe(){ae.width=_,ae.height=b,ae.style.width=ae.width+"px",ae.style.height=ae.height+"px",ae.className="rs-canvas",H.appendChild(ae),ee.fillStyle="#444444",ee.fillRect(0,0,ae.width,ae.height)}function je(rt,He){X+=(rt-X)*.1,ne*=.99,X>ne&&(ne=X),ee.drawImage(ae,1,0,ae.width-1,ae.height,0,0,ae.width-1,ae.height),He?ee.drawImage(xe,ae.width-1,ae.height-X*ae.height/ne-b):ee.drawImage(ce,ae.width-1,ae.height-X*ae.height/ne-b)}return Fe(),{draw:je}}function P(H,J){var K=document.createElement("canvas"),se=K.getContext("2d");function ae(){K.width=_,K.height=b*J,K.style.width=K.width+"px",K.style.height=K.height+"px",K.className="rs-canvas",H.appendChild(K),se.fillStyle="#444444",se.fillRect(0,0,K.width,K.height)}function ee(ne){se.drawImage(K,1,0,K.width-1,K.height,0,0,K.width-1,K.height);var X=0;h(ne,function(W){var ce=ne[W]*K.height;se.fillStyle=A[W],se.fillRect(K.width-1,X,1,ce),X+=ce})}return ae(),{draw:ee}}function O(H,J){var K=H,se,ae=0,ee=0,ne=0,X=0,W=performance.now(),ce=0,he=document.createElement("div"),xe=document.createElement("span"),ve=document.createElement("div"),Fe=document.createTextNode(""),je=p?p.values[K.toLowerCase()]:null,rt=new R(he,K,je),He=!1;xe.className="rs-counter-id",xe.textContent=je&&je.caption?je.caption:K,ve.className="rs-counter-value",ve.appendChild(Fe),he.appendChild(xe),he.appendChild(ve),J?J.div.appendChild(he):g.appendChild(he),se=performance.now();function Ot(qt){if(je&&je.average){X+=qt,ce++;var Ft=performance.now();Ft-W>=(je.avgMs||1e3)&&(ne=X/ce,X=0,W=Ft,ce=0)}}function xt(){se=performance.now(),p.userTimingAPI&&performance.mark(K+"-start"),He=!0}function gt(){ae=performance.now()-se,p.userTimingAPI&&(performance.mark(K+"-end"),He&&performance.measure(K,K+"-start",K+"-end")),Ot(ae)}function It(){gt(),xt()}function ct(){var qt=je&&je.average?ne:ae;Fe.nodeValue=Math.round(qt*100)/100;var Ft=je&&(je.below&&ae<je.below||je.over&&ae>je.over);rt.draw(ae,Ft),he.className=Ft?"rs-counter-base alarm":"rs-counter-base"}function ut(){var qt=performance.now(),Ft=qt-se;ee++,Ft>1e3&&(je&&je.interpolate===!1?ae=ee:ae=ee*1e3/Ft,ee=0,se=qt,Ot(ae))}function Ct(qt){ae=qt,Ot(ae)}return{set:Ct,start:xt,tick:It,end:gt,frame:ut,value:function(){return ae},draw:ct}}function D(H){var J=H.toLowerCase();if(J===void 0&&(J="default"),S[J])return S[J];var K=null;p&&p.groups&&h(p.groups,function(ae){var ee=p.groups[parseInt(ae,10)];!K&&ee.values.indexOf(J.toLowerCase())!==-1&&(K=ee)});var se=new O(J,K);return S[J]=se,se}function L(){if(p.plugins){p.values||(p.values={}),p.groups||(p.groups=[]),p.fractions||(p.fractions=[]);for(var H=0;H<p.plugins.length;H++)p.plugins[H].attach(D),h(p.plugins[H].values,function(J){p.values[J]=p.plugins[H].values[J]}),p.groups=p.groups.concat(p.plugins[H].groups),p.fractions=p.fractions.concat(p.plugins[H].fractions)}else p.plugins={};C=document.createElement("div"),C.className="rs-base",g=document.createElement("div"),g.className="rs-container",g.style.height="auto",C.appendChild(g),document.body.appendChild(C),p&&(p.groups&&h(p.groups,function(J){var K=p.groups[parseInt(J,10)],se=document.createElement("div");se.className="rs-group",K.div=se;var ae=document.createElement("h1");ae.textContent=K.caption,ae.addEventListener("click",function(ee){this.classList.toggle("hidden"),ee.preventDefault()}.bind(se)),g.appendChild(ae),g.appendChild(se)}),p.fractions&&h(p.fractions,function(J){var K=p.fractions[parseInt(J,10)],se=document.createElement("div");se.className="rs-fraction";var ae=document.createElement("div");ae.className="rs-legend";var ee=0;h(p.fractions[J].steps,function(X){var W=document.createElement("p");W.textContent=p.fractions[J].steps[X],W.style.color=A[ee],ae.appendChild(W),ee++}),se.appendChild(ae),se.style.height=ee*b+"px",K.div=se;var ne=new P(se,ee);K.graph=ne,g.appendChild(se)}))}function N(){h(p.plugins,function(H){p.plugins[H].update()}),h(S,function(H){S[H].draw()}),p&&p.fractions&&h(p.fractions,function(H){var J=p.fractions[parseInt(H,10)],K=[],se=S[J.base.toLowerCase()];se&&(se=se.value(),h(p.fractions[H].steps,function(ae){var ee=p.fractions[H].steps[parseInt(ae,10)].toLowerCase(),ne=S[ee];ne&&K.push(ne.value()/se)})),J.graph.draw(K)})}return L(),function(H){return H?D(H):{element:C,update:N}}},l.exports=window.rStats},"./vendor/starts-with-polyfill.js":()=>{String.prototype.startsWith||(String.prototype.startsWith=function(l,d){return d=d||0,this.substr(d,l.length)===l})},"./vendor/wakelock/util.js":l=>{var d={};d.base64=function(c,h){return"data:"+c+";base64,"+h},d.isMobile=function(){var c=!1;return function(h){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(h)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(h.substr(0,4)))&&(c=!0)}(navigator.userAgent||navigator.vendor||window.opera),c},d.isIOS=function(){return/(iPad|iPhone|iPod)/g.test(navigator.userAgent)},d.isIFrame=function(){try{return window.self!==window.top}catch{return!0}},d.appendQueryParameter=function(c,h,m){var p=c.indexOf("?")<0?"?":"&";return c+=p+h+"="+m,c},d.getQueryParameter=function(c){c=c.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var h=new RegExp("[\\?&]"+c+"=([^&#]*)"),m=h.exec(location.search);return m===null?"":decodeURIComponent(m[1].replace(/\+/g," "))},d.isLandscapeMode=function(){return window.orientation==90||window.orientation==-90},l.exports=d},"./vendor/wakelock/wakelock.js":(l,d,c)=>{var h=c("./vendor/wakelock/util.js");function m(){var v=document.createElement("video");v.addEventListener("ended",function(){v.play()}),this.request=function(){v.paused&&(v.src=h.base64("video/webm","GkXfowEAAAAAAAAfQoaBAUL3gQFC8oEEQvOBCEKChHdlYm1Ch4ECQoWBAhhTgGcBAAAAAAAH4xFNm3RALE27i1OrhBVJqWZTrIHfTbuMU6uEFlSua1OsggEwTbuMU6uEHFO7a1OsggfG7AEAAAAAAACkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmAQAAAAAAAEUq17GDD0JATYCNTGF2ZjU2LjQwLjEwMVdBjUxhdmY1Ni40MC4xMDFzpJAGSJTMbsLpDt/ySkipgX1fRImIQO1MAAAAAAAWVK5rAQAAAAAAADuuAQAAAAAAADLXgQFzxYEBnIEAIrWcg3VuZIaFVl9WUDmDgQEj44OEO5rKAOABAAAAAAAABrCBsLqBkB9DtnUBAAAAAAAAo+eBAKOmgQAAgKJJg0IAAV4BHsAHBIODCoAACmH2MAAAZxgz4dPSTFi5JACjloED6ACmAECSnABMQAADYAAAWi0quoCjloEH0ACmAECSnABNwAADYAAAWi0quoCjloELuACmAECSnABNgAADYAAAWi0quoCjloEPoACmAECSnABNYAADYAAAWi0quoCjloETiACmAECSnABNIAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTnghdwo5aBAAAApgBAkpwATOAAA2AAAFotKrqAo5aBA+gApgBAkpwATMAAA2AAAFotKrqAo5aBB9AApgBAkpwATIAAA2AAAFotKrqAo5aBC7gApgBAkpwATEAAA2AAAFotKrqAo5aBD6AApgDAkpwAQ2AAA2AAAFotKrqAo5aBE4gApgBAkpwATCAAA2AAAFotKrqAH0O2dQEAAAAAAACU54Iu4KOWgQAAAKYAQJKcAEvAAANgAABaLSq6gKOWgQPoAKYAQJKcAEtgAANgAABaLSq6gKOWgQfQAKYAQJKcAEsAAANgAABaLSq6gKOWgQu4AKYAQJKcAEqAAANgAABaLSq6gKOWgQ+gAKYAQJKcAEogAANgAABaLSq6gKOWgROIAKYAQJKcAEnAAANgAABaLSq6gB9DtnUBAAAAAAAAlOeCRlCjloEAAACmAECSnABJgAADYAAAWi0quoCjloED6ACmAECSnABJIAADYAAAWi0quoCjloEH0ACmAMCSnABDYAADYAAAWi0quoCjloELuACmAECSnABI4AADYAAAWi0quoCjloEPoACmAECSnABIoAADYAAAWi0quoCjloETiACmAECSnABIYAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTngl3Ao5aBAAAApgBAkpwASCAAA2AAAFotKrqAo5aBA+gApgBAkpwASAAAA2AAAFotKrqAo5aBB9AApgBAkpwAR8AAA2AAAFotKrqAo5aBC7gApgBAkpwAR4AAA2AAAFotKrqAo5aBD6AApgBAkpwAR2AAA2AAAFotKrqAo5aBE4gApgBAkpwARyAAA2AAAFotKrqAH0O2dQEAAAAAAACU54J1MKOWgQAAAKYAwJKcAENgAANgAABaLSq6gKOWgQPoAKYAQJKcAEbgAANgAABaLSq6gKOWgQfQAKYAQJKcAEagAANgAABaLSq6gKOWgQu4AKYAQJKcAEaAAANgAABaLSq6gKOWgQ+gAKYAQJKcAEZAAANgAABaLSq6gKOWgROIAKYAQJKcAEYAAANgAABaLSq6gB9DtnUBAAAAAAAAlOeCjKCjloEAAACmAECSnABF4AADYAAAWi0quoCjloED6ACmAECSnABFwAADYAAAWi0quoCjloEH0ACmAECSnABFoAADYAAAWi0quoCjloELuACmAECSnABFgAADYAAAWi0quoCjloEPoACmAMCSnABDYAADYAAAWi0quoCjloETiACmAECSnABFYAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTngqQQo5aBAAAApgBAkpwARUAAA2AAAFotKrqAo5aBA+gApgBAkpwARSAAA2AAAFotKrqAo5aBB9AApgBAkpwARQAAA2AAAFotKrqAo5aBC7gApgBAkpwARQAAA2AAAFotKrqAo5aBD6AApgBAkpwAROAAA2AAAFotKrqAo5aBE4gApgBAkpwARMAAA2AAAFotKrqAH0O2dQEAAAAAAACU54K7gKOWgQAAAKYAQJKcAESgAANgAABaLSq6gKOWgQPoAKYAQJKcAESAAANgAABaLSq6gKOWgQfQAKYAwJKcAENgAANgAABaLSq6gKOWgQu4AKYAQJKcAERgAANgAABaLSq6gKOWgQ+gAKYAQJKcAERAAANgAABaLSq6gKOWgROIAKYAQJKcAEQgAANgAABaLSq6gB9DtnUBAAAAAAAAlOeC0vCjloEAAACmAECSnABEIAADYAAAWi0quoCjloED6ACmAECSnABEAAADYAAAWi0quoCjloEH0ACmAECSnABD4AADYAAAWi0quoCjloELuACmAECSnABDwAADYAAAWi0quoCjloEPoACmAECSnABDoAADYAAAWi0quoCjloETiACmAECSnABDgAADYAAAWi0quoAcU7trAQAAAAAAABG7j7OBALeK94EB8YIBd/CBAw=="),v.play())},this.release=function(){v.pause(),v.src=""}}function p(){var v=null;this.request=function(){v||(v=setInterval(function(){window.location.href="/",setTimeout(window.stop,0)},15e3))},this.release=function(){v&&(clearInterval(v),v=null)}}function A(){var v=navigator.userAgent||navigator.vendor||window.opera;return v.match(/iPhone/i)||v.match(/iPod/i)?p:m}l.exports=A()},"./node_modules/css-loader/dist/cjs.js!./src/style/aframe.css":(l,d,c)=>{c.r(d),c.d(d,{default:()=>N});var h=c("./node_modules/css-loader/dist/runtime/sourceMaps.js"),m=c.n(h),p=c("./node_modules/css-loader/dist/runtime/api.js"),A=c.n(p),v=c("./node_modules/css-loader/dist/runtime/getUrl.js"),y=c.n(v),x=new URL(c("data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27%3E%3Ctitle%3Eaframe-vrmode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M68.81,21.56H64.23v8.27h4.58a4.13,4.13,0,0,0,3.1-1.09,4.2,4.2,0,0,0,1-3,4.24,4.24,0,0,0-1-3A4.05,4.05,0,0,0,68.81,21.56Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0ZM41.9,46H34L24,16h8l6,21.84,6-21.84H52Zm39.29,0H73.44L68.15,35.39H64.23V46H57V16H68.81q5.32,0,8.34,2.37a8,8,0,0,1,3,6.69,9.68,9.68,0,0,1-1.27,5.18,8.9,8.9,0,0,1-4,3.34l6.26,12.11Z%27 fill=%27%23fff%27/%3E%3C/svg%3E"),c.b),C=new URL(c("data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27%3E%3Ctitle%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0Zm8,50a8,8,0,0,1-8,8H12a8,8,0,0,1-8-8V12a8,8,0,0,1,8-8H96a8,8,0,0,1,8,8Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M43.35,39.82H32.51L30.45,46H23.88L35,16h5.73L52,46H45.43Zm-9.17-5h7.5L37.91,23.58Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M68.11,35H63.18V46H57V16H68.15q5.31,0,8.2,2.37a8.18,8.18,0,0,1,2.88,6.7,9.22,9.22,0,0,1-1.33,5.12,9.09,9.09,0,0,1-4,3.26l6.49,12.26V46H73.73Zm-4.93-5h5a5.09,5.09,0,0,0,3.6-1.18,4.21,4.21,0,0,0,1.28-3.27,4.56,4.56,0,0,0-1.2-3.34A5,5,0,0,0,68.15,21h-5Z%27 fill=%27%23fff%27/%3E%3C/svg%3E"),c.b),g=new URL(c("data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27 standalone=%27no%27%3F%3E%3Csvg width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27 version=%271.1%27 id=%27svg320%27 sodipodi:docname=%27fullscreen-aframe.svg%27 xml:space=%27preserve%27 inkscape:version=%271.2.1 %289c6d41e  2022-07-14%29%27 xmlns:inkscape=%27http://www.inkscape.org/namespaces/inkscape%27 xmlns:sodipodi=%27http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:svg=%27http://www.w3.org/2000/svg%27 xmlns:rdf=%27http://www.w3.org/1999/02/22-rdf-syntax-ns%23%27 xmlns:cc=%27http://creativecommons.org/ns%23%27 xmlns:dc=%27http://purl.org/dc/elements/1.1/%27%3E%3Cdefs id=%27defs324%27 /%3E%3Csodipodi:namedview id=%27namedview322%27 pagecolor=%27%23ffffff%27 bordercolor=%27%23000000%27 borderopacity=%270.25%27 inkscape:showpageshadow=%272%27 inkscape:pageopacity=%270.0%27 inkscape:pagecheckerboard=%270%27 inkscape:deskcolor=%27%23d1d1d1%27 showgrid=%27false%27 inkscape:zoom=%273.8064516%27 inkscape:cx=%2791.423729%27 inkscape:cy=%27-1.4449153%27 inkscape:window-width=%271440%27 inkscape:window-height=%27847%27 inkscape:window-x=%2732%27 inkscape:window-y=%2725%27 inkscape:window-maximized=%270%27 inkscape:current-layer=%27svg320%27 /%3E%3Ctitle id=%27title312%27%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M96 0H12A12 12 0 0 0 0 12V50A12 12 0 0 0 12 62H96a12 12 0 0 0 12-12V12A12 12 0 0 0 96 0Zm8 50a8 8 0 0 1-8 8H12a8 8 0 0 1-8-8V12a8 8 0 0 1 8-8H96a8 8 0 0 1 8 8Z%27 fill=%27%23fff%27 id=%27path314%27 style=%27fill:%23ffffff%27 /%3E%3Cg id=%27g356%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g358%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g360%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g362%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g364%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g366%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g368%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g370%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g372%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g374%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g376%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g378%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g380%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g382%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g384%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cmetadata id=%27metadata561%27%3E%3Crdf:RDF%3E%3Ccc:Work rdf:about=%27%27%3E%3Cdc:title%3Eaframe-armode-noborder-reduced-tracking%3C/dc:title%3E%3C/cc:Work%3E%3C/rdf:RDF%3E%3C/metadata%3E%3Cpath d=%27m 98.168511 40.083649 c 0 -1.303681 -0.998788 -2.358041 -2.239389 -2.358041 -1.230088 0.0031 -2.240892 1.05436 -2.240892 2.358041 v 4.881296 l -9.041661 -9.041662 c -0.874129 -0.875631 -2.288954 -0.875631 -3.16308 0 -0.874129 0.874126 -0.874129 2.293459 0 3.167585 l 8.995101 8.992101 h -4.858767 c -1.323206 0.0031 -2.389583 1.004796 -2.389583 2.239386 0 1.237598 1.066377 2.237888 2.389583 2.237888 h 10.154599 c 1.323206 0 2.388082 -0.998789 2.392587 -2.237888 -0.0044 -0.03305 -0.009 -0.05858 -0.0134 -0.09161 0.0046 -0.04207 0.0134 -0.08712 0.0134 -0.13066 V 40.085172 h -1.52e-4%27 id=%27path596%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 23.091002 35.921781 -9.026643 9.041662 v -4.881296 c 0 -1.303681 -1.009302 -2.355037 -2.242393 -2.358041 -1.237598 0 -2.237888 1.05436 -2.237888 2.358041 l -0.0031 10.016421 c 0 0.04356 0.01211 0.08862 0.0015 0.130659 -0.0031 0.03153 -0.009 0.05709 -0.01211 0.09161 0.0031 1.239099 1.069379 2.237888 2.391085 2.237888 h 10.156101 c 1.320202 0 2.388079 -1.000291 2.388079 -2.237888 0 -1.234591 -1.067877 -2.236383 -2.388079 -2.239387 h -4.858767 l 8.995101 -8.9921 c 0.871126 -0.874127 0.871126 -2.293459 0 -3.167586 -0.875628 -0.877132 -2.291957 -0.877132 -3.169087 -1.52e-4%27 id=%27path598%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 84.649572 25.978033 9.041662 -9.041664 v 4.881298 c 0 1.299176 1.010806 2.350532 2.240891 2.355037 1.240601 0 2.23939 -1.055861 2.23939 -2.355037 V 11.798242 c 0 -0.04356 -0.009 -0.08862 -0.0134 -0.127671 0.0044 -0.03153 0.009 -0.06157 0.0134 -0.09313 -0.0044 -1.240598 -1.069379 -2.2393873 -2.391085 -2.2393873 h -10.1546 c -1.323205 0 -2.38958 0.9987893 -2.38958 2.2393873 0 1.233091 1.066375 2.237887 2.38958 2.240891 h 4.858768 l -8.995102 8.9921 c -0.874129 0.872625 -0.874129 2.288954 0 3.161578 0.874127 0.880137 2.288951 0.880137 3.16308 1.5e-4%27 id=%27path600%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 17.264988 13.822853 h 4.857265 c 1.320202 -0.0031 2.388079 -1.0078 2.388079 -2.240889 0 -1.240601 -1.067877 -2.2393893 -2.388079 -2.2393893 H 11.967654 c -1.321707 0 -2.388082 0.9987883 -2.391085 2.2393893 0.0031 0.03153 0.009 0.06157 0.01211 0.09313 -0.0031 0.03905 -0.0015 0.08262 -0.0015 0.127671 l 0.0031 10.020926 c 0 1.299176 1.00029 2.355038 2.237887 2.355038 1.233092 -0.0044 2.242393 -1.055862 2.242393 -2.355038 v -4.881295 l 9.026644 9.041661 c 0.877132 0.878635 2.293459 0.878635 3.169087 0 0.871125 -0.872624 0.871125 -2.288953 0 -3.161577 l -8.995282 -8.993616%27 id=%27path602%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3C/svg%3E"),c.b),b=new URL(c("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%2090%2090%22%20enable-background%3D%22new%200%200%2090%2090%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpolygon%20points%3D%220%2C0%200%2C0%200%2C0%20%22%3E%3C/polygon%3E%3Cg%3E%3Cpath%20d%3D%22M71.545%2C48.145h-31.98V20.743c0-2.627-2.138-4.765-4.765-4.765H18.456c-2.628%2C0-4.767%2C2.138-4.767%2C4.765v42.789%20%20%20c0%2C2.628%2C2.138%2C4.766%2C4.767%2C4.766h5.535v0.959c0%2C2.628%2C2.138%2C4.765%2C4.766%2C4.765h42.788c2.628%2C0%2C4.766-2.137%2C4.766-4.765V52.914%20%20%20C76.311%2C50.284%2C74.173%2C48.145%2C71.545%2C48.145z%20M18.455%2C16.935h16.344c2.1%2C0%2C3.808%2C1.708%2C3.808%2C3.808v27.401H37.25V22.636%20%20%20c0-0.264-0.215-0.478-0.479-0.478H16.482c-0.264%2C0-0.479%2C0.214-0.479%2C0.478v36.585c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h7.507v7.644%20%20%20h-5.534c-2.101%2C0-3.81-1.709-3.81-3.81V20.743C14.645%2C18.643%2C16.354%2C16.935%2C18.455%2C16.935z%20M16.96%2C23.116h19.331v25.031h-7.535%20%20%20c-2.628%2C0-4.766%2C2.139-4.766%2C4.768v5.828h-7.03V23.116z%20M71.545%2C73.064H28.757c-2.101%2C0-3.81-1.708-3.81-3.808V52.914%20%20%20c0-2.102%2C1.709-3.812%2C3.81-3.812h42.788c2.1%2C0%2C3.809%2C1.71%2C3.809%2C3.812v16.343C75.354%2C71.356%2C73.645%2C73.064%2C71.545%2C73.064z%22%3E%3C/path%3E%3Cpath%20d%3D%22M28.919%2C58.424c-1.466%2C0-2.659%2C1.193-2.659%2C2.66c0%2C1.466%2C1.193%2C2.658%2C2.659%2C2.658c1.468%2C0%2C2.662-1.192%2C2.662-2.658%20%20%20C31.581%2C59.617%2C30.387%2C58.424%2C28.919%2C58.424z%20M28.919%2C62.786c-0.939%2C0-1.703-0.764-1.703-1.702c0-0.939%2C0.764-1.704%2C1.703-1.704%20%20%20c0.94%2C0%2C1.705%2C0.765%2C1.705%2C1.704C30.623%2C62.022%2C29.858%2C62.786%2C28.919%2C62.786z%22%3E%3C/path%3E%3Cpath%20d%3D%22M69.654%2C50.461H33.069c-0.264%2C0-0.479%2C0.215-0.479%2C0.479v20.288c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h36.585%20%20%20c0.263%2C0%2C0.477-0.214%2C0.477-0.478V50.939C70.131%2C50.676%2C69.917%2C50.461%2C69.654%2C50.461z%20M69.174%2C51.417V70.75H33.548V51.417H69.174z%22%3E%3C/path%3E%3Cpath%20d%3D%22M45.201%2C30.296c6.651%2C0%2C12.233%2C5.351%2C12.551%2C11.977l-3.033-2.638c-0.193-0.165-0.507-0.142-0.675%2C0.048%20%20%20c-0.174%2C0.198-0.153%2C0.501%2C0.045%2C0.676l3.883%2C3.375c0.09%2C0.075%2C0.198%2C0.115%2C0.312%2C0.115c0.141%2C0%2C0.273-0.061%2C0.362-0.166%20%20%20l3.371-3.877c0.173-0.2%2C0.151-0.502-0.047-0.675c-0.194-0.166-0.508-0.144-0.676%2C0.048l-2.592%2C2.979%20%20%20c-0.18-3.417-1.629-6.605-4.099-9.001c-2.538-2.461-5.877-3.817-9.404-3.817c-0.264%2C0-0.479%2C0.215-0.479%2C0.479%20%20%20C44.72%2C30.083%2C44.936%2C30.296%2C45.201%2C30.296z%22%3E%3C/path%3E%3C/g%3E%3C/svg%3E"),c.b),_=new URL(c("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%20100%20100%22%20enable-background%3D%22new%200%200%20100%20100%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M55.209%2C50l17.803-17.803c1.416-1.416%2C1.416-3.713%2C0-5.129c-1.416-1.417-3.713-1.417-5.129%2C0L50.08%2C44.872%20%20L32.278%2C27.069c-1.416-1.417-3.714-1.417-5.129%2C0c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129L44.951%2C50L27.149%2C67.803%20%20c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129c0.708%2C0.708%2C1.636%2C1.062%2C2.564%2C1.062c0.928%2C0%2C1.856-0.354%2C2.564-1.062L50.08%2C55.13l17.803%2C17.802%20%20c0.708%2C0.708%2C1.637%2C1.062%2C2.564%2C1.062s1.856-0.354%2C2.564-1.062c1.416-1.416%2C1.416-3.713%2C0-5.129L55.209%2C50z%22%3E%3C/path%3E%3C/svg%3E"),c.b),S=A()(m()),R=y()(x),P=y()(C),O=y()(g),D=y()(b),L=y()(_);S.push([l.id,`/* .a-fullscreen means not embedded. */
html.a-fullscreen {
  bottom: 0;
  left: 0;
  position: fixed;
  right: 0;
  top: 0;
}

html.a-fullscreen body {
  height: 100%;
  margin: 0;
  overflow: hidden;
  padding: 0;
  width: 100%;
}

/* Class is removed when doing <a-scene embedded>. */
html.a-fullscreen .a-canvas {
  width: 100% !important;
  height: 100% !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
  position: fixed !important;
}

html:not(.a-fullscreen) .a-enter-vr,
html:not(.a-fullscreen) .a-enter-ar {
  right: 5px;
  bottom: 5px;
}

html:not(.a-fullscreen) .a-enter-ar {
  right: 60px;
}

/* In chrome mobile the user agent stylesheet set it to white  */
:-webkit-full-screen {
  background-color: transparent;
}

.a-hidden {
  display: none !important;
}

.a-canvas {
  height: 100%;
  left: 0;
  position: absolute;
  top: 0;
  width: 100%;
}

.a-canvas.a-grab-cursor:hover {
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}

canvas.a-canvas.a-mouse-cursor-hover:hover {
  cursor: pointer;
}

.a-inspector-loader {
  background-color: #ed3160;
  position: fixed;
  left: 3px;
  top: 3px;
  padding: 6px 10px;
  color: #fff;
  text-decoration: none;
  font-size: 12px;
  font-family: Roboto,sans-serif;
  text-align: center;
  z-index: 99999;
  width: 204px;
}

/* Inspector loader animation */
@keyframes dots-1 { from { opacity: 0; } 25% { opacity: 1; } }
@keyframes dots-2 { from { opacity: 0; } 50% { opacity: 1; } }
@keyframes dots-3 { from { opacity: 0; } 75% { opacity: 1; } }
@-webkit-keyframes dots-1 { from { opacity: 0; } 25% { opacity: 1; } }
@-webkit-keyframes dots-2 { from { opacity: 0; } 50% { opacity: 1; } }
@-webkit-keyframes dots-3 { from { opacity: 0; } 75% { opacity: 1; } }

.a-inspector-loader .dots span {
  animation: dots-1 2s infinite steps(1);
  -webkit-animation: dots-1 2s infinite steps(1);
}

.a-inspector-loader .dots span:first-child + span {
  animation-name: dots-2;
  -webkit-animation-name: dots-2;
}

.a-inspector-loader .dots span:first-child + span + span {
  animation-name: dots-3;
  -webkit-animation-name: dots-3;
}

a-scene {
  display: block;
  position: relative;
  height: 100%;
  width: 100%;
}

a-assets,
a-scene video,
a-scene img,
a-scene audio {
  display: none;
}

.a-enter-vr-modal,
.a-orientation-modal {
  font-family: Consolas, Andale Mono, Courier New, monospace;
}

.a-enter-vr-modal a {
  border-bottom: 1px solid #fff;
  padding: 2px 0;
  text-decoration: none;
  transition: .1s color ease-in;
}

.a-enter-vr-modal a:hover {
  background-color: #fff;
  color: #111;
  padding: 2px 4px;
  position: relative;
  left: -4px;
}

.a-enter-vr,
.a-enter-ar {
  font-family: sans-serif, monospace;
  font-size: 13px;
  width: 100%;
  font-weight: 200;
  line-height: 16px;
  position: absolute;
  right: 20px;
  bottom: 20px;
}

.a-enter-ar {
  right: 80px;
}

.a-enter-vr-button,
.a-enter-vr-modal,
.a-enter-vr-modal a {
  color: #fff;
  user-select: none;
  outline: none;
}

.a-enter-vr-button {
  background: rgba(0, 0, 0, 0.35) url(`+R+`) 50% 50% no-repeat;
}

.a-enter-ar-button {
  background: rgba(0, 0, 0, 0.20) url(`+P+`) 50% 50% no-repeat;
}

.a-enter-vr.fullscreen .a-enter-vr-button {
  background-image: url(`+O+`);
}

.a-enter-vr-button,
.a-enter-ar-button {
  background-size: 90% 90%;
  border: 0;
  bottom: 0;
  cursor: pointer;
  min-width: 58px;
  min-height: 34px;
  /* 1.74418604651 */
  /*
    In order to keep the aspect ratio when resizing
    padding-top percentages are relative to the containing block's width.
    http://stackoverflow.com/questions/12121090/responsively-change-div-size-keeping-aspect-ratio
  */
  padding-right: 0;
  padding-top: 0;
  position: absolute;
  right: 0;
  transition: background-color .05s ease;
  -webkit-transition: background-color .05s ease;
  z-index: 9999;
  border-radius: 8px;
  touch-action: manipulation; /* Prevent iOS double tap zoom on the button */
}

.a-enter-ar-button {
  background-size: 100% 90%;
  margin-right: 10px;
  border-radius: 7px;
}

.a-enter-ar-button:active,
.a-enter-ar-button:hover,
.a-enter-vr-button:active,
.a-enter-vr-button:hover {
  background-color: #ef2d5e;
}

.a-enter-vr-button.resethover {
  background-color: rgba(0, 0, 0, 0.35);
}


.a-enter-vr-modal {
  background-color: #666;
  border-radius: 0;
  display: none;
  min-height: 32px;
  margin-right: 70px;
  padding: 9px;
  width: 280px;
  right: 2%;
  position: absolute;
}

.a-enter-vr-modal:after {
  border-bottom: 10px solid transparent;
  border-left: 10px solid #666;
  border-top: 10px solid transparent;
  display: inline-block;
  content: '';
  position: absolute;
  right: -5px;
  top: 5px;
  width: 0;
  height: 0;
}

.a-enter-vr-modal p,
.a-enter-vr-modal a {
  display: inline;
}

.a-enter-vr-modal p {
  margin: 0;
}

.a-enter-vr-modal p:after {
  content: ' ';
}

.a-orientation-modal {
  background: rgba(244, 244, 244, 1) url(`+D+`) center no-repeat;
  background-size: 50% 50%;
  bottom: 0;
  font-size: 14px;
  font-weight: 600;
  left: 0;
  line-height: 20px;
  right: 0;
  position: fixed;
  top: 0;
  z-index: 9999999;
}

.a-orientation-modal:after {
  color: #666;
  content: "Insert phone into Cardboard holder.";
  display: block;
  position: absolute;
  text-align: center;
  top: 70%;
  transform: translateY(-70%);
  width: 100%;
}

.a-orientation-modal button {
  background: url(`+L+`) no-repeat;
  border: none;
  height: 50px;
  text-indent: -9999px;
  width: 50px;
}

.a-loader-title {
  background-color: rgba(0, 0, 0, 0.6);
  font-family: sans-serif, monospace;
  text-align: center;
  font-size: 20px;
  height: 50px;
  font-weight: 300;
  line-height: 50px;
  position: absolute;
  right: 0px;
  left: 0px;
  top: 0px;
  color: white;
}

.a-modal {
  position: absolute;
  background: rgba(0, 0, 0, 0.60);
  background-size: 50% 50%;
  bottom: 0;
  font-size: 14px;
  font-weight: 600;
  left: 0;
  line-height: 20px;
  right: 0;
  position: fixed;
  top: 0;
  z-index: 9999999;
}

.a-dialog {
  position: relative;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  z-index: 199995;
  width: 300px;
  height: 200px;
  background-size: contain;
  background-color: white;
  font-family: sans-serif, monospace;
  font-size: 20px;
  border-radius: 3px;
  padding: 6px;
}

.a-dialog-text-container {
  width: 100%;
  height: 70%;
  align-self: flex-start;
  display: flex;
  justify-content: center;
  align-content: center;
  flex-direction: column;
}

.a-dialog-text {
  display: inline-block;
  font-weight: normal;
  font-size: 14pt;
  margin: 8px;
}

.a-dialog-buttons-container {
  display: inline-flex;
  align-self: flex-end;
  width: 100%;
  height: 30%;
}

.a-dialog-button {
  cursor: pointer;
  align-self: center;
  opacity: 0.9;
  height: 80%;
  width: 50%;
  font-size: 12pt;
  margin: 4px;
  border-radius: 2px;
  text-align:center;
  border: none;
  display: inline-block;
  -webkit-transition: all 0.25s ease-in-out;
  transition: all 0.25s ease-in-out;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.10), 0 1px 2px rgba(0, 0, 0, 0.20);
  user-select: none;
}

.a-dialog-permission-button:hover {
  box-shadow: 0 7px 14px rgba(0,0,0,0.20), 0 2px 2px rgba(0,0,0,0.20);
}

.a-dialog-allow-button {
  background-color: #00ceff;
}

.a-dialog-deny-button {
  background-color: #ff005b;
}

.a-dialog-ok-button {
  background-color: #00ceff;
  width: 100%;
}

.a-dom-overlay:not(.a-no-style) {
  overflow: hidden;
  position: absolute;
  pointer-events: none;
  box-sizing: border-box;
  bottom: 0;
  left: 0;
  right: 0;
  top: 0;
  padding: 1em;
}

.a-dom-overlay:not(.a-no-style)>* {
  pointer-events: auto;
}
`,"",{version:3,sources:["webpack://./src/style/aframe.css"],names:[],mappings:"AAAA,sCAAsC;AACtC;EACE,SAAS;EACT,OAAO;EACP,eAAe;EACf,QAAQ;EACR,MAAM;AACR;;AAEA;EACE,YAAY;EACZ,SAAS;EACT,gBAAgB;EAChB,UAAU;EACV,WAAW;AACb;;AAEA,oDAAoD;AACpD;EACE,sBAAsB;EACtB,uBAAuB;EACvB,iBAAiB;EACjB,kBAAkB;EAClB,mBAAmB;EACnB,oBAAoB;EACpB,0BAA0B;AAC5B;;AAEA;;EAEE,UAAU;EACV,WAAW;AACb;;AAEA;EACE,WAAW;AACb;;AAEA,gEAAgE;AAChE;EACE,6BAA6B;AAC/B;;AAEA;EACE,wBAAwB;AAC1B;;AAEA;EACE,YAAY;EACZ,OAAO;EACP,kBAAkB;EAClB,MAAM;EACN,WAAW;AACb;;AAEA;EACE,YAAY;EACZ,iBAAiB;EACjB,oBAAoB;AACtB;;AAEA;EACE,eAAe;AACjB;;AAEA;EACE,yBAAyB;EACzB,eAAe;EACf,SAAS;EACT,QAAQ;EACR,iBAAiB;EACjB,WAAW;EACX,qBAAqB;EACrB,eAAe;EACf,8BAA8B;EAC9B,kBAAkB;EAClB,cAAc;EACd,YAAY;AACd;;AAEA,+BAA+B;AAC/B,oBAAoB,OAAO,UAAU,EAAE,EAAE,MAAM,UAAU,EAAE,EAAE;AAC7D,oBAAoB,OAAO,UAAU,EAAE,EAAE,MAAM,UAAU,EAAE,EAAE;AAC7D,oBAAoB,OAAO,UAAU,EAAE,EAAE,MAAM,UAAU,EAAE,EAAE;AAC7D,4BAA4B,OAAO,UAAU,EAAE,EAAE,MAAM,UAAU,EAAE,EAAE;AACrE,4BAA4B,OAAO,UAAU,EAAE,EAAE,MAAM,UAAU,EAAE,EAAE;AACrE,4BAA4B,OAAO,UAAU,EAAE,EAAE,MAAM,UAAU,EAAE,EAAE;;AAErE;EACE,sCAAsC;EACtC,8CAA8C;AAChD;;AAEA;EACE,sBAAsB;EACtB,8BAA8B;AAChC;;AAEA;EACE,sBAAsB;EACtB,8BAA8B;AAChC;;AAEA;EACE,cAAc;EACd,kBAAkB;EAClB,YAAY;EACZ,WAAW;AACb;;AAEA;;;;EAIE,aAAa;AACf;;AAEA;;EAEE,0DAA0D;AAC5D;;AAEA;EACE,6BAA6B;EAC7B,cAAc;EACd,qBAAqB;EACrB,6BAA6B;AAC/B;;AAEA;EACE,sBAAsB;EACtB,WAAW;EACX,gBAAgB;EAChB,kBAAkB;EAClB,UAAU;AACZ;;AAEA;;EAEE,kCAAkC;EAClC,eAAe;EACf,WAAW;EACX,gBAAgB;EAChB,iBAAiB;EACjB,kBAAkB;EAClB,WAAW;EACX,YAAY;AACd;;AAEA;EACE,WAAW;AACb;;AAEA;;;EAGE,WAAW;EACX,iBAAiB;EACjB,aAAa;AACf;;AAEA;EACE,yFAA4qB;AAC9qB;;AAEA;EACE,yFAAkzB;AACpzB;;AAEA;EACE,yDAA2qK;AAC7qK;;AAEA;;EAEE,wBAAwB;EACxB,SAAS;EACT,SAAS;EACT,eAAe;EACf,eAAe;EACf,gBAAgB;EAChB,kBAAkB;EAClB;;;;GAIC;EACD,gBAAgB;EAChB,cAAc;EACd,kBAAkB;EAClB,QAAQ;EACR,sCAAsC;EACtC,8CAA8C;EAC9C,aAAa;EACb,kBAAkB;EAClB,0BAA0B,EAAE,8CAA8C;AAC5E;;AAEA;EACE,yBAAyB;EACzB,kBAAkB;EAClB,kBAAkB;AACpB;;AAEA;;;;EAIE,yBAAyB;AAC3B;;AAEA;EACE,qCAAqC;AACvC;;;AAGA;EACE,sBAAsB;EACtB,gBAAgB;EAChB,aAAa;EACb,gBAAgB;EAChB,kBAAkB;EAClB,YAAY;EACZ,YAAY;EACZ,SAAS;EACT,kBAAkB;AACpB;;AAEA;EACE,qCAAqC;EACrC,4BAA4B;EAC5B,kCAAkC;EAClC,qBAAqB;EACrB,WAAW;EACX,kBAAkB;EAClB,WAAW;EACX,QAAQ;EACR,QAAQ;EACR,SAAS;AACX;;AAEA;;EAEE,eAAe;AACjB;;AAEA;EACE,SAAS;AACX;;AAEA;EACE,YAAY;AACd;;AAEA;EACE,2FAAivF;EACjvF,wBAAwB;EACxB,SAAS;EACT,eAAe;EACf,gBAAgB;EAChB,OAAO;EACP,iBAAiB;EACjB,QAAQ;EACR,eAAe;EACf,MAAM;EACN,gBAAgB;AAClB;;AAEA;EACE,WAAW;EACX,8CAA8C;EAC9C,cAAc;EACd,kBAAkB;EAClB,kBAAkB;EAClB,QAAQ;EACR,2BAA2B;EAC3B,WAAW;AACb;;AAEA;EACE,6DAA25B;EAC35B,YAAY;EACZ,YAAY;EACZ,oBAAoB;EACpB,WAAW;AACb;;AAEA;EACE,oCAAoC;EACpC,kCAAkC;EAClC,kBAAkB;EAClB,eAAe;EACf,YAAY;EACZ,gBAAgB;EAChB,iBAAiB;EACjB,kBAAkB;EAClB,UAAU;EACV,SAAS;EACT,QAAQ;EACR,YAAY;AACd;;AAEA;EACE,kBAAkB;EAClB,+BAA+B;EAC/B,wBAAwB;EACxB,SAAS;EACT,eAAe;EACf,gBAAgB;EAChB,OAAO;EACP,iBAAiB;EACjB,QAAQ;EACR,eAAe;EACf,MAAM;EACN,gBAAgB;AAClB;;AAEA;EACE,kBAAkB;EAClB,SAAS;EACT,QAAQ;EACR,gCAAgC;EAChC,eAAe;EACf,YAAY;EACZ,aAAa;EACb,wBAAwB;EACxB,uBAAuB;EACvB,kCAAkC;EAClC,eAAe;EACf,kBAAkB;EAClB,YAAY;AACd;;AAEA;EACE,WAAW;EACX,WAAW;EACX,sBAAsB;EACtB,aAAa;EACb,uBAAuB;EACvB,qBAAqB;EACrB,sBAAsB;AACxB;;AAEA;EACE,qBAAqB;EACrB,mBAAmB;EACnB,eAAe;EACf,WAAW;AACb;;AAEA;EACE,oBAAoB;EACpB,oBAAoB;EACpB,WAAW;EACX,WAAW;AACb;;AAEA;EACE,eAAe;EACf,kBAAkB;EAClB,YAAY;EACZ,WAAW;EACX,UAAU;EACV,eAAe;EACf,WAAW;EACX,kBAAkB;EAClB,iBAAiB;EACjB,YAAY;EACZ,qBAAqB;EACrB,yCAAyC;EACzC,iCAAiC;EACjC,wEAAwE;EACxE,iBAAiB;AACnB;;AAEA;EACE,mEAAmE;AACrE;;AAEA;EACE,yBAAyB;AAC3B;;AAEA;EACE,yBAAyB;AAC3B;;AAEA;EACE,yBAAyB;EACzB,WAAW;AACb;;AAEA;EACE,gBAAgB;EAChB,kBAAkB;EAClB,oBAAoB;EACpB,sBAAsB;EACtB,SAAS;EACT,OAAO;EACP,QAAQ;EACR,MAAM;EACN,YAAY;AACd;;AAEA;EACE,oBAAoB;AACtB",sourcesContent:[`/* .a-fullscreen means not embedded. */
html.a-fullscreen {
  bottom: 0;
  left: 0;
  position: fixed;
  right: 0;
  top: 0;
}

html.a-fullscreen body {
  height: 100%;
  margin: 0;
  overflow: hidden;
  padding: 0;
  width: 100%;
}

/* Class is removed when doing <a-scene embedded>. */
html.a-fullscreen .a-canvas {
  width: 100% !important;
  height: 100% !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
  position: fixed !important;
}

html:not(.a-fullscreen) .a-enter-vr,
html:not(.a-fullscreen) .a-enter-ar {
  right: 5px;
  bottom: 5px;
}

html:not(.a-fullscreen) .a-enter-ar {
  right: 60px;
}

/* In chrome mobile the user agent stylesheet set it to white  */
:-webkit-full-screen {
  background-color: transparent;
}

.a-hidden {
  display: none !important;
}

.a-canvas {
  height: 100%;
  left: 0;
  position: absolute;
  top: 0;
  width: 100%;
}

.a-canvas.a-grab-cursor:hover {
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}

canvas.a-canvas.a-mouse-cursor-hover:hover {
  cursor: pointer;
}

.a-inspector-loader {
  background-color: #ed3160;
  position: fixed;
  left: 3px;
  top: 3px;
  padding: 6px 10px;
  color: #fff;
  text-decoration: none;
  font-size: 12px;
  font-family: Roboto,sans-serif;
  text-align: center;
  z-index: 99999;
  width: 204px;
}

/* Inspector loader animation */
@keyframes dots-1 { from { opacity: 0; } 25% { opacity: 1; } }
@keyframes dots-2 { from { opacity: 0; } 50% { opacity: 1; } }
@keyframes dots-3 { from { opacity: 0; } 75% { opacity: 1; } }
@-webkit-keyframes dots-1 { from { opacity: 0; } 25% { opacity: 1; } }
@-webkit-keyframes dots-2 { from { opacity: 0; } 50% { opacity: 1; } }
@-webkit-keyframes dots-3 { from { opacity: 0; } 75% { opacity: 1; } }

.a-inspector-loader .dots span {
  animation: dots-1 2s infinite steps(1);
  -webkit-animation: dots-1 2s infinite steps(1);
}

.a-inspector-loader .dots span:first-child + span {
  animation-name: dots-2;
  -webkit-animation-name: dots-2;
}

.a-inspector-loader .dots span:first-child + span + span {
  animation-name: dots-3;
  -webkit-animation-name: dots-3;
}

a-scene {
  display: block;
  position: relative;
  height: 100%;
  width: 100%;
}

a-assets,
a-scene video,
a-scene img,
a-scene audio {
  display: none;
}

.a-enter-vr-modal,
.a-orientation-modal {
  font-family: Consolas, Andale Mono, Courier New, monospace;
}

.a-enter-vr-modal a {
  border-bottom: 1px solid #fff;
  padding: 2px 0;
  text-decoration: none;
  transition: .1s color ease-in;
}

.a-enter-vr-modal a:hover {
  background-color: #fff;
  color: #111;
  padding: 2px 4px;
  position: relative;
  left: -4px;
}

.a-enter-vr,
.a-enter-ar {
  font-family: sans-serif, monospace;
  font-size: 13px;
  width: 100%;
  font-weight: 200;
  line-height: 16px;
  position: absolute;
  right: 20px;
  bottom: 20px;
}

.a-enter-ar {
  right: 80px;
}

.a-enter-vr-button,
.a-enter-vr-modal,
.a-enter-vr-modal a {
  color: #fff;
  user-select: none;
  outline: none;
}

.a-enter-vr-button {
  background: rgba(0, 0, 0, 0.35) url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='108' height='62' viewBox='0 0 108 62'%3E%3Ctitle%3Eaframe-vrmode-noborder-reduced-tracking%3C/title%3E%3Cpath d='M68.81,21.56H64.23v8.27h4.58a4.13,4.13,0,0,0,3.1-1.09,4.2,4.2,0,0,0,1-3,4.24,4.24,0,0,0-1-3A4.05,4.05,0,0,0,68.81,21.56Z' fill='%23fff'/%3E%3Cpath d='M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0ZM41.9,46H34L24,16h8l6,21.84,6-21.84H52Zm39.29,0H73.44L68.15,35.39H64.23V46H57V16H68.81q5.32,0,8.34,2.37a8,8,0,0,1,3,6.69,9.68,9.68,0,0,1-1.27,5.18,8.9,8.9,0,0,1-4,3.34l6.26,12.11Z' fill='%23fff'/%3E%3C/svg%3E") 50% 50% no-repeat;
}

.a-enter-ar-button {
  background: rgba(0, 0, 0, 0.20) url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='108' height='62' viewBox='0 0 108 62'%3E%3Ctitle%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d='M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0Zm8,50a8,8,0,0,1-8,8H12a8,8,0,0,1-8-8V12a8,8,0,0,1,8-8H96a8,8,0,0,1,8,8Z' fill='%23fff'/%3E%3Cpath d='M43.35,39.82H32.51L30.45,46H23.88L35,16h5.73L52,46H45.43Zm-9.17-5h7.5L37.91,23.58Z' fill='%23fff'/%3E%3Cpath d='M68.11,35H63.18V46H57V16H68.15q5.31,0,8.2,2.37a8.18,8.18,0,0,1,2.88,6.7,9.22,9.22,0,0,1-1.33,5.12,9.09,9.09,0,0,1-4,3.26l6.49,12.26V46H73.73Zm-4.93-5h5a5.09,5.09,0,0,0,3.6-1.18,4.21,4.21,0,0,0,1.28-3.27,4.56,4.56,0,0,0-1.2-3.34A5,5,0,0,0,68.15,21h-5Z' fill='%23fff'/%3E%3C/svg%3E") 50% 50% no-repeat;
}

.a-enter-vr.fullscreen .a-enter-vr-button {
  background-image: url("data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8' standalone='no'%3F%3E%3Csvg width='108' height='62' viewBox='0 0 108 62' version='1.1' id='svg320' sodipodi:docname='fullscreen-aframe.svg' xml:space='preserve' inkscape:version='1.2.1 (9c6d41e  2022-07-14)' xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape' xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd' xmlns='http://www.w3.org/2000/svg' xmlns:svg='http://www.w3.org/2000/svg' xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23' xmlns:cc='http://creativecommons.org/ns%23' xmlns:dc='http://purl.org/dc/elements/1.1/'%3E%3Cdefs id='defs324' /%3E%3Csodipodi:namedview id='namedview322' pagecolor='%23ffffff' bordercolor='%23000000' borderopacity='0.25' inkscape:showpageshadow='2' inkscape:pageopacity='0.0' inkscape:pagecheckerboard='0' inkscape:deskcolor='%23d1d1d1' showgrid='false' inkscape:zoom='3.8064516' inkscape:cx='91.423729' inkscape:cy='-1.4449153' inkscape:window-width='1440' inkscape:window-height='847' inkscape:window-x='32' inkscape:window-y='25' inkscape:window-maximized='0' inkscape:current-layer='svg320' /%3E%3Ctitle id='title312'%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d='M96 0H12A12 12 0 0 0 0 12V50A12 12 0 0 0 12 62H96a12 12 0 0 0 12-12V12A12 12 0 0 0 96 0Zm8 50a8 8 0 0 1-8 8H12a8 8 0 0 1-8-8V12a8 8 0 0 1 8-8H96a8 8 0 0 1 8 8Z' fill='%23fff' id='path314' style='fill:%23ffffff' /%3E%3Cg id='g356' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g358' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g360' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g362' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g364' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g366' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g368' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g370' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g372' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g374' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g376' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g378' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g380' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g382' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g384' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cmetadata id='metadata561'%3E%3Crdf:RDF%3E%3Ccc:Work rdf:about=''%3E%3Cdc:title%3Eaframe-armode-noborder-reduced-tracking%3C/dc:title%3E%3C/cc:Work%3E%3C/rdf:RDF%3E%3C/metadata%3E%3Cpath d='m 98.168511 40.083649 c 0 -1.303681 -0.998788 -2.358041 -2.239389 -2.358041 -1.230088 0.0031 -2.240892 1.05436 -2.240892 2.358041 v 4.881296 l -9.041661 -9.041662 c -0.874129 -0.875631 -2.288954 -0.875631 -3.16308 0 -0.874129 0.874126 -0.874129 2.293459 0 3.167585 l 8.995101 8.992101 h -4.858767 c -1.323206 0.0031 -2.389583 1.004796 -2.389583 2.239386 0 1.237598 1.066377 2.237888 2.389583 2.237888 h 10.154599 c 1.323206 0 2.388082 -0.998789 2.392587 -2.237888 -0.0044 -0.03305 -0.009 -0.05858 -0.0134 -0.09161 0.0046 -0.04207 0.0134 -0.08712 0.0134 -0.13066 V 40.085172 h -1.52e-4' id='path596' style='fill:%23ffffff%3Bstroke-width:1.50194' /%3E%3Cpath d='m 23.091002 35.921781 -9.026643 9.041662 v -4.881296 c 0 -1.303681 -1.009302 -2.355037 -2.242393 -2.358041 -1.237598 0 -2.237888 1.05436 -2.237888 2.358041 l -0.0031 10.016421 c 0 0.04356 0.01211 0.08862 0.0015 0.130659 -0.0031 0.03153 -0.009 0.05709 -0.01211 0.09161 0.0031 1.239099 1.069379 2.237888 2.391085 2.237888 h 10.156101 c 1.320202 0 2.388079 -1.000291 2.388079 -2.237888 0 -1.234591 -1.067877 -2.236383 -2.388079 -2.239387 h -4.858767 l 8.995101 -8.9921 c 0.871126 -0.874127 0.871126 -2.293459 0 -3.167586 -0.875628 -0.877132 -2.291957 -0.877132 -3.169087 -1.52e-4' id='path598' style='fill:%23ffffff%3Bstroke-width:1.50194' /%3E%3Cpath d='m 84.649572 25.978033 9.041662 -9.041664 v 4.881298 c 0 1.299176 1.010806 2.350532 2.240891 2.355037 1.240601 0 2.23939 -1.055861 2.23939 -2.355037 V 11.798242 c 0 -0.04356 -0.009 -0.08862 -0.0134 -0.127671 0.0044 -0.03153 0.009 -0.06157 0.0134 -0.09313 -0.0044 -1.240598 -1.069379 -2.2393873 -2.391085 -2.2393873 h -10.1546 c -1.323205 0 -2.38958 0.9987893 -2.38958 2.2393873 0 1.233091 1.066375 2.237887 2.38958 2.240891 h 4.858768 l -8.995102 8.9921 c -0.874129 0.872625 -0.874129 2.288954 0 3.161578 0.874127 0.880137 2.288951 0.880137 3.16308 1.5e-4' id='path600' style='fill:%23ffffff%3Bstroke-width:1.50194' /%3E%3Cpath d='m 17.264988 13.822853 h 4.857265 c 1.320202 -0.0031 2.388079 -1.0078 2.388079 -2.240889 0 -1.240601 -1.067877 -2.2393893 -2.388079 -2.2393893 H 11.967654 c -1.321707 0 -2.388082 0.9987883 -2.391085 2.2393893 0.0031 0.03153 0.009 0.06157 0.01211 0.09313 -0.0031 0.03905 -0.0015 0.08262 -0.0015 0.127671 l 0.0031 10.020926 c 0 1.299176 1.00029 2.355038 2.237887 2.355038 1.233092 -0.0044 2.242393 -1.055862 2.242393 -2.355038 v -4.881295 l 9.026644 9.041661 c 0.877132 0.878635 2.293459 0.878635 3.169087 0 0.871125 -0.872624 0.871125 -2.288953 0 -3.161577 l -8.995282 -8.993616' id='path602' style='fill:%23ffffff%3Bstroke-width:1.50194' /%3E%3C/svg%3E");
}

.a-enter-vr-button,
.a-enter-ar-button {
  background-size: 90% 90%;
  border: 0;
  bottom: 0;
  cursor: pointer;
  min-width: 58px;
  min-height: 34px;
  /* 1.74418604651 */
  /*
    In order to keep the aspect ratio when resizing
    padding-top percentages are relative to the containing block's width.
    http://stackoverflow.com/questions/12121090/responsively-change-div-size-keeping-aspect-ratio
  */
  padding-right: 0;
  padding-top: 0;
  position: absolute;
  right: 0;
  transition: background-color .05s ease;
  -webkit-transition: background-color .05s ease;
  z-index: 9999;
  border-radius: 8px;
  touch-action: manipulation; /* Prevent iOS double tap zoom on the button */
}

.a-enter-ar-button {
  background-size: 100% 90%;
  margin-right: 10px;
  border-radius: 7px;
}

.a-enter-ar-button:active,
.a-enter-ar-button:hover,
.a-enter-vr-button:active,
.a-enter-vr-button:hover {
  background-color: #ef2d5e;
}

.a-enter-vr-button.resethover {
  background-color: rgba(0, 0, 0, 0.35);
}


.a-enter-vr-modal {
  background-color: #666;
  border-radius: 0;
  display: none;
  min-height: 32px;
  margin-right: 70px;
  padding: 9px;
  width: 280px;
  right: 2%;
  position: absolute;
}

.a-enter-vr-modal:after {
  border-bottom: 10px solid transparent;
  border-left: 10px solid #666;
  border-top: 10px solid transparent;
  display: inline-block;
  content: '';
  position: absolute;
  right: -5px;
  top: 5px;
  width: 0;
  height: 0;
}

.a-enter-vr-modal p,
.a-enter-vr-modal a {
  display: inline;
}

.a-enter-vr-modal p {
  margin: 0;
}

.a-enter-vr-modal p:after {
  content: ' ';
}

.a-orientation-modal {
  background: rgba(244, 244, 244, 1) url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%2090%2090%22%20enable-background%3D%22new%200%200%2090%2090%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpolygon%20points%3D%220%2C0%200%2C0%200%2C0%20%22%3E%3C/polygon%3E%3Cg%3E%3Cpath%20d%3D%22M71.545%2C48.145h-31.98V20.743c0-2.627-2.138-4.765-4.765-4.765H18.456c-2.628%2C0-4.767%2C2.138-4.767%2C4.765v42.789%20%20%20c0%2C2.628%2C2.138%2C4.766%2C4.767%2C4.766h5.535v0.959c0%2C2.628%2C2.138%2C4.765%2C4.766%2C4.765h42.788c2.628%2C0%2C4.766-2.137%2C4.766-4.765V52.914%20%20%20C76.311%2C50.284%2C74.173%2C48.145%2C71.545%2C48.145z%20M18.455%2C16.935h16.344c2.1%2C0%2C3.808%2C1.708%2C3.808%2C3.808v27.401H37.25V22.636%20%20%20c0-0.264-0.215-0.478-0.479-0.478H16.482c-0.264%2C0-0.479%2C0.214-0.479%2C0.478v36.585c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h7.507v7.644%20%20%20h-5.534c-2.101%2C0-3.81-1.709-3.81-3.81V20.743C14.645%2C18.643%2C16.354%2C16.935%2C18.455%2C16.935z%20M16.96%2C23.116h19.331v25.031h-7.535%20%20%20c-2.628%2C0-4.766%2C2.139-4.766%2C4.768v5.828h-7.03V23.116z%20M71.545%2C73.064H28.757c-2.101%2C0-3.81-1.708-3.81-3.808V52.914%20%20%20c0-2.102%2C1.709-3.812%2C3.81-3.812h42.788c2.1%2C0%2C3.809%2C1.71%2C3.809%2C3.812v16.343C75.354%2C71.356%2C73.645%2C73.064%2C71.545%2C73.064z%22%3E%3C/path%3E%3Cpath%20d%3D%22M28.919%2C58.424c-1.466%2C0-2.659%2C1.193-2.659%2C2.66c0%2C1.466%2C1.193%2C2.658%2C2.659%2C2.658c1.468%2C0%2C2.662-1.192%2C2.662-2.658%20%20%20C31.581%2C59.617%2C30.387%2C58.424%2C28.919%2C58.424z%20M28.919%2C62.786c-0.939%2C0-1.703-0.764-1.703-1.702c0-0.939%2C0.764-1.704%2C1.703-1.704%20%20%20c0.94%2C0%2C1.705%2C0.765%2C1.705%2C1.704C30.623%2C62.022%2C29.858%2C62.786%2C28.919%2C62.786z%22%3E%3C/path%3E%3Cpath%20d%3D%22M69.654%2C50.461H33.069c-0.264%2C0-0.479%2C0.215-0.479%2C0.479v20.288c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h36.585%20%20%20c0.263%2C0%2C0.477-0.214%2C0.477-0.478V50.939C70.131%2C50.676%2C69.917%2C50.461%2C69.654%2C50.461z%20M69.174%2C51.417V70.75H33.548V51.417H69.174z%22%3E%3C/path%3E%3Cpath%20d%3D%22M45.201%2C30.296c6.651%2C0%2C12.233%2C5.351%2C12.551%2C11.977l-3.033-2.638c-0.193-0.165-0.507-0.142-0.675%2C0.048%20%20%20c-0.174%2C0.198-0.153%2C0.501%2C0.045%2C0.676l3.883%2C3.375c0.09%2C0.075%2C0.198%2C0.115%2C0.312%2C0.115c0.141%2C0%2C0.273-0.061%2C0.362-0.166%20%20%20l3.371-3.877c0.173-0.2%2C0.151-0.502-0.047-0.675c-0.194-0.166-0.508-0.144-0.676%2C0.048l-2.592%2C2.979%20%20%20c-0.18-3.417-1.629-6.605-4.099-9.001c-2.538-2.461-5.877-3.817-9.404-3.817c-0.264%2C0-0.479%2C0.215-0.479%2C0.479%20%20%20C44.72%2C30.083%2C44.936%2C30.296%2C45.201%2C30.296z%22%3E%3C/path%3E%3C/g%3E%3C/svg%3E) center no-repeat;
  background-size: 50% 50%;
  bottom: 0;
  font-size: 14px;
  font-weight: 600;
  left: 0;
  line-height: 20px;
  right: 0;
  position: fixed;
  top: 0;
  z-index: 9999999;
}

.a-orientation-modal:after {
  color: #666;
  content: "Insert phone into Cardboard holder.";
  display: block;
  position: absolute;
  text-align: center;
  top: 70%;
  transform: translateY(-70%);
  width: 100%;
}

.a-orientation-modal button {
  background: url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%20100%20100%22%20enable-background%3D%22new%200%200%20100%20100%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M55.209%2C50l17.803-17.803c1.416-1.416%2C1.416-3.713%2C0-5.129c-1.416-1.417-3.713-1.417-5.129%2C0L50.08%2C44.872%20%20L32.278%2C27.069c-1.416-1.417-3.714-1.417-5.129%2C0c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129L44.951%2C50L27.149%2C67.803%20%20c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129c0.708%2C0.708%2C1.636%2C1.062%2C2.564%2C1.062c0.928%2C0%2C1.856-0.354%2C2.564-1.062L50.08%2C55.13l17.803%2C17.802%20%20c0.708%2C0.708%2C1.637%2C1.062%2C2.564%2C1.062s1.856-0.354%2C2.564-1.062c1.416-1.416%2C1.416-3.713%2C0-5.129L55.209%2C50z%22%3E%3C/path%3E%3C/svg%3E) no-repeat;
  border: none;
  height: 50px;
  text-indent: -9999px;
  width: 50px;
}

.a-loader-title {
  background-color: rgba(0, 0, 0, 0.6);
  font-family: sans-serif, monospace;
  text-align: center;
  font-size: 20px;
  height: 50px;
  font-weight: 300;
  line-height: 50px;
  position: absolute;
  right: 0px;
  left: 0px;
  top: 0px;
  color: white;
}

.a-modal {
  position: absolute;
  background: rgba(0, 0, 0, 0.60);
  background-size: 50% 50%;
  bottom: 0;
  font-size: 14px;
  font-weight: 600;
  left: 0;
  line-height: 20px;
  right: 0;
  position: fixed;
  top: 0;
  z-index: 9999999;
}

.a-dialog {
  position: relative;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  z-index: 199995;
  width: 300px;
  height: 200px;
  background-size: contain;
  background-color: white;
  font-family: sans-serif, monospace;
  font-size: 20px;
  border-radius: 3px;
  padding: 6px;
}

.a-dialog-text-container {
  width: 100%;
  height: 70%;
  align-self: flex-start;
  display: flex;
  justify-content: center;
  align-content: center;
  flex-direction: column;
}

.a-dialog-text {
  display: inline-block;
  font-weight: normal;
  font-size: 14pt;
  margin: 8px;
}

.a-dialog-buttons-container {
  display: inline-flex;
  align-self: flex-end;
  width: 100%;
  height: 30%;
}

.a-dialog-button {
  cursor: pointer;
  align-self: center;
  opacity: 0.9;
  height: 80%;
  width: 50%;
  font-size: 12pt;
  margin: 4px;
  border-radius: 2px;
  text-align:center;
  border: none;
  display: inline-block;
  -webkit-transition: all 0.25s ease-in-out;
  transition: all 0.25s ease-in-out;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.10), 0 1px 2px rgba(0, 0, 0, 0.20);
  user-select: none;
}

.a-dialog-permission-button:hover {
  box-shadow: 0 7px 14px rgba(0,0,0,0.20), 0 2px 2px rgba(0,0,0,0.20);
}

.a-dialog-allow-button {
  background-color: #00ceff;
}

.a-dialog-deny-button {
  background-color: #ff005b;
}

.a-dialog-ok-button {
  background-color: #00ceff;
  width: 100%;
}

.a-dom-overlay:not(.a-no-style) {
  overflow: hidden;
  position: absolute;
  pointer-events: none;
  box-sizing: border-box;
  bottom: 0;
  left: 0;
  right: 0;
  top: 0;
  padding: 1em;
}

.a-dom-overlay:not(.a-no-style)>* {
  pointer-events: auto;
}
`],sourceRoot:""}]);const N=S},"./node_modules/css-loader/dist/cjs.js!./src/style/rStats.css":(l,d,c)=>{c.r(d),c.d(d,{default:()=>y});var h=c("./node_modules/css-loader/dist/runtime/sourceMaps.js"),m=c.n(h),p=c("./node_modules/css-loader/dist/runtime/api.js"),A=c.n(p),v=A()(m());v.push([l.id,`.rs-base {
  background-color: #333;
  color: #fafafa;
  border-radius: 0;
  font: 10px monospace;
  left: 5px;
  line-height: 1em;
  opacity: 0.85;
  overflow: hidden;
  padding: 10px;
  position: fixed;
  top: 5px;
  width: 300px;
  z-index: 10000;
}

.rs-base div.hidden {
  display: none;
}

.rs-base h1 {
  color: #fff;
  cursor: pointer;
  font-size: 1.4em;
  font-weight: 300;
  margin: 0 0 5px;
  padding: 0;
}

.rs-group {
  display: -webkit-box;
  display: -webkit-flex;
  display: flex;
  -webkit-flex-direction: column-reverse;
  flex-direction: column-reverse;
  margin-bottom: 5px;
}

.rs-group:last-child {
  margin-bottom: 0;
}

.rs-counter-base {
  align-items: center;
  display: -webkit-box;
  display: -webkit-flex;
  display: flex;
  height: 10px;
  -webkit-justify-content: space-between;
  justify-content: space-between;
  margin: 2px 0;
}

.rs-counter-base.alarm {
  color: #b70000;
  text-shadow: 0 0 0 #b70000,
               0 0 1px #fff,
               0 0 1px #fff,
               0 0 2px #fff,
               0 0 2px #fff,
               0 0 3px #fff,
               0 0 3px #fff,
               0 0 4px #fff,
               0 0 4px #fff;
}

.rs-counter-id {
  font-weight: 300;
  -webkit-box-ordinal-group: 0;
  -webkit-order: 0;
  order: 0;
  width: 54px;
}

.rs-counter-value {
  font-weight: 300;
  -webkit-box-ordinal-group: 1;
  -webkit-order: 1;
  order: 1;
  text-align: right;
  width: 35px;
}

.rs-canvas {
  -webkit-box-ordinal-group: 2;
  -webkit-order: 2;
  order: 2;
}

@media (min-width: 480px) {
  .rs-base {
    left: 20px;
    top: 20px;
  }
}
`,"",{version:3,sources:["webpack://./src/style/rStats.css"],names:[],mappings:"AAAA;EACE,sBAAsB;EACtB,cAAc;EACd,gBAAgB;EAChB,oBAAoB;EACpB,SAAS;EACT,gBAAgB;EAChB,aAAa;EACb,gBAAgB;EAChB,aAAa;EACb,eAAe;EACf,QAAQ;EACR,YAAY;EACZ,cAAc;AAChB;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,WAAW;EACX,eAAe;EACf,gBAAgB;EAChB,gBAAgB;EAChB,eAAe;EACf,UAAU;AACZ;;AAEA;EACE,oBAAoB;EACpB,qBAAqB;EACrB,aAAa;EACb,sCAAsC;EACtC,8BAA8B;EAC9B,kBAAkB;AACpB;;AAEA;EACE,gBAAgB;AAClB;;AAEA;EACE,mBAAmB;EACnB,oBAAoB;EACpB,qBAAqB;EACrB,aAAa;EACb,YAAY;EACZ,sCAAsC;EACtC,8BAA8B;EAC9B,aAAa;AACf;;AAEA;EACE,cAAc;EACd;;;;;;;;2BAQyB;AAC3B;;AAEA;EACE,gBAAgB;EAChB,4BAA4B;EAC5B,gBAAgB;EAChB,QAAQ;EACR,WAAW;AACb;;AAEA;EACE,gBAAgB;EAChB,4BAA4B;EAC5B,gBAAgB;EAChB,QAAQ;EACR,iBAAiB;EACjB,WAAW;AACb;;AAEA;EACE,4BAA4B;EAC5B,gBAAgB;EAChB,QAAQ;AACV;;AAEA;EACE;IACE,UAAU;IACV,SAAS;EACX;AACF",sourcesContent:[`.rs-base {
  background-color: #333;
  color: #fafafa;
  border-radius: 0;
  font: 10px monospace;
  left: 5px;
  line-height: 1em;
  opacity: 0.85;
  overflow: hidden;
  padding: 10px;
  position: fixed;
  top: 5px;
  width: 300px;
  z-index: 10000;
}

.rs-base div.hidden {
  display: none;
}

.rs-base h1 {
  color: #fff;
  cursor: pointer;
  font-size: 1.4em;
  font-weight: 300;
  margin: 0 0 5px;
  padding: 0;
}

.rs-group {
  display: -webkit-box;
  display: -webkit-flex;
  display: flex;
  -webkit-flex-direction: column-reverse;
  flex-direction: column-reverse;
  margin-bottom: 5px;
}

.rs-group:last-child {
  margin-bottom: 0;
}

.rs-counter-base {
  align-items: center;
  display: -webkit-box;
  display: -webkit-flex;
  display: flex;
  height: 10px;
  -webkit-justify-content: space-between;
  justify-content: space-between;
  margin: 2px 0;
}

.rs-counter-base.alarm {
  color: #b70000;
  text-shadow: 0 0 0 #b70000,
               0 0 1px #fff,
               0 0 1px #fff,
               0 0 2px #fff,
               0 0 2px #fff,
               0 0 3px #fff,
               0 0 3px #fff,
               0 0 4px #fff,
               0 0 4px #fff;
}

.rs-counter-id {
  font-weight: 300;
  -webkit-box-ordinal-group: 0;
  -webkit-order: 0;
  order: 0;
  width: 54px;
}

.rs-counter-value {
  font-weight: 300;
  -webkit-box-ordinal-group: 1;
  -webkit-order: 1;
  order: 1;
  text-align: right;
  width: 35px;
}

.rs-canvas {
  -webkit-box-ordinal-group: 2;
  -webkit-order: 2;
  order: 2;
}

@media (min-width: 480px) {
  .rs-base {
    left: 20px;
    top: 20px;
  }
}
`],sourceRoot:""}]);const y=v},"./src/style/aframe.css":(l,d,c)=>{c.r(d),c.d(d,{default:()=>O});var h=c("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),m=c.n(h),p=c("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),A=c.n(p),v=c("./node_modules/style-loader/dist/runtime/insertBySelector.js"),y=c.n(v),x=c("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),C=c.n(x),g=c("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),b=c.n(g),_=c("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),S=c.n(_),R=c("./node_modules/css-loader/dist/cjs.js!./src/style/aframe.css"),P={};P.styleTagTransform=S(),P.setAttributes=C(),P.insert=y().bind(null,"head"),P.domAPI=A(),P.insertStyleElement=b(),m()(R.default,P);const O=R.default&&R.default.locals?R.default.locals:void 0},"./src/style/rStats.css":(l,d,c)=>{c.r(d),c.d(d,{default:()=>O});var h=c("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),m=c.n(h),p=c("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),A=c.n(p),v=c("./node_modules/style-loader/dist/runtime/insertBySelector.js"),y=c.n(v),x=c("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),C=c.n(x),g=c("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),b=c.n(g),_=c("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),S=c.n(_),R=c("./node_modules/css-loader/dist/cjs.js!./src/style/rStats.css"),P={};P.styleTagTransform=S(),P.setAttributes=C(),P.insert=y().bind(null,"head"),P.domAPI=A(),P.insertStyleElement=b(),m()(R.default,P);const O=R.default&&R.default.locals?R.default.locals:void 0},"./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js":l=>{var d=[];function c(p){for(var A=-1,v=0;v<d.length;v++)if(d[v].identifier===p){A=v;break}return A}function h(p,A){for(var v={},y=[],x=0;x<p.length;x++){var C=p[x],g=A.base?C[0]+A.base:C[0],b=v[g]||0,_="".concat(g," ").concat(b);v[g]=b+1;var S=c(_),R={css:C[1],media:C[2],sourceMap:C[3],supports:C[4],layer:C[5]};if(S!==-1)d[S].references++,d[S].updater(R);else{var P=m(R,A);A.byIndex=x,d.splice(x,0,{identifier:_,updater:P,references:1})}y.push(_)}return y}function m(p,A){var v=A.domAPI(A);v.update(p);var y=function(C){if(C){if(C.css===p.css&&C.media===p.media&&C.sourceMap===p.sourceMap&&C.supports===p.supports&&C.layer===p.layer)return;v.update(p=C)}else v.remove()};return y}l.exports=function(p,A){A=A||{},p=p||[];var v=h(p,A);return function(x){x=x||[];for(var C=0;C<v.length;C++){var g=v[C],b=c(g);d[b].references--}for(var _=h(x,A),S=0;S<v.length;S++){var R=v[S],P=c(R);d[P].references===0&&(d[P].updater(),d.splice(P,1))}v=_}}},"./node_modules/style-loader/dist/runtime/insertBySelector.js":l=>{var d={};function c(m){if(typeof d[m]>"u"){var p=document.querySelector(m);if(window.HTMLIFrameElement&&p instanceof window.HTMLIFrameElement)try{p=p.contentDocument.head}catch{p=null}d[m]=p}return d[m]}function h(m,p){var A=c(m);if(!A)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");A.appendChild(p)}l.exports=h},"./node_modules/style-loader/dist/runtime/insertStyleElement.js":l=>{function d(c){var h=document.createElement("style");return c.setAttributes(h,c.attributes),c.insert(h,c.options),h}l.exports=d},"./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js":(l,d,c)=>{function h(m){var p=c.nc;p&&m.setAttribute("nonce",p)}l.exports=h},"./node_modules/style-loader/dist/runtime/styleDomAPI.js":l=>{function d(m,p,A){var v="";A.supports&&(v+="@supports (".concat(A.supports,") {")),A.media&&(v+="@media ".concat(A.media," {"));var y=typeof A.layer<"u";y&&(v+="@layer".concat(A.layer.length>0?" ".concat(A.layer):""," {")),v+=A.css,y&&(v+="}"),A.media&&(v+="}"),A.supports&&(v+="}");var x=A.sourceMap;x&&typeof btoa<"u"&&(v+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(x))))," */")),p.styleTagTransform(v,m,p.options)}function c(m){if(m.parentNode===null)return!1;m.parentNode.removeChild(m)}function h(m){var p=m.insertStyleElement(m);return{update:function(v){d(p,m,v)},remove:function(){c(p)}}}l.exports=h},"./node_modules/style-loader/dist/runtime/styleTagTransform.js":l=>{function d(c,h){if(h.styleSheet)h.styleSheet.cssText=c;else{for(;h.firstChild;)h.removeChild(h.firstChild);h.appendChild(document.createTextNode(c))}}l.exports=d},"data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27 standalone=%27no%27%3F%3E%3Csvg width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27 version=%271.1%27 id=%27svg320%27 sodipodi:docname=%27fullscreen-aframe.svg%27 xml:space=%27preserve%27 inkscape:version=%271.2.1 %289c6d41e  2022-07-14%29%27 xmlns:inkscape=%27http://www.inkscape.org/namespaces/inkscape%27 xmlns:sodipodi=%27http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:svg=%27http://www.w3.org/2000/svg%27 xmlns:rdf=%27http://www.w3.org/1999/02/22-rdf-syntax-ns%23%27 xmlns:cc=%27http://creativecommons.org/ns%23%27 xmlns:dc=%27http://purl.org/dc/elements/1.1/%27%3E%3Cdefs id=%27defs324%27 /%3E%3Csodipodi:namedview id=%27namedview322%27 pagecolor=%27%23ffffff%27 bordercolor=%27%23000000%27 borderopacity=%270.25%27 inkscape:showpageshadow=%272%27 inkscape:pageopacity=%270.0%27 inkscape:pagecheckerboard=%270%27 inkscape:deskcolor=%27%23d1d1d1%27 showgrid=%27false%27 inkscape:zoom=%273.8064516%27 inkscape:cx=%2791.423729%27 inkscape:cy=%27-1.4449153%27 inkscape:window-width=%271440%27 inkscape:window-height=%27847%27 inkscape:window-x=%2732%27 inkscape:window-y=%2725%27 inkscape:window-maximized=%270%27 inkscape:current-layer=%27svg320%27 /%3E%3Ctitle id=%27title312%27%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M96 0H12A12 12 0 0 0 0 12V50A12 12 0 0 0 12 62H96a12 12 0 0 0 12-12V12A12 12 0 0 0 96 0Zm8 50a8 8 0 0 1-8 8H12a8 8 0 0 1-8-8V12a8 8 0 0 1 8-8H96a8 8 0 0 1 8 8Z%27 fill=%27%23fff%27 id=%27path314%27 style=%27fill:%23ffffff%27 /%3E%3Cg id=%27g356%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g358%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g360%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g362%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g364%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g366%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g368%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g370%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g372%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g374%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g376%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g378%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g380%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g382%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g384%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cmetadata id=%27metadata561%27%3E%3Crdf:RDF%3E%3Ccc:Work rdf:about=%27%27%3E%3Cdc:title%3Eaframe-armode-noborder-reduced-tracking%3C/dc:title%3E%3C/cc:Work%3E%3C/rdf:RDF%3E%3C/metadata%3E%3Cpath d=%27m 98.168511 40.083649 c 0 -1.303681 -0.998788 -2.358041 -2.239389 -2.358041 -1.230088 0.0031 -2.240892 1.05436 -2.240892 2.358041 v 4.881296 l -9.041661 -9.041662 c -0.874129 -0.875631 -2.288954 -0.875631 -3.16308 0 -0.874129 0.874126 -0.874129 2.293459 0 3.167585 l 8.995101 8.992101 h -4.858767 c -1.323206 0.0031 -2.389583 1.004796 -2.389583 2.239386 0 1.237598 1.066377 2.237888 2.389583 2.237888 h 10.154599 c 1.323206 0 2.388082 -0.998789 2.392587 -2.237888 -0.0044 -0.03305 -0.009 -0.05858 -0.0134 -0.09161 0.0046 -0.04207 0.0134 -0.08712 0.0134 -0.13066 V 40.085172 h -1.52e-4%27 id=%27path596%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 23.091002 35.921781 -9.026643 9.041662 v -4.881296 c 0 -1.303681 -1.009302 -2.355037 -2.242393 -2.358041 -1.237598 0 -2.237888 1.05436 -2.237888 2.358041 l -0.0031 10.016421 c 0 0.04356 0.01211 0.08862 0.0015 0.130659 -0.0031 0.03153 -0.009 0.05709 -0.01211 0.09161 0.0031 1.239099 1.069379 2.237888 2.391085 2.237888 h 10.156101 c 1.320202 0 2.388079 -1.000291 2.388079 -2.237888 0 -1.234591 -1.067877 -2.236383 -2.388079 -2.239387 h -4.858767 l 8.995101 -8.9921 c 0.871126 -0.874127 0.871126 -2.293459 0 -3.167586 -0.875628 -0.877132 -2.291957 -0.877132 -3.169087 -1.52e-4%27 id=%27path598%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 84.649572 25.978033 9.041662 -9.041664 v 4.881298 c 0 1.299176 1.010806 2.350532 2.240891 2.355037 1.240601 0 2.23939 -1.055861 2.23939 -2.355037 V 11.798242 c 0 -0.04356 -0.009 -0.08862 -0.0134 -0.127671 0.0044 -0.03153 0.009 -0.06157 0.0134 -0.09313 -0.0044 -1.240598 -1.069379 -2.2393873 -2.391085 -2.2393873 h -10.1546 c -1.323205 0 -2.38958 0.9987893 -2.38958 2.2393873 0 1.233091 1.066375 2.237887 2.38958 2.240891 h 4.858768 l -8.995102 8.9921 c -0.874129 0.872625 -0.874129 2.288954 0 3.161578 0.874127 0.880137 2.288951 0.880137 3.16308 1.5e-4%27 id=%27path600%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 17.264988 13.822853 h 4.857265 c 1.320202 -0.0031 2.388079 -1.0078 2.388079 -2.240889 0 -1.240601 -1.067877 -2.2393893 -2.388079 -2.2393893 H 11.967654 c -1.321707 0 -2.388082 0.9987883 -2.391085 2.2393893 0.0031 0.03153 0.009 0.06157 0.01211 0.09313 -0.0031 0.03905 -0.0015 0.08262 -0.0015 0.127671 l 0.0031 10.020926 c 0 1.299176 1.00029 2.355038 2.237887 2.355038 1.233092 -0.0044 2.242393 -1.055862 2.242393 -2.355038 v -4.881295 l 9.026644 9.041661 c 0.877132 0.878635 2.293459 0.878635 3.169087 0 0.871125 -0.872624 0.871125 -2.288953 0 -3.161577 l -8.995282 -8.993616%27 id=%27path602%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3C/svg%3E":l=>{l.exports="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27 standalone=%27no%27%3F%3E%3Csvg width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27 version=%271.1%27 id=%27svg320%27 sodipodi:docname=%27fullscreen-aframe.svg%27 xml:space=%27preserve%27 inkscape:version=%271.2.1 %289c6d41e  2022-07-14%29%27 xmlns:inkscape=%27http://www.inkscape.org/namespaces/inkscape%27 xmlns:sodipodi=%27http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:svg=%27http://www.w3.org/2000/svg%27 xmlns:rdf=%27http://www.w3.org/1999/02/22-rdf-syntax-ns%23%27 xmlns:cc=%27http://creativecommons.org/ns%23%27 xmlns:dc=%27http://purl.org/dc/elements/1.1/%27%3E%3Cdefs id=%27defs324%27 /%3E%3Csodipodi:namedview id=%27namedview322%27 pagecolor=%27%23ffffff%27 bordercolor=%27%23000000%27 borderopacity=%270.25%27 inkscape:showpageshadow=%272%27 inkscape:pageopacity=%270.0%27 inkscape:pagecheckerboard=%270%27 inkscape:deskcolor=%27%23d1d1d1%27 showgrid=%27false%27 inkscape:zoom=%273.8064516%27 inkscape:cx=%2791.423729%27 inkscape:cy=%27-1.4449153%27 inkscape:window-width=%271440%27 inkscape:window-height=%27847%27 inkscape:window-x=%2732%27 inkscape:window-y=%2725%27 inkscape:window-maximized=%270%27 inkscape:current-layer=%27svg320%27 /%3E%3Ctitle id=%27title312%27%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M96 0H12A12 12 0 0 0 0 12V50A12 12 0 0 0 12 62H96a12 12 0 0 0 12-12V12A12 12 0 0 0 96 0Zm8 50a8 8 0 0 1-8 8H12a8 8 0 0 1-8-8V12a8 8 0 0 1 8-8H96a8 8 0 0 1 8 8Z%27 fill=%27%23fff%27 id=%27path314%27 style=%27fill:%23ffffff%27 /%3E%3Cg id=%27g356%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g358%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g360%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g362%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g364%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g366%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g368%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g370%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g372%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g374%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g376%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g378%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g380%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g382%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g384%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cmetadata id=%27metadata561%27%3E%3Crdf:RDF%3E%3Ccc:Work rdf:about=%27%27%3E%3Cdc:title%3Eaframe-armode-noborder-reduced-tracking%3C/dc:title%3E%3C/cc:Work%3E%3C/rdf:RDF%3E%3C/metadata%3E%3Cpath d=%27m 98.168511 40.083649 c 0 -1.303681 -0.998788 -2.358041 -2.239389 -2.358041 -1.230088 0.0031 -2.240892 1.05436 -2.240892 2.358041 v 4.881296 l -9.041661 -9.041662 c -0.874129 -0.875631 -2.288954 -0.875631 -3.16308 0 -0.874129 0.874126 -0.874129 2.293459 0 3.167585 l 8.995101 8.992101 h -4.858767 c -1.323206 0.0031 -2.389583 1.004796 -2.389583 2.239386 0 1.237598 1.066377 2.237888 2.389583 2.237888 h 10.154599 c 1.323206 0 2.388082 -0.998789 2.392587 -2.237888 -0.0044 -0.03305 -0.009 -0.05858 -0.0134 -0.09161 0.0046 -0.04207 0.0134 -0.08712 0.0134 -0.13066 V 40.085172 h -1.52e-4%27 id=%27path596%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 23.091002 35.921781 -9.026643 9.041662 v -4.881296 c 0 -1.303681 -1.009302 -2.355037 -2.242393 -2.358041 -1.237598 0 -2.237888 1.05436 -2.237888 2.358041 l -0.0031 10.016421 c 0 0.04356 0.01211 0.08862 0.0015 0.130659 -0.0031 0.03153 -0.009 0.05709 -0.01211 0.09161 0.0031 1.239099 1.069379 2.237888 2.391085 2.237888 h 10.156101 c 1.320202 0 2.388079 -1.000291 2.388079 -2.237888 0 -1.234591 -1.067877 -2.236383 -2.388079 -2.239387 h -4.858767 l 8.995101 -8.9921 c 0.871126 -0.874127 0.871126 -2.293459 0 -3.167586 -0.875628 -0.877132 -2.291957 -0.877132 -3.169087 -1.52e-4%27 id=%27path598%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 84.649572 25.978033 9.041662 -9.041664 v 4.881298 c 0 1.299176 1.010806 2.350532 2.240891 2.355037 1.240601 0 2.23939 -1.055861 2.23939 -2.355037 V 11.798242 c 0 -0.04356 -0.009 -0.08862 -0.0134 -0.127671 0.0044 -0.03153 0.009 -0.06157 0.0134 -0.09313 -0.0044 -1.240598 -1.069379 -2.2393873 -2.391085 -2.2393873 h -10.1546 c -1.323205 0 -2.38958 0.9987893 -2.38958 2.2393873 0 1.233091 1.066375 2.237887 2.38958 2.240891 h 4.858768 l -8.995102 8.9921 c -0.874129 0.872625 -0.874129 2.288954 0 3.161578 0.874127 0.880137 2.288951 0.880137 3.16308 1.5e-4%27 id=%27path600%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 17.264988 13.822853 h 4.857265 c 1.320202 -0.0031 2.388079 -1.0078 2.388079 -2.240889 0 -1.240601 -1.067877 -2.2393893 -2.388079 -2.2393893 H 11.967654 c -1.321707 0 -2.388082 0.9987883 -2.391085 2.2393893 0.0031 0.03153 0.009 0.06157 0.01211 0.09313 -0.0031 0.03905 -0.0015 0.08262 -0.0015 0.127671 l 0.0031 10.020926 c 0 1.299176 1.00029 2.355038 2.237887 2.355038 1.233092 -0.0044 2.242393 -1.055862 2.242393 -2.355038 v -4.881295 l 9.026644 9.041661 c 0.877132 0.878635 2.293459 0.878635 3.169087 0 0.871125 -0.872624 0.871125 -2.288953 0 -3.161577 l -8.995282 -8.993616%27 id=%27path602%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3C/svg%3E"},"data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27%3E%3Ctitle%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0Zm8,50a8,8,0,0,1-8,8H12a8,8,0,0,1-8-8V12a8,8,0,0,1,8-8H96a8,8,0,0,1,8,8Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M43.35,39.82H32.51L30.45,46H23.88L35,16h5.73L52,46H45.43Zm-9.17-5h7.5L37.91,23.58Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M68.11,35H63.18V46H57V16H68.15q5.31,0,8.2,2.37a8.18,8.18,0,0,1,2.88,6.7,9.22,9.22,0,0,1-1.33,5.12,9.09,9.09,0,0,1-4,3.26l6.49,12.26V46H73.73Zm-4.93-5h5a5.09,5.09,0,0,0,3.6-1.18,4.21,4.21,0,0,0,1.28-3.27,4.56,4.56,0,0,0-1.2-3.34A5,5,0,0,0,68.15,21h-5Z%27 fill=%27%23fff%27/%3E%3C/svg%3E":l=>{l.exports="data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27%3E%3Ctitle%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0Zm8,50a8,8,0,0,1-8,8H12a8,8,0,0,1-8-8V12a8,8,0,0,1,8-8H96a8,8,0,0,1,8,8Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M43.35,39.82H32.51L30.45,46H23.88L35,16h5.73L52,46H45.43Zm-9.17-5h7.5L37.91,23.58Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M68.11,35H63.18V46H57V16H68.15q5.31,0,8.2,2.37a8.18,8.18,0,0,1,2.88,6.7,9.22,9.22,0,0,1-1.33,5.12,9.09,9.09,0,0,1-4,3.26l6.49,12.26V46H73.73Zm-4.93-5h5a5.09,5.09,0,0,0,3.6-1.18,4.21,4.21,0,0,0,1.28-3.27,4.56,4.56,0,0,0-1.2-3.34A5,5,0,0,0,68.15,21h-5Z%27 fill=%27%23fff%27/%3E%3C/svg%3E"},"data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27%3E%3Ctitle%3Eaframe-vrmode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M68.81,21.56H64.23v8.27h4.58a4.13,4.13,0,0,0,3.1-1.09,4.2,4.2,0,0,0,1-3,4.24,4.24,0,0,0-1-3A4.05,4.05,0,0,0,68.81,21.56Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0ZM41.9,46H34L24,16h8l6,21.84,6-21.84H52Zm39.29,0H73.44L68.15,35.39H64.23V46H57V16H68.81q5.32,0,8.34,2.37a8,8,0,0,1,3,6.69,9.68,9.68,0,0,1-1.27,5.18,8.9,8.9,0,0,1-4,3.34l6.26,12.11Z%27 fill=%27%23fff%27/%3E%3C/svg%3E":l=>{l.exports="data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27%3E%3Ctitle%3Eaframe-vrmode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M68.81,21.56H64.23v8.27h4.58a4.13,4.13,0,0,0,3.1-1.09,4.2,4.2,0,0,0,1-3,4.24,4.24,0,0,0-1-3A4.05,4.05,0,0,0,68.81,21.56Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0ZM41.9,46H34L24,16h8l6,21.84,6-21.84H52Zm39.29,0H73.44L68.15,35.39H64.23V46H57V16H68.81q5.32,0,8.34,2.37a8,8,0,0,1,3,6.69,9.68,9.68,0,0,1-1.27,5.18,8.9,8.9,0,0,1-4,3.34l6.26,12.11Z%27 fill=%27%23fff%27/%3E%3C/svg%3E"},"data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%20100%20100%22%20enable-background%3D%22new%200%200%20100%20100%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M55.209%2C50l17.803-17.803c1.416-1.416%2C1.416-3.713%2C0-5.129c-1.416-1.417-3.713-1.417-5.129%2C0L50.08%2C44.872%20%20L32.278%2C27.069c-1.416-1.417-3.714-1.417-5.129%2C0c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129L44.951%2C50L27.149%2C67.803%20%20c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129c0.708%2C0.708%2C1.636%2C1.062%2C2.564%2C1.062c0.928%2C0%2C1.856-0.354%2C2.564-1.062L50.08%2C55.13l17.803%2C17.802%20%20c0.708%2C0.708%2C1.637%2C1.062%2C2.564%2C1.062s1.856-0.354%2C2.564-1.062c1.416-1.416%2C1.416-3.713%2C0-5.129L55.209%2C50z%22%3E%3C/path%3E%3C/svg%3E":l=>{l.exports="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%20100%20100%22%20enable-background%3D%22new%200%200%20100%20100%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M55.209%2C50l17.803-17.803c1.416-1.416%2C1.416-3.713%2C0-5.129c-1.416-1.417-3.713-1.417-5.129%2C0L50.08%2C44.872%20%20L32.278%2C27.069c-1.416-1.417-3.714-1.417-5.129%2C0c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129L44.951%2C50L27.149%2C67.803%20%20c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129c0.708%2C0.708%2C1.636%2C1.062%2C2.564%2C1.062c0.928%2C0%2C1.856-0.354%2C2.564-1.062L50.08%2C55.13l17.803%2C17.802%20%20c0.708%2C0.708%2C1.637%2C1.062%2C2.564%2C1.062s1.856-0.354%2C2.564-1.062c1.416-1.416%2C1.416-3.713%2C0-5.129L55.209%2C50z%22%3E%3C/path%3E%3C/svg%3E"},"data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%2090%2090%22%20enable-background%3D%22new%200%200%2090%2090%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpolygon%20points%3D%220%2C0%200%2C0%200%2C0%20%22%3E%3C/polygon%3E%3Cg%3E%3Cpath%20d%3D%22M71.545%2C48.145h-31.98V20.743c0-2.627-2.138-4.765-4.765-4.765H18.456c-2.628%2C0-4.767%2C2.138-4.767%2C4.765v42.789%20%20%20c0%2C2.628%2C2.138%2C4.766%2C4.767%2C4.766h5.535v0.959c0%2C2.628%2C2.138%2C4.765%2C4.766%2C4.765h42.788c2.628%2C0%2C4.766-2.137%2C4.766-4.765V52.914%20%20%20C76.311%2C50.284%2C74.173%2C48.145%2C71.545%2C48.145z%20M18.455%2C16.935h16.344c2.1%2C0%2C3.808%2C1.708%2C3.808%2C3.808v27.401H37.25V22.636%20%20%20c0-0.264-0.215-0.478-0.479-0.478H16.482c-0.264%2C0-0.479%2C0.214-0.479%2C0.478v36.585c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h7.507v7.644%20%20%20h-5.534c-2.101%2C0-3.81-1.709-3.81-3.81V20.743C14.645%2C18.643%2C16.354%2C16.935%2C18.455%2C16.935z%20M16.96%2C23.116h19.331v25.031h-7.535%20%20%20c-2.628%2C0-4.766%2C2.139-4.766%2C4.768v5.828h-7.03V23.116z%20M71.545%2C73.064H28.757c-2.101%2C0-3.81-1.708-3.81-3.808V52.914%20%20%20c0-2.102%2C1.709-3.812%2C3.81-3.812h42.788c2.1%2C0%2C3.809%2C1.71%2C3.809%2C3.812v16.343C75.354%2C71.356%2C73.645%2C73.064%2C71.545%2C73.064z%22%3E%3C/path%3E%3Cpath%20d%3D%22M28.919%2C58.424c-1.466%2C0-2.659%2C1.193-2.659%2C2.66c0%2C1.466%2C1.193%2C2.658%2C2.659%2C2.658c1.468%2C0%2C2.662-1.192%2C2.662-2.658%20%20%20C31.581%2C59.617%2C30.387%2C58.424%2C28.919%2C58.424z%20M28.919%2C62.786c-0.939%2C0-1.703-0.764-1.703-1.702c0-0.939%2C0.764-1.704%2C1.703-1.704%20%20%20c0.94%2C0%2C1.705%2C0.765%2C1.705%2C1.704C30.623%2C62.022%2C29.858%2C62.786%2C28.919%2C62.786z%22%3E%3C/path%3E%3Cpath%20d%3D%22M69.654%2C50.461H33.069c-0.264%2C0-0.479%2C0.215-0.479%2C0.479v20.288c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h36.585%20%20%20c0.263%2C0%2C0.477-0.214%2C0.477-0.478V50.939C70.131%2C50.676%2C69.917%2C50.461%2C69.654%2C50.461z%20M69.174%2C51.417V70.75H33.548V51.417H69.174z%22%3E%3C/path%3E%3Cpath%20d%3D%22M45.201%2C30.296c6.651%2C0%2C12.233%2C5.351%2C12.551%2C11.977l-3.033-2.638c-0.193-0.165-0.507-0.142-0.675%2C0.048%20%20%20c-0.174%2C0.198-0.153%2C0.501%2C0.045%2C0.676l3.883%2C3.375c0.09%2C0.075%2C0.198%2C0.115%2C0.312%2C0.115c0.141%2C0%2C0.273-0.061%2C0.362-0.166%20%20%20l3.371-3.877c0.173-0.2%2C0.151-0.502-0.047-0.675c-0.194-0.166-0.508-0.144-0.676%2C0.048l-2.592%2C2.979%20%20%20c-0.18-3.417-1.629-6.605-4.099-9.001c-2.538-2.461-5.877-3.817-9.404-3.817c-0.264%2C0-0.479%2C0.215-0.479%2C0.479%20%20%20C44.72%2C30.083%2C44.936%2C30.296%2C45.201%2C30.296z%22%3E%3C/path%3E%3C/g%3E%3C/svg%3E":l=>{l.exports="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%2090%2090%22%20enable-background%3D%22new%200%200%2090%2090%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpolygon%20points%3D%220%2C0%200%2C0%200%2C0%20%22%3E%3C/polygon%3E%3Cg%3E%3Cpath%20d%3D%22M71.545%2C48.145h-31.98V20.743c0-2.627-2.138-4.765-4.765-4.765H18.456c-2.628%2C0-4.767%2C2.138-4.767%2C4.765v42.789%20%20%20c0%2C2.628%2C2.138%2C4.766%2C4.767%2C4.766h5.535v0.959c0%2C2.628%2C2.138%2C4.765%2C4.766%2C4.765h42.788c2.628%2C0%2C4.766-2.137%2C4.766-4.765V52.914%20%20%20C76.311%2C50.284%2C74.173%2C48.145%2C71.545%2C48.145z%20M18.455%2C16.935h16.344c2.1%2C0%2C3.808%2C1.708%2C3.808%2C3.808v27.401H37.25V22.636%20%20%20c0-0.264-0.215-0.478-0.479-0.478H16.482c-0.264%2C0-0.479%2C0.214-0.479%2C0.478v36.585c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h7.507v7.644%20%20%20h-5.534c-2.101%2C0-3.81-1.709-3.81-3.81V20.743C14.645%2C18.643%2C16.354%2C16.935%2C18.455%2C16.935z%20M16.96%2C23.116h19.331v25.031h-7.535%20%20%20c-2.628%2C0-4.766%2C2.139-4.766%2C4.768v5.828h-7.03V23.116z%20M71.545%2C73.064H28.757c-2.101%2C0-3.81-1.708-3.81-3.808V52.914%20%20%20c0-2.102%2C1.709-3.812%2C3.81-3.812h42.788c2.1%2C0%2C3.809%2C1.71%2C3.809%2C3.812v16.343C75.354%2C71.356%2C73.645%2C73.064%2C71.545%2C73.064z%22%3E%3C/path%3E%3Cpath%20d%3D%22M28.919%2C58.424c-1.466%2C0-2.659%2C1.193-2.659%2C2.66c0%2C1.466%2C1.193%2C2.658%2C2.659%2C2.658c1.468%2C0%2C2.662-1.192%2C2.662-2.658%20%20%20C31.581%2C59.617%2C30.387%2C58.424%2C28.919%2C58.424z%20M28.919%2C62.786c-0.939%2C0-1.703-0.764-1.703-1.702c0-0.939%2C0.764-1.704%2C1.703-1.704%20%20%20c0.94%2C0%2C1.705%2C0.765%2C1.705%2C1.704C30.623%2C62.022%2C29.858%2C62.786%2C28.919%2C62.786z%22%3E%3C/path%3E%3Cpath%20d%3D%22M69.654%2C50.461H33.069c-0.264%2C0-0.479%2C0.215-0.479%2C0.479v20.288c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h36.585%20%20%20c0.263%2C0%2C0.477-0.214%2C0.477-0.478V50.939C70.131%2C50.676%2C69.917%2C50.461%2C69.654%2C50.461z%20M69.174%2C51.417V70.75H33.548V51.417H69.174z%22%3E%3C/path%3E%3Cpath%20d%3D%22M45.201%2C30.296c6.651%2C0%2C12.233%2C5.351%2C12.551%2C11.977l-3.033-2.638c-0.193-0.165-0.507-0.142-0.675%2C0.048%20%20%20c-0.174%2C0.198-0.153%2C0.501%2C0.045%2C0.676l3.883%2C3.375c0.09%2C0.075%2C0.198%2C0.115%2C0.312%2C0.115c0.141%2C0%2C0.273-0.061%2C0.362-0.166%20%20%20l3.371-3.877c0.173-0.2%2C0.151-0.502-0.047-0.675c-0.194-0.166-0.508-0.144-0.676%2C0.048l-2.592%2C2.979%20%20%20c-0.18-3.417-1.629-6.605-4.099-9.001c-2.538-2.461-5.877-3.817-9.404-3.817c-0.264%2C0-0.479%2C0.215-0.479%2C0.479%20%20%20C44.72%2C30.083%2C44.936%2C30.296%2C45.201%2C30.296z%22%3E%3C/path%3E%3C/g%3E%3C/svg%3E"},"./node_modules/super-three/build/three.module.js":(l,d,c)=>{c.r(d),c.d(d,{ACESFilmicToneMapping:()=>qe,AddEquation:()=>K,AddOperation:()=>An,AdditiveAnimationBlendMode:()=>Di,AdditiveBlending:()=>L,AlphaFormat:()=>De,AlwaysDepth:()=>gt,AlwaysStencilFunc:()=>Ho,AmbientLight:()=>SS,AmbientLightProbe:()=>zO,AnimationClip:()=>rA,AnimationLoader:()=>SO,AnimationMixer:()=>s8,AnimationObjectGroup:()=>n8,AnimationUtils:()=>wO,ArcCurve:()=>Qb,ArrayCamera:()=>hE,ArrowHelper:()=>S8,Audio:()=>US,AudioAnalyser:()=>jO,AudioContext:()=>VE,AudioListener:()=>VO,AudioLoader:()=>kO,AxesHelper:()=>T8,BackSide:()=>R,BasicDepthPacking:()=>Ur,BasicShadowMap:()=>C,Bone:()=>mE,BooleanKeyframeTrack:()=>Xd,Box2:()=>f8,Box3:()=>Or,Box3Helper:()=>M8,BoxBufferGeometry:()=>k8,BoxGeometry:()=>Zl,BoxHelper:()=>C8,BufferAttribute:()=>Hr,BufferGeometry:()=>Wi,BufferGeometryLoader:()=>BS,ByteType:()=>Xn,Cache:()=>Yd,Camera:()=>Bd,CameraHelper:()=>w8,CanvasTexture:()=>X5,CapsuleBufferGeometry:()=>U8,CapsuleGeometry:()=>zg,CatmullRomCurve3:()=>Wb,CineonToneMapping:()=>Pe,CircleBufferGeometry:()=>z8,CircleGeometry:()=>Gg,ClampToEdgeWrapping:()=>Oe,Clock:()=>FS,Color:()=>kn,ColorKeyframeTrack:()=>NE,ColorManagement:()=>hs,CompressedArrayTexture:()=>j5,CompressedTexture:()=>yE,CompressedTextureLoader:()=>TO,ConeBufferGeometry:()=>G8,ConeGeometry:()=>Hg,CubeCamera:()=>Ld,CubeReflectionMapping:()=>Re,CubeRefractionMapping:()=>Se,CubeTexture:()=>Qc,CubeTextureLoader:()=>IO,CubeUVReflectionMapping:()=>Xe,CubicBezierCurve:()=>CE,CubicBezierCurve3:()=>Xb,CubicInterpolant:()=>gS,CullFaceBack:()=>v,CullFaceFront:()=>y,CullFaceFrontBack:()=>x,CullFaceNone:()=>A,Curve:()=>tc,CurvePath:()=>Yb,CustomBlending:()=>J,CustomToneMapping:()=>ye,CylinderBufferGeometry:()=>H8,CylinderGeometry:()=>Vd,Cylindrical:()=>d8,Data3DTexture:()=>Gr,DataArrayTexture:()=>Oc,DataTexture:()=>Bp,DataTexture2DArray:()=>F8,DataTexture3D:()=>N8,DataTextureLoader:()=>RO,DataUtils:()=>D8,DecrementStencilOp:()=>Gl,DecrementWrapStencilOp:()=>ao,DefaultLoadingManager:()=>yS,DepthFormat:()=>xn,DepthStencilFormat:()=>Nn,DepthTexture:()=>gb,DirectionalLight:()=>bS,DirectionalLightHelper:()=>_8,DiscreteInterpolant:()=>AS,DodecahedronBufferGeometry:()=>V8,DodecahedronGeometry:()=>Vg,DoubleSide:()=>P,DstAlphaFactor:()=>Fe,DstColorFactor:()=>rt,DynamicCopyUsage:()=>gd,DynamicDrawUsage:()=>rh,DynamicReadUsage:()=>pd,EdgesGeometry:()=>qb,EllipseCurve:()=>zv,EqualDepth:()=>ut,EqualStencilFunc:()=>Hl,EquirectangularReflectionMapping:()=>Be,EquirectangularRefractionMapping:()=>Ee,Euler:()=>Zs,EventDispatcher:()=>lo,ExtrudeBufferGeometry:()=>Q8,ExtrudeGeometry:()=>Xg,FileLoader:()=>bu,Float16BufferAttribute:()=>sv,Float32BufferAttribute:()=>li,Float64BufferAttribute:()=>lp,FloatType:()=>vn,Fog:()=>Iv,FogExp2:()=>Tv,FramebufferTexture:()=>W5,FrontSide:()=>S,Frustum:()=>Eh,GLBufferAttribute:()=>c8,GLSL1:()=>Vo,GLSL3:()=>Qo,GreaterDepth:()=>qt,GreaterEqualDepth:()=>Ct,GreaterEqualStencilFunc:()=>dg,GreaterStencilFunc:()=>hg,GridHelper:()=>x8,Group:()=>Gd,HalfFloatType:()=>Nt,HemisphereLight:()=>xS,HemisphereLightHelper:()=>y8,HemisphereLightProbe:()=>UO,IcosahedronBufferGeometry:()=>W8,IcosahedronGeometry:()=>Kg,ImageBitmapLoader:()=>NO,ImageLoader:()=>sA,ImageUtils:()=>Kl,ImmediateRenderObject:()=>P8,IncrementStencilOp:()=>zl,IncrementWrapStencilOp:()=>Xs,InstancedBufferAttribute:()=>Lp,InstancedBufferGeometry:()=>RS,InstancedInterleavedBuffer:()=>l8,InstancedMesh:()=>Pb,Int16BufferAttribute:()=>iv,Int32BufferAttribute:()=>rv,Int8BufferAttribute:()=>ev,IntType:()=>or,InterleavedBuffer:()=>Rv,InterleavedBufferAttribute:()=>Hd,Interpolant:()=>tA,InterpolateDiscrete:()=>Wt,InterpolateLinear:()=>pt,InterpolateSmooth:()=>Rt,InvertStencilOp:()=>Ca,KeepStencilOp:()=>Fo,KeyframeTrack:()=>nc,LOD:()=>Mb,LatheBufferGeometry:()=>j8,LatheGeometry:()=>Dp,Layers:()=>Ar,LessDepth:()=>It,LessEqualDepth:()=>ct,LessEqualStencilFunc:()=>vr,LessStencilFunc:()=>yl,Light:()=>bh,LightProbe:()=>Yv,Line:()=>Mh,Line3:()=>p8,LineBasicMaterial:()=>ma,LineCurve:()=>Hv,LineCurve3:()=>Kb,LineDashedMaterial:()=>pS,LineLoop:()=>zb,LineSegments:()=>$c,LinearEncoding:()=>ar,LinearFilter:()=>Te,LinearInterpolant:()=>FE,LinearMipMapLinearFilter:()=>nn,LinearMipMapNearestFilter:()=>Tt,LinearMipmapLinearFilter:()=>Ht,LinearMipmapNearestFilter:()=>Ve,LinearSRGBColorSpace:()=>Ns,LinearToneMapping:()=>ci,Loader:()=>il,LoaderUtils:()=>HE,LoadingManager:()=>kE,LoopOnce:()=>nt,LoopPingPong:()=>Kt,LoopRepeat:()=>at,LuminanceAlphaFormat:()=>wt,LuminanceFormat:()=>ot,MOUSE:()=>m,Material:()=>bo,MaterialLoader:()=>qv,MathUtils:()=>yd,Matrix3:()=>kr,Matrix4:()=>Jn,MaxEquation:()=>ne,Mesh:()=>eo,MeshBasicMaterial:()=>Uc,MeshDepthMaterial:()=>cE,MeshDistanceMaterial:()=>uE,MeshLambertMaterial:()=>dS,MeshMatcapMaterial:()=>fS,MeshNormalMaterial:()=>hS,MeshPhongMaterial:()=>cS,MeshPhysicalMaterial:()=>lS,MeshStandardMaterial:()=>LE,MeshToonMaterial:()=>uS,MinEquation:()=>ee,MirroredRepeatWrapping:()=>$e,MixOperation:()=>fn,MultiplyBlending:()=>H,MultiplyOperation:()=>un,NearestFilter:()=>le,NearestMipMapLinearFilter:()=>Ae,NearestMipMapNearestFilter:()=>Z,NearestMipmapLinearFilter:()=>Ie,NearestMipmapNearestFilter:()=>Q,NeverDepth:()=>xt,NeverStencilFunc:()=>qa,NoBlending:()=>O,NoColorSpace:()=>Fs,NoToneMapping:()=>Bn,NormalAnimationBlendMode:()=>hi,NormalBlending:()=>D,NotEqualDepth:()=>Ft,NotEqualStencilFunc:()=>ih,NumberKeyframeTrack:()=>nA,Object3D:()=>dr,ObjectLoader:()=>OO,ObjectSpaceNormalMap:()=>ur,OctahedronBufferGeometry:()=>X8,OctahedronGeometry:()=>Op,OneFactor:()=>W,OneMinusDstAlphaFactor:()=>je,OneMinusDstColorFactor:()=>He,OneMinusSrcAlphaFactor:()=>ve,OneMinusSrcColorFactor:()=>he,OrthographicCamera:()=>Cv,PCFShadowMap:()=>g,PCFSoftShadowMap:()=>b,PMREMGenerator:()=>sE,Path:()=>Ug,PerspectiveCamera:()=>Ts,Plane:()=>Sl,PlaneBufferGeometry:()=>K8,PlaneGeometry:()=>jc,PlaneHelper:()=>b8,PointLight:()=>MS,PointLightHelper:()=>A8,Points:()=>Hb,PointsMaterial:()=>AE,PolarGridHelper:()=>E8,PolyhedronBufferGeometry:()=>Y8,PolyhedronGeometry:()=>Cu,PositionalAudio:()=>WO,PropertyBinding:()=>Lr,PropertyMixer:()=>GS,QuadraticBezierCurve:()=>ME,QuadraticBezierCurve3:()=>bE,Quaternion:()=>zs,QuaternionKeyframeTrack:()=>Np,QuaternionLinearInterpolant:()=>vS,REVISION:()=>h,RGBADepthPacking:()=>vs,RGBAFormat:()=>At,RGBAIntegerFormat:()=>Ge,RGBA_ASTC_10x10_Format:()=>oe,RGBA_ASTC_10x5_Format:()=>qr,RGBA_ASTC_10x6_Format:()=>rr,RGBA_ASTC_10x8_Format:()=>q,RGBA_ASTC_12x10_Format:()=>pe,RGBA_ASTC_12x12_Format:()=>_e,RGBA_ASTC_4x4_Format:()=>gi,RGBA_ASTC_5x4_Format:()=>Mn,RGBA_ASTC_5x5_Format:()=>ui,RGBA_ASTC_6x5_Format:()=>Ai,RGBA_ASTC_6x6_Format:()=>xi,RGBA_ASTC_8x5_Format:()=>Ir,RGBA_ASTC_8x6_Format:()=>Sn,RGBA_ASTC_8x8_Format:()=>fi,RGBA_BPTC_Format:()=>Ne,RGBA_ETC2_EAC_Format:()=>si,RGBA_PVRTC_2BPPV1_Format:()=>Bt,RGBA_PVRTC_4BPPV1_Format:()=>bn,RGBA_S3TC_DXT1_Format:()=>Et,RGBA_S3TC_DXT3_Format:()=>vt,RGBA_S3TC_DXT5_Format:()=>Gt,RGBFormat:()=>st,RGB_ETC1_Format:()=>Vn,RGB_ETC2_Format:()=>ti,RGB_PVRTC_2BPPV1_Format:()=>an,RGB_PVRTC_4BPPV1_Format:()=>zt,RGB_S3TC_DXT1_Format:()=>et,RGFormat:()=>Kn,RGIntegerFormat:()=>be,RawShaderMaterial:()=>aS,Ray:()=>Ys,Raycaster:()=>u8,RectAreaLight:()=>TS,RedFormat:()=>pn,RedIntegerFormat:()=>Un,ReinhardToneMapping:()=>ze,RepeatWrapping:()=>fe,ReplaceStencilOp:()=>js,ReverseSubtractEquation:()=>ae,RingBufferGeometry:()=>q8,RingGeometry:()=>Yg,SRGBColorSpace:()=>Wr,Scene:()=>yb,ShaderChunk:()=>er,ShaderLib:()=>ec,ShaderMaterial:()=>nl,ShadowMaterial:()=>oS,Shape:()=>Qd,ShapeBufferGeometry:()=>J8,ShapeGeometry:()=>qg,ShapePath:()=>I8,ShapeUtils:()=>eu,ShortType:()=>cr,Skeleton:()=>Ov,SkeletonHelper:()=>g8,SkinnedMesh:()=>Rb,Source:()=>Ss,Sphere:()=>Ba,SphereBufferGeometry:()=>Z8,SphereGeometry:()=>Fp,Spherical:()=>h8,SphericalHarmonics3:()=>IS,SplineCurve:()=>SE,SpotLight:()=>wS,SpotLightHelper:()=>m8,Sprite:()=>wb,SpriteMaterial:()=>fE,SrcAlphaFactor:()=>xe,SrcAlphaSaturateFactor:()=>Ot,SrcColorFactor:()=>ce,StaticCopyUsage:()=>md,StaticDrawUsage:()=>xl,StaticReadUsage:()=>fd,StereoCamera:()=>GO,StreamCopyUsage:()=>Tc,StreamDrawUsage:()=>Sc,StreamReadUsage:()=>ep,StringKeyframeTrack:()=>Kd,SubtractEquation:()=>se,SubtractiveBlending:()=>N,TOUCH:()=>p,TangentSpaceNormalMap:()=>is,TetrahedronBufferGeometry:()=>$8,TetrahedronGeometry:()=>Jg,Texture:()=>yr,TextureLoader:()=>BO,TorusBufferGeometry:()=>e6,TorusGeometry:()=>Zg,TorusKnotBufferGeometry:()=>t6,TorusKnotGeometry:()=>$g,Triangle:()=>Co,TriangleFanDrawMode:()=>oi,TriangleStripDrawMode:()=>Ei,TrianglesDrawMode:()=>Pi,TubeBufferGeometry:()=>n6,TubeGeometry:()=>eA,UVMapping:()=>me,Uint16BufferAttribute:()=>Cd,Uint32BufferAttribute:()=>Md,Uint8BufferAttribute:()=>tv,Uint8ClampedBufferAttribute:()=>nv,Uniform:()=>jE,UniformsGroup:()=>a8,UniformsLib:()=>On,UniformsUtils:()=>Rd,UnsignedByteType:()=>cn,UnsignedInt248Type:()=>yn,UnsignedIntType:()=>bi,UnsignedShort4444Type:()=>ln,UnsignedShort5551Type:()=>ei,UnsignedShortType:()=>Ni,VSMShadowMap:()=>_,Vector2:()=>jt,Vector3:()=>Qe,Vector4:()=>hr,VectorKeyframeTrack:()=>iA,VideoTexture:()=>Q5,WebGL1Renderer:()=>vb,WebGL3DRenderTarget:()=>uh,WebGLArrayRenderTarget:()=>xd,WebGLCubeRenderTarget:()=>Dd,WebGLMultipleRenderTargets:()=>Ed,WebGLMultisampleRenderTarget:()=>O8,WebGLRenderTarget:()=>Us,WebGLRenderer:()=>Ab,WebGLUtils:()=>db,WireframeGeometry:()=>iS,WrapAroundEnding:()=>Yn,ZeroCurvatureEnding:()=>sn,ZeroFactor:()=>X,ZeroSlopeEnding:()=>Dn,ZeroStencilOp:()=>Ul,_SRGBAFormat:()=>ua,sRGBEncoding:()=>Ri});/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const h="147",m={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},p={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},A=0,v=1,y=2,x=3,C=0,g=1,b=2,_=3,S=0,R=1,P=2,O=0,D=1,L=2,N=3,H=4,J=5,K=100,se=101,ae=102,ee=103,ne=104,X=200,W=201,ce=202,he=203,xe=204,ve=205,Fe=206,je=207,rt=208,He=209,Ot=210,xt=0,gt=1,It=2,ct=3,ut=4,Ct=5,qt=6,Ft=7,un=0,fn=1,An=2,Bn=0,ci=1,ze=2,Pe=3,qe=4,ye=5,me=300,Re=301,Se=302,Be=303,Ee=304,Xe=306,fe=1e3,Oe=1001,$e=1002,le=1003,Q=1004,Z=1004,Ie=1005,Ae=1005,Te=1006,Ve=1007,Tt=1007,Ht=1008,nn=1008,cn=1009,Xn=1010,cr=1011,Ni=1012,or=1013,bi=1014,vn=1015,Nt=1016,ln=1017,ei=1018,yn=1020,De=1021,st=1022,At=1023,ot=1024,wt=1025,xn=1026,Nn=1027,pn=1028,Un=1029,Kn=1030,be=1031,Ge=1033,et=33776,Et=33777,vt=33778,Gt=33779,zt=35840,an=35841,bn=35842,Bt=35843,Vn=36196,ti=37492,si=37496,gi=37808,Mn=37809,ui=37810,Ai=37811,xi=37812,Ir=37813,Sn=37814,fi=37815,qr=37816,rr=37817,q=37818,oe=37819,pe=37820,_e=37821,Ne=36492,nt=2200,at=2201,Kt=2202,Wt=2300,pt=2301,Rt=2302,sn=2400,Dn=2401,Yn=2402,hi=2500,Di=2501,Pi=0,Ei=1,oi=2,ar=3e3,Ri=3001,Ur=3200,vs=3201,is=0,ur=1,Fs="",Wr="srgb",Ns="srgb-linear",Ul=0,Fo=7680,js=7681,zl=7682,Gl=7683,Xs=34055,ao=34056,Ca=5386,qa=512,yl=513,Hl=514,vr=515,hg=516,ih=517,dg=518,Ho=519,xl=35044,rh=35048,Sc=35040,fd=35045,pd=35049,ep=35041,md=35046,gd=35050,Tc=35042,Vo="100",Qo="300 es",ua=1035;class lo{addEventListener(n,s){this._listeners===void 0&&(this._listeners={});const u=this._listeners;u[n]===void 0&&(u[n]=[]),u[n].indexOf(s)===-1&&u[n].push(s)}hasEventListener(n,s){if(this._listeners===void 0)return!1;const u=this._listeners;return u[n]!==void 0&&u[n].indexOf(s)!==-1}removeEventListener(n,s){if(this._listeners===void 0)return;const f=this._listeners[n];if(f!==void 0){const w=f.indexOf(s);w!==-1&&f.splice(w,1)}}dispatchEvent(n){if(this._listeners===void 0)return;const u=this._listeners[n.type];if(u!==void 0){n.target=this;const f=u.slice(0);for(let w=0,T=f.length;w<T;w++)f[w].call(this,n);n.target=null}}}const ks=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let Ma=1234567;const xo=Math.PI/180,El=180/Math.PI;function Eo(){const B=Math.random()*4294967295|0,n=Math.random()*4294967295|0,s=Math.random()*4294967295|0,u=Math.random()*4294967295|0;return(ks[B&255]+ks[B>>8&255]+ks[B>>16&255]+ks[B>>24&255]+"-"+ks[n&255]+ks[n>>8&255]+"-"+ks[n>>16&15|64]+ks[n>>24&255]+"-"+ks[s&63|128]+ks[s>>8&255]+"-"+ks[s>>16&255]+ks[s>>24&255]+ks[u&255]+ks[u>>8&255]+ks[u>>16&255]+ks[u>>24&255]).toLowerCase()}function Jr(B,n,s){return Math.max(n,Math.min(s,B))}function sh(B,n){return(B%n+n)%n}function tp(B,n,s,u,f){return u+(B-n)*(f-u)/(s-n)}function Ad(B,n,s){return B!==n?(s-B)/(n-B):0}function _l(B,n,s){return(1-s)*B+s*n}function np(B,n,s,u){return _l(B,n,1-Math.exp(-s*u))}function ip(B,n=1){return n-Math.abs(sh(B,n*2)-n)}function rp(B,n,s){return B<=n?0:B>=s?1:(B=(B-n)/(s-n),B*B*(3-2*B))}function vd(B,n,s){return B<=n?0:B>=s?1:(B=(B-n)/(s-n),B*B*B*(B*(B*6-15)+10))}function Ic(B,n){return B+Math.floor(Math.random()*(n-B+1))}function Rc(B,n){return B+Math.random()*(n-B)}function oh(B){return B*(.5-Math.random())}function ah(B){B!==void 0&&(Ma=B);let n=Ma+=1831565813;return n=Math.imul(n^n>>>15,n|1),n^=n+Math.imul(n^n>>>7,n|61),((n^n>>>14)>>>0)/4294967296}function Wo(B){return B*xo}function jo(B){return B*El}function Ja(B){return(B&B-1)===0&&B!==0}function ba(B){return Math.pow(2,Math.ceil(Math.log(B)/Math.LN2))}function Xo(B){return Math.pow(2,Math.floor(Math.log(B)/Math.LN2))}function Vl(B,n,s,u,f){const w=Math.cos,T=Math.sin,I=w(s/2),F=T(s/2),U=w((n+u)/2),G=T((n+u)/2),V=w((n-u)/2),j=T((n-u)/2),Y=w((u-n)/2),re=T((u-n)/2);switch(f){case"XYX":B.set(I*G,F*V,F*j,I*U);break;case"YZY":B.set(F*j,I*G,F*V,I*U);break;case"ZXZ":B.set(F*V,F*j,I*G,I*U);break;case"XZX":B.set(I*G,F*re,F*Y,I*U);break;case"YXY":B.set(F*Y,I*G,F*re,I*U);break;case"ZYZ":B.set(F*re,F*Y,I*G,I*U);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+f)}}function Sa(B,n){switch(n.constructor){case Float32Array:return B;case Uint16Array:return B/65535;case Uint8Array:return B/255;case Int16Array:return Math.max(B/32767,-1);case Int8Array:return Math.max(B/127,-1);default:throw new Error("Invalid component type.")}}function Rr(B,n){switch(n.constructor){case Float32Array:return B;case Uint16Array:return Math.round(B*65535);case Uint8Array:return Math.round(B*255);case Int16Array:return Math.round(B*32767);case Int8Array:return Math.round(B*127);default:throw new Error("Invalid component type.")}}var yd=Object.freeze({__proto__:null,DEG2RAD:xo,RAD2DEG:El,generateUUID:Eo,clamp:Jr,euclideanModulo:sh,mapLinear:tp,inverseLerp:Ad,lerp:_l,damp:np,pingpong:ip,smoothstep:rp,smootherstep:vd,randInt:Ic,randFloat:Rc,randFloatSpread:oh,seededRandom:ah,degToRad:Wo,radToDeg:jo,isPowerOfTwo:Ja,ceilPowerOfTwo:ba,floorPowerOfTwo:Xo,setQuaternionFromProperEuler:Vl,normalize:Rr,denormalize:Sa});class jt{constructor(n=0,s=0){jt.prototype.isVector2=!0,this.x=n,this.y=s}get width(){return this.x}set width(n){this.x=n}get height(){return this.y}set height(n){this.y=n}set(n,s){return this.x=n,this.y=s,this}setScalar(n){return this.x=n,this.y=n,this}setX(n){return this.x=n,this}setY(n){return this.y=n,this}setComponent(n,s){switch(n){case 0:this.x=s;break;case 1:this.y=s;break;default:throw new Error("index is out of range: "+n)}return this}getComponent(n){switch(n){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+n)}}clone(){return new this.constructor(this.x,this.y)}copy(n){return this.x=n.x,this.y=n.y,this}add(n){return this.x+=n.x,this.y+=n.y,this}addScalar(n){return this.x+=n,this.y+=n,this}addVectors(n,s){return this.x=n.x+s.x,this.y=n.y+s.y,this}addScaledVector(n,s){return this.x+=n.x*s,this.y+=n.y*s,this}sub(n){return this.x-=n.x,this.y-=n.y,this}subScalar(n){return this.x-=n,this.y-=n,this}subVectors(n,s){return this.x=n.x-s.x,this.y=n.y-s.y,this}multiply(n){return this.x*=n.x,this.y*=n.y,this}multiplyScalar(n){return this.x*=n,this.y*=n,this}divide(n){return this.x/=n.x,this.y/=n.y,this}divideScalar(n){return this.multiplyScalar(1/n)}applyMatrix3(n){const s=this.x,u=this.y,f=n.elements;return this.x=f[0]*s+f[3]*u+f[6],this.y=f[1]*s+f[4]*u+f[7],this}min(n){return this.x=Math.min(this.x,n.x),this.y=Math.min(this.y,n.y),this}max(n){return this.x=Math.max(this.x,n.x),this.y=Math.max(this.y,n.y),this}clamp(n,s){return this.x=Math.max(n.x,Math.min(s.x,this.x)),this.y=Math.max(n.y,Math.min(s.y,this.y)),this}clampScalar(n,s){return this.x=Math.max(n,Math.min(s,this.x)),this.y=Math.max(n,Math.min(s,this.y)),this}clampLength(n,s){const u=this.length();return this.divideScalar(u||1).multiplyScalar(Math.max(n,Math.min(s,u)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(n){return this.x*n.x+this.y*n.y}cross(n){return this.x*n.y-this.y*n.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(n){return Math.sqrt(this.distanceToSquared(n))}distanceToSquared(n){const s=this.x-n.x,u=this.y-n.y;return s*s+u*u}manhattanDistanceTo(n){return Math.abs(this.x-n.x)+Math.abs(this.y-n.y)}setLength(n){return this.normalize().multiplyScalar(n)}lerp(n,s){return this.x+=(n.x-this.x)*s,this.y+=(n.y-this.y)*s,this}lerpVectors(n,s,u){return this.x=n.x+(s.x-n.x)*u,this.y=n.y+(s.y-n.y)*u,this}equals(n){return n.x===this.x&&n.y===this.y}fromArray(n,s=0){return this.x=n[s],this.y=n[s+1],this}toArray(n=[],s=0){return n[s]=this.x,n[s+1]=this.y,n}fromBufferAttribute(n,s){return this.x=n.getX(s),this.y=n.getY(s),this}rotateAround(n,s){const u=Math.cos(s),f=Math.sin(s),w=this.x-n.x,T=this.y-n.y;return this.x=w*u-T*f+n.x,this.y=w*f+T*u+n.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class kr{constructor(){kr.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(n,s,u,f,w,T,I,F,U){const G=this.elements;return G[0]=n,G[1]=f,G[2]=I,G[3]=s,G[4]=w,G[5]=F,G[6]=u,G[7]=T,G[8]=U,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(n){const s=this.elements,u=n.elements;return s[0]=u[0],s[1]=u[1],s[2]=u[2],s[3]=u[3],s[4]=u[4],s[5]=u[5],s[6]=u[6],s[7]=u[7],s[8]=u[8],this}extractBasis(n,s,u){return n.setFromMatrix3Column(this,0),s.setFromMatrix3Column(this,1),u.setFromMatrix3Column(this,2),this}setFromMatrix4(n){const s=n.elements;return this.set(s[0],s[4],s[8],s[1],s[5],s[9],s[2],s[6],s[10]),this}multiply(n){return this.multiplyMatrices(this,n)}premultiply(n){return this.multiplyMatrices(n,this)}multiplyMatrices(n,s){const u=n.elements,f=s.elements,w=this.elements,T=u[0],I=u[3],F=u[6],U=u[1],G=u[4],V=u[7],j=u[2],Y=u[5],re=u[8],ie=f[0],$=f[3],de=f[6],Ce=f[1],ge=f[4],we=f[7],Le=f[2],Ye=f[5],it=f[8];return w[0]=T*ie+I*Ce+F*Le,w[3]=T*$+I*ge+F*Ye,w[6]=T*de+I*we+F*it,w[1]=U*ie+G*Ce+V*Le,w[4]=U*$+G*ge+V*Ye,w[7]=U*de+G*we+V*it,w[2]=j*ie+Y*Ce+re*Le,w[5]=j*$+Y*ge+re*Ye,w[8]=j*de+Y*we+re*it,this}multiplyScalar(n){const s=this.elements;return s[0]*=n,s[3]*=n,s[6]*=n,s[1]*=n,s[4]*=n,s[7]*=n,s[2]*=n,s[5]*=n,s[8]*=n,this}determinant(){const n=this.elements,s=n[0],u=n[1],f=n[2],w=n[3],T=n[4],I=n[5],F=n[6],U=n[7],G=n[8];return s*T*G-s*I*U-u*w*G+u*I*F+f*w*U-f*T*F}invert(){const n=this.elements,s=n[0],u=n[1],f=n[2],w=n[3],T=n[4],I=n[5],F=n[6],U=n[7],G=n[8],V=G*T-I*U,j=I*F-G*w,Y=U*w-T*F,re=s*V+u*j+f*Y;if(re===0)return this.set(0,0,0,0,0,0,0,0,0);const ie=1/re;return n[0]=V*ie,n[1]=(f*U-G*u)*ie,n[2]=(I*u-f*T)*ie,n[3]=j*ie,n[4]=(G*s-f*F)*ie,n[5]=(f*w-I*s)*ie,n[6]=Y*ie,n[7]=(u*F-U*s)*ie,n[8]=(T*s-u*w)*ie,this}transpose(){let n;const s=this.elements;return n=s[1],s[1]=s[3],s[3]=n,n=s[2],s[2]=s[6],s[6]=n,n=s[5],s[5]=s[7],s[7]=n,this}getNormalMatrix(n){return this.setFromMatrix4(n).invert().transpose()}transposeIntoArray(n){const s=this.elements;return n[0]=s[0],n[1]=s[3],n[2]=s[6],n[3]=s[1],n[4]=s[4],n[5]=s[7],n[6]=s[2],n[7]=s[5],n[8]=s[8],this}setUvTransform(n,s,u,f,w,T,I){const F=Math.cos(w),U=Math.sin(w);return this.set(u*F,u*U,-u*(F*T+U*I)+T+n,-f*U,f*F,-f*(-U*T+F*I)+I+s,0,0,1),this}scale(n,s){return this.premultiply(zr.makeScale(n,s)),this}rotate(n){return this.premultiply(zr.makeRotation(-n)),this}translate(n,s){return this.premultiply(zr.makeTranslation(n,s)),this}makeTranslation(n,s){return this.set(1,0,n,0,1,s,0,0,1),this}makeRotation(n){const s=Math.cos(n),u=Math.sin(n);return this.set(s,-u,0,u,s,0,0,0,1),this}makeScale(n,s){return this.set(n,0,0,0,s,0,0,0,1),this}equals(n){const s=this.elements,u=n.elements;for(let f=0;f<9;f++)if(s[f]!==u[f])return!1;return!0}fromArray(n,s=0){for(let u=0;u<9;u++)this.elements[u]=n[u+s];return this}toArray(n=[],s=0){const u=this.elements;return n[s]=u[0],n[s+1]=u[1],n[s+2]=u[2],n[s+3]=u[3],n[s+4]=u[4],n[s+5]=u[5],n[s+6]=u[6],n[s+7]=u[7],n[s+8]=u[8],n}clone(){return new this.constructor().fromArray(this.elements)}}const zr=new kr;function Bc(B){for(let n=B.length-1;n>=0;--n)if(B[n]>=65535)return!0;return!1}const ha={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Ql(B,n){return new ha[B](n)}function Lc(B){return document.createElementNS("http://www.w3.org/1999/xhtml",B)}function Za(B){return B<.04045?B*.0773993808:Math.pow(B*.9478672986+.0521327014,2.4)}function Dc(B){return B<.0031308?B*12.92:1.055*Math.pow(B,.41666)-.055}const lh={[Wr]:{[Ns]:Za},[Ns]:{[Wr]:Dc}},hs={legacyMode:!0,get workingColorSpace(){return Ns},set workingColorSpace(B){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(B,n,s){if(this.legacyMode||n===s||!n||!s)return B;if(lh[n]&&lh[n][s]!==void 0){const u=lh[n][s];return B.r=u(B.r),B.g=u(B.g),B.b=u(B.b),B}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(B,n){return this.convert(B,this.workingColorSpace,n)},toWorkingColorSpace:function(B,n){return this.convert(B,n,this.workingColorSpace)}},Wl={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ss={r:0,g:0,b:0},co={h:0,s:0,l:0},jl={h:0,s:0,l:0};function ch(B,n,s){return s<0&&(s+=1),s>1&&(s-=1),s<.16666666666666666?B+(n-B)*6*s:s<.5?n:s<.6666666666666666?B+(n-B)*6*(.6666666666666666-s):B}function fu(B,n){return n.r=B.r,n.g=B.g,n.b=B.b,n}class kn{constructor(n,s,u){return this.isColor=!0,this.r=1,this.g=1,this.b=1,s===void 0&&u===void 0?this.set(n):this.setRGB(n,s,u)}set(n){return n&&n.isColor?this.copy(n):typeof n=="number"?this.setHex(n):typeof n=="string"&&this.setStyle(n),this}setScalar(n){return this.r=n,this.g=n,this.b=n,this}setHex(n,s=Wr){return n=Math.floor(n),this.r=(n>>16&255)/255,this.g=(n>>8&255)/255,this.b=(n&255)/255,hs.toWorkingColorSpace(this,s),this}setRGB(n,s,u,f=hs.workingColorSpace){return this.r=n,this.g=s,this.b=u,hs.toWorkingColorSpace(this,f),this}setHSL(n,s,u,f=hs.workingColorSpace){if(n=sh(n,1),s=Jr(s,0,1),u=Jr(u,0,1),s===0)this.r=this.g=this.b=u;else{const w=u<=.5?u*(1+s):u+s-u*s,T=2*u-w;this.r=ch(T,w,n+.3333333333333333),this.g=ch(T,w,n),this.b=ch(T,w,n-.3333333333333333)}return hs.toWorkingColorSpace(this,f),this}setStyle(n,s=Wr){function u(w){w!==void 0&&parseFloat(w)<1&&console.warn("THREE.Color: Alpha component of "+n+" will be ignored.")}let f;if(f=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(n)){let w;const T=f[1],I=f[2];switch(T){case"rgb":case"rgba":if(w=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(I))return this.r=Math.min(255,parseInt(w[1],10))/255,this.g=Math.min(255,parseInt(w[2],10))/255,this.b=Math.min(255,parseInt(w[3],10))/255,hs.toWorkingColorSpace(this,s),u(w[4]),this;if(w=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(I))return this.r=Math.min(100,parseInt(w[1],10))/100,this.g=Math.min(100,parseInt(w[2],10))/100,this.b=Math.min(100,parseInt(w[3],10))/100,hs.toWorkingColorSpace(this,s),u(w[4]),this;break;case"hsl":case"hsla":if(w=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(I)){const F=parseFloat(w[1])/360,U=parseFloat(w[2])/100,G=parseFloat(w[3])/100;return u(w[4]),this.setHSL(F,U,G,s)}break}}else if(f=/^\#([A-Fa-f\d]+)$/.exec(n)){const w=f[1],T=w.length;if(T===3)return this.r=parseInt(w.charAt(0)+w.charAt(0),16)/255,this.g=parseInt(w.charAt(1)+w.charAt(1),16)/255,this.b=parseInt(w.charAt(2)+w.charAt(2),16)/255,hs.toWorkingColorSpace(this,s),this;if(T===6)return this.r=parseInt(w.charAt(0)+w.charAt(1),16)/255,this.g=parseInt(w.charAt(2)+w.charAt(3),16)/255,this.b=parseInt(w.charAt(4)+w.charAt(5),16)/255,hs.toWorkingColorSpace(this,s),this}return n&&n.length>0?this.setColorName(n,s):this}setColorName(n,s=Wr){const u=Wl[n.toLowerCase()];return u!==void 0?this.setHex(u,s):console.warn("THREE.Color: Unknown color "+n),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(n){return this.r=n.r,this.g=n.g,this.b=n.b,this}copySRGBToLinear(n){return this.r=Za(n.r),this.g=Za(n.g),this.b=Za(n.b),this}copyLinearToSRGB(n){return this.r=Dc(n.r),this.g=Dc(n.g),this.b=Dc(n.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(n=Wr){return hs.fromWorkingColorSpace(fu(this,ss),n),Jr(ss.r*255,0,255)<<16^Jr(ss.g*255,0,255)<<8^Jr(ss.b*255,0,255)<<0}getHexString(n=Wr){return("000000"+this.getHex(n).toString(16)).slice(-6)}getHSL(n,s=hs.workingColorSpace){hs.fromWorkingColorSpace(fu(this,ss),s);const u=ss.r,f=ss.g,w=ss.b,T=Math.max(u,f,w),I=Math.min(u,f,w);let F,U;const G=(I+T)/2;if(I===T)F=0,U=0;else{const V=T-I;switch(U=G<=.5?V/(T+I):V/(2-T-I),T){case u:F=(f-w)/V+(f<w?6:0);break;case f:F=(w-u)/V+2;break;case w:F=(u-f)/V+4;break}F/=6}return n.h=F,n.s=U,n.l=G,n}getRGB(n,s=hs.workingColorSpace){return hs.fromWorkingColorSpace(fu(this,ss),s),n.r=ss.r,n.g=ss.g,n.b=ss.b,n}getStyle(n=Wr){return hs.fromWorkingColorSpace(fu(this,ss),n),n!==Wr?`color(${n} ${ss.r} ${ss.g} ${ss.b})`:`rgb(${ss.r*255|0},${ss.g*255|0},${ss.b*255|0})`}offsetHSL(n,s,u){return this.getHSL(co),co.h+=n,co.s+=s,co.l+=u,this.setHSL(co.h,co.s,co.l),this}add(n){return this.r+=n.r,this.g+=n.g,this.b+=n.b,this}addColors(n,s){return this.r=n.r+s.r,this.g=n.g+s.g,this.b=n.b+s.b,this}addScalar(n){return this.r+=n,this.g+=n,this.b+=n,this}sub(n){return this.r=Math.max(0,this.r-n.r),this.g=Math.max(0,this.g-n.g),this.b=Math.max(0,this.b-n.b),this}multiply(n){return this.r*=n.r,this.g*=n.g,this.b*=n.b,this}multiplyScalar(n){return this.r*=n,this.g*=n,this.b*=n,this}lerp(n,s){return this.r+=(n.r-this.r)*s,this.g+=(n.g-this.g)*s,this.b+=(n.b-this.b)*s,this}lerpColors(n,s,u){return this.r=n.r+(s.r-n.r)*u,this.g=n.g+(s.g-n.g)*u,this.b=n.b+(s.b-n.b)*u,this}lerpHSL(n,s){this.getHSL(co),n.getHSL(jl);const u=_l(co.h,jl.h,s),f=_l(co.s,jl.s,s),w=_l(co.l,jl.l,s);return this.setHSL(u,f,w),this}equals(n){return n.r===this.r&&n.g===this.g&&n.b===this.b}fromArray(n,s=0){return this.r=n[s],this.g=n[s+1],this.b=n[s+2],this}toArray(n=[],s=0){return n[s]=this.r,n[s+1]=this.g,n[s+2]=this.b,n}fromBufferAttribute(n,s){return this.r=n.getX(s),this.g=n.getY(s),this.b=n.getZ(s),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}kn.NAMES=Wl;let Xl;class Kl{static getDataURL(n){if(/^data:/i.test(n.src)||typeof HTMLCanvasElement>"u")return n.src;let s;if(n instanceof HTMLCanvasElement)s=n;else{Xl===void 0&&(Xl=Lc("canvas")),Xl.width=n.width,Xl.height=n.height;const u=Xl.getContext("2d");n instanceof ImageData?u.putImageData(n,0,0):u.drawImage(n,0,0,n.width,n.height),s=Xl}return s.width>2048||s.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",n),s.toDataURL("image/jpeg",.6)):s.toDataURL("image/png")}static sRGBToLinear(n){if(typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap){const s=Lc("canvas");s.width=n.width,s.height=n.height;const u=s.getContext("2d");u.drawImage(n,0,0,n.width,n.height);const f=u.getImageData(0,0,n.width,n.height),w=f.data;for(let T=0;T<w.length;T++)w[T]=Za(w[T]/255)*255;return u.putImageData(f,0,0),s}else if(n.data){const s=n.data.slice(0);for(let u=0;u<s.length;u++)s instanceof Uint8Array||s instanceof Uint8ClampedArray?s[u]=Math.floor(Za(s[u]/255)*255):s[u]=Za(s[u]);return{data:s,width:n.width,height:n.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),n}}class Ss{constructor(n=null){this.isSource=!0,this.uuid=Eo(),this.data=n,this.version=0}set needsUpdate(n){n===!0&&this.version++}toJSON(n){const s=n===void 0||typeof n=="string";if(!s&&n.images[this.uuid]!==void 0)return n.images[this.uuid];const u={uuid:this.uuid,url:""},f=this.data;if(f!==null){let w;if(Array.isArray(f)){w=[];for(let T=0,I=f.length;T<I;T++)f[T].isDataTexture?w.push(Yl(f[T].image)):w.push(Yl(f[T]))}else w=Yl(f);u.url=w}return s||(n.images[this.uuid]=u),u}}function Yl(B){return typeof HTMLImageElement<"u"&&B instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&B instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&B instanceof ImageBitmap?Kl.getDataURL(B):B.data?{data:Array.from(B.data),width:B.width,height:B.height,type:B.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Pc=0;class yr extends lo{constructor(n=yr.DEFAULT_IMAGE,s=yr.DEFAULT_MAPPING,u=Oe,f=Oe,w=Te,T=Ht,I=At,F=cn,U=yr.DEFAULT_ANISOTROPY,G=ar){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Pc++}),this.uuid=Eo(),this.name="",this.source=new Ss(n),this.mipmaps=[],this.mapping=s,this.wrapS=u,this.wrapT=f,this.magFilter=w,this.minFilter=T,this.anisotropy=U,this.format=I,this.internalFormat=null,this.type=F,this.offset=new jt(0,0),this.repeat=new jt(1,1),this.center=new jt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new kr,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=G,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(n){this.source.data=n}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(n){return this.name=n.name,this.source=n.source,this.mipmaps=n.mipmaps.slice(0),this.mapping=n.mapping,this.wrapS=n.wrapS,this.wrapT=n.wrapT,this.magFilter=n.magFilter,this.minFilter=n.minFilter,this.anisotropy=n.anisotropy,this.format=n.format,this.internalFormat=n.internalFormat,this.type=n.type,this.offset.copy(n.offset),this.repeat.copy(n.repeat),this.center.copy(n.center),this.rotation=n.rotation,this.matrixAutoUpdate=n.matrixAutoUpdate,this.matrix.copy(n.matrix),this.generateMipmaps=n.generateMipmaps,this.premultiplyAlpha=n.premultiplyAlpha,this.flipY=n.flipY,this.unpackAlignment=n.unpackAlignment,this.encoding=n.encoding,this.userData=JSON.parse(JSON.stringify(n.userData)),this.needsUpdate=!0,this}toJSON(n){const s=n===void 0||typeof n=="string";if(!s&&n.textures[this.uuid]!==void 0)return n.textures[this.uuid];const u={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(n).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return JSON.stringify(this.userData)!=="{}"&&(u.userData=this.userData),s||(n.textures[this.uuid]=u),u}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(n){if(this.mapping!==me)return n;if(n.applyMatrix3(this.matrix),n.x<0||n.x>1)switch(this.wrapS){case fe:n.x=n.x-Math.floor(n.x);break;case Oe:n.x=n.x<0?0:1;break;case $e:Math.abs(Math.floor(n.x)%2)===1?n.x=Math.ceil(n.x)-n.x:n.x=n.x-Math.floor(n.x);break}if(n.y<0||n.y>1)switch(this.wrapT){case fe:n.y=n.y-Math.floor(n.y);break;case Oe:n.y=n.y<0?0:1;break;case $e:Math.abs(Math.floor(n.y)%2)===1?n.y=Math.ceil(n.y)-n.y:n.y=n.y-Math.floor(n.y);break}return this.flipY&&(n.y=1-n.y),n}set needsUpdate(n){n===!0&&(this.version++,this.source.needsUpdate=!0)}}yr.DEFAULT_IMAGE=null,yr.DEFAULT_MAPPING=me,yr.DEFAULT_ANISOTROPY=1;class hr{constructor(n=0,s=0,u=0,f=1){hr.prototype.isVector4=!0,this.x=n,this.y=s,this.z=u,this.w=f}get width(){return this.z}set width(n){this.z=n}get height(){return this.w}set height(n){this.w=n}set(n,s,u,f){return this.x=n,this.y=s,this.z=u,this.w=f,this}setScalar(n){return this.x=n,this.y=n,this.z=n,this.w=n,this}setX(n){return this.x=n,this}setY(n){return this.y=n,this}setZ(n){return this.z=n,this}setW(n){return this.w=n,this}setComponent(n,s){switch(n){case 0:this.x=s;break;case 1:this.y=s;break;case 2:this.z=s;break;case 3:this.w=s;break;default:throw new Error("index is out of range: "+n)}return this}getComponent(n){switch(n){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+n)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(n){return this.x=n.x,this.y=n.y,this.z=n.z,this.w=n.w!==void 0?n.w:1,this}add(n){return this.x+=n.x,this.y+=n.y,this.z+=n.z,this.w+=n.w,this}addScalar(n){return this.x+=n,this.y+=n,this.z+=n,this.w+=n,this}addVectors(n,s){return this.x=n.x+s.x,this.y=n.y+s.y,this.z=n.z+s.z,this.w=n.w+s.w,this}addScaledVector(n,s){return this.x+=n.x*s,this.y+=n.y*s,this.z+=n.z*s,this.w+=n.w*s,this}sub(n){return this.x-=n.x,this.y-=n.y,this.z-=n.z,this.w-=n.w,this}subScalar(n){return this.x-=n,this.y-=n,this.z-=n,this.w-=n,this}subVectors(n,s){return this.x=n.x-s.x,this.y=n.y-s.y,this.z=n.z-s.z,this.w=n.w-s.w,this}multiply(n){return this.x*=n.x,this.y*=n.y,this.z*=n.z,this.w*=n.w,this}multiplyScalar(n){return this.x*=n,this.y*=n,this.z*=n,this.w*=n,this}applyMatrix4(n){const s=this.x,u=this.y,f=this.z,w=this.w,T=n.elements;return this.x=T[0]*s+T[4]*u+T[8]*f+T[12]*w,this.y=T[1]*s+T[5]*u+T[9]*f+T[13]*w,this.z=T[2]*s+T[6]*u+T[10]*f+T[14]*w,this.w=T[3]*s+T[7]*u+T[11]*f+T[15]*w,this}divideScalar(n){return this.multiplyScalar(1/n)}setAxisAngleFromQuaternion(n){this.w=2*Math.acos(n.w);const s=Math.sqrt(1-n.w*n.w);return s<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=n.x/s,this.y=n.y/s,this.z=n.z/s),this}setAxisAngleFromRotationMatrix(n){let s,u,f,w;const F=n.elements,U=F[0],G=F[4],V=F[8],j=F[1],Y=F[5],re=F[9],ie=F[2],$=F[6],de=F[10];if(Math.abs(G-j)<.01&&Math.abs(V-ie)<.01&&Math.abs(re-$)<.01){if(Math.abs(G+j)<.1&&Math.abs(V+ie)<.1&&Math.abs(re+$)<.1&&Math.abs(U+Y+de-3)<.1)return this.set(1,0,0,0),this;s=Math.PI;const ge=(U+1)/2,we=(Y+1)/2,Le=(de+1)/2,Ye=(G+j)/4,it=(V+ie)/4,Me=(re+$)/4;return ge>we&&ge>Le?ge<.01?(u=0,f=.707106781,w=.707106781):(u=Math.sqrt(ge),f=Ye/u,w=it/u):we>Le?we<.01?(u=.707106781,f=0,w=.707106781):(f=Math.sqrt(we),u=Ye/f,w=Me/f):Le<.01?(u=.707106781,f=.707106781,w=0):(w=Math.sqrt(Le),u=it/w,f=Me/w),this.set(u,f,w,s),this}let Ce=Math.sqrt(($-re)*($-re)+(V-ie)*(V-ie)+(j-G)*(j-G));return Math.abs(Ce)<.001&&(Ce=1),this.x=($-re)/Ce,this.y=(V-ie)/Ce,this.z=(j-G)/Ce,this.w=Math.acos((U+Y+de-1)/2),this}min(n){return this.x=Math.min(this.x,n.x),this.y=Math.min(this.y,n.y),this.z=Math.min(this.z,n.z),this.w=Math.min(this.w,n.w),this}max(n){return this.x=Math.max(this.x,n.x),this.y=Math.max(this.y,n.y),this.z=Math.max(this.z,n.z),this.w=Math.max(this.w,n.w),this}clamp(n,s){return this.x=Math.max(n.x,Math.min(s.x,this.x)),this.y=Math.max(n.y,Math.min(s.y,this.y)),this.z=Math.max(n.z,Math.min(s.z,this.z)),this.w=Math.max(n.w,Math.min(s.w,this.w)),this}clampScalar(n,s){return this.x=Math.max(n,Math.min(s,this.x)),this.y=Math.max(n,Math.min(s,this.y)),this.z=Math.max(n,Math.min(s,this.z)),this.w=Math.max(n,Math.min(s,this.w)),this}clampLength(n,s){const u=this.length();return this.divideScalar(u||1).multiplyScalar(Math.max(n,Math.min(s,u)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(n){return this.x*n.x+this.y*n.y+this.z*n.z+this.w*n.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(n){return this.normalize().multiplyScalar(n)}lerp(n,s){return this.x+=(n.x-this.x)*s,this.y+=(n.y-this.y)*s,this.z+=(n.z-this.z)*s,this.w+=(n.w-this.w)*s,this}lerpVectors(n,s,u){return this.x=n.x+(s.x-n.x)*u,this.y=n.y+(s.y-n.y)*u,this.z=n.z+(s.z-n.z)*u,this.w=n.w+(s.w-n.w)*u,this}equals(n){return n.x===this.x&&n.y===this.y&&n.z===this.z&&n.w===this.w}fromArray(n,s=0){return this.x=n[s],this.y=n[s+1],this.z=n[s+2],this.w=n[s+3],this}toArray(n=[],s=0){return n[s]=this.x,n[s+1]=this.y,n[s+2]=this.z,n[s+3]=this.w,n}fromBufferAttribute(n,s){return this.x=n.getX(s),this.y=n.getY(s),this.z=n.getZ(s),this.w=n.getW(s),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Us extends lo{constructor(n=1,s=1,u={}){super(),this.isWebGLRenderTarget=!0,this.width=n,this.height=s,this.depth=1,this.scissor=new hr(0,0,n,s),this.scissorTest=!1,this.viewport=new hr(0,0,n,s);const f={width:n,height:s,depth:1};this.texture=new yr(f,u.mapping,u.wrapS,u.wrapT,u.magFilter,u.minFilter,u.format,u.type,u.anisotropy,u.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=u.generateMipmaps!==void 0?u.generateMipmaps:!1,this.texture.internalFormat=u.internalFormat!==void 0?u.internalFormat:null,this.texture.minFilter=u.minFilter!==void 0?u.minFilter:Te,this.depthBuffer=u.depthBuffer!==void 0?u.depthBuffer:!0,this.stencilBuffer=u.stencilBuffer!==void 0?u.stencilBuffer:!1,this.depthTexture=u.depthTexture!==void 0?u.depthTexture:null,this.samples=u.samples!==void 0?u.samples:0}setSize(n,s,u=1){(this.width!==n||this.height!==s||this.depth!==u)&&(this.width=n,this.height=s,this.depth=u,this.texture.image.width=n,this.texture.image.height=s,this.texture.image.depth=u,this.dispose()),this.viewport.set(0,0,n,s),this.scissor.set(0,0,n,s)}clone(){return new this.constructor().copy(this)}copy(n){this.width=n.width,this.height=n.height,this.depth=n.depth,this.viewport.copy(n.viewport),this.texture=n.texture.clone(),this.texture.isRenderTargetTexture=!0;const s=Object.assign({},n.texture.image);return this.texture.source=new Ss(s),this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,n.depthTexture!==null&&(this.depthTexture=n.depthTexture.clone()),this.samples=n.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Oc extends yr{constructor(n=null,s=1,u=1,f=1){super(null),this.isDataArrayTexture=!0,this.image={data:n,width:s,height:u,depth:f},this.magFilter=le,this.minFilter=le,this.wrapR=Oe,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class xd extends Us{constructor(n=1,s=1,u=1){super(n,s),this.isWebGLArrayRenderTarget=!0,this.depth=u,this.texture=new Oc(null,n,s,u),this.texture.isRenderTargetTexture=!0}}class Gr extends yr{constructor(n=null,s=1,u=1,f=1){super(null),this.isData3DTexture=!0,this.image={data:n,width:s,height:u,depth:f},this.magFilter=le,this.minFilter=le,this.wrapR=Oe,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class uh extends Us{constructor(n=1,s=1,u=1){super(n,s),this.isWebGL3DRenderTarget=!0,this.depth=u,this.texture=new Gr(null,n,s,u),this.texture.isRenderTargetTexture=!0}}class Ed extends Us{constructor(n=1,s=1,u=1,f={}){super(n,s,f),this.isWebGLMultipleRenderTargets=!0;const w=this.texture;this.texture=[];for(let T=0;T<u;T++)this.texture[T]=w.clone(),this.texture[T].isRenderTargetTexture=!0}setSize(n,s,u=1){if(this.width!==n||this.height!==s||this.depth!==u){this.width=n,this.height=s,this.depth=u;for(let f=0,w=this.texture.length;f<w;f++)this.texture[f].image.width=n,this.texture[f].image.height=s,this.texture[f].image.depth=u;this.dispose()}return this.viewport.set(0,0,n,s),this.scissor.set(0,0,n,s),this}copy(n){this.dispose(),this.width=n.width,this.height=n.height,this.depth=n.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,n.depthTexture!==null&&(this.depthTexture=n.depthTexture.clone()),this.texture.length=0;for(let s=0,u=n.texture.length;s<u;s++)this.texture[s]=n.texture[s].clone(),this.texture[s].isRenderTargetTexture=!0;return this}}class zs{constructor(n=0,s=0,u=0,f=1){this.isQuaternion=!0,this._x=n,this._y=s,this._z=u,this._w=f}static slerpFlat(n,s,u,f,w,T,I){let F=u[f+0],U=u[f+1],G=u[f+2],V=u[f+3];const j=w[T+0],Y=w[T+1],re=w[T+2],ie=w[T+3];if(I===0){n[s+0]=F,n[s+1]=U,n[s+2]=G,n[s+3]=V;return}if(I===1){n[s+0]=j,n[s+1]=Y,n[s+2]=re,n[s+3]=ie;return}if(V!==ie||F!==j||U!==Y||G!==re){let $=1-I;const de=F*j+U*Y+G*re+V*ie,Ce=de>=0?1:-1,ge=1-de*de;if(ge>Number.EPSILON){const Le=Math.sqrt(ge),Ye=Math.atan2(Le,de*Ce);$=Math.sin($*Ye)/Le,I=Math.sin(I*Ye)/Le}const we=I*Ce;if(F=F*$+j*we,U=U*$+Y*we,G=G*$+re*we,V=V*$+ie*we,$===1-I){const Le=1/Math.sqrt(F*F+U*U+G*G+V*V);F*=Le,U*=Le,G*=Le,V*=Le}}n[s]=F,n[s+1]=U,n[s+2]=G,n[s+3]=V}static multiplyQuaternionsFlat(n,s,u,f,w,T){const I=u[f],F=u[f+1],U=u[f+2],G=u[f+3],V=w[T],j=w[T+1],Y=w[T+2],re=w[T+3];return n[s]=I*re+G*V+F*Y-U*j,n[s+1]=F*re+G*j+U*V-I*Y,n[s+2]=U*re+G*Y+I*j-F*V,n[s+3]=G*re-I*V-F*j-U*Y,n}get x(){return this._x}set x(n){this._x=n,this._onChangeCallback()}get y(){return this._y}set y(n){this._y=n,this._onChangeCallback()}get z(){return this._z}set z(n){this._z=n,this._onChangeCallback()}get w(){return this._w}set w(n){this._w=n,this._onChangeCallback()}set(n,s,u,f){return this._x=n,this._y=s,this._z=u,this._w=f,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(n){return this._x=n.x,this._y=n.y,this._z=n.z,this._w=n.w,this._onChangeCallback(),this}setFromEuler(n,s){const u=n._x,f=n._y,w=n._z,T=n._order,I=Math.cos,F=Math.sin,U=I(u/2),G=I(f/2),V=I(w/2),j=F(u/2),Y=F(f/2),re=F(w/2);switch(T){case"XYZ":this._x=j*G*V+U*Y*re,this._y=U*Y*V-j*G*re,this._z=U*G*re+j*Y*V,this._w=U*G*V-j*Y*re;break;case"YXZ":this._x=j*G*V+U*Y*re,this._y=U*Y*V-j*G*re,this._z=U*G*re-j*Y*V,this._w=U*G*V+j*Y*re;break;case"ZXY":this._x=j*G*V-U*Y*re,this._y=U*Y*V+j*G*re,this._z=U*G*re+j*Y*V,this._w=U*G*V-j*Y*re;break;case"ZYX":this._x=j*G*V-U*Y*re,this._y=U*Y*V+j*G*re,this._z=U*G*re-j*Y*V,this._w=U*G*V+j*Y*re;break;case"YZX":this._x=j*G*V+U*Y*re,this._y=U*Y*V+j*G*re,this._z=U*G*re-j*Y*V,this._w=U*G*V-j*Y*re;break;case"XZY":this._x=j*G*V-U*Y*re,this._y=U*Y*V-j*G*re,this._z=U*G*re+j*Y*V,this._w=U*G*V+j*Y*re;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+T)}return s!==!1&&this._onChangeCallback(),this}setFromAxisAngle(n,s){const u=s/2,f=Math.sin(u);return this._x=n.x*f,this._y=n.y*f,this._z=n.z*f,this._w=Math.cos(u),this._onChangeCallback(),this}setFromRotationMatrix(n){const s=n.elements,u=s[0],f=s[4],w=s[8],T=s[1],I=s[5],F=s[9],U=s[2],G=s[6],V=s[10],j=u+I+V;if(j>0){const Y=.5/Math.sqrt(j+1);this._w=.25/Y,this._x=(G-F)*Y,this._y=(w-U)*Y,this._z=(T-f)*Y}else if(u>I&&u>V){const Y=2*Math.sqrt(1+u-I-V);this._w=(G-F)/Y,this._x=.25*Y,this._y=(f+T)/Y,this._z=(w+U)/Y}else if(I>V){const Y=2*Math.sqrt(1+I-u-V);this._w=(w-U)/Y,this._x=(f+T)/Y,this._y=.25*Y,this._z=(F+G)/Y}else{const Y=2*Math.sqrt(1+V-u-I);this._w=(T-f)/Y,this._x=(w+U)/Y,this._y=(F+G)/Y,this._z=.25*Y}return this._onChangeCallback(),this}setFromUnitVectors(n,s){let u=n.dot(s)+1;return u<Number.EPSILON?(u=0,Math.abs(n.x)>Math.abs(n.z)?(this._x=-n.y,this._y=n.x,this._z=0,this._w=u):(this._x=0,this._y=-n.z,this._z=n.y,this._w=u)):(this._x=n.y*s.z-n.z*s.y,this._y=n.z*s.x-n.x*s.z,this._z=n.x*s.y-n.y*s.x,this._w=u),this.normalize()}angleTo(n){return 2*Math.acos(Math.abs(Jr(this.dot(n),-1,1)))}rotateTowards(n,s){const u=this.angleTo(n);if(u===0)return this;const f=Math.min(1,s/u);return this.slerp(n,f),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(n){return this._x*n._x+this._y*n._y+this._z*n._z+this._w*n._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let n=this.length();return n===0?(this._x=0,this._y=0,this._z=0,this._w=1):(n=1/n,this._x=this._x*n,this._y=this._y*n,this._z=this._z*n,this._w=this._w*n),this._onChangeCallback(),this}multiply(n){return this.multiplyQuaternions(this,n)}premultiply(n){return this.multiplyQuaternions(n,this)}multiplyQuaternions(n,s){const u=n._x,f=n._y,w=n._z,T=n._w,I=s._x,F=s._y,U=s._z,G=s._w;return this._x=u*G+T*I+f*U-w*F,this._y=f*G+T*F+w*I-u*U,this._z=w*G+T*U+u*F-f*I,this._w=T*G-u*I-f*F-w*U,this._onChangeCallback(),this}slerp(n,s){if(s===0)return this;if(s===1)return this.copy(n);const u=this._x,f=this._y,w=this._z,T=this._w;let I=T*n._w+u*n._x+f*n._y+w*n._z;if(I<0?(this._w=-n._w,this._x=-n._x,this._y=-n._y,this._z=-n._z,I=-I):this.copy(n),I>=1)return this._w=T,this._x=u,this._y=f,this._z=w,this;const F=1-I*I;if(F<=Number.EPSILON){const Y=1-s;return this._w=Y*T+s*this._w,this._x=Y*u+s*this._x,this._y=Y*f+s*this._y,this._z=Y*w+s*this._z,this.normalize(),this._onChangeCallback(),this}const U=Math.sqrt(F),G=Math.atan2(U,I),V=Math.sin((1-s)*G)/U,j=Math.sin(s*G)/U;return this._w=T*V+this._w*j,this._x=u*V+this._x*j,this._y=f*V+this._y*j,this._z=w*V+this._z*j,this._onChangeCallback(),this}slerpQuaternions(n,s,u){return this.copy(n).slerp(s,u)}random(){const n=Math.random(),s=Math.sqrt(1-n),u=Math.sqrt(n),f=2*Math.PI*Math.random(),w=2*Math.PI*Math.random();return this.set(s*Math.cos(f),u*Math.sin(w),u*Math.cos(w),s*Math.sin(f))}equals(n){return n._x===this._x&&n._y===this._y&&n._z===this._z&&n._w===this._w}fromArray(n,s=0){return this._x=n[s],this._y=n[s+1],this._z=n[s+2],this._w=n[s+3],this._onChangeCallback(),this}toArray(n=[],s=0){return n[s]=this._x,n[s+1]=this._y,n[s+2]=this._z,n[s+3]=this._w,n}fromBufferAttribute(n,s){return this._x=n.getX(s),this._y=n.getY(s),this._z=n.getZ(s),this._w=n.getW(s),this}_onChange(n){return this._onChangeCallback=n,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Qe{constructor(n=0,s=0,u=0){Qe.prototype.isVector3=!0,this.x=n,this.y=s,this.z=u}set(n,s,u){return u===void 0&&(u=this.z),this.x=n,this.y=s,this.z=u,this}setScalar(n){return this.x=n,this.y=n,this.z=n,this}setX(n){return this.x=n,this}setY(n){return this.y=n,this}setZ(n){return this.z=n,this}setComponent(n,s){switch(n){case 0:this.x=s;break;case 1:this.y=s;break;case 2:this.z=s;break;default:throw new Error("index is out of range: "+n)}return this}getComponent(n){switch(n){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+n)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(n){return this.x=n.x,this.y=n.y,this.z=n.z,this}add(n){return this.x+=n.x,this.y+=n.y,this.z+=n.z,this}addScalar(n){return this.x+=n,this.y+=n,this.z+=n,this}addVectors(n,s){return this.x=n.x+s.x,this.y=n.y+s.y,this.z=n.z+s.z,this}addScaledVector(n,s){return this.x+=n.x*s,this.y+=n.y*s,this.z+=n.z*s,this}sub(n){return this.x-=n.x,this.y-=n.y,this.z-=n.z,this}subScalar(n){return this.x-=n,this.y-=n,this.z-=n,this}subVectors(n,s){return this.x=n.x-s.x,this.y=n.y-s.y,this.z=n.z-s.z,this}multiply(n){return this.x*=n.x,this.y*=n.y,this.z*=n.z,this}multiplyScalar(n){return this.x*=n,this.y*=n,this.z*=n,this}multiplyVectors(n,s){return this.x=n.x*s.x,this.y=n.y*s.y,this.z=n.z*s.z,this}applyEuler(n){return this.applyQuaternion(ql.setFromEuler(n))}applyAxisAngle(n,s){return this.applyQuaternion(ql.setFromAxisAngle(n,s))}applyMatrix3(n){const s=this.x,u=this.y,f=this.z,w=n.elements;return this.x=w[0]*s+w[3]*u+w[6]*f,this.y=w[1]*s+w[4]*u+w[7]*f,this.z=w[2]*s+w[5]*u+w[8]*f,this}applyNormalMatrix(n){return this.applyMatrix3(n).normalize()}applyMatrix4(n){const s=this.x,u=this.y,f=this.z,w=n.elements,T=1/(w[3]*s+w[7]*u+w[11]*f+w[15]);return this.x=(w[0]*s+w[4]*u+w[8]*f+w[12])*T,this.y=(w[1]*s+w[5]*u+w[9]*f+w[13])*T,this.z=(w[2]*s+w[6]*u+w[10]*f+w[14])*T,this}applyQuaternion(n){const s=this.x,u=this.y,f=this.z,w=n.x,T=n.y,I=n.z,F=n.w,U=F*s+T*f-I*u,G=F*u+I*s-w*f,V=F*f+w*u-T*s,j=-w*s-T*u-I*f;return this.x=U*F+j*-w+G*-I-V*-T,this.y=G*F+j*-T+V*-w-U*-I,this.z=V*F+j*-I+U*-T-G*-w,this}project(n){return this.applyMatrix4(n.matrixWorldInverse).applyMatrix4(n.projectionMatrix)}unproject(n){return this.applyMatrix4(n.projectionMatrixInverse).applyMatrix4(n.matrixWorld)}transformDirection(n){const s=this.x,u=this.y,f=this.z,w=n.elements;return this.x=w[0]*s+w[4]*u+w[8]*f,this.y=w[1]*s+w[5]*u+w[9]*f,this.z=w[2]*s+w[6]*u+w[10]*f,this.normalize()}divide(n){return this.x/=n.x,this.y/=n.y,this.z/=n.z,this}divideScalar(n){return this.multiplyScalar(1/n)}min(n){return this.x=Math.min(this.x,n.x),this.y=Math.min(this.y,n.y),this.z=Math.min(this.z,n.z),this}max(n){return this.x=Math.max(this.x,n.x),this.y=Math.max(this.y,n.y),this.z=Math.max(this.z,n.z),this}clamp(n,s){return this.x=Math.max(n.x,Math.min(s.x,this.x)),this.y=Math.max(n.y,Math.min(s.y,this.y)),this.z=Math.max(n.z,Math.min(s.z,this.z)),this}clampScalar(n,s){return this.x=Math.max(n,Math.min(s,this.x)),this.y=Math.max(n,Math.min(s,this.y)),this.z=Math.max(n,Math.min(s,this.z)),this}clampLength(n,s){const u=this.length();return this.divideScalar(u||1).multiplyScalar(Math.max(n,Math.min(s,u)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(n){return this.x*n.x+this.y*n.y+this.z*n.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(n){return this.normalize().multiplyScalar(n)}lerp(n,s){return this.x+=(n.x-this.x)*s,this.y+=(n.y-this.y)*s,this.z+=(n.z-this.z)*s,this}lerpVectors(n,s,u){return this.x=n.x+(s.x-n.x)*u,this.y=n.y+(s.y-n.y)*u,this.z=n.z+(s.z-n.z)*u,this}cross(n){return this.crossVectors(this,n)}crossVectors(n,s){const u=n.x,f=n.y,w=n.z,T=s.x,I=s.y,F=s.z;return this.x=f*F-w*I,this.y=w*T-u*F,this.z=u*I-f*T,this}projectOnVector(n){const s=n.lengthSq();if(s===0)return this.set(0,0,0);const u=n.dot(this)/s;return this.copy(n).multiplyScalar(u)}projectOnPlane(n){return _o.copy(this).projectOnVector(n),this.sub(_o)}reflect(n){return this.sub(_o.copy(n).multiplyScalar(2*this.dot(n)))}angleTo(n){const s=Math.sqrt(this.lengthSq()*n.lengthSq());if(s===0)return Math.PI/2;const u=this.dot(n)/s;return Math.acos(Jr(u,-1,1))}distanceTo(n){return Math.sqrt(this.distanceToSquared(n))}distanceToSquared(n){const s=this.x-n.x,u=this.y-n.y,f=this.z-n.z;return s*s+u*u+f*f}manhattanDistanceTo(n){return Math.abs(this.x-n.x)+Math.abs(this.y-n.y)+Math.abs(this.z-n.z)}setFromSpherical(n){return this.setFromSphericalCoords(n.radius,n.phi,n.theta)}setFromSphericalCoords(n,s,u){const f=Math.sin(s)*n;return this.x=f*Math.sin(u),this.y=Math.cos(s)*n,this.z=f*Math.cos(u),this}setFromCylindrical(n){return this.setFromCylindricalCoords(n.radius,n.theta,n.y)}setFromCylindricalCoords(n,s,u){return this.x=n*Math.sin(s),this.y=u,this.z=n*Math.cos(s),this}setFromMatrixPosition(n){const s=n.elements;return this.x=s[12],this.y=s[13],this.z=s[14],this}setFromMatrixScale(n){const s=this.setFromMatrixColumn(n,0).length(),u=this.setFromMatrixColumn(n,1).length(),f=this.setFromMatrixColumn(n,2).length();return this.x=s,this.y=u,this.z=f,this}setFromMatrixColumn(n,s){return this.fromArray(n.elements,s*4)}setFromMatrix3Column(n,s){return this.fromArray(n.elements,s*3)}setFromEuler(n){return this.x=n._x,this.y=n._y,this.z=n._z,this}equals(n){return n.x===this.x&&n.y===this.y&&n.z===this.z}fromArray(n,s=0){return this.x=n[s],this.y=n[s+1],this.z=n[s+2],this}toArray(n=[],s=0){return n[s]=this.x,n[s+1]=this.y,n[s+2]=this.z,n}fromBufferAttribute(n,s){return this.x=n.getX(s),this.y=n.getY(s),this.z=n.getZ(s),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const n=(Math.random()-.5)*2,s=Math.random()*Math.PI*2,u=Math.sqrt(1-n**2);return this.x=u*Math.cos(s),this.y=u*Math.sin(s),this.z=n,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const _o=new Qe,ql=new zs;class Or{constructor(n=new Qe(1/0,1/0,1/0),s=new Qe(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=n,this.max=s}set(n,s){return this.min.copy(n),this.max.copy(s),this}setFromArray(n){let s=1/0,u=1/0,f=1/0,w=-1/0,T=-1/0,I=-1/0;for(let F=0,U=n.length;F<U;F+=3){const G=n[F],V=n[F+1],j=n[F+2];G<s&&(s=G),V<u&&(u=V),j<f&&(f=j),G>w&&(w=G),V>T&&(T=V),j>I&&(I=j)}return this.min.set(s,u,f),this.max.set(w,T,I),this}setFromBufferAttribute(n){let s=1/0,u=1/0,f=1/0,w=-1/0,T=-1/0,I=-1/0;for(let F=0,U=n.count;F<U;F++){const G=n.getX(F),V=n.getY(F),j=n.getZ(F);G<s&&(s=G),V<u&&(u=V),j<f&&(f=j),G>w&&(w=G),V>T&&(T=V),j>I&&(I=j)}return this.min.set(s,u,f),this.max.set(w,T,I),this}setFromPoints(n){this.makeEmpty();for(let s=0,u=n.length;s<u;s++)this.expandByPoint(n[s]);return this}setFromCenterAndSize(n,s){const u=$r.copy(s).multiplyScalar(.5);return this.min.copy(n).sub(u),this.max.copy(n).add(u),this}setFromObject(n,s=!1){return this.makeEmpty(),this.expandByObject(n,s)}clone(){return new this.constructor().copy(this)}copy(n){return this.min.copy(n.min),this.max.copy(n.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(n){return this.isEmpty()?n.set(0,0,0):n.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(n){return this.isEmpty()?n.set(0,0,0):n.subVectors(this.max,this.min)}expandByPoint(n){return this.min.min(n),this.max.max(n),this}expandByVector(n){return this.min.sub(n),this.max.add(n),this}expandByScalar(n){return this.min.addScalar(-n),this.max.addScalar(n),this}expandByObject(n,s=!1){n.updateWorldMatrix(!1,!1);const u=n.geometry;if(u!==void 0)if(s&&u.attributes!=null&&u.attributes.position!==void 0){const w=u.attributes.position;for(let T=0,I=w.count;T<I;T++)$r.fromBufferAttribute(w,T).applyMatrix4(n.matrixWorld),this.expandByPoint($r)}else u.boundingBox===null&&u.computeBoundingBox(),Fc.copy(u.boundingBox),Fc.applyMatrix4(n.matrixWorld),this.union(Fc);const f=n.children;for(let w=0,T=f.length;w<T;w++)this.expandByObject(f[w],s);return this}containsPoint(n){return!(n.x<this.min.x||n.x>this.max.x||n.y<this.min.y||n.y>this.max.y||n.z<this.min.z||n.z>this.max.z)}containsBox(n){return this.min.x<=n.min.x&&n.max.x<=this.max.x&&this.min.y<=n.min.y&&n.max.y<=this.max.y&&this.min.z<=n.min.z&&n.max.z<=this.max.z}getParameter(n,s){return s.set((n.x-this.min.x)/(this.max.x-this.min.x),(n.y-this.min.y)/(this.max.y-this.min.y),(n.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(n){return!(n.max.x<this.min.x||n.min.x>this.max.x||n.max.y<this.min.y||n.min.y>this.max.y||n.max.z<this.min.z||n.min.z>this.max.z)}intersectsSphere(n){return this.clampPoint(n.center,$r),$r.distanceToSquared(n.center)<=n.radius*n.radius}intersectsPlane(n){let s,u;return n.normal.x>0?(s=n.normal.x*this.min.x,u=n.normal.x*this.max.x):(s=n.normal.x*this.max.x,u=n.normal.x*this.min.x),n.normal.y>0?(s+=n.normal.y*this.min.y,u+=n.normal.y*this.max.y):(s+=n.normal.y*this.max.y,u+=n.normal.y*this.min.y),n.normal.z>0?(s+=n.normal.z*this.min.z,u+=n.normal.z*this.max.z):(s+=n.normal.z*this.max.z,u+=n.normal.z*this.min.z),s<=-n.constant&&u>=-n.constant}intersectsTriangle(n){if(this.isEmpty())return!1;this.getCenter(wl),Ks.subVectors(this.max,wl),Ta.subVectors(n.a,wl),Ia.subVectors(n.b,wl),Nc.subVectors(n.c,wl),ts.subVectors(Ia,Ta),Ra.subVectors(Nc,Ia),$a.subVectors(Ta,Nc);let s=[0,-ts.z,ts.y,0,-Ra.z,Ra.y,0,-$a.z,$a.y,ts.z,0,-ts.x,Ra.z,0,-Ra.x,$a.z,0,-$a.x,-ts.y,ts.x,0,-Ra.y,Ra.x,0,-$a.y,$a.x,0];return!Jl(s,Ta,Ia,Nc,Ks)||(s=[1,0,0,0,1,0,0,0,1],!Jl(s,Ta,Ia,Nc,Ks))?!1:(wo.crossVectors(ts,Ra),s=[wo.x,wo.y,wo.z],Jl(s,Ta,Ia,Nc,Ks))}clampPoint(n,s){return s.copy(n).clamp(this.min,this.max)}distanceToPoint(n){return $r.copy(n).clamp(this.min,this.max).sub(n).length()}getBoundingSphere(n){return this.getCenter(n.center),n.radius=this.getSize($r).length()*.5,n}intersect(n){return this.min.max(n.min),this.max.min(n.max),this.isEmpty()&&this.makeEmpty(),this}union(n){return this.min.min(n.min),this.max.max(n.max),this}applyMatrix4(n){return this.isEmpty()?this:(Zr[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(n),Zr[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(n),Zr[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(n),Zr[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(n),Zr[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(n),Zr[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(n),Zr[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(n),Zr[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(n),this.setFromPoints(Zr),this)}translate(n){return this.min.add(n),this.max.add(n),this}equals(n){return n.min.equals(this.min)&&n.max.equals(this.max)}}const Zr=[new Qe,new Qe,new Qe,new Qe,new Qe,new Qe,new Qe,new Qe],$r=new Qe,Fc=new Or,Ta=new Qe,Ia=new Qe,Nc=new Qe,ts=new Qe,Ra=new Qe,$a=new Qe,wl=new Qe,Ks=new Qe,wo=new Qe,Br=new Qe;function Jl(B,n,s,u,f){for(let w=0,T=B.length-3;w<=T;w+=3){Br.fromArray(B,w);const I=f.x*Math.abs(Br.x)+f.y*Math.abs(Br.y)+f.z*Math.abs(Br.z),F=n.dot(Br),U=s.dot(Br),G=u.dot(Br);if(Math.max(-Math.max(F,U,G),Math.min(F,U,G))>I)return!1}return!0}const pu=new Or,el=new Qe,hh=new Qe;class Ba{constructor(n=new Qe,s=-1){this.center=n,this.radius=s}set(n,s){return this.center.copy(n),this.radius=s,this}setFromPoints(n,s){const u=this.center;s!==void 0?u.copy(s):pu.setFromPoints(n).getCenter(u);let f=0;for(let w=0,T=n.length;w<T;w++)f=Math.max(f,u.distanceToSquared(n[w]));return this.radius=Math.sqrt(f),this}copy(n){return this.center.copy(n.center),this.radius=n.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(n){return n.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(n){return n.distanceTo(this.center)-this.radius}intersectsSphere(n){const s=this.radius+n.radius;return n.center.distanceToSquared(this.center)<=s*s}intersectsBox(n){return n.intersectsSphere(this)}intersectsPlane(n){return Math.abs(n.distanceToPoint(this.center))<=this.radius}clampPoint(n,s){const u=this.center.distanceToSquared(n);return s.copy(n),u>this.radius*this.radius&&(s.sub(this.center).normalize(),s.multiplyScalar(this.radius).add(this.center)),s}getBoundingBox(n){return this.isEmpty()?(n.makeEmpty(),n):(n.set(this.center,this.center),n.expandByScalar(this.radius),n)}applyMatrix4(n){return this.center.applyMatrix4(n),this.radius=this.radius*n.getMaxScaleOnAxis(),this}translate(n){return this.center.add(n),this}expandByPoint(n){if(this.isEmpty())return this.center.copy(n),this.radius=0,this;el.subVectors(n,this.center);const s=el.lengthSq();if(s>this.radius*this.radius){const u=Math.sqrt(s),f=(u-this.radius)*.5;this.center.addScaledVector(el,f/u),this.radius+=f}return this}union(n){return n.isEmpty()?this:this.isEmpty()?(this.copy(n),this):(this.center.equals(n.center)===!0?this.radius=Math.max(this.radius,n.radius):(hh.subVectors(n.center,this.center).setLength(n.radius),this.expandByPoint(el.copy(n.center).add(hh)),this.expandByPoint(el.copy(n.center).sub(hh))),this)}equals(n){return n.center.equals(this.center)&&n.radius===this.radius}clone(){return new this.constructor().copy(this)}}const La=new Qe,dh=new Qe,Qn=new Qe,wi=new Qe,Qi=new Qe,ds=new Qe,$i=new Qe;class Ys{constructor(n=new Qe,s=new Qe(0,0,-1)){this.origin=n,this.direction=s}set(n,s){return this.origin.copy(n),this.direction.copy(s),this}copy(n){return this.origin.copy(n.origin),this.direction.copy(n.direction),this}at(n,s){return s.copy(this.direction).multiplyScalar(n).add(this.origin)}lookAt(n){return this.direction.copy(n).sub(this.origin).normalize(),this}recast(n){return this.origin.copy(this.at(n,La)),this}closestPointToPoint(n,s){s.subVectors(n,this.origin);const u=s.dot(this.direction);return u<0?s.copy(this.origin):s.copy(this.direction).multiplyScalar(u).add(this.origin)}distanceToPoint(n){return Math.sqrt(this.distanceSqToPoint(n))}distanceSqToPoint(n){const s=La.subVectors(n,this.origin).dot(this.direction);return s<0?this.origin.distanceToSquared(n):(La.copy(this.direction).multiplyScalar(s).add(this.origin),La.distanceToSquared(n))}distanceSqToSegment(n,s,u,f){dh.copy(n).add(s).multiplyScalar(.5),Qn.copy(s).sub(n).normalize(),wi.copy(this.origin).sub(dh);const w=n.distanceTo(s)*.5,T=-this.direction.dot(Qn),I=wi.dot(this.direction),F=-wi.dot(Qn),U=wi.lengthSq(),G=Math.abs(1-T*T);let V,j,Y,re;if(G>0)if(V=T*F-I,j=T*I-F,re=w*G,V>=0)if(j>=-re)if(j<=re){const ie=1/G;V*=ie,j*=ie,Y=V*(V+T*j+2*I)+j*(T*V+j+2*F)+U}else j=w,V=Math.max(0,-(T*j+I)),Y=-V*V+j*(j+2*F)+U;else j=-w,V=Math.max(0,-(T*j+I)),Y=-V*V+j*(j+2*F)+U;else j<=-re?(V=Math.max(0,-(-T*w+I)),j=V>0?-w:Math.min(Math.max(-w,-F),w),Y=-V*V+j*(j+2*F)+U):j<=re?(V=0,j=Math.min(Math.max(-w,-F),w),Y=j*(j+2*F)+U):(V=Math.max(0,-(T*w+I)),j=V>0?w:Math.min(Math.max(-w,-F),w),Y=-V*V+j*(j+2*F)+U);else j=T>0?-w:w,V=Math.max(0,-(T*j+I)),Y=-V*V+j*(j+2*F)+U;return u&&u.copy(this.direction).multiplyScalar(V).add(this.origin),f&&f.copy(Qn).multiplyScalar(j).add(dh),Y}intersectSphere(n,s){La.subVectors(n.center,this.origin);const u=La.dot(this.direction),f=La.dot(La)-u*u,w=n.radius*n.radius;if(f>w)return null;const T=Math.sqrt(w-f),I=u-T,F=u+T;return I<0&&F<0?null:I<0?this.at(F,s):this.at(I,s)}intersectsSphere(n){return this.distanceSqToPoint(n.center)<=n.radius*n.radius}distanceToPlane(n){const s=n.normal.dot(this.direction);if(s===0)return n.distanceToPoint(this.origin)===0?0:null;const u=-(this.origin.dot(n.normal)+n.constant)/s;return u>=0?u:null}intersectPlane(n,s){const u=this.distanceToPlane(n);return u===null?null:this.at(u,s)}intersectsPlane(n){const s=n.distanceToPoint(this.origin);return s===0||n.normal.dot(this.direction)*s<0}intersectBox(n,s){let u,f,w,T,I,F;const U=1/this.direction.x,G=1/this.direction.y,V=1/this.direction.z,j=this.origin;return U>=0?(u=(n.min.x-j.x)*U,f=(n.max.x-j.x)*U):(u=(n.max.x-j.x)*U,f=(n.min.x-j.x)*U),G>=0?(w=(n.min.y-j.y)*G,T=(n.max.y-j.y)*G):(w=(n.max.y-j.y)*G,T=(n.min.y-j.y)*G),u>T||w>f||((w>u||isNaN(u))&&(u=w),(T<f||isNaN(f))&&(f=T),V>=0?(I=(n.min.z-j.z)*V,F=(n.max.z-j.z)*V):(I=(n.max.z-j.z)*V,F=(n.min.z-j.z)*V),u>F||I>f)||((I>u||u!==u)&&(u=I),(F<f||f!==f)&&(f=F),f<0)?null:this.at(u>=0?u:f,s)}intersectsBox(n){return this.intersectBox(n,La)!==null}intersectTriangle(n,s,u,f,w){Qi.subVectors(s,n),ds.subVectors(u,n),$i.crossVectors(Qi,ds);let T=this.direction.dot($i),I;if(T>0){if(f)return null;I=1}else if(T<0)I=-1,T=-T;else return null;wi.subVectors(this.origin,n);const F=I*this.direction.dot(ds.crossVectors(wi,ds));if(F<0)return null;const U=I*this.direction.dot(Qi.cross(wi));if(U<0||F+U>T)return null;const G=-I*wi.dot($i);return G<0?null:this.at(G/T,w)}applyMatrix4(n){return this.origin.applyMatrix4(n),this.direction.transformDirection(n),this}equals(n){return n.origin.equals(this.origin)&&n.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Jn{constructor(){Jn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(n,s,u,f,w,T,I,F,U,G,V,j,Y,re,ie,$){const de=this.elements;return de[0]=n,de[4]=s,de[8]=u,de[12]=f,de[1]=w,de[5]=T,de[9]=I,de[13]=F,de[2]=U,de[6]=G,de[10]=V,de[14]=j,de[3]=Y,de[7]=re,de[11]=ie,de[15]=$,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Jn().fromArray(this.elements)}copy(n){const s=this.elements,u=n.elements;return s[0]=u[0],s[1]=u[1],s[2]=u[2],s[3]=u[3],s[4]=u[4],s[5]=u[5],s[6]=u[6],s[7]=u[7],s[8]=u[8],s[9]=u[9],s[10]=u[10],s[11]=u[11],s[12]=u[12],s[13]=u[13],s[14]=u[14],s[15]=u[15],this}copyPosition(n){const s=this.elements,u=n.elements;return s[12]=u[12],s[13]=u[13],s[14]=u[14],this}setFromMatrix3(n){const s=n.elements;return this.set(s[0],s[3],s[6],0,s[1],s[4],s[7],0,s[2],s[5],s[8],0,0,0,0,1),this}extractBasis(n,s,u){return n.setFromMatrixColumn(this,0),s.setFromMatrixColumn(this,1),u.setFromMatrixColumn(this,2),this}makeBasis(n,s,u){return this.set(n.x,s.x,u.x,0,n.y,s.y,u.y,0,n.z,s.z,u.z,0,0,0,0,1),this}extractRotation(n){const s=this.elements,u=n.elements,f=1/qs.setFromMatrixColumn(n,0).length(),w=1/qs.setFromMatrixColumn(n,1).length(),T=1/qs.setFromMatrixColumn(n,2).length();return s[0]=u[0]*f,s[1]=u[1]*f,s[2]=u[2]*f,s[3]=0,s[4]=u[4]*w,s[5]=u[5]*w,s[6]=u[6]*w,s[7]=0,s[8]=u[8]*T,s[9]=u[9]*T,s[10]=u[10]*T,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,this}makeRotationFromEuler(n){const s=this.elements,u=n.x,f=n.y,w=n.z,T=Math.cos(u),I=Math.sin(u),F=Math.cos(f),U=Math.sin(f),G=Math.cos(w),V=Math.sin(w);if(n.order==="XYZ"){const j=T*G,Y=T*V,re=I*G,ie=I*V;s[0]=F*G,s[4]=-F*V,s[8]=U,s[1]=Y+re*U,s[5]=j-ie*U,s[9]=-I*F,s[2]=ie-j*U,s[6]=re+Y*U,s[10]=T*F}else if(n.order==="YXZ"){const j=F*G,Y=F*V,re=U*G,ie=U*V;s[0]=j+ie*I,s[4]=re*I-Y,s[8]=T*U,s[1]=T*V,s[5]=T*G,s[9]=-I,s[2]=Y*I-re,s[6]=ie+j*I,s[10]=T*F}else if(n.order==="ZXY"){const j=F*G,Y=F*V,re=U*G,ie=U*V;s[0]=j-ie*I,s[4]=-T*V,s[8]=re+Y*I,s[1]=Y+re*I,s[5]=T*G,s[9]=ie-j*I,s[2]=-T*U,s[6]=I,s[10]=T*F}else if(n.order==="ZYX"){const j=T*G,Y=T*V,re=I*G,ie=I*V;s[0]=F*G,s[4]=re*U-Y,s[8]=j*U+ie,s[1]=F*V,s[5]=ie*U+j,s[9]=Y*U-re,s[2]=-U,s[6]=I*F,s[10]=T*F}else if(n.order==="YZX"){const j=T*F,Y=T*U,re=I*F,ie=I*U;s[0]=F*G,s[4]=ie-j*V,s[8]=re*V+Y,s[1]=V,s[5]=T*G,s[9]=-I*G,s[2]=-U*G,s[6]=Y*V+re,s[10]=j-ie*V}else if(n.order==="XZY"){const j=T*F,Y=T*U,re=I*F,ie=I*U;s[0]=F*G,s[4]=-V,s[8]=U*G,s[1]=j*V+ie,s[5]=T*G,s[9]=Y*V-re,s[2]=re*V-Y,s[6]=I*G,s[10]=ie*V+j}return s[3]=0,s[7]=0,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,this}makeRotationFromQuaternion(n){return this.compose(mu,n,kc)}lookAt(n,s,u){const f=this.elements;return Bi.subVectors(n,s),Bi.lengthSq()===0&&(Bi.z=1),Bi.normalize(),uo.crossVectors(u,Bi),uo.lengthSq()===0&&(Math.abs(u.z)===1?Bi.x+=1e-4:Bi.z+=1e-4,Bi.normalize(),uo.crossVectors(u,Bi)),uo.normalize(),Js.crossVectors(Bi,uo),f[0]=uo.x,f[4]=Js.x,f[8]=Bi.x,f[1]=uo.y,f[5]=Js.y,f[9]=Bi.y,f[2]=uo.z,f[6]=Js.z,f[10]=Bi.z,this}multiply(n){return this.multiplyMatrices(this,n)}premultiply(n){return this.multiplyMatrices(n,this)}multiplyMatrices(n,s){const u=n.elements,f=s.elements,w=this.elements,T=u[0],I=u[4],F=u[8],U=u[12],G=u[1],V=u[5],j=u[9],Y=u[13],re=u[2],ie=u[6],$=u[10],de=u[14],Ce=u[3],ge=u[7],we=u[11],Le=u[15],Ye=f[0],it=f[4],Me=f[8],Je=f[12],tt=f[1],mt=f[5],Pt=f[9],yt=f[13],dt=f[2],St=f[6],rn=f[10],hn=f[14],tn=f[3],wn=f[7],gn=f[11],ni=f[15];return w[0]=T*Ye+I*tt+F*dt+U*tn,w[4]=T*it+I*mt+F*St+U*wn,w[8]=T*Me+I*Pt+F*rn+U*gn,w[12]=T*Je+I*yt+F*hn+U*ni,w[1]=G*Ye+V*tt+j*dt+Y*tn,w[5]=G*it+V*mt+j*St+Y*wn,w[9]=G*Me+V*Pt+j*rn+Y*gn,w[13]=G*Je+V*yt+j*hn+Y*ni,w[2]=re*Ye+ie*tt+$*dt+de*tn,w[6]=re*it+ie*mt+$*St+de*wn,w[10]=re*Me+ie*Pt+$*rn+de*gn,w[14]=re*Je+ie*yt+$*hn+de*ni,w[3]=Ce*Ye+ge*tt+we*dt+Le*tn,w[7]=Ce*it+ge*mt+we*St+Le*wn,w[11]=Ce*Me+ge*Pt+we*rn+Le*gn,w[15]=Ce*Je+ge*yt+we*hn+Le*ni,this}multiplyScalar(n){const s=this.elements;return s[0]*=n,s[4]*=n,s[8]*=n,s[12]*=n,s[1]*=n,s[5]*=n,s[9]*=n,s[13]*=n,s[2]*=n,s[6]*=n,s[10]*=n,s[14]*=n,s[3]*=n,s[7]*=n,s[11]*=n,s[15]*=n,this}determinant(){const n=this.elements,s=n[0],u=n[4],f=n[8],w=n[12],T=n[1],I=n[5],F=n[9],U=n[13],G=n[2],V=n[6],j=n[10],Y=n[14],re=n[3],ie=n[7],$=n[11],de=n[15];return re*(+w*F*V-f*U*V-w*I*j+u*U*j+f*I*Y-u*F*Y)+ie*(+s*F*Y-s*U*j+w*T*j-f*T*Y+f*U*G-w*F*G)+$*(+s*U*V-s*I*Y-w*T*V+u*T*Y+w*I*G-u*U*G)+de*(-f*I*G-s*F*V+s*I*j+f*T*V-u*T*j+u*F*G)}transpose(){const n=this.elements;let s;return s=n[1],n[1]=n[4],n[4]=s,s=n[2],n[2]=n[8],n[8]=s,s=n[6],n[6]=n[9],n[9]=s,s=n[3],n[3]=n[12],n[12]=s,s=n[7],n[7]=n[13],n[13]=s,s=n[11],n[11]=n[14],n[14]=s,this}setPosition(n,s,u){const f=this.elements;return n.isVector3?(f[12]=n.x,f[13]=n.y,f[14]=n.z):(f[12]=n,f[13]=s,f[14]=u),this}invert(){const n=this.elements,s=n[0],u=n[1],f=n[2],w=n[3],T=n[4],I=n[5],F=n[6],U=n[7],G=n[8],V=n[9],j=n[10],Y=n[11],re=n[12],ie=n[13],$=n[14],de=n[15],Ce=V*$*U-ie*j*U+ie*F*Y-I*$*Y-V*F*de+I*j*de,ge=re*j*U-G*$*U-re*F*Y+T*$*Y+G*F*de-T*j*de,we=G*ie*U-re*V*U+re*I*Y-T*ie*Y-G*I*de+T*V*de,Le=re*V*F-G*ie*F-re*I*j+T*ie*j+G*I*$-T*V*$,Ye=s*Ce+u*ge+f*we+w*Le;if(Ye===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const it=1/Ye;return n[0]=Ce*it,n[1]=(ie*j*w-V*$*w-ie*f*Y+u*$*Y+V*f*de-u*j*de)*it,n[2]=(I*$*w-ie*F*w+ie*f*U-u*$*U-I*f*de+u*F*de)*it,n[3]=(V*F*w-I*j*w-V*f*U+u*j*U+I*f*Y-u*F*Y)*it,n[4]=ge*it,n[5]=(G*$*w-re*j*w+re*f*Y-s*$*Y-G*f*de+s*j*de)*it,n[6]=(re*F*w-T*$*w-re*f*U+s*$*U+T*f*de-s*F*de)*it,n[7]=(T*j*w-G*F*w+G*f*U-s*j*U-T*f*Y+s*F*Y)*it,n[8]=we*it,n[9]=(re*V*w-G*ie*w-re*u*Y+s*ie*Y+G*u*de-s*V*de)*it,n[10]=(T*ie*w-re*I*w+re*u*U-s*ie*U-T*u*de+s*I*de)*it,n[11]=(G*I*w-T*V*w-G*u*U+s*V*U+T*u*Y-s*I*Y)*it,n[12]=Le*it,n[13]=(G*ie*f-re*V*f+re*u*j-s*ie*j-G*u*$+s*V*$)*it,n[14]=(re*I*f-T*ie*f-re*u*F+s*ie*F+T*u*$-s*I*$)*it,n[15]=(T*V*f-G*I*f+G*u*F-s*V*F-T*u*j+s*I*j)*it,this}scale(n){const s=this.elements,u=n.x,f=n.y,w=n.z;return s[0]*=u,s[4]*=f,s[8]*=w,s[1]*=u,s[5]*=f,s[9]*=w,s[2]*=u,s[6]*=f,s[10]*=w,s[3]*=u,s[7]*=f,s[11]*=w,this}getMaxScaleOnAxis(){const n=this.elements,s=n[0]*n[0]+n[1]*n[1]+n[2]*n[2],u=n[4]*n[4]+n[5]*n[5]+n[6]*n[6],f=n[8]*n[8]+n[9]*n[9]+n[10]*n[10];return Math.sqrt(Math.max(s,u,f))}makeTranslation(n,s,u){return this.set(1,0,0,n,0,1,0,s,0,0,1,u,0,0,0,1),this}makeRotationX(n){const s=Math.cos(n),u=Math.sin(n);return this.set(1,0,0,0,0,s,-u,0,0,u,s,0,0,0,0,1),this}makeRotationY(n){const s=Math.cos(n),u=Math.sin(n);return this.set(s,0,u,0,0,1,0,0,-u,0,s,0,0,0,0,1),this}makeRotationZ(n){const s=Math.cos(n),u=Math.sin(n);return this.set(s,-u,0,0,u,s,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(n,s){const u=Math.cos(s),f=Math.sin(s),w=1-u,T=n.x,I=n.y,F=n.z,U=w*T,G=w*I;return this.set(U*T+u,U*I-f*F,U*F+f*I,0,U*I+f*F,G*I+u,G*F-f*T,0,U*F-f*I,G*F+f*T,w*F*F+u,0,0,0,0,1),this}makeScale(n,s,u){return this.set(n,0,0,0,0,s,0,0,0,0,u,0,0,0,0,1),this}makeShear(n,s,u,f,w,T){return this.set(1,u,w,0,n,1,T,0,s,f,1,0,0,0,0,1),this}compose(n,s,u){const f=this.elements,w=s._x,T=s._y,I=s._z,F=s._w,U=w+w,G=T+T,V=I+I,j=w*U,Y=w*G,re=w*V,ie=T*G,$=T*V,de=I*V,Ce=F*U,ge=F*G,we=F*V,Le=u.x,Ye=u.y,it=u.z;return f[0]=(1-(ie+de))*Le,f[1]=(Y+we)*Le,f[2]=(re-ge)*Le,f[3]=0,f[4]=(Y-we)*Ye,f[5]=(1-(j+de))*Ye,f[6]=($+Ce)*Ye,f[7]=0,f[8]=(re+ge)*it,f[9]=($-Ce)*it,f[10]=(1-(j+ie))*it,f[11]=0,f[12]=n.x,f[13]=n.y,f[14]=n.z,f[15]=1,this}decompose(n,s,u){const f=this.elements;let w=qs.set(f[0],f[1],f[2]).length();const T=qs.set(f[4],f[5],f[6]).length(),I=qs.set(f[8],f[9],f[10]).length();this.determinant()<0&&(w=-w),n.x=f[12],n.y=f[13],n.z=f[14],Ki.copy(this);const U=1/w,G=1/T,V=1/I;return Ki.elements[0]*=U,Ki.elements[1]*=U,Ki.elements[2]*=U,Ki.elements[4]*=G,Ki.elements[5]*=G,Ki.elements[6]*=G,Ki.elements[8]*=V,Ki.elements[9]*=V,Ki.elements[10]*=V,s.setFromRotationMatrix(Ki),u.x=w,u.y=T,u.z=I,this}makePerspective(n,s,u,f,w,T){const I=this.elements,F=2*w/(s-n),U=2*w/(u-f),G=(s+n)/(s-n),V=(u+f)/(u-f),j=-(T+w)/(T-w),Y=-2*T*w/(T-w);return I[0]=F,I[4]=0,I[8]=G,I[12]=0,I[1]=0,I[5]=U,I[9]=V,I[13]=0,I[2]=0,I[6]=0,I[10]=j,I[14]=Y,I[3]=0,I[7]=0,I[11]=-1,I[15]=0,this}makeOrthographic(n,s,u,f,w,T){const I=this.elements,F=1/(s-n),U=1/(u-f),G=1/(T-w),V=(s+n)*F,j=(u+f)*U,Y=(T+w)*G;return I[0]=2*F,I[4]=0,I[8]=0,I[12]=-V,I[1]=0,I[5]=2*U,I[9]=0,I[13]=-j,I[2]=0,I[6]=0,I[10]=-2*G,I[14]=-Y,I[3]=0,I[7]=0,I[11]=0,I[15]=1,this}equals(n){const s=this.elements,u=n.elements;for(let f=0;f<16;f++)if(s[f]!==u[f])return!1;return!0}fromArray(n,s=0){for(let u=0;u<16;u++)this.elements[u]=n[u+s];return this}toArray(n=[],s=0){const u=this.elements;return n[s]=u[0],n[s+1]=u[1],n[s+2]=u[2],n[s+3]=u[3],n[s+4]=u[4],n[s+5]=u[5],n[s+6]=u[6],n[s+7]=u[7],n[s+8]=u[8],n[s+9]=u[9],n[s+10]=u[10],n[s+11]=u[11],n[s+12]=u[12],n[s+13]=u[13],n[s+14]=u[14],n[s+15]=u[15],n}}const qs=new Qe,Ki=new Jn,mu=new Qe(0,0,0),kc=new Qe(1,1,1),uo=new Qe,Js=new Qe,Bi=new Qe,Da=new Jn,gu=new zs;class Zs{constructor(n=0,s=0,u=0,f=Zs.DefaultOrder){this.isEuler=!0,this._x=n,this._y=s,this._z=u,this._order=f}get x(){return this._x}set x(n){this._x=n,this._onChangeCallback()}get y(){return this._y}set y(n){this._y=n,this._onChangeCallback()}get z(){return this._z}set z(n){this._z=n,this._onChangeCallback()}get order(){return this._order}set order(n){this._order=n,this._onChangeCallback()}set(n,s,u,f=this._order){return this._x=n,this._y=s,this._z=u,this._order=f,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(n){return this._x=n._x,this._y=n._y,this._z=n._z,this._order=n._order,this._onChangeCallback(),this}setFromRotationMatrix(n,s=this._order,u=!0){const f=n.elements,w=f[0],T=f[4],I=f[8],F=f[1],U=f[5],G=f[9],V=f[2],j=f[6],Y=f[10];switch(s){case"XYZ":this._y=Math.asin(Jr(I,-1,1)),Math.abs(I)<.9999999?(this._x=Math.atan2(-G,Y),this._z=Math.atan2(-T,w)):(this._x=Math.atan2(j,U),this._z=0);break;case"YXZ":this._x=Math.asin(-Jr(G,-1,1)),Math.abs(G)<.9999999?(this._y=Math.atan2(I,Y),this._z=Math.atan2(F,U)):(this._y=Math.atan2(-V,w),this._z=0);break;case"ZXY":this._x=Math.asin(Jr(j,-1,1)),Math.abs(j)<.9999999?(this._y=Math.atan2(-V,Y),this._z=Math.atan2(-T,U)):(this._y=0,this._z=Math.atan2(F,w));break;case"ZYX":this._y=Math.asin(-Jr(V,-1,1)),Math.abs(V)<.9999999?(this._x=Math.atan2(j,Y),this._z=Math.atan2(F,w)):(this._x=0,this._z=Math.atan2(-T,U));break;case"YZX":this._z=Math.asin(Jr(F,-1,1)),Math.abs(F)<.9999999?(this._x=Math.atan2(-G,U),this._y=Math.atan2(-V,w)):(this._x=0,this._y=Math.atan2(I,Y));break;case"XZY":this._z=Math.asin(-Jr(T,-1,1)),Math.abs(T)<.9999999?(this._x=Math.atan2(j,U),this._y=Math.atan2(I,w)):(this._x=Math.atan2(-G,Y),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+s)}return this._order=s,u===!0&&this._onChangeCallback(),this}setFromQuaternion(n,s,u){return Da.makeRotationFromQuaternion(n),this.setFromRotationMatrix(Da,s,u)}setFromVector3(n,s=this._order){return this.set(n.x,n.y,n.z,s)}reorder(n){return gu.setFromEuler(this),this.setFromQuaternion(gu,n)}equals(n){return n._x===this._x&&n._y===this._y&&n._z===this._z&&n._order===this._order}fromArray(n){return this._x=n[0],this._y=n[1],this._z=n[2],n[3]!==void 0&&(this._order=n[3]),this._onChangeCallback(),this}toArray(n=[],s=0){return n[s]=this._x,n[s+1]=this._y,n[s+2]=this._z,n[s+3]=this._order,n}_onChange(n){return this._onChangeCallback=n,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}Zs.DefaultOrder="XYZ",Zs.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class Ar{constructor(){this.mask=1}set(n){this.mask=(1<<n|0)>>>0}enable(n){this.mask|=1<<n|0}enableAll(){this.mask=-1}toggle(n){this.mask^=1<<n|0}disable(n){this.mask&=~(1<<n|0)}disableAll(){this.mask=0}test(n){return(this.mask&n.mask)!==0}isEnabled(n){return(this.mask&(1<<n|0))!==0}}let es=0;const Yi=new Qe,mr=new zs,fs=new Jn,Pa=new Qe,Oa=new Qe,sp=new Qe,op=new zs,_d=new Qe(1,0,0),Au=new Qe(0,1,0),fh=new Qe(0,0,1),fg={type:"added"},wd={type:"removed"};class dr extends lo{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:es++}),this.uuid=Eo(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=dr.DefaultUp.clone();const n=new Qe,s=new Zs,u=new zs,f=new Qe(1,1,1);function w(){u.setFromEuler(s,!1)}function T(){s.setFromQuaternion(u,void 0,!1)}s._onChange(w),u._onChange(T),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:n},rotation:{configurable:!0,enumerable:!0,value:s},quaternion:{configurable:!0,enumerable:!0,value:u},scale:{configurable:!0,enumerable:!0,value:f},modelViewMatrix:{value:new Jn},normalMatrix:{value:new kr}}),this.matrix=new Jn,this.matrixWorld=new Jn,this.matrixAutoUpdate=dr.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=dr.DefaultMatrixWorldAutoUpdate,this.layers=new Ar,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(n){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(n),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(n){return this.quaternion.premultiply(n),this}setRotationFromAxisAngle(n,s){this.quaternion.setFromAxisAngle(n,s)}setRotationFromEuler(n){this.quaternion.setFromEuler(n,!0)}setRotationFromMatrix(n){this.quaternion.setFromRotationMatrix(n)}setRotationFromQuaternion(n){this.quaternion.copy(n)}rotateOnAxis(n,s){return mr.setFromAxisAngle(n,s),this.quaternion.multiply(mr),this}rotateOnWorldAxis(n,s){return mr.setFromAxisAngle(n,s),this.quaternion.premultiply(mr),this}rotateX(n){return this.rotateOnAxis(_d,n)}rotateY(n){return this.rotateOnAxis(Au,n)}rotateZ(n){return this.rotateOnAxis(fh,n)}translateOnAxis(n,s){return Yi.copy(n).applyQuaternion(this.quaternion),this.position.add(Yi.multiplyScalar(s)),this}translateX(n){return this.translateOnAxis(_d,n)}translateY(n){return this.translateOnAxis(Au,n)}translateZ(n){return this.translateOnAxis(fh,n)}localToWorld(n){return n.applyMatrix4(this.matrixWorld)}worldToLocal(n){return n.applyMatrix4(fs.copy(this.matrixWorld).invert())}lookAt(n,s,u){n.isVector3?Pa.copy(n):Pa.set(n,s,u);const f=this.parent;this.updateWorldMatrix(!0,!1),Oa.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?fs.lookAt(Oa,Pa,this.up):fs.lookAt(Pa,Oa,this.up),this.quaternion.setFromRotationMatrix(fs),f&&(fs.extractRotation(f.matrixWorld),mr.setFromRotationMatrix(fs),this.quaternion.premultiply(mr.invert()))}add(n){if(arguments.length>1){for(let s=0;s<arguments.length;s++)this.add(arguments[s]);return this}return n===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",n),this):(n&&n.isObject3D?(n.parent!==null&&n.parent.remove(n),n.parent=this,this.children.push(n),n.dispatchEvent(fg)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",n),this)}remove(n){if(arguments.length>1){for(let u=0;u<arguments.length;u++)this.remove(arguments[u]);return this}const s=this.children.indexOf(n);return s!==-1&&(n.parent=null,this.children.splice(s,1),n.dispatchEvent(wd)),this}removeFromParent(){const n=this.parent;return n!==null&&n.remove(this),this}clear(){for(let n=0;n<this.children.length;n++){const s=this.children[n];s.parent=null,s.dispatchEvent(wd)}return this.children.length=0,this}attach(n){return this.updateWorldMatrix(!0,!1),fs.copy(this.matrixWorld).invert(),n.parent!==null&&(n.parent.updateWorldMatrix(!0,!1),fs.multiply(n.parent.matrixWorld)),n.applyMatrix4(fs),this.add(n),n.updateWorldMatrix(!1,!0),this}getObjectById(n){return this.getObjectByProperty("id",n)}getObjectByName(n){return this.getObjectByProperty("name",n)}getObjectByProperty(n,s){if(this[n]===s)return this;for(let u=0,f=this.children.length;u<f;u++){const T=this.children[u].getObjectByProperty(n,s);if(T!==void 0)return T}}getWorldPosition(n){return this.updateWorldMatrix(!0,!1),n.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(n){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Oa,n,sp),n}getWorldScale(n){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Oa,op,n),n}getWorldDirection(n){this.updateWorldMatrix(!0,!1);const s=this.matrixWorld.elements;return n.set(s[8],s[9],s[10]).normalize()}raycast(){}traverse(n){n(this);const s=this.children;for(let u=0,f=s.length;u<f;u++)s[u].traverse(n)}traverseVisible(n){if(this.visible===!1)return;n(this);const s=this.children;for(let u=0,f=s.length;u<f;u++)s[u].traverseVisible(n)}traverseAncestors(n){const s=this.parent;s!==null&&(n(s),s.traverseAncestors(n))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(n){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||n)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,n=!0);const s=this.children;for(let u=0,f=s.length;u<f;u++){const w=s[u];(w.matrixWorldAutoUpdate===!0||n===!0)&&w.updateMatrixWorld(n)}}updateWorldMatrix(n,s){const u=this.parent;if(n===!0&&u!==null&&u.matrixWorldAutoUpdate===!0&&u.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),s===!0){const f=this.children;for(let w=0,T=f.length;w<T;w++){const I=f[w];I.matrixWorldAutoUpdate===!0&&I.updateWorldMatrix(!1,!0)}}}toJSON(n){const s=n===void 0||typeof n=="string",u={};s&&(n={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},u.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const f={};f.uuid=this.uuid,f.type=this.type,this.name!==""&&(f.name=this.name),this.castShadow===!0&&(f.castShadow=!0),this.receiveShadow===!0&&(f.receiveShadow=!0),this.visible===!1&&(f.visible=!1),this.frustumCulled===!1&&(f.frustumCulled=!1),this.renderOrder!==0&&(f.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(f.userData=this.userData),f.layers=this.layers.mask,f.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(f.matrixAutoUpdate=!1),this.isInstancedMesh&&(f.type="InstancedMesh",f.count=this.count,f.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(f.instanceColor=this.instanceColor.toJSON()));function w(I,F){return I[F.uuid]===void 0&&(I[F.uuid]=F.toJSON(n)),F.uuid}if(this.isScene)this.background&&(this.background.isColor?f.background=this.background.toJSON():this.background.isTexture&&(f.background=this.background.toJSON(n).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(f.environment=this.environment.toJSON(n).uuid);else if(this.isMesh||this.isLine||this.isPoints){f.geometry=w(n.geometries,this.geometry);const I=this.geometry.parameters;if(I!==void 0&&I.shapes!==void 0){const F=I.shapes;if(Array.isArray(F))for(let U=0,G=F.length;U<G;U++){const V=F[U];w(n.shapes,V)}else w(n.shapes,F)}}if(this.isSkinnedMesh&&(f.bindMode=this.bindMode,f.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(w(n.skeletons,this.skeleton),f.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const I=[];for(let F=0,U=this.material.length;F<U;F++)I.push(w(n.materials,this.material[F]));f.material=I}else f.material=w(n.materials,this.material);if(this.children.length>0){f.children=[];for(let I=0;I<this.children.length;I++)f.children.push(this.children[I].toJSON(n).object)}if(this.animations.length>0){f.animations=[];for(let I=0;I<this.animations.length;I++){const F=this.animations[I];f.animations.push(w(n.animations,F))}}if(s){const I=T(n.geometries),F=T(n.materials),U=T(n.textures),G=T(n.images),V=T(n.shapes),j=T(n.skeletons),Y=T(n.animations),re=T(n.nodes);I.length>0&&(u.geometries=I),F.length>0&&(u.materials=F),U.length>0&&(u.textures=U),G.length>0&&(u.images=G),V.length>0&&(u.shapes=V),j.length>0&&(u.skeletons=j),Y.length>0&&(u.animations=Y),re.length>0&&(u.nodes=re)}return u.object=f,u;function T(I){const F=[];for(const U in I){const G=I[U];delete G.metadata,F.push(G)}return F}}clone(n){return new this.constructor().copy(this,n)}copy(n,s=!0){if(this.name=n.name,this.up.copy(n.up),this.position.copy(n.position),this.rotation.order=n.rotation.order,this.quaternion.copy(n.quaternion),this.scale.copy(n.scale),this.matrix.copy(n.matrix),this.matrixWorld.copy(n.matrixWorld),this.matrixAutoUpdate=n.matrixAutoUpdate,this.matrixWorldNeedsUpdate=n.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=n.matrixWorldAutoUpdate,this.layers.mask=n.layers.mask,this.visible=n.visible,this.castShadow=n.castShadow,this.receiveShadow=n.receiveShadow,this.frustumCulled=n.frustumCulled,this.renderOrder=n.renderOrder,this.userData=JSON.parse(JSON.stringify(n.userData)),s===!0)for(let u=0;u<n.children.length;u++){const f=n.children[u];this.add(f.clone())}return this}}dr.DefaultUp=new Qe(0,1,0),dr.DefaultMatrixAutoUpdate=!0,dr.DefaultMatrixWorldAutoUpdate=!0;const Ko=new Qe,os=new Qe,Yo=new Qe,ys=new Qe,Cl=new Qe,Ml=new Qe,ph=new Qe,mh=new Qe,gh=new Qe,ap=new Qe;class Co{constructor(n=new Qe,s=new Qe,u=new Qe){this.a=n,this.b=s,this.c=u}static getNormal(n,s,u,f){f.subVectors(u,s),Ko.subVectors(n,s),f.cross(Ko);const w=f.lengthSq();return w>0?f.multiplyScalar(1/Math.sqrt(w)):f.set(0,0,0)}static getBarycoord(n,s,u,f,w){Ko.subVectors(f,s),os.subVectors(u,s),Yo.subVectors(n,s);const T=Ko.dot(Ko),I=Ko.dot(os),F=Ko.dot(Yo),U=os.dot(os),G=os.dot(Yo),V=T*U-I*I;if(V===0)return w.set(-2,-1,-1);const j=1/V,Y=(U*F-I*G)*j,re=(T*G-I*F)*j;return w.set(1-Y-re,re,Y)}static containsPoint(n,s,u,f){return this.getBarycoord(n,s,u,f,ys),ys.x>=0&&ys.y>=0&&ys.x+ys.y<=1}static getUV(n,s,u,f,w,T,I,F){return this.getBarycoord(n,s,u,f,ys),F.set(0,0),F.addScaledVector(w,ys.x),F.addScaledVector(T,ys.y),F.addScaledVector(I,ys.z),F}static isFrontFacing(n,s,u,f){return Ko.subVectors(u,s),os.subVectors(n,s),Ko.cross(os).dot(f)<0}set(n,s,u){return this.a.copy(n),this.b.copy(s),this.c.copy(u),this}setFromPointsAndIndices(n,s,u,f){return this.a.copy(n[s]),this.b.copy(n[u]),this.c.copy(n[f]),this}setFromAttributeAndIndices(n,s,u,f){return this.a.fromBufferAttribute(n,s),this.b.fromBufferAttribute(n,u),this.c.fromBufferAttribute(n,f),this}clone(){return new this.constructor().copy(this)}copy(n){return this.a.copy(n.a),this.b.copy(n.b),this.c.copy(n.c),this}getArea(){return Ko.subVectors(this.c,this.b),os.subVectors(this.a,this.b),Ko.cross(os).length()*.5}getMidpoint(n){return n.addVectors(this.a,this.b).add(this.c).multiplyScalar(.3333333333333333)}getNormal(n){return Co.getNormal(this.a,this.b,this.c,n)}getPlane(n){return n.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(n,s){return Co.getBarycoord(n,this.a,this.b,this.c,s)}getUV(n,s,u,f,w){return Co.getUV(n,this.a,this.b,this.c,s,u,f,w)}containsPoint(n){return Co.containsPoint(n,this.a,this.b,this.c)}isFrontFacing(n){return Co.isFrontFacing(this.a,this.b,this.c,n)}intersectsBox(n){return n.intersectsTriangle(this)}closestPointToPoint(n,s){const u=this.a,f=this.b,w=this.c;let T,I;Cl.subVectors(f,u),Ml.subVectors(w,u),mh.subVectors(n,u);const F=Cl.dot(mh),U=Ml.dot(mh);if(F<=0&&U<=0)return s.copy(u);gh.subVectors(n,f);const G=Cl.dot(gh),V=Ml.dot(gh);if(G>=0&&V<=G)return s.copy(f);const j=F*V-G*U;if(j<=0&&F>=0&&G<=0)return T=F/(F-G),s.copy(u).addScaledVector(Cl,T);ap.subVectors(n,w);const Y=Cl.dot(ap),re=Ml.dot(ap);if(re>=0&&Y<=re)return s.copy(w);const ie=Y*U-F*re;if(ie<=0&&U>=0&&re<=0)return I=U/(U-re),s.copy(u).addScaledVector(Ml,I);const $=G*re-Y*V;if($<=0&&V-G>=0&&Y-re>=0)return ph.subVectors(w,f),I=(V-G)/(V-G+(Y-re)),s.copy(f).addScaledVector(ph,I);const de=1/($+ie+j);return T=ie*de,I=j*de,s.copy(u).addScaledVector(Cl,T).addScaledVector(Ml,I)}equals(n){return n.a.equals(this.a)&&n.b.equals(this.b)&&n.c.equals(this.c)}}let Mo=0;class bo extends lo{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Mo++}),this.uuid=Eo(),this.name="",this.type="Material",this.blending=D,this.side=S,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=xe,this.blendDst=ve,this.blendEquation=K,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=ct,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Ho,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Fo,this.stencilZFail=Fo,this.stencilZPass=Fo,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(n){this._alphaTest>0!=n>0&&this.version++,this._alphaTest=n}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(n){if(n!==void 0)for(const s in n){const u=n[s];if(u===void 0){console.warn("THREE.Material: '"+s+"' parameter is undefined.");continue}const f=this[s];if(f===void 0){console.warn("THREE."+this.type+": '"+s+"' is not a property of this material.");continue}f&&f.isColor?f.set(u):f&&f.isVector3&&u&&u.isVector3?f.copy(u):this[s]=u}}toJSON(n){const s=n===void 0||typeof n=="string";s&&(n={textures:{},images:{}});const u={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};u.uuid=this.uuid,u.type=this.type,this.name!==""&&(u.name=this.name),this.color&&this.color.isColor&&(u.color=this.color.getHex()),this.roughness!==void 0&&(u.roughness=this.roughness),this.metalness!==void 0&&(u.metalness=this.metalness),this.sheen!==void 0&&(u.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(u.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(u.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(u.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(u.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(u.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(u.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(u.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(u.shininess=this.shininess),this.clearcoat!==void 0&&(u.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(u.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(u.clearcoatMap=this.clearcoatMap.toJSON(n).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(u.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(n).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(u.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(n).uuid,u.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(u.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(u.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(u.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(u.iridescenceMap=this.iridescenceMap.toJSON(n).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(u.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(n).uuid),this.map&&this.map.isTexture&&(u.map=this.map.toJSON(n).uuid),this.matcap&&this.matcap.isTexture&&(u.matcap=this.matcap.toJSON(n).uuid),this.alphaMap&&this.alphaMap.isTexture&&(u.alphaMap=this.alphaMap.toJSON(n).uuid),this.lightMap&&this.lightMap.isTexture&&(u.lightMap=this.lightMap.toJSON(n).uuid,u.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(u.aoMap=this.aoMap.toJSON(n).uuid,u.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(u.bumpMap=this.bumpMap.toJSON(n).uuid,u.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(u.normalMap=this.normalMap.toJSON(n).uuid,u.normalMapType=this.normalMapType,u.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(u.displacementMap=this.displacementMap.toJSON(n).uuid,u.displacementScale=this.displacementScale,u.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(u.roughnessMap=this.roughnessMap.toJSON(n).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(u.metalnessMap=this.metalnessMap.toJSON(n).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(u.emissiveMap=this.emissiveMap.toJSON(n).uuid),this.specularMap&&this.specularMap.isTexture&&(u.specularMap=this.specularMap.toJSON(n).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(u.specularIntensityMap=this.specularIntensityMap.toJSON(n).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(u.specularColorMap=this.specularColorMap.toJSON(n).uuid),this.envMap&&this.envMap.isTexture&&(u.envMap=this.envMap.toJSON(n).uuid,this.combine!==void 0&&(u.combine=this.combine)),this.envMapIntensity!==void 0&&(u.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(u.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(u.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(u.gradientMap=this.gradientMap.toJSON(n).uuid),this.transmission!==void 0&&(u.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(u.transmissionMap=this.transmissionMap.toJSON(n).uuid),this.thickness!==void 0&&(u.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(u.thicknessMap=this.thicknessMap.toJSON(n).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(u.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(u.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(u.size=this.size),this.shadowSide!==null&&(u.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(u.sizeAttenuation=this.sizeAttenuation),this.blending!==D&&(u.blending=this.blending),this.side!==S&&(u.side=this.side),this.vertexColors&&(u.vertexColors=!0),this.opacity<1&&(u.opacity=this.opacity),this.transparent===!0&&(u.transparent=this.transparent),u.depthFunc=this.depthFunc,u.depthTest=this.depthTest,u.depthWrite=this.depthWrite,u.colorWrite=this.colorWrite,u.stencilWrite=this.stencilWrite,u.stencilWriteMask=this.stencilWriteMask,u.stencilFunc=this.stencilFunc,u.stencilRef=this.stencilRef,u.stencilFuncMask=this.stencilFuncMask,u.stencilFail=this.stencilFail,u.stencilZFail=this.stencilZFail,u.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(u.rotation=this.rotation),this.polygonOffset===!0&&(u.polygonOffset=!0),this.polygonOffsetFactor!==0&&(u.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(u.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(u.linewidth=this.linewidth),this.dashSize!==void 0&&(u.dashSize=this.dashSize),this.gapSize!==void 0&&(u.gapSize=this.gapSize),this.scale!==void 0&&(u.scale=this.scale),this.dithering===!0&&(u.dithering=!0),this.alphaTest>0&&(u.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(u.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(u.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(u.wireframe=this.wireframe),this.wireframeLinewidth>1&&(u.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(u.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(u.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(u.flatShading=this.flatShading),this.visible===!1&&(u.visible=!1),this.toneMapped===!1&&(u.toneMapped=!1),this.fog===!1&&(u.fog=!1),JSON.stringify(this.userData)!=="{}"&&(u.userData=this.userData);function f(w){const T=[];for(const I in w){const F=w[I];delete F.metadata,T.push(F)}return T}if(s){const w=f(n.textures),T=f(n.images);w.length>0&&(u.textures=w),T.length>0&&(u.images=T)}return u}clone(){return new this.constructor().copy(this)}copy(n){this.name=n.name,this.blending=n.blending,this.side=n.side,this.vertexColors=n.vertexColors,this.opacity=n.opacity,this.transparent=n.transparent,this.blendSrc=n.blendSrc,this.blendDst=n.blendDst,this.blendEquation=n.blendEquation,this.blendSrcAlpha=n.blendSrcAlpha,this.blendDstAlpha=n.blendDstAlpha,this.blendEquationAlpha=n.blendEquationAlpha,this.depthFunc=n.depthFunc,this.depthTest=n.depthTest,this.depthWrite=n.depthWrite,this.stencilWriteMask=n.stencilWriteMask,this.stencilFunc=n.stencilFunc,this.stencilRef=n.stencilRef,this.stencilFuncMask=n.stencilFuncMask,this.stencilFail=n.stencilFail,this.stencilZFail=n.stencilZFail,this.stencilZPass=n.stencilZPass,this.stencilWrite=n.stencilWrite;const s=n.clippingPlanes;let u=null;if(s!==null){const f=s.length;u=new Array(f);for(let w=0;w!==f;++w)u[w]=s[w].clone()}return this.clippingPlanes=u,this.clipIntersection=n.clipIntersection,this.clipShadows=n.clipShadows,this.shadowSide=n.shadowSide,this.colorWrite=n.colorWrite,this.precision=n.precision,this.polygonOffset=n.polygonOffset,this.polygonOffsetFactor=n.polygonOffsetFactor,this.polygonOffsetUnits=n.polygonOffsetUnits,this.dithering=n.dithering,this.alphaTest=n.alphaTest,this.alphaToCoverage=n.alphaToCoverage,this.premultipliedAlpha=n.premultipliedAlpha,this.visible=n.visible,this.toneMapped=n.toneMapped,this.userData=JSON.parse(JSON.stringify(n.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(n){n===!0&&this.version++}}class Uc extends bo{constructor(n){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new kn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=un,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(n)}copy(n){return super.copy(n),this.color.copy(n.color),this.map=n.map,this.lightMap=n.lightMap,this.lightMapIntensity=n.lightMapIntensity,this.aoMap=n.aoMap,this.aoMapIntensity=n.aoMapIntensity,this.specularMap=n.specularMap,this.alphaMap=n.alphaMap,this.envMap=n.envMap,this.combine=n.combine,this.reflectivity=n.reflectivity,this.refractionRatio=n.refractionRatio,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.wireframeLinecap=n.wireframeLinecap,this.wireframeLinejoin=n.wireframeLinejoin,this.fog=n.fog,this}}const xr=new Qe,$s=new jt;class Hr{constructor(n,s,u){if(Array.isArray(n))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=n,this.itemSize=s,this.count=n!==void 0?n.length/s:0,this.normalized=u===!0,this.usage=xl,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(n){n===!0&&this.version++}setUsage(n){return this.usage=n,this}copy(n){return this.name=n.name,this.array=new n.array.constructor(n.array),this.itemSize=n.itemSize,this.count=n.count,this.normalized=n.normalized,this.usage=n.usage,this}copyAt(n,s,u){n*=this.itemSize,u*=s.itemSize;for(let f=0,w=this.itemSize;f<w;f++)this.array[n+f]=s.array[u+f];return this}copyArray(n){return this.array.set(n),this}applyMatrix3(n){if(this.itemSize===2)for(let s=0,u=this.count;s<u;s++)$s.fromBufferAttribute(this,s),$s.applyMatrix3(n),this.setXY(s,$s.x,$s.y);else if(this.itemSize===3)for(let s=0,u=this.count;s<u;s++)xr.fromBufferAttribute(this,s),xr.applyMatrix3(n),this.setXYZ(s,xr.x,xr.y,xr.z);return this}applyMatrix4(n){for(let s=0,u=this.count;s<u;s++)xr.fromBufferAttribute(this,s),xr.applyMatrix4(n),this.setXYZ(s,xr.x,xr.y,xr.z);return this}applyNormalMatrix(n){for(let s=0,u=this.count;s<u;s++)xr.fromBufferAttribute(this,s),xr.applyNormalMatrix(n),this.setXYZ(s,xr.x,xr.y,xr.z);return this}transformDirection(n){for(let s=0,u=this.count;s<u;s++)xr.fromBufferAttribute(this,s),xr.transformDirection(n),this.setXYZ(s,xr.x,xr.y,xr.z);return this}set(n,s=0){return this.array.set(n,s),this}getX(n){let s=this.array[n*this.itemSize];return this.normalized&&(s=Sa(s,this.array)),s}setX(n,s){return this.normalized&&(s=Rr(s,this.array)),this.array[n*this.itemSize]=s,this}getY(n){let s=this.array[n*this.itemSize+1];return this.normalized&&(s=Sa(s,this.array)),s}setY(n,s){return this.normalized&&(s=Rr(s,this.array)),this.array[n*this.itemSize+1]=s,this}getZ(n){let s=this.array[n*this.itemSize+2];return this.normalized&&(s=Sa(s,this.array)),s}setZ(n,s){return this.normalized&&(s=Rr(s,this.array)),this.array[n*this.itemSize+2]=s,this}getW(n){let s=this.array[n*this.itemSize+3];return this.normalized&&(s=Sa(s,this.array)),s}setW(n,s){return this.normalized&&(s=Rr(s,this.array)),this.array[n*this.itemSize+3]=s,this}setXY(n,s,u){return n*=this.itemSize,this.normalized&&(s=Rr(s,this.array),u=Rr(u,this.array)),this.array[n+0]=s,this.array[n+1]=u,this}setXYZ(n,s,u,f){return n*=this.itemSize,this.normalized&&(s=Rr(s,this.array),u=Rr(u,this.array),f=Rr(f,this.array)),this.array[n+0]=s,this.array[n+1]=u,this.array[n+2]=f,this}setXYZW(n,s,u,f,w){return n*=this.itemSize,this.normalized&&(s=Rr(s,this.array),u=Rr(u,this.array),f=Rr(f,this.array),w=Rr(w,this.array)),this.array[n+0]=s,this.array[n+1]=u,this.array[n+2]=f,this.array[n+3]=w,this}onUpload(n){return this.onUploadCallback=n,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const n={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(n.name=this.name),this.usage!==xl&&(n.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(n.updateRange=this.updateRange),n}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class ev extends Hr{constructor(n,s,u){super(new Int8Array(n),s,u)}}class tv extends Hr{constructor(n,s,u){super(new Uint8Array(n),s,u)}}class nv extends Hr{constructor(n,s,u){super(new Uint8ClampedArray(n),s,u)}}class iv extends Hr{constructor(n,s,u){super(new Int16Array(n),s,u)}}class Cd extends Hr{constructor(n,s,u){super(new Uint16Array(n),s,u)}}class rv extends Hr{constructor(n,s,u){super(new Int32Array(n),s,u)}}class Md extends Hr{constructor(n,s,u){super(new Uint32Array(n),s,u)}}class sv extends Hr{constructor(n,s,u){super(new Uint16Array(n),s,u),this.isFloat16BufferAttribute=!0}}class li extends Hr{constructor(n,s,u){super(new Float32Array(n),s,u)}}class lp extends Hr{constructor(n,s,u){super(new Float64Array(n),s,u)}}let cp=0;const da=new Jn,bd=new dr,vu=new Qe,qo=new Or,zc=new Or,Gs=new Qe;class Wi extends lo{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:cp++}),this.uuid=Eo(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(n){return Array.isArray(n)?this.index=new(Bc(n)?Md:Cd)(n,1):this.index=n,this}getAttribute(n){return this.attributes[n]}setAttribute(n,s){return this.attributes[n]=s,this}deleteAttribute(n){return delete this.attributes[n],this}hasAttribute(n){return this.attributes[n]!==void 0}addGroup(n,s,u=0){this.groups.push({start:n,count:s,materialIndex:u})}clearGroups(){this.groups=[]}setDrawRange(n,s){this.drawRange.start=n,this.drawRange.count=s}applyMatrix4(n){const s=this.attributes.position;s!==void 0&&(s.applyMatrix4(n),s.needsUpdate=!0);const u=this.attributes.normal;if(u!==void 0){const w=new kr().getNormalMatrix(n);u.applyNormalMatrix(w),u.needsUpdate=!0}const f=this.attributes.tangent;return f!==void 0&&(f.transformDirection(n),f.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(n){return da.makeRotationFromQuaternion(n),this.applyMatrix4(da),this}rotateX(n){return da.makeRotationX(n),this.applyMatrix4(da),this}rotateY(n){return da.makeRotationY(n),this.applyMatrix4(da),this}rotateZ(n){return da.makeRotationZ(n),this.applyMatrix4(da),this}translate(n,s,u){return da.makeTranslation(n,s,u),this.applyMatrix4(da),this}scale(n,s,u){return da.makeScale(n,s,u),this.applyMatrix4(da),this}lookAt(n){return bd.lookAt(n),bd.updateMatrix(),this.applyMatrix4(bd.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(vu).negate(),this.translate(vu.x,vu.y,vu.z),this}setFromPoints(n){const s=[];for(let u=0,f=n.length;u<f;u++){const w=n[u];s.push(w.x,w.y,w.z||0)}return this.setAttribute("position",new li(s,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Or);const n=this.attributes.position,s=this.morphAttributes.position;if(n&&n.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new Qe(-1/0,-1/0,-1/0),new Qe(1/0,1/0,1/0));return}if(n!==void 0){if(this.boundingBox.setFromBufferAttribute(n),s)for(let u=0,f=s.length;u<f;u++){const w=s[u];qo.setFromBufferAttribute(w),this.morphTargetsRelative?(Gs.addVectors(this.boundingBox.min,qo.min),this.boundingBox.expandByPoint(Gs),Gs.addVectors(this.boundingBox.max,qo.max),this.boundingBox.expandByPoint(Gs)):(this.boundingBox.expandByPoint(qo.min),this.boundingBox.expandByPoint(qo.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Ba);const n=this.attributes.position,s=this.morphAttributes.position;if(n&&n.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new Qe,1/0);return}if(n){const u=this.boundingSphere.center;if(qo.setFromBufferAttribute(n),s)for(let w=0,T=s.length;w<T;w++){const I=s[w];zc.setFromBufferAttribute(I),this.morphTargetsRelative?(Gs.addVectors(qo.min,zc.min),qo.expandByPoint(Gs),Gs.addVectors(qo.max,zc.max),qo.expandByPoint(Gs)):(qo.expandByPoint(zc.min),qo.expandByPoint(zc.max))}qo.getCenter(u);let f=0;for(let w=0,T=n.count;w<T;w++)Gs.fromBufferAttribute(n,w),f=Math.max(f,u.distanceToSquared(Gs));if(s)for(let w=0,T=s.length;w<T;w++){const I=s[w],F=this.morphTargetsRelative;for(let U=0,G=I.count;U<G;U++)Gs.fromBufferAttribute(I,U),F&&(vu.fromBufferAttribute(n,U),Gs.add(vu)),f=Math.max(f,u.distanceToSquared(Gs))}this.boundingSphere.radius=Math.sqrt(f),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const n=this.index,s=this.attributes;if(n===null||s.position===void 0||s.normal===void 0||s.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const u=n.array,f=s.position.array,w=s.normal.array,T=s.uv.array,I=f.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Hr(new Float32Array(4*I),4));const F=this.getAttribute("tangent").array,U=[],G=[];for(let tt=0;tt<I;tt++)U[tt]=new Qe,G[tt]=new Qe;const V=new Qe,j=new Qe,Y=new Qe,re=new jt,ie=new jt,$=new jt,de=new Qe,Ce=new Qe;function ge(tt,mt,Pt){V.fromArray(f,tt*3),j.fromArray(f,mt*3),Y.fromArray(f,Pt*3),re.fromArray(T,tt*2),ie.fromArray(T,mt*2),$.fromArray(T,Pt*2),j.sub(V),Y.sub(V),ie.sub(re),$.sub(re);const yt=1/(ie.x*$.y-$.x*ie.y);isFinite(yt)&&(de.copy(j).multiplyScalar($.y).addScaledVector(Y,-ie.y).multiplyScalar(yt),Ce.copy(Y).multiplyScalar(ie.x).addScaledVector(j,-$.x).multiplyScalar(yt),U[tt].add(de),U[mt].add(de),U[Pt].add(de),G[tt].add(Ce),G[mt].add(Ce),G[Pt].add(Ce))}let we=this.groups;we.length===0&&(we=[{start:0,count:u.length}]);for(let tt=0,mt=we.length;tt<mt;++tt){const Pt=we[tt],yt=Pt.start,dt=Pt.count;for(let St=yt,rn=yt+dt;St<rn;St+=3)ge(u[St+0],u[St+1],u[St+2])}const Le=new Qe,Ye=new Qe,it=new Qe,Me=new Qe;function Je(tt){it.fromArray(w,tt*3),Me.copy(it);const mt=U[tt];Le.copy(mt),Le.sub(it.multiplyScalar(it.dot(mt))).normalize(),Ye.crossVectors(Me,mt);const yt=Ye.dot(G[tt])<0?-1:1;F[tt*4]=Le.x,F[tt*4+1]=Le.y,F[tt*4+2]=Le.z,F[tt*4+3]=yt}for(let tt=0,mt=we.length;tt<mt;++tt){const Pt=we[tt],yt=Pt.start,dt=Pt.count;for(let St=yt,rn=yt+dt;St<rn;St+=3)Je(u[St+0]),Je(u[St+1]),Je(u[St+2])}}computeVertexNormals(){const n=this.index,s=this.getAttribute("position");if(s!==void 0){let u=this.getAttribute("normal");if(u===void 0)u=new Hr(new Float32Array(s.count*3),3),this.setAttribute("normal",u);else for(let j=0,Y=u.count;j<Y;j++)u.setXYZ(j,0,0,0);const f=new Qe,w=new Qe,T=new Qe,I=new Qe,F=new Qe,U=new Qe,G=new Qe,V=new Qe;if(n)for(let j=0,Y=n.count;j<Y;j+=3){const re=n.getX(j+0),ie=n.getX(j+1),$=n.getX(j+2);f.fromBufferAttribute(s,re),w.fromBufferAttribute(s,ie),T.fromBufferAttribute(s,$),G.subVectors(T,w),V.subVectors(f,w),G.cross(V),I.fromBufferAttribute(u,re),F.fromBufferAttribute(u,ie),U.fromBufferAttribute(u,$),I.add(G),F.add(G),U.add(G),u.setXYZ(re,I.x,I.y,I.z),u.setXYZ(ie,F.x,F.y,F.z),u.setXYZ($,U.x,U.y,U.z)}else for(let j=0,Y=s.count;j<Y;j+=3)f.fromBufferAttribute(s,j+0),w.fromBufferAttribute(s,j+1),T.fromBufferAttribute(s,j+2),G.subVectors(T,w),V.subVectors(f,w),G.cross(V),u.setXYZ(j+0,G.x,G.y,G.z),u.setXYZ(j+1,G.x,G.y,G.z),u.setXYZ(j+2,G.x,G.y,G.z);this.normalizeNormals(),u.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const n=this.attributes.normal;for(let s=0,u=n.count;s<u;s++)Gs.fromBufferAttribute(n,s),Gs.normalize(),n.setXYZ(s,Gs.x,Gs.y,Gs.z)}toNonIndexed(){function n(I,F){const U=I.array,G=I.itemSize,V=I.normalized,j=new U.constructor(F.length*G);let Y=0,re=0;for(let ie=0,$=F.length;ie<$;ie++){I.isInterleavedBufferAttribute?Y=F[ie]*I.data.stride+I.offset:Y=F[ie]*G;for(let de=0;de<G;de++)j[re++]=U[Y++]}return new Hr(j,G,V)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const s=new Wi,u=this.index.array,f=this.attributes;for(const I in f){const F=f[I],U=n(F,u);s.setAttribute(I,U)}const w=this.morphAttributes;for(const I in w){const F=[],U=w[I];for(let G=0,V=U.length;G<V;G++){const j=U[G],Y=n(j,u);F.push(Y)}s.morphAttributes[I]=F}s.morphTargetsRelative=this.morphTargetsRelative;const T=this.groups;for(let I=0,F=T.length;I<F;I++){const U=T[I];s.addGroup(U.start,U.count,U.materialIndex)}return s}toJSON(){const n={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),Object.keys(this.userData).length>0&&(n.userData=this.userData),this.parameters!==void 0){const F=this.parameters;for(const U in F)F[U]!==void 0&&(n[U]=F[U]);return n}n.data={attributes:{}};const s=this.index;s!==null&&(n.data.index={type:s.array.constructor.name,array:Array.prototype.slice.call(s.array)});const u=this.attributes;for(const F in u){const U=u[F];n.data.attributes[F]=U.toJSON(n.data)}const f={};let w=!1;for(const F in this.morphAttributes){const U=this.morphAttributes[F],G=[];for(let V=0,j=U.length;V<j;V++){const Y=U[V];G.push(Y.toJSON(n.data))}G.length>0&&(f[F]=G,w=!0)}w&&(n.data.morphAttributes=f,n.data.morphTargetsRelative=this.morphTargetsRelative);const T=this.groups;T.length>0&&(n.data.groups=JSON.parse(JSON.stringify(T)));const I=this.boundingSphere;return I!==null&&(n.data.boundingSphere={center:I.center.toArray(),radius:I.radius}),n}clone(){return new this.constructor().copy(this)}copy(n){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const s={};this.name=n.name;const u=n.index;u!==null&&this.setIndex(u.clone(s));const f=n.attributes;for(const U in f){const G=f[U];this.setAttribute(U,G.clone(s))}const w=n.morphAttributes;for(const U in w){const G=[],V=w[U];for(let j=0,Y=V.length;j<Y;j++)G.push(V[j].clone(s));this.morphAttributes[U]=G}this.morphTargetsRelative=n.morphTargetsRelative;const T=n.groups;for(let U=0,G=T.length;U<G;U++){const V=T[U];this.addGroup(V.start,V.count,V.materialIndex)}const I=n.boundingBox;I!==null&&(this.boundingBox=I.clone());const F=n.boundingSphere;return F!==null&&(this.boundingSphere=F.clone()),this.drawRange.start=n.drawRange.start,this.drawRange.count=n.drawRange.count,this.userData=n.userData,n.parameters!==void 0&&(this.parameters=Object.assign({},n.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const pg=new Jn,Jo=new Ys,mg=new Ba,Gc=new Qe,tl=new Qe,Zo=new Qe,gg=new Qe,Pn=new Qe,Ah=new Qe,vh=new Qe,Sd=new Qe,up=new Qe,bl=new jt,Hc=new jt,yh=new jt,hp=new Qe,Td=new Qe;class eo extends dr{constructor(n=new Wi,s=new Uc){super(),this.isMesh=!0,this.type="Mesh",this.geometry=n,this.material=s,this.updateMorphTargets()}copy(n,s){return super.copy(n,s),n.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=n.morphTargetInfluences.slice()),n.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},n.morphTargetDictionary)),this.material=n.material,this.geometry=n.geometry,this}updateMorphTargets(){const s=this.geometry.morphAttributes,u=Object.keys(s);if(u.length>0){const f=s[u[0]];if(f!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let w=0,T=f.length;w<T;w++){const I=f[w].name||String(w);this.morphTargetInfluences.push(0),this.morphTargetDictionary[I]=w}}}}raycast(n,s){const u=this.geometry,f=this.material,w=this.matrixWorld;if(f===void 0||(u.boundingSphere===null&&u.computeBoundingSphere(),mg.copy(u.boundingSphere),mg.applyMatrix4(w),n.ray.intersectsSphere(mg)===!1)||(pg.copy(w).invert(),Jo.copy(n.ray).applyMatrix4(pg),u.boundingBox!==null&&Jo.intersectsBox(u.boundingBox)===!1))return;let T;const I=u.index,F=u.attributes.position,U=u.morphAttributes.position,G=u.morphTargetsRelative,V=u.attributes.uv,j=u.attributes.uv2,Y=u.groups,re=u.drawRange;if(I!==null)if(Array.isArray(f))for(let ie=0,$=Y.length;ie<$;ie++){const de=Y[ie],Ce=f[de.materialIndex],ge=Math.max(de.start,re.start),we=Math.min(I.count,Math.min(de.start+de.count,re.start+re.count));for(let Le=ge,Ye=we;Le<Ye;Le+=3){const it=I.getX(Le),Me=I.getX(Le+1),Je=I.getX(Le+2);T=Id(this,Ce,n,Jo,F,U,G,V,j,it,Me,Je),T&&(T.faceIndex=Math.floor(Le/3),T.face.materialIndex=de.materialIndex,s.push(T))}}else{const ie=Math.max(0,re.start),$=Math.min(I.count,re.start+re.count);for(let de=ie,Ce=$;de<Ce;de+=3){const ge=I.getX(de),we=I.getX(de+1),Le=I.getX(de+2);T=Id(this,f,n,Jo,F,U,G,V,j,ge,we,Le),T&&(T.faceIndex=Math.floor(de/3),s.push(T))}}else if(F!==void 0)if(Array.isArray(f))for(let ie=0,$=Y.length;ie<$;ie++){const de=Y[ie],Ce=f[de.materialIndex],ge=Math.max(de.start,re.start),we=Math.min(F.count,Math.min(de.start+de.count,re.start+re.count));for(let Le=ge,Ye=we;Le<Ye;Le+=3){const it=Le,Me=Le+1,Je=Le+2;T=Id(this,Ce,n,Jo,F,U,G,V,j,it,Me,Je),T&&(T.faceIndex=Math.floor(Le/3),T.face.materialIndex=de.materialIndex,s.push(T))}}else{const ie=Math.max(0,re.start),$=Math.min(F.count,re.start+re.count);for(let de=ie,Ce=$;de<Ce;de+=3){const ge=de,we=de+1,Le=de+2;T=Id(this,f,n,Jo,F,U,G,V,j,ge,we,Le),T&&(T.faceIndex=Math.floor(de/3),s.push(T))}}}}function ov(B,n,s,u,f,w,T,I){let F;if(n.side===R?F=u.intersectTriangle(T,w,f,!0,I):F=u.intersectTriangle(f,w,T,n.side!==P,I),F===null)return null;Td.copy(I),Td.applyMatrix4(B.matrixWorld);const U=s.ray.origin.distanceTo(Td);return U<s.near||U>s.far?null:{distance:U,point:Td.clone(),object:B}}function Id(B,n,s,u,f,w,T,I,F,U,G,V){Gc.fromBufferAttribute(f,U),tl.fromBufferAttribute(f,G),Zo.fromBufferAttribute(f,V);const j=B.morphTargetInfluences;if(w&&j){vh.set(0,0,0),Sd.set(0,0,0),up.set(0,0,0);for(let re=0,ie=w.length;re<ie;re++){const $=j[re],de=w[re];$!==0&&(gg.fromBufferAttribute(de,U),Pn.fromBufferAttribute(de,G),Ah.fromBufferAttribute(de,V),T?(vh.addScaledVector(gg,$),Sd.addScaledVector(Pn,$),up.addScaledVector(Ah,$)):(vh.addScaledVector(gg.sub(Gc),$),Sd.addScaledVector(Pn.sub(tl),$),up.addScaledVector(Ah.sub(Zo),$)))}Gc.add(vh),tl.add(Sd),Zo.add(up)}B.isSkinnedMesh&&(B.boneTransform(U,Gc),B.boneTransform(G,tl),B.boneTransform(V,Zo));const Y=ov(B,n,s,u,Gc,tl,Zo,hp);if(Y){I&&(bl.fromBufferAttribute(I,U),Hc.fromBufferAttribute(I,G),yh.fromBufferAttribute(I,V),Y.uv=Co.getUV(hp,Gc,tl,Zo,bl,Hc,yh,new jt)),F&&(bl.fromBufferAttribute(F,U),Hc.fromBufferAttribute(F,G),yh.fromBufferAttribute(F,V),Y.uv2=Co.getUV(hp,Gc,tl,Zo,bl,Hc,yh,new jt));const re={a:U,b:G,c:V,normal:new Qe,materialIndex:0};Co.getNormal(Gc,tl,Zo,re.normal),Y.face=re}return Y}class Zl extends Wi{constructor(n=1,s=1,u=1,f=1,w=1,T=1){super(),this.type="BoxGeometry",this.parameters={width:n,height:s,depth:u,widthSegments:f,heightSegments:w,depthSegments:T};const I=this;f=Math.floor(f),w=Math.floor(w),T=Math.floor(T);const F=[],U=[],G=[],V=[];let j=0,Y=0;re("z","y","x",-1,-1,u,s,n,T,w,0),re("z","y","x",1,-1,u,s,-n,T,w,1),re("x","z","y",1,1,n,u,s,f,T,2),re("x","z","y",1,-1,n,u,-s,f,T,3),re("x","y","z",1,-1,n,s,u,f,w,4),re("x","y","z",-1,-1,n,s,-u,f,w,5),this.setIndex(F),this.setAttribute("position",new li(U,3)),this.setAttribute("normal",new li(G,3)),this.setAttribute("uv",new li(V,2));function re(ie,$,de,Ce,ge,we,Le,Ye,it,Me,Je){const tt=we/it,mt=Le/Me,Pt=we/2,yt=Le/2,dt=Ye/2,St=it+1,rn=Me+1;let hn=0,tn=0;const wn=new Qe;for(let gn=0;gn<rn;gn++){const ni=gn*mt-yt;for(let Wn=0;Wn<St;Wn++){const Vt=Wn*tt-Pt;wn[ie]=Vt*Ce,wn[$]=ni*ge,wn[de]=dt,U.push(wn.x,wn.y,wn.z),wn[ie]=0,wn[$]=0,wn[de]=Ye>0?1:-1,G.push(wn.x,wn.y,wn.z),V.push(Wn/it),V.push(1-gn/Me),hn+=1}}for(let gn=0;gn<Me;gn++)for(let ni=0;ni<it;ni++){const Wn=j+ni+St*gn,Vt=j+ni+St*(gn+1),dn=j+(ni+1)+St*(gn+1),Gn=j+(ni+1)+St*gn;F.push(Wn,Vt,Gn),F.push(Vt,dn,Gn),tn+=6}I.addGroup(Y,tn,Je),Y+=tn,j+=hn}}static fromJSON(n){return new Zl(n.width,n.height,n.depth,n.widthSegments,n.heightSegments,n.depthSegments)}}function Vc(B){const n={};for(const s in B){n[s]={};for(const u in B[s]){const f=B[s][u];f&&(f.isColor||f.isMatrix3||f.isMatrix4||f.isVector2||f.isVector3||f.isVector4||f.isTexture||f.isQuaternion)?n[s][u]=f.clone():Array.isArray(f)?n[s][u]=f.slice():n[s][u]=f}}return n}function ho(B){const n={};for(let s=0;s<B.length;s++){const u=Vc(B[s]);for(const f in u)n[f]=u[f]}return n}function av(B){const n=[];for(let s=0;s<B.length;s++)n.push(B[s].clone());return n}function dp(B){return B.getRenderTarget()===null&&B.outputEncoding===Ri?Wr:Ns}const Rd={clone:Vc,merge:ho};var Vx=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Qx=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class nl extends bo{constructor(n){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=Vx,this.fragmentShader=Qx,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,n!==void 0&&this.setValues(n)}copy(n){return super.copy(n),this.fragmentShader=n.fragmentShader,this.vertexShader=n.vertexShader,this.uniforms=Vc(n.uniforms),this.uniformsGroups=av(n.uniformsGroups),this.defines=Object.assign({},n.defines),this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.fog=n.fog,this.lights=n.lights,this.clipping=n.clipping,this.extensions=Object.assign({},n.extensions),this.glslVersion=n.glslVersion,this}toJSON(n){const s=super.toJSON(n);s.glslVersion=this.glslVersion,s.uniforms={};for(const f in this.uniforms){const T=this.uniforms[f].value;T&&T.isTexture?s.uniforms[f]={type:"t",value:T.toJSON(n).uuid}:T&&T.isColor?s.uniforms[f]={type:"c",value:T.getHex()}:T&&T.isVector2?s.uniforms[f]={type:"v2",value:T.toArray()}:T&&T.isVector3?s.uniforms[f]={type:"v3",value:T.toArray()}:T&&T.isVector4?s.uniforms[f]={type:"v4",value:T.toArray()}:T&&T.isMatrix3?s.uniforms[f]={type:"m3",value:T.toArray()}:T&&T.isMatrix4?s.uniforms[f]={type:"m4",value:T.toArray()}:s.uniforms[f]={value:T}}Object.keys(this.defines).length>0&&(s.defines=this.defines),s.vertexShader=this.vertexShader,s.fragmentShader=this.fragmentShader;const u={};for(const f in this.extensions)this.extensions[f]===!0&&(u[f]=!0);return Object.keys(u).length>0&&(s.extensions=u),s}}class Bd extends dr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Jn,this.projectionMatrix=new Jn,this.projectionMatrixInverse=new Jn}copy(n,s){return super.copy(n,s),this.matrixWorldInverse.copy(n.matrixWorldInverse),this.projectionMatrix.copy(n.projectionMatrix),this.projectionMatrixInverse.copy(n.projectionMatrixInverse),this}getWorldDirection(n){this.updateWorldMatrix(!0,!1);const s=this.matrixWorld.elements;return n.set(-s[8],-s[9],-s[10]).normalize()}updateMatrixWorld(n){super.updateMatrixWorld(n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(n,s){super.updateWorldMatrix(n,s),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class Ts extends Bd{constructor(n=50,s=1,u=.1,f=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=n,this.zoom=1,this.near=u,this.far=f,this.focus=10,this.aspect=s,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(n,s){return super.copy(n,s),this.fov=n.fov,this.zoom=n.zoom,this.near=n.near,this.far=n.far,this.focus=n.focus,this.aspect=n.aspect,this.view=n.view===null?null:Object.assign({},n.view),this.filmGauge=n.filmGauge,this.filmOffset=n.filmOffset,this}setFocalLength(n){const s=.5*this.getFilmHeight()/n;this.fov=El*2*Math.atan(s),this.updateProjectionMatrix()}getFocalLength(){const n=Math.tan(xo*.5*this.fov);return .5*this.getFilmHeight()/n}getEffectiveFOV(){return El*2*Math.atan(Math.tan(xo*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(n,s,u,f,w,T){this.aspect=n/s,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=n,this.view.fullHeight=s,this.view.offsetX=u,this.view.offsetY=f,this.view.width=w,this.view.height=T,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const n=this.near;let s=n*Math.tan(xo*.5*this.fov)/this.zoom,u=2*s,f=this.aspect*u,w=-.5*f;const T=this.view;if(this.view!==null&&this.view.enabled){const F=T.fullWidth,U=T.fullHeight;w+=T.offsetX*f/F,s-=T.offsetY*u/U,f*=T.width/F,u*=T.height/U}const I=this.filmOffset;I!==0&&(w+=n*I/this.getFilmWidth()),this.projectionMatrix.makePerspective(w,w+f,s,s-u,n,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(n){const s=super.toJSON(n);return s.object.fov=this.fov,s.object.zoom=this.zoom,s.object.near=this.near,s.object.far=this.far,s.object.focus=this.focus,s.object.aspect=this.aspect,this.view!==null&&(s.object.view=Object.assign({},this.view)),s.object.filmGauge=this.filmGauge,s.object.filmOffset=this.filmOffset,s}}const yu=-90,$l=1;class Ld extends dr{constructor(n,s,u){super(),this.type="CubeCamera",this.renderTarget=u;const f=new Ts(yu,$l,n,s);f.layers=this.layers,f.up.set(0,1,0),f.lookAt(1,0,0),this.add(f);const w=new Ts(yu,$l,n,s);w.layers=this.layers,w.up.set(0,1,0),w.lookAt(-1,0,0),this.add(w);const T=new Ts(yu,$l,n,s);T.layers=this.layers,T.up.set(0,0,-1),T.lookAt(0,1,0),this.add(T);const I=new Ts(yu,$l,n,s);I.layers=this.layers,I.up.set(0,0,1),I.lookAt(0,-1,0),this.add(I);const F=new Ts(yu,$l,n,s);F.layers=this.layers,F.up.set(0,1,0),F.lookAt(0,0,1),this.add(F);const U=new Ts(yu,$l,n,s);U.layers=this.layers,U.up.set(0,1,0),U.lookAt(0,0,-1),this.add(U)}update(n,s){this.parent===null&&this.updateMatrixWorld();const u=this.renderTarget,[f,w,T,I,F,U]=this.children,G=n.getRenderTarget(),V=n.toneMapping,j=n.xr.enabled;n.toneMapping=Bn,n.xr.enabled=!1;const Y=u.texture.generateMipmaps;u.texture.generateMipmaps=!1,n.setRenderTarget(u,0),n.render(s,f),n.setRenderTarget(u,1),n.render(s,w),n.setRenderTarget(u,2),n.render(s,T),n.setRenderTarget(u,3),n.render(s,I),n.setRenderTarget(u,4),n.render(s,F),u.texture.generateMipmaps=Y,n.setRenderTarget(u,5),n.render(s,U),n.setRenderTarget(G),n.toneMapping=V,n.xr.enabled=j,u.texture.needsPMREMUpdate=!0}}class Qc extends yr{constructor(n,s,u,f,w,T,I,F,U,G){n=n!==void 0?n:[],s=s!==void 0?s:Re,super(n,s,u,f,w,T,I,F,U,G),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(n){this.image=n}}class Dd extends Us{constructor(n=1,s={}){super(n,n,s),this.isWebGLCubeRenderTarget=!0;const u={width:n,height:n,depth:1},f=[u,u,u,u,u,u];this.texture=new Qc(f,s.mapping,s.wrapS,s.wrapT,s.magFilter,s.minFilter,s.format,s.type,s.anisotropy,s.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=s.generateMipmaps!==void 0?s.generateMipmaps:!1,this.texture.minFilter=s.minFilter!==void 0?s.minFilter:Te}fromEquirectangularTexture(n,s){this.texture.type=s.type,this.texture.encoding=s.encoding,this.texture.generateMipmaps=s.generateMipmaps,this.texture.minFilter=s.minFilter,this.texture.magFilter=s.magFilter;const u={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},f=new Zl(5,5,5),w=new nl({name:"CubemapFromEquirect",uniforms:Vc(u.uniforms),vertexShader:u.vertexShader,fragmentShader:u.fragmentShader,side:R,blending:O});w.uniforms.tEquirect.value=s;const T=new eo(f,w),I=s.minFilter;return s.minFilter===Ht&&(s.minFilter=Te),new Ld(1,10,this).update(n,T),s.minFilter=I,T.geometry.dispose(),T.material.dispose(),this}clear(n,s,u,f){const w=n.getRenderTarget();for(let T=0;T<6;T++)n.setRenderTarget(this,T),n.clear(s,u,f);n.setRenderTarget(w)}}const xh=new Qe,Pd=new Qe,Ag=new kr;class Sl{constructor(n=new Qe(1,0,0),s=0){this.isPlane=!0,this.normal=n,this.constant=s}set(n,s){return this.normal.copy(n),this.constant=s,this}setComponents(n,s,u,f){return this.normal.set(n,s,u),this.constant=f,this}setFromNormalAndCoplanarPoint(n,s){return this.normal.copy(n),this.constant=-s.dot(this.normal),this}setFromCoplanarPoints(n,s,u){const f=xh.subVectors(u,s).cross(Pd.subVectors(n,s)).normalize();return this.setFromNormalAndCoplanarPoint(f,n),this}copy(n){return this.normal.copy(n.normal),this.constant=n.constant,this}normalize(){const n=1/this.normal.length();return this.normal.multiplyScalar(n),this.constant*=n,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(n){return this.normal.dot(n)+this.constant}distanceToSphere(n){return this.distanceToPoint(n.center)-n.radius}projectPoint(n,s){return s.copy(this.normal).multiplyScalar(-this.distanceToPoint(n)).add(n)}intersectLine(n,s){const u=n.delta(xh),f=this.normal.dot(u);if(f===0)return this.distanceToPoint(n.start)===0?s.copy(n.start):null;const w=-(n.start.dot(this.normal)+this.constant)/f;return w<0||w>1?null:s.copy(u).multiplyScalar(w).add(n.start)}intersectsLine(n){const s=this.distanceToPoint(n.start),u=this.distanceToPoint(n.end);return s<0&&u>0||u<0&&s>0}intersectsBox(n){return n.intersectsPlane(this)}intersectsSphere(n){return n.intersectsPlane(this)}coplanarPoint(n){return n.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(n,s){const u=s||Ag.getNormalMatrix(n),f=this.coplanarPoint(xh).applyMatrix4(n),w=this.normal.applyMatrix3(u).normalize();return this.constant=-f.dot(w),this}translate(n){return this.constant-=n.dot(this.normal),this}equals(n){return n.normal.equals(this.normal)&&n.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Wc=new Ba,Od=new Qe;class Eh{constructor(n=new Sl,s=new Sl,u=new Sl,f=new Sl,w=new Sl,T=new Sl){this.planes=[n,s,u,f,w,T]}set(n,s,u,f,w,T){const I=this.planes;return I[0].copy(n),I[1].copy(s),I[2].copy(u),I[3].copy(f),I[4].copy(w),I[5].copy(T),this}copy(n){const s=this.planes;for(let u=0;u<6;u++)s[u].copy(n.planes[u]);return this}setFromProjectionMatrix(n){const s=this.planes,u=n.elements,f=u[0],w=u[1],T=u[2],I=u[3],F=u[4],U=u[5],G=u[6],V=u[7],j=u[8],Y=u[9],re=u[10],ie=u[11],$=u[12],de=u[13],Ce=u[14],ge=u[15];return s[0].setComponents(I-f,V-F,ie-j,ge-$).normalize(),s[1].setComponents(I+f,V+F,ie+j,ge+$).normalize(),s[2].setComponents(I+w,V+U,ie+Y,ge+de).normalize(),s[3].setComponents(I-w,V-U,ie-Y,ge-de).normalize(),s[4].setComponents(I-T,V-G,ie-re,ge-Ce).normalize(),s[5].setComponents(I+T,V+G,ie+re,ge+Ce).normalize(),this}intersectsObject(n){const s=n.geometry;return s.boundingSphere===null&&s.computeBoundingSphere(),Wc.copy(s.boundingSphere).applyMatrix4(n.matrixWorld),this.intersectsSphere(Wc)}intersectsSprite(n){return Wc.center.set(0,0,0),Wc.radius=.7071067811865476,Wc.applyMatrix4(n.matrixWorld),this.intersectsSphere(Wc)}intersectsSphere(n){const s=this.planes,u=n.center,f=-n.radius;for(let w=0;w<6;w++)if(s[w].distanceToPoint(u)<f)return!1;return!0}intersectsBox(n){const s=this.planes;for(let u=0;u<6;u++){const f=s[u];if(Od.x=f.normal.x>0?n.max.x:n.min.x,Od.y=f.normal.y>0?n.max.y:n.min.y,Od.z=f.normal.z>0?n.max.z:n.min.z,f.distanceToPoint(Od)<0)return!1}return!0}containsPoint(n){const s=this.planes;for(let u=0;u<6;u++)if(s[u].distanceToPoint(n)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function vg(){let B=null,n=!1,s=null,u=null;function f(w,T){s(w,T),u=B.requestAnimationFrame(f)}return{start:function(){n!==!0&&s!==null&&(u=B.requestAnimationFrame(f),n=!0)},stop:function(){B.cancelAnimationFrame(u),n=!1},setAnimationLoop:function(w){s=w},setContext:function(w){B=w}}}function fp(B,n){const s=n.isWebGL2,u=new WeakMap;function f(U,G){const V=U.array,j=U.usage,Y=B.createBuffer();B.bindBuffer(G,Y),B.bufferData(G,V,j),U.onUploadCallback();let re;if(V instanceof Float32Array)re=5126;else if(V instanceof Uint16Array)if(U.isFloat16BufferAttribute)if(s)re=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else re=5123;else if(V instanceof Int16Array)re=5122;else if(V instanceof Uint32Array)re=5125;else if(V instanceof Int32Array)re=5124;else if(V instanceof Int8Array)re=5120;else if(V instanceof Uint8Array)re=5121;else if(V instanceof Uint8ClampedArray)re=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+V);return{buffer:Y,type:re,bytesPerElement:V.BYTES_PER_ELEMENT,version:U.version}}function w(U,G,V){const j=G.array,Y=G.updateRange;B.bindBuffer(V,U),Y.count===-1?B.bufferSubData(V,0,j):(s?B.bufferSubData(V,Y.offset*j.BYTES_PER_ELEMENT,j,Y.offset,Y.count):B.bufferSubData(V,Y.offset*j.BYTES_PER_ELEMENT,j.subarray(Y.offset,Y.offset+Y.count)),Y.count=-1),G.onUploadCallback()}function T(U){return U.isInterleavedBufferAttribute&&(U=U.data),u.get(U)}function I(U){U.isInterleavedBufferAttribute&&(U=U.data);const G=u.get(U);G&&(B.deleteBuffer(G.buffer),u.delete(U))}function F(U,G){if(U.isGLBufferAttribute){const j=u.get(U);(!j||j.version<U.version)&&u.set(U,{buffer:U.buffer,type:U.type,bytesPerElement:U.elementSize,version:U.version});return}U.isInterleavedBufferAttribute&&(U=U.data);const V=u.get(U);V===void 0?u.set(U,f(U,G)):V.version<U.version&&(w(V.buffer,U,G),V.version=U.version)}return{get:T,remove:I,update:F}}class jc extends Wi{constructor(n=1,s=1,u=1,f=1){super(),this.type="PlaneGeometry",this.parameters={width:n,height:s,widthSegments:u,heightSegments:f};const w=n/2,T=s/2,I=Math.floor(u),F=Math.floor(f),U=I+1,G=F+1,V=n/I,j=s/F,Y=[],re=[],ie=[],$=[];for(let de=0;de<G;de++){const Ce=de*j-T;for(let ge=0;ge<U;ge++){const we=ge*V-w;re.push(we,-Ce,0),ie.push(0,0,1),$.push(ge/I),$.push(1-de/F)}}for(let de=0;de<F;de++)for(let Ce=0;Ce<I;Ce++){const ge=Ce+U*de,we=Ce+U*(de+1),Le=Ce+1+U*(de+1),Ye=Ce+1+U*de;Y.push(ge,we,Ye),Y.push(we,Le,Ye)}this.setIndex(Y),this.setAttribute("position",new li(re,3)),this.setAttribute("normal",new li(ie,3)),this.setAttribute("uv",new li($,2))}static fromJSON(n){return new jc(n.width,n.height,n.widthSegments,n.heightSegments)}}var xs=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,Ji=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Is=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,Rs=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,fo=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,fa=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,_h="vec3 transformed = vec3( position );",Hs=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Fd=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,wh=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,pp=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,yg=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,Nd=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,$o=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,xg=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Eg=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Ch=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,mp=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,_g=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,Xc=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,gp=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Kc=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Ap=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,kd=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,wg=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,vp=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,yp="gl_FragColor = linearToOutputTexel( gl_FragColor );",No=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,Yc=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Fa=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,xp=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,ea=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,lv=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Cg=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,Mg=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,Wx=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,qc=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,cv=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,uv=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,bg=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,xu=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,hv=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,dv=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Sg=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,Ep=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,jx=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,Xx=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,fv=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,pv=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,Eu=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Kx=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,_u=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,mv=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,ta=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Yx=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,gv=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,qx=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,Jx=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Av=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,vv=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Zx=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Na=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Tg=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,$x=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Jc=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,_p=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,wu=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,wp=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,Ig=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Rg=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,eE=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,yv=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,xv=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,Ev=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,_v=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,Bg=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,tE=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,nE=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,E=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,M=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,k=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,z=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,te=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,ue=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Ke=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,lt=`#if NUM_SPOT_LIGHT_COORDS > 0
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,kt=`#if NUM_SPOT_LIGHT_COORDS > 0
  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,En=`#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,$n=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,zi=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Ci=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,jr=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,vi=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,So=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,ka=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Mt=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,ft=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Lt=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,zn=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,pi=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,qi=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,Gi=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,Er=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,to=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,_r=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,Zc=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const er={alphamap_fragment:xs,alphamap_pars_fragment:Ji,alphatest_fragment:Is,alphatest_pars_fragment:Rs,aomap_fragment:fo,aomap_pars_fragment:fa,begin_vertex:_h,beginnormal_vertex:Hs,bsdfs:Fd,iridescence_fragment:wh,bumpmap_pars_fragment:pp,clipping_planes_fragment:yg,clipping_planes_pars_fragment:Nd,clipping_planes_pars_vertex:$o,clipping_planes_vertex:xg,color_fragment:Eg,color_pars_fragment:Ch,color_pars_vertex:mp,color_vertex:_g,common:Xc,cube_uv_reflection_fragment:gp,defaultnormal_vertex:Kc,displacementmap_pars_vertex:Ap,displacementmap_vertex:kd,emissivemap_fragment:wg,emissivemap_pars_fragment:vp,encodings_fragment:yp,encodings_pars_fragment:No,envmap_fragment:Yc,envmap_common_pars_fragment:Fa,envmap_pars_fragment:xp,envmap_pars_vertex:ea,envmap_physical_pars_fragment:Sg,envmap_vertex:lv,fog_vertex:Cg,fog_pars_vertex:Mg,fog_fragment:Wx,fog_pars_fragment:qc,gradientmap_pars_fragment:cv,lightmap_fragment:uv,lightmap_pars_fragment:bg,lights_lambert_fragment:xu,lights_lambert_pars_fragment:hv,lights_pars_begin:dv,lights_toon_fragment:Ep,lights_toon_pars_fragment:jx,lights_phong_fragment:Xx,lights_phong_pars_fragment:fv,lights_physical_fragment:pv,lights_physical_pars_fragment:Eu,lights_fragment_begin:Kx,lights_fragment_maps:_u,lights_fragment_end:mv,logdepthbuf_fragment:ta,logdepthbuf_pars_fragment:Yx,logdepthbuf_pars_vertex:gv,logdepthbuf_vertex:qx,map_fragment:Jx,map_pars_fragment:Av,map_particle_fragment:vv,map_particle_pars_fragment:Zx,metalnessmap_fragment:Na,metalnessmap_pars_fragment:Tg,morphcolor_vertex:$x,morphnormal_vertex:Jc,morphtarget_pars_vertex:_p,morphtarget_vertex:wu,normal_fragment_begin:wp,normal_fragment_maps:Ig,normal_pars_fragment:Rg,normal_pars_vertex:eE,normal_vertex:yv,normalmap_pars_fragment:xv,clearcoat_normal_fragment_begin:Ev,clearcoat_normal_fragment_maps:_v,clearcoat_pars_fragment:Bg,iridescence_pars_fragment:tE,output_fragment:nE,packing:E,premultiplied_alpha_fragment:M,project_vertex:k,dithering_fragment:z,dithering_pars_fragment:te,roughnessmap_fragment:ue,roughnessmap_pars_fragment:Ke,shadowmap_pars_fragment:lt,shadowmap_pars_vertex:kt,shadowmap_vertex:En,shadowmask_pars_fragment:$n,skinbase_vertex:zi,skinning_pars_vertex:Ci,skinning_vertex:jr,skinnormal_vertex:vi,specularmap_fragment:So,specularmap_pars_fragment:ka,tonemapping_fragment:Mt,tonemapping_pars_fragment:ft,transmission_fragment:Lt,transmission_pars_fragment:zn,uv_pars_fragment:pi,uv_pars_vertex:qi,uv_vertex:Gi,uv2_pars_fragment:Er,uv2_pars_vertex:to,uv2_vertex:_r,worldpos_vertex:Zc,background_vert:`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,background_frag:`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,backgroundCube_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,backgroundCube_frag:`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,cube_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,cube_frag:`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,depth_vert:`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,depth_frag:`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,distanceRGBA_vert:`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,distanceRGBA_frag:`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,equirect_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,equirect_frag:`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,linedashed_vert:`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,linedashed_frag:`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,meshbasic_vert:`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,meshbasic_frag:`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshlambert_vert:`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshlambert_frag:`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshmatcap_vert:`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,meshmatcap_frag:`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshnormal_vert:`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,meshnormal_frag:`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,meshphong_vert:`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshphong_frag:`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshphysical_vert:`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,meshphysical_frag:`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshtoon_vert:`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshtoon_frag:`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,points_vert:`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,points_frag:`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,shadow_vert:`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,shadow_frag:`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,sprite_vert:`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,sprite_frag:`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`},On={common:{diffuse:{value:new kn(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new kr},uv2Transform:{value:new kr},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new jt(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new kn(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new kn(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new kr}},sprite:{diffuse:{value:new kn(16777215)},opacity:{value:1},center:{value:new jt(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new kr}}},ec={basic:{uniforms:ho([On.common,On.specularmap,On.envmap,On.aomap,On.lightmap,On.fog]),vertexShader:er.meshbasic_vert,fragmentShader:er.meshbasic_frag},lambert:{uniforms:ho([On.common,On.specularmap,On.envmap,On.aomap,On.lightmap,On.emissivemap,On.bumpmap,On.normalmap,On.displacementmap,On.fog,On.lights,{emissive:{value:new kn(0)}}]),vertexShader:er.meshlambert_vert,fragmentShader:er.meshlambert_frag},phong:{uniforms:ho([On.common,On.specularmap,On.envmap,On.aomap,On.lightmap,On.emissivemap,On.bumpmap,On.normalmap,On.displacementmap,On.fog,On.lights,{emissive:{value:new kn(0)},specular:{value:new kn(1118481)},shininess:{value:30}}]),vertexShader:er.meshphong_vert,fragmentShader:er.meshphong_frag},standard:{uniforms:ho([On.common,On.envmap,On.aomap,On.lightmap,On.emissivemap,On.bumpmap,On.normalmap,On.displacementmap,On.roughnessmap,On.metalnessmap,On.fog,On.lights,{emissive:{value:new kn(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:er.meshphysical_vert,fragmentShader:er.meshphysical_frag},toon:{uniforms:ho([On.common,On.aomap,On.lightmap,On.emissivemap,On.bumpmap,On.normalmap,On.displacementmap,On.gradientmap,On.fog,On.lights,{emissive:{value:new kn(0)}}]),vertexShader:er.meshtoon_vert,fragmentShader:er.meshtoon_frag},matcap:{uniforms:ho([On.common,On.bumpmap,On.normalmap,On.displacementmap,On.fog,{matcap:{value:null}}]),vertexShader:er.meshmatcap_vert,fragmentShader:er.meshmatcap_frag},points:{uniforms:ho([On.points,On.fog]),vertexShader:er.points_vert,fragmentShader:er.points_frag},dashed:{uniforms:ho([On.common,On.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:er.linedashed_vert,fragmentShader:er.linedashed_frag},depth:{uniforms:ho([On.common,On.displacementmap]),vertexShader:er.depth_vert,fragmentShader:er.depth_frag},normal:{uniforms:ho([On.common,On.bumpmap,On.normalmap,On.displacementmap,{opacity:{value:1}}]),vertexShader:er.meshnormal_vert,fragmentShader:er.meshnormal_frag},sprite:{uniforms:ho([On.sprite,On.fog]),vertexShader:er.sprite_vert,fragmentShader:er.sprite_frag},background:{uniforms:{uvTransform:{value:new kr},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:er.background_vert,fragmentShader:er.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:er.backgroundCube_vert,fragmentShader:er.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:er.cube_vert,fragmentShader:er.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:er.equirect_vert,fragmentShader:er.equirect_frag},distanceRGBA:{uniforms:ho([On.common,On.displacementmap,{referencePosition:{value:new Qe},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:er.distanceRGBA_vert,fragmentShader:er.distanceRGBA_frag},shadow:{uniforms:ho([On.lights,On.fog,{color:{value:new kn(0)},opacity:{value:1}}]),vertexShader:er.shadow_vert,fragmentShader:er.shadow_frag}};ec.physical={uniforms:ho([ec.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new jt(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new kn(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new jt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new kn(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new kn(1,1,1)},specularColorMap:{value:null}}]),vertexShader:er.meshphysical_vert,fragmentShader:er.meshphysical_frag};const wv={r:0,b:0,g:0};function jP(B,n,s,u,f,w,T){const I=new kn(0);let F=w===!0?0:1,U,G,V=null,j=0,Y=null;function re($,de){let Ce=!1,ge=de.isScene===!0?de.background:null;ge&&ge.isTexture&&(ge=(de.backgroundBlurriness>0?s:n).get(ge));const we=B.xr,Le=we.getSession&&we.getSession();Le&&Le.environmentBlendMode==="additive"&&(ge=null),ge===null?ie(I,F):ge&&ge.isColor&&(ie(ge,1),Ce=!0),(B.autoClear||Ce)&&B.clear(B.autoClearColor,B.autoClearDepth,B.autoClearStencil),ge&&(ge.isCubeTexture||ge.mapping===Xe)?(G===void 0&&(G=new eo(new Zl(1,1,1),new nl({name:"BackgroundCubeMaterial",uniforms:Vc(ec.backgroundCube.uniforms),vertexShader:ec.backgroundCube.vertexShader,fragmentShader:ec.backgroundCube.fragmentShader,side:R,depthTest:!1,depthWrite:!1,fog:!1})),G.geometry.deleteAttribute("normal"),G.geometry.deleteAttribute("uv"),G.onBeforeRender=function(Ye,it,Me){this.matrixWorld.copyPosition(Me.matrixWorld)},Object.defineProperty(G.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),f.update(G)),G.material.uniforms.envMap.value=ge,G.material.uniforms.flipEnvMap.value=ge.isCubeTexture&&ge.isRenderTargetTexture===!1?-1:1,G.material.uniforms.backgroundBlurriness.value=de.backgroundBlurriness,G.material.uniforms.backgroundIntensity.value=de.backgroundIntensity,(V!==ge||j!==ge.version||Y!==B.toneMapping)&&(G.material.needsUpdate=!0,V=ge,j=ge.version,Y=B.toneMapping),G.layers.enableAll(),$.unshift(G,G.geometry,G.material,0,0,null)):ge&&ge.isTexture&&(U===void 0&&(U=new eo(new jc(2,2),new nl({name:"BackgroundMaterial",uniforms:Vc(ec.background.uniforms),vertexShader:ec.background.vertexShader,fragmentShader:ec.background.fragmentShader,side:S,depthTest:!1,depthWrite:!1,fog:!1})),U.geometry.deleteAttribute("normal"),Object.defineProperty(U.material,"map",{get:function(){return this.uniforms.t2D.value}}),f.update(U)),U.material.uniforms.t2D.value=ge,U.material.uniforms.backgroundIntensity.value=de.backgroundIntensity,ge.matrixAutoUpdate===!0&&ge.updateMatrix(),U.material.uniforms.uvTransform.value.copy(ge.matrix),(V!==ge||j!==ge.version||Y!==B.toneMapping)&&(U.material.needsUpdate=!0,V=ge,j=ge.version,Y=B.toneMapping),U.layers.enableAll(),$.unshift(U,U.geometry,U.material,0,0,null))}function ie($,de){$.getRGB(wv,dp(B)),u.buffers.color.setClear(wv.r,wv.g,wv.b,de,T)}return{getClearColor:function(){return I},setClearColor:function($,de=1){I.set($),F=de,ie(I,F)},getClearAlpha:function(){return F},setClearAlpha:function($){F=$,ie(I,F)},render:re}}function XP(B,n,s,u){const f=B.getParameter(34921),w=u.isWebGL2?null:n.get("OES_vertex_array_object"),T=u.isWebGL2||w!==null,I={},F=$(null);let U=F,G=!1;function V(dt,St,rn,hn,tn){let wn=!1;if(T){const gn=ie(hn,rn,St);U!==gn&&(U=gn,Y(U.object)),wn=de(dt,hn,rn,tn),wn&&Ce(dt,hn,rn,tn)}else{const gn=St.wireframe===!0;(U.geometry!==hn.id||U.program!==rn.id||U.wireframe!==gn)&&(U.geometry=hn.id,U.program=rn.id,U.wireframe=gn,wn=!0)}tn!==null&&s.update(tn,34963),(wn||G)&&(G=!1,Me(dt,St,rn,hn),tn!==null&&B.bindBuffer(34963,s.get(tn).buffer))}function j(){return u.isWebGL2?B.createVertexArray():w.createVertexArrayOES()}function Y(dt){return u.isWebGL2?B.bindVertexArray(dt):w.bindVertexArrayOES(dt)}function re(dt){return u.isWebGL2?B.deleteVertexArray(dt):w.deleteVertexArrayOES(dt)}function ie(dt,St,rn){const hn=rn.wireframe===!0;let tn=I[dt.id];tn===void 0&&(tn={},I[dt.id]=tn);let wn=tn[St.id];wn===void 0&&(wn={},tn[St.id]=wn);let gn=wn[hn];return gn===void 0&&(gn=$(j()),wn[hn]=gn),gn}function $(dt){const St=[],rn=[],hn=[];for(let tn=0;tn<f;tn++)St[tn]=0,rn[tn]=0,hn[tn]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:St,enabledAttributes:rn,attributeDivisors:hn,object:dt,attributes:{},index:null}}function de(dt,St,rn,hn){const tn=U.attributes,wn=St.attributes;let gn=0;const ni=rn.getAttributes();for(const Wn in ni)if(ni[Wn].location>=0){const dn=tn[Wn];let Gn=wn[Wn];if(Gn===void 0&&(Wn==="instanceMatrix"&&dt.instanceMatrix&&(Gn=dt.instanceMatrix),Wn==="instanceColor"&&dt.instanceColor&&(Gn=dt.instanceColor)),dn===void 0||dn.attribute!==Gn||Gn&&dn.data!==Gn.data)return!0;gn++}return U.attributesNum!==gn||U.index!==hn}function Ce(dt,St,rn,hn){const tn={},wn=St.attributes;let gn=0;const ni=rn.getAttributes();for(const Wn in ni)if(ni[Wn].location>=0){let dn=wn[Wn];dn===void 0&&(Wn==="instanceMatrix"&&dt.instanceMatrix&&(dn=dt.instanceMatrix),Wn==="instanceColor"&&dt.instanceColor&&(dn=dt.instanceColor));const Gn={};Gn.attribute=dn,dn&&dn.data&&(Gn.data=dn.data),tn[Wn]=Gn,gn++}U.attributes=tn,U.attributesNum=gn,U.index=hn}function ge(){const dt=U.newAttributes;for(let St=0,rn=dt.length;St<rn;St++)dt[St]=0}function we(dt){Le(dt,0)}function Le(dt,St){const rn=U.newAttributes,hn=U.enabledAttributes,tn=U.attributeDivisors;rn[dt]=1,hn[dt]===0&&(B.enableVertexAttribArray(dt),hn[dt]=1),tn[dt]!==St&&((u.isWebGL2?B:n.get("ANGLE_instanced_arrays"))[u.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](dt,St),tn[dt]=St)}function Ye(){const dt=U.newAttributes,St=U.enabledAttributes;for(let rn=0,hn=St.length;rn<hn;rn++)St[rn]!==dt[rn]&&(B.disableVertexAttribArray(rn),St[rn]=0)}function it(dt,St,rn,hn,tn,wn){u.isWebGL2===!0&&(rn===5124||rn===5125)?B.vertexAttribIPointer(dt,St,rn,tn,wn):B.vertexAttribPointer(dt,St,rn,hn,tn,wn)}function Me(dt,St,rn,hn){if(u.isWebGL2===!1&&(dt.isInstancedMesh||hn.isInstancedBufferGeometry)&&n.get("ANGLE_instanced_arrays")===null)return;ge();const tn=hn.attributes,wn=rn.getAttributes(),gn=St.defaultAttributeValues;for(const ni in wn){const Wn=wn[ni];if(Wn.location>=0){let Vt=tn[ni];if(Vt===void 0&&(ni==="instanceMatrix"&&dt.instanceMatrix&&(Vt=dt.instanceMatrix),ni==="instanceColor"&&dt.instanceColor&&(Vt=dt.instanceColor)),Vt!==void 0){const dn=Vt.normalized,Gn=Vt.itemSize,Dt=s.get(Vt);if(Dt===void 0)continue;const ai=Dt.buffer,Hn=Dt.type,Mi=Dt.bytesPerElement;if(Vt.isInterleavedBufferAttribute){const Tn=Vt.data,tr=Tn.stride,on=Vt.offset;if(Tn.isInstancedInterleavedBuffer){for(let $t=0;$t<Wn.locationSize;$t++)Le(Wn.location+$t,Tn.meshPerAttribute);dt.isInstancedMesh!==!0&&hn._maxInstanceCount===void 0&&(hn._maxInstanceCount=Tn.meshPerAttribute*Tn.count)}else for(let $t=0;$t<Wn.locationSize;$t++)we(Wn.location+$t);B.bindBuffer(34962,ai);for(let $t=0;$t<Wn.locationSize;$t++)it(Wn.location+$t,Gn/Wn.locationSize,Hn,dn,tr*Mi,(on+Gn/Wn.locationSize*$t)*Mi)}else{if(Vt.isInstancedBufferAttribute){for(let Tn=0;Tn<Wn.locationSize;Tn++)Le(Wn.location+Tn,Vt.meshPerAttribute);dt.isInstancedMesh!==!0&&hn._maxInstanceCount===void 0&&(hn._maxInstanceCount=Vt.meshPerAttribute*Vt.count)}else for(let Tn=0;Tn<Wn.locationSize;Tn++)we(Wn.location+Tn);B.bindBuffer(34962,ai);for(let Tn=0;Tn<Wn.locationSize;Tn++)it(Wn.location+Tn,Gn/Wn.locationSize,Hn,dn,Gn*Mi,Gn/Wn.locationSize*Tn*Mi)}}else if(gn!==void 0){const dn=gn[ni];if(dn!==void 0)switch(dn.length){case 2:B.vertexAttrib2fv(Wn.location,dn);break;case 3:B.vertexAttrib3fv(Wn.location,dn);break;case 4:B.vertexAttrib4fv(Wn.location,dn);break;default:B.vertexAttrib1fv(Wn.location,dn)}}}}Ye()}function Je(){Pt();for(const dt in I){const St=I[dt];for(const rn in St){const hn=St[rn];for(const tn in hn)re(hn[tn].object),delete hn[tn];delete St[rn]}delete I[dt]}}function tt(dt){if(I[dt.id]===void 0)return;const St=I[dt.id];for(const rn in St){const hn=St[rn];for(const tn in hn)re(hn[tn].object),delete hn[tn];delete St[rn]}delete I[dt.id]}function mt(dt){for(const St in I){const rn=I[St];if(rn[dt.id]===void 0)continue;const hn=rn[dt.id];for(const tn in hn)re(hn[tn].object),delete hn[tn];delete rn[dt.id]}}function Pt(){yt(),G=!0,U!==F&&(U=F,Y(U.object))}function yt(){F.geometry=null,F.program=null,F.wireframe=!1}return{setup:V,reset:Pt,resetDefaultState:yt,dispose:Je,releaseStatesOfGeometry:tt,releaseStatesOfProgram:mt,initAttributes:ge,enableAttribute:we,disableUnusedAttributes:Ye}}function KP(B,n,s,u){const f=u.isWebGL2;let w;function T(U){w=U}function I(U,G){B.drawArrays(w,U,G),s.update(G,w,1)}function F(U,G,V){if(V===0)return;let j,Y;if(f)j=B,Y="drawArraysInstanced";else if(j=n.get("ANGLE_instanced_arrays"),Y="drawArraysInstancedANGLE",j===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}j[Y](w,U,G,V),s.update(G,w,V)}this.setMode=T,this.render=I,this.renderInstances=F}function YP(B,n,s){let u;function f(){if(u!==void 0)return u;if(n.has("EXT_texture_filter_anisotropic")===!0){const it=n.get("EXT_texture_filter_anisotropic");u=B.getParameter(it.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else u=0;return u}function w(it){if(it==="highp"){if(B.getShaderPrecisionFormat(35633,36338).precision>0&&B.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";it="mediump"}return it==="mediump"&&B.getShaderPrecisionFormat(35633,36337).precision>0&&B.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const T=typeof WebGL2RenderingContext<"u"&&B instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&B instanceof WebGL2ComputeRenderingContext;let I=s.precision!==void 0?s.precision:"highp";const F=w(I);F!==I&&(console.warn("THREE.WebGLRenderer:",I,"not supported, using",F,"instead."),I=F);const U=T||n.has("WEBGL_draw_buffers"),G=s.logarithmicDepthBuffer===!0,V=B.getParameter(34930),j=B.getParameter(35660),Y=B.getParameter(3379),re=B.getParameter(34076),ie=B.getParameter(34921),$=B.getParameter(36347),de=B.getParameter(36348),Ce=B.getParameter(36349),ge=j>0,we=T||n.has("OES_texture_float"),Le=ge&&we,Ye=T?B.getParameter(36183):0;return{isWebGL2:T,drawBuffers:U,getMaxAnisotropy:f,getMaxPrecision:w,precision:I,logarithmicDepthBuffer:G,maxTextures:V,maxVertexTextures:j,maxTextureSize:Y,maxCubemapSize:re,maxAttributes:ie,maxVertexUniforms:$,maxVaryings:de,maxFragmentUniforms:Ce,vertexTextures:ge,floatFragmentTextures:we,floatVertexTextures:Le,maxSamples:Ye}}function qP(B){const n=this;let s=null,u=0,f=!1,w=!1;const T=new Sl,I=new kr,F={value:null,needsUpdate:!1};this.uniform=F,this.numPlanes=0,this.numIntersection=0,this.init=function(V,j,Y){const re=V.length!==0||j||u!==0||f;return f=j,s=G(V,Y,0),u=V.length,re},this.beginShadows=function(){w=!0,G(null)},this.endShadows=function(){w=!1,U()},this.setState=function(V,j,Y){const re=V.clippingPlanes,ie=V.clipIntersection,$=V.clipShadows,de=B.get(V);if(!f||re===null||re.length===0||w&&!$)w?G(null):U();else{const Ce=w?0:u,ge=Ce*4;let we=de.clippingState||null;F.value=we,we=G(re,j,ge,Y);for(let Le=0;Le!==ge;++Le)we[Le]=s[Le];de.clippingState=we,this.numIntersection=ie?this.numPlanes:0,this.numPlanes+=Ce}};function U(){F.value!==s&&(F.value=s,F.needsUpdate=u>0),n.numPlanes=u,n.numIntersection=0}function G(V,j,Y,re){const ie=V!==null?V.length:0;let $=null;if(ie!==0){if($=F.value,re!==!0||$===null){const de=Y+ie*4,Ce=j.matrixWorldInverse;I.getNormalMatrix(Ce),($===null||$.length<de)&&($=new Float32Array(de));for(let ge=0,we=Y;ge!==ie;++ge,we+=4)T.copy(V[ge]).applyMatrix4(Ce,I),T.normal.toArray($,we),$[we+3]=T.constant}F.value=$,F.needsUpdate=!0}return n.numPlanes=ie,n.numIntersection=0,$}}function JP(B){let n=new WeakMap;function s(T,I){return I===Be?T.mapping=Re:I===Ee&&(T.mapping=Se),T}function u(T){if(T&&T.isTexture&&T.isRenderTargetTexture===!1){const I=T.mapping;if(I===Be||I===Ee)if(n.has(T)){const F=n.get(T).texture;return s(F,T.mapping)}else{const F=T.image;if(F&&F.height>0){const U=new Dd(F.height/2);return U.fromEquirectangularTexture(B,T),n.set(T,U),T.addEventListener("dispose",f),s(U.texture,T.mapping)}else return null}}return T}function f(T){const I=T.target;I.removeEventListener("dispose",f);const F=n.get(I);F!==void 0&&(n.delete(I),F.dispose())}function w(){n=new WeakMap}return{get:u,dispose:w}}class Cv extends Bd{constructor(n=-1,s=1,u=1,f=-1,w=.1,T=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=n,this.right=s,this.top=u,this.bottom=f,this.near=w,this.far=T,this.updateProjectionMatrix()}copy(n,s){return super.copy(n,s),this.left=n.left,this.right=n.right,this.top=n.top,this.bottom=n.bottom,this.near=n.near,this.far=n.far,this.zoom=n.zoom,this.view=n.view===null?null:Object.assign({},n.view),this}setViewOffset(n,s,u,f,w,T){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=n,this.view.fullHeight=s,this.view.offsetX=u,this.view.offsetY=f,this.view.width=w,this.view.height=T,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const n=(this.right-this.left)/(2*this.zoom),s=(this.top-this.bottom)/(2*this.zoom),u=(this.right+this.left)/2,f=(this.top+this.bottom)/2;let w=u-n,T=u+n,I=f+s,F=f-s;if(this.view!==null&&this.view.enabled){const U=(this.right-this.left)/this.view.fullWidth/this.zoom,G=(this.top-this.bottom)/this.view.fullHeight/this.zoom;w+=U*this.view.offsetX,T=w+U*this.view.width,I-=G*this.view.offsetY,F=I-G*this.view.height}this.projectionMatrix.makeOrthographic(w,T,I,F,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(n){const s=super.toJSON(n);return s.object.zoom=this.zoom,s.object.left=this.left,s.object.right=this.right,s.object.top=this.top,s.object.bottom=this.bottom,s.object.near=this.near,s.object.far=this.far,this.view!==null&&(s.object.view=Object.assign({},this.view)),s}}const Cp=4,GM=[.125,.215,.35,.446,.526,.582],Ud=20,iE=new Cv,HM=new kn;let rE=null;const zd=(1+Math.sqrt(5))/2,Mp=1/zd,VM=[new Qe(1,1,1),new Qe(-1,1,1),new Qe(1,1,-1),new Qe(-1,1,-1),new Qe(0,zd,Mp),new Qe(0,zd,-Mp),new Qe(Mp,0,zd),new Qe(-Mp,0,zd),new Qe(zd,Mp,0),new Qe(-zd,Mp,0)];class sE{constructor(n){this._renderer=n,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(n,s=0,u=.1,f=100){rE=this._renderer.getRenderTarget(),this._setSize(256);const w=this._allocateTargets();return w.depthBuffer=!0,this._sceneToCubeUV(n,u,f,w),s>0&&this._blur(w,0,0,s),this._applyPMREM(w),this._cleanup(w),w}fromEquirectangular(n,s=null){return this._fromTexture(n,s)}fromCubemap(n,s=null){return this._fromTexture(n,s)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=jM(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=WM(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(n){this._lodMax=Math.floor(Math.log2(n)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let n=0;n<this._lodPlanes.length;n++)this._lodPlanes[n].dispose()}_cleanup(n){this._renderer.setRenderTarget(rE),n.scissorTest=!1,Mv(n,0,0,n.width,n.height)}_fromTexture(n,s){n.mapping===Re||n.mapping===Se?this._setSize(n.image.length===0?16:n.image[0].width||n.image[0].image.width):this._setSize(n.image.width/4),rE=this._renderer.getRenderTarget();const u=s||this._allocateTargets();return this._textureToCubeUV(n,u),this._applyPMREM(u),this._cleanup(u),u}_allocateTargets(){const n=3*Math.max(this._cubeSize,112),s=4*this._cubeSize,u={magFilter:Te,minFilter:Te,generateMipmaps:!1,type:Nt,format:At,encoding:ar,depthBuffer:!1},f=QM(n,s,u);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=QM(n,s,u);const{_lodMax:w}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=ZP(w)),this._blurMaterial=$P(w,n,s)}return f}_compileMaterial(n){const s=new eo(this._lodPlanes[0],n);this._renderer.compile(s,iE)}_sceneToCubeUV(n,s,u,f){const I=new Ts(90,1,s,u),F=[1,-1,1,1,1,1],U=[1,1,1,-1,-1,-1],G=this._renderer,V=G.autoClear,j=G.toneMapping;G.getClearColor(HM),G.toneMapping=Bn,G.autoClear=!1;const Y=new Uc({name:"PMREM.Background",side:R,depthWrite:!1,depthTest:!1}),re=new eo(new Zl,Y);let ie=!1;const $=n.background;$?$.isColor&&(Y.color.copy($),n.background=null,ie=!0):(Y.color.copy(HM),ie=!0);for(let de=0;de<6;de++){const Ce=de%3;Ce===0?(I.up.set(0,F[de],0),I.lookAt(U[de],0,0)):Ce===1?(I.up.set(0,0,F[de]),I.lookAt(0,U[de],0)):(I.up.set(0,F[de],0),I.lookAt(0,0,U[de]));const ge=this._cubeSize;Mv(f,Ce*ge,de>2?ge:0,ge,ge),G.setRenderTarget(f),ie&&G.render(re,I),G.render(n,I)}re.geometry.dispose(),re.material.dispose(),G.toneMapping=j,G.autoClear=V,n.background=$}_textureToCubeUV(n,s){const u=this._renderer,f=n.mapping===Re||n.mapping===Se;f?(this._cubemapMaterial===null&&(this._cubemapMaterial=jM()),this._cubemapMaterial.uniforms.flipEnvMap.value=n.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=WM());const w=f?this._cubemapMaterial:this._equirectMaterial,T=new eo(this._lodPlanes[0],w),I=w.uniforms;I.envMap.value=n;const F=this._cubeSize;Mv(s,0,0,3*F,2*F),u.setRenderTarget(s),u.render(T,iE)}_applyPMREM(n){const s=this._renderer,u=s.autoClear;s.autoClear=!1;for(let f=1;f<this._lodPlanes.length;f++){const w=Math.sqrt(this._sigmas[f]*this._sigmas[f]-this._sigmas[f-1]*this._sigmas[f-1]),T=VM[(f-1)%VM.length];this._blur(n,f-1,f,w,T)}s.autoClear=u}_blur(n,s,u,f,w){const T=this._pingPongRenderTarget;this._halfBlur(n,T,s,u,f,"latitudinal",w),this._halfBlur(T,n,u,u,f,"longitudinal",w)}_halfBlur(n,s,u,f,w,T,I){const F=this._renderer,U=this._blurMaterial;T!=="latitudinal"&&T!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const G=3,V=new eo(this._lodPlanes[f],U),j=U.uniforms,Y=this._sizeLods[u]-1,re=isFinite(w)?Math.PI/(2*Y):2*Math.PI/(2*Ud-1),ie=w/re,$=isFinite(w)?1+Math.floor(G*ie):Ud;$>Ud&&console.warn(`sigmaRadians, ${w}, is too large and will clip, as it requested ${$} samples when the maximum is set to ${Ud}`);const de=[];let Ce=0;for(let it=0;it<Ud;++it){const Me=it/ie,Je=Math.exp(-Me*Me/2);de.push(Je),it===0?Ce+=Je:it<$&&(Ce+=2*Je)}for(let it=0;it<de.length;it++)de[it]=de[it]/Ce;j.envMap.value=n.texture,j.samples.value=$,j.weights.value=de,j.latitudinal.value=T==="latitudinal",I&&(j.poleAxis.value=I);const{_lodMax:ge}=this;j.dTheta.value=re,j.mipInt.value=ge-u;const we=this._sizeLods[f],Le=3*we*(f>ge-Cp?f-ge+Cp:0),Ye=4*(this._cubeSize-we);Mv(s,Le,Ye,3*we,2*we),F.setRenderTarget(s),F.render(V,iE)}}function ZP(B){const n=[],s=[],u=[];let f=B;const w=B-Cp+1+GM.length;for(let T=0;T<w;T++){const I=Math.pow(2,f);s.push(I);let F=1/I;T>B-Cp?F=GM[T-B+Cp-1]:T===0&&(F=0),u.push(F);const U=1/(I-2),G=-U,V=1+U,j=[G,G,V,G,V,V,G,G,V,V,G,V],Y=6,re=6,ie=3,$=2,de=1,Ce=new Float32Array(ie*re*Y),ge=new Float32Array($*re*Y),we=new Float32Array(de*re*Y);for(let Ye=0;Ye<Y;Ye++){const it=Ye%3*2/3-1,Me=Ye>2?0:-1,Je=[it,Me,0,it+2/3,Me,0,it+2/3,Me+1,0,it,Me,0,it+2/3,Me+1,0,it,Me+1,0];Ce.set(Je,ie*re*Ye),ge.set(j,$*re*Ye);const tt=[Ye,Ye,Ye,Ye,Ye,Ye];we.set(tt,de*re*Ye)}const Le=new Wi;Le.setAttribute("position",new Hr(Ce,ie)),Le.setAttribute("uv",new Hr(ge,$)),Le.setAttribute("faceIndex",new Hr(we,de)),n.push(Le),f>Cp&&f--}return{lodPlanes:n,sizeLods:s,sigmas:u}}function QM(B,n,s){const u=new Us(B,n,s);return u.texture.mapping=Xe,u.texture.name="PMREM.cubeUv",u.scissorTest=!0,u}function Mv(B,n,s,u,f){B.viewport.set(n,s,u,f),B.scissor.set(n,s,u,f)}function $P(B,n,s){const u=new Float32Array(Ud),f=new Qe(0,1,0);return new nl({name:"SphericalGaussianBlur",defines:{n:Ud,CUBEUV_TEXEL_WIDTH:1/n,CUBEUV_TEXEL_HEIGHT:1/s,CUBEUV_MAX_MIP:`${B}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:u},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:f}},vertexShader:oE(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:O,depthTest:!1,depthWrite:!1})}function WM(){return new nl({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:oE(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:O,depthTest:!1,depthWrite:!1})}function jM(){return new nl({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:oE(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:O,depthTest:!1,depthWrite:!1})}function oE(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function e4(B){let n=new WeakMap,s=null;function u(I){if(I&&I.isTexture){const F=I.mapping,U=F===Be||F===Ee,G=F===Re||F===Se;if(U||G)if(I.isRenderTargetTexture&&I.needsPMREMUpdate===!0){I.needsPMREMUpdate=!1;let V=n.get(I);return s===null&&(s=new sE(B)),V=U?s.fromEquirectangular(I,V):s.fromCubemap(I,V),n.set(I,V),V.texture}else{if(n.has(I))return n.get(I).texture;{const V=I.image;if(U&&V&&V.height>0||G&&V&&f(V)){s===null&&(s=new sE(B));const j=U?s.fromEquirectangular(I):s.fromCubemap(I);return n.set(I,j),I.addEventListener("dispose",w),j.texture}else return null}}}return I}function f(I){let F=0;const U=6;for(let G=0;G<U;G++)I[G]!==void 0&&F++;return F===U}function w(I){const F=I.target;F.removeEventListener("dispose",w);const U=n.get(F);U!==void 0&&(n.delete(F),U.dispose())}function T(){n=new WeakMap,s!==null&&(s.dispose(),s=null)}return{get:u,dispose:T}}function t4(B){const n={};function s(u){if(n[u]!==void 0)return n[u];let f;switch(u){case"WEBGL_depth_texture":f=B.getExtension("WEBGL_depth_texture")||B.getExtension("MOZ_WEBGL_depth_texture")||B.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":f=B.getExtension("EXT_texture_filter_anisotropic")||B.getExtension("MOZ_EXT_texture_filter_anisotropic")||B.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":f=B.getExtension("WEBGL_compressed_texture_s3tc")||B.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||B.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":f=B.getExtension("WEBGL_compressed_texture_pvrtc")||B.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:f=B.getExtension(u)}return n[u]=f,f}return{has:function(u){return s(u)!==null},init:function(u){u.isWebGL2?s("EXT_color_buffer_float"):(s("WEBGL_depth_texture"),s("OES_texture_float"),s("OES_texture_half_float"),s("OES_texture_half_float_linear"),s("OES_standard_derivatives"),s("OES_element_index_uint"),s("OES_vertex_array_object"),s("ANGLE_instanced_arrays")),s("OES_texture_float_linear"),s("EXT_color_buffer_half_float"),s("WEBGL_multisampled_render_to_texture")},get:function(u){const f=s(u);return f===null&&console.warn("THREE.WebGLRenderer: "+u+" extension not supported."),f}}}function n4(B,n,s,u){const f={},w=new WeakMap;function T(V){const j=V.target;j.index!==null&&n.remove(j.index);for(const re in j.attributes)n.remove(j.attributes[re]);j.removeEventListener("dispose",T),delete f[j.id];const Y=w.get(j);Y&&(n.remove(Y),w.delete(j)),u.releaseStatesOfGeometry(j),j.isInstancedBufferGeometry===!0&&delete j._maxInstanceCount,s.memory.geometries--}function I(V,j){return f[j.id]===!0||(j.addEventListener("dispose",T),f[j.id]=!0,s.memory.geometries++),j}function F(V){const j=V.attributes;for(const re in j)n.update(j[re],34962);const Y=V.morphAttributes;for(const re in Y){const ie=Y[re];for(let $=0,de=ie.length;$<de;$++)n.update(ie[$],34962)}}function U(V){const j=[],Y=V.index,re=V.attributes.position;let ie=0;if(Y!==null){const Ce=Y.array;ie=Y.version;for(let ge=0,we=Ce.length;ge<we;ge+=3){const Le=Ce[ge+0],Ye=Ce[ge+1],it=Ce[ge+2];j.push(Le,Ye,Ye,it,it,Le)}}else{const Ce=re.array;ie=re.version;for(let ge=0,we=Ce.length/3-1;ge<we;ge+=3){const Le=ge+0,Ye=ge+1,it=ge+2;j.push(Le,Ye,Ye,it,it,Le)}}const $=new(Bc(j)?Md:Cd)(j,1);$.version=ie;const de=w.get(V);de&&n.remove(de),w.set(V,$)}function G(V){const j=w.get(V);if(j){const Y=V.index;Y!==null&&j.version<Y.version&&U(V)}else U(V);return w.get(V)}return{get:I,update:F,getWireframeAttribute:G}}function i4(B,n,s,u){const f=u.isWebGL2;let w;function T(j){w=j}let I,F;function U(j){I=j.type,F=j.bytesPerElement}function G(j,Y){B.drawElements(w,Y,I,j*F),s.update(Y,w,1)}function V(j,Y,re){if(re===0)return;let ie,$;if(f)ie=B,$="drawElementsInstanced";else if(ie=n.get("ANGLE_instanced_arrays"),$="drawElementsInstancedANGLE",ie===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}ie[$](w,Y,I,j*F,re),s.update(Y,w,re)}this.setMode=T,this.setIndex=U,this.render=G,this.renderInstances=V}function r4(B){const n={geometries:0,textures:0},s={frame:0,calls:0,triangles:0,points:0,lines:0};function u(w,T,I){switch(s.calls++,T){case 4:s.triangles+=I*(w/3);break;case 1:s.lines+=I*(w/2);break;case 3:s.lines+=I*(w-1);break;case 2:s.lines+=I*w;break;case 0:s.points+=I*w;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",T);break}}function f(){s.frame++,s.calls=0,s.triangles=0,s.points=0,s.lines=0}return{memory:n,render:s,programs:null,autoReset:!0,reset:f,update:u}}function s4(B,n){return B[0]-n[0]}function o4(B,n){return Math.abs(n[1])-Math.abs(B[1])}function a4(B,n,s){const u={},f=new Float32Array(8),w=new WeakMap,T=new hr,I=[];for(let U=0;U<8;U++)I[U]=[U,0];function F(U,G,V,j){const Y=U.morphTargetInfluences;if(n.isWebGL2===!0){const ie=G.morphAttributes.position||G.morphAttributes.normal||G.morphAttributes.color,$=ie!==void 0?ie.length:0;let de=w.get(G);if(de===void 0||de.count!==$){let rn=function(){dt.dispose(),w.delete(G),G.removeEventListener("dispose",rn)};var re=rn;de!==void 0&&de.texture.dispose();const we=G.morphAttributes.position!==void 0,Le=G.morphAttributes.normal!==void 0,Ye=G.morphAttributes.color!==void 0,it=G.morphAttributes.position||[],Me=G.morphAttributes.normal||[],Je=G.morphAttributes.color||[];let tt=0;we===!0&&(tt=1),Le===!0&&(tt=2),Ye===!0&&(tt=3);let mt=G.attributes.position.count*tt,Pt=1;mt>n.maxTextureSize&&(Pt=Math.ceil(mt/n.maxTextureSize),mt=n.maxTextureSize);const yt=new Float32Array(mt*Pt*4*$),dt=new Oc(yt,mt,Pt,$);dt.type=vn,dt.needsUpdate=!0;const St=tt*4;for(let hn=0;hn<$;hn++){const tn=it[hn],wn=Me[hn],gn=Je[hn],ni=mt*Pt*4*hn;for(let Wn=0;Wn<tn.count;Wn++){const Vt=Wn*St;we===!0&&(T.fromBufferAttribute(tn,Wn),yt[ni+Vt+0]=T.x,yt[ni+Vt+1]=T.y,yt[ni+Vt+2]=T.z,yt[ni+Vt+3]=0),Le===!0&&(T.fromBufferAttribute(wn,Wn),yt[ni+Vt+4]=T.x,yt[ni+Vt+5]=T.y,yt[ni+Vt+6]=T.z,yt[ni+Vt+7]=0),Ye===!0&&(T.fromBufferAttribute(gn,Wn),yt[ni+Vt+8]=T.x,yt[ni+Vt+9]=T.y,yt[ni+Vt+10]=T.z,yt[ni+Vt+11]=gn.itemSize===4?T.w:1)}}de={count:$,texture:dt,size:new jt(mt,Pt)},w.set(G,de),G.addEventListener("dispose",rn)}let Ce=0;for(let we=0;we<Y.length;we++)Ce+=Y[we];const ge=G.morphTargetsRelative?1:1-Ce;j.getUniforms().setValue(B,"morphTargetBaseInfluence",ge),j.getUniforms().setValue(B,"morphTargetInfluences",Y),j.getUniforms().setValue(B,"morphTargetsTexture",de.texture,s),j.getUniforms().setValue(B,"morphTargetsTextureSize",de.size)}else{const ie=Y===void 0?0:Y.length;let $=u[G.id];if($===void 0||$.length!==ie){$=[];for(let Le=0;Le<ie;Le++)$[Le]=[Le,0];u[G.id]=$}for(let Le=0;Le<ie;Le++){const Ye=$[Le];Ye[0]=Le,Ye[1]=Y[Le]}$.sort(o4);for(let Le=0;Le<8;Le++)Le<ie&&$[Le][1]?(I[Le][0]=$[Le][0],I[Le][1]=$[Le][1]):(I[Le][0]=Number.MAX_SAFE_INTEGER,I[Le][1]=0);I.sort(s4);const de=G.morphAttributes.position,Ce=G.morphAttributes.normal;let ge=0;for(let Le=0;Le<8;Le++){const Ye=I[Le],it=Ye[0],Me=Ye[1];it!==Number.MAX_SAFE_INTEGER&&Me?(de&&G.getAttribute("morphTarget"+Le)!==de[it]&&G.setAttribute("morphTarget"+Le,de[it]),Ce&&G.getAttribute("morphNormal"+Le)!==Ce[it]&&G.setAttribute("morphNormal"+Le,Ce[it]),f[Le]=Me,ge+=Me):(de&&G.hasAttribute("morphTarget"+Le)===!0&&G.deleteAttribute("morphTarget"+Le),Ce&&G.hasAttribute("morphNormal"+Le)===!0&&G.deleteAttribute("morphNormal"+Le),f[Le]=0)}const we=G.morphTargetsRelative?1:1-ge;j.getUniforms().setValue(B,"morphTargetBaseInfluence",we),j.getUniforms().setValue(B,"morphTargetInfluences",f)}}return{update:F}}function l4(B,n,s,u){let f=new WeakMap;function w(F){const U=u.render.frame,G=F.geometry,V=n.get(F,G);return f.get(V)!==U&&(n.update(V),f.set(V,U)),F.isInstancedMesh&&(F.hasEventListener("dispose",I)===!1&&F.addEventListener("dispose",I),s.update(F.instanceMatrix,34962),F.instanceColor!==null&&s.update(F.instanceColor,34962)),V}function T(){f=new WeakMap}function I(F){const U=F.target;U.removeEventListener("dispose",I),s.remove(U.instanceMatrix),U.instanceColor!==null&&s.remove(U.instanceColor)}return{update:w,dispose:T}}const XM=new yr,KM=new Oc,YM=new Gr,qM=new Qc,JM=[],ZM=[],$M=new Float32Array(16),eb=new Float32Array(9),tb=new Float32Array(4);function bp(B,n,s){const u=B[0];if(u<=0||u>0)return B;const f=n*s;let w=JM[f];if(w===void 0&&(w=new Float32Array(f),JM[f]=w),n!==0){u.toArray(w,0);for(let T=1,I=0;T!==n;++T)I+=s,B[T].toArray(w,I)}return w}function po(B,n){if(B.length!==n.length)return!1;for(let s=0,u=B.length;s<u;s++)if(B[s]!==n[s])return!1;return!0}function mo(B,n){for(let s=0,u=n.length;s<u;s++)B[s]=n[s]}function bv(B,n){let s=ZM[n];s===void 0&&(s=new Int32Array(n),ZM[n]=s);for(let u=0;u!==n;++u)s[u]=B.allocateTextureUnit();return s}function c4(B,n){const s=this.cache;s[0]!==n&&(B.uniform1f(this.addr,n),s[0]=n)}function u4(B,n){const s=this.cache;if(n.x!==void 0)(s[0]!==n.x||s[1]!==n.y)&&(B.uniform2f(this.addr,n.x,n.y),s[0]=n.x,s[1]=n.y);else{if(po(s,n))return;B.uniform2fv(this.addr,n),mo(s,n)}}function h4(B,n){const s=this.cache;if(n.x!==void 0)(s[0]!==n.x||s[1]!==n.y||s[2]!==n.z)&&(B.uniform3f(this.addr,n.x,n.y,n.z),s[0]=n.x,s[1]=n.y,s[2]=n.z);else if(n.r!==void 0)(s[0]!==n.r||s[1]!==n.g||s[2]!==n.b)&&(B.uniform3f(this.addr,n.r,n.g,n.b),s[0]=n.r,s[1]=n.g,s[2]=n.b);else{if(po(s,n))return;B.uniform3fv(this.addr,n),mo(s,n)}}function d4(B,n){const s=this.cache;if(n.x!==void 0)(s[0]!==n.x||s[1]!==n.y||s[2]!==n.z||s[3]!==n.w)&&(B.uniform4f(this.addr,n.x,n.y,n.z,n.w),s[0]=n.x,s[1]=n.y,s[2]=n.z,s[3]=n.w);else{if(po(s,n))return;B.uniform4fv(this.addr,n),mo(s,n)}}function f4(B,n){const s=this.cache,u=n.elements;if(u===void 0){if(po(s,n))return;B.uniformMatrix2fv(this.addr,!1,n),mo(s,n)}else{if(po(s,u))return;tb.set(u),B.uniformMatrix2fv(this.addr,!1,tb),mo(s,u)}}function p4(B,n){const s=this.cache,u=n.elements;if(u===void 0){if(po(s,n))return;B.uniformMatrix3fv(this.addr,!1,n),mo(s,n)}else{if(po(s,u))return;eb.set(u),B.uniformMatrix3fv(this.addr,!1,eb),mo(s,u)}}function m4(B,n){const s=this.cache,u=n.elements;if(u===void 0){if(po(s,n))return;B.uniformMatrix4fv(this.addr,!1,n),mo(s,n)}else{if(po(s,u))return;$M.set(u),B.uniformMatrix4fv(this.addr,!1,$M),mo(s,u)}}function g4(B,n){const s=this.cache;s[0]!==n&&(B.uniform1i(this.addr,n),s[0]=n)}function A4(B,n){const s=this.cache;if(n.x!==void 0)(s[0]!==n.x||s[1]!==n.y)&&(B.uniform2i(this.addr,n.x,n.y),s[0]=n.x,s[1]=n.y);else{if(po(s,n))return;B.uniform2iv(this.addr,n),mo(s,n)}}function v4(B,n){const s=this.cache;if(n.x!==void 0)(s[0]!==n.x||s[1]!==n.y||s[2]!==n.z)&&(B.uniform3i(this.addr,n.x,n.y,n.z),s[0]=n.x,s[1]=n.y,s[2]=n.z);else{if(po(s,n))return;B.uniform3iv(this.addr,n),mo(s,n)}}function y4(B,n){const s=this.cache;if(n.x!==void 0)(s[0]!==n.x||s[1]!==n.y||s[2]!==n.z||s[3]!==n.w)&&(B.uniform4i(this.addr,n.x,n.y,n.z,n.w),s[0]=n.x,s[1]=n.y,s[2]=n.z,s[3]=n.w);else{if(po(s,n))return;B.uniform4iv(this.addr,n),mo(s,n)}}function x4(B,n){const s=this.cache;s[0]!==n&&(B.uniform1ui(this.addr,n),s[0]=n)}function E4(B,n){const s=this.cache;if(n.x!==void 0)(s[0]!==n.x||s[1]!==n.y)&&(B.uniform2ui(this.addr,n.x,n.y),s[0]=n.x,s[1]=n.y);else{if(po(s,n))return;B.uniform2uiv(this.addr,n),mo(s,n)}}function _4(B,n){const s=this.cache;if(n.x!==void 0)(s[0]!==n.x||s[1]!==n.y||s[2]!==n.z)&&(B.uniform3ui(this.addr,n.x,n.y,n.z),s[0]=n.x,s[1]=n.y,s[2]=n.z);else{if(po(s,n))return;B.uniform3uiv(this.addr,n),mo(s,n)}}function w4(B,n){const s=this.cache;if(n.x!==void 0)(s[0]!==n.x||s[1]!==n.y||s[2]!==n.z||s[3]!==n.w)&&(B.uniform4ui(this.addr,n.x,n.y,n.z,n.w),s[0]=n.x,s[1]=n.y,s[2]=n.z,s[3]=n.w);else{if(po(s,n))return;B.uniform4uiv(this.addr,n),mo(s,n)}}function C4(B,n,s){const u=this.cache,f=s.allocateTextureUnit();u[0]!==f&&(B.uniform1i(this.addr,f),u[0]=f),s.setTexture2D(n||XM,f)}function M4(B,n,s){const u=this.cache,f=s.allocateTextureUnit();u[0]!==f&&(B.uniform1i(this.addr,f),u[0]=f),s.setTexture3D(n||YM,f)}function b4(B,n,s){const u=this.cache,f=s.allocateTextureUnit();u[0]!==f&&(B.uniform1i(this.addr,f),u[0]=f),s.setTextureCube(n||qM,f)}function S4(B,n,s){const u=this.cache,f=s.allocateTextureUnit();u[0]!==f&&(B.uniform1i(this.addr,f),u[0]=f),s.setTexture2DArray(n||KM,f)}function T4(B){switch(B){case 5126:return c4;case 35664:return u4;case 35665:return h4;case 35666:return d4;case 35674:return f4;case 35675:return p4;case 35676:return m4;case 5124:case 35670:return g4;case 35667:case 35671:return A4;case 35668:case 35672:return v4;case 35669:case 35673:return y4;case 5125:return x4;case 36294:return E4;case 36295:return _4;case 36296:return w4;case 35678:case 36198:case 36298:case 36306:case 35682:return C4;case 35679:case 36299:case 36307:return M4;case 35680:case 36300:case 36308:case 36293:return b4;case 36289:case 36303:case 36311:case 36292:return S4}}function I4(B,n){B.uniform1fv(this.addr,n)}function R4(B,n){const s=bp(n,this.size,2);B.uniform2fv(this.addr,s)}function B4(B,n){const s=bp(n,this.size,3);B.uniform3fv(this.addr,s)}function L4(B,n){const s=bp(n,this.size,4);B.uniform4fv(this.addr,s)}function D4(B,n){const s=bp(n,this.size,4);B.uniformMatrix2fv(this.addr,!1,s)}function P4(B,n){const s=bp(n,this.size,9);B.uniformMatrix3fv(this.addr,!1,s)}function O4(B,n){const s=bp(n,this.size,16);B.uniformMatrix4fv(this.addr,!1,s)}function F4(B,n){B.uniform1iv(this.addr,n)}function N4(B,n){B.uniform2iv(this.addr,n)}function k4(B,n){B.uniform3iv(this.addr,n)}function U4(B,n){B.uniform4iv(this.addr,n)}function z4(B,n){B.uniform1uiv(this.addr,n)}function G4(B,n){B.uniform2uiv(this.addr,n)}function H4(B,n){B.uniform3uiv(this.addr,n)}function V4(B,n){B.uniform4uiv(this.addr,n)}function Q4(B,n,s){const u=this.cache,f=n.length,w=bv(s,f);po(u,w)||(B.uniform1iv(this.addr,w),mo(u,w));for(let T=0;T!==f;++T)s.setTexture2D(n[T]||XM,w[T])}function W4(B,n,s){const u=this.cache,f=n.length,w=bv(s,f);po(u,w)||(B.uniform1iv(this.addr,w),mo(u,w));for(let T=0;T!==f;++T)s.setTexture3D(n[T]||YM,w[T])}function j4(B,n,s){const u=this.cache,f=n.length,w=bv(s,f);po(u,w)||(B.uniform1iv(this.addr,w),mo(u,w));for(let T=0;T!==f;++T)s.setTextureCube(n[T]||qM,w[T])}function X4(B,n,s){const u=this.cache,f=n.length,w=bv(s,f);po(u,w)||(B.uniform1iv(this.addr,w),mo(u,w));for(let T=0;T!==f;++T)s.setTexture2DArray(n[T]||KM,w[T])}function K4(B){switch(B){case 5126:return I4;case 35664:return R4;case 35665:return B4;case 35666:return L4;case 35674:return D4;case 35675:return P4;case 35676:return O4;case 5124:case 35670:return F4;case 35667:case 35671:return N4;case 35668:case 35672:return k4;case 35669:case 35673:return U4;case 5125:return z4;case 36294:return G4;case 36295:return H4;case 36296:return V4;case 35678:case 36198:case 36298:case 36306:case 35682:return Q4;case 35679:case 36299:case 36307:return W4;case 35680:case 36300:case 36308:case 36293:return j4;case 36289:case 36303:case 36311:case 36292:return X4}}class Y4{constructor(n,s,u){this.id=n,this.addr=u,this.cache=[],this.setValue=T4(s.type)}}class q4{constructor(n,s,u){this.id=n,this.addr=u,this.cache=[],this.size=s.size,this.setValue=K4(s.type)}}class J4{constructor(n){this.id=n,this.seq=[],this.map={}}setValue(n,s,u){const f=this.seq;for(let w=0,T=f.length;w!==T;++w){const I=f[w];I.setValue(n,s[I.id],u)}}}const aE=/(\w+)(\])?(\[|\.)?/g;function nb(B,n){B.seq.push(n),B.map[n.id]=n}function Z4(B,n,s){const u=B.name,f=u.length;for(aE.lastIndex=0;;){const w=aE.exec(u),T=aE.lastIndex;let I=w[1];const F=w[2]==="]",U=w[3];if(F&&(I=I|0),U===void 0||U==="["&&T+2===f){nb(s,U===void 0?new Y4(I,B,n):new q4(I,B,n));break}else{let V=s.map[I];V===void 0&&(V=new J4(I),nb(s,V)),s=V}}}class Sv{constructor(n,s){this.seq=[],this.map={};const u=n.getProgramParameter(s,35718);for(let f=0;f<u;++f){const w=n.getActiveUniform(s,f),T=n.getUniformLocation(s,w.name);Z4(w,T,this)}}setValue(n,s,u,f){const w=this.map[s];w!==void 0&&w.setValue(n,u,f)}setOptional(n,s,u){const f=s[u];f!==void 0&&this.setValue(n,u,f)}static upload(n,s,u,f){for(let w=0,T=s.length;w!==T;++w){const I=s[w],F=u[I.id];F.needsUpdate!==!1&&I.setValue(n,F.value,f)}}static seqWithValue(n,s){const u=[];for(let f=0,w=n.length;f!==w;++f){const T=n[f];T.id in s&&u.push(T)}return u}}function ib(B,n,s){const u=B.createShader(n);return B.shaderSource(u,s),B.compileShader(u),u}let $4=0;function e5(B,n){const s=B.split(`
`),u=[],f=Math.max(n-6,0),w=Math.min(n+6,s.length);for(let T=f;T<w;T++){const I=T+1;u.push(`${I===n?">":" "} ${I}: ${s[T]}`)}return u.join(`
`)}function t5(B){switch(B){case ar:return["Linear","( value )"];case Ri:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",B),["Linear","( value )"]}}function rb(B,n,s){const u=B.getShaderParameter(n,35713),f=B.getShaderInfoLog(n).trim();if(u&&f==="")return"";const w=/ERROR: 0:(\d+)/.exec(f);if(w){const T=parseInt(w[1]);return s.toUpperCase()+`

`+f+`

`+e5(B.getShaderSource(n),T)}else return f}function n5(B,n){const s=t5(n);return"vec4 "+B+"( vec4 value ) { return LinearTo"+s[0]+s[1]+"; }"}function i5(B,n){let s;switch(n){case ci:s="Linear";break;case ze:s="Reinhard";break;case Pe:s="OptimizedCineon";break;case qe:s="ACESFilmic";break;case ye:s="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",n),s="Linear"}return"vec3 "+B+"( vec3 color ) { return "+s+"ToneMapping( color ); }"}function r5(B){return[B.extensionDerivatives||B.envMapCubeUVHeight||B.bumpMap||B.tangentSpaceNormalMap||B.clearcoatNormalMap||B.flatShading||B.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(B.extensionFragDepth||B.logarithmicDepthBuffer)&&B.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",B.extensionDrawBuffers&&B.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(B.extensionShaderTextureLOD||B.envMap||B.transmission)&&B.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Lg).join(`
`)}function s5(B){const n=[];for(const s in B){const u=B[s];u!==!1&&n.push("#define "+s+" "+u)}return n.join(`
`)}function o5(B,n){const s={},u=B.getProgramParameter(n,35721);for(let f=0;f<u;f++){const w=B.getActiveAttrib(n,f),T=w.name;let I=1;w.type===35674&&(I=2),w.type===35675&&(I=3),w.type===35676&&(I=4),s[T]={type:w.type,location:B.getAttribLocation(n,T),locationSize:I}}return s}function Lg(B){return B!==""}function sb(B,n){const s=n.numSpotLightShadows+n.numSpotLightMaps-n.numSpotLightShadowsWithMaps;return B.replace(/NUM_DIR_LIGHTS/g,n.numDirLights).replace(/NUM_SPOT_LIGHTS/g,n.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,n.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,s).replace(/NUM_RECT_AREA_LIGHTS/g,n.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,n.numPointLights).replace(/NUM_HEMI_LIGHTS/g,n.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,n.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,n.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,n.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,n.numPointLightShadows)}function ob(B,n){return B.replace(/NUM_CLIPPING_PLANES/g,n.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,n.numClippingPlanes-n.numClipIntersection)}const a5=/^[ \t]*#include +<([\w\d./]+)>/gm;function lE(B){return B.replace(a5,l5)}function l5(B,n){const s=er[n];if(s===void 0)throw new Error("Can not resolve #include <"+n+">");return lE(s)}const c5=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function ab(B){return B.replace(c5,u5)}function u5(B,n,s,u){let f="";for(let w=parseInt(n);w<parseInt(s);w++)f+=u.replace(/\[\s*i\s*\]/g,"[ "+w+" ]").replace(/UNROLLED_LOOP_INDEX/g,w);return f}function lb(B){let n="precision "+B.precision+` float;
precision `+B.precision+" int;";return B.precision==="highp"?n+=`
#define HIGH_PRECISION`:B.precision==="mediump"?n+=`
#define MEDIUM_PRECISION`:B.precision==="lowp"&&(n+=`
#define LOW_PRECISION`),n}function h5(B){let n="SHADOWMAP_TYPE_BASIC";return B.shadowMapType===g?n="SHADOWMAP_TYPE_PCF":B.shadowMapType===b?n="SHADOWMAP_TYPE_PCF_SOFT":B.shadowMapType===_&&(n="SHADOWMAP_TYPE_VSM"),n}function d5(B){let n="ENVMAP_TYPE_CUBE";if(B.envMap)switch(B.envMapMode){case Re:case Se:n="ENVMAP_TYPE_CUBE";break;case Xe:n="ENVMAP_TYPE_CUBE_UV";break}return n}function f5(B){let n="ENVMAP_MODE_REFLECTION";if(B.envMap)switch(B.envMapMode){case Se:n="ENVMAP_MODE_REFRACTION";break}return n}function p5(B){let n="ENVMAP_BLENDING_NONE";if(B.envMap)switch(B.combine){case un:n="ENVMAP_BLENDING_MULTIPLY";break;case fn:n="ENVMAP_BLENDING_MIX";break;case An:n="ENVMAP_BLENDING_ADD";break}return n}function m5(B){const n=B.envMapCubeUVHeight;if(n===null)return null;const s=Math.log2(n)-2,u=1/n;return{texelWidth:1/(3*Math.max(Math.pow(2,s),7*16)),texelHeight:u,maxMip:s}}function g5(B,n,s,u){const f=B.getContext(),w=s.defines;let T=s.vertexShader,I=s.fragmentShader;const F=h5(s),U=d5(s),G=f5(s),V=p5(s),j=m5(s),Y=s.isWebGL2?"":r5(s),re=s5(w),ie=f.createProgram();let $,de,Ce=s.glslVersion?"#version "+s.glslVersion+`
`:"";s.isRawShaderMaterial?($=[re].filter(Lg).join(`
`),$.length>0&&($+=`
`),de=[Y,re].filter(Lg).join(`
`),de.length>0&&(de+=`
`)):($=[lb(s),"#define SHADER_NAME "+s.shaderName,re,s.instancing?"#define USE_INSTANCING":"",s.instancingColor?"#define USE_INSTANCING_COLOR":"",s.supportsVertexTextures?"#define VERTEX_TEXTURES":"",s.useFog&&s.fog?"#define USE_FOG":"",s.useFog&&s.fogExp2?"#define FOG_EXP2":"",s.map?"#define USE_MAP":"",s.envMap?"#define USE_ENVMAP":"",s.envMap?"#define "+G:"",s.lightMap?"#define USE_LIGHTMAP":"",s.aoMap?"#define USE_AOMAP":"",s.emissiveMap?"#define USE_EMISSIVEMAP":"",s.bumpMap?"#define USE_BUMPMAP":"",s.normalMap?"#define USE_NORMALMAP":"",s.normalMap&&s.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",s.normalMap&&s.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",s.clearcoatMap?"#define USE_CLEARCOATMAP":"",s.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",s.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",s.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",s.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",s.displacementMap&&s.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",s.specularMap?"#define USE_SPECULARMAP":"",s.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",s.specularColorMap?"#define USE_SPECULARCOLORMAP":"",s.roughnessMap?"#define USE_ROUGHNESSMAP":"",s.metalnessMap?"#define USE_METALNESSMAP":"",s.alphaMap?"#define USE_ALPHAMAP":"",s.transmission?"#define USE_TRANSMISSION":"",s.transmissionMap?"#define USE_TRANSMISSIONMAP":"",s.thicknessMap?"#define USE_THICKNESSMAP":"",s.sheenColorMap?"#define USE_SHEENCOLORMAP":"",s.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",s.vertexTangents?"#define USE_TANGENT":"",s.vertexColors?"#define USE_COLOR":"",s.vertexAlphas?"#define USE_COLOR_ALPHA":"",s.vertexUvs?"#define USE_UV":"",s.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",s.flatShading?"#define FLAT_SHADED":"",s.skinning?"#define USE_SKINNING":"",s.morphTargets?"#define USE_MORPHTARGETS":"",s.morphNormals&&s.flatShading===!1?"#define USE_MORPHNORMALS":"",s.morphColors&&s.isWebGL2?"#define USE_MORPHCOLORS":"",s.morphTargetsCount>0&&s.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",s.morphTargetsCount>0&&s.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+s.morphTextureStride:"",s.morphTargetsCount>0&&s.isWebGL2?"#define MORPHTARGETS_COUNT "+s.morphTargetsCount:"",s.doubleSided?"#define DOUBLE_SIDED":"",s.flipSided?"#define FLIP_SIDED":"",s.shadowMapEnabled?"#define USE_SHADOWMAP":"",s.shadowMapEnabled?"#define "+F:"",s.sizeAttenuation?"#define USE_SIZEATTENUATION":"",s.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",s.logarithmicDepthBuffer&&s.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Lg).join(`
`),de=[Y,lb(s),"#define SHADER_NAME "+s.shaderName,re,s.useFog&&s.fog?"#define USE_FOG":"",s.useFog&&s.fogExp2?"#define FOG_EXP2":"",s.map?"#define USE_MAP":"",s.matcap?"#define USE_MATCAP":"",s.envMap?"#define USE_ENVMAP":"",s.envMap?"#define "+U:"",s.envMap?"#define "+G:"",s.envMap?"#define "+V:"",j?"#define CUBEUV_TEXEL_WIDTH "+j.texelWidth:"",j?"#define CUBEUV_TEXEL_HEIGHT "+j.texelHeight:"",j?"#define CUBEUV_MAX_MIP "+j.maxMip+".0":"",s.lightMap?"#define USE_LIGHTMAP":"",s.aoMap?"#define USE_AOMAP":"",s.emissiveMap?"#define USE_EMISSIVEMAP":"",s.bumpMap?"#define USE_BUMPMAP":"",s.normalMap?"#define USE_NORMALMAP":"",s.normalMap&&s.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",s.normalMap&&s.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",s.clearcoat?"#define USE_CLEARCOAT":"",s.clearcoatMap?"#define USE_CLEARCOATMAP":"",s.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",s.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",s.iridescence?"#define USE_IRIDESCENCE":"",s.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",s.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",s.specularMap?"#define USE_SPECULARMAP":"",s.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",s.specularColorMap?"#define USE_SPECULARCOLORMAP":"",s.roughnessMap?"#define USE_ROUGHNESSMAP":"",s.metalnessMap?"#define USE_METALNESSMAP":"",s.alphaMap?"#define USE_ALPHAMAP":"",s.alphaTest?"#define USE_ALPHATEST":"",s.sheen?"#define USE_SHEEN":"",s.sheenColorMap?"#define USE_SHEENCOLORMAP":"",s.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",s.transmission?"#define USE_TRANSMISSION":"",s.transmissionMap?"#define USE_TRANSMISSIONMAP":"",s.thicknessMap?"#define USE_THICKNESSMAP":"",s.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",s.vertexTangents?"#define USE_TANGENT":"",s.vertexColors||s.instancingColor?"#define USE_COLOR":"",s.vertexAlphas?"#define USE_COLOR_ALPHA":"",s.vertexUvs?"#define USE_UV":"",s.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",s.gradientMap?"#define USE_GRADIENTMAP":"",s.flatShading?"#define FLAT_SHADED":"",s.doubleSided?"#define DOUBLE_SIDED":"",s.flipSided?"#define FLIP_SIDED":"",s.shadowMapEnabled?"#define USE_SHADOWMAP":"",s.shadowMapEnabled?"#define "+F:"",s.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",s.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",s.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",s.logarithmicDepthBuffer&&s.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",s.toneMapping!==Bn?"#define TONE_MAPPING":"",s.toneMapping!==Bn?er.tonemapping_pars_fragment:"",s.toneMapping!==Bn?i5("toneMapping",s.toneMapping):"",s.dithering?"#define DITHERING":"",s.opaque?"#define OPAQUE":"",er.encodings_pars_fragment,n5("linearToOutputTexel",s.outputEncoding),s.useDepthPacking?"#define DEPTH_PACKING "+s.depthPacking:"",`
`].filter(Lg).join(`
`)),T=lE(T),T=sb(T,s),T=ob(T,s),I=lE(I),I=sb(I,s),I=ob(I,s),T=ab(T),I=ab(I),s.isWebGL2&&s.isRawShaderMaterial!==!0&&(Ce=`#version 300 es
`,$=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+$,de=["#define varying in",s.glslVersion===Qo?"":"layout(location = 0) out highp vec4 pc_fragColor;",s.glslVersion===Qo?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+de);const ge=Ce+$+T,we=Ce+de+I,Le=ib(f,35633,ge),Ye=ib(f,35632,we);if(f.attachShader(ie,Le),f.attachShader(ie,Ye),s.index0AttributeName!==void 0?f.bindAttribLocation(ie,0,s.index0AttributeName):s.morphTargets===!0&&f.bindAttribLocation(ie,0,"position"),f.linkProgram(ie),B.debug.checkShaderErrors){const Je=f.getProgramInfoLog(ie).trim(),tt=f.getShaderInfoLog(Le).trim(),mt=f.getShaderInfoLog(Ye).trim();let Pt=!0,yt=!0;if(f.getProgramParameter(ie,35714)===!1){Pt=!1;const dt=rb(f,Le,"vertex"),St=rb(f,Ye,"fragment");console.error("THREE.WebGLProgram: Shader Error "+f.getError()+" - VALIDATE_STATUS "+f.getProgramParameter(ie,35715)+`

Program Info Log: `+Je+`
`+dt+`
`+St)}else Je!==""?console.warn("THREE.WebGLProgram: Program Info Log:",Je):(tt===""||mt==="")&&(yt=!1);yt&&(this.diagnostics={runnable:Pt,programLog:Je,vertexShader:{log:tt,prefix:$},fragmentShader:{log:mt,prefix:de}})}f.deleteShader(Le),f.deleteShader(Ye);let it;this.getUniforms=function(){return it===void 0&&(it=new Sv(f,ie)),it};let Me;return this.getAttributes=function(){return Me===void 0&&(Me=o5(f,ie)),Me},this.destroy=function(){u.releaseStatesOfProgram(this),f.deleteProgram(ie),this.program=void 0},this.name=s.shaderName,this.id=$4++,this.cacheKey=n,this.usedTimes=1,this.program=ie,this.vertexShader=Le,this.fragmentShader=Ye,this}let A5=0;class v5{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(n){const s=n.vertexShader,u=n.fragmentShader,f=this._getShaderStage(s),w=this._getShaderStage(u),T=this._getShaderCacheForMaterial(n);return T.has(f)===!1&&(T.add(f),f.usedTimes++),T.has(w)===!1&&(T.add(w),w.usedTimes++),this}remove(n){const s=this.materialCache.get(n);for(const u of s)u.usedTimes--,u.usedTimes===0&&this.shaderCache.delete(u.code);return this.materialCache.delete(n),this}getVertexShaderID(n){return this._getShaderStage(n.vertexShader).id}getFragmentShaderID(n){return this._getShaderStage(n.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(n){const s=this.materialCache;let u=s.get(n);return u===void 0&&(u=new Set,s.set(n,u)),u}_getShaderStage(n){const s=this.shaderCache;let u=s.get(n);return u===void 0&&(u=new y5(n),s.set(n,u)),u}}class y5{constructor(n){this.id=A5++,this.code=n,this.usedTimes=0}}function x5(B,n,s,u,f,w,T){const I=new Ar,F=new v5,U=[],G=f.isWebGL2,V=f.logarithmicDepthBuffer,j=f.vertexTextures;let Y=f.precision;const re={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function ie(Me,Je,tt,mt,Pt){const yt=mt.fog,dt=Pt.geometry,St=Me.isMeshStandardMaterial?mt.environment:null,rn=(Me.isMeshStandardMaterial?s:n).get(Me.envMap||St),hn=rn&&rn.mapping===Xe?rn.image.height:null,tn=re[Me.type];Me.precision!==null&&(Y=f.getMaxPrecision(Me.precision),Y!==Me.precision&&console.warn("THREE.WebGLProgram.getParameters:",Me.precision,"not supported, using",Y,"instead."));const wn=dt.morphAttributes.position||dt.morphAttributes.normal||dt.morphAttributes.color,gn=wn!==void 0?wn.length:0;let ni=0;dt.morphAttributes.position!==void 0&&(ni=1),dt.morphAttributes.normal!==void 0&&(ni=2),dt.morphAttributes.color!==void 0&&(ni=3);let Wn,Vt,dn,Gn;if(tn){const tr=ec[tn];Wn=tr.vertexShader,Vt=tr.fragmentShader}else Wn=Me.vertexShader,Vt=Me.fragmentShader,F.update(Me),dn=F.getVertexShaderID(Me),Gn=F.getFragmentShaderID(Me);const Dt=B.getRenderTarget(),ai=Me.alphaTest>0,Hn=Me.clearcoat>0,Mi=Me.iridescence>0;return{isWebGL2:G,shaderID:tn,shaderName:Me.type,vertexShader:Wn,fragmentShader:Vt,defines:Me.defines,customVertexShaderID:dn,customFragmentShaderID:Gn,isRawShaderMaterial:Me.isRawShaderMaterial===!0,glslVersion:Me.glslVersion,precision:Y,instancing:Pt.isInstancedMesh===!0,instancingColor:Pt.isInstancedMesh===!0&&Pt.instanceColor!==null,supportsVertexTextures:j,outputEncoding:Dt===null?B.outputEncoding:Dt.isXRRenderTarget===!0?Dt.texture.encoding:ar,map:!!Me.map,matcap:!!Me.matcap,envMap:!!rn,envMapMode:rn&&rn.mapping,envMapCubeUVHeight:hn,lightMap:!!Me.lightMap,aoMap:!!Me.aoMap,emissiveMap:!!Me.emissiveMap,bumpMap:!!Me.bumpMap,normalMap:!!Me.normalMap,objectSpaceNormalMap:Me.normalMapType===ur,tangentSpaceNormalMap:Me.normalMapType===is,decodeVideoTexture:!!Me.map&&Me.map.isVideoTexture===!0&&Me.map.encoding===Ri,clearcoat:Hn,clearcoatMap:Hn&&!!Me.clearcoatMap,clearcoatRoughnessMap:Hn&&!!Me.clearcoatRoughnessMap,clearcoatNormalMap:Hn&&!!Me.clearcoatNormalMap,iridescence:Mi,iridescenceMap:Mi&&!!Me.iridescenceMap,iridescenceThicknessMap:Mi&&!!Me.iridescenceThicknessMap,displacementMap:!!Me.displacementMap,roughnessMap:!!Me.roughnessMap,metalnessMap:!!Me.metalnessMap,specularMap:!!Me.specularMap,specularIntensityMap:!!Me.specularIntensityMap,specularColorMap:!!Me.specularColorMap,opaque:Me.transparent===!1&&Me.blending===D,alphaMap:!!Me.alphaMap,alphaTest:ai,gradientMap:!!Me.gradientMap,sheen:Me.sheen>0,sheenColorMap:!!Me.sheenColorMap,sheenRoughnessMap:!!Me.sheenRoughnessMap,transmission:Me.transmission>0,transmissionMap:!!Me.transmissionMap,thicknessMap:!!Me.thicknessMap,combine:Me.combine,vertexTangents:!!Me.normalMap&&!!dt.attributes.tangent,vertexColors:Me.vertexColors,vertexAlphas:Me.vertexColors===!0&&!!dt.attributes.color&&dt.attributes.color.itemSize===4,vertexUvs:!!Me.map||!!Me.bumpMap||!!Me.normalMap||!!Me.specularMap||!!Me.alphaMap||!!Me.emissiveMap||!!Me.roughnessMap||!!Me.metalnessMap||!!Me.clearcoatMap||!!Me.clearcoatRoughnessMap||!!Me.clearcoatNormalMap||!!Me.iridescenceMap||!!Me.iridescenceThicknessMap||!!Me.displacementMap||!!Me.transmissionMap||!!Me.thicknessMap||!!Me.specularIntensityMap||!!Me.specularColorMap||!!Me.sheenColorMap||!!Me.sheenRoughnessMap,uvsVertexOnly:!(Me.map||Me.bumpMap||Me.normalMap||Me.specularMap||Me.alphaMap||Me.emissiveMap||Me.roughnessMap||Me.metalnessMap||Me.clearcoatNormalMap||Me.iridescenceMap||Me.iridescenceThicknessMap||Me.transmission>0||Me.transmissionMap||Me.thicknessMap||Me.specularIntensityMap||Me.specularColorMap||Me.sheen>0||Me.sheenColorMap||Me.sheenRoughnessMap)&&!!Me.displacementMap,fog:!!yt,useFog:Me.fog===!0,fogExp2:yt&&yt.isFogExp2,flatShading:!!Me.flatShading,sizeAttenuation:Me.sizeAttenuation,logarithmicDepthBuffer:V,skinning:Pt.isSkinnedMesh===!0,morphTargets:dt.morphAttributes.position!==void 0,morphNormals:dt.morphAttributes.normal!==void 0,morphColors:dt.morphAttributes.color!==void 0,morphTargetsCount:gn,morphTextureStride:ni,numDirLights:Je.directional.length,numPointLights:Je.point.length,numSpotLights:Je.spot.length,numSpotLightMaps:Je.spotLightMap.length,numRectAreaLights:Je.rectArea.length,numHemiLights:Je.hemi.length,numDirLightShadows:Je.directionalShadowMap.length,numPointLightShadows:Je.pointShadowMap.length,numSpotLightShadows:Je.spotShadowMap.length,numSpotLightShadowsWithMaps:Je.numSpotLightShadowsWithMaps,numClippingPlanes:T.numPlanes,numClipIntersection:T.numIntersection,dithering:Me.dithering,shadowMapEnabled:B.shadowMap.enabled&&tt.length>0,shadowMapType:B.shadowMap.type,toneMapping:Me.toneMapped?B.toneMapping:Bn,physicallyCorrectLights:B.physicallyCorrectLights,premultipliedAlpha:Me.premultipliedAlpha,doubleSided:Me.side===P,flipSided:Me.side===R,useDepthPacking:!!Me.depthPacking,depthPacking:Me.depthPacking||0,index0AttributeName:Me.index0AttributeName,extensionDerivatives:Me.extensions&&Me.extensions.derivatives,extensionFragDepth:Me.extensions&&Me.extensions.fragDepth,extensionDrawBuffers:Me.extensions&&Me.extensions.drawBuffers,extensionShaderTextureLOD:Me.extensions&&Me.extensions.shaderTextureLOD,rendererExtensionFragDepth:G||u.has("EXT_frag_depth"),rendererExtensionDrawBuffers:G||u.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:G||u.has("EXT_shader_texture_lod"),customProgramCacheKey:Me.customProgramCacheKey()}}function $(Me){const Je=[];if(Me.shaderID?Je.push(Me.shaderID):(Je.push(Me.customVertexShaderID),Je.push(Me.customFragmentShaderID)),Me.defines!==void 0)for(const tt in Me.defines)Je.push(tt),Je.push(Me.defines[tt]);return Me.isRawShaderMaterial===!1&&(de(Je,Me),Ce(Je,Me),Je.push(B.outputEncoding)),Je.push(Me.customProgramCacheKey),Je.join()}function de(Me,Je){Me.push(Je.precision),Me.push(Je.outputEncoding),Me.push(Je.envMapMode),Me.push(Je.envMapCubeUVHeight),Me.push(Je.combine),Me.push(Je.vertexUvs),Me.push(Je.fogExp2),Me.push(Je.sizeAttenuation),Me.push(Je.morphTargetsCount),Me.push(Je.morphAttributeCount),Me.push(Je.numDirLights),Me.push(Je.numPointLights),Me.push(Je.numSpotLights),Me.push(Je.numSpotLightMaps),Me.push(Je.numHemiLights),Me.push(Je.numRectAreaLights),Me.push(Je.numDirLightShadows),Me.push(Je.numPointLightShadows),Me.push(Je.numSpotLightShadows),Me.push(Je.numSpotLightShadowsWithMaps),Me.push(Je.shadowMapType),Me.push(Je.toneMapping),Me.push(Je.numClippingPlanes),Me.push(Je.numClipIntersection),Me.push(Je.depthPacking)}function Ce(Me,Je){I.disableAll(),Je.isWebGL2&&I.enable(0),Je.supportsVertexTextures&&I.enable(1),Je.instancing&&I.enable(2),Je.instancingColor&&I.enable(3),Je.map&&I.enable(4),Je.matcap&&I.enable(5),Je.envMap&&I.enable(6),Je.lightMap&&I.enable(7),Je.aoMap&&I.enable(8),Je.emissiveMap&&I.enable(9),Je.bumpMap&&I.enable(10),Je.normalMap&&I.enable(11),Je.objectSpaceNormalMap&&I.enable(12),Je.tangentSpaceNormalMap&&I.enable(13),Je.clearcoat&&I.enable(14),Je.clearcoatMap&&I.enable(15),Je.clearcoatRoughnessMap&&I.enable(16),Je.clearcoatNormalMap&&I.enable(17),Je.iridescence&&I.enable(18),Je.iridescenceMap&&I.enable(19),Je.iridescenceThicknessMap&&I.enable(20),Je.displacementMap&&I.enable(21),Je.specularMap&&I.enable(22),Je.roughnessMap&&I.enable(23),Je.metalnessMap&&I.enable(24),Je.gradientMap&&I.enable(25),Je.alphaMap&&I.enable(26),Je.alphaTest&&I.enable(27),Je.vertexColors&&I.enable(28),Je.vertexAlphas&&I.enable(29),Je.vertexUvs&&I.enable(30),Je.vertexTangents&&I.enable(31),Je.uvsVertexOnly&&I.enable(32),Me.push(I.mask),I.disableAll(),Je.fog&&I.enable(0),Je.useFog&&I.enable(1),Je.flatShading&&I.enable(2),Je.logarithmicDepthBuffer&&I.enable(3),Je.skinning&&I.enable(4),Je.morphTargets&&I.enable(5),Je.morphNormals&&I.enable(6),Je.morphColors&&I.enable(7),Je.premultipliedAlpha&&I.enable(8),Je.shadowMapEnabled&&I.enable(9),Je.physicallyCorrectLights&&I.enable(10),Je.doubleSided&&I.enable(11),Je.flipSided&&I.enable(12),Je.useDepthPacking&&I.enable(13),Je.dithering&&I.enable(14),Je.specularIntensityMap&&I.enable(15),Je.specularColorMap&&I.enable(16),Je.transmission&&I.enable(17),Je.transmissionMap&&I.enable(18),Je.thicknessMap&&I.enable(19),Je.sheen&&I.enable(20),Je.sheenColorMap&&I.enable(21),Je.sheenRoughnessMap&&I.enable(22),Je.decodeVideoTexture&&I.enable(23),Je.opaque&&I.enable(24),Me.push(I.mask)}function ge(Me){const Je=re[Me.type];let tt;if(Je){const mt=ec[Je];tt=Rd.clone(mt.uniforms)}else tt=Me.uniforms;return tt}function we(Me,Je){let tt;for(let mt=0,Pt=U.length;mt<Pt;mt++){const yt=U[mt];if(yt.cacheKey===Je){tt=yt,++tt.usedTimes;break}}return tt===void 0&&(tt=new g5(B,Je,Me,w),U.push(tt)),tt}function Le(Me){if(--Me.usedTimes===0){const Je=U.indexOf(Me);U[Je]=U[U.length-1],U.pop(),Me.destroy()}}function Ye(Me){F.remove(Me)}function it(){F.dispose()}return{getParameters:ie,getProgramCacheKey:$,getUniforms:ge,acquireProgram:we,releaseProgram:Le,releaseShaderCache:Ye,programs:U,dispose:it}}function E5(){let B=new WeakMap;function n(w){let T=B.get(w);return T===void 0&&(T={},B.set(w,T)),T}function s(w){B.delete(w)}function u(w,T,I){B.get(w)[T]=I}function f(){B=new WeakMap}return{get:n,remove:s,update:u,dispose:f}}function _5(B,n){return B.groupOrder!==n.groupOrder?B.groupOrder-n.groupOrder:B.renderOrder!==n.renderOrder?B.renderOrder-n.renderOrder:B.material.id!==n.material.id?B.material.id-n.material.id:B.z!==n.z?B.z-n.z:B.id-n.id}function cb(B,n){return B.groupOrder!==n.groupOrder?B.groupOrder-n.groupOrder:B.renderOrder!==n.renderOrder?B.renderOrder-n.renderOrder:B.z!==n.z?n.z-B.z:B.id-n.id}function ub(){const B=[];let n=0;const s=[],u=[],f=[];function w(){n=0,s.length=0,u.length=0,f.length=0}function T(V,j,Y,re,ie,$){let de=B[n];return de===void 0?(de={id:V.id,object:V,geometry:j,material:Y,groupOrder:re,renderOrder:V.renderOrder,z:ie,group:$},B[n]=de):(de.id=V.id,de.object=V,de.geometry=j,de.material=Y,de.groupOrder=re,de.renderOrder=V.renderOrder,de.z=ie,de.group=$),n++,de}function I(V,j,Y,re,ie,$){const de=T(V,j,Y,re,ie,$);Y.transmission>0?u.push(de):Y.transparent===!0?f.push(de):s.push(de)}function F(V,j,Y,re,ie,$){const de=T(V,j,Y,re,ie,$);Y.transmission>0?u.unshift(de):Y.transparent===!0?f.unshift(de):s.unshift(de)}function U(V,j){s.length>1&&s.sort(V||_5),u.length>1&&u.sort(j||cb),f.length>1&&f.sort(j||cb)}function G(){for(let V=n,j=B.length;V<j;V++){const Y=B[V];if(Y.id===null)break;Y.id=null,Y.object=null,Y.geometry=null,Y.material=null,Y.group=null}}return{opaque:s,transmissive:u,transparent:f,init:w,push:I,unshift:F,finish:G,sort:U}}function w5(){let B=new WeakMap;function n(u,f){const w=B.get(u);let T;return w===void 0?(T=new ub,B.set(u,[T])):f>=w.length?(T=new ub,w.push(T)):T=w[f],T}function s(){B=new WeakMap}return{get:n,dispose:s}}function C5(){const B={};return{get:function(n){if(B[n.id]!==void 0)return B[n.id];let s;switch(n.type){case"DirectionalLight":s={direction:new Qe,color:new kn};break;case"SpotLight":s={position:new Qe,direction:new Qe,color:new kn,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":s={position:new Qe,color:new kn,distance:0,decay:0};break;case"HemisphereLight":s={direction:new Qe,skyColor:new kn,groundColor:new kn};break;case"RectAreaLight":s={color:new kn,position:new Qe,halfWidth:new Qe,halfHeight:new Qe};break}return B[n.id]=s,s}}}function M5(){const B={};return{get:function(n){if(B[n.id]!==void 0)return B[n.id];let s;switch(n.type){case"DirectionalLight":s={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new jt};break;case"SpotLight":s={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new jt};break;case"PointLight":s={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new jt,shadowCameraNear:1,shadowCameraFar:1e3};break}return B[n.id]=s,s}}}let b5=0;function S5(B,n){return(n.castShadow?2:0)-(B.castShadow?2:0)+(n.map?1:0)-(B.map?1:0)}function T5(B,n){const s=new C5,u=M5(),f={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let G=0;G<9;G++)f.probe.push(new Qe);const w=new Qe,T=new Jn,I=new Jn;function F(G,V){let j=0,Y=0,re=0;for(let mt=0;mt<9;mt++)f.probe[mt].set(0,0,0);let ie=0,$=0,de=0,Ce=0,ge=0,we=0,Le=0,Ye=0,it=0,Me=0;G.sort(S5);const Je=V!==!0?Math.PI:1;for(let mt=0,Pt=G.length;mt<Pt;mt++){const yt=G[mt],dt=yt.color,St=yt.intensity,rn=yt.distance,hn=yt.shadow&&yt.shadow.map?yt.shadow.map.texture:null;if(yt.isAmbientLight)j+=dt.r*St*Je,Y+=dt.g*St*Je,re+=dt.b*St*Je;else if(yt.isLightProbe)for(let tn=0;tn<9;tn++)f.probe[tn].addScaledVector(yt.sh.coefficients[tn],St);else if(yt.isDirectionalLight){const tn=s.get(yt);if(tn.color.copy(yt.color).multiplyScalar(yt.intensity*Je),yt.castShadow){const wn=yt.shadow,gn=u.get(yt);gn.shadowBias=wn.bias,gn.shadowNormalBias=wn.normalBias,gn.shadowRadius=wn.radius,gn.shadowMapSize=wn.mapSize,f.directionalShadow[ie]=gn,f.directionalShadowMap[ie]=hn,f.directionalShadowMatrix[ie]=yt.shadow.matrix,we++}f.directional[ie]=tn,ie++}else if(yt.isSpotLight){const tn=s.get(yt);tn.position.setFromMatrixPosition(yt.matrixWorld),tn.color.copy(dt).multiplyScalar(St*Je),tn.distance=rn,tn.coneCos=Math.cos(yt.angle),tn.penumbraCos=Math.cos(yt.angle*(1-yt.penumbra)),tn.decay=yt.decay,f.spot[de]=tn;const wn=yt.shadow;if(yt.map&&(f.spotLightMap[it]=yt.map,it++,wn.updateMatrices(yt),yt.castShadow&&Me++),f.spotLightMatrix[de]=wn.matrix,yt.castShadow){const gn=u.get(yt);gn.shadowBias=wn.bias,gn.shadowNormalBias=wn.normalBias,gn.shadowRadius=wn.radius,gn.shadowMapSize=wn.mapSize,f.spotShadow[de]=gn,f.spotShadowMap[de]=hn,Ye++}de++}else if(yt.isRectAreaLight){const tn=s.get(yt);tn.color.copy(dt).multiplyScalar(St),tn.halfWidth.set(yt.width*.5,0,0),tn.halfHeight.set(0,yt.height*.5,0),f.rectArea[Ce]=tn,Ce++}else if(yt.isPointLight){const tn=s.get(yt);if(tn.color.copy(yt.color).multiplyScalar(yt.intensity*Je),tn.distance=yt.distance,tn.decay=yt.decay,yt.castShadow){const wn=yt.shadow,gn=u.get(yt);gn.shadowBias=wn.bias,gn.shadowNormalBias=wn.normalBias,gn.shadowRadius=wn.radius,gn.shadowMapSize=wn.mapSize,gn.shadowCameraNear=wn.camera.near,gn.shadowCameraFar=wn.camera.far,f.pointShadow[$]=gn,f.pointShadowMap[$]=hn,f.pointShadowMatrix[$]=yt.shadow.matrix,Le++}f.point[$]=tn,$++}else if(yt.isHemisphereLight){const tn=s.get(yt);tn.skyColor.copy(yt.color).multiplyScalar(St*Je),tn.groundColor.copy(yt.groundColor).multiplyScalar(St*Je),f.hemi[ge]=tn,ge++}}Ce>0&&(n.isWebGL2||B.has("OES_texture_float_linear")===!0?(f.rectAreaLTC1=On.LTC_FLOAT_1,f.rectAreaLTC2=On.LTC_FLOAT_2):B.has("OES_texture_half_float_linear")===!0?(f.rectAreaLTC1=On.LTC_HALF_1,f.rectAreaLTC2=On.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),f.ambient[0]=j,f.ambient[1]=Y,f.ambient[2]=re;const tt=f.hash;(tt.directionalLength!==ie||tt.pointLength!==$||tt.spotLength!==de||tt.rectAreaLength!==Ce||tt.hemiLength!==ge||tt.numDirectionalShadows!==we||tt.numPointShadows!==Le||tt.numSpotShadows!==Ye||tt.numSpotMaps!==it)&&(f.directional.length=ie,f.spot.length=de,f.rectArea.length=Ce,f.point.length=$,f.hemi.length=ge,f.directionalShadow.length=we,f.directionalShadowMap.length=we,f.pointShadow.length=Le,f.pointShadowMap.length=Le,f.spotShadow.length=Ye,f.spotShadowMap.length=Ye,f.directionalShadowMatrix.length=we,f.pointShadowMatrix.length=Le,f.spotLightMatrix.length=Ye+it-Me,f.spotLightMap.length=it,f.numSpotLightShadowsWithMaps=Me,tt.directionalLength=ie,tt.pointLength=$,tt.spotLength=de,tt.rectAreaLength=Ce,tt.hemiLength=ge,tt.numDirectionalShadows=we,tt.numPointShadows=Le,tt.numSpotShadows=Ye,tt.numSpotMaps=it,f.version=b5++)}function U(G,V){let j=0,Y=0,re=0,ie=0,$=0;const de=V.matrixWorldInverse;for(let Ce=0,ge=G.length;Ce<ge;Ce++){const we=G[Ce];if(we.isDirectionalLight){const Le=f.directional[j];Le.direction.setFromMatrixPosition(we.matrixWorld),w.setFromMatrixPosition(we.target.matrixWorld),Le.direction.sub(w),Le.direction.transformDirection(de),j++}else if(we.isSpotLight){const Le=f.spot[re];Le.position.setFromMatrixPosition(we.matrixWorld),Le.position.applyMatrix4(de),Le.direction.setFromMatrixPosition(we.matrixWorld),w.setFromMatrixPosition(we.target.matrixWorld),Le.direction.sub(w),Le.direction.transformDirection(de),re++}else if(we.isRectAreaLight){const Le=f.rectArea[ie];Le.position.setFromMatrixPosition(we.matrixWorld),Le.position.applyMatrix4(de),I.identity(),T.copy(we.matrixWorld),T.premultiply(de),I.extractRotation(T),Le.halfWidth.set(we.width*.5,0,0),Le.halfHeight.set(0,we.height*.5,0),Le.halfWidth.applyMatrix4(I),Le.halfHeight.applyMatrix4(I),ie++}else if(we.isPointLight){const Le=f.point[Y];Le.position.setFromMatrixPosition(we.matrixWorld),Le.position.applyMatrix4(de),Y++}else if(we.isHemisphereLight){const Le=f.hemi[$];Le.direction.setFromMatrixPosition(we.matrixWorld),Le.direction.transformDirection(de),$++}}}return{setup:F,setupView:U,state:f}}function hb(B,n){const s=new T5(B,n),u=[],f=[];function w(){u.length=0,f.length=0}function T(V){u.push(V)}function I(V){f.push(V)}function F(V){s.setup(u,V)}function U(V){s.setupView(u,V)}return{init:w,state:{lightsArray:u,shadowsArray:f,lights:s},setupLights:F,setupLightsView:U,pushLight:T,pushShadow:I}}function I5(B,n){let s=new WeakMap;function u(w,T=0){const I=s.get(w);let F;return I===void 0?(F=new hb(B,n),s.set(w,[F])):T>=I.length?(F=new hb(B,n),I.push(F)):F=I[T],F}function f(){s=new WeakMap}return{get:u,dispose:f}}class cE extends bo{constructor(n){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Ur,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(n)}copy(n){return super.copy(n),this.depthPacking=n.depthPacking,this.map=n.map,this.alphaMap=n.alphaMap,this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this}}class uE extends bo{constructor(n){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new Qe,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(n)}copy(n){return super.copy(n),this.referencePosition.copy(n.referencePosition),this.nearDistance=n.nearDistance,this.farDistance=n.farDistance,this.map=n.map,this.alphaMap=n.alphaMap,this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this}}const R5=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,B5=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function L5(B,n,s){let u=new Eh;const f=new jt,w=new jt,T=new hr,I=new cE({depthPacking:vs}),F=new uE,U={},G=s.maxTextureSize,V={0:R,1:S,2:P},j=new nl({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new jt},radius:{value:4}},vertexShader:R5,fragmentShader:B5}),Y=j.clone();Y.defines.HORIZONTAL_PASS=1;const re=new Wi;re.setAttribute("position",new Hr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const ie=new eo(re,j),$=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=g,this.render=function(we,Le,Ye){if($.enabled===!1||$.autoUpdate===!1&&$.needsUpdate===!1||we.length===0)return;const it=B.getRenderTarget(),Me=B.getActiveCubeFace(),Je=B.getActiveMipmapLevel(),tt=B.state;tt.setBlending(O),tt.buffers.color.setClear(1,1,1,1),tt.buffers.depth.setTest(!0),tt.setScissorTest(!1);for(let mt=0,Pt=we.length;mt<Pt;mt++){const yt=we[mt],dt=yt.shadow;if(dt===void 0){console.warn("THREE.WebGLShadowMap:",yt,"has no shadow.");continue}if(dt.autoUpdate===!1&&dt.needsUpdate===!1)continue;f.copy(dt.mapSize);const St=dt.getFrameExtents();if(f.multiply(St),w.copy(dt.mapSize),(f.x>G||f.y>G)&&(f.x>G&&(w.x=Math.floor(G/St.x),f.x=w.x*St.x,dt.mapSize.x=w.x),f.y>G&&(w.y=Math.floor(G/St.y),f.y=w.y*St.y,dt.mapSize.y=w.y)),dt.map===null){const hn=this.type!==_?{minFilter:le,magFilter:le}:{};dt.map=new Us(f.x,f.y,hn),dt.map.texture.name=yt.name+".shadowMap",dt.camera.updateProjectionMatrix()}B.setRenderTarget(dt.map),B.clear();const rn=dt.getViewportCount();for(let hn=0;hn<rn;hn++){const tn=dt.getViewport(hn);T.set(w.x*tn.x,w.y*tn.y,w.x*tn.z,w.y*tn.w),tt.viewport(T),dt.updateMatrices(yt,hn),u=dt.getFrustum(),ge(Le,Ye,dt.camera,yt,this.type)}dt.isPointLightShadow!==!0&&this.type===_&&de(dt,Ye),dt.needsUpdate=!1}$.needsUpdate=!1,B.setRenderTarget(it,Me,Je)};function de(we,Le){const Ye=n.update(ie);j.defines.VSM_SAMPLES!==we.blurSamples&&(j.defines.VSM_SAMPLES=we.blurSamples,Y.defines.VSM_SAMPLES=we.blurSamples,j.needsUpdate=!0,Y.needsUpdate=!0),we.mapPass===null&&(we.mapPass=new Us(f.x,f.y)),j.uniforms.shadow_pass.value=we.map.texture,j.uniforms.resolution.value=we.mapSize,j.uniforms.radius.value=we.radius,B.setRenderTarget(we.mapPass),B.clear(),B.renderBufferDirect(Le,null,Ye,j,ie,null),Y.uniforms.shadow_pass.value=we.mapPass.texture,Y.uniforms.resolution.value=we.mapSize,Y.uniforms.radius.value=we.radius,B.setRenderTarget(we.map),B.clear(),B.renderBufferDirect(Le,null,Ye,Y,ie,null)}function Ce(we,Le,Ye,it,Me,Je){let tt=null;const mt=Ye.isPointLight===!0?we.customDistanceMaterial:we.customDepthMaterial;if(mt!==void 0?tt=mt:tt=Ye.isPointLight===!0?F:I,B.localClippingEnabled&&Le.clipShadows===!0&&Array.isArray(Le.clippingPlanes)&&Le.clippingPlanes.length!==0||Le.displacementMap&&Le.displacementScale!==0||Le.alphaMap&&Le.alphaTest>0||Le.map&&Le.alphaTest>0){const Pt=tt.uuid,yt=Le.uuid;let dt=U[Pt];dt===void 0&&(dt={},U[Pt]=dt);let St=dt[yt];St===void 0&&(St=tt.clone(),dt[yt]=St),tt=St}return tt.visible=Le.visible,tt.wireframe=Le.wireframe,Je===_?tt.side=Le.shadowSide!==null?Le.shadowSide:Le.side:tt.side=Le.shadowSide!==null?Le.shadowSide:V[Le.side],tt.alphaMap=Le.alphaMap,tt.alphaTest=Le.alphaTest,tt.map=Le.map,tt.clipShadows=Le.clipShadows,tt.clippingPlanes=Le.clippingPlanes,tt.clipIntersection=Le.clipIntersection,tt.displacementMap=Le.displacementMap,tt.displacementScale=Le.displacementScale,tt.displacementBias=Le.displacementBias,tt.wireframeLinewidth=Le.wireframeLinewidth,tt.linewidth=Le.linewidth,Ye.isPointLight===!0&&tt.isMeshDistanceMaterial===!0&&(tt.referencePosition.setFromMatrixPosition(Ye.matrixWorld),tt.nearDistance=it,tt.farDistance=Me),tt}function ge(we,Le,Ye,it,Me){if(we.visible===!1)return;if(we.layers.test(Le.layers)&&(we.isMesh||we.isLine||we.isPoints)&&(we.castShadow||we.receiveShadow&&Me===_)&&(!we.frustumCulled||u.intersectsObject(we))){we.modelViewMatrix.multiplyMatrices(Ye.matrixWorldInverse,we.matrixWorld);const mt=n.update(we),Pt=we.material;if(Array.isArray(Pt)){const yt=mt.groups;for(let dt=0,St=yt.length;dt<St;dt++){const rn=yt[dt],hn=Pt[rn.materialIndex];if(hn&&hn.visible){const tn=Ce(we,hn,it,Ye.near,Ye.far,Me);B.renderBufferDirect(Ye,null,mt,tn,we,rn)}}}else if(Pt.visible){const yt=Ce(we,Pt,it,Ye.near,Ye.far,Me);B.renderBufferDirect(Ye,null,mt,yt,we,null)}}const tt=we.children;for(let mt=0,Pt=tt.length;mt<Pt;mt++)ge(tt[mt],Le,Ye,it,Me)}}function D5(B,n,s){const u=s.isWebGL2;function f(){let ht=!1;const Xt=new hr;let _n=null;const ii=new hr(0,0,0,0);return{setMask:function(_i){_n!==_i&&!ht&&(B.colorMask(_i,_i,_i,_i),_n=_i)},setLocked:function(_i){ht=_i},setClear:function(_i,Vr,Io,na,tf){tf===!0&&(_i*=na,Vr*=na,Io*=na),Xt.set(_i,Vr,Io,na),ii.equals(Xt)===!1&&(B.clearColor(_i,Vr,Io,na),ii.copy(Xt))},reset:function(){ht=!1,_n=null,ii.set(-1,0,0,0)}}}function w(){let ht=!1,Xt=null,_n=null,ii=null;return{setTest:function(_i){_i?ai(2929):Hn(2929)},setMask:function(_i){Xt!==_i&&!ht&&(B.depthMask(_i),Xt=_i)},setFunc:function(_i){if(_n!==_i){switch(_i){case xt:B.depthFunc(512);break;case gt:B.depthFunc(519);break;case It:B.depthFunc(513);break;case ct:B.depthFunc(515);break;case ut:B.depthFunc(514);break;case Ct:B.depthFunc(518);break;case qt:B.depthFunc(516);break;case Ft:B.depthFunc(517);break;default:B.depthFunc(515)}_n=_i}},setLocked:function(_i){ht=_i},setClear:function(_i){ii!==_i&&(B.clearDepth(_i),ii=_i)},reset:function(){ht=!1,Xt=null,_n=null,ii=null}}}function T(){let ht=!1,Xt=null,_n=null,ii=null,_i=null,Vr=null,Io=null,na=null,tf=null;return{setTest:function(ms){ht||(ms?ai(2960):Hn(2960))},setMask:function(ms){Xt!==ms&&!ht&&(B.stencilMask(ms),Xt=ms)},setFunc:function(ms,Tu,Il){(_n!==ms||ii!==Tu||_i!==Il)&&(B.stencilFunc(ms,Tu,Il),_n=ms,ii=Tu,_i=Il)},setOp:function(ms,Tu,Il){(Vr!==ms||Io!==Tu||na!==Il)&&(B.stencilOp(ms,Tu,Il),Vr=ms,Io=Tu,na=Il)},setLocked:function(ms){ht=ms},setClear:function(ms){tf!==ms&&(B.clearStencil(ms),tf=ms)},reset:function(){ht=!1,Xt=null,_n=null,ii=null,_i=null,Vr=null,Io=null,na=null,tf=null}}}const I=new f,F=new w,U=new T,G=new WeakMap,V=new WeakMap;let j={},Y={},re=new WeakMap,ie=[],$=null,de=!1,Ce=null,ge=null,we=null,Le=null,Ye=null,it=null,Me=null,Je=!1,tt=null,mt=null,Pt=null,yt=null,dt=null;const St=B.getParameter(35661);let rn=!1,hn=0;const tn=B.getParameter(7938);tn.indexOf("WebGL")!==-1?(hn=parseFloat(/^WebGL (\d)/.exec(tn)[1]),rn=hn>=1):tn.indexOf("OpenGL ES")!==-1&&(hn=parseFloat(/^OpenGL ES (\d)/.exec(tn)[1]),rn=hn>=2);let wn=null,gn={};const ni=B.getParameter(3088),Wn=B.getParameter(2978),Vt=new hr().fromArray(ni),dn=new hr().fromArray(Wn);function Gn(ht,Xt,_n){const ii=new Uint8Array(4),_i=B.createTexture();B.bindTexture(ht,_i),B.texParameteri(ht,10241,9728),B.texParameteri(ht,10240,9728);for(let Vr=0;Vr<_n;Vr++)B.texImage2D(Xt+Vr,0,6408,1,1,0,6408,5121,ii);return _i}const Dt={};Dt[3553]=Gn(3553,3553,1),Dt[34067]=Gn(34067,34069,6),I.setClear(0,0,0,1),F.setClear(1),U.setClear(0),ai(2929),F.setFunc(ct),jn(!1),Vi(v),ai(2884),Ln(O);function ai(ht){j[ht]!==!0&&(B.enable(ht),j[ht]=!0)}function Hn(ht){j[ht]!==!1&&(B.disable(ht),j[ht]=!1)}function Mi(ht,Xt){return Y[ht]!==Xt?(B.bindFramebuffer(ht,Xt),Y[ht]=Xt,u&&(ht===36009&&(Y[36160]=Xt),ht===36160&&(Y[36009]=Xt)),!0):!1}function Tn(ht,Xt){let _n=ie,ii=!1;if(ht)if(_n=re.get(Xt),_n===void 0&&(_n=[],re.set(Xt,_n)),ht.isWebGLMultipleRenderTargets){const _i=ht.texture;if(_n.length!==_i.length||_n[0]!==36064){for(let Vr=0,Io=_i.length;Vr<Io;Vr++)_n[Vr]=36064+Vr;_n.length=_i.length,ii=!0}}else _n[0]!==36064&&(_n[0]=36064,ii=!0);else _n[0]!==1029&&(_n[0]=1029,ii=!0);ii&&(s.isWebGL2?B.drawBuffers(_n):n.get("WEBGL_draw_buffers").drawBuffersWEBGL(_n))}function tr(ht){return $!==ht?(B.useProgram(ht),$=ht,!0):!1}const on={[K]:32774,[se]:32778,[ae]:32779};if(u)on[ee]=32775,on[ne]=32776;else{const ht=n.get("EXT_blend_minmax");ht!==null&&(on[ee]=ht.MIN_EXT,on[ne]=ht.MAX_EXT)}const $t={[X]:0,[W]:1,[ce]:768,[xe]:770,[Ot]:776,[rt]:774,[Fe]:772,[he]:769,[ve]:771,[He]:775,[je]:773};function Ln(ht,Xt,_n,ii,_i,Vr,Io,na){if(ht===O){de===!0&&(Hn(3042),de=!1);return}if(de===!1&&(ai(3042),de=!0),ht!==J){if(ht!==Ce||na!==Je){if((ge!==K||Ye!==K)&&(B.blendEquation(32774),ge=K,Ye=K),na)switch(ht){case D:B.blendFuncSeparate(1,771,1,771);break;case L:B.blendFunc(1,1);break;case N:B.blendFuncSeparate(0,769,0,1);break;case H:B.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",ht);break}else switch(ht){case D:B.blendFuncSeparate(770,771,1,771);break;case L:B.blendFunc(770,1);break;case N:B.blendFuncSeparate(0,769,0,1);break;case H:B.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",ht);break}we=null,Le=null,it=null,Me=null,Ce=ht,Je=na}return}_i=_i||Xt,Vr=Vr||_n,Io=Io||ii,(Xt!==ge||_i!==Ye)&&(B.blendEquationSeparate(on[Xt],on[_i]),ge=Xt,Ye=_i),(_n!==we||ii!==Le||Vr!==it||Io!==Me)&&(B.blendFuncSeparate($t[_n],$t[ii],$t[Vr],$t[Io]),we=_n,Le=ii,it=Vr,Me=Io),Ce=ht,Je=!1}function yi(ht,Xt){ht.side===P?Hn(2884):ai(2884);let _n=ht.side===R;Xt&&(_n=!_n),jn(_n),ht.blending===D&&ht.transparent===!1?Ln(O):Ln(ht.blending,ht.blendEquation,ht.blendSrc,ht.blendDst,ht.blendEquationAlpha,ht.blendSrcAlpha,ht.blendDstAlpha,ht.premultipliedAlpha),F.setFunc(ht.depthFunc),F.setTest(ht.depthTest),F.setMask(ht.depthWrite),I.setMask(ht.colorWrite);const ii=ht.stencilWrite;U.setTest(ii),ii&&(U.setMask(ht.stencilWriteMask),U.setFunc(ht.stencilFunc,ht.stencilRef,ht.stencilFuncMask),U.setOp(ht.stencilFail,ht.stencilZFail,ht.stencilZPass)),Si(ht.polygonOffset,ht.polygonOffsetFactor,ht.polygonOffsetUnits),ht.alphaToCoverage===!0?ai(32926):Hn(32926)}function jn(ht){tt!==ht&&(ht?B.frontFace(2304):B.frontFace(2305),tt=ht)}function Vi(ht){ht!==A?(ai(2884),ht!==mt&&(ht===v?B.cullFace(1029):ht===y?B.cullFace(1028):B.cullFace(1032))):Hn(2884),mt=ht}function Oi(ht){ht!==Pt&&(rn&&B.lineWidth(ht),Pt=ht)}function Si(ht,Xt,_n){ht?(ai(32823),(yt!==Xt||dt!==_n)&&(B.polygonOffset(Xt,_n),yt=Xt,dt=_n)):Hn(32823)}function ns(ht){ht?ai(3089):Hn(3089)}function Xr(ht){ht===void 0&&(ht=33984+St-1),wn!==ht&&(B.activeTexture(ht),wn=ht)}function Ze(ht,Xt,_n){_n===void 0&&(wn===null?_n=33984+St-1:_n=wn);let ii=gn[_n];ii===void 0&&(ii={type:void 0,texture:void 0},gn[_n]=ii),(ii.type!==ht||ii.texture!==Xt)&&(wn!==_n&&(B.activeTexture(_n),wn=_n),B.bindTexture(ht,Xt||Dt[ht]),ii.type=ht,ii.texture=Xt)}function ke(){const ht=gn[wn];ht!==void 0&&ht.type!==void 0&&(B.bindTexture(ht.type,null),ht.type=void 0,ht.texture=void 0)}function Ut(){try{B.compressedTexImage2D.apply(B,arguments)}catch(ht){console.error("THREE.WebGLState:",ht)}}function Cn(){try{B.compressedTexImage3D.apply(B,arguments)}catch(ht){console.error("THREE.WebGLState:",ht)}}function In(){try{B.texSubImage2D.apply(B,arguments)}catch(ht){console.error("THREE.WebGLState:",ht)}}function qn(){try{B.texSubImage3D.apply(B,arguments)}catch(ht){console.error("THREE.WebGLState:",ht)}}function Hi(){try{B.compressedTexSubImage2D.apply(B,arguments)}catch(ht){console.error("THREE.WebGLState:",ht)}}function Zn(){try{B.compressedTexSubImage3D.apply(B,arguments)}catch(ht){console.error("THREE.WebGLState:",ht)}}function en(){try{B.texStorage2D.apply(B,arguments)}catch(ht){console.error("THREE.WebGLState:",ht)}}function Ti(){try{B.texStorage3D.apply(B,arguments)}catch(ht){console.error("THREE.WebGLState:",ht)}}function Ui(){try{B.texImage2D.apply(B,arguments)}catch(ht){console.error("THREE.WebGLState:",ht)}}function mi(){try{B.texImage3D.apply(B,arguments)}catch(ht){console.error("THREE.WebGLState:",ht)}}function Fi(ht){Vt.equals(ht)===!1&&(B.scissor(ht.x,ht.y,ht.z,ht.w),Vt.copy(ht))}function Ii(ht){dn.equals(ht)===!1&&(B.viewport(ht.x,ht.y,ht.z,ht.w),dn.copy(ht))}function Fr(ht,Xt){let _n=V.get(Xt);_n===void 0&&(_n=new WeakMap,V.set(Xt,_n));let ii=_n.get(ht);ii===void 0&&(ii=B.getUniformBlockIndex(Xt,ht.name),_n.set(ht,ii))}function ps(ht,Xt){const ii=V.get(Xt).get(ht);G.get(ht)!==ii&&(B.uniformBlockBinding(Xt,ii,ht.__bindingPointIndex),G.set(ht,ii))}function To(){B.disable(3042),B.disable(2884),B.disable(2929),B.disable(32823),B.disable(3089),B.disable(2960),B.disable(32926),B.blendEquation(32774),B.blendFunc(1,0),B.blendFuncSeparate(1,0,1,0),B.colorMask(!0,!0,!0,!0),B.clearColor(0,0,0,0),B.depthMask(!0),B.depthFunc(513),B.clearDepth(1),B.stencilMask(4294967295),B.stencilFunc(519,0,4294967295),B.stencilOp(7680,7680,7680),B.clearStencil(0),B.cullFace(1029),B.frontFace(2305),B.polygonOffset(0,0),B.activeTexture(33984),B.bindFramebuffer(36160,null),u===!0&&(B.bindFramebuffer(36009,null),B.bindFramebuffer(36008,null)),B.useProgram(null),B.lineWidth(1),B.scissor(0,0,B.canvas.width,B.canvas.height),B.viewport(0,0,B.canvas.width,B.canvas.height),j={},wn=null,gn={},Y={},re=new WeakMap,ie=[],$=null,de=!1,Ce=null,ge=null,we=null,Le=null,Ye=null,it=null,Me=null,Je=!1,tt=null,mt=null,Pt=null,yt=null,dt=null,Vt.set(0,0,B.canvas.width,B.canvas.height),dn.set(0,0,B.canvas.width,B.canvas.height),I.reset(),F.reset(),U.reset()}return{buffers:{color:I,depth:F,stencil:U},enable:ai,disable:Hn,bindFramebuffer:Mi,drawBuffers:Tn,useProgram:tr,setBlending:Ln,setMaterial:yi,setFlipSided:jn,setCullFace:Vi,setLineWidth:Oi,setPolygonOffset:Si,setScissorTest:ns,activeTexture:Xr,bindTexture:Ze,unbindTexture:ke,compressedTexImage2D:Ut,compressedTexImage3D:Cn,texImage2D:Ui,texImage3D:mi,updateUBOMapping:Fr,uniformBlockBinding:ps,texStorage2D:en,texStorage3D:Ti,texSubImage2D:In,texSubImage3D:qn,compressedTexSubImage2D:Hi,compressedTexSubImage3D:Zn,scissor:Fi,viewport:Ii,reset:To}}function P5(B,n,s,u,f,w,T){const I=f.isWebGL2,F=f.maxTextures,U=f.maxCubemapSize,G=f.maxTextureSize,V=f.maxSamples,j=n.has("WEBGL_multisampled_render_to_texture")?n.get("WEBGL_multisampled_render_to_texture"):null,Y=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),re=new WeakMap;let ie;const $=new WeakMap;let de=!1;try{de=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function Ce(Ze,ke){return de?new OffscreenCanvas(Ze,ke):Lc("canvas")}function ge(Ze,ke,Ut,Cn){let In=1;if((Ze.width>Cn||Ze.height>Cn)&&(In=Cn/Math.max(Ze.width,Ze.height)),In<1||ke===!0)if(typeof HTMLImageElement<"u"&&Ze instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Ze instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Ze instanceof ImageBitmap){const qn=ke?Xo:Math.floor,Hi=qn(In*Ze.width),Zn=qn(In*Ze.height);ie===void 0&&(ie=Ce(Hi,Zn));const en=Ut?Ce(Hi,Zn):ie;return en.width=Hi,en.height=Zn,en.getContext("2d").drawImage(Ze,0,0,Hi,Zn),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Ze.width+"x"+Ze.height+") to ("+Hi+"x"+Zn+")."),en}else return"data"in Ze&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Ze.width+"x"+Ze.height+")."),Ze;return Ze}function we(Ze){return Ja(Ze.width)&&Ja(Ze.height)}function Le(Ze){return I?!1:Ze.wrapS!==Oe||Ze.wrapT!==Oe||Ze.minFilter!==le&&Ze.minFilter!==Te}function Ye(Ze,ke){return Ze.generateMipmaps&&ke&&Ze.minFilter!==le&&Ze.minFilter!==Te}function it(Ze){B.generateMipmap(Ze)}function Me(Ze,ke,Ut,Cn,In=!1){if(I===!1)return ke;if(Ze!==null){if(B[Ze]!==void 0)return B[Ze];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Ze+"'")}let qn=ke;return ke===6403&&(Ut===5126&&(qn=33326),Ut===5131&&(qn=33325),Ut===5121&&(qn=33321)),ke===33319&&(Ut===5126&&(qn=33328),Ut===5131&&(qn=33327),Ut===5121&&(qn=33323)),ke===6408&&(Ut===5126&&(qn=34836),Ut===5131&&(qn=34842),Ut===5121&&(qn=Cn===Ri&&In===!1?35907:32856),Ut===32819&&(qn=32854),Ut===32820&&(qn=32855)),(qn===33325||qn===33326||qn===33327||qn===33328||qn===34842||qn===34836)&&n.get("EXT_color_buffer_float"),qn}function Je(Ze,ke,Ut){return Ye(Ze,Ut)===!0||Ze.isFramebufferTexture&&Ze.minFilter!==le&&Ze.minFilter!==Te?Math.log2(Math.max(ke.width,ke.height))+1:Ze.mipmaps!==void 0&&Ze.mipmaps.length>0?Ze.mipmaps.length:Ze.isCompressedTexture&&Array.isArray(Ze.image)?ke.mipmaps.length:1}function tt(Ze){return Ze===le||Ze===Q||Ze===Ie?9728:9729}function mt(Ze){const ke=Ze.target;ke.removeEventListener("dispose",mt),yt(ke),ke.isVideoTexture&&re.delete(ke)}function Pt(Ze){const ke=Ze.target;ke.removeEventListener("dispose",Pt),St(ke)}function yt(Ze){const ke=u.get(Ze);if(ke.__webglInit===void 0)return;const Ut=Ze.source,Cn=$.get(Ut);if(Cn){const In=Cn[ke.__cacheKey];In.usedTimes--,In.usedTimes===0&&dt(Ze),Object.keys(Cn).length===0&&$.delete(Ut)}u.remove(Ze)}function dt(Ze){const ke=u.get(Ze);B.deleteTexture(ke.__webglTexture);const Ut=Ze.source,Cn=$.get(Ut);delete Cn[ke.__cacheKey],T.memory.textures--}function St(Ze){const ke=Ze.texture,Ut=u.get(Ze),Cn=u.get(ke);if(Cn.__webglTexture!==void 0&&(B.deleteTexture(Cn.__webglTexture),T.memory.textures--),Ze.depthTexture&&Ze.depthTexture.dispose(),Ze.isWebGLCubeRenderTarget)for(let In=0;In<6;In++)B.deleteFramebuffer(Ut.__webglFramebuffer[In]),Ut.__webglDepthbuffer&&B.deleteRenderbuffer(Ut.__webglDepthbuffer[In]);else{if(B.deleteFramebuffer(Ut.__webglFramebuffer),Ut.__webglDepthbuffer&&B.deleteRenderbuffer(Ut.__webglDepthbuffer),Ut.__webglMultisampledFramebuffer&&B.deleteFramebuffer(Ut.__webglMultisampledFramebuffer),Ut.__webglColorRenderbuffer)for(let In=0;In<Ut.__webglColorRenderbuffer.length;In++)Ut.__webglColorRenderbuffer[In]&&B.deleteRenderbuffer(Ut.__webglColorRenderbuffer[In]);Ut.__webglDepthRenderbuffer&&B.deleteRenderbuffer(Ut.__webglDepthRenderbuffer)}if(Ze.isWebGLMultipleRenderTargets)for(let In=0,qn=ke.length;In<qn;In++){const Hi=u.get(ke[In]);Hi.__webglTexture&&(B.deleteTexture(Hi.__webglTexture),T.memory.textures--),u.remove(ke[In])}u.remove(ke),u.remove(Ze)}let rn=0;function hn(){rn=0}function tn(){const Ze=rn;return Ze>=F&&console.warn("THREE.WebGLTextures: Trying to use "+Ze+" texture units while this GPU supports only "+F),rn+=1,Ze}function wn(Ze){const ke=[];return ke.push(Ze.wrapS),ke.push(Ze.wrapT),ke.push(Ze.wrapR||0),ke.push(Ze.magFilter),ke.push(Ze.minFilter),ke.push(Ze.anisotropy),ke.push(Ze.internalFormat),ke.push(Ze.format),ke.push(Ze.type),ke.push(Ze.generateMipmaps),ke.push(Ze.premultiplyAlpha),ke.push(Ze.flipY),ke.push(Ze.unpackAlignment),ke.push(Ze.encoding),ke.join()}function gn(Ze,ke){const Ut=u.get(Ze);if(Ze.isVideoTexture&&ns(Ze),Ze.isRenderTargetTexture===!1&&Ze.version>0&&Ut.__version!==Ze.version){const Cn=Ze.image;if(Cn===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Cn.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Hn(Ut,Ze,ke);return}}s.bindTexture(3553,Ut.__webglTexture,33984+ke)}function ni(Ze,ke){const Ut=u.get(Ze);if(Ze.version>0&&Ut.__version!==Ze.version){Hn(Ut,Ze,ke);return}s.bindTexture(35866,Ut.__webglTexture,33984+ke)}function Wn(Ze,ke){const Ut=u.get(Ze);if(Ze.version>0&&Ut.__version!==Ze.version){Hn(Ut,Ze,ke);return}s.bindTexture(32879,Ut.__webglTexture,33984+ke)}function Vt(Ze,ke){const Ut=u.get(Ze);if(Ze.version>0&&Ut.__version!==Ze.version){Mi(Ut,Ze,ke);return}s.bindTexture(34067,Ut.__webglTexture,33984+ke)}const dn={[fe]:10497,[Oe]:33071,[$e]:33648},Gn={[le]:9728,[Q]:9984,[Ie]:9986,[Te]:9729,[Ve]:9985,[Ht]:9987};function Dt(Ze,ke,Ut){if(Ut?(B.texParameteri(Ze,10242,dn[ke.wrapS]),B.texParameteri(Ze,10243,dn[ke.wrapT]),(Ze===32879||Ze===35866)&&B.texParameteri(Ze,32882,dn[ke.wrapR]),B.texParameteri(Ze,10240,Gn[ke.magFilter]),B.texParameteri(Ze,10241,Gn[ke.minFilter])):(B.texParameteri(Ze,10242,33071),B.texParameteri(Ze,10243,33071),(Ze===32879||Ze===35866)&&B.texParameteri(Ze,32882,33071),(ke.wrapS!==Oe||ke.wrapT!==Oe)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),B.texParameteri(Ze,10240,tt(ke.magFilter)),B.texParameteri(Ze,10241,tt(ke.minFilter)),ke.minFilter!==le&&ke.minFilter!==Te&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),n.has("EXT_texture_filter_anisotropic")===!0){const Cn=n.get("EXT_texture_filter_anisotropic");if(ke.type===vn&&n.has("OES_texture_float_linear")===!1||I===!1&&ke.type===Nt&&n.has("OES_texture_half_float_linear")===!1)return;(ke.anisotropy>1||u.get(ke).__currentAnisotropy)&&(B.texParameterf(Ze,Cn.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(ke.anisotropy,f.getMaxAnisotropy())),u.get(ke).__currentAnisotropy=ke.anisotropy)}}function ai(Ze,ke){let Ut=!1;Ze.__webglInit===void 0&&(Ze.__webglInit=!0,ke.addEventListener("dispose",mt));const Cn=ke.source;let In=$.get(Cn);In===void 0&&(In={},$.set(Cn,In));const qn=wn(ke);if(qn!==Ze.__cacheKey){In[qn]===void 0&&(In[qn]={texture:B.createTexture(),usedTimes:0},T.memory.textures++,Ut=!0),In[qn].usedTimes++;const Hi=In[Ze.__cacheKey];Hi!==void 0&&(In[Ze.__cacheKey].usedTimes--,Hi.usedTimes===0&&dt(ke)),Ze.__cacheKey=qn,Ze.__webglTexture=In[qn].texture}return Ut}function Hn(Ze,ke,Ut){let Cn=3553;(ke.isDataArrayTexture||ke.isCompressedArrayTexture)&&(Cn=35866),ke.isData3DTexture&&(Cn=32879);const In=ai(Ze,ke),qn=ke.source;s.bindTexture(Cn,Ze.__webglTexture,33984+Ut);const Hi=u.get(qn);if(qn.version!==Hi.__version||In===!0){s.activeTexture(33984+Ut),B.pixelStorei(37440,ke.flipY),B.pixelStorei(37441,ke.premultiplyAlpha),B.pixelStorei(3317,ke.unpackAlignment),B.pixelStorei(37443,0);const Zn=Le(ke)&&we(ke.image)===!1;let en=ge(ke.image,Zn,!1,G);en=Xr(ke,en);const Ti=we(en)||I,Ui=w.convert(ke.format,ke.encoding);let mi=w.convert(ke.type),Fi=Me(ke.internalFormat,Ui,mi,ke.encoding,ke.isVideoTexture);Dt(Cn,ke,Ti);let Ii;const Fr=ke.mipmaps,ps=I&&ke.isVideoTexture!==!0,To=Hi.__version===void 0||In===!0,ht=Je(ke,en,Ti);if(ke.isDepthTexture)Fi=6402,I?ke.type===vn?Fi=36012:ke.type===bi?Fi=33190:ke.type===yn?Fi=35056:Fi=33189:ke.type===vn&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),ke.format===xn&&Fi===6402&&ke.type!==Ni&&ke.type!==bi&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),ke.type=bi,mi=w.convert(ke.type)),ke.format===Nn&&Fi===6402&&(Fi=34041,ke.type!==yn&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),ke.type=yn,mi=w.convert(ke.type))),To&&(ps?s.texStorage2D(3553,1,Fi,en.width,en.height):s.texImage2D(3553,0,Fi,en.width,en.height,0,Ui,mi,null));else if(ke.isDataTexture)if(Fr.length>0&&Ti){ps&&To&&s.texStorage2D(3553,ht,Fi,Fr[0].width,Fr[0].height);for(let Xt=0,_n=Fr.length;Xt<_n;Xt++)Ii=Fr[Xt],ps?s.texSubImage2D(3553,Xt,0,0,Ii.width,Ii.height,Ui,mi,Ii.data):s.texImage2D(3553,Xt,Fi,Ii.width,Ii.height,0,Ui,mi,Ii.data);ke.generateMipmaps=!1}else ps?(To&&s.texStorage2D(3553,ht,Fi,en.width,en.height),s.texSubImage2D(3553,0,0,0,en.width,en.height,Ui,mi,en.data)):s.texImage2D(3553,0,Fi,en.width,en.height,0,Ui,mi,en.data);else if(ke.isCompressedTexture)if(ke.isCompressedArrayTexture){ps&&To&&s.texStorage3D(35866,ht,Fi,Fr[0].width,Fr[0].height,en.depth);for(let Xt=0,_n=Fr.length;Xt<_n;Xt++)Ii=Fr[Xt],ke.format!==At?Ui!==null?ps?s.compressedTexSubImage3D(35866,Xt,0,0,0,Ii.width,Ii.height,en.depth,Ui,Ii.data,0,0):s.compressedTexImage3D(35866,Xt,Fi,Ii.width,Ii.height,en.depth,0,Ii.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ps?s.texSubImage3D(35866,Xt,0,0,0,Ii.width,Ii.height,en.depth,Ui,mi,Ii.data):s.texImage3D(35866,Xt,Fi,Ii.width,Ii.height,en.depth,0,Ui,mi,Ii.data)}else{ps&&To&&s.texStorage2D(3553,ht,Fi,Fr[0].width,Fr[0].height);for(let Xt=0,_n=Fr.length;Xt<_n;Xt++)Ii=Fr[Xt],ke.format!==At?Ui!==null?ps?s.compressedTexSubImage2D(3553,Xt,0,0,Ii.width,Ii.height,Ui,Ii.data):s.compressedTexImage2D(3553,Xt,Fi,Ii.width,Ii.height,0,Ii.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ps?s.texSubImage2D(3553,Xt,0,0,Ii.width,Ii.height,Ui,mi,Ii.data):s.texImage2D(3553,Xt,Fi,Ii.width,Ii.height,0,Ui,mi,Ii.data)}else if(ke.isDataArrayTexture)ps?(To&&s.texStorage3D(35866,ht,Fi,en.width,en.height,en.depth),s.texSubImage3D(35866,0,0,0,0,en.width,en.height,en.depth,Ui,mi,en.data)):s.texImage3D(35866,0,Fi,en.width,en.height,en.depth,0,Ui,mi,en.data);else if(ke.isData3DTexture)ps?(To&&s.texStorage3D(32879,ht,Fi,en.width,en.height,en.depth),s.texSubImage3D(32879,0,0,0,0,en.width,en.height,en.depth,Ui,mi,en.data)):s.texImage3D(32879,0,Fi,en.width,en.height,en.depth,0,Ui,mi,en.data);else if(ke.isFramebufferTexture){if(To)if(ps)s.texStorage2D(3553,ht,Fi,en.width,en.height);else{let Xt=en.width,_n=en.height;for(let ii=0;ii<ht;ii++)s.texImage2D(3553,ii,Fi,Xt,_n,0,Ui,mi,null),Xt>>=1,_n>>=1}}else if(Fr.length>0&&Ti){ps&&To&&s.texStorage2D(3553,ht,Fi,Fr[0].width,Fr[0].height);for(let Xt=0,_n=Fr.length;Xt<_n;Xt++)Ii=Fr[Xt],ps?s.texSubImage2D(3553,Xt,0,0,Ui,mi,Ii):s.texImage2D(3553,Xt,Fi,Ui,mi,Ii);ke.generateMipmaps=!1}else ps?(To&&s.texStorage2D(3553,ht,Fi,en.width,en.height),s.texSubImage2D(3553,0,0,0,Ui,mi,en)):s.texImage2D(3553,0,Fi,Ui,mi,en);Ye(ke,Ti)&&it(Cn),Hi.__version=qn.version,ke.onUpdate&&ke.onUpdate(ke)}Ze.__version=ke.version}function Mi(Ze,ke,Ut){if(ke.image.length!==6)return;const Cn=ai(Ze,ke),In=ke.source;s.bindTexture(34067,Ze.__webglTexture,33984+Ut);const qn=u.get(In);if(In.version!==qn.__version||Cn===!0){s.activeTexture(33984+Ut),B.pixelStorei(37440,ke.flipY),B.pixelStorei(37441,ke.premultiplyAlpha),B.pixelStorei(3317,ke.unpackAlignment),B.pixelStorei(37443,0);const Hi=ke.isCompressedTexture||ke.image[0].isCompressedTexture,Zn=ke.image[0]&&ke.image[0].isDataTexture,en=[];for(let Xt=0;Xt<6;Xt++)!Hi&&!Zn?en[Xt]=ge(ke.image[Xt],!1,!0,U):en[Xt]=Zn?ke.image[Xt].image:ke.image[Xt],en[Xt]=Xr(ke,en[Xt]);const Ti=en[0],Ui=we(Ti)||I,mi=w.convert(ke.format,ke.encoding),Fi=w.convert(ke.type),Ii=Me(ke.internalFormat,mi,Fi,ke.encoding),Fr=I&&ke.isVideoTexture!==!0,ps=qn.__version===void 0||Cn===!0;let To=Je(ke,Ti,Ui);Dt(34067,ke,Ui);let ht;if(Hi){Fr&&ps&&s.texStorage2D(34067,To,Ii,Ti.width,Ti.height);for(let Xt=0;Xt<6;Xt++){ht=en[Xt].mipmaps;for(let _n=0;_n<ht.length;_n++){const ii=ht[_n];ke.format!==At?mi!==null?Fr?s.compressedTexSubImage2D(34069+Xt,_n,0,0,ii.width,ii.height,mi,ii.data):s.compressedTexImage2D(34069+Xt,_n,Ii,ii.width,ii.height,0,ii.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Fr?s.texSubImage2D(34069+Xt,_n,0,0,ii.width,ii.height,mi,Fi,ii.data):s.texImage2D(34069+Xt,_n,Ii,ii.width,ii.height,0,mi,Fi,ii.data)}}}else{ht=ke.mipmaps,Fr&&ps&&(ht.length>0&&To++,s.texStorage2D(34067,To,Ii,en[0].width,en[0].height));for(let Xt=0;Xt<6;Xt++)if(Zn){Fr?s.texSubImage2D(34069+Xt,0,0,0,en[Xt].width,en[Xt].height,mi,Fi,en[Xt].data):s.texImage2D(34069+Xt,0,Ii,en[Xt].width,en[Xt].height,0,mi,Fi,en[Xt].data);for(let _n=0;_n<ht.length;_n++){const _i=ht[_n].image[Xt].image;Fr?s.texSubImage2D(34069+Xt,_n+1,0,0,_i.width,_i.height,mi,Fi,_i.data):s.texImage2D(34069+Xt,_n+1,Ii,_i.width,_i.height,0,mi,Fi,_i.data)}}else{Fr?s.texSubImage2D(34069+Xt,0,0,0,mi,Fi,en[Xt]):s.texImage2D(34069+Xt,0,Ii,mi,Fi,en[Xt]);for(let _n=0;_n<ht.length;_n++){const ii=ht[_n];Fr?s.texSubImage2D(34069+Xt,_n+1,0,0,mi,Fi,ii.image[Xt]):s.texImage2D(34069+Xt,_n+1,Ii,mi,Fi,ii.image[Xt])}}}Ye(ke,Ui)&&it(34067),qn.__version=In.version,ke.onUpdate&&ke.onUpdate(ke)}Ze.__version=ke.version}function Tn(Ze,ke,Ut,Cn,In){const qn=w.convert(Ut.format,Ut.encoding),Hi=w.convert(Ut.type),Zn=Me(Ut.internalFormat,qn,Hi,Ut.encoding);u.get(ke).__hasExternalTextures||(In===32879||In===35866?s.texImage3D(In,0,Zn,ke.width,ke.height,ke.depth,0,qn,Hi,null):s.texImage2D(In,0,Zn,ke.width,ke.height,0,qn,Hi,null)),s.bindFramebuffer(36160,Ze),Si(ke)?j.framebufferTexture2DMultisampleEXT(36160,Cn,In,u.get(Ut).__webglTexture,0,Oi(ke)):(In===3553||In>=34069&&In<=34074)&&B.framebufferTexture2D(36160,Cn,In,u.get(Ut).__webglTexture,0),s.bindFramebuffer(36160,null)}function tr(Ze,ke,Ut){if(B.bindRenderbuffer(36161,Ze),ke.depthBuffer&&!ke.stencilBuffer){let Cn=33189;if(Ut||Si(ke)){const In=ke.depthTexture;In&&In.isDepthTexture&&(In.type===vn?Cn=36012:In.type===bi&&(Cn=33190));const qn=Oi(ke);Si(ke)?j.renderbufferStorageMultisampleEXT(36161,qn,Cn,ke.width,ke.height):B.renderbufferStorageMultisample(36161,qn,Cn,ke.width,ke.height)}else B.renderbufferStorage(36161,Cn,ke.width,ke.height);B.framebufferRenderbuffer(36160,36096,36161,Ze)}else if(ke.depthBuffer&&ke.stencilBuffer){const Cn=Oi(ke);Ut&&Si(ke)===!1?B.renderbufferStorageMultisample(36161,Cn,35056,ke.width,ke.height):Si(ke)?j.renderbufferStorageMultisampleEXT(36161,Cn,35056,ke.width,ke.height):B.renderbufferStorage(36161,34041,ke.width,ke.height),B.framebufferRenderbuffer(36160,33306,36161,Ze)}else{const Cn=ke.isWebGLMultipleRenderTargets===!0?ke.texture:[ke.texture];for(let In=0;In<Cn.length;In++){const qn=Cn[In],Hi=w.convert(qn.format,qn.encoding),Zn=w.convert(qn.type),en=Me(qn.internalFormat,Hi,Zn,qn.encoding),Ti=Oi(ke);Ut&&Si(ke)===!1?B.renderbufferStorageMultisample(36161,Ti,en,ke.width,ke.height):Si(ke)?j.renderbufferStorageMultisampleEXT(36161,Ti,en,ke.width,ke.height):B.renderbufferStorage(36161,en,ke.width,ke.height)}}B.bindRenderbuffer(36161,null)}function on(Ze,ke){if(ke&&ke.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(s.bindFramebuffer(36160,Ze),!(ke.depthTexture&&ke.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!u.get(ke.depthTexture).__webglTexture||ke.depthTexture.image.width!==ke.width||ke.depthTexture.image.height!==ke.height)&&(ke.depthTexture.image.width=ke.width,ke.depthTexture.image.height=ke.height,ke.depthTexture.needsUpdate=!0),gn(ke.depthTexture,0);const Cn=u.get(ke.depthTexture).__webglTexture,In=Oi(ke);if(ke.depthTexture.format===xn)Si(ke)?j.framebufferTexture2DMultisampleEXT(36160,36096,3553,Cn,0,In):B.framebufferTexture2D(36160,36096,3553,Cn,0);else if(ke.depthTexture.format===Nn)Si(ke)?j.framebufferTexture2DMultisampleEXT(36160,33306,3553,Cn,0,In):B.framebufferTexture2D(36160,33306,3553,Cn,0);else throw new Error("Unknown depthTexture format")}function $t(Ze){const ke=u.get(Ze),Ut=Ze.isWebGLCubeRenderTarget===!0;if(Ze.depthTexture&&!ke.__autoAllocateDepthBuffer){if(Ut)throw new Error("target.depthTexture not supported in Cube render targets");on(ke.__webglFramebuffer,Ze)}else if(Ut){ke.__webglDepthbuffer=[];for(let Cn=0;Cn<6;Cn++)s.bindFramebuffer(36160,ke.__webglFramebuffer[Cn]),ke.__webglDepthbuffer[Cn]=B.createRenderbuffer(),tr(ke.__webglDepthbuffer[Cn],Ze,!1)}else s.bindFramebuffer(36160,ke.__webglFramebuffer),ke.__webglDepthbuffer=B.createRenderbuffer(),tr(ke.__webglDepthbuffer,Ze,!1);s.bindFramebuffer(36160,null)}function Ln(Ze,ke,Ut){const Cn=u.get(Ze);ke!==void 0&&Tn(Cn.__webglFramebuffer,Ze,Ze.texture,36064,3553),Ut!==void 0&&$t(Ze)}function yi(Ze){const ke=Ze.texture,Ut=u.get(Ze),Cn=u.get(ke);Ze.addEventListener("dispose",Pt),Ze.isWebGLMultipleRenderTargets!==!0&&(Cn.__webglTexture===void 0&&(Cn.__webglTexture=B.createTexture()),Cn.__version=ke.version,T.memory.textures++);const In=Ze.isWebGLCubeRenderTarget===!0,qn=Ze.isWebGLMultipleRenderTargets===!0,Hi=we(Ze)||I;if(In){Ut.__webglFramebuffer=[];for(let Zn=0;Zn<6;Zn++)Ut.__webglFramebuffer[Zn]=B.createFramebuffer()}else{if(Ut.__webglFramebuffer=B.createFramebuffer(),qn)if(f.drawBuffers){const Zn=Ze.texture;for(let en=0,Ti=Zn.length;en<Ti;en++){const Ui=u.get(Zn[en]);Ui.__webglTexture===void 0&&(Ui.__webglTexture=B.createTexture(),T.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(I&&Ze.samples>0&&Si(Ze)===!1){const Zn=qn?ke:[ke];Ut.__webglMultisampledFramebuffer=B.createFramebuffer(),Ut.__webglColorRenderbuffer=[],s.bindFramebuffer(36160,Ut.__webglMultisampledFramebuffer);for(let en=0;en<Zn.length;en++){const Ti=Zn[en];Ut.__webglColorRenderbuffer[en]=B.createRenderbuffer(),B.bindRenderbuffer(36161,Ut.__webglColorRenderbuffer[en]);const Ui=w.convert(Ti.format,Ti.encoding),mi=w.convert(Ti.type),Fi=Me(Ti.internalFormat,Ui,mi,Ti.encoding,Ze.isXRRenderTarget===!0),Ii=Oi(Ze);B.renderbufferStorageMultisample(36161,Ii,Fi,Ze.width,Ze.height),B.framebufferRenderbuffer(36160,36064+en,36161,Ut.__webglColorRenderbuffer[en])}B.bindRenderbuffer(36161,null),Ze.depthBuffer&&(Ut.__webglDepthRenderbuffer=B.createRenderbuffer(),tr(Ut.__webglDepthRenderbuffer,Ze,!0)),s.bindFramebuffer(36160,null)}}if(In){s.bindTexture(34067,Cn.__webglTexture),Dt(34067,ke,Hi);for(let Zn=0;Zn<6;Zn++)Tn(Ut.__webglFramebuffer[Zn],Ze,ke,36064,34069+Zn);Ye(ke,Hi)&&it(34067),s.unbindTexture()}else if(qn){const Zn=Ze.texture;for(let en=0,Ti=Zn.length;en<Ti;en++){const Ui=Zn[en],mi=u.get(Ui);s.bindTexture(3553,mi.__webglTexture),Dt(3553,Ui,Hi),Tn(Ut.__webglFramebuffer,Ze,Ui,36064+en,3553),Ye(Ui,Hi)&&it(3553)}s.unbindTexture()}else{let Zn=3553;(Ze.isWebGL3DRenderTarget||Ze.isWebGLArrayRenderTarget)&&(I?Zn=Ze.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),s.bindTexture(Zn,Cn.__webglTexture),Dt(Zn,ke,Hi),Tn(Ut.__webglFramebuffer,Ze,ke,36064,Zn),Ye(ke,Hi)&&it(Zn),s.unbindTexture()}Ze.depthBuffer&&$t(Ze)}function jn(Ze){const ke=we(Ze)||I,Ut=Ze.isWebGLMultipleRenderTargets===!0?Ze.texture:[Ze.texture];for(let Cn=0,In=Ut.length;Cn<In;Cn++){const qn=Ut[Cn];if(Ye(qn,ke)){const Hi=Ze.isWebGLCubeRenderTarget?34067:3553,Zn=u.get(qn).__webglTexture;s.bindTexture(Hi,Zn),it(Hi),s.unbindTexture()}}}function Vi(Ze){if(I&&Ze.samples>0&&Si(Ze)===!1){const ke=Ze.isWebGLMultipleRenderTargets?Ze.texture:[Ze.texture],Ut=Ze.width,Cn=Ze.height;let In=16384;const qn=[],Hi=Ze.stencilBuffer?33306:36096,Zn=u.get(Ze),en=Ze.isWebGLMultipleRenderTargets===!0;if(en)for(let Ti=0;Ti<ke.length;Ti++)s.bindFramebuffer(36160,Zn.__webglMultisampledFramebuffer),B.framebufferRenderbuffer(36160,36064+Ti,36161,null),s.bindFramebuffer(36160,Zn.__webglFramebuffer),B.framebufferTexture2D(36009,36064+Ti,3553,null,0);s.bindFramebuffer(36008,Zn.__webglMultisampledFramebuffer),s.bindFramebuffer(36009,Zn.__webglFramebuffer);for(let Ti=0;Ti<ke.length;Ti++){qn.push(36064+Ti),Ze.depthBuffer&&qn.push(Hi);const Ui=Zn.__ignoreDepthValues!==void 0?Zn.__ignoreDepthValues:!1;if(Ui===!1&&(Ze.depthBuffer&&(In|=256),Ze.stencilBuffer&&(In|=1024)),en&&B.framebufferRenderbuffer(36008,36064,36161,Zn.__webglColorRenderbuffer[Ti]),Ui===!0&&(B.invalidateFramebuffer(36008,[Hi]),B.invalidateFramebuffer(36009,[Hi])),en){const mi=u.get(ke[Ti]).__webglTexture;B.framebufferTexture2D(36009,36064,3553,mi,0)}B.blitFramebuffer(0,0,Ut,Cn,0,0,Ut,Cn,In,9728),Y&&B.invalidateFramebuffer(36008,qn)}if(s.bindFramebuffer(36008,null),s.bindFramebuffer(36009,null),en)for(let Ti=0;Ti<ke.length;Ti++){s.bindFramebuffer(36160,Zn.__webglMultisampledFramebuffer),B.framebufferRenderbuffer(36160,36064+Ti,36161,Zn.__webglColorRenderbuffer[Ti]);const Ui=u.get(ke[Ti]).__webglTexture;s.bindFramebuffer(36160,Zn.__webglFramebuffer),B.framebufferTexture2D(36009,36064+Ti,3553,Ui,0)}s.bindFramebuffer(36009,Zn.__webglMultisampledFramebuffer)}}function Oi(Ze){return Math.min(V,Ze.samples)}function Si(Ze){const ke=u.get(Ze);return I&&Ze.samples>0&&n.has("WEBGL_multisampled_render_to_texture")===!0&&ke.__useRenderToTexture!==!1}function ns(Ze){const ke=T.render.frame;re.get(Ze)!==ke&&(re.set(Ze,ke),Ze.update())}function Xr(Ze,ke){const Ut=Ze.encoding,Cn=Ze.format,In=Ze.type;return Ze.isCompressedTexture===!0||Ze.isVideoTexture===!0||Ze.format===ua||Ut!==ar&&(Ut===Ri?I===!1?n.has("EXT_sRGB")===!0&&Cn===At?(Ze.format=ua,Ze.minFilter=Te,Ze.generateMipmaps=!1):ke=Kl.sRGBToLinear(ke):(Cn!==At||In!==cn)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",Ut)),ke}this.allocateTextureUnit=tn,this.resetTextureUnits=hn,this.setTexture2D=gn,this.setTexture2DArray=ni,this.setTexture3D=Wn,this.setTextureCube=Vt,this.rebindTextures=Ln,this.setupRenderTarget=yi,this.updateRenderTargetMipmap=jn,this.updateMultisampleRenderTarget=Vi,this.setupDepthRenderbuffer=$t,this.setupFrameBufferTexture=Tn,this.useMultisampledRTT=Si}function db(B,n,s){const u=s.isWebGL2;function f(w,T=null){let I;if(w===cn)return 5121;if(w===ln)return 32819;if(w===ei)return 32820;if(w===Xn)return 5120;if(w===cr)return 5122;if(w===Ni)return 5123;if(w===or)return 5124;if(w===bi)return 5125;if(w===vn)return 5126;if(w===Nt)return u?5131:(I=n.get("OES_texture_half_float"),I!==null?I.HALF_FLOAT_OES:null);if(w===De)return 6406;if(w===At)return 6408;if(w===ot)return 6409;if(w===wt)return 6410;if(w===xn)return 6402;if(w===Nn)return 34041;if(w===st)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(w===ua)return I=n.get("EXT_sRGB"),I!==null?I.SRGB_ALPHA_EXT:null;if(w===pn)return 6403;if(w===Un)return 36244;if(w===Kn)return 33319;if(w===be)return 33320;if(w===Ge)return 36249;if(w===et||w===Et||w===vt||w===Gt)if(T===Ri)if(I=n.get("WEBGL_compressed_texture_s3tc_srgb"),I!==null){if(w===et)return I.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(w===Et)return I.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(w===vt)return I.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(w===Gt)return I.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(I=n.get("WEBGL_compressed_texture_s3tc"),I!==null){if(w===et)return I.COMPRESSED_RGB_S3TC_DXT1_EXT;if(w===Et)return I.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(w===vt)return I.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(w===Gt)return I.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(w===zt||w===an||w===bn||w===Bt)if(I=n.get("WEBGL_compressed_texture_pvrtc"),I!==null){if(w===zt)return I.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(w===an)return I.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(w===bn)return I.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(w===Bt)return I.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(w===Vn)return I=n.get("WEBGL_compressed_texture_etc1"),I!==null?I.COMPRESSED_RGB_ETC1_WEBGL:null;if(w===ti||w===si)if(I=n.get("WEBGL_compressed_texture_etc"),I!==null){if(w===ti)return T===Ri?I.COMPRESSED_SRGB8_ETC2:I.COMPRESSED_RGB8_ETC2;if(w===si)return T===Ri?I.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:I.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(w===gi||w===Mn||w===ui||w===Ai||w===xi||w===Ir||w===Sn||w===fi||w===qr||w===rr||w===q||w===oe||w===pe||w===_e)if(I=n.get("WEBGL_compressed_texture_astc"),I!==null){if(w===gi)return T===Ri?I.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:I.COMPRESSED_RGBA_ASTC_4x4_KHR;if(w===Mn)return T===Ri?I.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:I.COMPRESSED_RGBA_ASTC_5x4_KHR;if(w===ui)return T===Ri?I.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:I.COMPRESSED_RGBA_ASTC_5x5_KHR;if(w===Ai)return T===Ri?I.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:I.COMPRESSED_RGBA_ASTC_6x5_KHR;if(w===xi)return T===Ri?I.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:I.COMPRESSED_RGBA_ASTC_6x6_KHR;if(w===Ir)return T===Ri?I.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:I.COMPRESSED_RGBA_ASTC_8x5_KHR;if(w===Sn)return T===Ri?I.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:I.COMPRESSED_RGBA_ASTC_8x6_KHR;if(w===fi)return T===Ri?I.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:I.COMPRESSED_RGBA_ASTC_8x8_KHR;if(w===qr)return T===Ri?I.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:I.COMPRESSED_RGBA_ASTC_10x5_KHR;if(w===rr)return T===Ri?I.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:I.COMPRESSED_RGBA_ASTC_10x6_KHR;if(w===q)return T===Ri?I.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:I.COMPRESSED_RGBA_ASTC_10x8_KHR;if(w===oe)return T===Ri?I.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:I.COMPRESSED_RGBA_ASTC_10x10_KHR;if(w===pe)return T===Ri?I.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:I.COMPRESSED_RGBA_ASTC_12x10_KHR;if(w===_e)return T===Ri?I.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:I.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(w===Ne)if(I=n.get("EXT_texture_compression_bptc"),I!==null){if(w===Ne)return T===Ri?I.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:I.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;return w===yn?u?34042:(I=n.get("WEBGL_depth_texture"),I!==null?I.UNSIGNED_INT_24_8_WEBGL:null):B[w]!==void 0?B[w]:null}return{convert:f}}class Gd extends dr{constructor(){super(),this.isGroup=!0,this.type="Group"}}class hE extends Ts{constructor(n=[]){super(),this.isArrayCamera=!0,this.cameras=n}}var fb=new Qe,pb=new Qe;function O5(B,n,s){fb.setFromMatrixPosition(n.matrixWorld),pb.setFromMatrixPosition(s.matrixWorld);var u=fb.distanceTo(pb),f=n.projectionMatrix.elements,w=s.projectionMatrix.elements,T=f[14]/(f[10]-1),I=f[14]/(f[10]+1),F=(f[9]+1)/f[5],U=(f[9]-1)/f[5],G=(f[8]-1)/f[0],V=(w[8]+1)/w[0],j=T*G,Y=T*V,re=u/(-G+V),ie=re*-G;n.matrixWorld.decompose(B.position,B.quaternion,B.scale),B.translateX(ie),B.translateZ(re),B.matrixWorld.compose(B.position,B.quaternion,B.scale),B.matrixWorldInverse.copy(B.matrixWorld).invert();var $=T+re,de=I+re,Ce=j-ie,ge=Y+(u-ie),we=F*I/de*$,Le=U*I/de*$;B.projectionMatrix.makePerspective(Ce,ge,we,Le,$,de)}function mb(B){var n,s,u=this,f=null,w=null,T=null,I=[],F=new Jn,U=new Jn,G=1,V="local-floor";typeof window<"u"&&"VRFrameData"in window&&(w=new window.VRFrameData,window.addEventListener("vrdisplaypresentchange",we,!1));var j=new Jn,Y=new zs,re=new Qe,ie=new Ts;ie.viewport=new hr,ie.layers.enable(1);var $=new Ts;$.viewport=new hr,$.layers.enable(2);var de=new hE([ie,$]);de.layers.enable(1),de.layers.enable(2);var Ce=new jt,ge;function we(){var mt=u.isPresenting=f!==null&&f.isPresenting===!0;if(mt){var Pt=f.getEyeParameters("left");n=2*Pt.renderWidth*G,s=Pt.renderHeight*G,ge=B.getPixelRatio(),B.getSize(Ce),B.setDrawingBufferSize(n,s,1),ie.viewport.set(0,0,n/2,s),$.viewport.set(n/2,0,n/2,s),tt.start(),u.dispatchEvent({type:"sessionstart"})}else u.enabled&&B.setDrawingBufferSize(Ce.width,Ce.height,ge),tt.stop(),u.dispatchEvent({type:"sessionend"})}var Le=[],Ye=[];function it(mt){for(var Pt=navigator.getGamepads&&navigator.getGamepads(),yt=0,dt=Pt.length;yt<dt;yt++){var St=Pt[yt];if(St&&(St.id==="Daydream Controller"||St.id==="Gear VR Controller"||St.id==="Oculus Go Controller"||St.id==="OpenVR Gamepad"||St.id.startsWith("Oculus Touch")||St.id.startsWith("HTC Vive Focus")||St.id.startsWith("Spatial Controller"))){var rn=St.hand;if(mt===0&&(rn===""||rn==="right")||mt===1&&rn==="left")return St}}}function Me(){for(var mt=0;mt<I.length;mt++){var Pt=I[mt],yt=it(mt);if(yt!==void 0&&yt.pose!==void 0){if(yt.pose===null)return;var dt=yt.pose;dt.hasPosition===!1&&Pt.position.set(.2,-.6,-.05),dt.position!==null&&Pt.position.fromArray(dt.position),dt.orientation!==null&&Pt.quaternion.fromArray(dt.orientation),Pt.matrix.compose(Pt.position,Pt.quaternion,Pt.scale),Pt.matrix.premultiply(F),Pt.matrix.decompose(Pt.position,Pt.quaternion,Pt.scale),Pt.matrixWorldNeedsUpdate=!0,Pt.visible=!0;var St=yt.id==="Daydream Controller"?0:1;Le[mt]===void 0&&(Le[mt]=!1),Le[mt]!==yt.buttons[St].pressed&&(Le[mt]=yt.buttons[St].pressed,Le[mt]===!0?Pt.dispatchEvent({type:"selectstart"}):(Pt.dispatchEvent({type:"selectend"}),Pt.dispatchEvent({type:"select"}))),St=2,Ye[mt]===void 0&&(Ye[mt]=!1),yt.buttons[St]!==void 0&&Ye[mt]!==yt.buttons[St].pressed&&(Ye[mt]=yt.buttons[St].pressed,Ye[mt]===!0?Pt.dispatchEvent({type:"squeezestart"}):(Pt.dispatchEvent({type:"squeezeend"}),Pt.dispatchEvent({type:"squeeze"})))}else Pt.visible=!1}}function Je(mt,Pt){Pt!==null&&Pt.length===4&&mt.set(Pt[0]*n,Pt[1]*s,Pt[2]*n,Pt[3]*s)}this.enabled=!1,this.getController=function(mt){var Pt=I[mt];return Pt===void 0&&(Pt=new Gd,Pt.matrixAutoUpdate=!1,Pt.visible=!1,I[mt]=Pt),Pt},this.getDevice=function(){return f},this.setDevice=function(mt){mt!==void 0&&(f=mt),tt.setContext(mt)},this.setFramebufferScaleFactor=function(mt){G=mt},this.setReferenceSpaceType=function(mt){V=mt},this.setPoseTarget=function(mt){mt!==void 0&&(T=mt)},this.cameraAutoUpdate=!0,this.updateCamera=function(mt){var Pt=V==="local-floor"?1.6:0;if(f.depthNear=mt.near,f.depthFar=mt.far,f.getFrameData(w),V==="local-floor"){var yt=f.stageParameters;yt?F.fromArray(yt.sittingToStandingTransform):F.makeTranslation(0,Pt,0)}var dt=w.pose,St=T!==null?T:mt;St.matrix.copy(F),St.matrix.decompose(St.position,St.quaternion,St.scale),dt.orientation!==null&&(Y.fromArray(dt.orientation),St.quaternion.multiply(Y)),dt.position!==null&&(Y.setFromRotationMatrix(F),re.fromArray(dt.position),re.applyQuaternion(Y),St.position.add(re)),St.updateMatrixWorld();for(var rn=St.children,hn=0,tn=rn.length;hn<tn;hn++)rn[hn].updateMatrixWorld(!0);ie.near=mt.near,$.near=mt.near,ie.far=mt.far,$.far=mt.far,ie.matrixWorldInverse.fromArray(w.leftViewMatrix),$.matrixWorldInverse.fromArray(w.rightViewMatrix),U.copy(F).invert(),V==="local-floor"&&(ie.matrixWorldInverse.multiply(U),$.matrixWorldInverse.multiply(U));var wn=St.parent;wn!==null&&(j.copy(wn.matrixWorld).invert(),ie.matrixWorldInverse.multiply(j),$.matrixWorldInverse.multiply(j)),ie.matrixWorld.copy(ie.matrixWorldInverse).invert(),$.matrixWorld.copy($.matrixWorldInverse).invert(),ie.projectionMatrix.fromArray(w.leftProjectionMatrix),$.projectionMatrix.fromArray(w.rightProjectionMatrix),O5(de,ie,$);var gn=f.getLayers();if(gn.length){var ni=gn[0];Je(ie.viewport,ni.leftBounds),Je($.viewport,ni.rightBounds)}return Me(),de},this.getCamera=function(){return de},this.getFoveation=function(){return 1},this.setFoveation=function(mt){mt!==1&&console.warn("THREE.WebVRManager: setFoveation() not used in WebVR.")},this.getStandingMatrix=function(){return F},this.isPresenting=!1;var tt=new vg;this.setAnimationLoop=function(mt){tt.setAnimationLoop(mt),this.isPresenting&&tt.start()},this.submitFrame=function(){this.isPresenting&&f.submitFrame()},this.dispose=function(){typeof window<"u"&&window.removeEventListener("vrdisplaypresentchange",we)},this.setFrameOfReferenceType=function(){console.warn("THREE.WebVRManager: setFrameOfReferenceType() has been deprecated.")}}Object.assign(mb.prototype,{addEventListener:lo.prototype.addEventListener,hasEventListener:lo.prototype.hasEventListener,removeEventListener:lo.prototype.removeEventListener,dispatchEvent:lo.prototype.dispatchEvent});const F5={type:"move"};class dE{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Gd,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Gd,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Qe,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Qe),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Gd,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Qe,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Qe),this._grip}dispatchEvent(n){return this._targetRay!==null&&this._targetRay.dispatchEvent(n),this._grip!==null&&this._grip.dispatchEvent(n),this._hand!==null&&this._hand.dispatchEvent(n),this}connect(n){if(n&&n.hand){const s=this._hand;if(s)for(const u of n.hand.values())this._getHandJoint(s,u)}return this.dispatchEvent({type:"connected",data:n}),this}disconnect(n){return this.dispatchEvent({type:"disconnected",data:n}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(n,s,u){let f=null,w=null,T=null;const I=this._targetRay,F=this._grip,U=this._hand;if(n&&s.session.visibilityState!=="visible-blurred"){if(U&&n.hand){T=!0;for(const ie of n.hand.values()){const $=s.getJointPose(ie,u),de=this._getHandJoint(U,ie);$!==null&&(de.matrix.fromArray($.transform.matrix),de.matrix.decompose(de.position,de.rotation,de.scale),de.jointRadius=$.radius),de.visible=$!==null}const G=U.joints["index-finger-tip"],V=U.joints["thumb-tip"],j=G.position.distanceTo(V.position),Y=.02,re=.005;U.inputState.pinching&&j>Y+re?(U.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:n.handedness,target:this})):!U.inputState.pinching&&j<=Y-re&&(U.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:n.handedness,target:this}))}else F!==null&&n.gripSpace&&(w=s.getPose(n.gripSpace,u),w!==null&&(F.matrix.fromArray(w.transform.matrix),F.matrix.decompose(F.position,F.rotation,F.scale),w.linearVelocity?(F.hasLinearVelocity=!0,F.linearVelocity.copy(w.linearVelocity)):F.hasLinearVelocity=!1,w.angularVelocity?(F.hasAngularVelocity=!0,F.angularVelocity.copy(w.angularVelocity)):F.hasAngularVelocity=!1));I!==null&&(f=s.getPose(n.targetRaySpace,u),f===null&&w!==null&&(f=w),f!==null&&(I.matrix.fromArray(f.transform.matrix),I.matrix.decompose(I.position,I.rotation,I.scale),f.linearVelocity?(I.hasLinearVelocity=!0,I.linearVelocity.copy(f.linearVelocity)):I.hasLinearVelocity=!1,f.angularVelocity?(I.hasAngularVelocity=!0,I.angularVelocity.copy(f.angularVelocity)):I.hasAngularVelocity=!1,this.dispatchEvent(F5)))}return I!==null&&(I.visible=f!==null),F!==null&&(F.visible=w!==null),U!==null&&(U.visible=T!==null),this}_getHandJoint(n,s){if(n.joints[s.jointName]===void 0){const u=new Gd;u.matrixAutoUpdate=!1,u.visible=!1,n.joints[s.jointName]=u,n.add(u)}return n.joints[s.jointName]}}class gb extends yr{constructor(n,s,u,f,w,T,I,F,U,G){if(G=G!==void 0?G:xn,G!==xn&&G!==Nn)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");u===void 0&&G===xn&&(u=bi),u===void 0&&G===Nn&&(u=yn),super(null,f,w,T,I,F,G,u,U),this.isDepthTexture=!0,this.image={width:n,height:s},this.magFilter=I!==void 0?I:le,this.minFilter=F!==void 0?F:le,this.flipY=!1,this.generateMipmaps=!1}}class N5 extends lo{constructor(n,s){super();const u=this;let f=null,w=1;var T=null;let I=null,F="local-floor",U=null,G=null;var V=[];let j=null,Y=null,re=null,ie=null;const $=s.getContextAttributes();let de=null,Ce=null;const ge=[],we=[],Le=new Set,Ye=new Map,it=new Ts;it.layers.enable(1),it.viewport=new hr;const Me=new Ts;Me.layers.enable(2),Me.viewport=new hr;const Je=[it,Me],tt=new hE;tt.layers.enable(1),tt.layers.enable(2);let mt=null,Pt=null;this.cameraAutoUpdate=!0,this.layersEnabled=!1,this.enabled=!1,this.isPresenting=!1,this.getCameraPose=function(){return G},this.getController=function(Vt){let dn=ge[Vt];return dn===void 0&&(dn=new dE,ge[Vt]=dn),dn.getTargetRaySpace()},this.getControllerGrip=function(Vt){let dn=ge[Vt];return dn===void 0&&(dn=new dE,ge[Vt]=dn),dn.getGripSpace()},this.getHand=function(Vt){let dn=ge[Vt];return dn===void 0&&(dn=new dE,ge[Vt]=dn),dn.getHandSpace()};function yt(Vt){const dn=we.indexOf(Vt.inputSource);if(dn===-1)return;const Gn=ge[dn];Gn!==void 0&&Gn.dispatchEvent({type:Vt.type,data:Vt.inputSource})}function dt(){f.removeEventListener("select",yt),f.removeEventListener("selectstart",yt),f.removeEventListener("selectend",yt),f.removeEventListener("squeeze",yt),f.removeEventListener("squeezestart",yt),f.removeEventListener("squeezeend",yt),f.removeEventListener("end",dt),f.removeEventListener("inputsourceschange",St);for(let Vt=0;Vt<ge.length;Vt++){const dn=we[Vt];dn!==null&&(we[Vt]=null,ge[Vt].disconnect(dn))}mt=null,Pt=null,n.setRenderTarget(de),re=null,Y=null,j=null,f=null,Ce=null,Wn.stop(),u.isPresenting=!1,u.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Vt){w=Vt,u.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Vt){F=Vt,u.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return U||I},this.setReferenceSpace=function(Vt){U=Vt},this.getBaseLayer=function(){return Y!==null?Y:re},this.getBinding=function(){return j},this.getFrame=function(){return ie},this.getSession=function(){return f},this.setSession=async function(Vt){if(f=Vt,f!==null){if(de=n.getRenderTarget(),f.addEventListener("select",yt),f.addEventListener("selectstart",yt),f.addEventListener("selectend",yt),f.addEventListener("squeeze",yt),f.addEventListener("squeezestart",yt),f.addEventListener("squeezeend",yt),f.addEventListener("end",dt),f.addEventListener("inputsourceschange",St),$.xrCompatible!==!0&&await s.makeXRCompatible(),f.renderState.layers===void 0||n.capabilities.isWebGL2===!1){const dn={antialias:f.renderState.layers===void 0?$.antialias:!0,alpha:$.alpha,depth:$.depth,stencil:$.stencil,framebufferScaleFactor:w};re=new XRWebGLLayer(f,s,dn),f.updateRenderState({baseLayer:re}),Ce=new Us(re.framebufferWidth,re.framebufferHeight,{format:At,type:cn,encoding:n.outputEncoding,stencilBuffer:$.stencil})}else{let dn=null,Gn=null,Dt=null;$.depth&&(Dt=$.stencil?35056:33190,dn=$.stencil?Nn:xn,Gn=$.stencil?yn:bi);const ai={colorFormat:32856,depthFormat:Dt,scaleFactor:w};j=new XRWebGLBinding(f,s),Y=j.createProjectionLayer(ai),f.updateRenderState({layers:[Y]}),Ce=new Us(Y.textureWidth,Y.textureHeight,{format:At,type:cn,depthTexture:new gb(Y.textureWidth,Y.textureHeight,Gn,void 0,void 0,void 0,void 0,void 0,void 0,dn),stencilBuffer:$.stencil,encoding:n.outputEncoding,samples:$.antialias?4:0});const Hn=n.properties.get(Ce);Hn.__ignoreDepthValues=Y.ignoreDepthValues}Ce.isXRRenderTarget=!0,this.setFoveation(1),U=null,I=await f.requestReferenceSpace(F),Wn.setContext(f),Wn.start(),u.isPresenting=!0,u.dispatchEvent({type:"sessionstart"})}},this.addLayer=function(Vt){!window.XRWebGLBinding||!this.layersEnabled||!f||(V.push(Vt),this.updateLayers())},this.removeLayer=function(Vt){V.splice(V.indexOf(Vt),1),!(!window.XRWebGLBinding||!this.layersEnabled||!f)&&this.updateLayers()},this.updateLayers=function(){var Vt=V.map(function(dn){return dn});Vt.unshift(f.renderState.layers[0]),f.updateRenderState({layers:Vt})};function St(Vt){for(let dn=0;dn<Vt.removed.length;dn++){const Gn=Vt.removed[dn],Dt=we.indexOf(Gn);Dt>=0&&(we[Dt]=null,ge[Dt].disconnect(Gn))}for(let dn=0;dn<Vt.added.length;dn++){const Gn=Vt.added[dn];let Dt=we.indexOf(Gn);if(Dt===-1){for(let Hn=0;Hn<ge.length;Hn++)if(Hn>=we.length){we.push(Gn),Dt=Hn;break}else if(we[Hn]===null){we[Hn]=Gn,Dt=Hn;break}if(Dt===-1)break}const ai=ge[Dt];ai&&ai.connect(Gn)}}const rn=new Qe,hn=new Qe;function tn(Vt,dn,Gn){rn.setFromMatrixPosition(dn.matrixWorld),hn.setFromMatrixPosition(Gn.matrixWorld);const Dt=rn.distanceTo(hn),ai=dn.projectionMatrix.elements,Hn=Gn.projectionMatrix.elements,Mi=ai[14]/(ai[10]-1),Tn=ai[14]/(ai[10]+1),tr=(ai[9]+1)/ai[5],on=(ai[9]-1)/ai[5],$t=(ai[8]-1)/ai[0],Ln=(Hn[8]+1)/Hn[0],yi=Mi*$t,jn=Mi*Ln,Vi=Dt/(-$t+Ln),Oi=Vi*-$t;dn.matrixWorld.decompose(Vt.position,Vt.quaternion,Vt.scale),Vt.translateX(Oi),Vt.translateZ(Vi),Vt.matrixWorld.compose(Vt.position,Vt.quaternion,Vt.scale),Vt.matrixWorldInverse.copy(Vt.matrixWorld).invert();const Si=Mi+Vi,ns=Tn+Vi,Xr=yi-Oi,Ze=jn+(Dt-Oi),ke=tr*Tn/ns*Si,Ut=on*Tn/ns*Si;Vt.projectionMatrix.makePerspective(Xr,Ze,ke,Ut,Si,ns)}function wn(Vt,dn){dn===null?Vt.matrixWorld.copy(Vt.matrix):Vt.matrixWorld.multiplyMatrices(dn.matrixWorld,Vt.matrix),Vt.matrixWorldInverse.copy(Vt.matrixWorld).invert()}this.setPoseTarget=function(Vt){Vt!==void 0&&(T=Vt)},this.updateCamera=function(Vt){if(f===null)return;tt.near=Me.near=it.near=Vt.near,tt.far=Me.far=it.far=Vt.far,(mt!==tt.near||Pt!==tt.far)&&(f.updateRenderState({depthNear:tt.near,depthFar:tt.far}),mt=tt.near,Pt=tt.far);const dn=tt.cameras;var Gn=T||Vt;const Dt=Gn.parent;wn(tt,Dt);for(let Hn=0;Hn<dn.length;Hn++)wn(dn[Hn],Dt);tt.matrixWorld.decompose(tt.position,tt.quaternion,tt.scale),Gn.matrixWorld.copy(tt.matrixWorld),Gn.matrix.copy(tt.matrix),Gn.matrix.decompose(Gn.position,Gn.quaternion,Gn.scale);const ai=Gn.children;for(let Hn=0,Mi=ai.length;Hn<Mi;Hn++)ai[Hn].updateMatrixWorld(!0);dn.length===2?tn(tt,it,Me):tt.projectionMatrix.copy(it.projectionMatrix)},this.getCamera=function(){return tt},this.getFoveation=function(){if(Y!==null)return Y.fixedFoveation;if(re!==null)return re.fixedFoveation},this.setFoveation=function(Vt){Y!==null&&(Y.fixedFoveation=Vt),re!==null&&re.fixedFoveation!==void 0&&(re.fixedFoveation=Vt)},this.getPlanes=function(){return Le};let gn=null;function ni(Vt,dn){if(G=dn.getViewerPose(U||I),ie=dn,G!==null){const Gn=G.views;re!==null&&(n.setRenderTargetFramebuffer(Ce,re.framebuffer),n.setRenderTarget(Ce));let Dt=!1;Gn.length!==tt.cameras.length&&(tt.cameras.length=0,Dt=!0);for(let ai=0;ai<Gn.length;ai++){const Hn=Gn[ai];let Mi=null;if(re!==null)Mi=re.getViewport(Hn);else{const tr=j.getViewSubImage(Y,Hn);Mi=tr.viewport,ai===0&&(n.setRenderTargetTextures(Ce,tr.colorTexture,Y.ignoreDepthValues?void 0:tr.depthStencilTexture),n.setRenderTarget(Ce))}let Tn=Je[ai];Tn===void 0&&(Tn=new Ts,Tn.layers.enable(ai),Tn.viewport=new hr,Je[ai]=Tn),Tn.matrix.fromArray(Hn.transform.matrix),Tn.projectionMatrix.fromArray(Hn.projectionMatrix),Tn.viewport.set(Mi.x,Mi.y,Mi.width,Mi.height),ai===0&&tt.matrix.copy(Tn.matrix),Dt===!0&&tt.cameras.push(Tn)}}for(let Gn=0;Gn<ge.length;Gn++){const Dt=we[Gn],ai=ge[Gn];Dt!==null&&ai!==void 0&&ai.update(Dt,dn,U||I)}if(gn&&gn(Vt,dn),dn.detectedPlanes){u.dispatchEvent({type:"planesdetected",data:dn.detectedPlanes});let Gn=null;for(const Dt of Le)dn.detectedPlanes.has(Dt)||(Gn===null&&(Gn=[]),Gn.push(Dt));if(Gn!==null)for(const Dt of Gn)Le.delete(Dt),Ye.delete(Dt),u.dispatchEvent({type:"planeremoved",data:Dt});for(const Dt of dn.detectedPlanes)if(!Le.has(Dt))Le.add(Dt),Ye.set(Dt,dn.lastChangedTime),u.dispatchEvent({type:"planeadded",data:Dt});else{const ai=Ye.get(Dt);Dt.lastChangedTime>ai&&(Ye.set(Dt,Dt.lastChangedTime),u.dispatchEvent({type:"planechanged",data:Dt}))}}ie=null}const Wn=new vg;Wn.setAnimationLoop(ni),this.setAnimationLoop=function(Vt){gn=Vt},this.dispose=function(){}}}function k5(B,n){function s(ie,$){$.color.getRGB(ie.fogColor.value,dp(B)),$.isFog?(ie.fogNear.value=$.near,ie.fogFar.value=$.far):$.isFogExp2&&(ie.fogDensity.value=$.density)}function u(ie,$,de,Ce,ge){$.isMeshBasicMaterial||$.isMeshLambertMaterial?f(ie,$):$.isMeshToonMaterial?(f(ie,$),G(ie,$)):$.isMeshPhongMaterial?(f(ie,$),U(ie,$)):$.isMeshStandardMaterial?(f(ie,$),V(ie,$),$.isMeshPhysicalMaterial&&j(ie,$,ge)):$.isMeshMatcapMaterial?(f(ie,$),Y(ie,$)):$.isMeshDepthMaterial?f(ie,$):$.isMeshDistanceMaterial?(f(ie,$),re(ie,$)):$.isMeshNormalMaterial?f(ie,$):$.isLineBasicMaterial?(w(ie,$),$.isLineDashedMaterial&&T(ie,$)):$.isPointsMaterial?I(ie,$,de,Ce):$.isSpriteMaterial?F(ie,$):$.isShadowMaterial?(ie.color.value.copy($.color),ie.opacity.value=$.opacity):$.isShaderMaterial&&($.uniformsNeedUpdate=!1)}function f(ie,$){ie.opacity.value=$.opacity,$.color&&ie.diffuse.value.copy($.color),$.emissive&&ie.emissive.value.copy($.emissive).multiplyScalar($.emissiveIntensity),$.map&&(ie.map.value=$.map),$.alphaMap&&(ie.alphaMap.value=$.alphaMap),$.bumpMap&&(ie.bumpMap.value=$.bumpMap,ie.bumpScale.value=$.bumpScale,$.side===R&&(ie.bumpScale.value*=-1)),$.displacementMap&&(ie.displacementMap.value=$.displacementMap,ie.displacementScale.value=$.displacementScale,ie.displacementBias.value=$.displacementBias),$.emissiveMap&&(ie.emissiveMap.value=$.emissiveMap),$.normalMap&&(ie.normalMap.value=$.normalMap,ie.normalScale.value.copy($.normalScale),$.side===R&&ie.normalScale.value.negate()),$.specularMap&&(ie.specularMap.value=$.specularMap),$.alphaTest>0&&(ie.alphaTest.value=$.alphaTest);const de=n.get($).envMap;if(de&&(ie.envMap.value=de,ie.flipEnvMap.value=de.isCubeTexture&&de.isRenderTargetTexture===!1?-1:1,ie.reflectivity.value=$.reflectivity,ie.ior.value=$.ior,ie.refractionRatio.value=$.refractionRatio),$.lightMap){ie.lightMap.value=$.lightMap;const we=B.physicallyCorrectLights!==!0?Math.PI:1;ie.lightMapIntensity.value=$.lightMapIntensity*we}$.aoMap&&(ie.aoMap.value=$.aoMap,ie.aoMapIntensity.value=$.aoMapIntensity);let Ce;$.map?Ce=$.map:$.specularMap?Ce=$.specularMap:$.displacementMap?Ce=$.displacementMap:$.normalMap?Ce=$.normalMap:$.bumpMap?Ce=$.bumpMap:$.roughnessMap?Ce=$.roughnessMap:$.metalnessMap?Ce=$.metalnessMap:$.alphaMap?Ce=$.alphaMap:$.emissiveMap?Ce=$.emissiveMap:$.clearcoatMap?Ce=$.clearcoatMap:$.clearcoatNormalMap?Ce=$.clearcoatNormalMap:$.clearcoatRoughnessMap?Ce=$.clearcoatRoughnessMap:$.iridescenceMap?Ce=$.iridescenceMap:$.iridescenceThicknessMap?Ce=$.iridescenceThicknessMap:$.specularIntensityMap?Ce=$.specularIntensityMap:$.specularColorMap?Ce=$.specularColorMap:$.transmissionMap?Ce=$.transmissionMap:$.thicknessMap?Ce=$.thicknessMap:$.sheenColorMap?Ce=$.sheenColorMap:$.sheenRoughnessMap&&(Ce=$.sheenRoughnessMap),Ce!==void 0&&(Ce.isWebGLRenderTarget&&(Ce=Ce.texture),Ce.matrixAutoUpdate===!0&&Ce.updateMatrix(),ie.uvTransform.value.copy(Ce.matrix));let ge;$.aoMap?ge=$.aoMap:$.lightMap&&(ge=$.lightMap),ge!==void 0&&(ge.isWebGLRenderTarget&&(ge=ge.texture),ge.matrixAutoUpdate===!0&&ge.updateMatrix(),ie.uv2Transform.value.copy(ge.matrix))}function w(ie,$){ie.diffuse.value.copy($.color),ie.opacity.value=$.opacity}function T(ie,$){ie.dashSize.value=$.dashSize,ie.totalSize.value=$.dashSize+$.gapSize,ie.scale.value=$.scale}function I(ie,$,de,Ce){ie.diffuse.value.copy($.color),ie.opacity.value=$.opacity,ie.size.value=$.size*de,ie.scale.value=Ce*.5,$.map&&(ie.map.value=$.map),$.alphaMap&&(ie.alphaMap.value=$.alphaMap),$.alphaTest>0&&(ie.alphaTest.value=$.alphaTest);let ge;$.map?ge=$.map:$.alphaMap&&(ge=$.alphaMap),ge!==void 0&&(ge.matrixAutoUpdate===!0&&ge.updateMatrix(),ie.uvTransform.value.copy(ge.matrix))}function F(ie,$){ie.diffuse.value.copy($.color),ie.opacity.value=$.opacity,ie.rotation.value=$.rotation,$.map&&(ie.map.value=$.map),$.alphaMap&&(ie.alphaMap.value=$.alphaMap),$.alphaTest>0&&(ie.alphaTest.value=$.alphaTest);let de;$.map?de=$.map:$.alphaMap&&(de=$.alphaMap),de!==void 0&&(de.matrixAutoUpdate===!0&&de.updateMatrix(),ie.uvTransform.value.copy(de.matrix))}function U(ie,$){ie.specular.value.copy($.specular),ie.shininess.value=Math.max($.shininess,1e-4)}function G(ie,$){$.gradientMap&&(ie.gradientMap.value=$.gradientMap)}function V(ie,$){ie.roughness.value=$.roughness,ie.metalness.value=$.metalness,$.roughnessMap&&(ie.roughnessMap.value=$.roughnessMap),$.metalnessMap&&(ie.metalnessMap.value=$.metalnessMap),n.get($).envMap&&(ie.envMapIntensity.value=$.envMapIntensity)}function j(ie,$,de){ie.ior.value=$.ior,$.sheen>0&&(ie.sheenColor.value.copy($.sheenColor).multiplyScalar($.sheen),ie.sheenRoughness.value=$.sheenRoughness,$.sheenColorMap&&(ie.sheenColorMap.value=$.sheenColorMap),$.sheenRoughnessMap&&(ie.sheenRoughnessMap.value=$.sheenRoughnessMap)),$.clearcoat>0&&(ie.clearcoat.value=$.clearcoat,ie.clearcoatRoughness.value=$.clearcoatRoughness,$.clearcoatMap&&(ie.clearcoatMap.value=$.clearcoatMap),$.clearcoatRoughnessMap&&(ie.clearcoatRoughnessMap.value=$.clearcoatRoughnessMap),$.clearcoatNormalMap&&(ie.clearcoatNormalScale.value.copy($.clearcoatNormalScale),ie.clearcoatNormalMap.value=$.clearcoatNormalMap,$.side===R&&ie.clearcoatNormalScale.value.negate())),$.iridescence>0&&(ie.iridescence.value=$.iridescence,ie.iridescenceIOR.value=$.iridescenceIOR,ie.iridescenceThicknessMinimum.value=$.iridescenceThicknessRange[0],ie.iridescenceThicknessMaximum.value=$.iridescenceThicknessRange[1],$.iridescenceMap&&(ie.iridescenceMap.value=$.iridescenceMap),$.iridescenceThicknessMap&&(ie.iridescenceThicknessMap.value=$.iridescenceThicknessMap)),$.transmission>0&&(ie.transmission.value=$.transmission,ie.transmissionSamplerMap.value=de.texture,ie.transmissionSamplerSize.value.set(de.width,de.height),$.transmissionMap&&(ie.transmissionMap.value=$.transmissionMap),ie.thickness.value=$.thickness,$.thicknessMap&&(ie.thicknessMap.value=$.thicknessMap),ie.attenuationDistance.value=$.attenuationDistance,ie.attenuationColor.value.copy($.attenuationColor)),ie.specularIntensity.value=$.specularIntensity,ie.specularColor.value.copy($.specularColor),$.specularIntensityMap&&(ie.specularIntensityMap.value=$.specularIntensityMap),$.specularColorMap&&(ie.specularColorMap.value=$.specularColorMap)}function Y(ie,$){$.matcap&&(ie.matcap.value=$.matcap)}function re(ie,$){ie.referencePosition.value.copy($.referencePosition),ie.nearDistance.value=$.nearDistance,ie.farDistance.value=$.farDistance}return{refreshFogUniforms:s,refreshMaterialUniforms:u}}function U5(B,n,s,u){let f={},w={},T=[];const I=s.isWebGL2?B.getParameter(35375):0;function F(Ce,ge){const we=ge.program;u.uniformBlockBinding(Ce,we)}function U(Ce,ge){let we=f[Ce.id];we===void 0&&(re(Ce),we=G(Ce),f[Ce.id]=we,Ce.addEventListener("dispose",$));const Le=ge.program;u.updateUBOMapping(Ce,Le);const Ye=n.render.frame;w[Ce.id]!==Ye&&(j(Ce),w[Ce.id]=Ye)}function G(Ce){const ge=V();Ce.__bindingPointIndex=ge;const we=B.createBuffer(),Le=Ce.__size,Ye=Ce.usage;return B.bindBuffer(35345,we),B.bufferData(35345,Le,Ye),B.bindBuffer(35345,null),B.bindBufferBase(35345,ge,we),we}function V(){for(let Ce=0;Ce<I;Ce++)if(T.indexOf(Ce)===-1)return T.push(Ce),Ce;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function j(Ce){const ge=f[Ce.id],we=Ce.uniforms,Le=Ce.__cache;B.bindBuffer(35345,ge);for(let Ye=0,it=we.length;Ye<it;Ye++){const Me=we[Ye];if(Y(Me,Ye,Le)===!0){const Je=Me.value,tt=Me.__offset;typeof Je=="number"?(Me.__data[0]=Je,B.bufferSubData(35345,tt,Me.__data)):(Me.value.isMatrix3?(Me.__data[0]=Me.value.elements[0],Me.__data[1]=Me.value.elements[1],Me.__data[2]=Me.value.elements[2],Me.__data[3]=Me.value.elements[0],Me.__data[4]=Me.value.elements[3],Me.__data[5]=Me.value.elements[4],Me.__data[6]=Me.value.elements[5],Me.__data[7]=Me.value.elements[0],Me.__data[8]=Me.value.elements[6],Me.__data[9]=Me.value.elements[7],Me.__data[10]=Me.value.elements[8],Me.__data[11]=Me.value.elements[0]):Je.toArray(Me.__data),B.bufferSubData(35345,tt,Me.__data))}}B.bindBuffer(35345,null)}function Y(Ce,ge,we){const Le=Ce.value;if(we[ge]===void 0)return typeof Le=="number"?we[ge]=Le:we[ge]=Le.clone(),!0;if(typeof Le=="number"){if(we[ge]!==Le)return we[ge]=Le,!0}else{const Ye=we[ge];if(Ye.equals(Le)===!1)return Ye.copy(Le),!0}return!1}function re(Ce){const ge=Ce.uniforms;let we=0;const Le=16;let Ye=0;for(let it=0,Me=ge.length;it<Me;it++){const Je=ge[it],tt=ie(Je);if(Je.__data=new Float32Array(tt.storage/Float32Array.BYTES_PER_ELEMENT),Je.__offset=we,it>0){Ye=we%Le;const mt=Le-Ye;Ye!==0&&mt-tt.boundary<0&&(we+=Le-Ye,Je.__offset=we)}we+=tt.storage}return Ye=we%Le,Ye>0&&(we+=Le-Ye),Ce.__size=we,Ce.__cache={},this}function ie(Ce){const ge=Ce.value,we={boundary:0,storage:0};return typeof ge=="number"?(we.boundary=4,we.storage=4):ge.isVector2?(we.boundary=8,we.storage=8):ge.isVector3||ge.isColor?(we.boundary=16,we.storage=12):ge.isVector4?(we.boundary=16,we.storage=16):ge.isMatrix3?(we.boundary=48,we.storage=48):ge.isMatrix4?(we.boundary=64,we.storage=64):ge.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",ge),we}function $(Ce){const ge=Ce.target;ge.removeEventListener("dispose",$);const we=T.indexOf(ge.__bindingPointIndex);T.splice(we,1),B.deleteBuffer(f[ge.id]),delete f[ge.id],delete w[ge.id]}function de(){for(const Ce in f)B.deleteBuffer(f[Ce]);T=[],f={},w={}}return{bind:F,update:U,dispose:de}}function z5(){const B=Lc("canvas");return B.style.display="block",B}function Ab(B={}){this.isWebGLRenderer=!0;const n=B.canvas!==void 0?B.canvas:z5(),s=B.context!==void 0?B.context:null,u=B.depth!==void 0?B.depth:!0,f=B.stencil!==void 0?B.stencil:!0,w=B.antialias!==void 0?B.antialias:!1,T=B.premultipliedAlpha!==void 0?B.premultipliedAlpha:!0,I=B.preserveDrawingBuffer!==void 0?B.preserveDrawingBuffer:!1,F=B.powerPreference!==void 0?B.powerPreference:"default",U=B.failIfMajorPerformanceCaveat!==void 0?B.failIfMajorPerformanceCaveat:!1;let G;s!==null?G=s.getContextAttributes().alpha:G=B.alpha!==void 0?B.alpha:!1;let V=null,j=null;const Y=[],re=[];this.domElement=n,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=ar,this.physicallyCorrectLights=!1,this.toneMapping=Bn,this.toneMappingExposure=1;const ie=this;let $=!1,de=0,Ce=0,ge=null,we=-1,Le=null;const Ye=new hr,it=new hr;let Me=null,Je=n.width,tt=n.height,mt=1,Pt=null,yt=null;const dt=new hr(0,0,Je,tt),St=new hr(0,0,Je,tt);let rn=!1;const hn=new Eh;let tn=!1,wn=!1,gn=null;const ni=new Jn,Wn=new jt,Vt=new Qe,dn={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Gn(){return ge===null?mt:1}let Dt=s;function ai(We,bt){for(let Qt=0;Qt<We.length;Qt++){const _t=We[Qt],Jt=n.getContext(_t,bt);if(Jt!==null)return Jt}return null}try{const We={alpha:!0,depth:u,stencil:f,antialias:w,premultipliedAlpha:T,preserveDrawingBuffer:I,powerPreference:F,failIfMajorPerformanceCaveat:U};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${h}`),n.addEventListener("webglcontextlost",Fi,!1),n.addEventListener("webglcontextrestored",Ii,!1),n.addEventListener("webglcontextcreationerror",Fr,!1),Dt===null){const bt=["webgl2","webgl","experimental-webgl"];if(ie.isWebGL1Renderer===!0&&bt.shift(),Dt=ai(bt,We),Dt===null)throw ai(bt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}Dt.getShaderPrecisionFormat===void 0&&(Dt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(We){throw console.error("THREE.WebGLRenderer: "+We.message),We}let Hn,Mi,Tn,tr,on,$t,Ln,yi,jn,Vi,Oi,Si,ns,Xr,Ze,ke,Ut,Cn,In,qn,Hi,Zn,en,Ti;function Ui(){Hn=new t4(Dt),Mi=new YP(Dt,Hn,B),Hn.init(Mi),Zn=new db(Dt,Hn,Mi),Tn=new D5(Dt,Hn,Mi),tr=new r4,on=new E5,$t=new P5(Dt,Hn,Tn,on,Mi,Zn,tr),Ln=new JP(ie),yi=new e4(ie),jn=new fp(Dt,Mi),en=new XP(Dt,Hn,jn,Mi),Vi=new n4(Dt,jn,tr,en),Oi=new l4(Dt,Vi,jn,tr),In=new a4(Dt,Mi,$t),ke=new qP(on),Si=new x5(ie,Ln,yi,Hn,Mi,en,ke),ns=new k5(ie,on),Xr=new w5,Ze=new I5(Hn,Mi),Cn=new jP(ie,Ln,yi,Tn,Oi,G,T),Ut=new L5(ie,Oi,Mi),Ti=new U5(Dt,tr,Mi,Tn),qn=new KP(Dt,Hn,tr,Mi),Hi=new i4(Dt,Hn,tr,Mi),tr.programs=Si.programs,ie.capabilities=Mi,ie.extensions=Hn,ie.properties=on,ie.renderLists=Xr,ie.shadowMap=Ut,ie.state=Tn,ie.info=tr}Ui();const mi=typeof navigator<"u"&&"xr"in navigator?new N5(ie,Dt):new mb(ie);this.xr=mi,this.getContext=function(){return Dt},this.getContextAttributes=function(){return Dt.getContextAttributes()},this.forceContextLoss=function(){const We=Hn.get("WEBGL_lose_context");We&&We.loseContext()},this.forceContextRestore=function(){const We=Hn.get("WEBGL_lose_context");We&&We.restoreContext()},this.getPixelRatio=function(){return mt},this.setPixelRatio=function(We){We!==void 0&&(mt=We,this.setSize(Je,tt,!1))},this.getSize=function(We){return We.set(Je,tt)},this.setSize=function(We,bt,Qt){if(mi.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}Je=We,tt=bt,n.width=Math.floor(We*mt),n.height=Math.floor(bt*mt),Qt!==!1&&(n.style.width=We+"px",n.style.height=bt+"px"),this.setViewport(0,0,We,bt)},this.getDrawingBufferSize=function(We){return We.set(Je*mt,tt*mt).floor()},this.setDrawingBufferSize=function(We,bt,Qt){Je=We,tt=bt,mt=Qt,n.width=Math.floor(We*Qt),n.height=Math.floor(bt*Qt),this.setViewport(0,0,We,bt)},this.getCurrentViewport=function(We){return We.copy(Ye)},this.getViewport=function(We){return We.copy(dt)},this.setViewport=function(We,bt,Qt,_t){We.isVector4?dt.set(We.x,We.y,We.z,We.w):dt.set(We,bt,Qt,_t),Tn.viewport(Ye.copy(dt).multiplyScalar(mt).floor())},this.getScissor=function(We){return We.copy(St)},this.setScissor=function(We,bt,Qt,_t){We.isVector4?St.set(We.x,We.y,We.z,We.w):St.set(We,bt,Qt,_t),Tn.scissor(it.copy(St).multiplyScalar(mt).floor())},this.getScissorTest=function(){return rn},this.setScissorTest=function(We){Tn.setScissorTest(rn=We)},this.setOpaqueSort=function(We){Pt=We},this.setTransparentSort=function(We){yt=We},this.getClearColor=function(We){return We.copy(Cn.getClearColor())},this.setClearColor=function(){Cn.setClearColor.apply(Cn,arguments)},this.getClearAlpha=function(){return Cn.getClearAlpha()},this.setClearAlpha=function(){Cn.setClearAlpha.apply(Cn,arguments)},this.clear=function(We=!0,bt=!0,Qt=!0){let _t=0;We&&(_t|=16384),bt&&(_t|=256),Qt&&(_t|=1024),Dt.clear(_t)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",Fi,!1),n.removeEventListener("webglcontextrestored",Ii,!1),n.removeEventListener("webglcontextcreationerror",Fr,!1),Xr.dispose(),Ze.dispose(),on.dispose(),Ln.dispose(),yi.dispose(),Oi.dispose(),en.dispose(),Ti.dispose(),Si.dispose(),mi.dispose(),mi.removeEventListener("sessionstart",ii),mi.removeEventListener("sessionend",_i),gn&&(gn.dispose(),gn=null),Vr.stop()};function Fi(We){We.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),$=!0}function Ii(){console.log("THREE.WebGLRenderer: Context Restored."),$=!1;const We=tr.autoReset,bt=Ut.enabled,Qt=Ut.autoUpdate,_t=Ut.needsUpdate,Jt=Ut.type;Ui(),tr.autoReset=We,Ut.enabled=bt,Ut.autoUpdate=Qt,Ut.needsUpdate=_t,Ut.type=Jt}function Fr(We){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",We.statusMessage)}function ps(We){const bt=We.target;bt.removeEventListener("dispose",ps),To(bt)}function To(We){ht(We),on.remove(We)}function ht(We){const bt=on.get(We).programs;bt!==void 0&&(bt.forEach(function(Qt){Si.releaseProgram(Qt)}),We.isShaderMaterial&&Si.releaseShaderCache(We))}this.renderBufferDirect=function(We,bt,Qt,_t,Jt,Li){bt===null&&(bt=dn);const ji=Jt.isMesh&&Jt.matrixWorld.determinant()<0,lr=i6(We,bt,Qt,_t,Jt);Tn.setMaterial(_t,ji);let fr=Qt.index,Nr=1;_t.wireframe===!0&&(fr=Vi.getWireframeAttribute(Qt),Nr=2);const wr=Qt.drawRange,Cr=Qt.attributes.position;let no=wr.start*Nr,rl=(wr.start+wr.count)*Nr;Li!==null&&(no=Math.max(no,Li.start*Nr),rl=Math.min(rl,(Li.start+Li.count)*Nr)),fr!==null?(no=Math.max(no,0),rl=Math.min(rl,fr.count)):Cr!=null&&(no=Math.max(no,0),rl=Math.min(rl,Cr.count));const Iu=rl-no;if(Iu<0||Iu===1/0)return;en.setup(Jt,_t,lr,Qt,fr);let nf,io=qn;if(fr!==null&&(nf=jn.get(fr),io=Hi,io.setIndex(nf)),Jt.isMesh)_t.wireframe===!0?(Tn.setLineWidth(_t.wireframeLinewidth*Gn()),io.setMode(1)):io.setMode(4);else if(Jt.isLine){let Mr=_t.linewidth;Mr===void 0&&(Mr=1),Tn.setLineWidth(Mr*Gn()),Jt.isLineSegments?io.setMode(1):Jt.isLineLoop?io.setMode(2):io.setMode(3)}else Jt.isPoints?io.setMode(0):Jt.isSprite&&io.setMode(4);if(Jt.isInstancedMesh)io.renderInstances(no,Iu,Jt.count);else if(Qt.isInstancedBufferGeometry){const Mr=Qt._maxInstanceCount!==void 0?Qt._maxInstanceCount:1/0,qE=Math.min(Qt.instanceCount,Mr);io.renderInstances(no,Iu,qE)}else io.render(no,Iu)},this.compile=function(We,bt){function Qt(_t,Jt,Li){_t.transparent===!0&&_t.side===P?(_t.side=R,_t.needsUpdate=!0,Il(_t,Jt,Li),_t.side=S,_t.needsUpdate=!0,Il(_t,Jt,Li),_t.side=P):Il(_t,Jt,Li)}j=Ze.get(We),j.init(),re.push(j),We.traverseVisible(function(_t){_t.isLight&&_t.layers.test(bt.layers)&&(j.pushLight(_t),_t.castShadow&&j.pushShadow(_t))}),j.setupLights(ie.physicallyCorrectLights),We.traverse(function(_t){const Jt=_t.material;if(Jt)if(Array.isArray(Jt))for(let Li=0;Li<Jt.length;Li++){const ji=Jt[Li];Qt(ji,We,_t)}else Qt(Jt,We,_t)}),re.pop(),j=null};let Xt=null;function _n(We){Xt&&Xt(We)}function ii(){Vr.stop()}function _i(){Vr.start()}const Vr=new vg;Vr.setAnimationLoop(_n),typeof self<"u"&&Vr.setContext(self),this.setAnimationLoop=function(We){Xt=We,mi.setAnimationLoop(We),We===null?Vr.stop():Vr.start()},mi.addEventListener("sessionstart",ii),mi.addEventListener("sessionend",_i),this.render=function(We,bt){if(bt!==void 0&&bt.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if($===!0)return;We.matrixWorldAutoUpdate===!0&&We.updateMatrixWorld(),bt.parent===null&&bt.matrixWorldAutoUpdate===!0&&bt.updateMatrixWorld(),mi.enabled===!0&&mi.isPresenting===!0&&(mi.cameraAutoUpdate===!0&&mi.updateCamera(bt),bt=mi.getCamera()),We.isScene===!0&&We.onBeforeRender(ie,We,bt,ge),j=Ze.get(We,re.length),j.init(),re.push(j),ni.multiplyMatrices(bt.projectionMatrix,bt.matrixWorldInverse),hn.setFromProjectionMatrix(ni),wn=this.localClippingEnabled,tn=ke.init(this.clippingPlanes,wn,bt),V=Xr.get(We,Y.length),V.init(),Y.push(V),Io(We,bt,0,ie.sortObjects),V.finish(),ie.sortObjects===!0&&V.sort(Pt,yt),tn===!0&&ke.beginShadows();const Qt=j.state.shadowsArray;if(Ut.render(Qt,We,bt),tn===!0&&ke.endShadows(),this.info.autoReset===!0&&this.info.reset(),Cn.render(V,We),j.setupLights(ie.physicallyCorrectLights),bt.isArrayCamera){const _t=bt.cameras;for(let Jt=0,Li=_t.length;Jt<Li;Jt++){const ji=_t[Jt];na(V,We,ji,ji.viewport)}}else na(V,We,bt);ge!==null&&($t.updateMultisampleRenderTarget(ge),$t.updateRenderTargetMipmap(ge)),We.isScene===!0&&We.onAfterRender(ie,We,bt),mi.enabled&&mi.submitFrame&&mi.submitFrame(),en.resetDefaultState(),we=-1,Le=null,re.pop(),re.length>0?j=re[re.length-1]:j=null,Y.pop(),Y.length>0?V=Y[Y.length-1]:V=null};function Io(We,bt,Qt,_t){if(We.visible===!1)return;if(We.layers.test(bt.layers)){if(We.isGroup)Qt=We.renderOrder;else if(We.isLOD)We.autoUpdate===!0&&We.update(bt);else if(We.isLight)j.pushLight(We),We.castShadow&&j.pushShadow(We);else if(We.isSprite){if(!We.frustumCulled||hn.intersectsSprite(We)){_t&&Vt.setFromMatrixPosition(We.matrixWorld).applyMatrix4(ni);const ji=Oi.update(We),lr=We.material;lr.visible&&V.push(We,ji,lr,Qt,Vt.z,null)}}else if((We.isMesh||We.isLine||We.isPoints)&&(We.isSkinnedMesh&&We.skeleton.frame!==tr.render.frame&&(We.skeleton.update(),We.skeleton.frame=tr.render.frame),!We.frustumCulled||hn.intersectsObject(We))){_t&&Vt.setFromMatrixPosition(We.matrixWorld).applyMatrix4(ni);const ji=Oi.update(We),lr=We.material;if(Array.isArray(lr)){const fr=ji.groups;for(let Nr=0,wr=fr.length;Nr<wr;Nr++){const Cr=fr[Nr],no=lr[Cr.materialIndex];no&&no.visible&&V.push(We,ji,no,Qt,Vt.z,Cr)}}else lr.visible&&V.push(We,ji,lr,Qt,Vt.z,null)}}const Li=We.children;for(let ji=0,lr=Li.length;ji<lr;ji++)Io(Li[ji],bt,Qt,_t)}function na(We,bt,Qt,_t){const Jt=We.opaque,Li=We.transmissive,ji=We.transparent;j.setupLightsView(Qt),Li.length>0&&tf(Jt,bt,Qt),_t&&Tn.viewport(Ye.copy(_t)),Jt.length>0&&ms(Jt,bt,Qt),Li.length>0&&ms(Li,bt,Qt),ji.length>0&&ms(ji,bt,Qt),Tn.buffers.depth.setTest(!0),Tn.buffers.depth.setMask(!0),Tn.buffers.color.setMask(!0),Tn.setPolygonOffset(!1)}function tf(We,bt,Qt){const _t=Mi.isWebGL2;gn===null&&(gn=new Us(1,1,{generateMipmaps:!0,type:Hn.has("EXT_color_buffer_half_float")?Nt:cn,minFilter:Ht,samples:_t&&w===!0?4:0})),ie.getDrawingBufferSize(Wn),_t?gn.setSize(Wn.x,Wn.y):gn.setSize(Xo(Wn.x),Xo(Wn.y));const Jt=ie.getRenderTarget();ie.setRenderTarget(gn),ie.clear();const Li=ie.toneMapping;ie.toneMapping=Bn,ms(We,bt,Qt),ie.toneMapping=Li,$t.updateMultisampleRenderTarget(gn),$t.updateRenderTargetMipmap(gn),ie.setRenderTarget(Jt)}function ms(We,bt,Qt){const _t=bt.isScene===!0?bt.overrideMaterial:null;for(let Jt=0,Li=We.length;Jt<Li;Jt++){const ji=We[Jt],lr=ji.object,fr=ji.geometry,Nr=_t===null?ji.material:_t,wr=ji.group;lr.layers.test(Qt.layers)&&Tu(lr,bt,Qt,fr,Nr,wr)}}function Tu(We,bt,Qt,_t,Jt,Li){We.onBeforeRender(ie,bt,Qt,_t,Jt,Li),We.modelViewMatrix.multiplyMatrices(Qt.matrixWorldInverse,We.matrixWorld),We.normalMatrix.getNormalMatrix(We.modelViewMatrix),Jt.onBeforeRender(ie,bt,Qt,_t,We,Li),Jt.transparent===!0&&Jt.side===P?(Jt.side=R,Jt.needsUpdate=!0,ie.renderBufferDirect(Qt,bt,_t,Jt,We,Li),Jt.side=S,Jt.needsUpdate=!0,ie.renderBufferDirect(Qt,bt,_t,Jt,We,Li),Jt.side=P):ie.renderBufferDirect(Qt,bt,_t,Jt,We,Li),We.onAfterRender(ie,bt,Qt,_t,Jt,Li)}function Il(We,bt,Qt){bt.isScene!==!0&&(bt=dn);const _t=on.get(We),Jt=j.state.lights,Li=j.state.shadowsArray,ji=Jt.state.version,lr=Si.getParameters(We,Jt.state,Li,bt,Qt),fr=Si.getProgramCacheKey(lr);let Nr=_t.programs;_t.environment=We.isMeshStandardMaterial?bt.environment:null,_t.fog=bt.fog,_t.envMap=(We.isMeshStandardMaterial?yi:Ln).get(We.envMap||_t.environment),Nr===void 0&&(We.addEventListener("dispose",ps),Nr=new Map,_t.programs=Nr);let wr=Nr.get(fr);if(wr!==void 0){if(_t.currentProgram===wr&&_t.lightsStateVersion===ji)return ZS(We,lr),wr}else lr.uniforms=Si.getUniforms(We),We.onBuild(Qt,lr,ie),We.onBeforeCompile(lr,ie),wr=Si.acquireProgram(lr,fr),Nr.set(fr,wr),_t.uniforms=lr.uniforms;const Cr=_t.uniforms;(!We.isShaderMaterial&&!We.isRawShaderMaterial||We.clipping===!0)&&(Cr.clippingPlanes=ke.uniform),ZS(We,lr),_t.needsLights=s6(We),_t.lightsStateVersion=ji,_t.needsLights&&(Cr.ambientLightColor.value=Jt.state.ambient,Cr.lightProbe.value=Jt.state.probe,Cr.directionalLights.value=Jt.state.directional,Cr.directionalLightShadows.value=Jt.state.directionalShadow,Cr.spotLights.value=Jt.state.spot,Cr.spotLightShadows.value=Jt.state.spotShadow,Cr.rectAreaLights.value=Jt.state.rectArea,Cr.ltc_1.value=Jt.state.rectAreaLTC1,Cr.ltc_2.value=Jt.state.rectAreaLTC2,Cr.pointLights.value=Jt.state.point,Cr.pointLightShadows.value=Jt.state.pointShadow,Cr.hemisphereLights.value=Jt.state.hemi,Cr.directionalShadowMap.value=Jt.state.directionalShadowMap,Cr.directionalShadowMatrix.value=Jt.state.directionalShadowMatrix,Cr.spotShadowMap.value=Jt.state.spotShadowMap,Cr.spotLightMatrix.value=Jt.state.spotLightMatrix,Cr.spotLightMap.value=Jt.state.spotLightMap,Cr.pointShadowMap.value=Jt.state.pointShadowMap,Cr.pointShadowMatrix.value=Jt.state.pointShadowMatrix);const no=wr.getUniforms(),rl=Sv.seqWithValue(no.seq,Cr);return _t.currentProgram=wr,_t.uniformsList=rl,wr}function ZS(We,bt){const Qt=on.get(We);Qt.outputEncoding=bt.outputEncoding,Qt.instancing=bt.instancing,Qt.skinning=bt.skinning,Qt.morphTargets=bt.morphTargets,Qt.morphNormals=bt.morphNormals,Qt.morphColors=bt.morphColors,Qt.morphTargetsCount=bt.morphTargetsCount,Qt.numClippingPlanes=bt.numClippingPlanes,Qt.numIntersection=bt.numClipIntersection,Qt.vertexAlphas=bt.vertexAlphas,Qt.vertexTangents=bt.vertexTangents,Qt.toneMapping=bt.toneMapping}function i6(We,bt,Qt,_t,Jt){bt.isScene!==!0&&(bt=dn),$t.resetTextureUnits();const Li=bt.fog,ji=_t.isMeshStandardMaterial?bt.environment:null,lr=ge===null?ie.outputEncoding:ge.isXRRenderTarget===!0?ge.texture.encoding:ar,fr=(_t.isMeshStandardMaterial?yi:Ln).get(_t.envMap||ji),Nr=_t.vertexColors===!0&&!!Qt.attributes.color&&Qt.attributes.color.itemSize===4,wr=!!_t.normalMap&&!!Qt.attributes.tangent,Cr=!!Qt.morphAttributes.position,no=!!Qt.morphAttributes.normal,rl=!!Qt.morphAttributes.color,Iu=_t.toneMapped?ie.toneMapping:Bn,nf=Qt.morphAttributes.position||Qt.morphAttributes.normal||Qt.morphAttributes.color,io=nf!==void 0?nf.length:0,Mr=on.get(_t),qE=j.state.lights;if(tn===!0&&(wn===!0||We!==Le)){const sl=We===Le&&_t.id===we;ke.setState(_t,We,sl)}let Ro=!1;_t.version===Mr.__version?(Mr.needsLights&&Mr.lightsStateVersion!==qE.state.version||Mr.outputEncoding!==lr||Jt.isInstancedMesh&&Mr.instancing===!1||!Jt.isInstancedMesh&&Mr.instancing===!0||Jt.isSkinnedMesh&&Mr.skinning===!1||!Jt.isSkinnedMesh&&Mr.skinning===!0||Mr.envMap!==fr||_t.fog===!0&&Mr.fog!==Li||Mr.numClippingPlanes!==void 0&&(Mr.numClippingPlanes!==ke.numPlanes||Mr.numIntersection!==ke.numIntersection)||Mr.vertexAlphas!==Nr||Mr.vertexTangents!==wr||Mr.morphTargets!==Cr||Mr.morphNormals!==no||Mr.morphColors!==rl||Mr.toneMapping!==Iu||Mi.isWebGL2===!0&&Mr.morphTargetsCount!==io)&&(Ro=!0):(Ro=!0,Mr.__version=_t.version);let rf=Mr.currentProgram;Ro===!0&&(rf=Il(_t,bt,Jt));let $S=!1,aA=!1,JE=!1;const ga=rf.getUniforms(),sf=Mr.uniforms;if(Tn.useProgram(rf.program)&&($S=!0,aA=!0,JE=!0),_t.id!==we&&(we=_t.id,aA=!0),$S||Le!==We){if(ga.setValue(Dt,"projectionMatrix",We.projectionMatrix),Mi.logarithmicDepthBuffer&&ga.setValue(Dt,"logDepthBufFC",2/(Math.log(We.far+1)/Math.LN2)),Le!==We&&(Le=We,aA=!0,JE=!0),_t.isShaderMaterial||_t.isMeshPhongMaterial||_t.isMeshToonMaterial||_t.isMeshStandardMaterial||_t.envMap){const sl=ga.map.cameraPosition;sl!==void 0&&sl.setValue(Dt,Vt.setFromMatrixPosition(We.matrixWorld))}(_t.isMeshPhongMaterial||_t.isMeshToonMaterial||_t.isMeshLambertMaterial||_t.isMeshBasicMaterial||_t.isMeshStandardMaterial||_t.isShaderMaterial)&&ga.setValue(Dt,"isOrthographic",We.isOrthographicCamera===!0),(_t.isMeshPhongMaterial||_t.isMeshToonMaterial||_t.isMeshLambertMaterial||_t.isMeshBasicMaterial||_t.isMeshStandardMaterial||_t.isShaderMaterial||_t.isShadowMaterial||Jt.isSkinnedMesh)&&ga.setValue(Dt,"viewMatrix",We.matrixWorldInverse)}if(Jt.isSkinnedMesh){ga.setOptional(Dt,Jt,"bindMatrix"),ga.setOptional(Dt,Jt,"bindMatrixInverse");const sl=Jt.skeleton;sl&&(Mi.floatVertexTextures?(sl.boneTexture===null&&sl.computeBoneTexture(),ga.setValue(Dt,"boneTexture",sl.boneTexture,$t),ga.setValue(Dt,"boneTextureSize",sl.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const ZE=Qt.morphAttributes;if((ZE.position!==void 0||ZE.normal!==void 0||ZE.color!==void 0&&Mi.isWebGL2===!0)&&In.update(Jt,Qt,_t,rf),(aA||Mr.receiveShadow!==Jt.receiveShadow)&&(Mr.receiveShadow=Jt.receiveShadow,ga.setValue(Dt,"receiveShadow",Jt.receiveShadow)),_t.isMeshGouraudMaterial&&_t.envMap!==null&&(sf.envMap.value=fr,sf.flipEnvMap.value=fr.isCubeTexture&&fr.isRenderTargetTexture===!1?-1:1),aA&&(ga.setValue(Dt,"toneMappingExposure",ie.toneMappingExposure),Mr.needsLights&&r6(sf,JE),Li&&_t.fog===!0&&ns.refreshFogUniforms(sf,Li),ns.refreshMaterialUniforms(sf,_t,mt,tt,gn),Sv.upload(Dt,Mr.uniformsList,sf,$t)),_t.isShaderMaterial&&_t.uniformsNeedUpdate===!0&&(Sv.upload(Dt,Mr.uniformsList,sf,$t),_t.uniformsNeedUpdate=!1),_t.isSpriteMaterial&&ga.setValue(Dt,"center",Jt.center),ga.setValue(Dt,"modelViewMatrix",Jt.modelViewMatrix),ga.setValue(Dt,"normalMatrix",Jt.normalMatrix),ga.setValue(Dt,"modelMatrix",Jt.matrixWorld),_t.isShaderMaterial||_t.isRawShaderMaterial){const sl=_t.uniformsGroups;for(let $E=0,o6=sl.length;$E<o6;$E++)if(Mi.isWebGL2){const e3=sl[$E];Ti.update(e3,rf),Ti.bind(e3,rf)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return rf}function r6(We,bt){We.ambientLightColor.needsUpdate=bt,We.lightProbe.needsUpdate=bt,We.directionalLights.needsUpdate=bt,We.directionalLightShadows.needsUpdate=bt,We.pointLights.needsUpdate=bt,We.pointLightShadows.needsUpdate=bt,We.spotLights.needsUpdate=bt,We.spotLightShadows.needsUpdate=bt,We.rectAreaLights.needsUpdate=bt,We.hemisphereLights.needsUpdate=bt}function s6(We){return We.isMeshLambertMaterial||We.isMeshToonMaterial||We.isMeshPhongMaterial||We.isMeshStandardMaterial||We.isShadowMaterial||We.isShaderMaterial&&We.lights===!0}this.setTexture2D=function(){var We=!1;return function(Qt,_t){Qt&&Qt.isWebGLRenderTarget&&(We||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),We=!0),Qt=Qt.texture),$t.setTexture2D(Qt,_t)}}(),this.getActiveCubeFace=function(){return de},this.getActiveMipmapLevel=function(){return Ce},this.getRenderTarget=function(){return ge},this.setRenderTargetTextures=function(We,bt,Qt){on.get(We.texture).__webglTexture=bt,on.get(We.depthTexture).__webglTexture=Qt;const _t=on.get(We);_t.__hasExternalTextures=!0,_t.__hasExternalTextures&&(_t.__autoAllocateDepthBuffer=Qt===void 0,_t.__autoAllocateDepthBuffer||Hn.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),_t.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(We,bt){const Qt=on.get(We);Qt.__webglFramebuffer=bt,Qt.__useDefaultFramebuffer=bt===void 0},this.setRenderTarget=function(We,bt=0,Qt=0){ge=We,de=bt,Ce=Qt;let _t=!0,Jt=null,Li=!1,ji=!1;if(We){const fr=on.get(We);fr.__useDefaultFramebuffer!==void 0?(Tn.bindFramebuffer(36160,null),_t=!1):fr.__webglFramebuffer===void 0?$t.setupRenderTarget(We):fr.__hasExternalTextures&&$t.rebindTextures(We,on.get(We.texture).__webglTexture,on.get(We.depthTexture).__webglTexture);const Nr=We.texture;(Nr.isData3DTexture||Nr.isDataArrayTexture||Nr.isCompressedArrayTexture)&&(ji=!0);const wr=on.get(We).__webglFramebuffer;We.isWebGLCubeRenderTarget?(Jt=wr[bt],Li=!0):Mi.isWebGL2&&We.samples>0&&$t.useMultisampledRTT(We)===!1?Jt=on.get(We).__webglMultisampledFramebuffer:Jt=wr,Ye.copy(We.viewport),it.copy(We.scissor),Me=We.scissorTest}else Ye.copy(dt).multiplyScalar(mt).floor(),it.copy(St).multiplyScalar(mt).floor(),Me=rn;if(Tn.bindFramebuffer(36160,Jt)&&Mi.drawBuffers&&_t&&Tn.drawBuffers(We,Jt),Tn.viewport(Ye),Tn.scissor(it),Tn.setScissorTest(Me),Li){const fr=on.get(We.texture);Dt.framebufferTexture2D(36160,36064,34069+bt,fr.__webglTexture,Qt)}else if(ji){const fr=on.get(We.texture),Nr=bt||0;Dt.framebufferTextureLayer(36160,36064,fr.__webglTexture,Qt||0,Nr)}we=-1},this.readRenderTargetPixels=function(We,bt,Qt,_t,Jt,Li,ji){if(!(We&&We.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let lr=on.get(We).__webglFramebuffer;if(We.isWebGLCubeRenderTarget&&ji!==void 0&&(lr=lr[ji]),lr){Tn.bindFramebuffer(36160,lr);try{const fr=We.texture,Nr=fr.format,wr=fr.type;if(Nr!==At&&Zn.convert(Nr)!==Dt.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Cr=wr===Nt&&(Hn.has("EXT_color_buffer_half_float")||Mi.isWebGL2&&Hn.has("EXT_color_buffer_float"));if(wr!==cn&&Zn.convert(wr)!==Dt.getParameter(35738)&&!(wr===vn&&(Mi.isWebGL2||Hn.has("OES_texture_float")||Hn.has("WEBGL_color_buffer_float")))&&!Cr){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}bt>=0&&bt<=We.width-_t&&Qt>=0&&Qt<=We.height-Jt&&Dt.readPixels(bt,Qt,_t,Jt,Zn.convert(Nr),Zn.convert(wr),Li)}finally{const fr=ge!==null?on.get(ge).__webglFramebuffer:null;Tn.bindFramebuffer(36160,fr)}}},this.copyFramebufferToTexture=function(We,bt,Qt=0){const _t=Math.pow(2,-Qt),Jt=Math.floor(bt.image.width*_t),Li=Math.floor(bt.image.height*_t);$t.setTexture2D(bt,0),Dt.copyTexSubImage2D(3553,Qt,0,0,We.x,We.y,Jt,Li),Tn.unbindTexture()},this.copyTextureToTexture=function(We,bt,Qt,_t=0){const Jt=bt.image.width,Li=bt.image.height,ji=Zn.convert(Qt.format),lr=Zn.convert(Qt.type);$t.setTexture2D(Qt,0),Dt.pixelStorei(37440,Qt.flipY),Dt.pixelStorei(37441,Qt.premultiplyAlpha),Dt.pixelStorei(3317,Qt.unpackAlignment),bt.isDataTexture?Dt.texSubImage2D(3553,_t,We.x,We.y,Jt,Li,ji,lr,bt.image.data):bt.isCompressedTexture?Dt.compressedTexSubImage2D(3553,_t,We.x,We.y,bt.mipmaps[0].width,bt.mipmaps[0].height,ji,bt.mipmaps[0].data):Dt.texSubImage2D(3553,_t,We.x,We.y,ji,lr,bt.image),_t===0&&Qt.generateMipmaps&&Dt.generateMipmap(3553),Tn.unbindTexture()},this.copyTextureToTexture3D=function(We,bt,Qt,_t,Jt=0){if(ie.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Li=We.max.x-We.min.x+1,ji=We.max.y-We.min.y+1,lr=We.max.z-We.min.z+1,fr=Zn.convert(_t.format),Nr=Zn.convert(_t.type);let wr;if(_t.isData3DTexture)$t.setTexture3D(_t,0),wr=32879;else if(_t.isDataArrayTexture)$t.setTexture2DArray(_t,0),wr=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}Dt.pixelStorei(37440,_t.flipY),Dt.pixelStorei(37441,_t.premultiplyAlpha),Dt.pixelStorei(3317,_t.unpackAlignment);const Cr=Dt.getParameter(3314),no=Dt.getParameter(32878),rl=Dt.getParameter(3316),Iu=Dt.getParameter(3315),nf=Dt.getParameter(32877),io=Qt.isCompressedTexture?Qt.mipmaps[0]:Qt.image;Dt.pixelStorei(3314,io.width),Dt.pixelStorei(32878,io.height),Dt.pixelStorei(3316,We.min.x),Dt.pixelStorei(3315,We.min.y),Dt.pixelStorei(32877,We.min.z),Qt.isDataTexture||Qt.isData3DTexture?Dt.texSubImage3D(wr,Jt,bt.x,bt.y,bt.z,Li,ji,lr,fr,Nr,io.data):Qt.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Dt.compressedTexSubImage3D(wr,Jt,bt.x,bt.y,bt.z,Li,ji,lr,fr,io.data)):Dt.texSubImage3D(wr,Jt,bt.x,bt.y,bt.z,Li,ji,lr,fr,Nr,io),Dt.pixelStorei(3314,Cr),Dt.pixelStorei(32878,no),Dt.pixelStorei(3316,rl),Dt.pixelStorei(3315,Iu),Dt.pixelStorei(32877,nf),Jt===0&&_t.generateMipmaps&&Dt.generateMipmap(wr),Tn.unbindTexture()},this.initTexture=function(We){We.isCubeTexture?$t.setTextureCube(We,0):We.isData3DTexture?$t.setTexture3D(We,0):We.isDataArrayTexture||We.isCompressedArrayTexture?$t.setTexture2DArray(We,0):$t.setTexture2D(We,0),Tn.unbindTexture()},this.resetState=function(){de=0,Ce=0,ge=null,Tn.reset(),en.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class vb extends Ab{}vb.prototype.isWebGL1Renderer=!0;class Tv{constructor(n,s=25e-5){this.isFogExp2=!0,this.name="",this.color=new kn(n),this.density=s}clone(){return new Tv(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class Iv{constructor(n,s=1,u=1e3){this.isFog=!0,this.name="",this.color=new kn(n),this.near=s,this.far=u}clone(){return new Iv(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class yb extends dr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(n,s){return super.copy(n,s),n.background!==null&&(this.background=n.background.clone()),n.environment!==null&&(this.environment=n.environment.clone()),n.fog!==null&&(this.fog=n.fog.clone()),this.backgroundBlurriness=n.backgroundBlurriness,this.backgroundIntensity=n.backgroundIntensity,n.overrideMaterial!==null&&(this.overrideMaterial=n.overrideMaterial.clone()),this.matrixAutoUpdate=n.matrixAutoUpdate,this}toJSON(n){const s=super.toJSON(n);return this.fog!==null&&(s.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(s.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(s.backgroundIntensity=this.backgroundIntensity),s}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(n){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=n}}class Rv{constructor(n,s){this.isInterleavedBuffer=!0,this.array=n,this.stride=s,this.count=n!==void 0?n.length/s:0,this.usage=xl,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Eo()}onUploadCallback(){}set needsUpdate(n){n===!0&&this.version++}setUsage(n){return this.usage=n,this}copy(n){return this.array=new n.array.constructor(n.array),this.count=n.count,this.stride=n.stride,this.usage=n.usage,this}copyAt(n,s,u){n*=this.stride,u*=s.stride;for(let f=0,w=this.stride;f<w;f++)this.array[n+f]=s.array[u+f];return this}set(n,s=0){return this.array.set(n,s),this}clone(n){n.arrayBuffers===void 0&&(n.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Eo()),n.arrayBuffers[this.array.buffer._uuid]===void 0&&(n.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const s=new this.array.constructor(n.arrayBuffers[this.array.buffer._uuid]),u=new this.constructor(s,this.stride);return u.setUsage(this.usage),u}onUpload(n){return this.onUploadCallback=n,this}toJSON(n){return n.arrayBuffers===void 0&&(n.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Eo()),n.arrayBuffers[this.array.buffer._uuid]===void 0&&(n.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const pa=new Qe;class Hd{constructor(n,s,u,f=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=n,this.itemSize=s,this.offset=u,this.normalized=f===!0}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(n){this.data.needsUpdate=n}applyMatrix4(n){for(let s=0,u=this.data.count;s<u;s++)pa.fromBufferAttribute(this,s),pa.applyMatrix4(n),this.setXYZ(s,pa.x,pa.y,pa.z);return this}applyNormalMatrix(n){for(let s=0,u=this.count;s<u;s++)pa.fromBufferAttribute(this,s),pa.applyNormalMatrix(n),this.setXYZ(s,pa.x,pa.y,pa.z);return this}transformDirection(n){for(let s=0,u=this.count;s<u;s++)pa.fromBufferAttribute(this,s),pa.transformDirection(n),this.setXYZ(s,pa.x,pa.y,pa.z);return this}setX(n,s){return this.normalized&&(s=Rr(s,this.array)),this.data.array[n*this.data.stride+this.offset]=s,this}setY(n,s){return this.normalized&&(s=Rr(s,this.array)),this.data.array[n*this.data.stride+this.offset+1]=s,this}setZ(n,s){return this.normalized&&(s=Rr(s,this.array)),this.data.array[n*this.data.stride+this.offset+2]=s,this}setW(n,s){return this.normalized&&(s=Rr(s,this.array)),this.data.array[n*this.data.stride+this.offset+3]=s,this}getX(n){let s=this.data.array[n*this.data.stride+this.offset];return this.normalized&&(s=Sa(s,this.array)),s}getY(n){let s=this.data.array[n*this.data.stride+this.offset+1];return this.normalized&&(s=Sa(s,this.array)),s}getZ(n){let s=this.data.array[n*this.data.stride+this.offset+2];return this.normalized&&(s=Sa(s,this.array)),s}getW(n){let s=this.data.array[n*this.data.stride+this.offset+3];return this.normalized&&(s=Sa(s,this.array)),s}setXY(n,s,u){return n=n*this.data.stride+this.offset,this.normalized&&(s=Rr(s,this.array),u=Rr(u,this.array)),this.data.array[n+0]=s,this.data.array[n+1]=u,this}setXYZ(n,s,u,f){return n=n*this.data.stride+this.offset,this.normalized&&(s=Rr(s,this.array),u=Rr(u,this.array),f=Rr(f,this.array)),this.data.array[n+0]=s,this.data.array[n+1]=u,this.data.array[n+2]=f,this}setXYZW(n,s,u,f,w){return n=n*this.data.stride+this.offset,this.normalized&&(s=Rr(s,this.array),u=Rr(u,this.array),f=Rr(f,this.array),w=Rr(w,this.array)),this.data.array[n+0]=s,this.data.array[n+1]=u,this.data.array[n+2]=f,this.data.array[n+3]=w,this}clone(n){if(n===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const s=[];for(let u=0;u<this.count;u++){const f=u*this.data.stride+this.offset;for(let w=0;w<this.itemSize;w++)s.push(this.data.array[f+w])}return new Hr(new this.array.constructor(s),this.itemSize,this.normalized)}else return n.interleavedBuffers===void 0&&(n.interleavedBuffers={}),n.interleavedBuffers[this.data.uuid]===void 0&&(n.interleavedBuffers[this.data.uuid]=this.data.clone(n)),new Hd(n.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(n){if(n===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const s=[];for(let u=0;u<this.count;u++){const f=u*this.data.stride+this.offset;for(let w=0;w<this.itemSize;w++)s.push(this.data.array[f+w])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:s,normalized:this.normalized}}else return n.interleavedBuffers===void 0&&(n.interleavedBuffers={}),n.interleavedBuffers[this.data.uuid]===void 0&&(n.interleavedBuffers[this.data.uuid]=this.data.toJSON(n)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class fE extends bo{constructor(n){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new kn(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(n)}copy(n){return super.copy(n),this.color.copy(n.color),this.map=n.map,this.alphaMap=n.alphaMap,this.rotation=n.rotation,this.sizeAttenuation=n.sizeAttenuation,this.fog=n.fog,this}}let Sp;const Dg=new Qe,Tp=new Qe,Ip=new Qe,Rp=new jt,Pg=new jt,xb=new Jn,Bv=new Qe,Og=new Qe,Lv=new Qe,Eb=new jt,pE=new jt,_b=new jt;class wb extends dr{constructor(n){if(super(),this.isSprite=!0,this.type="Sprite",Sp===void 0){Sp=new Wi;const s=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),u=new Rv(s,5);Sp.setIndex([0,1,2,0,2,3]),Sp.setAttribute("position",new Hd(u,3,0,!1)),Sp.setAttribute("uv",new Hd(u,2,3,!1))}this.geometry=Sp,this.material=n!==void 0?n:new fE,this.center=new jt(.5,.5)}raycast(n,s){n.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Tp.setFromMatrixScale(this.matrixWorld),xb.copy(n.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(n.camera.matrixWorldInverse,this.matrixWorld),Ip.setFromMatrixPosition(this.modelViewMatrix),n.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Tp.multiplyScalar(-Ip.z);const u=this.material.rotation;let f,w;u!==0&&(w=Math.cos(u),f=Math.sin(u));const T=this.center;Dv(Bv.set(-.5,-.5,0),Ip,T,Tp,f,w),Dv(Og.set(.5,-.5,0),Ip,T,Tp,f,w),Dv(Lv.set(.5,.5,0),Ip,T,Tp,f,w),Eb.set(0,0),pE.set(1,0),_b.set(1,1);let I=n.ray.intersectTriangle(Bv,Og,Lv,!1,Dg);if(I===null&&(Dv(Og.set(-.5,.5,0),Ip,T,Tp,f,w),pE.set(0,1),I=n.ray.intersectTriangle(Bv,Lv,Og,!1,Dg),I===null))return;const F=n.ray.origin.distanceTo(Dg);F<n.near||F>n.far||s.push({distance:F,point:Dg.clone(),uv:Co.getUV(Dg,Bv,Og,Lv,Eb,pE,_b,new jt),face:null,object:this})}copy(n,s){return super.copy(n,s),n.center!==void 0&&this.center.copy(n.center),this.material=n.material,this}}function Dv(B,n,s,u,f,w){Rp.subVectors(B,s).addScalar(.5).multiply(u),f!==void 0?(Pg.x=w*Rp.x-f*Rp.y,Pg.y=f*Rp.x+w*Rp.y):Pg.copy(Rp),B.copy(n),B.x+=Pg.x,B.y+=Pg.y,B.applyMatrix4(xb)}const Pv=new Qe,Cb=new Qe;class Mb extends dr{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(n){super.copy(n,!1);const s=n.levels;for(let u=0,f=s.length;u<f;u++){const w=s[u];this.addLevel(w.object.clone(),w.distance,w.hysteresis)}return this.autoUpdate=n.autoUpdate,this}addLevel(n,s=0,u=0){s=Math.abs(s);const f=this.levels;let w;for(w=0;w<f.length&&!(s<f[w].distance);w++);return f.splice(w,0,{distance:s,hysteresis:u,object:n}),this.add(n),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(n){const s=this.levels;if(s.length>0){let u,f;for(u=1,f=s.length;u<f;u++){let w=s[u].distance;if(s[u].object.visible&&(w-=w*s[u].hysteresis),n<w)break}return s[u-1].object}return null}raycast(n,s){if(this.levels.length>0){Pv.setFromMatrixPosition(this.matrixWorld);const f=n.ray.origin.distanceTo(Pv);this.getObjectForDistance(f).raycast(n,s)}}update(n){const s=this.levels;if(s.length>1){Pv.setFromMatrixPosition(n.matrixWorld),Cb.setFromMatrixPosition(this.matrixWorld);const u=Pv.distanceTo(Cb)/n.zoom;s[0].object.visible=!0;let f,w;for(f=1,w=s.length;f<w;f++){let T=s[f].distance;if(s[f].object.visible&&(T-=T*s[f].hysteresis),u>=T)s[f-1].object.visible=!1,s[f].object.visible=!0;else break}for(this._currentLevel=f-1;f<w;f++)s[f].object.visible=!1}}toJSON(n){const s=super.toJSON(n);this.autoUpdate===!1&&(s.object.autoUpdate=!1),s.object.levels=[];const u=this.levels;for(let f=0,w=u.length;f<w;f++){const T=u[f];s.object.levels.push({object:T.object.uuid,distance:T.distance,hysteresis:T.hysteresis})}return s}}const bb=new Qe,Sb=new hr,Tb=new hr,G5=new Qe,Ib=new Jn;class Rb extends eo{constructor(n,s){super(n,s),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Jn,this.bindMatrixInverse=new Jn}copy(n,s){return super.copy(n,s),this.bindMode=n.bindMode,this.bindMatrix.copy(n.bindMatrix),this.bindMatrixInverse.copy(n.bindMatrixInverse),this.skeleton=n.skeleton,this}bind(n,s){this.skeleton=n,s===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),s=this.matrixWorld),this.bindMatrix.copy(s),this.bindMatrixInverse.copy(s).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const n=new hr,s=this.geometry.attributes.skinWeight;for(let u=0,f=s.count;u<f;u++){n.fromBufferAttribute(s,u);const w=1/n.manhattanLength();w!==1/0?n.multiplyScalar(w):n.set(1,0,0,0),s.setXYZW(u,n.x,n.y,n.z,n.w)}}updateMatrixWorld(n){super.updateMatrixWorld(n),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(n,s){const u=this.skeleton,f=this.geometry;Sb.fromBufferAttribute(f.attributes.skinIndex,n),Tb.fromBufferAttribute(f.attributes.skinWeight,n),bb.copy(s).applyMatrix4(this.bindMatrix),s.set(0,0,0);for(let w=0;w<4;w++){const T=Tb.getComponent(w);if(T!==0){const I=Sb.getComponent(w);Ib.multiplyMatrices(u.bones[I].matrixWorld,u.boneInverses[I]),s.addScaledVector(G5.copy(bb).applyMatrix4(Ib),T)}}return s.applyMatrix4(this.bindMatrixInverse)}}class mE extends dr{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Bp extends yr{constructor(n=null,s=1,u=1,f,w,T,I,F,U=le,G=le,V,j){super(null,T,I,F,U,G,f,w,V,j),this.isDataTexture=!0,this.image={data:n,width:s,height:u},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const Bb=new Jn,H5=new Jn;class Ov{constructor(n=[],s=[]){this.uuid=Eo(),this.bones=n.slice(0),this.boneInverses=s,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const n=this.bones,s=this.boneInverses;if(this.boneMatrices=new Float32Array(n.length*16),s.length===0)this.calculateInverses();else if(n.length!==s.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let u=0,f=this.bones.length;u<f;u++)this.boneInverses.push(new Jn)}}calculateInverses(){this.boneInverses.length=0;for(let n=0,s=this.bones.length;n<s;n++){const u=new Jn;this.bones[n]&&u.copy(this.bones[n].matrixWorld).invert(),this.boneInverses.push(u)}}pose(){for(let n=0,s=this.bones.length;n<s;n++){const u=this.bones[n];u&&u.matrixWorld.copy(this.boneInverses[n]).invert()}for(let n=0,s=this.bones.length;n<s;n++){const u=this.bones[n];u&&(u.parent&&u.parent.isBone?(u.matrix.copy(u.parent.matrixWorld).invert(),u.matrix.multiply(u.matrixWorld)):u.matrix.copy(u.matrixWorld),u.matrix.decompose(u.position,u.quaternion,u.scale))}}update(){const n=this.bones,s=this.boneInverses,u=this.boneMatrices,f=this.boneTexture;for(let w=0,T=n.length;w<T;w++){const I=n[w]?n[w].matrixWorld:H5;Bb.multiplyMatrices(I,s[w]),Bb.toArray(u,w*16)}f!==null&&(f.needsUpdate=!0)}clone(){return new Ov(this.bones,this.boneInverses)}computeBoneTexture(){let n=Math.sqrt(this.bones.length*4);n=ba(n),n=Math.max(n,4);const s=new Float32Array(n*n*4);s.set(this.boneMatrices);const u=new Bp(s,n,n,At,vn);return u.needsUpdate=!0,this.boneMatrices=s,this.boneTexture=u,this.boneTextureSize=n,this}getBoneByName(n){for(let s=0,u=this.bones.length;s<u;s++){const f=this.bones[s];if(f.name===n)return f}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(n,s){this.uuid=n.uuid;for(let u=0,f=n.bones.length;u<f;u++){const w=n.bones[u];let T=s[w];T===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",w),T=new mE),this.bones.push(T),this.boneInverses.push(new Jn().fromArray(n.boneInverses[u]))}return this.init(),this}toJSON(){const n={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};n.uuid=this.uuid;const s=this.bones,u=this.boneInverses;for(let f=0,w=s.length;f<w;f++){const T=s[f];n.bones.push(T.uuid);const I=u[f];n.boneInverses.push(I.toArray())}return n}}class Lp extends Hr{constructor(n,s,u,f=1){super(n,s,u),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=f}copy(n){return super.copy(n),this.meshPerAttribute=n.meshPerAttribute,this}toJSON(){const n=super.toJSON();return n.meshPerAttribute=this.meshPerAttribute,n.isInstancedBufferAttribute=!0,n}}const Lb=new Jn,Db=new Jn,Fv=[],V5=new Jn,Fg=new eo;class Pb extends eo{constructor(n,s,u){super(n,s),this.isInstancedMesh=!0,this.instanceMatrix=new Lp(new Float32Array(u*16),16),this.instanceColor=null,this.count=u,this.frustumCulled=!1;for(let f=0;f<u;f++)this.setMatrixAt(f,V5)}copy(n,s){return super.copy(n,s),this.instanceMatrix.copy(n.instanceMatrix),n.instanceColor!==null&&(this.instanceColor=n.instanceColor.clone()),this.count=n.count,this}getColorAt(n,s){s.fromArray(this.instanceColor.array,n*3)}getMatrixAt(n,s){s.fromArray(this.instanceMatrix.array,n*16)}raycast(n,s){const u=this.matrixWorld,f=this.count;if(Fg.geometry=this.geometry,Fg.material=this.material,Fg.material!==void 0)for(let w=0;w<f;w++){this.getMatrixAt(w,Lb),Db.multiplyMatrices(u,Lb),Fg.matrixWorld=Db,Fg.raycast(n,Fv);for(let T=0,I=Fv.length;T<I;T++){const F=Fv[T];F.instanceId=w,F.object=this,s.push(F)}Fv.length=0}}setColorAt(n,s){this.instanceColor===null&&(this.instanceColor=new Lp(new Float32Array(this.instanceMatrix.count*3),3)),s.toArray(this.instanceColor.array,n*3)}setMatrixAt(n,s){s.toArray(this.instanceMatrix.array,n*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class ma extends bo{constructor(n){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new kn(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(n)}copy(n){return super.copy(n),this.color.copy(n.color),this.linewidth=n.linewidth,this.linecap=n.linecap,this.linejoin=n.linejoin,this.fog=n.fog,this}}const Ob=new Qe,Fb=new Qe,Nb=new Jn,gE=new Ys,Nv=new Ba;class Mh extends dr{constructor(n=new Wi,s=new ma){super(),this.isLine=!0,this.type="Line",this.geometry=n,this.material=s,this.updateMorphTargets()}copy(n,s){return super.copy(n,s),this.material=n.material,this.geometry=n.geometry,this}computeLineDistances(){const n=this.geometry;if(n.index===null){const s=n.attributes.position,u=[0];for(let f=1,w=s.count;f<w;f++)Ob.fromBufferAttribute(s,f-1),Fb.fromBufferAttribute(s,f),u[f]=u[f-1],u[f]+=Ob.distanceTo(Fb);n.setAttribute("lineDistance",new li(u,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(n,s){const u=this.geometry,f=this.matrixWorld,w=n.params.Line.threshold,T=u.drawRange;if(u.boundingSphere===null&&u.computeBoundingSphere(),Nv.copy(u.boundingSphere),Nv.applyMatrix4(f),Nv.radius+=w,n.ray.intersectsSphere(Nv)===!1)return;Nb.copy(f).invert(),gE.copy(n.ray).applyMatrix4(Nb);const I=w/((this.scale.x+this.scale.y+this.scale.z)/3),F=I*I,U=new Qe,G=new Qe,V=new Qe,j=new Qe,Y=this.isLineSegments?2:1,re=u.index,$=u.attributes.position;if(re!==null){const de=Math.max(0,T.start),Ce=Math.min(re.count,T.start+T.count);for(let ge=de,we=Ce-1;ge<we;ge+=Y){const Le=re.getX(ge),Ye=re.getX(ge+1);if(U.fromBufferAttribute($,Le),G.fromBufferAttribute($,Ye),gE.distanceSqToSegment(U,G,j,V)>F)continue;j.applyMatrix4(this.matrixWorld);const Me=n.ray.origin.distanceTo(j);Me<n.near||Me>n.far||s.push({distance:Me,point:V.clone().applyMatrix4(this.matrixWorld),index:ge,face:null,faceIndex:null,object:this})}}else{const de=Math.max(0,T.start),Ce=Math.min($.count,T.start+T.count);for(let ge=de,we=Ce-1;ge<we;ge+=Y){if(U.fromBufferAttribute($,ge),G.fromBufferAttribute($,ge+1),gE.distanceSqToSegment(U,G,j,V)>F)continue;j.applyMatrix4(this.matrixWorld);const Ye=n.ray.origin.distanceTo(j);Ye<n.near||Ye>n.far||s.push({distance:Ye,point:V.clone().applyMatrix4(this.matrixWorld),index:ge,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const s=this.geometry.morphAttributes,u=Object.keys(s);if(u.length>0){const f=s[u[0]];if(f!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let w=0,T=f.length;w<T;w++){const I=f[w].name||String(w);this.morphTargetInfluences.push(0),this.morphTargetDictionary[I]=w}}}}}const kb=new Qe,Ub=new Qe;class $c extends Mh{constructor(n,s){super(n,s),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const n=this.geometry;if(n.index===null){const s=n.attributes.position,u=[];for(let f=0,w=s.count;f<w;f+=2)kb.fromBufferAttribute(s,f),Ub.fromBufferAttribute(s,f+1),u[f]=f===0?0:u[f-1],u[f+1]=u[f]+kb.distanceTo(Ub);n.setAttribute("lineDistance",new li(u,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class zb extends Mh{constructor(n,s){super(n,s),this.isLineLoop=!0,this.type="LineLoop"}}class AE extends bo{constructor(n){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new kn(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(n)}copy(n){return super.copy(n),this.color.copy(n.color),this.map=n.map,this.alphaMap=n.alphaMap,this.size=n.size,this.sizeAttenuation=n.sizeAttenuation,this.fog=n.fog,this}}const Gb=new Jn,vE=new Ys,kv=new Ba,Uv=new Qe;class Hb extends dr{constructor(n=new Wi,s=new AE){super(),this.isPoints=!0,this.type="Points",this.geometry=n,this.material=s,this.updateMorphTargets()}copy(n,s){return super.copy(n,s),this.material=n.material,this.geometry=n.geometry,this}raycast(n,s){const u=this.geometry,f=this.matrixWorld,w=n.params.Points.threshold,T=u.drawRange;if(u.boundingSphere===null&&u.computeBoundingSphere(),kv.copy(u.boundingSphere),kv.applyMatrix4(f),kv.radius+=w,n.ray.intersectsSphere(kv)===!1)return;Gb.copy(f).invert(),vE.copy(n.ray).applyMatrix4(Gb);const I=w/((this.scale.x+this.scale.y+this.scale.z)/3),F=I*I,U=u.index,V=u.attributes.position;if(U!==null){const j=Math.max(0,T.start),Y=Math.min(U.count,T.start+T.count);for(let re=j,ie=Y;re<ie;re++){const $=U.getX(re);Uv.fromBufferAttribute(V,$),Vb(Uv,$,F,f,n,s,this)}}else{const j=Math.max(0,T.start),Y=Math.min(V.count,T.start+T.count);for(let re=j,ie=Y;re<ie;re++)Uv.fromBufferAttribute(V,re),Vb(Uv,re,F,f,n,s,this)}}updateMorphTargets(){const s=this.geometry.morphAttributes,u=Object.keys(s);if(u.length>0){const f=s[u[0]];if(f!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let w=0,T=f.length;w<T;w++){const I=f[w].name||String(w);this.morphTargetInfluences.push(0),this.morphTargetDictionary[I]=w}}}}}function Vb(B,n,s,u,f,w,T){const I=vE.distanceSqToPoint(B);if(I<s){const F=new Qe;vE.closestPointToPoint(B,F),F.applyMatrix4(u);const U=f.ray.origin.distanceTo(F);if(U<f.near||U>f.far)return;w.push({distance:U,distanceToRay:Math.sqrt(I),point:F,index:n,face:null,object:T})}}class Q5 extends yr{constructor(n,s,u,f,w,T,I,F,U){super(n,s,u,f,w,T,I,F,U),this.isVideoTexture=!0,this.minFilter=T!==void 0?T:Te,this.magFilter=w!==void 0?w:Te,this.generateMipmaps=!1;const G=this;function V(){G.needsUpdate=!0,n.requestVideoFrameCallback(V)}"requestVideoFrameCallback"in n&&n.requestVideoFrameCallback(V)}clone(){return new this.constructor(this.image).copy(this)}update(){const n=this.image;"requestVideoFrameCallback"in n===!1&&n.readyState>=n.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class W5 extends yr{constructor(n,s,u){super({width:n,height:s}),this.isFramebufferTexture=!0,this.format=u,this.magFilter=le,this.minFilter=le,this.generateMipmaps=!1,this.needsUpdate=!0}}class yE extends yr{constructor(n,s,u,f,w,T,I,F,U,G,V,j){super(null,T,I,F,U,G,f,w,V,j),this.isCompressedTexture=!0,this.image={width:s,height:u},this.mipmaps=n,this.flipY=!1,this.generateMipmaps=!1}}class j5 extends yE{constructor(n,s,u,f,w,T){super(n,s,u,w,T),this.isCompressedArrayTexture=!0,this.image.depth=f,this.wrapR=Oe}}class X5 extends yr{constructor(n,s,u,f,w,T,I,F,U){super(n,s,u,f,w,T,I,F,U),this.isCanvasTexture=!0,this.needsUpdate=!0}}class tc{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(n,s){const u=this.getUtoTmapping(n);return this.getPoint(u,s)}getPoints(n=5){const s=[];for(let u=0;u<=n;u++)s.push(this.getPoint(u/n));return s}getSpacedPoints(n=5){const s=[];for(let u=0;u<=n;u++)s.push(this.getPointAt(u/n));return s}getLength(){const n=this.getLengths();return n[n.length-1]}getLengths(n=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===n+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const s=[];let u,f=this.getPoint(0),w=0;s.push(0);for(let T=1;T<=n;T++)u=this.getPoint(T/n),w+=u.distanceTo(f),s.push(w),f=u;return this.cacheArcLengths=s,s}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(n,s){const u=this.getLengths();let f=0;const w=u.length;let T;s?T=s:T=n*u[w-1];let I=0,F=w-1,U;for(;I<=F;)if(f=Math.floor(I+(F-I)/2),U=u[f]-T,U<0)I=f+1;else if(U>0)F=f-1;else{F=f;break}if(f=F,u[f]===T)return f/(w-1);const G=u[f],j=u[f+1]-G,Y=(T-G)/j;return(f+Y)/(w-1)}getTangent(n,s){let f=n-1e-4,w=n+1e-4;f<0&&(f=0),w>1&&(w=1);const T=this.getPoint(f),I=this.getPoint(w),F=s||(T.isVector2?new jt:new Qe);return F.copy(I).sub(T).normalize(),F}getTangentAt(n,s){const u=this.getUtoTmapping(n);return this.getTangent(u,s)}computeFrenetFrames(n,s){const u=new Qe,f=[],w=[],T=[],I=new Qe,F=new Jn;for(let Y=0;Y<=n;Y++){const re=Y/n;f[Y]=this.getTangentAt(re,new Qe)}w[0]=new Qe,T[0]=new Qe;let U=Number.MAX_VALUE;const G=Math.abs(f[0].x),V=Math.abs(f[0].y),j=Math.abs(f[0].z);G<=U&&(U=G,u.set(1,0,0)),V<=U&&(U=V,u.set(0,1,0)),j<=U&&u.set(0,0,1),I.crossVectors(f[0],u).normalize(),w[0].crossVectors(f[0],I),T[0].crossVectors(f[0],w[0]);for(let Y=1;Y<=n;Y++){if(w[Y]=w[Y-1].clone(),T[Y]=T[Y-1].clone(),I.crossVectors(f[Y-1],f[Y]),I.length()>Number.EPSILON){I.normalize();const re=Math.acos(Jr(f[Y-1].dot(f[Y]),-1,1));w[Y].applyMatrix4(F.makeRotationAxis(I,re))}T[Y].crossVectors(f[Y],w[Y])}if(s===!0){let Y=Math.acos(Jr(w[0].dot(w[n]),-1,1));Y/=n,f[0].dot(I.crossVectors(w[0],w[n]))>0&&(Y=-Y);for(let re=1;re<=n;re++)w[re].applyMatrix4(F.makeRotationAxis(f[re],Y*re)),T[re].crossVectors(f[re],w[re])}return{tangents:f,normals:w,binormals:T}}clone(){return new this.constructor().copy(this)}copy(n){return this.arcLengthDivisions=n.arcLengthDivisions,this}toJSON(){const n={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return n.arcLengthDivisions=this.arcLengthDivisions,n.type=this.type,n}fromJSON(n){return this.arcLengthDivisions=n.arcLengthDivisions,this}}class zv extends tc{constructor(n=0,s=0,u=1,f=1,w=0,T=Math.PI*2,I=!1,F=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=n,this.aY=s,this.xRadius=u,this.yRadius=f,this.aStartAngle=w,this.aEndAngle=T,this.aClockwise=I,this.aRotation=F}getPoint(n,s){const u=s||new jt,f=Math.PI*2;let w=this.aEndAngle-this.aStartAngle;const T=Math.abs(w)<Number.EPSILON;for(;w<0;)w+=f;for(;w>f;)w-=f;w<Number.EPSILON&&(T?w=0:w=f),this.aClockwise===!0&&!T&&(w===f?w=-f:w=w-f);const I=this.aStartAngle+n*w;let F=this.aX+this.xRadius*Math.cos(I),U=this.aY+this.yRadius*Math.sin(I);if(this.aRotation!==0){const G=Math.cos(this.aRotation),V=Math.sin(this.aRotation),j=F-this.aX,Y=U-this.aY;F=j*G-Y*V+this.aX,U=j*V+Y*G+this.aY}return u.set(F,U)}copy(n){return super.copy(n),this.aX=n.aX,this.aY=n.aY,this.xRadius=n.xRadius,this.yRadius=n.yRadius,this.aStartAngle=n.aStartAngle,this.aEndAngle=n.aEndAngle,this.aClockwise=n.aClockwise,this.aRotation=n.aRotation,this}toJSON(){const n=super.toJSON();return n.aX=this.aX,n.aY=this.aY,n.xRadius=this.xRadius,n.yRadius=this.yRadius,n.aStartAngle=this.aStartAngle,n.aEndAngle=this.aEndAngle,n.aClockwise=this.aClockwise,n.aRotation=this.aRotation,n}fromJSON(n){return super.fromJSON(n),this.aX=n.aX,this.aY=n.aY,this.xRadius=n.xRadius,this.yRadius=n.yRadius,this.aStartAngle=n.aStartAngle,this.aEndAngle=n.aEndAngle,this.aClockwise=n.aClockwise,this.aRotation=n.aRotation,this}}class Qb extends zv{constructor(n,s,u,f,w,T){super(n,s,u,u,f,w,T),this.isArcCurve=!0,this.type="ArcCurve"}}function xE(){let B=0,n=0,s=0,u=0;function f(w,T,I,F){B=w,n=I,s=-3*w+3*T-2*I-F,u=2*w-2*T+I+F}return{initCatmullRom:function(w,T,I,F,U){f(T,I,U*(I-w),U*(F-T))},initNonuniformCatmullRom:function(w,T,I,F,U,G,V){let j=(T-w)/U-(I-w)/(U+G)+(I-T)/G,Y=(I-T)/G-(F-T)/(G+V)+(F-I)/V;j*=G,Y*=G,f(T,I,j,Y)},calc:function(w){const T=w*w,I=T*w;return B+n*w+s*T+u*I}}}const Gv=new Qe,EE=new xE,_E=new xE,wE=new xE;class Wb extends tc{constructor(n=[],s=!1,u="centripetal",f=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=n,this.closed=s,this.curveType=u,this.tension=f}getPoint(n,s=new Qe){const u=s,f=this.points,w=f.length,T=(w-(this.closed?0:1))*n;let I=Math.floor(T),F=T-I;this.closed?I+=I>0?0:(Math.floor(Math.abs(I)/w)+1)*w:F===0&&I===w-1&&(I=w-2,F=1);let U,G;this.closed||I>0?U=f[(I-1)%w]:(Gv.subVectors(f[0],f[1]).add(f[0]),U=Gv);const V=f[I%w],j=f[(I+1)%w];if(this.closed||I+2<w?G=f[(I+2)%w]:(Gv.subVectors(f[w-1],f[w-2]).add(f[w-1]),G=Gv),this.curveType==="centripetal"||this.curveType==="chordal"){const Y=this.curveType==="chordal"?.5:.25;let re=Math.pow(U.distanceToSquared(V),Y),ie=Math.pow(V.distanceToSquared(j),Y),$=Math.pow(j.distanceToSquared(G),Y);ie<1e-4&&(ie=1),re<1e-4&&(re=ie),$<1e-4&&($=ie),EE.initNonuniformCatmullRom(U.x,V.x,j.x,G.x,re,ie,$),_E.initNonuniformCatmullRom(U.y,V.y,j.y,G.y,re,ie,$),wE.initNonuniformCatmullRom(U.z,V.z,j.z,G.z,re,ie,$)}else this.curveType==="catmullrom"&&(EE.initCatmullRom(U.x,V.x,j.x,G.x,this.tension),_E.initCatmullRom(U.y,V.y,j.y,G.y,this.tension),wE.initCatmullRom(U.z,V.z,j.z,G.z,this.tension));return u.set(EE.calc(F),_E.calc(F),wE.calc(F)),u}copy(n){super.copy(n),this.points=[];for(let s=0,u=n.points.length;s<u;s++){const f=n.points[s];this.points.push(f.clone())}return this.closed=n.closed,this.curveType=n.curveType,this.tension=n.tension,this}toJSON(){const n=super.toJSON();n.points=[];for(let s=0,u=this.points.length;s<u;s++){const f=this.points[s];n.points.push(f.toArray())}return n.closed=this.closed,n.curveType=this.curveType,n.tension=this.tension,n}fromJSON(n){super.fromJSON(n),this.points=[];for(let s=0,u=n.points.length;s<u;s++){const f=n.points[s];this.points.push(new Qe().fromArray(f))}return this.closed=n.closed,this.curveType=n.curveType,this.tension=n.tension,this}}function jb(B,n,s,u,f){const w=(u-n)*.5,T=(f-s)*.5,I=B*B,F=B*I;return(2*s-2*u+w+T)*F+(-3*s+3*u-2*w-T)*I+w*B+s}function K5(B,n){const s=1-B;return s*s*n}function Y5(B,n){return 2*(1-B)*B*n}function q5(B,n){return B*B*n}function Ng(B,n,s,u){return K5(B,n)+Y5(B,s)+q5(B,u)}function J5(B,n){const s=1-B;return s*s*s*n}function Z5(B,n){const s=1-B;return 3*s*s*B*n}function $5(B,n){return 3*(1-B)*B*B*n}function eO(B,n){return B*B*B*n}function kg(B,n,s,u,f){return J5(B,n)+Z5(B,s)+$5(B,u)+eO(B,f)}class CE extends tc{constructor(n=new jt,s=new jt,u=new jt,f=new jt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=n,this.v1=s,this.v2=u,this.v3=f}getPoint(n,s=new jt){const u=s,f=this.v0,w=this.v1,T=this.v2,I=this.v3;return u.set(kg(n,f.x,w.x,T.x,I.x),kg(n,f.y,w.y,T.y,I.y)),u}copy(n){return super.copy(n),this.v0.copy(n.v0),this.v1.copy(n.v1),this.v2.copy(n.v2),this.v3.copy(n.v3),this}toJSON(){const n=super.toJSON();return n.v0=this.v0.toArray(),n.v1=this.v1.toArray(),n.v2=this.v2.toArray(),n.v3=this.v3.toArray(),n}fromJSON(n){return super.fromJSON(n),this.v0.fromArray(n.v0),this.v1.fromArray(n.v1),this.v2.fromArray(n.v2),this.v3.fromArray(n.v3),this}}class Xb extends tc{constructor(n=new Qe,s=new Qe,u=new Qe,f=new Qe){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=n,this.v1=s,this.v2=u,this.v3=f}getPoint(n,s=new Qe){const u=s,f=this.v0,w=this.v1,T=this.v2,I=this.v3;return u.set(kg(n,f.x,w.x,T.x,I.x),kg(n,f.y,w.y,T.y,I.y),kg(n,f.z,w.z,T.z,I.z)),u}copy(n){return super.copy(n),this.v0.copy(n.v0),this.v1.copy(n.v1),this.v2.copy(n.v2),this.v3.copy(n.v3),this}toJSON(){const n=super.toJSON();return n.v0=this.v0.toArray(),n.v1=this.v1.toArray(),n.v2=this.v2.toArray(),n.v3=this.v3.toArray(),n}fromJSON(n){return super.fromJSON(n),this.v0.fromArray(n.v0),this.v1.fromArray(n.v1),this.v2.fromArray(n.v2),this.v3.fromArray(n.v3),this}}class Hv extends tc{constructor(n=new jt,s=new jt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=n,this.v2=s}getPoint(n,s=new jt){const u=s;return n===1?u.copy(this.v2):(u.copy(this.v2).sub(this.v1),u.multiplyScalar(n).add(this.v1)),u}getPointAt(n,s){return this.getPoint(n,s)}getTangent(n,s){const u=s||new jt;return u.copy(this.v2).sub(this.v1).normalize(),u}copy(n){return super.copy(n),this.v1.copy(n.v1),this.v2.copy(n.v2),this}toJSON(){const n=super.toJSON();return n.v1=this.v1.toArray(),n.v2=this.v2.toArray(),n}fromJSON(n){return super.fromJSON(n),this.v1.fromArray(n.v1),this.v2.fromArray(n.v2),this}}class Kb extends tc{constructor(n=new Qe,s=new Qe){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=n,this.v2=s}getPoint(n,s=new Qe){const u=s;return n===1?u.copy(this.v2):(u.copy(this.v2).sub(this.v1),u.multiplyScalar(n).add(this.v1)),u}getPointAt(n,s){return this.getPoint(n,s)}copy(n){return super.copy(n),this.v1.copy(n.v1),this.v2.copy(n.v2),this}toJSON(){const n=super.toJSON();return n.v1=this.v1.toArray(),n.v2=this.v2.toArray(),n}fromJSON(n){return super.fromJSON(n),this.v1.fromArray(n.v1),this.v2.fromArray(n.v2),this}}class ME extends tc{constructor(n=new jt,s=new jt,u=new jt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=n,this.v1=s,this.v2=u}getPoint(n,s=new jt){const u=s,f=this.v0,w=this.v1,T=this.v2;return u.set(Ng(n,f.x,w.x,T.x),Ng(n,f.y,w.y,T.y)),u}copy(n){return super.copy(n),this.v0.copy(n.v0),this.v1.copy(n.v1),this.v2.copy(n.v2),this}toJSON(){const n=super.toJSON();return n.v0=this.v0.toArray(),n.v1=this.v1.toArray(),n.v2=this.v2.toArray(),n}fromJSON(n){return super.fromJSON(n),this.v0.fromArray(n.v0),this.v1.fromArray(n.v1),this.v2.fromArray(n.v2),this}}class bE extends tc{constructor(n=new Qe,s=new Qe,u=new Qe){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=n,this.v1=s,this.v2=u}getPoint(n,s=new Qe){const u=s,f=this.v0,w=this.v1,T=this.v2;return u.set(Ng(n,f.x,w.x,T.x),Ng(n,f.y,w.y,T.y),Ng(n,f.z,w.z,T.z)),u}copy(n){return super.copy(n),this.v0.copy(n.v0),this.v1.copy(n.v1),this.v2.copy(n.v2),this}toJSON(){const n=super.toJSON();return n.v0=this.v0.toArray(),n.v1=this.v1.toArray(),n.v2=this.v2.toArray(),n}fromJSON(n){return super.fromJSON(n),this.v0.fromArray(n.v0),this.v1.fromArray(n.v1),this.v2.fromArray(n.v2),this}}class SE extends tc{constructor(n=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=n}getPoint(n,s=new jt){const u=s,f=this.points,w=(f.length-1)*n,T=Math.floor(w),I=w-T,F=f[T===0?T:T-1],U=f[T],G=f[T>f.length-2?f.length-1:T+1],V=f[T>f.length-3?f.length-1:T+2];return u.set(jb(I,F.x,U.x,G.x,V.x),jb(I,F.y,U.y,G.y,V.y)),u}copy(n){super.copy(n),this.points=[];for(let s=0,u=n.points.length;s<u;s++){const f=n.points[s];this.points.push(f.clone())}return this}toJSON(){const n=super.toJSON();n.points=[];for(let s=0,u=this.points.length;s<u;s++){const f=this.points[s];n.points.push(f.toArray())}return n}fromJSON(n){super.fromJSON(n),this.points=[];for(let s=0,u=n.points.length;s<u;s++){const f=n.points[s];this.points.push(new jt().fromArray(f))}return this}}var TE=Object.freeze({__proto__:null,ArcCurve:Qb,CatmullRomCurve3:Wb,CubicBezierCurve:CE,CubicBezierCurve3:Xb,EllipseCurve:zv,LineCurve:Hv,LineCurve3:Kb,QuadraticBezierCurve:ME,QuadraticBezierCurve3:bE,SplineCurve:SE});class Yb extends tc{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(n){this.curves.push(n)}closePath(){const n=this.curves[0].getPoint(0),s=this.curves[this.curves.length-1].getPoint(1);n.equals(s)||this.curves.push(new Hv(s,n))}getPoint(n,s){const u=n*this.getLength(),f=this.getCurveLengths();let w=0;for(;w<f.length;){if(f[w]>=u){const T=f[w]-u,I=this.curves[w],F=I.getLength(),U=F===0?0:1-T/F;return I.getPointAt(U,s)}w++}return null}getLength(){const n=this.getCurveLengths();return n[n.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const n=[];let s=0;for(let u=0,f=this.curves.length;u<f;u++)s+=this.curves[u].getLength(),n.push(s);return this.cacheLengths=n,n}getSpacedPoints(n=40){const s=[];for(let u=0;u<=n;u++)s.push(this.getPoint(u/n));return this.autoClose&&s.push(s[0]),s}getPoints(n=12){const s=[];let u;for(let f=0,w=this.curves;f<w.length;f++){const T=w[f],I=T.isEllipseCurve?n*2:T.isLineCurve||T.isLineCurve3?1:T.isSplineCurve?n*T.points.length:n,F=T.getPoints(I);for(let U=0;U<F.length;U++){const G=F[U];u&&u.equals(G)||(s.push(G),u=G)}}return this.autoClose&&s.length>1&&!s[s.length-1].equals(s[0])&&s.push(s[0]),s}copy(n){super.copy(n),this.curves=[];for(let s=0,u=n.curves.length;s<u;s++){const f=n.curves[s];this.curves.push(f.clone())}return this.autoClose=n.autoClose,this}toJSON(){const n=super.toJSON();n.autoClose=this.autoClose,n.curves=[];for(let s=0,u=this.curves.length;s<u;s++){const f=this.curves[s];n.curves.push(f.toJSON())}return n}fromJSON(n){super.fromJSON(n),this.autoClose=n.autoClose,this.curves=[];for(let s=0,u=n.curves.length;s<u;s++){const f=n.curves[s];this.curves.push(new TE[f.type]().fromJSON(f))}return this}}class Ug extends Yb{constructor(n){super(),this.type="Path",this.currentPoint=new jt,n&&this.setFromPoints(n)}setFromPoints(n){this.moveTo(n[0].x,n[0].y);for(let s=1,u=n.length;s<u;s++)this.lineTo(n[s].x,n[s].y);return this}moveTo(n,s){return this.currentPoint.set(n,s),this}lineTo(n,s){const u=new Hv(this.currentPoint.clone(),new jt(n,s));return this.curves.push(u),this.currentPoint.set(n,s),this}quadraticCurveTo(n,s,u,f){const w=new ME(this.currentPoint.clone(),new jt(n,s),new jt(u,f));return this.curves.push(w),this.currentPoint.set(u,f),this}bezierCurveTo(n,s,u,f,w,T){const I=new CE(this.currentPoint.clone(),new jt(n,s),new jt(u,f),new jt(w,T));return this.curves.push(I),this.currentPoint.set(w,T),this}splineThru(n){const s=[this.currentPoint.clone()].concat(n),u=new SE(s);return this.curves.push(u),this.currentPoint.copy(n[n.length-1]),this}arc(n,s,u,f,w,T){const I=this.currentPoint.x,F=this.currentPoint.y;return this.absarc(n+I,s+F,u,f,w,T),this}absarc(n,s,u,f,w,T){return this.absellipse(n,s,u,u,f,w,T),this}ellipse(n,s,u,f,w,T,I,F){const U=this.currentPoint.x,G=this.currentPoint.y;return this.absellipse(n+U,s+G,u,f,w,T,I,F),this}absellipse(n,s,u,f,w,T,I,F){const U=new zv(n,s,u,f,w,T,I,F);if(this.curves.length>0){const V=U.getPoint(0);V.equals(this.currentPoint)||this.lineTo(V.x,V.y)}this.curves.push(U);const G=U.getPoint(1);return this.currentPoint.copy(G),this}copy(n){return super.copy(n),this.currentPoint.copy(n.currentPoint),this}toJSON(){const n=super.toJSON();return n.currentPoint=this.currentPoint.toArray(),n}fromJSON(n){return super.fromJSON(n),this.currentPoint.fromArray(n.currentPoint),this}}class Dp extends Wi{constructor(n=[new jt(0,-.5),new jt(.5,0),new jt(0,.5)],s=12,u=0,f=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:n,segments:s,phiStart:u,phiLength:f},s=Math.floor(s),f=Jr(f,0,Math.PI*2);const w=[],T=[],I=[],F=[],U=[],G=1/s,V=new Qe,j=new jt,Y=new Qe,re=new Qe,ie=new Qe;let $=0,de=0;for(let Ce=0;Ce<=n.length-1;Ce++)switch(Ce){case 0:$=n[Ce+1].x-n[Ce].x,de=n[Ce+1].y-n[Ce].y,Y.x=de*1,Y.y=-$,Y.z=de*0,ie.copy(Y),Y.normalize(),F.push(Y.x,Y.y,Y.z);break;case n.length-1:F.push(ie.x,ie.y,ie.z);break;default:$=n[Ce+1].x-n[Ce].x,de=n[Ce+1].y-n[Ce].y,Y.x=de*1,Y.y=-$,Y.z=de*0,re.copy(Y),Y.x+=ie.x,Y.y+=ie.y,Y.z+=ie.z,Y.normalize(),F.push(Y.x,Y.y,Y.z),ie.copy(re)}for(let Ce=0;Ce<=s;Ce++){const ge=u+Ce*G*f,we=Math.sin(ge),Le=Math.cos(ge);for(let Ye=0;Ye<=n.length-1;Ye++){V.x=n[Ye].x*we,V.y=n[Ye].y,V.z=n[Ye].x*Le,T.push(V.x,V.y,V.z),j.x=Ce/s,j.y=Ye/(n.length-1),I.push(j.x,j.y);const it=F[3*Ye+0]*we,Me=F[3*Ye+1],Je=F[3*Ye+0]*Le;U.push(it,Me,Je)}}for(let Ce=0;Ce<s;Ce++)for(let ge=0;ge<n.length-1;ge++){const we=ge+Ce*n.length,Le=we,Ye=we+n.length,it=we+n.length+1,Me=we+1;w.push(Le,Ye,Me),w.push(it,Me,Ye)}this.setIndex(w),this.setAttribute("position",new li(T,3)),this.setAttribute("uv",new li(I,2)),this.setAttribute("normal",new li(U,3))}static fromJSON(n){return new Dp(n.points,n.segments,n.phiStart,n.phiLength)}}class zg extends Dp{constructor(n=1,s=1,u=4,f=8){const w=new Ug;w.absarc(0,-s/2,n,Math.PI*1.5,0),w.absarc(0,s/2,n,0,Math.PI*.5),super(w.getPoints(u),f),this.type="CapsuleGeometry",this.parameters={radius:n,height:s,capSegments:u,radialSegments:f}}static fromJSON(n){return new zg(n.radius,n.length,n.capSegments,n.radialSegments)}}class Gg extends Wi{constructor(n=1,s=8,u=0,f=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:n,segments:s,thetaStart:u,thetaLength:f},s=Math.max(3,s);const w=[],T=[],I=[],F=[],U=new Qe,G=new jt;T.push(0,0,0),I.push(0,0,1),F.push(.5,.5);for(let V=0,j=3;V<=s;V++,j+=3){const Y=u+V/s*f;U.x=n*Math.cos(Y),U.y=n*Math.sin(Y),T.push(U.x,U.y,U.z),I.push(0,0,1),G.x=(T[j]/n+1)/2,G.y=(T[j+1]/n+1)/2,F.push(G.x,G.y)}for(let V=1;V<=s;V++)w.push(V,V+1,0);this.setIndex(w),this.setAttribute("position",new li(T,3)),this.setAttribute("normal",new li(I,3)),this.setAttribute("uv",new li(F,2))}static fromJSON(n){return new Gg(n.radius,n.segments,n.thetaStart,n.thetaLength)}}class Vd extends Wi{constructor(n=1,s=1,u=1,f=8,w=1,T=!1,I=0,F=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:n,radiusBottom:s,height:u,radialSegments:f,heightSegments:w,openEnded:T,thetaStart:I,thetaLength:F};const U=this;f=Math.floor(f),w=Math.floor(w);const G=[],V=[],j=[],Y=[];let re=0;const ie=[],$=u/2;let de=0;Ce(),T===!1&&(n>0&&ge(!0),s>0&&ge(!1)),this.setIndex(G),this.setAttribute("position",new li(V,3)),this.setAttribute("normal",new li(j,3)),this.setAttribute("uv",new li(Y,2));function Ce(){const we=new Qe,Le=new Qe;let Ye=0;const it=(s-n)/u;for(let Me=0;Me<=w;Me++){const Je=[],tt=Me/w,mt=tt*(s-n)+n;for(let Pt=0;Pt<=f;Pt++){const yt=Pt/f,dt=yt*F+I,St=Math.sin(dt),rn=Math.cos(dt);Le.x=mt*St,Le.y=-tt*u+$,Le.z=mt*rn,V.push(Le.x,Le.y,Le.z),we.set(St,it,rn).normalize(),j.push(we.x,we.y,we.z),Y.push(yt,1-tt),Je.push(re++)}ie.push(Je)}for(let Me=0;Me<f;Me++)for(let Je=0;Je<w;Je++){const tt=ie[Je][Me],mt=ie[Je+1][Me],Pt=ie[Je+1][Me+1],yt=ie[Je][Me+1];G.push(tt,mt,yt),G.push(mt,Pt,yt),Ye+=6}U.addGroup(de,Ye,0),de+=Ye}function ge(we){const Le=re,Ye=new jt,it=new Qe;let Me=0;const Je=we===!0?n:s,tt=we===!0?1:-1;for(let Pt=1;Pt<=f;Pt++)V.push(0,$*tt,0),j.push(0,tt,0),Y.push(.5,.5),re++;const mt=re;for(let Pt=0;Pt<=f;Pt++){const dt=Pt/f*F+I,St=Math.cos(dt),rn=Math.sin(dt);it.x=Je*rn,it.y=$*tt,it.z=Je*St,V.push(it.x,it.y,it.z),j.push(0,tt,0),Ye.x=St*.5+.5,Ye.y=rn*.5*tt+.5,Y.push(Ye.x,Ye.y),re++}for(let Pt=0;Pt<f;Pt++){const yt=Le+Pt,dt=mt+Pt;we===!0?G.push(dt,dt+1,yt):G.push(dt+1,dt,yt),Me+=3}U.addGroup(de,Me,we===!0?1:2),de+=Me}}static fromJSON(n){return new Vd(n.radiusTop,n.radiusBottom,n.height,n.radialSegments,n.heightSegments,n.openEnded,n.thetaStart,n.thetaLength)}}class Hg extends Vd{constructor(n=1,s=1,u=8,f=1,w=!1,T=0,I=Math.PI*2){super(0,n,s,u,f,w,T,I),this.type="ConeGeometry",this.parameters={radius:n,height:s,radialSegments:u,heightSegments:f,openEnded:w,thetaStart:T,thetaLength:I}}static fromJSON(n){return new Hg(n.radius,n.height,n.radialSegments,n.heightSegments,n.openEnded,n.thetaStart,n.thetaLength)}}class Cu extends Wi{constructor(n=[],s=[],u=1,f=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:n,indices:s,radius:u,detail:f};const w=[],T=[];I(f),U(u),G(),this.setAttribute("position",new li(w,3)),this.setAttribute("normal",new li(w.slice(),3)),this.setAttribute("uv",new li(T,2)),f===0?this.computeVertexNormals():this.normalizeNormals();function I(Ce){const ge=new Qe,we=new Qe,Le=new Qe;for(let Ye=0;Ye<s.length;Ye+=3)Y(s[Ye+0],ge),Y(s[Ye+1],we),Y(s[Ye+2],Le),F(ge,we,Le,Ce)}function F(Ce,ge,we,Le){const Ye=Le+1,it=[];for(let Me=0;Me<=Ye;Me++){it[Me]=[];const Je=Ce.clone().lerp(we,Me/Ye),tt=ge.clone().lerp(we,Me/Ye),mt=Ye-Me;for(let Pt=0;Pt<=mt;Pt++)Pt===0&&Me===Ye?it[Me][Pt]=Je:it[Me][Pt]=Je.clone().lerp(tt,Pt/mt)}for(let Me=0;Me<Ye;Me++)for(let Je=0;Je<2*(Ye-Me)-1;Je++){const tt=Math.floor(Je/2);Je%2===0?(j(it[Me][tt+1]),j(it[Me+1][tt]),j(it[Me][tt])):(j(it[Me][tt+1]),j(it[Me+1][tt+1]),j(it[Me+1][tt]))}}function U(Ce){const ge=new Qe;for(let we=0;we<w.length;we+=3)ge.x=w[we+0],ge.y=w[we+1],ge.z=w[we+2],ge.normalize().multiplyScalar(Ce),w[we+0]=ge.x,w[we+1]=ge.y,w[we+2]=ge.z}function G(){const Ce=new Qe;for(let ge=0;ge<w.length;ge+=3){Ce.x=w[ge+0],Ce.y=w[ge+1],Ce.z=w[ge+2];const we=$(Ce)/2/Math.PI+.5,Le=de(Ce)/Math.PI+.5;T.push(we,1-Le)}re(),V()}function V(){for(let Ce=0;Ce<T.length;Ce+=6){const ge=T[Ce+0],we=T[Ce+2],Le=T[Ce+4],Ye=Math.max(ge,we,Le),it=Math.min(ge,we,Le);Ye>.9&&it<.1&&(ge<.2&&(T[Ce+0]+=1),we<.2&&(T[Ce+2]+=1),Le<.2&&(T[Ce+4]+=1))}}function j(Ce){w.push(Ce.x,Ce.y,Ce.z)}function Y(Ce,ge){const we=Ce*3;ge.x=n[we+0],ge.y=n[we+1],ge.z=n[we+2]}function re(){const Ce=new Qe,ge=new Qe,we=new Qe,Le=new Qe,Ye=new jt,it=new jt,Me=new jt;for(let Je=0,tt=0;Je<w.length;Je+=9,tt+=6){Ce.set(w[Je+0],w[Je+1],w[Je+2]),ge.set(w[Je+3],w[Je+4],w[Je+5]),we.set(w[Je+6],w[Je+7],w[Je+8]),Ye.set(T[tt+0],T[tt+1]),it.set(T[tt+2],T[tt+3]),Me.set(T[tt+4],T[tt+5]),Le.copy(Ce).add(ge).add(we).divideScalar(3);const mt=$(Le);ie(Ye,tt+0,Ce,mt),ie(it,tt+2,ge,mt),ie(Me,tt+4,we,mt)}}function ie(Ce,ge,we,Le){Le<0&&Ce.x===1&&(T[ge]=Ce.x-1),we.x===0&&we.z===0&&(T[ge]=Le/2/Math.PI+.5)}function $(Ce){return Math.atan2(Ce.z,-Ce.x)}function de(Ce){return Math.atan2(-Ce.y,Math.sqrt(Ce.x*Ce.x+Ce.z*Ce.z))}}static fromJSON(n){return new Cu(n.vertices,n.indices,n.radius,n.details)}}class Vg extends Cu{constructor(n=1,s=0){const u=(1+Math.sqrt(5))/2,f=1/u,w=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-f,-u,0,-f,u,0,f,-u,0,f,u,-f,-u,0,-f,u,0,f,-u,0,f,u,0,-u,0,-f,u,0,-f,-u,0,f,u,0,f],T=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(w,T,n,s),this.type="DodecahedronGeometry",this.parameters={radius:n,detail:s}}static fromJSON(n){return new Vg(n.radius,n.detail)}}const Vv=new Qe,Qv=new Qe,IE=new Qe,Wv=new Co;class qb extends Wi{constructor(n=null,s=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:n,thresholdAngle:s},n!==null){const f=Math.pow(10,4),w=Math.cos(xo*s),T=n.getIndex(),I=n.getAttribute("position"),F=T?T.count:I.count,U=[0,0,0],G=["a","b","c"],V=new Array(3),j={},Y=[];for(let re=0;re<F;re+=3){T?(U[0]=T.getX(re),U[1]=T.getX(re+1),U[2]=T.getX(re+2)):(U[0]=re,U[1]=re+1,U[2]=re+2);const{a:ie,b:$,c:de}=Wv;if(ie.fromBufferAttribute(I,U[0]),$.fromBufferAttribute(I,U[1]),de.fromBufferAttribute(I,U[2]),Wv.getNormal(IE),V[0]=`${Math.round(ie.x*f)},${Math.round(ie.y*f)},${Math.round(ie.z*f)}`,V[1]=`${Math.round($.x*f)},${Math.round($.y*f)},${Math.round($.z*f)}`,V[2]=`${Math.round(de.x*f)},${Math.round(de.y*f)},${Math.round(de.z*f)}`,!(V[0]===V[1]||V[1]===V[2]||V[2]===V[0]))for(let Ce=0;Ce<3;Ce++){const ge=(Ce+1)%3,we=V[Ce],Le=V[ge],Ye=Wv[G[Ce]],it=Wv[G[ge]],Me=`${we}_${Le}`,Je=`${Le}_${we}`;Je in j&&j[Je]?(IE.dot(j[Je].normal)<=w&&(Y.push(Ye.x,Ye.y,Ye.z),Y.push(it.x,it.y,it.z)),j[Je]=null):Me in j||(j[Me]={index0:U[Ce],index1:U[ge],normal:IE.clone()})}}for(const re in j)if(j[re]){const{index0:ie,index1:$}=j[re];Vv.fromBufferAttribute(I,ie),Qv.fromBufferAttribute(I,$),Y.push(Vv.x,Vv.y,Vv.z),Y.push(Qv.x,Qv.y,Qv.z)}this.setAttribute("position",new li(Y,3))}}}class Qd extends Ug{constructor(n){super(n),this.uuid=Eo(),this.type="Shape",this.holes=[]}getPointsHoles(n){const s=[];for(let u=0,f=this.holes.length;u<f;u++)s[u]=this.holes[u].getPoints(n);return s}extractPoints(n){return{shape:this.getPoints(n),holes:this.getPointsHoles(n)}}copy(n){super.copy(n),this.holes=[];for(let s=0,u=n.holes.length;s<u;s++){const f=n.holes[s];this.holes.push(f.clone())}return this}toJSON(){const n=super.toJSON();n.uuid=this.uuid,n.holes=[];for(let s=0,u=this.holes.length;s<u;s++){const f=this.holes[s];n.holes.push(f.toJSON())}return n}fromJSON(n){super.fromJSON(n),this.uuid=n.uuid,this.holes=[];for(let s=0,u=n.holes.length;s<u;s++){const f=n.holes[s];this.holes.push(new Ug().fromJSON(f))}return this}}const tO={triangulate:function(B,n,s=2){const u=n&&n.length,f=u?n[0]*s:B.length;let w=Jb(B,0,f,s,!0);const T=[];if(!w||w.next===w.prev)return T;let I,F,U,G,V,j,Y;if(u&&(w=oO(B,n,w,s)),B.length>80*s){I=U=B[0],F=G=B[1];for(let re=s;re<f;re+=s)V=B[re],j=B[re+1],V<I&&(I=V),j<F&&(F=j),V>U&&(U=V),j>G&&(G=j);Y=Math.max(U-I,G-F),Y=Y!==0?32767/Y:0}return Qg(w,T,s,I,F,Y,0),T}};function Jb(B,n,s,u,f){let w,T;if(f===AO(B,n,s,u)>0)for(w=n;w<s;w+=u)T=eS(w,B[w],B[w+1],T);else for(w=s-u;w>=n;w-=u)T=eS(w,B[w],B[w+1],T);return T&&jv(T,T.next)&&(jg(T),T=T.next),T}function Wd(B,n){if(!B)return B;n||(n=B);let s=B,u;do if(u=!1,!s.steiner&&(jv(s,s.next)||Es(s.prev,s,s.next)===0)){if(jg(s),s=n=s.prev,s===s.next)break;u=!0}else s=s.next;while(u||s!==n);return n}function Qg(B,n,s,u,f,w,T){if(!B)return;!T&&w&&hO(B,u,f,w);let I=B,F,U;for(;B.prev!==B.next;){if(F=B.prev,U=B.next,w?iO(B,u,f,w):nO(B)){n.push(F.i/s|0),n.push(B.i/s|0),n.push(U.i/s|0),jg(B),B=U.next,I=U.next;continue}if(B=U,B===I){T?T===1?(B=rO(Wd(B),n,s),Qg(B,n,s,u,f,w,2)):T===2&&sO(B,n,s,u,f,w):Qg(Wd(B),n,s,u,f,w,1);break}}}function nO(B){const n=B.prev,s=B,u=B.next;if(Es(n,s,u)>=0)return!1;const f=n.x,w=s.x,T=u.x,I=n.y,F=s.y,U=u.y,G=f<w?f<T?f:T:w<T?w:T,V=I<F?I<U?I:U:F<U?F:U,j=f>w?f>T?f:T:w>T?w:T,Y=I>F?I>U?I:U:F>U?F:U;let re=u.next;for(;re!==n;){if(re.x>=G&&re.x<=j&&re.y>=V&&re.y<=Y&&Pp(f,I,w,F,T,U,re.x,re.y)&&Es(re.prev,re,re.next)>=0)return!1;re=re.next}return!0}function iO(B,n,s,u){const f=B.prev,w=B,T=B.next;if(Es(f,w,T)>=0)return!1;const I=f.x,F=w.x,U=T.x,G=f.y,V=w.y,j=T.y,Y=I<F?I<U?I:U:F<U?F:U,re=G<V?G<j?G:j:V<j?V:j,ie=I>F?I>U?I:U:F>U?F:U,$=G>V?G>j?G:j:V>j?V:j,de=RE(Y,re,n,s,u),Ce=RE(ie,$,n,s,u);let ge=B.prevZ,we=B.nextZ;for(;ge&&ge.z>=de&&we&&we.z<=Ce;){if(ge.x>=Y&&ge.x<=ie&&ge.y>=re&&ge.y<=$&&ge!==f&&ge!==T&&Pp(I,G,F,V,U,j,ge.x,ge.y)&&Es(ge.prev,ge,ge.next)>=0||(ge=ge.prevZ,we.x>=Y&&we.x<=ie&&we.y>=re&&we.y<=$&&we!==f&&we!==T&&Pp(I,G,F,V,U,j,we.x,we.y)&&Es(we.prev,we,we.next)>=0))return!1;we=we.nextZ}for(;ge&&ge.z>=de;){if(ge.x>=Y&&ge.x<=ie&&ge.y>=re&&ge.y<=$&&ge!==f&&ge!==T&&Pp(I,G,F,V,U,j,ge.x,ge.y)&&Es(ge.prev,ge,ge.next)>=0)return!1;ge=ge.prevZ}for(;we&&we.z<=Ce;){if(we.x>=Y&&we.x<=ie&&we.y>=re&&we.y<=$&&we!==f&&we!==T&&Pp(I,G,F,V,U,j,we.x,we.y)&&Es(we.prev,we,we.next)>=0)return!1;we=we.nextZ}return!0}function rO(B,n,s){let u=B;do{const f=u.prev,w=u.next.next;!jv(f,w)&&Zb(f,u,u.next,w)&&Wg(f,w)&&Wg(w,f)&&(n.push(f.i/s|0),n.push(u.i/s|0),n.push(w.i/s|0),jg(u),jg(u.next),u=B=w),u=u.next}while(u!==B);return Wd(u)}function sO(B,n,s,u,f,w){let T=B;do{let I=T.next.next;for(;I!==T.prev;){if(T.i!==I.i&&pO(T,I)){let F=$b(T,I);T=Wd(T,T.next),F=Wd(F,F.next),Qg(T,n,s,u,f,w,0),Qg(F,n,s,u,f,w,0);return}I=I.next}T=T.next}while(T!==B)}function oO(B,n,s,u){const f=[];let w,T,I,F,U;for(w=0,T=n.length;w<T;w++)I=n[w]*u,F=w<T-1?n[w+1]*u:B.length,U=Jb(B,I,F,u,!1),U===U.next&&(U.steiner=!0),f.push(fO(U));for(f.sort(aO),w=0;w<f.length;w++)s=lO(f[w],s);return s}function aO(B,n){return B.x-n.x}function lO(B,n){const s=cO(B,n);if(!s)return n;const u=$b(s,B);return Wd(u,u.next),Wd(s,s.next)}function cO(B,n){let s=n,u=-1/0,f;const w=B.x,T=B.y;do{if(T<=s.y&&T>=s.next.y&&s.next.y!==s.y){const j=s.x+(T-s.y)*(s.next.x-s.x)/(s.next.y-s.y);if(j<=w&&j>u&&(u=j,f=s.x<s.next.x?s:s.next,j===w))return f}s=s.next}while(s!==n);if(!f)return null;const I=f,F=f.x,U=f.y;let G=1/0,V;s=f;do w>=s.x&&s.x>=F&&w!==s.x&&Pp(T<U?w:u,T,F,U,T<U?u:w,T,s.x,s.y)&&(V=Math.abs(T-s.y)/(w-s.x),Wg(s,B)&&(V<G||V===G&&(s.x>f.x||s.x===f.x&&uO(f,s)))&&(f=s,G=V)),s=s.next;while(s!==I);return f}function uO(B,n){return Es(B.prev,B,n.prev)<0&&Es(n.next,B,B.next)<0}function hO(B,n,s,u){let f=B;do f.z===0&&(f.z=RE(f.x,f.y,n,s,u)),f.prevZ=f.prev,f.nextZ=f.next,f=f.next;while(f!==B);f.prevZ.nextZ=null,f.prevZ=null,dO(f)}function dO(B){let n,s,u,f,w,T,I,F,U=1;do{for(s=B,B=null,w=null,T=0;s;){for(T++,u=s,I=0,n=0;n<U&&(I++,u=u.nextZ,!!u);n++);for(F=U;I>0||F>0&&u;)I!==0&&(F===0||!u||s.z<=u.z)?(f=s,s=s.nextZ,I--):(f=u,u=u.nextZ,F--),w?w.nextZ=f:B=f,f.prevZ=w,w=f;s=u}w.nextZ=null,U*=2}while(T>1);return B}function RE(B,n,s,u,f){return B=(B-s)*f|0,n=(n-u)*f|0,B=(B|B<<8)&16711935,B=(B|B<<4)&252645135,B=(B|B<<2)&858993459,B=(B|B<<1)&1431655765,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,B|n<<1}function fO(B){let n=B,s=B;do(n.x<s.x||n.x===s.x&&n.y<s.y)&&(s=n),n=n.next;while(n!==B);return s}function Pp(B,n,s,u,f,w,T,I){return(f-T)*(n-I)>=(B-T)*(w-I)&&(B-T)*(u-I)>=(s-T)*(n-I)&&(s-T)*(w-I)>=(f-T)*(u-I)}function pO(B,n){return B.next.i!==n.i&&B.prev.i!==n.i&&!mO(B,n)&&(Wg(B,n)&&Wg(n,B)&&gO(B,n)&&(Es(B.prev,B,n.prev)||Es(B,n.prev,n))||jv(B,n)&&Es(B.prev,B,B.next)>0&&Es(n.prev,n,n.next)>0)}function Es(B,n,s){return(n.y-B.y)*(s.x-n.x)-(n.x-B.x)*(s.y-n.y)}function jv(B,n){return B.x===n.x&&B.y===n.y}function Zb(B,n,s,u){const f=Kv(Es(B,n,s)),w=Kv(Es(B,n,u)),T=Kv(Es(s,u,B)),I=Kv(Es(s,u,n));return!!(f!==w&&T!==I||f===0&&Xv(B,s,n)||w===0&&Xv(B,u,n)||T===0&&Xv(s,B,u)||I===0&&Xv(s,n,u))}function Xv(B,n,s){return n.x<=Math.max(B.x,s.x)&&n.x>=Math.min(B.x,s.x)&&n.y<=Math.max(B.y,s.y)&&n.y>=Math.min(B.y,s.y)}function Kv(B){return B>0?1:B<0?-1:0}function mO(B,n){let s=B;do{if(s.i!==B.i&&s.next.i!==B.i&&s.i!==n.i&&s.next.i!==n.i&&Zb(s,s.next,B,n))return!0;s=s.next}while(s!==B);return!1}function Wg(B,n){return Es(B.prev,B,B.next)<0?Es(B,n,B.next)>=0&&Es(B,B.prev,n)>=0:Es(B,n,B.prev)<0||Es(B,B.next,n)<0}function gO(B,n){let s=B,u=!1;const f=(B.x+n.x)/2,w=(B.y+n.y)/2;do s.y>w!=s.next.y>w&&s.next.y!==s.y&&f<(s.next.x-s.x)*(w-s.y)/(s.next.y-s.y)+s.x&&(u=!u),s=s.next;while(s!==B);return u}function $b(B,n){const s=new BE(B.i,B.x,B.y),u=new BE(n.i,n.x,n.y),f=B.next,w=n.prev;return B.next=n,n.prev=B,s.next=f,f.prev=s,u.next=s,s.prev=u,w.next=u,u.prev=w,u}function eS(B,n,s,u){const f=new BE(B,n,s);return u?(f.next=u.next,f.prev=u,u.next.prev=f,u.next=f):(f.prev=f,f.next=f),f}function jg(B){B.next.prev=B.prev,B.prev.next=B.next,B.prevZ&&(B.prevZ.nextZ=B.nextZ),B.nextZ&&(B.nextZ.prevZ=B.prevZ)}function BE(B,n,s){this.i=B,this.x=n,this.y=s,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function AO(B,n,s,u){let f=0;for(let w=n,T=s-u;w<s;w+=u)f+=(B[T]-B[w])*(B[w+1]+B[T+1]),T=w;return f}class eu{static area(n){const s=n.length;let u=0;for(let f=s-1,w=0;w<s;f=w++)u+=n[f].x*n[w].y-n[w].x*n[f].y;return u*.5}static isClockWise(n){return eu.area(n)<0}static triangulateShape(n,s){const u=[],f=[],w=[];tS(n),nS(u,n);let T=n.length;s.forEach(tS);for(let F=0;F<s.length;F++)f.push(T),T+=s[F].length,nS(u,s[F]);const I=tO.triangulate(u,f);for(let F=0;F<I.length;F+=3)w.push(I.slice(F,F+3));return w}}function tS(B){const n=B.length;n>2&&B[n-1].equals(B[0])&&B.pop()}function nS(B,n){for(let s=0;s<n.length;s++)B.push(n[s].x),B.push(n[s].y)}class Xg extends Wi{constructor(n=new Qd([new jt(.5,.5),new jt(-.5,.5),new jt(-.5,-.5),new jt(.5,-.5)]),s={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:n,options:s},n=Array.isArray(n)?n:[n];const u=this,f=[],w=[];for(let I=0,F=n.length;I<F;I++){const U=n[I];T(U)}this.setAttribute("position",new li(f,3)),this.setAttribute("uv",new li(w,2)),this.computeVertexNormals();function T(I){const F=[],U=s.curveSegments!==void 0?s.curveSegments:12,G=s.steps!==void 0?s.steps:1,V=s.depth!==void 0?s.depth:1;let j=s.bevelEnabled!==void 0?s.bevelEnabled:!0,Y=s.bevelThickness!==void 0?s.bevelThickness:.2,re=s.bevelSize!==void 0?s.bevelSize:Y-.1,ie=s.bevelOffset!==void 0?s.bevelOffset:0,$=s.bevelSegments!==void 0?s.bevelSegments:3;const de=s.extrudePath,Ce=s.UVGenerator!==void 0?s.UVGenerator:vO;let ge,we=!1,Le,Ye,it,Me;de&&(ge=de.getSpacedPoints(G),we=!0,j=!1,Le=de.computeFrenetFrames(G,!1),Ye=new Qe,it=new Qe,Me=new Qe),j||($=0,Y=0,re=0,ie=0);const Je=I.extractPoints(U);let tt=Je.shape;const mt=Je.holes;if(!eu.isClockWise(tt)){tt=tt.reverse();for(let on=0,$t=mt.length;on<$t;on++){const Ln=mt[on];eu.isClockWise(Ln)&&(mt[on]=Ln.reverse())}}const yt=eu.triangulateShape(tt,mt),dt=tt;for(let on=0,$t=mt.length;on<$t;on++){const Ln=mt[on];tt=tt.concat(Ln)}function St(on,$t,Ln){return $t||console.error("THREE.ExtrudeGeometry: vec does not exist"),$t.clone().multiplyScalar(Ln).add(on)}const rn=tt.length,hn=yt.length;function tn(on,$t,Ln){let yi,jn,Vi;const Oi=on.x-$t.x,Si=on.y-$t.y,ns=Ln.x-on.x,Xr=Ln.y-on.y,Ze=Oi*Oi+Si*Si,ke=Oi*Xr-Si*ns;if(Math.abs(ke)>Number.EPSILON){const Ut=Math.sqrt(Ze),Cn=Math.sqrt(ns*ns+Xr*Xr),In=$t.x-Si/Ut,qn=$t.y+Oi/Ut,Hi=Ln.x-Xr/Cn,Zn=Ln.y+ns/Cn,en=((Hi-In)*Xr-(Zn-qn)*ns)/(Oi*Xr-Si*ns);yi=In+Oi*en-on.x,jn=qn+Si*en-on.y;const Ti=yi*yi+jn*jn;if(Ti<=2)return new jt(yi,jn);Vi=Math.sqrt(Ti/2)}else{let Ut=!1;Oi>Number.EPSILON?ns>Number.EPSILON&&(Ut=!0):Oi<-Number.EPSILON?ns<-Number.EPSILON&&(Ut=!0):Math.sign(Si)===Math.sign(Xr)&&(Ut=!0),Ut?(yi=-Si,jn=Oi,Vi=Math.sqrt(Ze)):(yi=Oi,jn=Si,Vi=Math.sqrt(Ze/2))}return new jt(yi/Vi,jn/Vi)}const wn=[];for(let on=0,$t=dt.length,Ln=$t-1,yi=on+1;on<$t;on++,Ln++,yi++)Ln===$t&&(Ln=0),yi===$t&&(yi=0),wn[on]=tn(dt[on],dt[Ln],dt[yi]);const gn=[];let ni,Wn=wn.concat();for(let on=0,$t=mt.length;on<$t;on++){const Ln=mt[on];ni=[];for(let yi=0,jn=Ln.length,Vi=jn-1,Oi=yi+1;yi<jn;yi++,Vi++,Oi++)Vi===jn&&(Vi=0),Oi===jn&&(Oi=0),ni[yi]=tn(Ln[yi],Ln[Vi],Ln[Oi]);gn.push(ni),Wn=Wn.concat(ni)}for(let on=0;on<$;on++){const $t=on/$,Ln=Y*Math.cos($t*Math.PI/2),yi=re*Math.sin($t*Math.PI/2)+ie;for(let jn=0,Vi=dt.length;jn<Vi;jn++){const Oi=St(dt[jn],wn[jn],yi);ai(Oi.x,Oi.y,-Ln)}for(let jn=0,Vi=mt.length;jn<Vi;jn++){const Oi=mt[jn];ni=gn[jn];for(let Si=0,ns=Oi.length;Si<ns;Si++){const Xr=St(Oi[Si],ni[Si],yi);ai(Xr.x,Xr.y,-Ln)}}}const Vt=re+ie;for(let on=0;on<rn;on++){const $t=j?St(tt[on],Wn[on],Vt):tt[on];we?(it.copy(Le.normals[0]).multiplyScalar($t.x),Ye.copy(Le.binormals[0]).multiplyScalar($t.y),Me.copy(ge[0]).add(it).add(Ye),ai(Me.x,Me.y,Me.z)):ai($t.x,$t.y,0)}for(let on=1;on<=G;on++)for(let $t=0;$t<rn;$t++){const Ln=j?St(tt[$t],Wn[$t],Vt):tt[$t];we?(it.copy(Le.normals[on]).multiplyScalar(Ln.x),Ye.copy(Le.binormals[on]).multiplyScalar(Ln.y),Me.copy(ge[on]).add(it).add(Ye),ai(Me.x,Me.y,Me.z)):ai(Ln.x,Ln.y,V/G*on)}for(let on=$-1;on>=0;on--){const $t=on/$,Ln=Y*Math.cos($t*Math.PI/2),yi=re*Math.sin($t*Math.PI/2)+ie;for(let jn=0,Vi=dt.length;jn<Vi;jn++){const Oi=St(dt[jn],wn[jn],yi);ai(Oi.x,Oi.y,V+Ln)}for(let jn=0,Vi=mt.length;jn<Vi;jn++){const Oi=mt[jn];ni=gn[jn];for(let Si=0,ns=Oi.length;Si<ns;Si++){const Xr=St(Oi[Si],ni[Si],yi);we?ai(Xr.x,Xr.y+ge[G-1].y,ge[G-1].x+Ln):ai(Xr.x,Xr.y,V+Ln)}}}dn(),Gn();function dn(){const on=f.length/3;if(j){let $t=0,Ln=rn*$t;for(let yi=0;yi<hn;yi++){const jn=yt[yi];Hn(jn[2]+Ln,jn[1]+Ln,jn[0]+Ln)}$t=G+$*2,Ln=rn*$t;for(let yi=0;yi<hn;yi++){const jn=yt[yi];Hn(jn[0]+Ln,jn[1]+Ln,jn[2]+Ln)}}else{for(let $t=0;$t<hn;$t++){const Ln=yt[$t];Hn(Ln[2],Ln[1],Ln[0])}for(let $t=0;$t<hn;$t++){const Ln=yt[$t];Hn(Ln[0]+rn*G,Ln[1]+rn*G,Ln[2]+rn*G)}}u.addGroup(on,f.length/3-on,0)}function Gn(){const on=f.length/3;let $t=0;Dt(dt,$t),$t+=dt.length;for(let Ln=0,yi=mt.length;Ln<yi;Ln++){const jn=mt[Ln];Dt(jn,$t),$t+=jn.length}u.addGroup(on,f.length/3-on,1)}function Dt(on,$t){let Ln=on.length;for(;--Ln>=0;){const yi=Ln;let jn=Ln-1;jn<0&&(jn=on.length-1);for(let Vi=0,Oi=G+$*2;Vi<Oi;Vi++){const Si=rn*Vi,ns=rn*(Vi+1),Xr=$t+yi+Si,Ze=$t+jn+Si,ke=$t+jn+ns,Ut=$t+yi+ns;Mi(Xr,Ze,ke,Ut)}}}function ai(on,$t,Ln){F.push(on),F.push($t),F.push(Ln)}function Hn(on,$t,Ln){Tn(on),Tn($t),Tn(Ln);const yi=f.length/3,jn=Ce.generateTopUV(u,f,yi-3,yi-2,yi-1);tr(jn[0]),tr(jn[1]),tr(jn[2])}function Mi(on,$t,Ln,yi){Tn(on),Tn($t),Tn(yi),Tn($t),Tn(Ln),Tn(yi);const jn=f.length/3,Vi=Ce.generateSideWallUV(u,f,jn-6,jn-3,jn-2,jn-1);tr(Vi[0]),tr(Vi[1]),tr(Vi[3]),tr(Vi[1]),tr(Vi[2]),tr(Vi[3])}function Tn(on){f.push(F[on*3+0]),f.push(F[on*3+1]),f.push(F[on*3+2])}function tr(on){w.push(on.x),w.push(on.y)}}}toJSON(){const n=super.toJSON(),s=this.parameters.shapes,u=this.parameters.options;return yO(s,u,n)}static fromJSON(n,s){const u=[];for(let w=0,T=n.shapes.length;w<T;w++){const I=s[n.shapes[w]];u.push(I)}const f=n.options.extrudePath;return f!==void 0&&(n.options.extrudePath=new TE[f.type]().fromJSON(f)),new Xg(u,n.options)}}const vO={generateTopUV:function(B,n,s,u,f){const w=n[s*3],T=n[s*3+1],I=n[u*3],F=n[u*3+1],U=n[f*3],G=n[f*3+1];return[new jt(w,T),new jt(I,F),new jt(U,G)]},generateSideWallUV:function(B,n,s,u,f,w){const T=n[s*3],I=n[s*3+1],F=n[s*3+2],U=n[u*3],G=n[u*3+1],V=n[u*3+2],j=n[f*3],Y=n[f*3+1],re=n[f*3+2],ie=n[w*3],$=n[w*3+1],de=n[w*3+2];return Math.abs(I-G)<Math.abs(T-U)?[new jt(T,1-F),new jt(U,1-V),new jt(j,1-re),new jt(ie,1-de)]:[new jt(I,1-F),new jt(G,1-V),new jt(Y,1-re),new jt($,1-de)]}};function yO(B,n,s){if(s.shapes=[],Array.isArray(B))for(let u=0,f=B.length;u<f;u++){const w=B[u];s.shapes.push(w.uuid)}else s.shapes.push(B.uuid);return s.options=Object.assign({},n),n.extrudePath!==void 0&&(s.options.extrudePath=n.extrudePath.toJSON()),s}class Kg extends Cu{constructor(n=1,s=0){const u=(1+Math.sqrt(5))/2,f=[-1,u,0,1,u,0,-1,-u,0,1,-u,0,0,-1,u,0,1,u,0,-1,-u,0,1,-u,u,0,-1,u,0,1,-u,0,-1,-u,0,1],w=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(f,w,n,s),this.type="IcosahedronGeometry",this.parameters={radius:n,detail:s}}static fromJSON(n){return new Kg(n.radius,n.detail)}}class Op extends Cu{constructor(n=1,s=0){const u=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],f=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(u,f,n,s),this.type="OctahedronGeometry",this.parameters={radius:n,detail:s}}static fromJSON(n){return new Op(n.radius,n.detail)}}class Yg extends Wi{constructor(n=.5,s=1,u=8,f=1,w=0,T=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:n,outerRadius:s,thetaSegments:u,phiSegments:f,thetaStart:w,thetaLength:T},u=Math.max(3,u),f=Math.max(1,f);const I=[],F=[],U=[],G=[];let V=n;const j=(s-n)/f,Y=new Qe,re=new jt;for(let ie=0;ie<=f;ie++){for(let $=0;$<=u;$++){const de=w+$/u*T;Y.x=V*Math.cos(de),Y.y=V*Math.sin(de),F.push(Y.x,Y.y,Y.z),U.push(0,0,1),re.x=(Y.x/s+1)/2,re.y=(Y.y/s+1)/2,G.push(re.x,re.y)}V+=j}for(let ie=0;ie<f;ie++){const $=ie*(u+1);for(let de=0;de<u;de++){const Ce=de+$,ge=Ce,we=Ce+u+1,Le=Ce+u+2,Ye=Ce+1;I.push(ge,we,Ye),I.push(we,Le,Ye)}}this.setIndex(I),this.setAttribute("position",new li(F,3)),this.setAttribute("normal",new li(U,3)),this.setAttribute("uv",new li(G,2))}static fromJSON(n){return new Yg(n.innerRadius,n.outerRadius,n.thetaSegments,n.phiSegments,n.thetaStart,n.thetaLength)}}class qg extends Wi{constructor(n=new Qd([new jt(0,.5),new jt(-.5,-.5),new jt(.5,-.5)]),s=12){super(),this.type="ShapeGeometry",this.parameters={shapes:n,curveSegments:s};const u=[],f=[],w=[],T=[];let I=0,F=0;if(Array.isArray(n)===!1)U(n);else for(let G=0;G<n.length;G++)U(n[G]),this.addGroup(I,F,G),I+=F,F=0;this.setIndex(u),this.setAttribute("position",new li(f,3)),this.setAttribute("normal",new li(w,3)),this.setAttribute("uv",new li(T,2));function U(G){const V=f.length/3,j=G.extractPoints(s);let Y=j.shape;const re=j.holes;eu.isClockWise(Y)===!1&&(Y=Y.reverse());for(let $=0,de=re.length;$<de;$++){const Ce=re[$];eu.isClockWise(Ce)===!0&&(re[$]=Ce.reverse())}const ie=eu.triangulateShape(Y,re);for(let $=0,de=re.length;$<de;$++){const Ce=re[$];Y=Y.concat(Ce)}for(let $=0,de=Y.length;$<de;$++){const Ce=Y[$];f.push(Ce.x,Ce.y,0),w.push(0,0,1),T.push(Ce.x,Ce.y)}for(let $=0,de=ie.length;$<de;$++){const Ce=ie[$],ge=Ce[0]+V,we=Ce[1]+V,Le=Ce[2]+V;u.push(ge,we,Le),F+=3}}}toJSON(){const n=super.toJSON(),s=this.parameters.shapes;return xO(s,n)}static fromJSON(n,s){const u=[];for(let f=0,w=n.shapes.length;f<w;f++){const T=s[n.shapes[f]];u.push(T)}return new qg(u,n.curveSegments)}}function xO(B,n){if(n.shapes=[],Array.isArray(B))for(let s=0,u=B.length;s<u;s++){const f=B[s];n.shapes.push(f.uuid)}else n.shapes.push(B.uuid);return n}class Fp extends Wi{constructor(n=1,s=32,u=16,f=0,w=Math.PI*2,T=0,I=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:n,widthSegments:s,heightSegments:u,phiStart:f,phiLength:w,thetaStart:T,thetaLength:I},s=Math.max(3,Math.floor(s)),u=Math.max(2,Math.floor(u));const F=Math.min(T+I,Math.PI);let U=0;const G=[],V=new Qe,j=new Qe,Y=[],re=[],ie=[],$=[];for(let de=0;de<=u;de++){const Ce=[],ge=de/u;let we=0;de==0&&T==0?we=.5/s:de==u&&F==Math.PI&&(we=-.5/s);for(let Le=0;Le<=s;Le++){const Ye=Le/s;V.x=-n*Math.cos(f+Ye*w)*Math.sin(T+ge*I),V.y=n*Math.cos(T+ge*I),V.z=n*Math.sin(f+Ye*w)*Math.sin(T+ge*I),re.push(V.x,V.y,V.z),j.copy(V).normalize(),ie.push(j.x,j.y,j.z),$.push(Ye+we,1-ge),Ce.push(U++)}G.push(Ce)}for(let de=0;de<u;de++)for(let Ce=0;Ce<s;Ce++){const ge=G[de][Ce+1],we=G[de][Ce],Le=G[de+1][Ce],Ye=G[de+1][Ce+1];(de!==0||T>0)&&Y.push(ge,we,Ye),(de!==u-1||F<Math.PI)&&Y.push(we,Le,Ye)}this.setIndex(Y),this.setAttribute("position",new li(re,3)),this.setAttribute("normal",new li(ie,3)),this.setAttribute("uv",new li($,2))}static fromJSON(n){return new Fp(n.radius,n.widthSegments,n.heightSegments,n.phiStart,n.phiLength,n.thetaStart,n.thetaLength)}}class Jg extends Cu{constructor(n=1,s=0){const u=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],f=[2,1,0,0,3,2,1,3,0,2,3,1];super(u,f,n,s),this.type="TetrahedronGeometry",this.parameters={radius:n,detail:s}}static fromJSON(n){return new Jg(n.radius,n.detail)}}class Zg extends Wi{constructor(n=1,s=.4,u=8,f=6,w=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:n,tube:s,radialSegments:u,tubularSegments:f,arc:w},u=Math.floor(u),f=Math.floor(f);const T=[],I=[],F=[],U=[],G=new Qe,V=new Qe,j=new Qe;for(let Y=0;Y<=u;Y++)for(let re=0;re<=f;re++){const ie=re/f*w,$=Y/u*Math.PI*2;V.x=(n+s*Math.cos($))*Math.cos(ie),V.y=(n+s*Math.cos($))*Math.sin(ie),V.z=s*Math.sin($),I.push(V.x,V.y,V.z),G.x=n*Math.cos(ie),G.y=n*Math.sin(ie),j.subVectors(V,G).normalize(),F.push(j.x,j.y,j.z),U.push(re/f),U.push(Y/u)}for(let Y=1;Y<=u;Y++)for(let re=1;re<=f;re++){const ie=(f+1)*Y+re-1,$=(f+1)*(Y-1)+re-1,de=(f+1)*(Y-1)+re,Ce=(f+1)*Y+re;T.push(ie,$,Ce),T.push($,de,Ce)}this.setIndex(T),this.setAttribute("position",new li(I,3)),this.setAttribute("normal",new li(F,3)),this.setAttribute("uv",new li(U,2))}static fromJSON(n){return new Zg(n.radius,n.tube,n.radialSegments,n.tubularSegments,n.arc)}}class $g extends Wi{constructor(n=1,s=.4,u=64,f=8,w=2,T=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:n,tube:s,tubularSegments:u,radialSegments:f,p:w,q:T},u=Math.floor(u),f=Math.floor(f);const I=[],F=[],U=[],G=[],V=new Qe,j=new Qe,Y=new Qe,re=new Qe,ie=new Qe,$=new Qe,de=new Qe;for(let ge=0;ge<=u;++ge){const we=ge/u*w*Math.PI*2;Ce(we,w,T,n,Y),Ce(we+.01,w,T,n,re),$.subVectors(re,Y),de.addVectors(re,Y),ie.crossVectors($,de),de.crossVectors(ie,$),ie.normalize(),de.normalize();for(let Le=0;Le<=f;++Le){const Ye=Le/f*Math.PI*2,it=-s*Math.cos(Ye),Me=s*Math.sin(Ye);V.x=Y.x+(it*de.x+Me*ie.x),V.y=Y.y+(it*de.y+Me*ie.y),V.z=Y.z+(it*de.z+Me*ie.z),F.push(V.x,V.y,V.z),j.subVectors(V,Y).normalize(),U.push(j.x,j.y,j.z),G.push(ge/u),G.push(Le/f)}}for(let ge=1;ge<=u;ge++)for(let we=1;we<=f;we++){const Le=(f+1)*(ge-1)+(we-1),Ye=(f+1)*ge+(we-1),it=(f+1)*ge+we,Me=(f+1)*(ge-1)+we;I.push(Le,Ye,Me),I.push(Ye,it,Me)}this.setIndex(I),this.setAttribute("position",new li(F,3)),this.setAttribute("normal",new li(U,3)),this.setAttribute("uv",new li(G,2));function Ce(ge,we,Le,Ye,it){const Me=Math.cos(ge),Je=Math.sin(ge),tt=Le/we*ge,mt=Math.cos(tt);it.x=Ye*(2+mt)*.5*Me,it.y=Ye*(2+mt)*Je*.5,it.z=Ye*Math.sin(tt)*.5}}static fromJSON(n){return new $g(n.radius,n.tube,n.tubularSegments,n.radialSegments,n.p,n.q)}}class eA extends Wi{constructor(n=new bE(new Qe(-1,-1,0),new Qe(-1,1,0),new Qe(1,1,0)),s=64,u=1,f=8,w=!1){super(),this.type="TubeGeometry",this.parameters={path:n,tubularSegments:s,radius:u,radialSegments:f,closed:w};const T=n.computeFrenetFrames(s,w);this.tangents=T.tangents,this.normals=T.normals,this.binormals=T.binormals;const I=new Qe,F=new Qe,U=new jt;let G=new Qe;const V=[],j=[],Y=[],re=[];ie(),this.setIndex(re),this.setAttribute("position",new li(V,3)),this.setAttribute("normal",new li(j,3)),this.setAttribute("uv",new li(Y,2));function ie(){for(let ge=0;ge<s;ge++)$(ge);$(w===!1?s:0),Ce(),de()}function $(ge){G=n.getPointAt(ge/s,G);const we=T.normals[ge],Le=T.binormals[ge];for(let Ye=0;Ye<=f;Ye++){const it=Ye/f*Math.PI*2,Me=Math.sin(it),Je=-Math.cos(it);F.x=Je*we.x+Me*Le.x,F.y=Je*we.y+Me*Le.y,F.z=Je*we.z+Me*Le.z,F.normalize(),j.push(F.x,F.y,F.z),I.x=G.x+u*F.x,I.y=G.y+u*F.y,I.z=G.z+u*F.z,V.push(I.x,I.y,I.z)}}function de(){for(let ge=1;ge<=s;ge++)for(let we=1;we<=f;we++){const Le=(f+1)*(ge-1)+(we-1),Ye=(f+1)*ge+(we-1),it=(f+1)*ge+we,Me=(f+1)*(ge-1)+we;re.push(Le,Ye,Me),re.push(Ye,it,Me)}}function Ce(){for(let ge=0;ge<=s;ge++)for(let we=0;we<=f;we++)U.x=ge/s,U.y=we/f,Y.push(U.x,U.y)}}toJSON(){const n=super.toJSON();return n.path=this.parameters.path.toJSON(),n}static fromJSON(n){return new eA(new TE[n.path.type]().fromJSON(n.path),n.tubularSegments,n.radius,n.radialSegments,n.closed)}}class iS extends Wi{constructor(n=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:n},n!==null){const s=[],u=new Set,f=new Qe,w=new Qe;if(n.index!==null){const T=n.attributes.position,I=n.index;let F=n.groups;F.length===0&&(F=[{start:0,count:I.count,materialIndex:0}]);for(let U=0,G=F.length;U<G;++U){const V=F[U],j=V.start,Y=V.count;for(let re=j,ie=j+Y;re<ie;re+=3)for(let $=0;$<3;$++){const de=I.getX(re+$),Ce=I.getX(re+($+1)%3);f.fromBufferAttribute(T,de),w.fromBufferAttribute(T,Ce),rS(f,w,u)===!0&&(s.push(f.x,f.y,f.z),s.push(w.x,w.y,w.z))}}}else{const T=n.attributes.position;for(let I=0,F=T.count/3;I<F;I++)for(let U=0;U<3;U++){const G=3*I+U,V=3*I+(U+1)%3;f.fromBufferAttribute(T,G),w.fromBufferAttribute(T,V),rS(f,w,u)===!0&&(s.push(f.x,f.y,f.z),s.push(w.x,w.y,w.z))}}this.setAttribute("position",new li(s,3))}}}function rS(B,n,s){const u=`${B.x},${B.y},${B.z}-${n.x},${n.y},${n.z}`,f=`${n.x},${n.y},${n.z}-${B.x},${B.y},${B.z}`;return s.has(u)===!0||s.has(f)===!0?!1:(s.add(u),s.add(f),!0)}var sS=Object.freeze({__proto__:null,BoxGeometry:Zl,CapsuleGeometry:zg,CircleGeometry:Gg,ConeGeometry:Hg,CylinderGeometry:Vd,DodecahedronGeometry:Vg,EdgesGeometry:qb,ExtrudeGeometry:Xg,IcosahedronGeometry:Kg,LatheGeometry:Dp,OctahedronGeometry:Op,PlaneGeometry:jc,PolyhedronGeometry:Cu,RingGeometry:Yg,ShapeGeometry:qg,SphereGeometry:Fp,TetrahedronGeometry:Jg,TorusGeometry:Zg,TorusKnotGeometry:$g,TubeGeometry:eA,WireframeGeometry:iS});class oS extends bo{constructor(n){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new kn(0),this.transparent=!0,this.fog=!0,this.setValues(n)}copy(n){return super.copy(n),this.color.copy(n.color),this.fog=n.fog,this}}class aS extends nl{constructor(n){super(n),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class LE extends bo{constructor(n){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new kn(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new kn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=is,this.normalScale=new jt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(n)}copy(n){return super.copy(n),this.defines={STANDARD:""},this.color.copy(n.color),this.roughness=n.roughness,this.metalness=n.metalness,this.map=n.map,this.lightMap=n.lightMap,this.lightMapIntensity=n.lightMapIntensity,this.aoMap=n.aoMap,this.aoMapIntensity=n.aoMapIntensity,this.emissive.copy(n.emissive),this.emissiveMap=n.emissiveMap,this.emissiveIntensity=n.emissiveIntensity,this.bumpMap=n.bumpMap,this.bumpScale=n.bumpScale,this.normalMap=n.normalMap,this.normalMapType=n.normalMapType,this.normalScale.copy(n.normalScale),this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this.roughnessMap=n.roughnessMap,this.metalnessMap=n.metalnessMap,this.alphaMap=n.alphaMap,this.envMap=n.envMap,this.envMapIntensity=n.envMapIntensity,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.wireframeLinecap=n.wireframeLinecap,this.wireframeLinejoin=n.wireframeLinejoin,this.flatShading=n.flatShading,this.fog=n.fog,this}}class lS extends LE{constructor(n){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new jt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Jr(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(s){this.ior=(1+.4*s)/(1-.4*s)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new kn(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new kn(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new kn(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(n)}get sheen(){return this._sheen}set sheen(n){this._sheen>0!=n>0&&this.version++,this._sheen=n}get clearcoat(){return this._clearcoat}set clearcoat(n){this._clearcoat>0!=n>0&&this.version++,this._clearcoat=n}get iridescence(){return this._iridescence}set iridescence(n){this._iridescence>0!=n>0&&this.version++,this._iridescence=n}get transmission(){return this._transmission}set transmission(n){this._transmission>0!=n>0&&this.version++,this._transmission=n}copy(n){return super.copy(n),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=n.clearcoat,this.clearcoatMap=n.clearcoatMap,this.clearcoatRoughness=n.clearcoatRoughness,this.clearcoatRoughnessMap=n.clearcoatRoughnessMap,this.clearcoatNormalMap=n.clearcoatNormalMap,this.clearcoatNormalScale.copy(n.clearcoatNormalScale),this.ior=n.ior,this.iridescence=n.iridescence,this.iridescenceMap=n.iridescenceMap,this.iridescenceIOR=n.iridescenceIOR,this.iridescenceThicknessRange=[...n.iridescenceThicknessRange],this.iridescenceThicknessMap=n.iridescenceThicknessMap,this.sheen=n.sheen,this.sheenColor.copy(n.sheenColor),this.sheenColorMap=n.sheenColorMap,this.sheenRoughness=n.sheenRoughness,this.sheenRoughnessMap=n.sheenRoughnessMap,this.transmission=n.transmission,this.transmissionMap=n.transmissionMap,this.thickness=n.thickness,this.thicknessMap=n.thicknessMap,this.attenuationDistance=n.attenuationDistance,this.attenuationColor.copy(n.attenuationColor),this.specularIntensity=n.specularIntensity,this.specularIntensityMap=n.specularIntensityMap,this.specularColor.copy(n.specularColor),this.specularColorMap=n.specularColorMap,this}}class cS extends bo{constructor(n){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new kn(16777215),this.specular=new kn(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new kn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=is,this.normalScale=new jt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=un,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(n)}copy(n){return super.copy(n),this.color.copy(n.color),this.specular.copy(n.specular),this.shininess=n.shininess,this.map=n.map,this.lightMap=n.lightMap,this.lightMapIntensity=n.lightMapIntensity,this.aoMap=n.aoMap,this.aoMapIntensity=n.aoMapIntensity,this.emissive.copy(n.emissive),this.emissiveMap=n.emissiveMap,this.emissiveIntensity=n.emissiveIntensity,this.bumpMap=n.bumpMap,this.bumpScale=n.bumpScale,this.normalMap=n.normalMap,this.normalMapType=n.normalMapType,this.normalScale.copy(n.normalScale),this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this.specularMap=n.specularMap,this.alphaMap=n.alphaMap,this.envMap=n.envMap,this.combine=n.combine,this.reflectivity=n.reflectivity,this.refractionRatio=n.refractionRatio,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.wireframeLinecap=n.wireframeLinecap,this.wireframeLinejoin=n.wireframeLinejoin,this.flatShading=n.flatShading,this.fog=n.fog,this}}class uS extends bo{constructor(n){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new kn(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new kn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=is,this.normalScale=new jt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(n)}copy(n){return super.copy(n),this.color.copy(n.color),this.map=n.map,this.gradientMap=n.gradientMap,this.lightMap=n.lightMap,this.lightMapIntensity=n.lightMapIntensity,this.aoMap=n.aoMap,this.aoMapIntensity=n.aoMapIntensity,this.emissive.copy(n.emissive),this.emissiveMap=n.emissiveMap,this.emissiveIntensity=n.emissiveIntensity,this.bumpMap=n.bumpMap,this.bumpScale=n.bumpScale,this.normalMap=n.normalMap,this.normalMapType=n.normalMapType,this.normalScale.copy(n.normalScale),this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this.alphaMap=n.alphaMap,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.wireframeLinecap=n.wireframeLinecap,this.wireframeLinejoin=n.wireframeLinejoin,this.fog=n.fog,this}}class hS extends bo{constructor(n){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=is,this.normalScale=new jt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(n)}copy(n){return super.copy(n),this.bumpMap=n.bumpMap,this.bumpScale=n.bumpScale,this.normalMap=n.normalMap,this.normalMapType=n.normalMapType,this.normalScale.copy(n.normalScale),this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.flatShading=n.flatShading,this}}class dS extends bo{constructor(n){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new kn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new kn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=is,this.normalScale=new jt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=un,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(n)}copy(n){return super.copy(n),this.color.copy(n.color),this.map=n.map,this.lightMap=n.lightMap,this.lightMapIntensity=n.lightMapIntensity,this.aoMap=n.aoMap,this.aoMapIntensity=n.aoMapIntensity,this.emissive.copy(n.emissive),this.emissiveMap=n.emissiveMap,this.emissiveIntensity=n.emissiveIntensity,this.bumpMap=n.bumpMap,this.bumpScale=n.bumpScale,this.normalMap=n.normalMap,this.normalMapType=n.normalMapType,this.normalScale.copy(n.normalScale),this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this.specularMap=n.specularMap,this.alphaMap=n.alphaMap,this.envMap=n.envMap,this.combine=n.combine,this.reflectivity=n.reflectivity,this.refractionRatio=n.refractionRatio,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.wireframeLinecap=n.wireframeLinecap,this.wireframeLinejoin=n.wireframeLinejoin,this.flatShading=n.flatShading,this.fog=n.fog,this}}class fS extends bo{constructor(n){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new kn(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=is,this.normalScale=new jt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(n)}copy(n){return super.copy(n),this.defines={MATCAP:""},this.color.copy(n.color),this.matcap=n.matcap,this.map=n.map,this.bumpMap=n.bumpMap,this.bumpScale=n.bumpScale,this.normalMap=n.normalMap,this.normalMapType=n.normalMapType,this.normalScale.copy(n.normalScale),this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this.alphaMap=n.alphaMap,this.flatShading=n.flatShading,this.fog=n.fog,this}}class pS extends ma{constructor(n){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(n)}copy(n){return super.copy(n),this.scale=n.scale,this.dashSize=n.dashSize,this.gapSize=n.gapSize,this}}function Tl(B,n,s){return DE(B)?new B.constructor(B.subarray(n,s!==void 0?s:B.length)):B.slice(n,s)}function jd(B,n,s){return!B||!s&&B.constructor===n?B:typeof n.BYTES_PER_ELEMENT=="number"?new n(B):Array.prototype.slice.call(B)}function DE(B){return ArrayBuffer.isView(B)&&!(B instanceof DataView)}function mS(B){function n(f,w){return B[f]-B[w]}const s=B.length,u=new Array(s);for(let f=0;f!==s;++f)u[f]=f;return u.sort(n),u}function PE(B,n,s){const u=B.length,f=new B.constructor(u);for(let w=0,T=0;T!==u;++w){const I=s[w]*n;for(let F=0;F!==n;++F)f[T++]=B[I+F]}return f}function OE(B,n,s,u){let f=1,w=B[0];for(;w!==void 0&&w[u]===void 0;)w=B[f++];if(w===void 0)return;let T=w[u];if(T!==void 0)if(Array.isArray(T))do T=w[u],T!==void 0&&(n.push(w.time),s.push.apply(s,T)),w=B[f++];while(w!==void 0);else if(T.toArray!==void 0)do T=w[u],T!==void 0&&(n.push(w.time),T.toArray(s,s.length)),w=B[f++];while(w!==void 0);else do T=w[u],T!==void 0&&(n.push(w.time),s.push(T)),w=B[f++];while(w!==void 0)}function EO(B,n,s,u,f=30){const w=B.clone();w.name=n;const T=[];for(let F=0;F<w.tracks.length;++F){const U=w.tracks[F],G=U.getValueSize(),V=[],j=[];for(let Y=0;Y<U.times.length;++Y){const re=U.times[Y]*f;if(!(re<s||re>=u)){V.push(U.times[Y]);for(let ie=0;ie<G;++ie)j.push(U.values[Y*G+ie])}}V.length!==0&&(U.times=jd(V,U.times.constructor),U.values=jd(j,U.values.constructor),T.push(U))}w.tracks=T;let I=1/0;for(let F=0;F<w.tracks.length;++F)I>w.tracks[F].times[0]&&(I=w.tracks[F].times[0]);for(let F=0;F<w.tracks.length;++F)w.tracks[F].shift(-1*I);return w.resetDuration(),w}function _O(B,n=0,s=B,u=30){u<=0&&(u=30);const f=s.tracks.length,w=n/u;for(let T=0;T<f;++T){const I=s.tracks[T],F=I.ValueTypeName;if(F==="bool"||F==="string")continue;const U=B.tracks.find(function(de){return de.name===I.name&&de.ValueTypeName===F});if(U===void 0)continue;let G=0;const V=I.getValueSize();I.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(G=V/3);let j=0;const Y=U.getValueSize();U.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(j=Y/3);const re=I.times.length-1;let ie;if(w<=I.times[0]){const de=G,Ce=V-G;ie=Tl(I.values,de,Ce)}else if(w>=I.times[re]){const de=re*V+G,Ce=de+V-G;ie=Tl(I.values,de,Ce)}else{const de=I.createInterpolant(),Ce=G,ge=V-G;de.evaluate(w),ie=Tl(de.resultBuffer,Ce,ge)}F==="quaternion"&&new zs().fromArray(ie).normalize().conjugate().toArray(ie);const $=U.times.length;for(let de=0;de<$;++de){const Ce=de*Y+j;if(F==="quaternion")zs.multiplyQuaternionsFlat(U.values,Ce,ie,0,U.values,Ce);else{const ge=Y-j*2;for(let we=0;we<ge;++we)U.values[Ce+we]-=ie[we]}}}return B.blendMode=Di,B}var wO=Object.freeze({__proto__:null,arraySlice:Tl,convertArray:jd,isTypedArray:DE,getKeyframeOrder:mS,sortedArray:PE,flattenJSON:OE,subclip:EO,makeClipAdditive:_O});class tA{constructor(n,s,u,f){this.parameterPositions=n,this._cachedIndex=0,this.resultBuffer=f!==void 0?f:new s.constructor(u),this.sampleValues=s,this.valueSize=u,this.settings=null,this.DefaultSettings_={}}evaluate(n){const s=this.parameterPositions;let u=this._cachedIndex,f=s[u],w=s[u-1];e:{t:{let T;n:{i:if(!(n<f)){for(let I=u+2;;){if(f===void 0){if(n<w)break i;return u=s.length,this._cachedIndex=u,this.copySampleValue_(u-1)}if(u===I)break;if(w=f,f=s[++u],n<f)break t}T=s.length;break n}if(!(n>=w)){const I=s[1];n<I&&(u=2,w=I);for(let F=u-2;;){if(w===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(u===F)break;if(f=w,w=s[--u-1],n>=w)break t}T=u,u=0;break n}break e}for(;u<T;){const I=u+T>>>1;n<s[I]?T=I:u=I+1}if(f=s[u],w=s[u-1],w===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(f===void 0)return u=s.length,this._cachedIndex=u,this.copySampleValue_(u-1)}this._cachedIndex=u,this.intervalChanged_(u,w,f)}return this.interpolate_(u,w,n,f)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(n){const s=this.resultBuffer,u=this.sampleValues,f=this.valueSize,w=n*f;for(let T=0;T!==f;++T)s[T]=u[w+T];return s}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class gS extends tA{constructor(n,s,u,f){super(n,s,u,f),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:sn,endingEnd:sn}}intervalChanged_(n,s,u){const f=this.parameterPositions;let w=n-2,T=n+1,I=f[w],F=f[T];if(I===void 0)switch(this.getSettings_().endingStart){case Dn:w=n,I=2*s-u;break;case Yn:w=f.length-2,I=s+f[w]-f[w+1];break;default:w=n,I=u}if(F===void 0)switch(this.getSettings_().endingEnd){case Dn:T=n,F=2*u-s;break;case Yn:T=1,F=u+f[1]-f[0];break;default:T=n-1,F=s}const U=(u-s)*.5,G=this.valueSize;this._weightPrev=U/(s-I),this._weightNext=U/(F-u),this._offsetPrev=w*G,this._offsetNext=T*G}interpolate_(n,s,u,f){const w=this.resultBuffer,T=this.sampleValues,I=this.valueSize,F=n*I,U=F-I,G=this._offsetPrev,V=this._offsetNext,j=this._weightPrev,Y=this._weightNext,re=(u-s)/(f-s),ie=re*re,$=ie*re,de=-j*$+2*j*ie-j*re,Ce=(1+j)*$+(-1.5-2*j)*ie+(-.5+j)*re+1,ge=(-1-Y)*$+(1.5+Y)*ie+.5*re,we=Y*$-Y*ie;for(let Le=0;Le!==I;++Le)w[Le]=de*T[G+Le]+Ce*T[U+Le]+ge*T[F+Le]+we*T[V+Le];return w}}class FE extends tA{constructor(n,s,u,f){super(n,s,u,f)}interpolate_(n,s,u,f){const w=this.resultBuffer,T=this.sampleValues,I=this.valueSize,F=n*I,U=F-I,G=(u-s)/(f-s),V=1-G;for(let j=0;j!==I;++j)w[j]=T[U+j]*V+T[F+j]*G;return w}}class AS extends tA{constructor(n,s,u,f){super(n,s,u,f)}interpolate_(n){return this.copySampleValue_(n-1)}}class nc{constructor(n,s,u,f){if(n===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(s===void 0||s.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+n);this.name=n,this.times=jd(s,this.TimeBufferType),this.values=jd(u,this.ValueBufferType),this.setInterpolation(f||this.DefaultInterpolation)}static toJSON(n){const s=n.constructor;let u;if(s.toJSON!==this.toJSON)u=s.toJSON(n);else{u={name:n.name,times:jd(n.times,Array),values:jd(n.values,Array)};const f=n.getInterpolation();f!==n.DefaultInterpolation&&(u.interpolation=f)}return u.type=n.ValueTypeName,u}InterpolantFactoryMethodDiscrete(n){return new AS(this.times,this.values,this.getValueSize(),n)}InterpolantFactoryMethodLinear(n){return new FE(this.times,this.values,this.getValueSize(),n)}InterpolantFactoryMethodSmooth(n){return new gS(this.times,this.values,this.getValueSize(),n)}setInterpolation(n){let s;switch(n){case Wt:s=this.InterpolantFactoryMethodDiscrete;break;case pt:s=this.InterpolantFactoryMethodLinear;break;case Rt:s=this.InterpolantFactoryMethodSmooth;break}if(s===void 0){const u="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(n!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(u);return console.warn("THREE.KeyframeTrack:",u),this}return this.createInterpolant=s,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Wt;case this.InterpolantFactoryMethodLinear:return pt;case this.InterpolantFactoryMethodSmooth:return Rt}}getValueSize(){return this.values.length/this.times.length}shift(n){if(n!==0){const s=this.times;for(let u=0,f=s.length;u!==f;++u)s[u]+=n}return this}scale(n){if(n!==1){const s=this.times;for(let u=0,f=s.length;u!==f;++u)s[u]*=n}return this}trim(n,s){const u=this.times,f=u.length;let w=0,T=f-1;for(;w!==f&&u[w]<n;)++w;for(;T!==-1&&u[T]>s;)--T;if(++T,w!==0||T!==f){w>=T&&(T=Math.max(T,1),w=T-1);const I=this.getValueSize();this.times=Tl(u,w,T),this.values=Tl(this.values,w*I,T*I)}return this}validate(){let n=!0;const s=this.getValueSize();s-Math.floor(s)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),n=!1);const u=this.times,f=this.values,w=u.length;w===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),n=!1);let T=null;for(let I=0;I!==w;I++){const F=u[I];if(typeof F=="number"&&isNaN(F)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,I,F),n=!1;break}if(T!==null&&T>F){console.error("THREE.KeyframeTrack: Out of order keys.",this,I,F,T),n=!1;break}T=F}if(f!==void 0&&DE(f))for(let I=0,F=f.length;I!==F;++I){const U=f[I];if(isNaN(U)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,I,U),n=!1;break}}return n}optimize(){const n=Tl(this.times),s=Tl(this.values),u=this.getValueSize(),f=this.getInterpolation()===Rt,w=n.length-1;let T=1;for(let I=1;I<w;++I){let F=!1;const U=n[I],G=n[I+1];if(U!==G&&(I!==1||U!==n[0]))if(f)F=!0;else{const V=I*u,j=V-u,Y=V+u;for(let re=0;re!==u;++re){const ie=s[V+re];if(ie!==s[j+re]||ie!==s[Y+re]){F=!0;break}}}if(F){if(I!==T){n[T]=n[I];const V=I*u,j=T*u;for(let Y=0;Y!==u;++Y)s[j+Y]=s[V+Y]}++T}}if(w>0){n[T]=n[w];for(let I=w*u,F=T*u,U=0;U!==u;++U)s[F+U]=s[I+U];++T}return T!==n.length?(this.times=Tl(n,0,T),this.values=Tl(s,0,T*u)):(this.times=n,this.values=s),this}clone(){const n=Tl(this.times,0),s=Tl(this.values,0),u=this.constructor,f=new u(this.name,n,s);return f.createInterpolant=this.createInterpolant,f}}nc.prototype.TimeBufferType=Float32Array,nc.prototype.ValueBufferType=Float32Array,nc.prototype.DefaultInterpolation=pt;class Xd extends nc{}Xd.prototype.ValueTypeName="bool",Xd.prototype.ValueBufferType=Array,Xd.prototype.DefaultInterpolation=Wt,Xd.prototype.InterpolantFactoryMethodLinear=void 0,Xd.prototype.InterpolantFactoryMethodSmooth=void 0;class NE extends nc{}NE.prototype.ValueTypeName="color";class nA extends nc{}nA.prototype.ValueTypeName="number";class vS extends tA{constructor(n,s,u,f){super(n,s,u,f)}interpolate_(n,s,u,f){const w=this.resultBuffer,T=this.sampleValues,I=this.valueSize,F=(u-s)/(f-s);let U=n*I;for(let G=U+I;U!==G;U+=4)zs.slerpFlat(w,0,T,U-I,T,U,F);return w}}class Np extends nc{InterpolantFactoryMethodLinear(n){return new vS(this.times,this.values,this.getValueSize(),n)}}Np.prototype.ValueTypeName="quaternion",Np.prototype.DefaultInterpolation=pt,Np.prototype.InterpolantFactoryMethodSmooth=void 0;class Kd extends nc{}Kd.prototype.ValueTypeName="string",Kd.prototype.ValueBufferType=Array,Kd.prototype.DefaultInterpolation=Wt,Kd.prototype.InterpolantFactoryMethodLinear=void 0,Kd.prototype.InterpolantFactoryMethodSmooth=void 0;class iA extends nc{}iA.prototype.ValueTypeName="vector";class rA{constructor(n,s=-1,u,f=hi){this.name=n,this.tracks=u,this.duration=s,this.blendMode=f,this.uuid=Eo(),this.duration<0&&this.resetDuration()}static parse(n){const s=[],u=n.tracks,f=1/(n.fps||1);for(let T=0,I=u.length;T!==I;++T)s.push(MO(u[T]).scale(f));const w=new this(n.name,n.duration,s,n.blendMode);return w.uuid=n.uuid,w}static toJSON(n){const s=[],u=n.tracks,f={name:n.name,duration:n.duration,tracks:s,uuid:n.uuid,blendMode:n.blendMode};for(let w=0,T=u.length;w!==T;++w)s.push(nc.toJSON(u[w]));return f}static CreateFromMorphTargetSequence(n,s,u,f){const w=s.length,T=[];for(let I=0;I<w;I++){let F=[],U=[];F.push((I+w-1)%w,I,(I+1)%w),U.push(0,1,0);const G=mS(F);F=PE(F,1,G),U=PE(U,1,G),!f&&F[0]===0&&(F.push(w),U.push(U[0])),T.push(new nA(".morphTargetInfluences["+s[I].name+"]",F,U).scale(1/u))}return new this(n,-1,T)}static findByName(n,s){let u=n;if(!Array.isArray(n)){const f=n;u=f.geometry&&f.geometry.animations||f.animations}for(let f=0;f<u.length;f++)if(u[f].name===s)return u[f];return null}static CreateClipsFromMorphTargetSequences(n,s,u){const f={},w=/^([\w-]*?)([\d]+)$/;for(let I=0,F=n.length;I<F;I++){const U=n[I],G=U.name.match(w);if(G&&G.length>1){const V=G[1];let j=f[V];j||(f[V]=j=[]),j.push(U)}}const T=[];for(const I in f)T.push(this.CreateFromMorphTargetSequence(I,f[I],s,u));return T}static parseAnimation(n,s){if(!n)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const u=function(V,j,Y,re,ie){if(Y.length!==0){const $=[],de=[];OE(Y,$,de,re),$.length!==0&&ie.push(new V(j,$,de))}},f=[],w=n.name||"default",T=n.fps||30,I=n.blendMode;let F=n.length||-1;const U=n.hierarchy||[];for(let V=0;V<U.length;V++){const j=U[V].keys;if(!(!j||j.length===0))if(j[0].morphTargets){const Y={};let re;for(re=0;re<j.length;re++)if(j[re].morphTargets)for(let ie=0;ie<j[re].morphTargets.length;ie++)Y[j[re].morphTargets[ie]]=-1;for(const ie in Y){const $=[],de=[];for(let Ce=0;Ce!==j[re].morphTargets.length;++Ce){const ge=j[re];$.push(ge.time),de.push(ge.morphTarget===ie?1:0)}f.push(new nA(".morphTargetInfluence["+ie+"]",$,de))}F=Y.length*T}else{const Y=".bones["+s[V].name+"]";u(iA,Y+".position",j,"pos",f),u(Np,Y+".quaternion",j,"rot",f),u(iA,Y+".scale",j,"scl",f)}}return f.length===0?null:new this(w,F,f,I)}resetDuration(){const n=this.tracks;let s=0;for(let u=0,f=n.length;u!==f;++u){const w=this.tracks[u];s=Math.max(s,w.times[w.times.length-1])}return this.duration=s,this}trim(){for(let n=0;n<this.tracks.length;n++)this.tracks[n].trim(0,this.duration);return this}validate(){let n=!0;for(let s=0;s<this.tracks.length;s++)n=n&&this.tracks[s].validate();return n}optimize(){for(let n=0;n<this.tracks.length;n++)this.tracks[n].optimize();return this}clone(){const n=[];for(let s=0;s<this.tracks.length;s++)n.push(this.tracks[s].clone());return new this.constructor(this.name,this.duration,n,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function CO(B){switch(B.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return nA;case"vector":case"vector2":case"vector3":case"vector4":return iA;case"color":return NE;case"quaternion":return Np;case"bool":case"boolean":return Xd;case"string":return Kd}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+B)}function MO(B){if(B.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const n=CO(B.type);if(B.times===void 0){const s=[],u=[];OE(B.keys,s,u,"value"),B.times=s,B.values=u}return n.parse!==void 0?n.parse(B):new n(B.name,B.times,B.values,B.interpolation)}const Yd={enabled:!1,files:{},add:function(B,n){this.enabled!==!1&&(this.files[B]=n)},get:function(B){if(this.enabled!==!1)return this.files[B]},remove:function(B){delete this.files[B]},clear:function(){this.files={}}};class kE{constructor(n,s,u){const f=this;let w=!1,T=0,I=0,F;const U=[];this.onStart=void 0,this.onLoad=n,this.onProgress=s,this.onError=u,this.itemStart=function(G){I++,w===!1&&f.onStart!==void 0&&f.onStart(G,T,I),w=!0},this.itemEnd=function(G){T++,f.onProgress!==void 0&&f.onProgress(G,T,I),T===I&&(w=!1,f.onLoad!==void 0&&f.onLoad())},this.itemError=function(G){f.onError!==void 0&&f.onError(G)},this.resolveURL=function(G){return F?F(G):G},this.setURLModifier=function(G){return F=G,this},this.addHandler=function(G,V){return U.push(G,V),this},this.removeHandler=function(G){const V=U.indexOf(G);return V!==-1&&U.splice(V,2),this},this.getHandler=function(G){for(let V=0,j=U.length;V<j;V+=2){const Y=U[V],re=U[V+1];if(Y.global&&(Y.lastIndex=0),Y.test(G))return re}return null}}}const yS=new kE;class il{constructor(n){this.manager=n!==void 0?n:yS,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(n,s){const u=this;return new Promise(function(f,w){u.load(n,f,s,w)})}parse(){}setCrossOrigin(n){return this.crossOrigin=n,this}setWithCredentials(n){return this.withCredentials=n,this}setPath(n){return this.path=n,this}setResourcePath(n){return this.resourcePath=n,this}setRequestHeader(n){return this.requestHeader=n,this}}const Mu={};class bO extends Error{constructor(n,s){super(n),this.response=s}}class bu extends il{constructor(n){super(n)}load(n,s,u,f){n===void 0&&(n=""),this.path!==void 0&&(n=this.path+n),n=this.manager.resolveURL(n);const w=Yd.get(n);if(w!==void 0)return this.manager.itemStart(n),setTimeout(()=>{s&&s(w),this.manager.itemEnd(n)},0),w;if(Mu[n]!==void 0){Mu[n].push({onLoad:s,onProgress:u,onError:f});return}Mu[n]=[],Mu[n].push({onLoad:s,onProgress:u,onError:f});const T=new Request(n,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),I=this.mimeType,F=this.responseType;fetch(T).then(U=>{if(U.status===200||U.status===0){if(U.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||U.body===void 0||U.body.getReader===void 0)return U;const G=Mu[n],V=U.body.getReader(),j=U.headers.get("Content-Length")||U.headers.get("X-File-Size"),Y=j?parseInt(j):0,re=Y!==0;let ie=0;const $=new ReadableStream({start(de){Ce();function Ce(){V.read().then(({done:ge,value:we})=>{if(ge)de.close();else{ie+=we.byteLength;const Le=new ProgressEvent("progress",{lengthComputable:re,loaded:ie,total:Y});for(let Ye=0,it=G.length;Ye<it;Ye++){const Me=G[Ye];Me.onProgress&&Me.onProgress(Le)}de.enqueue(we),Ce()}})}}});return new Response($)}else throw new bO(`fetch for "${U.url}" responded with ${U.status}: ${U.statusText}`,U)}).then(U=>{switch(F){case"arraybuffer":return U.arrayBuffer();case"blob":return U.blob();case"document":return U.text().then(G=>new DOMParser().parseFromString(G,I));case"json":return U.json();default:if(I===void 0)return U.text();{const V=/charset="?([^;"\s]*)"?/i.exec(I),j=V&&V[1]?V[1].toLowerCase():void 0,Y=new TextDecoder(j);return U.arrayBuffer().then(re=>Y.decode(re))}}}).then(U=>{Yd.add(n,U);const G=Mu[n];delete Mu[n];for(let V=0,j=G.length;V<j;V++){const Y=G[V];Y.onLoad&&Y.onLoad(U)}}).catch(U=>{const G=Mu[n];if(G===void 0)throw this.manager.itemError(n),U;delete Mu[n];for(let V=0,j=G.length;V<j;V++){const Y=G[V];Y.onError&&Y.onError(U)}this.manager.itemError(n)}).finally(()=>{this.manager.itemEnd(n)}),this.manager.itemStart(n)}setResponseType(n){return this.responseType=n,this}setMimeType(n){return this.mimeType=n,this}}class SO extends il{constructor(n){super(n)}load(n,s,u,f){const w=this,T=new bu(this.manager);T.setPath(this.path),T.setRequestHeader(this.requestHeader),T.setWithCredentials(this.withCredentials),T.load(n,function(I){try{s(w.parse(JSON.parse(I)))}catch(F){f?f(F):console.error(F),w.manager.itemError(n)}},u,f)}parse(n){const s=[];for(let u=0;u<n.length;u++){const f=rA.parse(n[u]);s.push(f)}return s}}class TO extends il{constructor(n){super(n)}load(n,s,u,f){const w=this,T=[],I=new yE,F=new bu(this.manager);F.setPath(this.path),F.setResponseType("arraybuffer"),F.setRequestHeader(this.requestHeader),F.setWithCredentials(w.withCredentials);let U=0;function G(V){F.load(n[V],function(j){const Y=w.parse(j,!0);T[V]={width:Y.width,height:Y.height,format:Y.format,mipmaps:Y.mipmaps},U+=1,U===6&&(Y.mipmapCount===1&&(I.minFilter=Te),I.image=T,I.format=Y.format,I.needsUpdate=!0,s&&s(I))},u,f)}if(Array.isArray(n))for(let V=0,j=n.length;V<j;++V)G(V);else F.load(n,function(V){const j=w.parse(V,!0);if(j.isCubemap){const Y=j.mipmaps.length/j.mipmapCount;for(let re=0;re<Y;re++){T[re]={mipmaps:[]};for(let ie=0;ie<j.mipmapCount;ie++)T[re].mipmaps.push(j.mipmaps[re*j.mipmapCount+ie]),T[re].format=j.format,T[re].width=j.width,T[re].height=j.height}I.image=T}else I.image.width=j.width,I.image.height=j.height,I.mipmaps=j.mipmaps;j.mipmapCount===1&&(I.minFilter=Te),I.format=j.format,I.needsUpdate=!0,s&&s(I)},u,f);return I}}class sA extends il{constructor(n){super(n)}load(n,s,u,f){this.path!==void 0&&(n=this.path+n),n=this.manager.resolveURL(n);const w=this,T=Yd.get(n);if(T!==void 0)return w.manager.itemStart(n),setTimeout(function(){s&&s(T),w.manager.itemEnd(n)},0),T;const I=Lc("img");function F(){G(),Yd.add(n,this),s&&s(this),w.manager.itemEnd(n)}function U(V){G(),f&&f(V),w.manager.itemError(n),w.manager.itemEnd(n)}function G(){I.removeEventListener("load",F,!1),I.removeEventListener("error",U,!1)}return I.addEventListener("load",F,!1),I.addEventListener("error",U,!1),n.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(I.crossOrigin=this.crossOrigin),w.manager.itemStart(n),I.src=n,I}}class IO extends il{constructor(n){super(n)}load(n,s,u,f){const w=new Qc,T=new sA(this.manager);T.setCrossOrigin(this.crossOrigin),T.setPath(this.path);let I=0;function F(U){T.load(n[U],function(G){w.images[U]=G,I++,I===6&&(w.needsUpdate=!0,s&&s(w))},void 0,f)}for(let U=0;U<n.length;++U)F(U);return w}}class RO extends il{constructor(n){super(n)}load(n,s,u,f){const w=this,T=new Bp,I=new bu(this.manager);return I.setResponseType("arraybuffer"),I.setRequestHeader(this.requestHeader),I.setPath(this.path),I.setWithCredentials(w.withCredentials),I.load(n,function(F){const U=w.parse(F);U&&(U.image!==void 0?T.image=U.image:U.data!==void 0&&(T.image.width=U.width,T.image.height=U.height,T.image.data=U.data),T.wrapS=U.wrapS!==void 0?U.wrapS:Oe,T.wrapT=U.wrapT!==void 0?U.wrapT:Oe,T.magFilter=U.magFilter!==void 0?U.magFilter:Te,T.minFilter=U.minFilter!==void 0?U.minFilter:Te,T.anisotropy=U.anisotropy!==void 0?U.anisotropy:1,U.encoding!==void 0&&(T.encoding=U.encoding),U.flipY!==void 0&&(T.flipY=U.flipY),U.format!==void 0&&(T.format=U.format),U.type!==void 0&&(T.type=U.type),U.mipmaps!==void 0&&(T.mipmaps=U.mipmaps,T.minFilter=Ht),U.mipmapCount===1&&(T.minFilter=Te),U.generateMipmaps!==void 0&&(T.generateMipmaps=U.generateMipmaps),T.needsUpdate=!0,s&&s(T,U))},u,f),T}}class BO extends il{constructor(n){super(n)}load(n,s,u,f){const w=new yr,T=new sA(this.manager);return T.setCrossOrigin(this.crossOrigin),T.setPath(this.path),T.load(n,function(I){w.image=I,w.needsUpdate=!0,s!==void 0&&s(w)},u,f),w}}class bh extends dr{constructor(n,s=1){super(),this.isLight=!0,this.type="Light",this.color=new kn(n),this.intensity=s}dispose(){}copy(n,s){return super.copy(n,s),this.color.copy(n.color),this.intensity=n.intensity,this}toJSON(n){const s=super.toJSON(n);return s.object.color=this.color.getHex(),s.object.intensity=this.intensity,this.groundColor!==void 0&&(s.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(s.object.distance=this.distance),this.angle!==void 0&&(s.object.angle=this.angle),this.decay!==void 0&&(s.object.decay=this.decay),this.penumbra!==void 0&&(s.object.penumbra=this.penumbra),this.shadow!==void 0&&(s.object.shadow=this.shadow.toJSON()),s}}class xS extends bh{constructor(n,s,u){super(n,u),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(dr.DefaultUp),this.updateMatrix(),this.groundColor=new kn(s)}copy(n,s){return super.copy(n,s),this.groundColor.copy(n.groundColor),this}}const UE=new Jn,ES=new Qe,_S=new Qe;class zE{constructor(n){this.camera=n,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new jt(512,512),this.map=null,this.mapPass=null,this.matrix=new Jn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Eh,this._frameExtents=new jt(1,1),this._viewportCount=1,this._viewports=[new hr(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(n){const s=this.camera,u=this.matrix;ES.setFromMatrixPosition(n.matrixWorld),s.position.copy(ES),_S.setFromMatrixPosition(n.target.matrixWorld),s.lookAt(_S),s.updateMatrixWorld(),UE.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),this._frustum.setFromProjectionMatrix(UE),u.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),u.multiply(UE)}getViewport(n){return this._viewports[n]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(n){return this.camera=n.camera.clone(),this.bias=n.bias,this.radius=n.radius,this.mapSize.copy(n.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const n={};return this.bias!==0&&(n.bias=this.bias),this.normalBias!==0&&(n.normalBias=this.normalBias),this.radius!==1&&(n.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(n.mapSize=this.mapSize.toArray()),n.camera=this.camera.toJSON(!1).object,delete n.camera.matrix,n}}class LO extends zE{constructor(){super(new Ts(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(n){const s=this.camera,u=El*2*n.angle*this.focus,f=this.mapSize.width/this.mapSize.height,w=n.distance||s.far;(u!==s.fov||f!==s.aspect||w!==s.far)&&(s.fov=u,s.aspect=f,s.far=w,s.updateProjectionMatrix()),super.updateMatrices(n)}copy(n){return super.copy(n),this.focus=n.focus,this}}class wS extends bh{constructor(n,s,u=0,f=Math.PI/3,w=0,T=2){super(n,s),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(dr.DefaultUp),this.updateMatrix(),this.target=new dr,this.distance=u,this.angle=f,this.penumbra=w,this.decay=T,this.map=null,this.shadow=new LO}get power(){return this.intensity*Math.PI}set power(n){this.intensity=n/Math.PI}dispose(){this.shadow.dispose()}copy(n,s){return super.copy(n,s),this.distance=n.distance,this.angle=n.angle,this.penumbra=n.penumbra,this.decay=n.decay,this.target=n.target.clone(),this.shadow=n.shadow.clone(),this}}const CS=new Jn,oA=new Qe,GE=new Qe;class DO extends zE{constructor(){super(new Ts(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new jt(4,2),this._viewportCount=6,this._viewports=[new hr(2,1,1,1),new hr(0,1,1,1),new hr(3,1,1,1),new hr(1,1,1,1),new hr(3,0,1,1),new hr(1,0,1,1)],this._cubeDirections=[new Qe(1,0,0),new Qe(-1,0,0),new Qe(0,0,1),new Qe(0,0,-1),new Qe(0,1,0),new Qe(0,-1,0)],this._cubeUps=[new Qe(0,1,0),new Qe(0,1,0),new Qe(0,1,0),new Qe(0,1,0),new Qe(0,0,1),new Qe(0,0,-1)]}updateMatrices(n,s=0){const u=this.camera,f=this.matrix,w=n.distance||u.far;w!==u.far&&(u.far=w,u.updateProjectionMatrix()),oA.setFromMatrixPosition(n.matrixWorld),u.position.copy(oA),GE.copy(u.position),GE.add(this._cubeDirections[s]),u.up.copy(this._cubeUps[s]),u.lookAt(GE),u.updateMatrixWorld(),f.makeTranslation(-oA.x,-oA.y,-oA.z),CS.multiplyMatrices(u.projectionMatrix,u.matrixWorldInverse),this._frustum.setFromProjectionMatrix(CS)}}class MS extends bh{constructor(n,s,u=0,f=2){super(n,s),this.isPointLight=!0,this.type="PointLight",this.distance=u,this.decay=f,this.shadow=new DO}get power(){return this.intensity*4*Math.PI}set power(n){this.intensity=n/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(n,s){return super.copy(n,s),this.distance=n.distance,this.decay=n.decay,this.shadow=n.shadow.clone(),this}}class PO extends zE{constructor(){super(new Cv(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class bS extends bh{constructor(n,s){super(n,s),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(dr.DefaultUp),this.updateMatrix(),this.target=new dr,this.shadow=new PO}dispose(){this.shadow.dispose()}copy(n){return super.copy(n),this.target=n.target.clone(),this.shadow=n.shadow.clone(),this}}class SS extends bh{constructor(n,s){super(n,s),this.isAmbientLight=!0,this.type="AmbientLight"}}class TS extends bh{constructor(n,s,u=10,f=10){super(n,s),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=u,this.height=f}get power(){return this.intensity*this.width*this.height*Math.PI}set power(n){this.intensity=n/(this.width*this.height*Math.PI)}copy(n){return super.copy(n),this.width=n.width,this.height=n.height,this}toJSON(n){const s=super.toJSON(n);return s.object.width=this.width,s.object.height=this.height,s}}class IS{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let n=0;n<9;n++)this.coefficients.push(new Qe)}set(n){for(let s=0;s<9;s++)this.coefficients[s].copy(n[s]);return this}zero(){for(let n=0;n<9;n++)this.coefficients[n].set(0,0,0);return this}getAt(n,s){const u=n.x,f=n.y,w=n.z,T=this.coefficients;return s.copy(T[0]).multiplyScalar(.282095),s.addScaledVector(T[1],.488603*f),s.addScaledVector(T[2],.488603*w),s.addScaledVector(T[3],.488603*u),s.addScaledVector(T[4],1.092548*(u*f)),s.addScaledVector(T[5],1.092548*(f*w)),s.addScaledVector(T[6],.315392*(3*w*w-1)),s.addScaledVector(T[7],1.092548*(u*w)),s.addScaledVector(T[8],.546274*(u*u-f*f)),s}getIrradianceAt(n,s){const u=n.x,f=n.y,w=n.z,T=this.coefficients;return s.copy(T[0]).multiplyScalar(.886227),s.addScaledVector(T[1],1.023328*f),s.addScaledVector(T[2],1.023328*w),s.addScaledVector(T[3],1.023328*u),s.addScaledVector(T[4],.858086*u*f),s.addScaledVector(T[5],.858086*f*w),s.addScaledVector(T[6],.743125*w*w-.247708),s.addScaledVector(T[7],.858086*u*w),s.addScaledVector(T[8],.429043*(u*u-f*f)),s}add(n){for(let s=0;s<9;s++)this.coefficients[s].add(n.coefficients[s]);return this}addScaledSH(n,s){for(let u=0;u<9;u++)this.coefficients[u].addScaledVector(n.coefficients[u],s);return this}scale(n){for(let s=0;s<9;s++)this.coefficients[s].multiplyScalar(n);return this}lerp(n,s){for(let u=0;u<9;u++)this.coefficients[u].lerp(n.coefficients[u],s);return this}equals(n){for(let s=0;s<9;s++)if(!this.coefficients[s].equals(n.coefficients[s]))return!1;return!0}copy(n){return this.set(n.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(n,s=0){const u=this.coefficients;for(let f=0;f<9;f++)u[f].fromArray(n,s+f*3);return this}toArray(n=[],s=0){const u=this.coefficients;for(let f=0;f<9;f++)u[f].toArray(n,s+f*3);return n}static getBasisAt(n,s){const u=n.x,f=n.y,w=n.z;s[0]=.282095,s[1]=.488603*f,s[2]=.488603*w,s[3]=.488603*u,s[4]=1.092548*u*f,s[5]=1.092548*f*w,s[6]=.315392*(3*w*w-1),s[7]=1.092548*u*w,s[8]=.546274*(u*u-f*f)}}class Yv extends bh{constructor(n=new IS,s=1){super(void 0,s),this.isLightProbe=!0,this.sh=n}copy(n){return super.copy(n),this.sh.copy(n.sh),this}fromJSON(n){return this.intensity=n.intensity,this.sh.fromArray(n.sh),this}toJSON(n){const s=super.toJSON(n);return s.object.sh=this.sh.toArray(),s}}class qv extends il{constructor(n){super(n),this.textures={}}load(n,s,u,f){const w=this,T=new bu(w.manager);T.setPath(w.path),T.setRequestHeader(w.requestHeader),T.setWithCredentials(w.withCredentials),T.load(n,function(I){try{s(w.parse(JSON.parse(I)))}catch(F){f?f(F):console.error(F),w.manager.itemError(n)}},u,f)}parse(n){const s=this.textures;function u(w){return s[w]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",w),s[w]}const f=qv.createMaterialFromType(n.type);if(n.uuid!==void 0&&(f.uuid=n.uuid),n.name!==void 0&&(f.name=n.name),n.color!==void 0&&f.color!==void 0&&f.color.setHex(n.color),n.roughness!==void 0&&(f.roughness=n.roughness),n.metalness!==void 0&&(f.metalness=n.metalness),n.sheen!==void 0&&(f.sheen=n.sheen),n.sheenColor!==void 0&&(f.sheenColor=new kn().setHex(n.sheenColor)),n.sheenRoughness!==void 0&&(f.sheenRoughness=n.sheenRoughness),n.emissive!==void 0&&f.emissive!==void 0&&f.emissive.setHex(n.emissive),n.specular!==void 0&&f.specular!==void 0&&f.specular.setHex(n.specular),n.specularIntensity!==void 0&&(f.specularIntensity=n.specularIntensity),n.specularColor!==void 0&&f.specularColor!==void 0&&f.specularColor.setHex(n.specularColor),n.shininess!==void 0&&(f.shininess=n.shininess),n.clearcoat!==void 0&&(f.clearcoat=n.clearcoat),n.clearcoatRoughness!==void 0&&(f.clearcoatRoughness=n.clearcoatRoughness),n.iridescence!==void 0&&(f.iridescence=n.iridescence),n.iridescenceIOR!==void 0&&(f.iridescenceIOR=n.iridescenceIOR),n.iridescenceThicknessRange!==void 0&&(f.iridescenceThicknessRange=n.iridescenceThicknessRange),n.transmission!==void 0&&(f.transmission=n.transmission),n.thickness!==void 0&&(f.thickness=n.thickness),n.attenuationDistance!==void 0&&(f.attenuationDistance=n.attenuationDistance),n.attenuationColor!==void 0&&f.attenuationColor!==void 0&&f.attenuationColor.setHex(n.attenuationColor),n.fog!==void 0&&(f.fog=n.fog),n.flatShading!==void 0&&(f.flatShading=n.flatShading),n.blending!==void 0&&(f.blending=n.blending),n.combine!==void 0&&(f.combine=n.combine),n.side!==void 0&&(f.side=n.side),n.shadowSide!==void 0&&(f.shadowSide=n.shadowSide),n.opacity!==void 0&&(f.opacity=n.opacity),n.transparent!==void 0&&(f.transparent=n.transparent),n.alphaTest!==void 0&&(f.alphaTest=n.alphaTest),n.depthTest!==void 0&&(f.depthTest=n.depthTest),n.depthWrite!==void 0&&(f.depthWrite=n.depthWrite),n.colorWrite!==void 0&&(f.colorWrite=n.colorWrite),n.stencilWrite!==void 0&&(f.stencilWrite=n.stencilWrite),n.stencilWriteMask!==void 0&&(f.stencilWriteMask=n.stencilWriteMask),n.stencilFunc!==void 0&&(f.stencilFunc=n.stencilFunc),n.stencilRef!==void 0&&(f.stencilRef=n.stencilRef),n.stencilFuncMask!==void 0&&(f.stencilFuncMask=n.stencilFuncMask),n.stencilFail!==void 0&&(f.stencilFail=n.stencilFail),n.stencilZFail!==void 0&&(f.stencilZFail=n.stencilZFail),n.stencilZPass!==void 0&&(f.stencilZPass=n.stencilZPass),n.wireframe!==void 0&&(f.wireframe=n.wireframe),n.wireframeLinewidth!==void 0&&(f.wireframeLinewidth=n.wireframeLinewidth),n.wireframeLinecap!==void 0&&(f.wireframeLinecap=n.wireframeLinecap),n.wireframeLinejoin!==void 0&&(f.wireframeLinejoin=n.wireframeLinejoin),n.rotation!==void 0&&(f.rotation=n.rotation),n.linewidth!==1&&(f.linewidth=n.linewidth),n.dashSize!==void 0&&(f.dashSize=n.dashSize),n.gapSize!==void 0&&(f.gapSize=n.gapSize),n.scale!==void 0&&(f.scale=n.scale),n.polygonOffset!==void 0&&(f.polygonOffset=n.polygonOffset),n.polygonOffsetFactor!==void 0&&(f.polygonOffsetFactor=n.polygonOffsetFactor),n.polygonOffsetUnits!==void 0&&(f.polygonOffsetUnits=n.polygonOffsetUnits),n.dithering!==void 0&&(f.dithering=n.dithering),n.alphaToCoverage!==void 0&&(f.alphaToCoverage=n.alphaToCoverage),n.premultipliedAlpha!==void 0&&(f.premultipliedAlpha=n.premultipliedAlpha),n.visible!==void 0&&(f.visible=n.visible),n.toneMapped!==void 0&&(f.toneMapped=n.toneMapped),n.userData!==void 0&&(f.userData=n.userData),n.vertexColors!==void 0&&(typeof n.vertexColors=="number"?f.vertexColors=n.vertexColors>0:f.vertexColors=n.vertexColors),n.uniforms!==void 0)for(const w in n.uniforms){const T=n.uniforms[w];switch(f.uniforms[w]={},T.type){case"t":f.uniforms[w].value=u(T.value);break;case"c":f.uniforms[w].value=new kn().setHex(T.value);break;case"v2":f.uniforms[w].value=new jt().fromArray(T.value);break;case"v3":f.uniforms[w].value=new Qe().fromArray(T.value);break;case"v4":f.uniforms[w].value=new hr().fromArray(T.value);break;case"m3":f.uniforms[w].value=new kr().fromArray(T.value);break;case"m4":f.uniforms[w].value=new Jn().fromArray(T.value);break;default:f.uniforms[w].value=T.value}}if(n.defines!==void 0&&(f.defines=n.defines),n.vertexShader!==void 0&&(f.vertexShader=n.vertexShader),n.fragmentShader!==void 0&&(f.fragmentShader=n.fragmentShader),n.glslVersion!==void 0&&(f.glslVersion=n.glslVersion),n.extensions!==void 0)for(const w in n.extensions)f.extensions[w]=n.extensions[w];if(n.size!==void 0&&(f.size=n.size),n.sizeAttenuation!==void 0&&(f.sizeAttenuation=n.sizeAttenuation),n.map!==void 0&&(f.map=u(n.map)),n.matcap!==void 0&&(f.matcap=u(n.matcap)),n.alphaMap!==void 0&&(f.alphaMap=u(n.alphaMap)),n.bumpMap!==void 0&&(f.bumpMap=u(n.bumpMap)),n.bumpScale!==void 0&&(f.bumpScale=n.bumpScale),n.normalMap!==void 0&&(f.normalMap=u(n.normalMap)),n.normalMapType!==void 0&&(f.normalMapType=n.normalMapType),n.normalScale!==void 0){let w=n.normalScale;Array.isArray(w)===!1&&(w=[w,w]),f.normalScale=new jt().fromArray(w)}return n.displacementMap!==void 0&&(f.displacementMap=u(n.displacementMap)),n.displacementScale!==void 0&&(f.displacementScale=n.displacementScale),n.displacementBias!==void 0&&(f.displacementBias=n.displacementBias),n.roughnessMap!==void 0&&(f.roughnessMap=u(n.roughnessMap)),n.metalnessMap!==void 0&&(f.metalnessMap=u(n.metalnessMap)),n.emissiveMap!==void 0&&(f.emissiveMap=u(n.emissiveMap)),n.emissiveIntensity!==void 0&&(f.emissiveIntensity=n.emissiveIntensity),n.specularMap!==void 0&&(f.specularMap=u(n.specularMap)),n.specularIntensityMap!==void 0&&(f.specularIntensityMap=u(n.specularIntensityMap)),n.specularColorMap!==void 0&&(f.specularColorMap=u(n.specularColorMap)),n.envMap!==void 0&&(f.envMap=u(n.envMap)),n.envMapIntensity!==void 0&&(f.envMapIntensity=n.envMapIntensity),n.reflectivity!==void 0&&(f.reflectivity=n.reflectivity),n.refractionRatio!==void 0&&(f.refractionRatio=n.refractionRatio),n.lightMap!==void 0&&(f.lightMap=u(n.lightMap)),n.lightMapIntensity!==void 0&&(f.lightMapIntensity=n.lightMapIntensity),n.aoMap!==void 0&&(f.aoMap=u(n.aoMap)),n.aoMapIntensity!==void 0&&(f.aoMapIntensity=n.aoMapIntensity),n.gradientMap!==void 0&&(f.gradientMap=u(n.gradientMap)),n.clearcoatMap!==void 0&&(f.clearcoatMap=u(n.clearcoatMap)),n.clearcoatRoughnessMap!==void 0&&(f.clearcoatRoughnessMap=u(n.clearcoatRoughnessMap)),n.clearcoatNormalMap!==void 0&&(f.clearcoatNormalMap=u(n.clearcoatNormalMap)),n.clearcoatNormalScale!==void 0&&(f.clearcoatNormalScale=new jt().fromArray(n.clearcoatNormalScale)),n.iridescenceMap!==void 0&&(f.iridescenceMap=u(n.iridescenceMap)),n.iridescenceThicknessMap!==void 0&&(f.iridescenceThicknessMap=u(n.iridescenceThicknessMap)),n.transmissionMap!==void 0&&(f.transmissionMap=u(n.transmissionMap)),n.thicknessMap!==void 0&&(f.thicknessMap=u(n.thicknessMap)),n.sheenColorMap!==void 0&&(f.sheenColorMap=u(n.sheenColorMap)),n.sheenRoughnessMap!==void 0&&(f.sheenRoughnessMap=u(n.sheenRoughnessMap)),f}setTextures(n){return this.textures=n,this}static createMaterialFromType(n){const s={ShadowMaterial:oS,SpriteMaterial:fE,RawShaderMaterial:aS,ShaderMaterial:nl,PointsMaterial:AE,MeshPhysicalMaterial:lS,MeshStandardMaterial:LE,MeshPhongMaterial:cS,MeshToonMaterial:uS,MeshNormalMaterial:hS,MeshLambertMaterial:dS,MeshDepthMaterial:cE,MeshDistanceMaterial:uE,MeshBasicMaterial:Uc,MeshMatcapMaterial:fS,LineDashedMaterial:pS,LineBasicMaterial:ma,Material:bo};return new s[n]}}class HE{static decodeText(n){if(typeof TextDecoder<"u")return new TextDecoder().decode(n);let s="";for(let u=0,f=n.length;u<f;u++)s+=String.fromCharCode(n[u]);try{return decodeURIComponent(escape(s))}catch{return s}}static extractUrlBase(n){const s=n.lastIndexOf("/");return s===-1?"./":n.slice(0,s+1)}static resolveURL(n,s){return typeof n!="string"||n===""?"":(/^https?:\/\//i.test(s)&&/^\//.test(n)&&(s=s.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(n)||/^data:.*,.*$/i.test(n)||/^blob:.*$/i.test(n)?n:s+n)}}class RS extends Wi{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(n){return super.copy(n),this.instanceCount=n.instanceCount,this}toJSON(){const n=super.toJSON();return n.instanceCount=this.instanceCount,n.isInstancedBufferGeometry=!0,n}}class BS extends il{constructor(n){super(n)}load(n,s,u,f){const w=this,T=new bu(w.manager);T.setPath(w.path),T.setRequestHeader(w.requestHeader),T.setWithCredentials(w.withCredentials),T.load(n,function(I){try{s(w.parse(JSON.parse(I)))}catch(F){f?f(F):console.error(F),w.manager.itemError(n)}},u,f)}parse(n){const s={},u={};function f(Y,re){if(s[re]!==void 0)return s[re];const $=Y.interleavedBuffers[re],de=w(Y,$.buffer),Ce=Ql($.type,de),ge=new Rv(Ce,$.stride);return ge.uuid=$.uuid,s[re]=ge,ge}function w(Y,re){if(u[re]!==void 0)return u[re];const $=Y.arrayBuffers[re],de=new Uint32Array($).buffer;return u[re]=de,de}const T=n.isInstancedBufferGeometry?new RS:new Wi,I=n.data.index;if(I!==void 0){const Y=Ql(I.type,I.array);T.setIndex(new Hr(Y,1))}const F=n.data.attributes;for(const Y in F){const re=F[Y];let ie;if(re.isInterleavedBufferAttribute){const $=f(n.data,re.data);ie=new Hd($,re.itemSize,re.offset,re.normalized)}else{const $=Ql(re.type,re.array),de=re.isInstancedBufferAttribute?Lp:Hr;ie=new de($,re.itemSize,re.normalized)}re.name!==void 0&&(ie.name=re.name),re.usage!==void 0&&ie.setUsage(re.usage),re.updateRange!==void 0&&(ie.updateRange.offset=re.updateRange.offset,ie.updateRange.count=re.updateRange.count),T.setAttribute(Y,ie)}const U=n.data.morphAttributes;if(U)for(const Y in U){const re=U[Y],ie=[];for(let $=0,de=re.length;$<de;$++){const Ce=re[$];let ge;if(Ce.isInterleavedBufferAttribute){const we=f(n.data,Ce.data);ge=new Hd(we,Ce.itemSize,Ce.offset,Ce.normalized)}else{const we=Ql(Ce.type,Ce.array);ge=new Hr(we,Ce.itemSize,Ce.normalized)}Ce.name!==void 0&&(ge.name=Ce.name),ie.push(ge)}T.morphAttributes[Y]=ie}n.data.morphTargetsRelative&&(T.morphTargetsRelative=!0);const V=n.data.groups||n.data.drawcalls||n.data.offsets;if(V!==void 0)for(let Y=0,re=V.length;Y!==re;++Y){const ie=V[Y];T.addGroup(ie.start,ie.count,ie.materialIndex)}const j=n.data.boundingSphere;if(j!==void 0){const Y=new Qe;j.center!==void 0&&Y.fromArray(j.center),T.boundingSphere=new Ba(Y,j.radius)}return n.name&&(T.name=n.name),n.userData&&(T.userData=n.userData),T}}class OO extends il{constructor(n){super(n)}load(n,s,u,f){const w=this,T=this.path===""?HE.extractUrlBase(n):this.path;this.resourcePath=this.resourcePath||T;const I=new bu(this.manager);I.setPath(this.path),I.setRequestHeader(this.requestHeader),I.setWithCredentials(this.withCredentials),I.load(n,function(F){let U=null;try{U=JSON.parse(F)}catch(V){f!==void 0&&f(V),console.error("THREE:ObjectLoader: Can't parse "+n+".",V.message);return}const G=U.metadata;if(G===void 0||G.type===void 0||G.type.toLowerCase()==="geometry"){f!==void 0&&f(new Error("THREE.ObjectLoader: Can't load "+n)),console.error("THREE.ObjectLoader: Can't load "+n);return}w.parse(U,s)},u,f)}async loadAsync(n,s){const u=this,f=this.path===""?HE.extractUrlBase(n):this.path;this.resourcePath=this.resourcePath||f;const w=new bu(this.manager);w.setPath(this.path),w.setRequestHeader(this.requestHeader),w.setWithCredentials(this.withCredentials);const T=await w.loadAsync(n,s),I=JSON.parse(T),F=I.metadata;if(F===void 0||F.type===void 0||F.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+n);return await u.parseAsync(I)}parse(n,s){const u=this.parseAnimations(n.animations),f=this.parseShapes(n.shapes),w=this.parseGeometries(n.geometries,f),T=this.parseImages(n.images,function(){s!==void 0&&s(U)}),I=this.parseTextures(n.textures,T),F=this.parseMaterials(n.materials,I),U=this.parseObject(n.object,w,F,I,u),G=this.parseSkeletons(n.skeletons,U);if(this.bindSkeletons(U,G),s!==void 0){let V=!1;for(const j in T)if(T[j].data instanceof HTMLImageElement){V=!0;break}V===!1&&s(U)}return U}async parseAsync(n){const s=this.parseAnimations(n.animations),u=this.parseShapes(n.shapes),f=this.parseGeometries(n.geometries,u),w=await this.parseImagesAsync(n.images),T=this.parseTextures(n.textures,w),I=this.parseMaterials(n.materials,T),F=this.parseObject(n.object,f,I,T,s),U=this.parseSkeletons(n.skeletons,F);return this.bindSkeletons(F,U),F}parseShapes(n){const s={};if(n!==void 0)for(let u=0,f=n.length;u<f;u++){const w=new Qd().fromJSON(n[u]);s[w.uuid]=w}return s}parseSkeletons(n,s){const u={},f={};if(s.traverse(function(w){w.isBone&&(f[w.uuid]=w)}),n!==void 0)for(let w=0,T=n.length;w<T;w++){const I=new Ov().fromJSON(n[w],f);u[I.uuid]=I}return u}parseGeometries(n,s){const u={};if(n!==void 0){const w=new BS;for(let T=0,I=n.length;T<I;T++){let F;const U=n[T];switch(U.type){case"BufferGeometry":case"InstancedBufferGeometry":F=w.parse(U);break;case"Geometry":if("THREE"in window&&"LegacyJSONLoader"in THREE){var f=new THREE.LegacyJSONLoader;F=f.parse(U,this.resourcePath).geometry}else console.error('THREE.ObjectLoader: You have to import LegacyJSONLoader in order load geometry data of type "Geometry".');break;default:U.type in sS?F=sS[U.type].fromJSON(U,s):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${U.type}"`)}F.uuid=U.uuid,U.name!==void 0&&(F.name=U.name),F.isBufferGeometry===!0&&U.userData!==void 0&&(F.userData=U.userData),u[U.uuid]=F}}return u}parseMaterials(n,s){const u={},f={};if(n!==void 0){const w=new qv;w.setTextures(s);for(let T=0,I=n.length;T<I;T++){const F=n[T];u[F.uuid]===void 0&&(u[F.uuid]=w.parse(F)),f[F.uuid]=u[F.uuid]}}return f}parseAnimations(n){const s={};if(n!==void 0)for(let u=0;u<n.length;u++){const f=n[u],w=rA.parse(f);s[w.uuid]=w}return s}parseImages(n,s){const u=this,f={};let w;function T(F){return u.manager.itemStart(F),w.load(F,function(){u.manager.itemEnd(F)},void 0,function(){u.manager.itemError(F),u.manager.itemEnd(F)})}function I(F){if(typeof F=="string"){const U=F,G=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(U)?U:u.resourcePath+U;return T(G)}else return F.data?{data:Ql(F.type,F.data),width:F.width,height:F.height}:null}if(n!==void 0&&n.length>0){const F=new kE(s);w=new sA(F),w.setCrossOrigin(this.crossOrigin);for(let U=0,G=n.length;U<G;U++){const V=n[U],j=V.url;if(Array.isArray(j)){const Y=[];for(let re=0,ie=j.length;re<ie;re++){const $=j[re],de=I($);de!==null&&(de instanceof HTMLImageElement?Y.push(de):Y.push(new Bp(de.data,de.width,de.height)))}f[V.uuid]=new Ss(Y)}else{const Y=I(V.url);f[V.uuid]=new Ss(Y)}}}return f}async parseImagesAsync(n){const s=this,u={};let f;async function w(T){if(typeof T=="string"){const I=T,F=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(I)?I:s.resourcePath+I;return await f.loadAsync(F)}else return T.data?{data:Ql(T.type,T.data),width:T.width,height:T.height}:null}if(n!==void 0&&n.length>0){f=new sA(this.manager),f.setCrossOrigin(this.crossOrigin);for(let T=0,I=n.length;T<I;T++){const F=n[T],U=F.url;if(Array.isArray(U)){const G=[];for(let V=0,j=U.length;V<j;V++){const Y=U[V],re=await w(Y);re!==null&&(re instanceof HTMLImageElement?G.push(re):G.push(new Bp(re.data,re.width,re.height)))}u[F.uuid]=new Ss(G)}else{const G=await w(F.url);u[F.uuid]=new Ss(G)}}}return u}parseTextures(n,s){function u(w,T){return typeof w=="number"?w:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",w),T[w])}const f={};if(n!==void 0)for(let w=0,T=n.length;w<T;w++){const I=n[w];I.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',I.uuid),s[I.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",I.image);const F=s[I.image],U=F.data;let G;Array.isArray(U)?(G=new Qc,U.length===6&&(G.needsUpdate=!0)):(U&&U.data?G=new Bp:G=new yr,U&&(G.needsUpdate=!0)),G.source=F,G.uuid=I.uuid,I.name!==void 0&&(G.name=I.name),I.mapping!==void 0&&(G.mapping=u(I.mapping,FO)),I.offset!==void 0&&G.offset.fromArray(I.offset),I.repeat!==void 0&&G.repeat.fromArray(I.repeat),I.center!==void 0&&G.center.fromArray(I.center),I.rotation!==void 0&&(G.rotation=I.rotation),I.wrap!==void 0&&(G.wrapS=u(I.wrap[0],LS),G.wrapT=u(I.wrap[1],LS)),I.format!==void 0&&(G.format=I.format),I.type!==void 0&&(G.type=I.type),I.encoding!==void 0&&(G.encoding=I.encoding),I.minFilter!==void 0&&(G.minFilter=u(I.minFilter,DS)),I.magFilter!==void 0&&(G.magFilter=u(I.magFilter,DS)),I.anisotropy!==void 0&&(G.anisotropy=I.anisotropy),I.flipY!==void 0&&(G.flipY=I.flipY),I.premultiplyAlpha!==void 0&&(G.premultiplyAlpha=I.premultiplyAlpha),I.unpackAlignment!==void 0&&(G.unpackAlignment=I.unpackAlignment),I.userData!==void 0&&(G.userData=I.userData),f[I.uuid]=G}return f}parseObject(n,s,u,f,w){let T;function I(j){return s[j]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",j),s[j]}function F(j){if(j!==void 0){if(Array.isArray(j)){const Y=[];for(let re=0,ie=j.length;re<ie;re++){const $=j[re];u[$]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",$),Y.push(u[$])}return Y}return u[j]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",j),u[j]}}function U(j){return f[j]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",j),f[j]}let G,V;switch(n.type){case"Scene":T=new yb,n.background!==void 0&&(Number.isInteger(n.background)?T.background=new kn(n.background):T.background=U(n.background)),n.environment!==void 0&&(T.environment=U(n.environment)),n.fog!==void 0&&(n.fog.type==="Fog"?T.fog=new Iv(n.fog.color,n.fog.near,n.fog.far):n.fog.type==="FogExp2"&&(T.fog=new Tv(n.fog.color,n.fog.density))),n.backgroundBlurriness!==void 0&&(T.backgroundBlurriness=n.backgroundBlurriness);break;case"PerspectiveCamera":T=new Ts(n.fov,n.aspect,n.near,n.far),n.focus!==void 0&&(T.focus=n.focus),n.zoom!==void 0&&(T.zoom=n.zoom),n.filmGauge!==void 0&&(T.filmGauge=n.filmGauge),n.filmOffset!==void 0&&(T.filmOffset=n.filmOffset),n.view!==void 0&&(T.view=Object.assign({},n.view));break;case"OrthographicCamera":T=new Cv(n.left,n.right,n.top,n.bottom,n.near,n.far),n.zoom!==void 0&&(T.zoom=n.zoom),n.view!==void 0&&(T.view=Object.assign({},n.view));break;case"AmbientLight":T=new SS(n.color,n.intensity);break;case"DirectionalLight":T=new bS(n.color,n.intensity);break;case"PointLight":T=new MS(n.color,n.intensity,n.distance,n.decay);break;case"RectAreaLight":T=new TS(n.color,n.intensity,n.width,n.height);break;case"SpotLight":T=new wS(n.color,n.intensity,n.distance,n.angle,n.penumbra,n.decay);break;case"HemisphereLight":T=new xS(n.color,n.groundColor,n.intensity);break;case"LightProbe":T=new Yv().fromJSON(n);break;case"SkinnedMesh":G=I(n.geometry),V=F(n.material),T=new Rb(G,V),n.bindMode!==void 0&&(T.bindMode=n.bindMode),n.bindMatrix!==void 0&&T.bindMatrix.fromArray(n.bindMatrix),n.skeleton!==void 0&&(T.skeleton=n.skeleton);break;case"Mesh":G=I(n.geometry),V=F(n.material),T=new eo(G,V);break;case"InstancedMesh":G=I(n.geometry),V=F(n.material);const j=n.count,Y=n.instanceMatrix,re=n.instanceColor;T=new Pb(G,V,j),T.instanceMatrix=new Lp(new Float32Array(Y.array),16),re!==void 0&&(T.instanceColor=new Lp(new Float32Array(re.array),re.itemSize));break;case"LOD":T=new Mb;break;case"Line":T=new Mh(I(n.geometry),F(n.material));break;case"LineLoop":T=new zb(I(n.geometry),F(n.material));break;case"LineSegments":T=new $c(I(n.geometry),F(n.material));break;case"PointCloud":case"Points":T=new Hb(I(n.geometry),F(n.material));break;case"Sprite":T=new wb(F(n.material));break;case"Group":T=new Gd;break;case"Bone":T=new mE;break;default:T=new dr}if(T.uuid=n.uuid,n.name!==void 0&&(T.name=n.name),n.matrix!==void 0?(T.matrix.fromArray(n.matrix),n.matrixAutoUpdate!==void 0&&(T.matrixAutoUpdate=n.matrixAutoUpdate),T.matrixAutoUpdate&&T.matrix.decompose(T.position,T.quaternion,T.scale)):(n.position!==void 0&&T.position.fromArray(n.position),n.rotation!==void 0&&T.rotation.fromArray(n.rotation),n.quaternion!==void 0&&T.quaternion.fromArray(n.quaternion),n.scale!==void 0&&T.scale.fromArray(n.scale)),n.castShadow!==void 0&&(T.castShadow=n.castShadow),n.receiveShadow!==void 0&&(T.receiveShadow=n.receiveShadow),n.shadow&&(n.shadow.bias!==void 0&&(T.shadow.bias=n.shadow.bias),n.shadow.normalBias!==void 0&&(T.shadow.normalBias=n.shadow.normalBias),n.shadow.radius!==void 0&&(T.shadow.radius=n.shadow.radius),n.shadow.mapSize!==void 0&&T.shadow.mapSize.fromArray(n.shadow.mapSize),n.shadow.camera!==void 0&&(T.shadow.camera=this.parseObject(n.shadow.camera))),n.visible!==void 0&&(T.visible=n.visible),n.frustumCulled!==void 0&&(T.frustumCulled=n.frustumCulled),n.renderOrder!==void 0&&(T.renderOrder=n.renderOrder),n.userData!==void 0&&(T.userData=n.userData),n.layers!==void 0&&(T.layers.mask=n.layers),n.children!==void 0){const j=n.children;for(let Y=0;Y<j.length;Y++)T.add(this.parseObject(j[Y],s,u,f,w))}if(n.animations!==void 0){const j=n.animations;for(let Y=0;Y<j.length;Y++){const re=j[Y];T.animations.push(w[re])}}if(n.type==="LOD"){n.autoUpdate!==void 0&&(T.autoUpdate=n.autoUpdate);const j=n.levels;for(let Y=0;Y<j.length;Y++){const re=j[Y],ie=T.getObjectByProperty("uuid",re.object);ie!==void 0&&T.addLevel(ie,re.distance,re.hysteresis)}}return T}bindSkeletons(n,s){Object.keys(s).length!==0&&n.traverse(function(u){if(u.isSkinnedMesh===!0&&u.skeleton!==void 0){const f=s[u.skeleton];f===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",u.skeleton):u.bind(f,u.bindMatrix)}})}}const FO={UVMapping:me,CubeReflectionMapping:Re,CubeRefractionMapping:Se,EquirectangularReflectionMapping:Be,EquirectangularRefractionMapping:Ee,CubeUVReflectionMapping:Xe},LS={RepeatWrapping:fe,ClampToEdgeWrapping:Oe,MirroredRepeatWrapping:$e},DS={NearestFilter:le,NearestMipmapNearestFilter:Q,NearestMipmapLinearFilter:Ie,LinearFilter:Te,LinearMipmapNearestFilter:Ve,LinearMipmapLinearFilter:Ht};class NO extends il{constructor(n){super(n),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(n){return this.options=n,this}load(n,s,u,f){n===void 0&&(n=""),this.path!==void 0&&(n=this.path+n),n=this.manager.resolveURL(n);const w=this,T=Yd.get(n);if(T!==void 0)return w.manager.itemStart(n),setTimeout(function(){s&&s(T),w.manager.itemEnd(n)},0),T;const I={};I.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",I.headers=this.requestHeader,fetch(n,I).then(function(F){return F.blob()}).then(function(F){return createImageBitmap(F,Object.assign(w.options,{colorSpaceConversion:"none"}))}).then(function(F){Yd.add(n,F),s&&s(F),w.manager.itemEnd(n)}).catch(function(F){f&&f(F),w.manager.itemError(n),w.manager.itemEnd(n)}),w.manager.itemStart(n)}}let Jv;class VE{static getContext(){return Jv===void 0&&(Jv=new(window.AudioContext||window.webkitAudioContext)),Jv}static setContext(n){Jv=n}}class kO extends il{constructor(n){super(n)}load(n,s,u,f){const w=this,T=new bu(this.manager);T.setResponseType("arraybuffer"),T.setPath(this.path),T.setRequestHeader(this.requestHeader),T.setWithCredentials(this.withCredentials),T.load(n,function(I){try{const F=I.slice(0);VE.getContext().decodeAudioData(F,function(G){s(G)})}catch(F){f?f(F):console.error(F),w.manager.itemError(n)}},u,f)}}class UO extends Yv{constructor(n,s,u=1){super(void 0,u),this.isHemisphereLightProbe=!0;const f=new kn().set(n),w=new kn().set(s),T=new Qe(f.r,f.g,f.b),I=new Qe(w.r,w.g,w.b),F=Math.sqrt(Math.PI),U=F*Math.sqrt(.75);this.sh.coefficients[0].copy(T).add(I).multiplyScalar(F),this.sh.coefficients[1].copy(T).sub(I).multiplyScalar(U)}}class zO extends Yv{constructor(n,s=1){super(void 0,s),this.isAmbientLightProbe=!0;const u=new kn().set(n);this.sh.coefficients[0].set(u.r,u.g,u.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const PS=new Jn,OS=new Jn,qd=new Jn;class GO{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Ts,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Ts,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(n){const s=this._cache;if(s.focus!==n.focus||s.fov!==n.fov||s.aspect!==n.aspect*this.aspect||s.near!==n.near||s.far!==n.far||s.zoom!==n.zoom||s.eyeSep!==this.eyeSep){s.focus=n.focus,s.fov=n.fov,s.aspect=n.aspect*this.aspect,s.near=n.near,s.far=n.far,s.zoom=n.zoom,s.eyeSep=this.eyeSep,qd.copy(n.projectionMatrix);const f=s.eyeSep/2,w=f*s.near/s.focus,T=s.near*Math.tan(xo*s.fov*.5)/s.zoom;let I,F;OS.elements[12]=-f,PS.elements[12]=f,I=-T*s.aspect+w,F=T*s.aspect+w,qd.elements[0]=2*s.near/(F-I),qd.elements[8]=(F+I)/(F-I),this.cameraL.projectionMatrix.copy(qd),I=-T*s.aspect-w,F=T*s.aspect-w,qd.elements[0]=2*s.near/(F-I),qd.elements[8]=(F+I)/(F-I),this.cameraR.projectionMatrix.copy(qd)}this.cameraL.matrixWorld.copy(n.matrixWorld).multiply(OS),this.cameraR.matrixWorld.copy(n.matrixWorld).multiply(PS)}}class FS{constructor(n=!0){this.autoStart=n,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=NS(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let n=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const s=NS();n=(s-this.oldTime)/1e3,this.oldTime=s,this.elapsedTime+=n}return n}}function NS(){return(typeof performance>"u"?Date:performance).now()}const Jd=new Qe,kS=new zs,HO=new Qe,Zd=new Qe;class VO extends dr{constructor(){super(),this.type="AudioListener",this.context=VE.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new FS}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(n){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=n,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(n){return this.gain.gain.setTargetAtTime(n,this.context.currentTime,.01),this}updateMatrixWorld(n){super.updateMatrixWorld(n);const s=this.context.listener,u=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Jd,kS,HO),Zd.set(0,0,-1).applyQuaternion(kS),s.positionX){const f=this.context.currentTime+this.timeDelta;s.positionX.linearRampToValueAtTime(Jd.x,f),s.positionY.linearRampToValueAtTime(Jd.y,f),s.positionZ.linearRampToValueAtTime(Jd.z,f),s.forwardX.linearRampToValueAtTime(Zd.x,f),s.forwardY.linearRampToValueAtTime(Zd.y,f),s.forwardZ.linearRampToValueAtTime(Zd.z,f),s.upX.linearRampToValueAtTime(u.x,f),s.upY.linearRampToValueAtTime(u.y,f),s.upZ.linearRampToValueAtTime(u.z,f)}else s.setPosition(Jd.x,Jd.y,Jd.z),s.setOrientation(Zd.x,Zd.y,Zd.z,u.x,u.y,u.z)}}class US extends dr{constructor(n){super(),this.type="Audio",this.listener=n,this.context=n.context,this.gain=this.context.createGain(),this.gain.connect(n.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(n){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=n,this.connect(),this}setMediaElementSource(n){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(n),this.connect(),this}setMediaStreamSource(n){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(n),this.connect(),this}setBuffer(n){return this.buffer=n,this.sourceType="buffer",this.autoplay&&this.play(),this}play(n=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+n;const s=this.context.createBufferSource();return s.buffer=this.buffer,s.loop=this.loop,s.loopStart=this.loopStart,s.loopEnd=this.loopEnd,s.onended=this.onEnded.bind(this),s.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=s,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let n=1,s=this.filters.length;n<s;n++)this.filters[n-1].connect(this.filters[n]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let n=1,s=this.filters.length;n<s;n++)this.filters[n-1].disconnect(this.filters[n]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(n){return n||(n=[]),this._connected===!0?(this.disconnect(),this.filters=n.slice(),this.connect()):this.filters=n.slice(),this}setDetune(n){if(this.detune=n,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(n){return this.setFilters(n?[n]:[])}setPlaybackRate(n){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=n,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(n){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=n,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(n){return this.loopStart=n,this}setLoopEnd(n){return this.loopEnd=n,this}getVolume(){return this.gain.gain.value}setVolume(n){return this.gain.gain.setTargetAtTime(n,this.context.currentTime,.01),this}}const $d=new Qe,zS=new zs,QO=new Qe,ef=new Qe;class WO extends US{constructor(n){super(n),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(n){return this.panner.refDistance=n,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(n){return this.panner.rolloffFactor=n,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(n){return this.panner.distanceModel=n,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(n){return this.panner.maxDistance=n,this}setDirectionalCone(n,s,u){return this.panner.coneInnerAngle=n,this.panner.coneOuterAngle=s,this.panner.coneOuterGain=u,this}updateMatrixWorld(n){if(super.updateMatrixWorld(n),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose($d,zS,QO),ef.set(0,0,1).applyQuaternion(zS);const s=this.panner;if(s.positionX){const u=this.context.currentTime+this.listener.timeDelta;s.positionX.linearRampToValueAtTime($d.x,u),s.positionY.linearRampToValueAtTime($d.y,u),s.positionZ.linearRampToValueAtTime($d.z,u),s.orientationX.linearRampToValueAtTime(ef.x,u),s.orientationY.linearRampToValueAtTime(ef.y,u),s.orientationZ.linearRampToValueAtTime(ef.z,u)}else s.setPosition($d.x,$d.y,$d.z),s.setOrientation(ef.x,ef.y,ef.z)}}class jO{constructor(n,s=2048){this.analyser=n.context.createAnalyser(),this.analyser.fftSize=s,this.data=new Uint8Array(this.analyser.frequencyBinCount),n.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let n=0;const s=this.getFrequencyData();for(let u=0;u<s.length;u++)n+=s[u];return n/s.length}}class GS{constructor(n,s,u){this.binding=n,this.valueSize=u;let f,w,T;switch(s){case"quaternion":f=this._slerp,w=this._slerpAdditive,T=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(u*6),this._workIndex=5;break;case"string":case"bool":f=this._select,w=this._select,T=this._setAdditiveIdentityOther,this.buffer=new Array(u*5);break;default:f=this._lerp,w=this._lerpAdditive,T=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(u*5)}this._mixBufferRegion=f,this._mixBufferRegionAdditive=w,this._setIdentity=T,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(n,s){const u=this.buffer,f=this.valueSize,w=n*f+f;let T=this.cumulativeWeight;if(T===0){for(let I=0;I!==f;++I)u[w+I]=u[I];T=s}else{T+=s;const I=s/T;this._mixBufferRegion(u,w,0,I,f)}this.cumulativeWeight=T}accumulateAdditive(n){const s=this.buffer,u=this.valueSize,f=u*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(s,f,0,n,u),this.cumulativeWeightAdditive+=n}apply(n){const s=this.valueSize,u=this.buffer,f=n*s+s,w=this.cumulativeWeight,T=this.cumulativeWeightAdditive,I=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,w<1){const F=s*this._origIndex;this._mixBufferRegion(u,f,F,1-w,s)}T>0&&this._mixBufferRegionAdditive(u,f,this._addIndex*s,1,s);for(let F=s,U=s+s;F!==U;++F)if(u[F]!==u[F+s]){I.setValue(u,f);break}}saveOriginalState(){const n=this.binding,s=this.buffer,u=this.valueSize,f=u*this._origIndex;n.getValue(s,f);for(let w=u,T=f;w!==T;++w)s[w]=s[f+w%u];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const n=this.valueSize*3;this.binding.setValue(this.buffer,n)}_setAdditiveIdentityNumeric(){const n=this._addIndex*this.valueSize,s=n+this.valueSize;for(let u=n;u<s;u++)this.buffer[u]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const n=this._origIndex*this.valueSize,s=this._addIndex*this.valueSize;for(let u=0;u<this.valueSize;u++)this.buffer[s+u]=this.buffer[n+u]}_select(n,s,u,f,w){if(f>=.5)for(let T=0;T!==w;++T)n[s+T]=n[u+T]}_slerp(n,s,u,f){zs.slerpFlat(n,s,n,s,n,u,f)}_slerpAdditive(n,s,u,f,w){const T=this._workIndex*w;zs.multiplyQuaternionsFlat(n,T,n,s,n,u),zs.slerpFlat(n,s,n,s,n,T,f)}_lerp(n,s,u,f,w){const T=1-f;for(let I=0;I!==w;++I){const F=s+I;n[F]=n[F]*T+n[u+I]*f}}_lerpAdditive(n,s,u,f,w){for(let T=0;T!==w;++T){const I=s+T;n[I]=n[I]+n[u+T]*f}}}const QE="\\[\\]\\.:\\/",XO=new RegExp("["+QE+"]","g"),WE="[^"+QE+"]",KO="[^"+QE.replace("\\.","")+"]",YO=/((?:WC+[\/:])*)/.source.replace("WC",WE),qO=/(WCOD+)?/.source.replace("WCOD",KO),JO=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",WE),ZO=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",WE),$O=new RegExp("^"+YO+qO+JO+ZO+"$"),e8=["material","materials","bones","map"];class t8{constructor(n,s,u){const f=u||Lr.parseTrackName(s);this._targetGroup=n,this._bindings=n.subscribe_(s,f)}getValue(n,s){this.bind();const u=this._targetGroup.nCachedObjects_,f=this._bindings[u];f!==void 0&&f.getValue(n,s)}setValue(n,s){const u=this._bindings;for(let f=this._targetGroup.nCachedObjects_,w=u.length;f!==w;++f)u[f].setValue(n,s)}bind(){const n=this._bindings;for(let s=this._targetGroup.nCachedObjects_,u=n.length;s!==u;++s)n[s].bind()}unbind(){const n=this._bindings;for(let s=this._targetGroup.nCachedObjects_,u=n.length;s!==u;++s)n[s].unbind()}}class Lr{constructor(n,s,u){this.path=s,this.parsedPath=u||Lr.parseTrackName(s),this.node=Lr.findNode(n,this.parsedPath.nodeName)||n,this.rootNode=n,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(n,s,u){return n&&n.isAnimationObjectGroup?new Lr.Composite(n,s,u):new Lr(n,s,u)}static sanitizeNodeName(n){return n.replace(/\s/g,"_").replace(XO,"")}static parseTrackName(n){const s=$O.exec(n);if(s===null)throw new Error("PropertyBinding: Cannot parse trackName: "+n);const u={nodeName:s[2],objectName:s[3],objectIndex:s[4],propertyName:s[5],propertyIndex:s[6]},f=u.nodeName&&u.nodeName.lastIndexOf(".");if(f!==void 0&&f!==-1){const w=u.nodeName.substring(f+1);e8.indexOf(w)!==-1&&(u.nodeName=u.nodeName.substring(0,f),u.objectName=w)}if(u.propertyName===null||u.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+n);return u}static findNode(n,s){if(s===void 0||s===""||s==="."||s===-1||s===n.name||s===n.uuid)return n;if(n.skeleton){const u=n.skeleton.getBoneByName(s);if(u!==void 0)return u}if(n.children){const u=function(w){for(let T=0;T<w.length;T++){const I=w[T];if(I.name===s||I.uuid===s)return I;const F=u(I.children);if(F)return F}return null},f=u(n.children);if(f)return f}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(n,s){n[s]=this.targetObject[this.propertyName]}_getValue_array(n,s){const u=this.resolvedProperty;for(let f=0,w=u.length;f!==w;++f)n[s++]=u[f]}_getValue_arrayElement(n,s){n[s]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(n,s){this.resolvedProperty.toArray(n,s)}_setValue_direct(n,s){this.targetObject[this.propertyName]=n[s]}_setValue_direct_setNeedsUpdate(n,s){this.targetObject[this.propertyName]=n[s],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(n,s){this.targetObject[this.propertyName]=n[s],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(n,s){const u=this.resolvedProperty;for(let f=0,w=u.length;f!==w;++f)u[f]=n[s++]}_setValue_array_setNeedsUpdate(n,s){const u=this.resolvedProperty;for(let f=0,w=u.length;f!==w;++f)u[f]=n[s++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(n,s){const u=this.resolvedProperty;for(let f=0,w=u.length;f!==w;++f)u[f]=n[s++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(n,s){this.resolvedProperty[this.propertyIndex]=n[s]}_setValue_arrayElement_setNeedsUpdate(n,s){this.resolvedProperty[this.propertyIndex]=n[s],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(n,s){this.resolvedProperty[this.propertyIndex]=n[s],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(n,s){this.resolvedProperty.fromArray(n,s)}_setValue_fromArray_setNeedsUpdate(n,s){this.resolvedProperty.fromArray(n,s),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(n,s){this.resolvedProperty.fromArray(n,s),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(n,s){this.bind(),this.getValue(n,s)}_setValue_unbound(n,s){this.bind(),this.setValue(n,s)}bind(){let n=this.node;const s=this.parsedPath,u=s.objectName,f=s.propertyName;let w=s.propertyIndex;if(n||(n=Lr.findNode(this.rootNode,s.nodeName)||this.rootNode,this.node=n),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!n){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(u){let U=s.objectIndex;switch(u){case"materials":if(!n.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!n.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}n=n.material.materials;break;case"bones":if(!n.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}n=n.skeleton.bones;for(let G=0;G<n.length;G++)if(n[G].name===U){U=G;break}break;case"map":if("map"in n){n=n.map;break}if(!n.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!n.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}n=n.material.map;break;default:if(n[u]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}n=n[u]}if(U!==void 0){if(n[U]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,n);return}n=n[U]}}const T=n[f];if(T===void 0){const U=s.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+U+"."+f+" but it wasn't found.",n);return}let I=this.Versioning.None;this.targetObject=n,n.needsUpdate!==void 0?I=this.Versioning.NeedsUpdate:n.matrixWorldNeedsUpdate!==void 0&&(I=this.Versioning.MatrixWorldNeedsUpdate);let F=this.BindingType.Direct;if(w!==void 0){if(f==="morphTargetInfluences"){if(!n.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!n.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}n.morphTargetDictionary[w]!==void 0&&(w=n.morphTargetDictionary[w])}F=this.BindingType.ArrayElement,this.resolvedProperty=T,this.propertyIndex=w}else T.fromArray!==void 0&&T.toArray!==void 0?(F=this.BindingType.HasFromToArray,this.resolvedProperty=T):Array.isArray(T)?(F=this.BindingType.EntireArray,this.resolvedProperty=T):this.propertyName=f;this.getValue=this.GetterByBindingType[F],this.setValue=this.SetterByBindingTypeAndVersioning[F][I]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Lr.Composite=t8,Lr.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Lr.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Lr.prototype.GetterByBindingType=[Lr.prototype._getValue_direct,Lr.prototype._getValue_array,Lr.prototype._getValue_arrayElement,Lr.prototype._getValue_toArray],Lr.prototype.SetterByBindingTypeAndVersioning=[[Lr.prototype._setValue_direct,Lr.prototype._setValue_direct_setNeedsUpdate,Lr.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Lr.prototype._setValue_array,Lr.prototype._setValue_array_setNeedsUpdate,Lr.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Lr.prototype._setValue_arrayElement,Lr.prototype._setValue_arrayElement_setNeedsUpdate,Lr.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Lr.prototype._setValue_fromArray,Lr.prototype._setValue_fromArray_setNeedsUpdate,Lr.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class n8{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Eo(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const n={};this._indicesByUUID=n;for(let u=0,f=arguments.length;u!==f;++u)n[arguments[u].uuid]=u;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const s=this;this.stats={objects:{get total(){return s._objects.length},get inUse(){return this.total-s.nCachedObjects_}},get bindingsPerObject(){return s._bindings.length}}}add(){const n=this._objects,s=this._indicesByUUID,u=this._paths,f=this._parsedPaths,w=this._bindings,T=w.length;let I,F=n.length,U=this.nCachedObjects_;for(let G=0,V=arguments.length;G!==V;++G){const j=arguments[G],Y=j.uuid;let re=s[Y];if(re===void 0){re=F++,s[Y]=re,n.push(j);for(let ie=0,$=T;ie!==$;++ie)w[ie].push(new Lr(j,u[ie],f[ie]))}else if(re<U){I=n[re];const ie=--U,$=n[ie];s[$.uuid]=re,n[re]=$,s[Y]=ie,n[ie]=j;for(let de=0,Ce=T;de!==Ce;++de){const ge=w[de],we=ge[ie];let Le=ge[re];ge[re]=we,Le===void 0&&(Le=new Lr(j,u[de],f[de])),ge[ie]=Le}}else n[re]!==I&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=U}remove(){const n=this._objects,s=this._indicesByUUID,u=this._bindings,f=u.length;let w=this.nCachedObjects_;for(let T=0,I=arguments.length;T!==I;++T){const F=arguments[T],U=F.uuid,G=s[U];if(G!==void 0&&G>=w){const V=w++,j=n[V];s[j.uuid]=G,n[G]=j,s[U]=V,n[V]=F;for(let Y=0,re=f;Y!==re;++Y){const ie=u[Y],$=ie[V],de=ie[G];ie[G]=$,ie[V]=de}}}this.nCachedObjects_=w}uncache(){const n=this._objects,s=this._indicesByUUID,u=this._bindings,f=u.length;let w=this.nCachedObjects_,T=n.length;for(let I=0,F=arguments.length;I!==F;++I){const U=arguments[I],G=U.uuid,V=s[G];if(V!==void 0)if(delete s[G],V<w){const j=--w,Y=n[j],re=--T,ie=n[re];s[Y.uuid]=V,n[V]=Y,s[ie.uuid]=j,n[j]=ie,n.pop();for(let $=0,de=f;$!==de;++$){const Ce=u[$],ge=Ce[j],we=Ce[re];Ce[V]=ge,Ce[j]=we,Ce.pop()}}else{const j=--T,Y=n[j];j>0&&(s[Y.uuid]=V),n[V]=Y,n.pop();for(let re=0,ie=f;re!==ie;++re){const $=u[re];$[V]=$[j],$.pop()}}}this.nCachedObjects_=w}subscribe_(n,s){const u=this._bindingsIndicesByPath;let f=u[n];const w=this._bindings;if(f!==void 0)return w[f];const T=this._paths,I=this._parsedPaths,F=this._objects,U=F.length,G=this.nCachedObjects_,V=new Array(U);f=w.length,u[n]=f,T.push(n),I.push(s),w.push(V);for(let j=G,Y=F.length;j!==Y;++j){const re=F[j];V[j]=new Lr(re,n,s)}return V}unsubscribe_(n){const s=this._bindingsIndicesByPath,u=s[n];if(u!==void 0){const f=this._paths,w=this._parsedPaths,T=this._bindings,I=T.length-1,F=T[I],U=n[I];s[U]=u,T[u]=F,T.pop(),w[u]=w[I],w.pop(),f[u]=f[I],f.pop()}}}class i8{constructor(n,s,u=null,f=s.blendMode){this._mixer=n,this._clip=s,this._localRoot=u,this.blendMode=f;const w=s.tracks,T=w.length,I=new Array(T),F={endingStart:sn,endingEnd:sn};for(let U=0;U!==T;++U){const G=w[U].createInterpolant(null);I[U]=G,G.settings=F}this._interpolantSettings=F,this._interpolants=I,this._propertyBindings=new Array(T),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=at,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(n){return this._startTime=n,this}setLoop(n,s){return this.loop=n,this.repetitions=s,this}setEffectiveWeight(n){return this.weight=n,this._effectiveWeight=this.enabled?n:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(n){return this._scheduleFading(n,0,1)}fadeOut(n){return this._scheduleFading(n,1,0)}crossFadeFrom(n,s,u){if(n.fadeOut(s),this.fadeIn(s),u){const f=this._clip.duration,w=n._clip.duration,T=w/f,I=f/w;n.warp(1,T,s),this.warp(I,1,s)}return this}crossFadeTo(n,s,u){return n.crossFadeFrom(this,s,u)}stopFading(){const n=this._weightInterpolant;return n!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(n)),this}setEffectiveTimeScale(n){return this.timeScale=n,this._effectiveTimeScale=this.paused?0:n,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(n){return this.timeScale=this._clip.duration/n,this.stopWarping()}syncWith(n){return this.time=n.time,this.timeScale=n.timeScale,this.stopWarping()}halt(n){return this.warp(this._effectiveTimeScale,0,n)}warp(n,s,u){const f=this._mixer,w=f.time,T=this.timeScale;let I=this._timeScaleInterpolant;I===null&&(I=f._lendControlInterpolant(),this._timeScaleInterpolant=I);const F=I.parameterPositions,U=I.sampleValues;return F[0]=w,F[1]=w+u,U[0]=n/T,U[1]=s/T,this}stopWarping(){const n=this._timeScaleInterpolant;return n!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(n)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(n,s,u,f){if(!this.enabled){this._updateWeight(n);return}const w=this._startTime;if(w!==null){const F=(n-w)*u;F<0||u===0?s=0:(this._startTime=null,s=u*F)}s*=this._updateTimeScale(n);const T=this._updateTime(s),I=this._updateWeight(n);if(I>0){const F=this._interpolants,U=this._propertyBindings;switch(this.blendMode){case Di:for(let G=0,V=F.length;G!==V;++G)F[G].evaluate(T),U[G].accumulateAdditive(I);break;case hi:default:for(let G=0,V=F.length;G!==V;++G)F[G].evaluate(T),U[G].accumulate(f,I)}}}_updateWeight(n){let s=0;if(this.enabled){s=this.weight;const u=this._weightInterpolant;if(u!==null){const f=u.evaluate(n)[0];s*=f,n>u.parameterPositions[1]&&(this.stopFading(),f===0&&(this.enabled=!1))}}return this._effectiveWeight=s,s}_updateTimeScale(n){let s=0;if(!this.paused){s=this.timeScale;const u=this._timeScaleInterpolant;if(u!==null){const f=u.evaluate(n)[0];s*=f,n>u.parameterPositions[1]&&(this.stopWarping(),s===0?this.paused=!0:this.timeScale=s)}}return this._effectiveTimeScale=s,s}_updateTime(n){const s=this._clip.duration,u=this.loop;let f=this.time+n,w=this._loopCount;const T=u===Kt;if(n===0)return w===-1?f:T&&(w&1)===1?s-f:f;if(u===nt){w===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(f>=s)f=s;else if(f<0)f=0;else{this.time=f;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=f,this._mixer.dispatchEvent({type:"finished",action:this,direction:n<0?-1:1})}}else{if(w===-1&&(n>=0?(w=0,this._setEndings(!0,this.repetitions===0,T)):this._setEndings(this.repetitions===0,!0,T)),f>=s||f<0){const I=Math.floor(f/s);f-=s*I,w+=Math.abs(I);const F=this.repetitions-w;if(F<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,f=n>0?s:0,this.time=f,this._mixer.dispatchEvent({type:"finished",action:this,direction:n>0?1:-1});else{if(F===1){const U=n<0;this._setEndings(U,!U,T)}else this._setEndings(!1,!1,T);this._loopCount=w,this.time=f,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:I})}}else this.time=f;if(T&&(w&1)===1)return s-f}return f}_setEndings(n,s,u){const f=this._interpolantSettings;u?(f.endingStart=Dn,f.endingEnd=Dn):(n?f.endingStart=this.zeroSlopeAtStart?Dn:sn:f.endingStart=Yn,s?f.endingEnd=this.zeroSlopeAtEnd?Dn:sn:f.endingEnd=Yn)}_scheduleFading(n,s,u){const f=this._mixer,w=f.time;let T=this._weightInterpolant;T===null&&(T=f._lendControlInterpolant(),this._weightInterpolant=T);const I=T.parameterPositions,F=T.sampleValues;return I[0]=w,F[0]=s,I[1]=w+n,F[1]=u,this}}const r8=new Float32Array(1);class s8 extends lo{constructor(n){super(),this._root=n,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(n,s){const u=n._localRoot||this._root,f=n._clip.tracks,w=f.length,T=n._propertyBindings,I=n._interpolants,F=u.uuid,U=this._bindingsByRootAndName;let G=U[F];G===void 0&&(G={},U[F]=G);for(let V=0;V!==w;++V){const j=f[V],Y=j.name;let re=G[Y];if(re!==void 0)++re.referenceCount,T[V]=re;else{if(re=T[V],re!==void 0){re._cacheIndex===null&&(++re.referenceCount,this._addInactiveBinding(re,F,Y));continue}const ie=s&&s._propertyBindings[V].binding.parsedPath;re=new GS(Lr.create(u,Y,ie),j.ValueTypeName,j.getValueSize()),++re.referenceCount,this._addInactiveBinding(re,F,Y),T[V]=re}I[V].resultBuffer=re.buffer}}_activateAction(n){if(!this._isActiveAction(n)){if(n._cacheIndex===null){const u=(n._localRoot||this._root).uuid,f=n._clip.uuid,w=this._actionsByClip[f];this._bindAction(n,w&&w.knownActions[0]),this._addInactiveAction(n,f,u)}const s=n._propertyBindings;for(let u=0,f=s.length;u!==f;++u){const w=s[u];w.useCount++===0&&(this._lendBinding(w),w.saveOriginalState())}this._lendAction(n)}}_deactivateAction(n){if(this._isActiveAction(n)){const s=n._propertyBindings;for(let u=0,f=s.length;u!==f;++u){const w=s[u];--w.useCount===0&&(w.restoreOriginalState(),this._takeBackBinding(w))}this._takeBackAction(n)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const n=this;this.stats={actions:{get total(){return n._actions.length},get inUse(){return n._nActiveActions}},bindings:{get total(){return n._bindings.length},get inUse(){return n._nActiveBindings}},controlInterpolants:{get total(){return n._controlInterpolants.length},get inUse(){return n._nActiveControlInterpolants}}}}_isActiveAction(n){const s=n._cacheIndex;return s!==null&&s<this._nActiveActions}_addInactiveAction(n,s,u){const f=this._actions,w=this._actionsByClip;let T=w[s];if(T===void 0)T={knownActions:[n],actionByRoot:{}},n._byClipCacheIndex=0,w[s]=T;else{const I=T.knownActions;n._byClipCacheIndex=I.length,I.push(n)}n._cacheIndex=f.length,f.push(n),T.actionByRoot[u]=n}_removeInactiveAction(n){const s=this._actions,u=s[s.length-1],f=n._cacheIndex;u._cacheIndex=f,s[f]=u,s.pop(),n._cacheIndex=null;const w=n._clip.uuid,T=this._actionsByClip,I=T[w],F=I.knownActions,U=F[F.length-1],G=n._byClipCacheIndex;U._byClipCacheIndex=G,F[G]=U,F.pop(),n._byClipCacheIndex=null;const V=I.actionByRoot,j=(n._localRoot||this._root).uuid;delete V[j],F.length===0&&delete T[w],this._removeInactiveBindingsForAction(n)}_removeInactiveBindingsForAction(n){const s=n._propertyBindings;for(let u=0,f=s.length;u!==f;++u){const w=s[u];--w.referenceCount===0&&this._removeInactiveBinding(w)}}_lendAction(n){const s=this._actions,u=n._cacheIndex,f=this._nActiveActions++,w=s[f];n._cacheIndex=f,s[f]=n,w._cacheIndex=u,s[u]=w}_takeBackAction(n){const s=this._actions,u=n._cacheIndex,f=--this._nActiveActions,w=s[f];n._cacheIndex=f,s[f]=n,w._cacheIndex=u,s[u]=w}_addInactiveBinding(n,s,u){const f=this._bindingsByRootAndName,w=this._bindings;let T=f[s];T===void 0&&(T={},f[s]=T),T[u]=n,n._cacheIndex=w.length,w.push(n)}_removeInactiveBinding(n){const s=this._bindings,u=n.binding,f=u.rootNode.uuid,w=u.path,T=this._bindingsByRootAndName,I=T[f],F=s[s.length-1],U=n._cacheIndex;F._cacheIndex=U,s[U]=F,s.pop(),delete I[w],Object.keys(I).length===0&&delete T[f]}_lendBinding(n){const s=this._bindings,u=n._cacheIndex,f=this._nActiveBindings++,w=s[f];n._cacheIndex=f,s[f]=n,w._cacheIndex=u,s[u]=w}_takeBackBinding(n){const s=this._bindings,u=n._cacheIndex,f=--this._nActiveBindings,w=s[f];n._cacheIndex=f,s[f]=n,w._cacheIndex=u,s[u]=w}_lendControlInterpolant(){const n=this._controlInterpolants,s=this._nActiveControlInterpolants++;let u=n[s];return u===void 0&&(u=new FE(new Float32Array(2),new Float32Array(2),1,r8),u.__cacheIndex=s,n[s]=u),u}_takeBackControlInterpolant(n){const s=this._controlInterpolants,u=n.__cacheIndex,f=--this._nActiveControlInterpolants,w=s[f];n.__cacheIndex=f,s[f]=n,w.__cacheIndex=u,s[u]=w}clipAction(n,s,u){const f=s||this._root,w=f.uuid;let T=typeof n=="string"?rA.findByName(f,n):n;const I=T!==null?T.uuid:n,F=this._actionsByClip[I];let U=null;if(u===void 0&&(T!==null?u=T.blendMode:u=hi),F!==void 0){const V=F.actionByRoot[w];if(V!==void 0&&V.blendMode===u)return V;U=F.knownActions[0],T===null&&(T=U._clip)}if(T===null)return null;const G=new i8(this,T,s,u);return this._bindAction(G,U),this._addInactiveAction(G,I,w),G}existingAction(n,s){const u=s||this._root,f=u.uuid,w=typeof n=="string"?rA.findByName(u,n):n,T=w?w.uuid:n,I=this._actionsByClip[T];return I!==void 0&&I.actionByRoot[f]||null}stopAllAction(){const n=this._actions,s=this._nActiveActions;for(let u=s-1;u>=0;--u)n[u].stop();return this}update(n){n*=this.timeScale;const s=this._actions,u=this._nActiveActions,f=this.time+=n,w=Math.sign(n),T=this._accuIndex^=1;for(let U=0;U!==u;++U)s[U]._update(f,n,w,T);const I=this._bindings,F=this._nActiveBindings;for(let U=0;U!==F;++U)I[U].apply(T);return this}setTime(n){this.time=0;for(let s=0;s<this._actions.length;s++)this._actions[s].time=0;return this.update(n)}getRoot(){return this._root}uncacheClip(n){const s=this._actions,u=n.uuid,f=this._actionsByClip,w=f[u];if(w!==void 0){const T=w.knownActions;for(let I=0,F=T.length;I!==F;++I){const U=T[I];this._deactivateAction(U);const G=U._cacheIndex,V=s[s.length-1];U._cacheIndex=null,U._byClipCacheIndex=null,V._cacheIndex=G,s[G]=V,s.pop(),this._removeInactiveBindingsForAction(U)}delete f[u]}}uncacheRoot(n){const s=n.uuid,u=this._actionsByClip;for(const T in u){const I=u[T].actionByRoot,F=I[s];F!==void 0&&(this._deactivateAction(F),this._removeInactiveAction(F))}const f=this._bindingsByRootAndName,w=f[s];if(w!==void 0)for(const T in w){const I=w[T];I.restoreOriginalState(),this._removeInactiveBinding(I)}}uncacheAction(n,s){const u=this.existingAction(n,s);u!==null&&(this._deactivateAction(u),this._removeInactiveAction(u))}}class jE{constructor(n){this.value=n}clone(){return new jE(this.value.clone===void 0?this.value:this.value.clone())}}let o8=0;class a8 extends lo{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:o8++}),this.name="",this.usage=xl,this.uniforms=[]}add(n){return this.uniforms.push(n),this}remove(n){const s=this.uniforms.indexOf(n);return s!==-1&&this.uniforms.splice(s,1),this}setName(n){return this.name=n,this}setUsage(n){return this.usage=n,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(n){this.name=n.name,this.usage=n.usage;const s=n.uniforms;this.uniforms.length=0;for(let u=0,f=s.length;u<f;u++)this.uniforms.push(s[u].clone());return this}clone(){return new this.constructor().copy(this)}}class l8 extends Rv{constructor(n,s,u=1){super(n,s),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=u}copy(n){return super.copy(n),this.meshPerAttribute=n.meshPerAttribute,this}clone(n){const s=super.clone(n);return s.meshPerAttribute=this.meshPerAttribute,s}toJSON(n){const s=super.toJSON(n);return s.isInstancedInterleavedBuffer=!0,s.meshPerAttribute=this.meshPerAttribute,s}}class c8{constructor(n,s,u,f,w){this.isGLBufferAttribute=!0,this.buffer=n,this.type=s,this.itemSize=u,this.elementSize=f,this.count=w,this.version=0}set needsUpdate(n){n===!0&&this.version++}setBuffer(n){return this.buffer=n,this}setType(n,s){return this.type=n,this.elementSize=s,this}setItemSize(n){return this.itemSize=n,this}setCount(n){return this.count=n,this}}class u8{constructor(n,s,u=0,f=1/0){this.ray=new Ys(n,s),this.near=u,this.far=f,this.camera=null,this.layers=new Ar,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(n,s){this.ray.set(n,s)}setFromCamera(n,s){s.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(s.matrixWorld),this.ray.direction.set(n.x,n.y,.5).unproject(s).sub(this.ray.origin).normalize(),this.camera=s):s.isOrthographicCamera?(this.ray.origin.set(n.x,n.y,(s.near+s.far)/(s.near-s.far)).unproject(s),this.ray.direction.set(0,0,-1).transformDirection(s.matrixWorld),this.camera=s):console.error("THREE.Raycaster: Unsupported camera type: "+s.type)}intersectObject(n,s=!0,u=[]){return XE(n,this,u,s),u.sort(HS),u}intersectObjects(n,s=!0,u=[]){for(let f=0,w=n.length;f<w;f++)XE(n[f],this,u,s);return u.sort(HS),u}}function HS(B,n){return B.distance-n.distance}function XE(B,n,s,u){if(B.layers.test(n.layers)&&B.raycast(n,s),u===!0){const f=B.children;for(let w=0,T=f.length;w<T;w++)XE(f[w],n,s,!0)}}class h8{constructor(n=1,s=0,u=0){return this.radius=n,this.phi=s,this.theta=u,this}set(n,s,u){return this.radius=n,this.phi=s,this.theta=u,this}copy(n){return this.radius=n.radius,this.phi=n.phi,this.theta=n.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(n){return this.setFromCartesianCoords(n.x,n.y,n.z)}setFromCartesianCoords(n,s,u){return this.radius=Math.sqrt(n*n+s*s+u*u),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(n,u),this.phi=Math.acos(Jr(s/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class d8{constructor(n=1,s=0,u=0){return this.radius=n,this.theta=s,this.y=u,this}set(n,s,u){return this.radius=n,this.theta=s,this.y=u,this}copy(n){return this.radius=n.radius,this.theta=n.theta,this.y=n.y,this}setFromVector3(n){return this.setFromCartesianCoords(n.x,n.y,n.z)}setFromCartesianCoords(n,s,u){return this.radius=Math.sqrt(n*n+u*u),this.theta=Math.atan2(n,u),this.y=s,this}clone(){return new this.constructor().copy(this)}}const VS=new jt;class f8{constructor(n=new jt(1/0,1/0),s=new jt(-1/0,-1/0)){this.isBox2=!0,this.min=n,this.max=s}set(n,s){return this.min.copy(n),this.max.copy(s),this}setFromPoints(n){this.makeEmpty();for(let s=0,u=n.length;s<u;s++)this.expandByPoint(n[s]);return this}setFromCenterAndSize(n,s){const u=VS.copy(s).multiplyScalar(.5);return this.min.copy(n).sub(u),this.max.copy(n).add(u),this}clone(){return new this.constructor().copy(this)}copy(n){return this.min.copy(n.min),this.max.copy(n.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(n){return this.isEmpty()?n.set(0,0):n.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(n){return this.isEmpty()?n.set(0,0):n.subVectors(this.max,this.min)}expandByPoint(n){return this.min.min(n),this.max.max(n),this}expandByVector(n){return this.min.sub(n),this.max.add(n),this}expandByScalar(n){return this.min.addScalar(-n),this.max.addScalar(n),this}containsPoint(n){return!(n.x<this.min.x||n.x>this.max.x||n.y<this.min.y||n.y>this.max.y)}containsBox(n){return this.min.x<=n.min.x&&n.max.x<=this.max.x&&this.min.y<=n.min.y&&n.max.y<=this.max.y}getParameter(n,s){return s.set((n.x-this.min.x)/(this.max.x-this.min.x),(n.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(n){return!(n.max.x<this.min.x||n.min.x>this.max.x||n.max.y<this.min.y||n.min.y>this.max.y)}clampPoint(n,s){return s.copy(n).clamp(this.min,this.max)}distanceToPoint(n){return VS.copy(n).clamp(this.min,this.max).sub(n).length()}intersect(n){return this.min.max(n.min),this.max.min(n.max),this}union(n){return this.min.min(n.min),this.max.max(n.max),this}translate(n){return this.min.add(n),this.max.add(n),this}equals(n){return n.min.equals(this.min)&&n.max.equals(this.max)}}const QS=new Qe,Zv=new Qe;class p8{constructor(n=new Qe,s=new Qe){this.start=n,this.end=s}set(n,s){return this.start.copy(n),this.end.copy(s),this}copy(n){return this.start.copy(n.start),this.end.copy(n.end),this}getCenter(n){return n.addVectors(this.start,this.end).multiplyScalar(.5)}delta(n){return n.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(n,s){return this.delta(s).multiplyScalar(n).add(this.start)}closestPointToPointParameter(n,s){QS.subVectors(n,this.start),Zv.subVectors(this.end,this.start);const u=Zv.dot(Zv);let w=Zv.dot(QS)/u;return s&&(w=Jr(w,0,1)),w}closestPointToPoint(n,s,u){const f=this.closestPointToPointParameter(n,s);return this.delta(u).multiplyScalar(f).add(this.start)}applyMatrix4(n){return this.start.applyMatrix4(n),this.end.applyMatrix4(n),this}equals(n){return n.start.equals(this.start)&&n.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const WS=new Qe;class m8 extends dr{constructor(n,s){super(),this.light=n,this.matrix=n.matrixWorld,this.matrixAutoUpdate=!1,this.color=s,this.type="SpotLightHelper";const u=new Wi,f=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let T=0,I=1,F=32;T<F;T++,I++){const U=T/F*Math.PI*2,G=I/F*Math.PI*2;f.push(Math.cos(U),Math.sin(U),1,Math.cos(G),Math.sin(G),1)}u.setAttribute("position",new li(f,3));const w=new ma({fog:!1,toneMapped:!1});this.cone=new $c(u,w),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const n=this.light.distance?this.light.distance:1e3,s=n*Math.tan(this.light.angle);this.cone.scale.set(s,s,n),WS.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(WS),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Sh=new Qe,$v=new Jn,KE=new Jn;class g8 extends $c{constructor(n){const s=jS(n),u=new Wi,f=[],w=[],T=new kn(0,0,1),I=new kn(0,1,0);for(let U=0;U<s.length;U++){const G=s[U];G.parent&&G.parent.isBone&&(f.push(0,0,0),f.push(0,0,0),w.push(T.r,T.g,T.b),w.push(I.r,I.g,I.b))}u.setAttribute("position",new li(f,3)),u.setAttribute("color",new li(w,3));const F=new ma({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(u,F),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=n,this.bones=s,this.matrix=n.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(n){const s=this.bones,u=this.geometry,f=u.getAttribute("position");KE.copy(this.root.matrixWorld).invert();for(let w=0,T=0;w<s.length;w++){const I=s[w];I.parent&&I.parent.isBone&&($v.multiplyMatrices(KE,I.matrixWorld),Sh.setFromMatrixPosition($v),f.setXYZ(T,Sh.x,Sh.y,Sh.z),$v.multiplyMatrices(KE,I.parent.matrixWorld),Sh.setFromMatrixPosition($v),f.setXYZ(T+1,Sh.x,Sh.y,Sh.z),T+=2)}u.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(n)}dispose(){this.geometry.dispose(),this.material.dispose()}}function jS(B){const n=[];B.isBone===!0&&n.push(B);for(let s=0;s<B.children.length;s++)n.push.apply(n,jS(B.children[s]));return n}class A8 extends eo{constructor(n,s,u){const f=new Fp(s,4,2),w=new Uc({wireframe:!0,fog:!1,toneMapped:!1});super(f,w),this.light=n,this.color=u,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const v8=new Qe,XS=new kn,KS=new kn;class y8 extends dr{constructor(n,s,u){super(),this.light=n,this.matrix=n.matrixWorld,this.matrixAutoUpdate=!1,this.color=u,this.type="HemisphereLightHelper";const f=new Op(s);f.rotateY(Math.PI*.5),this.material=new Uc({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const w=f.getAttribute("position"),T=new Float32Array(w.count*3);f.setAttribute("color",new Hr(T,3)),this.add(new eo(f,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const n=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const s=n.geometry.getAttribute("color");XS.copy(this.light.color),KS.copy(this.light.groundColor);for(let u=0,f=s.count;u<f;u++){const w=u<f/2?XS:KS;s.setXYZ(u,w.r,w.g,w.b)}s.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),n.lookAt(v8.setFromMatrixPosition(this.light.matrixWorld).negate())}}class x8 extends $c{constructor(n=10,s=10,u=4473924,f=8947848){u=new kn(u),f=new kn(f);const w=s/2,T=n/s,I=n/2,F=[],U=[];for(let j=0,Y=0,re=-I;j<=s;j++,re+=T){F.push(-I,0,re,I,0,re),F.push(re,0,-I,re,0,I);const ie=j===w?u:f;ie.toArray(U,Y),Y+=3,ie.toArray(U,Y),Y+=3,ie.toArray(U,Y),Y+=3,ie.toArray(U,Y),Y+=3}const G=new Wi;G.setAttribute("position",new li(F,3)),G.setAttribute("color",new li(U,3));const V=new ma({vertexColors:!0,toneMapped:!1});super(G,V),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class E8 extends $c{constructor(n=10,s=16,u=8,f=64,w=4473924,T=8947848){w=new kn(w),T=new kn(T);const I=[],F=[];if(s>1)for(let V=0;V<s;V++){const j=V/s*(Math.PI*2),Y=Math.sin(j)*n,re=Math.cos(j)*n;I.push(0,0,0),I.push(Y,0,re);const ie=V&1?w:T;F.push(ie.r,ie.g,ie.b),F.push(ie.r,ie.g,ie.b)}for(let V=0;V<u;V++){const j=V&1?w:T,Y=n-n/u*V;for(let re=0;re<f;re++){let ie=re/f*(Math.PI*2),$=Math.sin(ie)*Y,de=Math.cos(ie)*Y;I.push($,0,de),F.push(j.r,j.g,j.b),ie=(re+1)/f*(Math.PI*2),$=Math.sin(ie)*Y,de=Math.cos(ie)*Y,I.push($,0,de),F.push(j.r,j.g,j.b)}}const U=new Wi;U.setAttribute("position",new li(I,3)),U.setAttribute("color",new li(F,3));const G=new ma({vertexColors:!0,toneMapped:!1});super(U,G),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const YS=new Qe,ey=new Qe,qS=new Qe;class _8 extends dr{constructor(n,s,u){super(),this.light=n,this.matrix=n.matrixWorld,this.matrixAutoUpdate=!1,this.color=u,this.type="DirectionalLightHelper",s===void 0&&(s=1);let f=new Wi;f.setAttribute("position",new li([-s,s,0,s,s,0,s,-s,0,-s,-s,0,-s,s,0],3));const w=new ma({fog:!1,toneMapped:!1});this.lightPlane=new Mh(f,w),this.add(this.lightPlane),f=new Wi,f.setAttribute("position",new li([0,0,0,0,0,1],3)),this.targetLine=new Mh(f,w),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),YS.setFromMatrixPosition(this.light.matrixWorld),ey.setFromMatrixPosition(this.light.target.matrixWorld),qS.subVectors(ey,YS),this.lightPlane.lookAt(ey),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(ey),this.targetLine.scale.z=qS.length()}}const ty=new Qe,Bs=new Bd;class w8 extends $c{constructor(n){const s=new Wi,u=new ma({color:16777215,vertexColors:!0,toneMapped:!1}),f=[],w=[],T={};I("n1","n2"),I("n2","n4"),I("n4","n3"),I("n3","n1"),I("f1","f2"),I("f2","f4"),I("f4","f3"),I("f3","f1"),I("n1","f1"),I("n2","f2"),I("n3","f3"),I("n4","f4"),I("p","n1"),I("p","n2"),I("p","n3"),I("p","n4"),I("u1","u2"),I("u2","u3"),I("u3","u1"),I("c","t"),I("p","c"),I("cn1","cn2"),I("cn3","cn4"),I("cf1","cf2"),I("cf3","cf4");function I(re,ie){F(re),F(ie)}function F(re){f.push(0,0,0),w.push(0,0,0),T[re]===void 0&&(T[re]=[]),T[re].push(f.length/3-1)}s.setAttribute("position",new li(f,3)),s.setAttribute("color",new li(w,3)),super(s,u),this.type="CameraHelper",this.camera=n,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=n.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=T,this.update();const U=new kn(16755200),G=new kn(16711680),V=new kn(43775),j=new kn(16777215),Y=new kn(3355443);this.setColors(U,G,V,j,Y)}setColors(n,s,u,f,w){const I=this.geometry.getAttribute("color");I.setXYZ(0,n.r,n.g,n.b),I.setXYZ(1,n.r,n.g,n.b),I.setXYZ(2,n.r,n.g,n.b),I.setXYZ(3,n.r,n.g,n.b),I.setXYZ(4,n.r,n.g,n.b),I.setXYZ(5,n.r,n.g,n.b),I.setXYZ(6,n.r,n.g,n.b),I.setXYZ(7,n.r,n.g,n.b),I.setXYZ(8,n.r,n.g,n.b),I.setXYZ(9,n.r,n.g,n.b),I.setXYZ(10,n.r,n.g,n.b),I.setXYZ(11,n.r,n.g,n.b),I.setXYZ(12,n.r,n.g,n.b),I.setXYZ(13,n.r,n.g,n.b),I.setXYZ(14,n.r,n.g,n.b),I.setXYZ(15,n.r,n.g,n.b),I.setXYZ(16,n.r,n.g,n.b),I.setXYZ(17,n.r,n.g,n.b),I.setXYZ(18,n.r,n.g,n.b),I.setXYZ(19,n.r,n.g,n.b),I.setXYZ(20,n.r,n.g,n.b),I.setXYZ(21,n.r,n.g,n.b),I.setXYZ(22,n.r,n.g,n.b),I.setXYZ(23,n.r,n.g,n.b),I.setXYZ(24,s.r,s.g,s.b),I.setXYZ(25,s.r,s.g,s.b),I.setXYZ(26,s.r,s.g,s.b),I.setXYZ(27,s.r,s.g,s.b),I.setXYZ(28,s.r,s.g,s.b),I.setXYZ(29,s.r,s.g,s.b),I.setXYZ(30,s.r,s.g,s.b),I.setXYZ(31,s.r,s.g,s.b),I.setXYZ(32,u.r,u.g,u.b),I.setXYZ(33,u.r,u.g,u.b),I.setXYZ(34,u.r,u.g,u.b),I.setXYZ(35,u.r,u.g,u.b),I.setXYZ(36,u.r,u.g,u.b),I.setXYZ(37,u.r,u.g,u.b),I.setXYZ(38,f.r,f.g,f.b),I.setXYZ(39,f.r,f.g,f.b),I.setXYZ(40,w.r,w.g,w.b),I.setXYZ(41,w.r,w.g,w.b),I.setXYZ(42,w.r,w.g,w.b),I.setXYZ(43,w.r,w.g,w.b),I.setXYZ(44,w.r,w.g,w.b),I.setXYZ(45,w.r,w.g,w.b),I.setXYZ(46,w.r,w.g,w.b),I.setXYZ(47,w.r,w.g,w.b),I.setXYZ(48,w.r,w.g,w.b),I.setXYZ(49,w.r,w.g,w.b),I.needsUpdate=!0}update(){const n=this.geometry,s=this.pointMap,u=1,f=1;Bs.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Vs("c",s,n,Bs,0,0,-1),Vs("t",s,n,Bs,0,0,1),Vs("n1",s,n,Bs,-u,-f,-1),Vs("n2",s,n,Bs,u,-f,-1),Vs("n3",s,n,Bs,-u,f,-1),Vs("n4",s,n,Bs,u,f,-1),Vs("f1",s,n,Bs,-u,-f,1),Vs("f2",s,n,Bs,u,-f,1),Vs("f3",s,n,Bs,-u,f,1),Vs("f4",s,n,Bs,u,f,1),Vs("u1",s,n,Bs,u*.7,f*1.1,-1),Vs("u2",s,n,Bs,-u*.7,f*1.1,-1),Vs("u3",s,n,Bs,0,f*2,-1),Vs("cf1",s,n,Bs,-u,0,1),Vs("cf2",s,n,Bs,u,0,1),Vs("cf3",s,n,Bs,0,-f,1),Vs("cf4",s,n,Bs,0,f,1),Vs("cn1",s,n,Bs,-u,0,-1),Vs("cn2",s,n,Bs,u,0,-1),Vs("cn3",s,n,Bs,0,-f,-1),Vs("cn4",s,n,Bs,0,f,-1),n.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Vs(B,n,s,u,f,w,T){ty.set(f,w,T).unproject(u);const I=n[B];if(I!==void 0){const F=s.getAttribute("position");for(let U=0,G=I.length;U<G;U++)F.setXYZ(I[U],ty.x,ty.y,ty.z)}}const ny=new Or;class C8 extends $c{constructor(n,s=16776960){const u=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),f=new Float32Array(8*3),w=new Wi;w.setIndex(new Hr(u,1)),w.setAttribute("position",new Hr(f,3)),super(w,new ma({color:s,toneMapped:!1})),this.object=n,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(n){if(n!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&ny.setFromObject(this.object),ny.isEmpty())return;const s=ny.min,u=ny.max,f=this.geometry.attributes.position,w=f.array;w[0]=u.x,w[1]=u.y,w[2]=u.z,w[3]=s.x,w[4]=u.y,w[5]=u.z,w[6]=s.x,w[7]=s.y,w[8]=u.z,w[9]=u.x,w[10]=s.y,w[11]=u.z,w[12]=u.x,w[13]=u.y,w[14]=s.z,w[15]=s.x,w[16]=u.y,w[17]=s.z,w[18]=s.x,w[19]=s.y,w[20]=s.z,w[21]=u.x,w[22]=s.y,w[23]=s.z,f.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(n){return this.object=n,this.update(),this}copy(n,s){return super.copy(n,s),this.object=n.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class M8 extends $c{constructor(n,s=16776960){const u=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),f=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],w=new Wi;w.setIndex(new Hr(u,1)),w.setAttribute("position",new li(f,3)),super(w,new ma({color:s,toneMapped:!1})),this.box=n,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(n){const s=this.box;s.isEmpty()||(s.getCenter(this.position),s.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(n))}dispose(){this.geometry.dispose(),this.material.dispose()}}class b8 extends Mh{constructor(n,s=1,u=16776960){const f=u,w=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],T=new Wi;T.setAttribute("position",new li(w,3)),T.computeBoundingSphere(),super(T,new ma({color:f,toneMapped:!1})),this.type="PlaneHelper",this.plane=n,this.size=s;const I=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],F=new Wi;F.setAttribute("position",new li(I,3)),F.computeBoundingSphere(),this.add(new eo(F,new Uc({color:f,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(n){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(n)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const JS=new Qe;let iy,YE;class S8 extends dr{constructor(n=new Qe(0,0,1),s=new Qe(0,0,0),u=1,f=16776960,w=u*.2,T=w*.2){super(),this.type="ArrowHelper",iy===void 0&&(iy=new Wi,iy.setAttribute("position",new li([0,0,0,0,1,0],3)),YE=new Vd(0,.5,1,5,1),YE.translate(0,-.5,0)),this.position.copy(s),this.line=new Mh(iy,new ma({color:f,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new eo(YE,new Uc({color:f,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(n),this.setLength(u,w,T)}setDirection(n){if(n.y>.99999)this.quaternion.set(0,0,0,1);else if(n.y<-.99999)this.quaternion.set(1,0,0,0);else{JS.set(n.z,0,-n.x).normalize();const s=Math.acos(n.y);this.quaternion.setFromAxisAngle(JS,s)}}setLength(n,s=n*.2,u=s*.2){this.line.scale.set(1,Math.max(1e-4,n-s),1),this.line.updateMatrix(),this.cone.scale.set(u,s,u),this.cone.position.y=n,this.cone.updateMatrix()}setColor(n){this.line.material.color.set(n),this.cone.material.color.set(n)}copy(n){return super.copy(n,!1),this.line.copy(n.line),this.cone.copy(n.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class T8 extends $c{constructor(n=1){const s=[0,0,0,n,0,0,0,0,0,0,n,0,0,0,0,0,0,n],u=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],f=new Wi;f.setAttribute("position",new li(s,3)),f.setAttribute("color",new li(u,3));const w=new ma({vertexColors:!0,toneMapped:!1});super(f,w),this.type="AxesHelper"}setColors(n,s,u){const f=new kn,w=this.geometry.attributes.color.array;return f.set(n),f.toArray(w,0),f.toArray(w,3),f.set(s),f.toArray(w,6),f.toArray(w,9),f.set(u),f.toArray(w,12),f.toArray(w,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class I8{constructor(){this.type="ShapePath",this.color=new kn,this.subPaths=[],this.currentPath=null}moveTo(n,s){return this.currentPath=new Ug,this.subPaths.push(this.currentPath),this.currentPath.moveTo(n,s),this}lineTo(n,s){return this.currentPath.lineTo(n,s),this}quadraticCurveTo(n,s,u,f){return this.currentPath.quadraticCurveTo(n,s,u,f),this}bezierCurveTo(n,s,u,f,w,T){return this.currentPath.bezierCurveTo(n,s,u,f,w,T),this}splineThru(n){return this.currentPath.splineThru(n),this}toShapes(n){function s(de){const Ce=[];for(let ge=0,we=de.length;ge<we;ge++){const Le=de[ge],Ye=new Qd;Ye.curves=Le.curves,Ce.push(Ye)}return Ce}function u(de,Ce){const ge=Ce.length;let we=!1;for(let Le=ge-1,Ye=0;Ye<ge;Le=Ye++){let it=Ce[Le],Me=Ce[Ye],Je=Me.x-it.x,tt=Me.y-it.y;if(Math.abs(tt)>Number.EPSILON){if(tt<0&&(it=Ce[Ye],Je=-Je,Me=Ce[Le],tt=-tt),de.y<it.y||de.y>Me.y)continue;if(de.y===it.y){if(de.x===it.x)return!0}else{const mt=tt*(de.x-it.x)-Je*(de.y-it.y);if(mt===0)return!0;if(mt<0)continue;we=!we}}else{if(de.y!==it.y)continue;if(Me.x<=de.x&&de.x<=it.x||it.x<=de.x&&de.x<=Me.x)return!0}}return we}const f=eu.isClockWise,w=this.subPaths;if(w.length===0)return[];let T,I,F;const U=[];if(w.length===1)return I=w[0],F=new Qd,F.curves=I.curves,U.push(F),U;let G=!f(w[0].getPoints());G=n?!G:G;const V=[],j=[];let Y=[],re=0,ie;j[re]=void 0,Y[re]=[];for(let de=0,Ce=w.length;de<Ce;de++)I=w[de],ie=I.getPoints(),T=f(ie),T=n?!T:T,T?(!G&&j[re]&&re++,j[re]={s:new Qd,p:ie},j[re].s.curves=I.curves,G&&re++,Y[re]=[]):Y[re].push({h:I,p:ie[0]});if(!j[0])return s(w);if(j.length>1){let de=!1,Ce=0;for(let ge=0,we=j.length;ge<we;ge++)V[ge]=[];for(let ge=0,we=j.length;ge<we;ge++){const Le=Y[ge];for(let Ye=0;Ye<Le.length;Ye++){const it=Le[Ye];let Me=!0;for(let Je=0;Je<j.length;Je++)u(it.p,j[Je].p)&&(ge!==Je&&Ce++,Me?(Me=!1,V[Je].push(it)):de=!0);Me&&V[ge].push(it)}}Ce>0&&de===!1&&(Y=V)}let $;for(let de=0,Ce=j.length;de<Ce;de++){F=j[de].s,U.push(F),$=Y[de];for(let ge=0,we=$.length;ge<we;ge++)F.holes.push($[ge].h)}return U}}const Su=R8();function R8(){const B=new ArrayBuffer(4),n=new Float32Array(B),s=new Uint32Array(B),u=new Uint32Array(512),f=new Uint32Array(512);for(let F=0;F<256;++F){const U=F-127;U<-27?(u[F]=0,u[F|256]=32768,f[F]=24,f[F|256]=24):U<-14?(u[F]=1024>>-U-14,u[F|256]=1024>>-U-14|32768,f[F]=-U-1,f[F|256]=-U-1):U<=15?(u[F]=U+15<<10,u[F|256]=U+15<<10|32768,f[F]=13,f[F|256]=13):U<128?(u[F]=31744,u[F|256]=64512,f[F]=24,f[F|256]=24):(u[F]=31744,u[F|256]=64512,f[F]=13,f[F|256]=13)}const w=new Uint32Array(2048),T=new Uint32Array(64),I=new Uint32Array(64);for(let F=1;F<1024;++F){let U=F<<13,G=0;for(;!(U&8388608);)U<<=1,G-=8388608;U&=-8388609,G+=947912704,w[F]=U|G}for(let F=1024;F<2048;++F)w[F]=939524096+(F-1024<<13);for(let F=1;F<31;++F)T[F]=F<<23;T[31]=1199570944,T[32]=2147483648;for(let F=33;F<63;++F)T[F]=2147483648+(F-32<<23);T[63]=3347054592;for(let F=1;F<64;++F)F!==32&&(I[F]=1024);return{floatView:n,uint32View:s,baseTable:u,shiftTable:f,mantissaTable:w,exponentTable:T,offsetTable:I}}function B8(B){Math.abs(B)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),B=Jr(B,-65504,65504),Su.floatView[0]=B;const n=Su.uint32View[0],s=n>>23&511;return Su.baseTable[s]+((n&8388607)>>Su.shiftTable[s])}function L8(B){const n=B>>10;return Su.uint32View[0]=Su.mantissaTable[Su.offsetTable[n]+(B&1023)]+Su.exponentTable[n],Su.floatView[0]}var D8=Object.freeze({__proto__:null,toHalfFloat:B8,fromHalfFloat:L8});function P8(){console.error("THREE.ImmediateRenderObject has been removed.")}class O8 extends Us{constructor(n,s,u){console.error('THREE.WebGLMultisampleRenderTarget has been removed. Use a normal render target and set the "samples" property to greater 0 to enable multisampling.'),super(n,s,u),this.samples=4}}class F8 extends Oc{constructor(n,s,u,f){console.warn("THREE.DataTexture2DArray has been renamed to DataArrayTexture."),super(n,s,u,f)}}class N8 extends Gr{constructor(n,s,u,f){console.warn("THREE.DataTexture3D has been renamed to Data3DTexture."),super(n,s,u,f)}}class k8 extends Zl{constructor(n,s,u,f,w,T){console.warn("THREE.BoxBufferGeometry has been renamed to THREE.BoxGeometry."),super(n,s,u,f,w,T)}}class U8 extends zg{constructor(n,s,u,f){console.warn("THREE.CapsuleBufferGeometry has been renamed to THREE.CapsuleGeometry."),super(n,s,u,f)}}class z8 extends Gg{constructor(n,s,u,f){console.warn("THREE.CircleBufferGeometry has been renamed to THREE.CircleGeometry."),super(n,s,u,f)}}class G8 extends Hg{constructor(n,s,u,f,w,T,I){console.warn("THREE.ConeBufferGeometry has been renamed to THREE.ConeGeometry."),super(n,s,u,f,w,T,I)}}class H8 extends Vd{constructor(n,s,u,f,w,T,I,F){console.warn("THREE.CylinderBufferGeometry has been renamed to THREE.CylinderGeometry."),super(n,s,u,f,w,T,I,F)}}class V8 extends Vg{constructor(n,s){console.warn("THREE.DodecahedronBufferGeometry has been renamed to THREE.DodecahedronGeometry."),super(n,s)}}class Q8 extends Xg{constructor(n,s){console.warn("THREE.ExtrudeBufferGeometry has been renamed to THREE.ExtrudeGeometry."),super(n,s)}}class W8 extends Kg{constructor(n,s){console.warn("THREE.IcosahedronBufferGeometry has been renamed to THREE.IcosahedronGeometry."),super(n,s)}}class j8 extends Dp{constructor(n,s,u,f){console.warn("THREE.LatheBufferGeometry has been renamed to THREE.LatheGeometry."),super(n,s,u,f)}}class X8 extends Op{constructor(n,s){console.warn("THREE.OctahedronBufferGeometry has been renamed to THREE.OctahedronGeometry."),super(n,s)}}class K8 extends jc{constructor(n,s,u,f){console.warn("THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry."),super(n,s,u,f)}}class Y8 extends Cu{constructor(n,s,u,f){console.warn("THREE.PolyhedronBufferGeometry has been renamed to THREE.PolyhedronGeometry."),super(n,s,u,f)}}class q8 extends Yg{constructor(n,s,u,f,w,T){console.warn("THREE.RingBufferGeometry has been renamed to THREE.RingGeometry."),super(n,s,u,f,w,T)}}class J8 extends qg{constructor(n,s){console.warn("THREE.ShapeBufferGeometry has been renamed to THREE.ShapeGeometry."),super(n,s)}}class Z8 extends Fp{constructor(n,s,u,f,w,T,I){console.warn("THREE.SphereBufferGeometry has been renamed to THREE.SphereGeometry."),super(n,s,u,f,w,T,I)}}class $8 extends Jg{constructor(n,s){console.warn("THREE.TetrahedronBufferGeometry has been renamed to THREE.TetrahedronGeometry."),super(n,s)}}class e6 extends Zg{constructor(n,s,u,f,w){console.warn("THREE.TorusBufferGeometry has been renamed to THREE.TorusGeometry."),super(n,s,u,f,w)}}class t6 extends $g{constructor(n,s,u,f,w,T){console.warn("THREE.TorusKnotBufferGeometry has been renamed to THREE.TorusKnotGeometry."),super(n,s,u,f,w,T)}}class n6 extends eA{constructor(n,s,u,f,w){console.warn("THREE.TubeBufferGeometry has been renamed to THREE.TubeGeometry."),super(n,s,u,f,w)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:h}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=h)},"./node_modules/super-three/examples/jsm/libs/ktx-parse.module.js":(l,d,c)=>{c.r(d),c.d(d,{KHR_DF_CHANNEL_RGBSDA_ALPHA:()=>ye,KHR_DF_CHANNEL_RGBSDA_BLUE:()=>ze,KHR_DF_CHANNEL_RGBSDA_DEPTH:()=>qe,KHR_DF_CHANNEL_RGBSDA_GREEN:()=>ci,KHR_DF_CHANNEL_RGBSDA_RED:()=>Bn,KHR_DF_CHANNEL_RGBSDA_STENCIL:()=>Pe,KHR_DF_FLAG_ALPHA_PREMULTIPLIED:()=>D,KHR_DF_FLAG_ALPHA_STRAIGHT:()=>O,KHR_DF_KHR_DESCRIPTORTYPE_BASICFORMAT:()=>y,KHR_DF_MODEL_ASTC:()=>R,KHR_DF_MODEL_ETC1:()=>_,KHR_DF_MODEL_ETC1S:()=>P,KHR_DF_MODEL_ETC2:()=>S,KHR_DF_MODEL_RGBSDA:()=>b,KHR_DF_MODEL_UNSPECIFIED:()=>g,KHR_DF_PRIMARIES_ACES:()=>Ct,KHR_DF_PRIMARIES_ACESCC:()=>qt,KHR_DF_PRIMARIES_ADOBERGB:()=>An,KHR_DF_PRIMARIES_BT2020:()=>ct,KHR_DF_PRIMARIES_BT601_EBU:()=>gt,KHR_DF_PRIMARIES_BT601_SMPTE:()=>It,KHR_DF_PRIMARIES_BT709:()=>xt,KHR_DF_PRIMARIES_CIEXYZ:()=>ut,KHR_DF_PRIMARIES_DISPLAYP3:()=>fn,KHR_DF_PRIMARIES_NTSC1953:()=>Ft,KHR_DF_PRIMARIES_PAL525:()=>un,KHR_DF_PRIMARIES_UNSPECIFIED:()=>Ot,KHR_DF_SAMPLE_DATATYPE_EXPONENT:()=>Se,KHR_DF_SAMPLE_DATATYPE_FLOAT:()=>me,KHR_DF_SAMPLE_DATATYPE_LINEAR:()=>Be,KHR_DF_SAMPLE_DATATYPE_SIGNED:()=>Re,KHR_DF_TRANSFER_ACESCC:()=>je,KHR_DF_TRANSFER_ACESCCT:()=>rt,KHR_DF_TRANSFER_ADOBERGB:()=>He,KHR_DF_TRANSFER_BT1886:()=>ee,KHR_DF_TRANSFER_DCIP3:()=>he,KHR_DF_TRANSFER_HLG_EOTF:()=>X,KHR_DF_TRANSFER_HLG_OETF:()=>ne,KHR_DF_TRANSFER_ITU:()=>J,KHR_DF_TRANSFER_LINEAR:()=>N,KHR_DF_TRANSFER_NTSC:()=>K,KHR_DF_TRANSFER_PAL625_EOTF:()=>ve,KHR_DF_TRANSFER_PAL_OETF:()=>xe,KHR_DF_TRANSFER_PQ_EOTF:()=>W,KHR_DF_TRANSFER_PQ_OETF:()=>ce,KHR_DF_TRANSFER_SLOG:()=>se,KHR_DF_TRANSFER_SLOG2:()=>ae,KHR_DF_TRANSFER_SRGB:()=>H,KHR_DF_TRANSFER_ST240:()=>Fe,KHR_DF_TRANSFER_UNSPECIFIED:()=>L,KHR_DF_VENDORID_KHRONOS:()=>x,KHR_DF_VERSION:()=>C,KHR_SUPERCOMPRESSION_BASISLZ:()=>p,KHR_SUPERCOMPRESSION_NONE:()=>m,KHR_SUPERCOMPRESSION_ZLIB:()=>v,KHR_SUPERCOMPRESSION_ZSTD:()=>A,KTX2Container:()=>wl,VK_FORMAT_A1R5G5B5_UNORM_PACK16:()=>Ie,VK_FORMAT_A2B10G10R10_SINT_PACK32:()=>Vn,VK_FORMAT_A2B10G10R10_SNORM_PACK32:()=>bn,VK_FORMAT_A2B10G10R10_UINT_PACK32:()=>Bt,VK_FORMAT_A2B10G10R10_UNORM_PACK32:()=>an,VK_FORMAT_A2R10G10B10_SINT_PACK32:()=>zt,VK_FORMAT_A2R10G10B10_SNORM_PACK32:()=>vt,VK_FORMAT_A2R10G10B10_UINT_PACK32:()=>Gt,VK_FORMAT_A2R10G10B10_UNORM_PACK32:()=>Et,VK_FORMAT_A4B4G4R4_UNORM_PACK16_EXT:()=>$a,VK_FORMAT_A4R4G4B4_UNORM_PACK16_EXT:()=>Ra,VK_FORMAT_ASTC_10x10_SFLOAT_BLOCK_EXT:()=>Ia,VK_FORMAT_ASTC_10x10_SRGB_BLOCK:()=>Lc,VK_FORMAT_ASTC_10x10_UNORM_BLOCK:()=>Ql,VK_FORMAT_ASTC_10x5_SFLOAT_BLOCK_EXT:()=>$r,VK_FORMAT_ASTC_10x5_SRGB_BLOCK:()=>jt,VK_FORMAT_ASTC_10x5_UNORM_BLOCK:()=>yd,VK_FORMAT_ASTC_10x6_SFLOAT_BLOCK_EXT:()=>Fc,VK_FORMAT_ASTC_10x6_SRGB_BLOCK:()=>zr,VK_FORMAT_ASTC_10x6_UNORM_BLOCK:()=>kr,VK_FORMAT_ASTC_10x8_SFLOAT_BLOCK_EXT:()=>Ta,VK_FORMAT_ASTC_10x8_SRGB_BLOCK:()=>ha,VK_FORMAT_ASTC_10x8_UNORM_BLOCK:()=>Bc,VK_FORMAT_ASTC_12x10_SFLOAT_BLOCK_EXT:()=>Nc,VK_FORMAT_ASTC_12x10_SRGB_BLOCK:()=>Dc,VK_FORMAT_ASTC_12x10_UNORM_BLOCK:()=>Za,VK_FORMAT_ASTC_12x12_SFLOAT_BLOCK_EXT:()=>ts,VK_FORMAT_ASTC_12x12_SRGB_BLOCK:()=>hs,VK_FORMAT_ASTC_12x12_UNORM_BLOCK:()=>lh,VK_FORMAT_ASTC_4x4_SFLOAT_BLOCK_EXT:()=>uh,VK_FORMAT_ASTC_4x4_SRGB_BLOCK:()=>ip,VK_FORMAT_ASTC_4x4_UNORM_BLOCK:()=>np,VK_FORMAT_ASTC_5x4_SFLOAT_BLOCK_EXT:()=>Ed,VK_FORMAT_ASTC_5x4_SRGB_BLOCK:()=>vd,VK_FORMAT_ASTC_5x4_UNORM_BLOCK:()=>rp,VK_FORMAT_ASTC_5x5_SFLOAT_BLOCK_EXT:()=>zs,VK_FORMAT_ASTC_5x5_SRGB_BLOCK:()=>Rc,VK_FORMAT_ASTC_5x5_UNORM_BLOCK:()=>Ic,VK_FORMAT_ASTC_6x5_SFLOAT_BLOCK_EXT:()=>Qe,VK_FORMAT_ASTC_6x5_SRGB_BLOCK:()=>ah,VK_FORMAT_ASTC_6x5_UNORM_BLOCK:()=>oh,VK_FORMAT_ASTC_6x6_SFLOAT_BLOCK_EXT:()=>_o,VK_FORMAT_ASTC_6x6_SRGB_BLOCK:()=>jo,VK_FORMAT_ASTC_6x6_UNORM_BLOCK:()=>Wo,VK_FORMAT_ASTC_8x5_SFLOAT_BLOCK_EXT:()=>ql,VK_FORMAT_ASTC_8x5_SRGB_BLOCK:()=>ba,VK_FORMAT_ASTC_8x5_UNORM_BLOCK:()=>Ja,VK_FORMAT_ASTC_8x6_SFLOAT_BLOCK_EXT:()=>Or,VK_FORMAT_ASTC_8x6_SRGB_BLOCK:()=>Vl,VK_FORMAT_ASTC_8x6_UNORM_BLOCK:()=>Xo,VK_FORMAT_ASTC_8x8_SFLOAT_BLOCK_EXT:()=>Zr,VK_FORMAT_ASTC_8x8_SRGB_BLOCK:()=>Rr,VK_FORMAT_ASTC_8x8_UNORM_BLOCK:()=>Sa,VK_FORMAT_B10G11R11_UFLOAT_PACK32:()=>Gl,VK_FORMAT_B10X6G10X6R10X6G10X6_422_UNORM_4PACK16:()=>ch,VK_FORMAT_B12X4G12X4R12X4G12X4_422_UNORM_4PACK16:()=>Ss,VK_FORMAT_B4G4R4A4_UNORM_PACK16:()=>Oe,VK_FORMAT_B5G5R5A1_UNORM_PACK16:()=>Z,VK_FORMAT_B5G6R5_UNORM_PACK16:()=>le,VK_FORMAT_B8G8R8A8_SINT:()=>Ge,VK_FORMAT_B8G8R8A8_SNORM:()=>Kn,VK_FORMAT_B8G8R8A8_SRGB:()=>et,VK_FORMAT_B8G8R8A8_UINT:()=>be,VK_FORMAT_B8G8R8A8_UNORM:()=>Un,VK_FORMAT_B8G8R8_SINT:()=>st,VK_FORMAT_B8G8R8_SNORM:()=>yn,VK_FORMAT_B8G8R8_SRGB:()=>At,VK_FORMAT_B8G8R8_UINT:()=>De,VK_FORMAT_B8G8R8_UNORM:()=>ei,VK_FORMAT_BC1_RGBA_SRGB_BLOCK:()=>xl,VK_FORMAT_BC1_RGBA_UNORM_BLOCK:()=>Ho,VK_FORMAT_BC1_RGB_SRGB_BLOCK:()=>dg,VK_FORMAT_BC1_RGB_UNORM_BLOCK:()=>ih,VK_FORMAT_BC2_SRGB_BLOCK:()=>Sc,VK_FORMAT_BC2_UNORM_BLOCK:()=>rh,VK_FORMAT_BC3_SRGB_BLOCK:()=>pd,VK_FORMAT_BC3_UNORM_BLOCK:()=>fd,VK_FORMAT_BC4_SNORM_BLOCK:()=>md,VK_FORMAT_BC4_UNORM_BLOCK:()=>ep,VK_FORMAT_BC5_SNORM_BLOCK:()=>Tc,VK_FORMAT_BC5_UNORM_BLOCK:()=>gd,VK_FORMAT_BC6H_SFLOAT_BLOCK:()=>Qo,VK_FORMAT_BC6H_UFLOAT_BLOCK:()=>Vo,VK_FORMAT_BC7_SRGB_BLOCK:()=>lo,VK_FORMAT_BC7_UNORM_BLOCK:()=>ua,VK_FORMAT_D16_UNORM:()=>ao,VK_FORMAT_D16_UNORM_S8_UINT:()=>Hl,VK_FORMAT_D24_UNORM_S8_UINT:()=>vr,VK_FORMAT_D32_SFLOAT:()=>qa,VK_FORMAT_D32_SFLOAT_S8_UINT:()=>hg,VK_FORMAT_E5B9G9R9_UFLOAT_PACK32:()=>Xs,VK_FORMAT_EAC_R11G11_SNORM_BLOCK:()=>_l,VK_FORMAT_EAC_R11G11_UNORM_BLOCK:()=>Ad,VK_FORMAT_EAC_R11_SNORM_BLOCK:()=>tp,VK_FORMAT_EAC_R11_UNORM_BLOCK:()=>sh,VK_FORMAT_ETC2_R8G8B8A1_SRGB_BLOCK:()=>El,VK_FORMAT_ETC2_R8G8B8A1_UNORM_BLOCK:()=>xo,VK_FORMAT_ETC2_R8G8B8A8_SRGB_BLOCK:()=>Jr,VK_FORMAT_ETC2_R8G8B8A8_UNORM_BLOCK:()=>Eo,VK_FORMAT_ETC2_R8G8B8_SRGB_BLOCK:()=>Ma,VK_FORMAT_ETC2_R8G8B8_UNORM_BLOCK:()=>ks,VK_FORMAT_G10X6B10X6G10X6R10X6_422_UNORM_4PACK16:()=>jl,VK_FORMAT_G12X4B12X4G12X4R12X4_422_UNORM_4PACK16:()=>Kl,VK_FORMAT_PVRTC1_2BPP_SRGB_BLOCK_IMG:()=>Us,VK_FORMAT_PVRTC1_2BPP_UNORM_BLOCK_IMG:()=>Yl,VK_FORMAT_PVRTC1_4BPP_SRGB_BLOCK_IMG:()=>Oc,VK_FORMAT_PVRTC1_4BPP_UNORM_BLOCK_IMG:()=>Pc,VK_FORMAT_PVRTC2_2BPP_SRGB_BLOCK_IMG:()=>xd,VK_FORMAT_PVRTC2_2BPP_UNORM_BLOCK_IMG:()=>yr,VK_FORMAT_PVRTC2_4BPP_SRGB_BLOCK_IMG:()=>Gr,VK_FORMAT_PVRTC2_4BPP_UNORM_BLOCK_IMG:()=>hr,VK_FORMAT_R10X6G10X6B10X6A10X6_UNORM_4PACK16:()=>co,VK_FORMAT_R10X6G10X6_UNORM_2PACK16:()=>ss,VK_FORMAT_R10X6_UNORM_PACK16:()=>Wl,VK_FORMAT_R12X4G12X4B12X4A12X4_UNORM_4PACK16:()=>Xl,VK_FORMAT_R12X4G12X4_UNORM_2PACK16:()=>kn,VK_FORMAT_R12X4_UNORM_PACK16:()=>fu,VK_FORMAT_R16G16B16A16_SFLOAT:()=>Kt,VK_FORMAT_R16G16B16A16_SINT:()=>at,VK_FORMAT_R16G16B16A16_SNORM:()=>Ne,VK_FORMAT_R16G16B16A16_UINT:()=>nt,VK_FORMAT_R16G16B16A16_UNORM:()=>_e,VK_FORMAT_R16G16B16_SFLOAT:()=>pe,VK_FORMAT_R16G16B16_SINT:()=>oe,VK_FORMAT_R16G16B16_SNORM:()=>rr,VK_FORMAT_R16G16B16_UINT:()=>q,VK_FORMAT_R16G16B16_UNORM:()=>qr,VK_FORMAT_R16G16_SFLOAT:()=>fi,VK_FORMAT_R16G16_SINT:()=>Sn,VK_FORMAT_R16G16_SNORM:()=>xi,VK_FORMAT_R16G16_UINT:()=>Ir,VK_FORMAT_R16G16_UNORM:()=>Ai,VK_FORMAT_R16_SFLOAT:()=>ui,VK_FORMAT_R16_SINT:()=>Mn,VK_FORMAT_R16_SNORM:()=>si,VK_FORMAT_R16_UINT:()=>gi,VK_FORMAT_R16_UNORM:()=>ti,VK_FORMAT_R32G32B32A32_SFLOAT:()=>ar,VK_FORMAT_R32G32B32A32_SINT:()=>oi,VK_FORMAT_R32G32B32A32_UINT:()=>Ei,VK_FORMAT_R32G32B32_SFLOAT:()=>Pi,VK_FORMAT_R32G32B32_SINT:()=>Di,VK_FORMAT_R32G32B32_UINT:()=>hi,VK_FORMAT_R32G32_SFLOAT:()=>Yn,VK_FORMAT_R32G32_SINT:()=>Dn,VK_FORMAT_R32G32_UINT:()=>sn,VK_FORMAT_R32_SFLOAT:()=>Rt,VK_FORMAT_R32_SINT:()=>pt,VK_FORMAT_R32_UINT:()=>Wt,VK_FORMAT_R4G4B4A4_UNORM_PACK16:()=>fe,VK_FORMAT_R4G4_UNORM_PACK8:()=>Xe,VK_FORMAT_R5G5B5A1_UNORM_PACK16:()=>Q,VK_FORMAT_R5G6B5_UNORM_PACK16:()=>$e,VK_FORMAT_R64G64B64A64_SFLOAT:()=>zl,VK_FORMAT_R64G64B64A64_SINT:()=>js,VK_FORMAT_R64G64B64A64_UINT:()=>Fo,VK_FORMAT_R64G64B64_SFLOAT:()=>Ul,VK_FORMAT_R64G64B64_SINT:()=>Ns,VK_FORMAT_R64G64B64_UINT:()=>Wr,VK_FORMAT_R64G64_SFLOAT:()=>Fs,VK_FORMAT_R64G64_SINT:()=>ur,VK_FORMAT_R64G64_UINT:()=>is,VK_FORMAT_R64_SFLOAT:()=>vs,VK_FORMAT_R64_SINT:()=>Ur,VK_FORMAT_R64_UINT:()=>Ri,VK_FORMAT_R8G8B8A8_SINT:()=>Nn,VK_FORMAT_R8G8B8A8_SNORM:()=>wt,VK_FORMAT_R8G8B8A8_SRGB:()=>pn,VK_FORMAT_R8G8B8A8_UINT:()=>xn,VK_FORMAT_R8G8B8A8_UNORM:()=>ot,VK_FORMAT_R8G8B8_SINT:()=>Nt,VK_FORMAT_R8G8B8_SNORM:()=>bi,VK_FORMAT_R8G8B8_SRGB:()=>ln,VK_FORMAT_R8G8B8_UINT:()=>vn,VK_FORMAT_R8G8B8_UNORM:()=>or,VK_FORMAT_R8G8_SINT:()=>cr,VK_FORMAT_R8G8_SNORM:()=>cn,VK_FORMAT_R8G8_SRGB:()=>Ni,VK_FORMAT_R8G8_UINT:()=>Xn,VK_FORMAT_R8G8_UNORM:()=>nn,VK_FORMAT_R8_SINT:()=>Tt,VK_FORMAT_R8_SNORM:()=>Te,VK_FORMAT_R8_SRGB:()=>Ht,VK_FORMAT_R8_UINT:()=>Ve,VK_FORMAT_R8_UNORM:()=>Ae,VK_FORMAT_S8_UINT:()=>yl,VK_FORMAT_UNDEFINED:()=>Ee,VK_FORMAT_X8_D24_UNORM_PACK32:()=>Ca,read:()=>hh,write:()=>dh});var h=c("./node_modules/buffer/index.js").Buffer;const m=0,p=1,A=2,v=3,y=0,x=0,C=2,g=0,b=1,_=160,S=161,R=162,P=163,O=0,D=1,L=0,N=1,H=2,J=3,K=4,se=5,ae=6,ee=7,ne=8,X=9,W=10,ce=11,he=12,xe=13,ve=14,Fe=15,je=16,rt=17,He=18,Ot=0,xt=1,gt=2,It=3,ct=4,ut=5,Ct=6,qt=7,Ft=8,un=9,fn=10,An=11,Bn=0,ci=1,ze=2,Pe=13,qe=14,ye=15,me=128,Re=64,Se=32,Be=16,Ee=0,Xe=1,fe=2,Oe=3,$e=4,le=5,Q=6,Z=7,Ie=8,Ae=9,Te=10,Ve=13,Tt=14,Ht=15,nn=16,cn=17,Xn=20,cr=21,Ni=22,or=23,bi=24,vn=27,Nt=28,ln=29,ei=30,yn=31,De=34,st=35,At=36,ot=37,wt=38,xn=41,Nn=42,pn=43,Un=44,Kn=45,be=48,Ge=49,et=50,Et=58,vt=59,Gt=62,zt=63,an=64,bn=65,Bt=68,Vn=69,ti=70,si=71,gi=74,Mn=75,ui=76,Ai=77,xi=78,Ir=81,Sn=82,fi=83,qr=84,rr=85,q=88,oe=89,pe=90,_e=91,Ne=92,nt=95,at=96,Kt=97,Wt=98,pt=99,Rt=100,sn=101,Dn=102,Yn=103,hi=104,Di=105,Pi=106,Ei=107,oi=108,ar=109,Ri=110,Ur=111,vs=112,is=113,ur=114,Fs=115,Wr=116,Ns=117,Ul=118,Fo=119,js=120,zl=121,Gl=122,Xs=123,ao=124,Ca=125,qa=126,yl=127,Hl=128,vr=129,hg=130,ih=131,dg=132,Ho=133,xl=134,rh=135,Sc=136,fd=137,pd=138,ep=139,md=140,gd=141,Tc=142,Vo=143,Qo=144,ua=145,lo=146,ks=147,Ma=148,xo=149,El=150,Eo=151,Jr=152,sh=153,tp=154,Ad=155,_l=156,np=157,ip=158,rp=159,vd=160,Ic=161,Rc=162,oh=163,ah=164,Wo=165,jo=166,Ja=167,ba=168,Xo=169,Vl=170,Sa=171,Rr=172,yd=173,jt=174,kr=175,zr=176,Bc=177,ha=178,Ql=179,Lc=180,Za=181,Dc=182,lh=183,hs=184,Wl=1000156007,ss=1000156008,co=1000156009,jl=1000156010,ch=1000156011,fu=1000156017,kn=1000156018,Xl=1000156019,Kl=1000156020,Ss=1000156021,Yl=1000054e3,Pc=1000054001,yr=1000054002,hr=1000054003,Us=1000054004,Oc=1000054005,xd=1000054006,Gr=1000054007,uh=1000066e3,Ed=1000066001,zs=1000066002,Qe=1000066003,_o=1000066004,ql=1000066005,Or=1000066006,Zr=1000066007,$r=1000066008,Fc=1000066009,Ta=1000066010,Ia=1000066011,Nc=1000066012,ts=1000066013,Ra=100034e4,$a=1000340001;class wl{constructor(){this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=0,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:0,descriptorBlockSize:0,versionNumber:2,colorModel:0,colorPrimaries:1,transferFunction:2,flags:0,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}}class Ks{constructor(wi,Qi,ds,$i){this._dataView=new DataView(wi.buffer,wi.byteOffset+Qi,ds),this._littleEndian=$i,this._offset=0}_nextUint8(){const wi=this._dataView.getUint8(this._offset);return this._offset+=1,wi}_nextUint16(){const wi=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,wi}_nextUint32(){const wi=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,wi}_nextUint64(){const wi=this._dataView.getUint32(this._offset,this._littleEndian)+4294967296*this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,wi}_nextInt32(){const wi=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,wi}_skip(wi){return this._offset+=wi,this}_scan(wi,Qi=0){const ds=this._offset;let $i=0;for(;this._dataView.getUint8(this._offset)!==Qi&&$i<wi;)$i++,this._offset++;return $i<wi&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+ds,$i)}}const wo=new Uint8Array([0]),Br=[171,75,84,88,32,50,48,187,13,10,26,10];function Jl(Qn){return typeof TextEncoder<"u"?new TextEncoder().encode(Qn):h.from(Qn)}function pu(Qn){return typeof TextDecoder<"u"?new TextDecoder().decode(Qn):h.from(Qn).toString("utf8")}function el(Qn){let wi=0;for(const $i of Qn)wi+=$i.byteLength;const Qi=new Uint8Array(wi);let ds=0;for(const $i of Qn)Qi.set(new Uint8Array($i),ds),ds+=$i.byteLength;return Qi}function hh(Qn){const wi=new Uint8Array(Qn.buffer,Qn.byteOffset,Br.length);if(wi[0]!==Br[0]||wi[1]!==Br[1]||wi[2]!==Br[2]||wi[3]!==Br[3]||wi[4]!==Br[4]||wi[5]!==Br[5]||wi[6]!==Br[6]||wi[7]!==Br[7]||wi[8]!==Br[8]||wi[9]!==Br[9]||wi[10]!==Br[10]||wi[11]!==Br[11])throw new Error("Missing KTX 2.0 identifier.");const Qi=new wl,ds=17*Uint32Array.BYTES_PER_ELEMENT,$i=new Ks(Qn,Br.length,ds,!0);Qi.vkFormat=$i._nextUint32(),Qi.typeSize=$i._nextUint32(),Qi.pixelWidth=$i._nextUint32(),Qi.pixelHeight=$i._nextUint32(),Qi.pixelDepth=$i._nextUint32(),Qi.layerCount=$i._nextUint32(),Qi.faceCount=$i._nextUint32();const Ys=$i._nextUint32();Qi.supercompressionScheme=$i._nextUint32();const Jn=$i._nextUint32(),qs=$i._nextUint32(),Ki=$i._nextUint32(),mu=$i._nextUint32(),kc=$i._nextUint64(),uo=$i._nextUint64(),Js=new Ks(Qn,Br.length+ds,3*Ys*8,!0);for(let os=0;os<Ys;os++)Qi.levels.push({levelData:new Uint8Array(Qn.buffer,Qn.byteOffset+Js._nextUint64(),Js._nextUint64()),uncompressedByteLength:Js._nextUint64()});const Bi=new Ks(Qn,Jn,qs,!0),Da={vendorId:Bi._skip(4)._nextUint16(),descriptorType:Bi._nextUint16(),versionNumber:Bi._nextUint16(),descriptorBlockSize:Bi._nextUint16(),colorModel:Bi._nextUint8(),colorPrimaries:Bi._nextUint8(),transferFunction:Bi._nextUint8(),flags:Bi._nextUint8(),texelBlockDimension:[Bi._nextUint8(),Bi._nextUint8(),Bi._nextUint8(),Bi._nextUint8()],bytesPlane:[Bi._nextUint8(),Bi._nextUint8(),Bi._nextUint8(),Bi._nextUint8(),Bi._nextUint8(),Bi._nextUint8(),Bi._nextUint8(),Bi._nextUint8()],samples:[]},gu=(Da.descriptorBlockSize/4-6)/4;for(let os=0;os<gu;os++){const Yo={bitOffset:Bi._nextUint16(),bitLength:Bi._nextUint8(),channelType:Bi._nextUint8(),samplePosition:[Bi._nextUint8(),Bi._nextUint8(),Bi._nextUint8(),Bi._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};64&Yo.channelType?(Yo.sampleLower=Bi._nextInt32(),Yo.sampleUpper=Bi._nextInt32()):(Yo.sampleLower=Bi._nextUint32(),Yo.sampleUpper=Bi._nextUint32()),Da.samples[os]=Yo}Qi.dataFormatDescriptor.length=0,Qi.dataFormatDescriptor.push(Da);const Zs=new Ks(Qn,Ki,mu,!0);for(;Zs._offset<mu;){const os=Zs._nextUint32(),Yo=Zs._scan(os),ys=pu(Yo),Cl=Zs._scan(os-Yo.byteLength);Qi.keyValue[ys]=ys.match(/^ktx/i)?pu(Cl):Cl,Zs._offset%4&&Zs._skip(4-Zs._offset%4)}if(uo<=0)return Qi;const Ar=new Ks(Qn,kc,uo,!0),es=Ar._nextUint16(),Yi=Ar._nextUint16(),mr=Ar._nextUint32(),fs=Ar._nextUint32(),Pa=Ar._nextUint32(),Oa=Ar._nextUint32(),sp=[];for(let os=0;os<Ys;os++)sp.push({imageFlags:Ar._nextUint32(),rgbSliceByteOffset:Ar._nextUint32(),rgbSliceByteLength:Ar._nextUint32(),alphaSliceByteOffset:Ar._nextUint32(),alphaSliceByteLength:Ar._nextUint32()});const op=kc+Ar._offset,_d=op+mr,Au=_d+fs,fh=Au+Pa,fg=new Uint8Array(Qn.buffer,Qn.byteOffset+op,mr),wd=new Uint8Array(Qn.buffer,Qn.byteOffset+_d,fs),dr=new Uint8Array(Qn.buffer,Qn.byteOffset+Au,Pa),Ko=new Uint8Array(Qn.buffer,Qn.byteOffset+fh,Oa);return Qi.globalData={endpointCount:es,selectorCount:Yi,imageDescs:sp,endpointsData:fg,selectorsData:wd,tablesData:dr,extendedData:Ko},Qi}function Ba(){return(Ba=Object.assign||function(Qn){for(var wi=1;wi<arguments.length;wi++){var Qi=arguments[wi];for(var ds in Qi)Object.prototype.hasOwnProperty.call(Qi,ds)&&(Qn[ds]=Qi[ds])}return Qn}).apply(this,arguments)}const La={keepWriter:!1};function dh(Qn,wi={}){wi=Ba({},La,wi);let Qi=new ArrayBuffer(0);if(Qn.globalData){const es=new ArrayBuffer(20+5*Qn.globalData.imageDescs.length*4),Yi=new DataView(es);Yi.setUint16(0,Qn.globalData.endpointCount,!0),Yi.setUint16(2,Qn.globalData.selectorCount,!0),Yi.setUint32(4,Qn.globalData.endpointsData.byteLength,!0),Yi.setUint32(8,Qn.globalData.selectorsData.byteLength,!0),Yi.setUint32(12,Qn.globalData.tablesData.byteLength,!0),Yi.setUint32(16,Qn.globalData.extendedData.byteLength,!0);for(let mr=0;mr<Qn.globalData.imageDescs.length;mr++){const fs=Qn.globalData.imageDescs[mr];Yi.setUint32(20+5*mr*4+0,fs.imageFlags,!0),Yi.setUint32(20+5*mr*4+4,fs.rgbSliceByteOffset,!0),Yi.setUint32(20+5*mr*4+8,fs.rgbSliceByteLength,!0),Yi.setUint32(20+5*mr*4+12,fs.alphaSliceByteOffset,!0),Yi.setUint32(20+5*mr*4+16,fs.alphaSliceByteLength,!0)}Qi=el([es,Qn.globalData.endpointsData,Qn.globalData.selectorsData,Qn.globalData.tablesData,Qn.globalData.extendedData])}const ds=[];let $i=Qn.keyValue;wi.keepWriter||($i=Ba({},Qn.keyValue,{KTXwriter:"KTX-Parse v0.3.1"}));for(const es in $i){const Yi=$i[es],mr=Jl(es),fs=typeof Yi=="string"?Jl(Yi):Yi,Pa=mr.byteLength+1+fs.byteLength+1,Oa=Pa%4?4-Pa%4:0;ds.push(el([new Uint32Array([Pa]),mr,wo,fs,wo,new Uint8Array(Oa).fill(0)]))}const Ys=el(ds);if(Qn.dataFormatDescriptor.length!==1||Qn.dataFormatDescriptor[0].descriptorType!==0)throw new Error("Only BASICFORMAT Data Format Descriptor output supported.");const Jn=Qn.dataFormatDescriptor[0],qs=new ArrayBuffer(28+16*Jn.samples.length),Ki=new DataView(qs),mu=24+16*Jn.samples.length;if(Ki.setUint32(0,qs.byteLength,!0),Ki.setUint16(4,Jn.vendorId,!0),Ki.setUint16(6,Jn.descriptorType,!0),Ki.setUint16(8,Jn.versionNumber,!0),Ki.setUint16(10,mu,!0),Ki.setUint8(12,Jn.colorModel),Ki.setUint8(13,Jn.colorPrimaries),Ki.setUint8(14,Jn.transferFunction),Ki.setUint8(15,Jn.flags),!Array.isArray(Jn.texelBlockDimension))throw new Error("texelBlockDimension is now an array. For dimensionality `d`, set `d - 1`.");Ki.setUint8(16,Jn.texelBlockDimension[0]),Ki.setUint8(17,Jn.texelBlockDimension[1]),Ki.setUint8(18,Jn.texelBlockDimension[2]),Ki.setUint8(19,Jn.texelBlockDimension[3]);for(let es=0;es<8;es++)Ki.setUint8(20+es,Jn.bytesPlane[es]);for(let es=0;es<Jn.samples.length;es++){const Yi=Jn.samples[es],mr=28+16*es;if(Yi.channelID)throw new Error("channelID has been renamed to channelType.");Ki.setUint16(mr+0,Yi.bitOffset,!0),Ki.setUint8(mr+2,Yi.bitLength),Ki.setUint8(mr+3,Yi.channelType),Ki.setUint8(mr+4,Yi.samplePosition[0]),Ki.setUint8(mr+5,Yi.samplePosition[1]),Ki.setUint8(mr+6,Yi.samplePosition[2]),Ki.setUint8(mr+7,Yi.samplePosition[3]),64&Yi.channelType?(Ki.setInt32(mr+8,Yi.sampleLower,!0),Ki.setInt32(mr+12,Yi.sampleUpper,!0)):(Ki.setUint32(mr+8,Yi.sampleLower,!0),Ki.setUint32(mr+12,Yi.sampleUpper,!0))}const kc=Br.length+68+3*Qn.levels.length*8,uo=kc+qs.byteLength;let Js=Qi.byteLength>0?uo+Ys.byteLength:0;Js%8&&(Js+=8-Js%8);const Bi=[],Da=new DataView(new ArrayBuffer(3*Qn.levels.length*8));let gu=(Js||uo+Ys.byteLength)+Qi.byteLength;for(let es=0;es<Qn.levels.length;es++){const Yi=Qn.levels[es];Bi.push(Yi.levelData),Da.setBigUint64(24*es+0,BigInt(gu),!0),Da.setBigUint64(24*es+8,BigInt(Yi.levelData.byteLength),!0),Da.setBigUint64(24*es+16,BigInt(Yi.uncompressedByteLength),!0),gu+=Yi.levelData.byteLength}const Zs=new ArrayBuffer(68),Ar=new DataView(Zs);return Ar.setUint32(0,Qn.vkFormat,!0),Ar.setUint32(4,Qn.typeSize,!0),Ar.setUint32(8,Qn.pixelWidth,!0),Ar.setUint32(12,Qn.pixelHeight,!0),Ar.setUint32(16,Qn.pixelDepth,!0),Ar.setUint32(20,Qn.layerCount,!0),Ar.setUint32(24,Qn.faceCount,!0),Ar.setUint32(28,Qn.levels.length,!0),Ar.setUint32(32,Qn.supercompressionScheme,!0),Ar.setUint32(36,kc,!0),Ar.setUint32(40,qs.byteLength,!0),Ar.setUint32(44,uo,!0),Ar.setUint32(48,Ys.byteLength,!0),Ar.setBigUint64(52,BigInt(Qi.byteLength>0?Js:0),!0),Ar.setBigUint64(60,BigInt(Qi.byteLength),!0),new Uint8Array(el([new Uint8Array(Br).buffer,Zs,Da.buffer,qs,Ys,Js>0?new ArrayBuffer(Js-(uo+Ys.byteLength)):new ArrayBuffer(0),Qi,...Bi]))}},"./node_modules/super-three/examples/jsm/libs/zstddec.module.js":(l,d,c)=>{c.r(d),c.d(d,{ZSTDDecoder:()=>y});var h=c("./node_modules/buffer/index.js").Buffer;let m,p,A;const v={env:{emscripten_notify_memory_growth:function(C){A=new Uint8Array(p.exports.memory.buffer)}}};class y{init(){return m||(m=typeof fetch<"u"?fetch("data:application/wasm;base64,"+x).then(g=>g.arrayBuffer()).then(g=>WebAssembly.instantiate(g,v)).then(this._init):WebAssembly.instantiate(h.from(x,"base64"),v).then(this._init),m)}_init(g){p=g.instance,v.env.emscripten_notify_memory_growth(0)}decode(g,b=0){if(!p)throw new Error("ZSTDDecoder: Await .init() before decoding.");const _=g.byteLength,S=p.exports.malloc(_);A.set(g,S),b=b||Number(p.exports.ZSTD_findDecompressedSize(S,_));const R=p.exports.malloc(b),P=p.exports.ZSTD_decompress(R,b,S,_),O=A.slice(R,R+P);return p.exports.free(S),p.exports.free(R),O}}const x="AGFzbQEAAAABpQEVYAF/AX9gAn9/AGADf39/AX9gBX9/f39/AX9gAX8AYAJ/fwF/YAR/f39/AX9gA39/fwBgBn9/f39/fwF/YAd/f39/f39/AX9gAn9/AX5gAn5+AX5gAABgBX9/f39/AGAGf39/f39/AGAIf39/f39/f38AYAl/f39/f39/f38AYAABf2AIf39/f39/f38Bf2ANf39/f39/f39/f39/fwF/YAF/AX4CJwEDZW52H2Vtc2NyaXB0ZW5fbm90aWZ5X21lbW9yeV9ncm93dGgABANpaAEFAAAFAgEFCwACAQABAgIFBQcAAwABDgsBAQcAEhMHAAUBDAQEAAANBwQCAgYCBAgDAwMDBgEACQkHBgICAAYGAgQUBwYGAwIGAAMCAQgBBwUGCgoEEQAEBAEIAwgDBQgDEA8IAAcABAUBcAECAgUEAQCAAgYJAX8BQaCgwAILB2AHBm1lbW9yeQIABm1hbGxvYwAoBGZyZWUAJgxaU1REX2lzRXJyb3IAaBlaU1REX2ZpbmREZWNvbXByZXNzZWRTaXplAFQPWlNURF9kZWNvbXByZXNzAEoGX3N0YXJ0ACQJBwEAQQELASQKussBaA8AIAAgACgCBCABajYCBAsZACAAKAIAIAAoAgRBH3F0QQAgAWtBH3F2CwgAIABBiH9LC34BBH9BAyEBIAAoAgQiA0EgTQRAIAAoAggiASAAKAIQTwRAIAAQDQ8LIAAoAgwiAiABRgRAQQFBAiADQSBJGw8LIAAgASABIAJrIANBA3YiBCABIARrIAJJIgEbIgJrIgQ2AgggACADIAJBA3RrNgIEIAAgBCgAADYCAAsgAQsUAQF/IAAgARACIQIgACABEAEgAgv3AQECfyACRQRAIABCADcCACAAQQA2AhAgAEIANwIIQbh/DwsgACABNgIMIAAgAUEEajYCECACQQRPBEAgACABIAJqIgFBfGoiAzYCCCAAIAMoAAA2AgAgAUF/ai0AACIBBEAgAEEIIAEQFGs2AgQgAg8LIABBADYCBEF/DwsgACABNgIIIAAgAS0AACIDNgIAIAJBfmoiBEEBTQRAIARBAWtFBEAgACABLQACQRB0IANyIgM2AgALIAAgAS0AAUEIdCADajYCAAsgASACakF/ai0AACIBRQRAIABBADYCBEFsDwsgAEEoIAEQFCACQQN0ams2AgQgAgsWACAAIAEpAAA3AAAgACABKQAINwAICy8BAX8gAUECdEGgHWooAgAgACgCAEEgIAEgACgCBGprQR9xdnEhAiAAIAEQASACCyEAIAFCz9bTvtLHq9lCfiAAfEIfiUKHla+vmLbem55/fgsdAQF/IAAoAgggACgCDEYEfyAAKAIEQSBGBUEACwuCBAEDfyACQYDAAE8EQCAAIAEgAhBnIAAPCyAAIAJqIQMCQCAAIAFzQQNxRQRAAkAgAkEBSARAIAAhAgwBCyAAQQNxRQRAIAAhAgwBCyAAIQIDQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADTw0BIAJBA3ENAAsLAkAgA0F8cSIEQcAASQ0AIAIgBEFAaiIFSw0AA0AgAiABKAIANgIAIAIgASgCBDYCBCACIAEoAgg2AgggAiABKAIMNgIMIAIgASgCEDYCECACIAEoAhQ2AhQgAiABKAIYNgIYIAIgASgCHDYCHCACIAEoAiA2AiAgAiABKAIkNgIkIAIgASgCKDYCKCACIAEoAiw2AiwgAiABKAIwNgIwIAIgASgCNDYCNCACIAEoAjg2AjggAiABKAI8NgI8IAFBQGshASACQUBrIgIgBU0NAAsLIAIgBE8NAQNAIAIgASgCADYCACABQQRqIQEgAkEEaiICIARJDQALDAELIANBBEkEQCAAIQIMAQsgA0F8aiIEIABJBEAgACECDAELIAAhAgNAIAIgAS0AADoAACACIAEtAAE6AAEgAiABLQACOgACIAIgAS0AAzoAAyABQQRqIQEgAkEEaiICIARNDQALCyACIANJBEADQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADRw0ACwsgAAsMACAAIAEpAAA3AAALQQECfyAAKAIIIgEgACgCEEkEQEEDDwsgACAAKAIEIgJBB3E2AgQgACABIAJBA3ZrIgE2AgggACABKAAANgIAQQALDAAgACABKAIANgAAC/cCAQJ/AkAgACABRg0AAkAgASACaiAASwRAIAAgAmoiBCABSw0BCyAAIAEgAhALDwsgACABc0EDcSEDAkACQCAAIAFJBEAgAwRAIAAhAwwDCyAAQQNxRQRAIAAhAwwCCyAAIQMDQCACRQ0EIAMgAS0AADoAACABQQFqIQEgAkF/aiECIANBAWoiA0EDcQ0ACwwBCwJAIAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQhBSAGQQR2IQRBICAAdCIAQQFyIQkgASgCACEPQQAhAiADIQYCQANAIAlBAkggAiAPS3JFBEAgAiEHAkAgCARAA0AgBEH//wNxQf//A0YEQCAHQRhqIQcgBiAQSQR/IAZBAmoiBigAACAFdgUgBUEQaiEFIARBEHYLIQQMAQsLA0AgBEEDcSIIQQNGBEAgBUECaiEFIARBAnYhBCAHQQNqIQcMAQsLIAcgCGoiByAPSw0EIAVBAmohBQNAIAIgB0kEQCANIAJBAXRqQQA7AQAgAkEBaiECDAELCyAGIA5LQQAgBiAFQQN1aiIHIAxLG0UEQCAHKAAAIAVBB3EiBXYhBAwCCyAEQQJ2IQQLIAYhBwsCfyALQX9qIAQgAEF/anEiBiAAQQF0QX9qIgggCWsiEUkNABogBCAIcSIEQQAgESAEIABIG2shBiALCyEIIA0gAkEBdGogBkF/aiIEOwEAIAlBASAGayAEIAZBAUgbayEJA0AgCSAASARAIABBAXUhACALQX9qIQsMAQsLAn8gByAOS0EAIAcgBSAIaiIFQQN1aiIGIAxLG0UEQCAFQQdxDAELIAUgDCIGIAdrQQN0awshBSACQQFqIQIgBEUhCCAGKAAAIAVBH3F2IQQMAQsLQWwgCUEBRyAFQSBKcg0BGiABIAJBf2o2AgAgBiAFQQdqQQN1aiADawwBC0FQCyEAIApBEGokACAACwkAQQFBBSAAGwsMACAAIAEoAAA2AAALqgMBCn8jAEHwAGsiCiQAIAJBAWohDiAAQQhqIQtBgIAEIAVBf2p0QRB1IQxBACECQQEhBkEBIAV0IglBf2oiDyEIA0AgAiAORkUEQAJAIAEgAkEBdCINai8BACIHQf//A0YEQCALIAhBA3RqIAI2AgQgCEF/aiEIQQEhBwwBCyAGQQAgDCAHQRB0QRB1ShshBgsgCiANaiAHOwEAIAJBAWohAgwBCwsgACAFNgIEIAAgBjYCACAJQQN2IAlBAXZqQQNqIQxBACEAQQAhBkEAIQIDQCAGIA5GBEADQAJAIAAgCUYNACAKIAsgAEEDdGoiASgCBCIGQQF0aiICIAIvAQAiAkEBajsBACABIAUgAhAUayIIOgADIAEgAiAIQf8BcXQgCWs7AQAgASAEIAZBAnQiAmooAgA6AAIgASACIANqKAIANgIEIABBAWohAAwBCwsFIAEgBkEBdGouAQAhDUEAIQcDQCAHIA1ORQRAIAsgAkEDdGogBjYCBANAIAIgDGogD3EiAiAISw0ACyAHQQFqIQcMAQsLIAZBAWohBgwBCwsgCkHwAGokAAsjAEIAIAEQCSAAhUKHla+vmLbem55/fkLj3MqV/M7y9YV/fAsQACAAQn43AwggACABNgIACyQBAX8gAARAIAEoAgQiAgRAIAEoAgggACACEQEADwsgABAmCwsfACAAIAEgAi8BABAINgIAIAEQBBogACACQQRqNgIEC0oBAX9BoCAoAgAiASAAaiIAQX9MBEBBiCBBMDYCAEF/DwsCQCAAPwBBEHRNDQAgABBmDQBBiCBBMDYCAEF/DwtBoCAgADYCACABC9cBAQh/Qbp/IQoCQCACKAIEIgggAigCACIJaiIOIAEgAGtLDQBBbCEKIAkgBCADKAIAIgtrSw0AIAAgCWoiBCACKAIIIgxrIQ0gACABQWBqIg8gCyAJQQAQKSADIAkgC2o2AgACQAJAIAwgBCAFa00EQCANIQUMAQsgDCAEIAZrSw0CIAcgDSAFayIAaiIBIAhqIAdNBEAgBCABIAgQDxoMAgsgBCABQQAgAGsQDyEBIAIgACAIaiIINgIEIAEgAGshBAsgBCAPIAUgCEEBECkLIA4hCgsgCgubAgEBfyMAQYABayINJAAgDSADNgJ8AkAgAkEDSwRAQX8hCQwBCwJAAkACQAJAIAJBAWsOAwADAgELIAZFBEBBuH8hCQwEC0FsIQkgBS0AACICIANLDQMgACAHIAJBAnQiAmooAgAgAiAIaigCABA7IAEgADYCAEEBIQkMAwsgASAJNgIAQQAhCQwCCyAKRQRAQWwhCQwCC0EAIQkgC0UgDEEZSHINAUEIIAR0QQhqIQBBACECA0AgAiAATw0CIAJBQGshAgwAAAsAC0FsIQkgDSANQfwAaiANQfgAaiAFIAYQFSICEAMNACANKAJ4IgMgBEsNACAAIA0gDSgCfCAHIAggAxAYIAEgADYCACACIQkLIA1BgAFqJAAgCQsLACAAIAEgAhALGgsQACAALwAAIAAtAAJBEHRyCy8AAn9BuH8gAUEISQ0AGkFyIAAoAAQiAEF3Sw0AGkG4fyAAQQhqIgAgACABSxsLCwkAIAAgATsAAAsDAAELigYBBX8gACAAKAIAIgVBfnE2AgBBACAAIAVBAXZqQYQgKAIAIgQgAEYbIQECQAJAIAAoAgQiAkUNACACKAIAIgNBAXENACACQQhqIgUgA0EBdkF4aiIDQQggA0EISxtnQR9zQQJ0QYAfaiIDKAIARgRAIAMgAigCDDYCAAsgAigCCCIDBEAgAyACKAIMNgIECyACKAIMIgMEQCADIAIoAgg2AgALIAIgAigCACAAKAIAQX5xajYCAEGEICEAAkACQCABRQ0AIAEgAjYCBCABKAIAIgNBAXENASADQQF2QXhqIgNBCCADQQhLG2dBH3NBAnRBgB9qIgMoAgAgAUEIakYEQCADIAEoAgw2AgALIAEoAggiAwRAIAMgASgCDDYCBAsgASgCDCIDBEAgAyABKAIINgIAQYQgKAIAIQQLIAIgAigCACABKAIAQX5xajYCACABIARGDQAgASABKAIAQQF2akEEaiEACyAAIAI2AgALIAIoAgBBAXZBeGoiAEEIIABBCEsbZ0Efc0ECdEGAH2oiASgCACEAIAEgBTYCACACIAA2AgwgAkEANgIIIABFDQEgACAFNgIADwsCQCABRQ0AIAEoAgAiAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAigCACABQQhqRgRAIAIgASgCDDYCAAsgASgCCCICBEAgAiABKAIMNgIECyABKAIMIgIEQCACIAEoAgg2AgBBhCAoAgAhBAsgACAAKAIAIAEoAgBBfnFqIgI2AgACQCABIARHBEAgASABKAIAQQF2aiAANgIEIAAoAgAhAgwBC0GEICAANgIACyACQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgIoAgAhASACIABBCGoiAjYCACAAIAE2AgwgAEEANgIIIAFFDQEgASACNgIADwsgBUEBdkF4aiIBQQggAUEISxtnQR9zQQJ0QYAfaiICKAIAIQEgAiAAQQhqIgI2AgAgACABNgIMIABBADYCCCABRQ0AIAEgAjYCAAsLDgAgAARAIABBeGoQJQsLgAIBA38CQCAAQQ9qQXhxQYQgKAIAKAIAQQF2ayICEB1Bf0YNAAJAQYQgKAIAIgAoAgAiAUEBcQ0AIAFBAXZBeGoiAUEIIAFBCEsbZ0Efc0ECdEGAH2oiASgCACAAQQhqRgRAIAEgACgCDDYCAAsgACgCCCIBBEAgASAAKAIMNgIECyAAKAIMIgFFDQAgASAAKAIINgIAC0EBIQEgACAAKAIAIAJBAXRqIgI2AgAgAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAygCACECIAMgAEEIaiIDNgIAIAAgAjYCDCAAQQA2AgggAkUNACACIAM2AgALIAELtwIBA38CQAJAIABBASAAGyICEDgiAA0AAkACQEGEICgCACIARQ0AIAAoAgAiA0EBcQ0AIAAgA0EBcjYCACADQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgAgAEEIakYEQCABIAAoAgw2AgALIAAoAggiAQRAIAEgACgCDDYCBAsgACgCDCIBBEAgASAAKAIINgIACyACECchAkEAIQFBhCAoAgAhACACDQEgACAAKAIAQX5xNgIAQQAPCyACQQ9qQXhxIgMQHSICQX9GDQIgAkEHakF4cSIAIAJHBEAgACACaxAdQX9GDQMLAkBBhCAoAgAiAUUEQEGAICAANgIADAELIAAgATYCBAtBhCAgADYCACAAIANBAXRBAXI2AgAMAQsgAEUNAQsgAEEIaiEBCyABC7kDAQJ/IAAgA2ohBQJAIANBB0wEQANAIAAgBU8NAiAAIAItAAA6AAAgAEEBaiEAIAJBAWohAgwAAAsACyAEQQFGBEACQCAAIAJrIgZBB00EQCAAIAItAAA6AAAgACACLQABOgABIAAgAi0AAjoAAiAAIAItAAM6AAMgAEEEaiACIAZBAnQiBkHAHmooAgBqIgIQFyACIAZB4B5qKAIAayECDAELIAAgAhAMCyACQQhqIQIgAEEIaiEACwJAAkACQAJAIAUgAU0EQCAAIANqIQEgBEEBRyAAIAJrQQ9Kcg0BA0AgACACEAwgAkEIaiECIABBCGoiACABSQ0ACwwFCyAAIAFLBEAgACEBDAQLIARBAUcgACACa0EPSnINASAAIQMgAiEEA0AgAyAEEAwgBEEIaiEEIANBCGoiAyABSQ0ACwwCCwNAIAAgAhAHIAJBEGohAiAAQRBqIgAgAUkNAAsMAwsgACEDIAIhBANAIAMgBBAHIARBEGohBCADQRBqIgMgAUkNAAsLIAIgASAAa2ohAgsDQCABIAVPDQEgASACLQAAOgAAIAFBAWohASACQQFqIQIMAAALAAsLQQECfyAAIAAoArjgASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigCACACaiAAQQZ2IgFBAnRBsB5qKAIAaiAAQSBxIgBFaiABRSAAQQV2cWoFQbh/CwsdACAAKAKQ4gEQWiAAQQA2AqDiASAAQgA3A5DiAQu1AwEFfyMAQZACayIKJABBuH8hBgJAIAVFDQAgBCwAACIIQf8BcSEHAkAgCEF/TARAIAdBgn9qQQF2IgggBU8NAkFsIQYgB0GBf2oiBUGAAk8NAiAEQQFqIQdBACEGA0AgBiAFTwRAIAUhBiAIIQcMAwUgACAGaiAHIAZBAXZqIgQtAABBBHY6AAAgACAGQQFyaiAELQAAQQ9xOgAAIAZBAmohBgwBCwAACwALIAcgBU8NASAAIARBAWogByAKEFMiBhADDQELIAYhBEEAIQYgAUEAQTQQECEJQQAhBQNAIAQgBkcEQCAAIAZqIggtAAAiAUELSwRAQWwhBgwDBSAJIAFBAnRqIgEgASgCAEEBajYCACAGQQFqIQZBASAILQAAdEEBdSAFaiEFDAILAAsLQWwhBiAFRQ0AIAUQFEEBaiIBQQxLDQAgAyABNgIAQQFBASABdCAFayIDEBQiAXQgA0cNACAAIARqIAFBAWoiADoAACAJIABBAnRqIgAgACgCAEEBajYCACAJKAIEIgBBAkkgAEEBcXINACACIARBAWo2AgAgB0EBaiEGCyAKQZACaiQAIAYLxhEBDH8jAEHwAGsiBSQAQWwhCwJAIANBCkkNACACLwAAIQogAi8AAiEJIAIvAAQhByAFQQhqIAQQDgJAIAMgByAJIApqakEGaiIMSQ0AIAUtAAohCCAFQdgAaiACQQZqIgIgChAGIgsQAw0BIAVBQGsgAiAKaiICIAkQBiILEAMNASAFQShqIAIgCWoiAiAHEAYiCxADDQEgBUEQaiACIAdqIAMgDGsQBiILEAMNASAAIAFqIg9BfWohECAEQQRqIQZBASELIAAgAUEDakECdiIDaiIMIANqIgIgA2oiDiEDIAIhBCAMIQcDQCALIAMgEElxBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgCS0AAyELIAcgBiAFQUBrIAgQAkECdGoiCS8BADsAACAFQUBrIAktAAIQASAJLQADIQogBCAGIAVBKGogCBACQQJ0aiIJLwEAOwAAIAVBKGogCS0AAhABIAktAAMhCSADIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgDS0AAyENIAAgC2oiCyAGIAVB2ABqIAgQAkECdGoiAC8BADsAACAFQdgAaiAALQACEAEgAC0AAyEAIAcgCmoiCiAGIAVBQGsgCBACQQJ0aiIHLwEAOwAAIAVBQGsgBy0AAhABIActAAMhByAEIAlqIgkgBiAFQShqIAgQAkECdGoiBC8BADsAACAFQShqIAQtAAIQASAELQADIQQgAyANaiIDIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgACALaiEAIAcgCmohByAEIAlqIQQgAyANLQADaiEDIAVB2ABqEA0gBUFAaxANciAFQShqEA1yIAVBEGoQDXJFIQsMAQsLIAQgDksgByACS3INAEFsIQsgACAMSw0BIAxBfWohCQNAQQAgACAJSSAFQdgAahAEGwRAIAAgBiAFQdgAaiAIEAJBAnRqIgovAQA7AAAgBUHYAGogCi0AAhABIAAgCi0AA2oiACAGIAVB2ABqIAgQAkECdGoiCi8BADsAACAFQdgAaiAKLQACEAEgACAKLQADaiEADAEFIAxBfmohCgNAIAVB2ABqEAQgACAKS3JFBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgACAJLQADaiEADAELCwNAIAAgCk0EQCAAIAYgBUHYAGogCBACQQJ0aiIJLwEAOwAAIAVB2ABqIAktAAIQASAAIAktAANqIQAMAQsLAkAgACAMTw0AIAAgBiAFQdgAaiAIEAIiAEECdGoiDC0AADoAACAMLQADQQFGBEAgBUHYAGogDC0AAhABDAELIAUoAlxBH0sNACAFQdgAaiAGIABBAnRqLQACEAEgBSgCXEEhSQ0AIAVBIDYCXAsgAkF9aiEMA0BBACAHIAxJIAVBQGsQBBsEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiIAIAYgBUFAayAIEAJBAnRqIgcvAQA7AAAgBUFAayAHLQACEAEgACAHLQADaiEHDAEFIAJBfmohDANAIAVBQGsQBCAHIAxLckUEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwNAIAcgDE0EQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwJAIAcgAk8NACAHIAYgBUFAayAIEAIiAEECdGoiAi0AADoAACACLQADQQFGBEAgBUFAayACLQACEAEMAQsgBSgCREEfSw0AIAVBQGsgBiAAQQJ0ai0AAhABIAUoAkRBIUkNACAFQSA2AkQLIA5BfWohAgNAQQAgBCACSSAFQShqEAQbBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2oiACAGIAVBKGogCBACQQJ0aiIELwEAOwAAIAVBKGogBC0AAhABIAAgBC0AA2ohBAwBBSAOQX5qIQIDQCAFQShqEAQgBCACS3JFBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsDQCAEIAJNBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsCQCAEIA5PDQAgBCAGIAVBKGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBKGogAi0AAhABDAELIAUoAixBH0sNACAFQShqIAYgAEECdGotAAIQASAFKAIsQSFJDQAgBUEgNgIsCwNAQQAgAyAQSSAFQRBqEAQbBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2oiACAGIAVBEGogCBACQQJ0aiICLwEAOwAAIAVBEGogAi0AAhABIAAgAi0AA2ohAwwBBSAPQX5qIQIDQCAFQRBqEAQgAyACS3JFBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsDQCADIAJNBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsCQCADIA9PDQAgAyAGIAVBEGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBEGogAi0AAhABDAELIAUoAhRBH0sNACAFQRBqIAYgAEECdGotAAIQASAFKAIUQSFJDQAgBUEgNgIUCyABQWwgBUHYAGoQCiAFQUBrEApxIAVBKGoQCnEgBUEQahAKcRshCwwJCwAACwALAAALAAsAAAsACwAACwALQWwhCwsgBUHwAGokACALC7UEAQ5/IwBBEGsiBiQAIAZBBGogABAOQVQhBQJAIARB3AtJDQAgBi0ABCEHIANB8ARqQQBB7AAQECEIIAdBDEsNACADQdwJaiIJIAggBkEIaiAGQQxqIAEgAhAxIhAQA0UEQCAGKAIMIgQgB0sNASADQdwFaiEPIANBpAVqIREgAEEEaiESIANBqAVqIQEgBCEFA0AgBSICQX9qIQUgCCACQQJ0aigCAEUNAAsgAkEBaiEOQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgASALaiAKNgIAIAVBAWohBSAKIAxqIQoMAQsLIAEgCjYCAEEAIQUgBigCCCELA0AgBSALRkUEQCABIAUgCWotAAAiDEECdGoiDSANKAIAIg1BAWo2AgAgDyANQQF0aiINIAw6AAEgDSAFOgAAIAVBAWohBQwBCwtBACEBIANBADYCqAUgBEF/cyAHaiEJQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgAyALaiABNgIAIAwgBSAJanQgAWohASAFQQFqIQUMAQsLIAcgBEEBaiIBIAJrIgRrQQFqIQgDQEEBIQUgBCAIT0UEQANAIAUgDk9FBEAgBUECdCIJIAMgBEE0bGpqIAMgCWooAgAgBHY2AgAgBUEBaiEFDAELCyAEQQFqIQQMAQsLIBIgByAPIAogESADIAIgARBkIAZBAToABSAGIAc6AAYgACAGKAIENgIACyAQIQULIAZBEGokACAFC8ENAQt/IwBB8ABrIgUkAEFsIQkCQCADQQpJDQAgAi8AACEKIAIvAAIhDCACLwAEIQYgBUEIaiAEEA4CQCADIAYgCiAMampBBmoiDUkNACAFLQAKIQcgBUHYAGogAkEGaiICIAoQBiIJEAMNASAFQUBrIAIgCmoiAiAMEAYiCRADDQEgBUEoaiACIAxqIgIgBhAGIgkQAw0BIAVBEGogAiAGaiADIA1rEAYiCRADDQEgACABaiIOQX1qIQ8gBEEEaiEGQQEhCSAAIAFBA2pBAnYiAmoiCiACaiIMIAJqIg0hAyAMIQQgCiECA0AgCSADIA9JcQRAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAACAGIAVBQGsgBxACQQF0aiIILQAAIQsgBUFAayAILQABEAEgAiALOgAAIAYgBUEoaiAHEAJBAXRqIggtAAAhCyAFQShqIAgtAAEQASAEIAs6AAAgBiAFQRBqIAcQAkEBdGoiCC0AACELIAVBEGogCC0AARABIAMgCzoAACAGIAVB2ABqIAcQAkEBdGoiCC0AACELIAVB2ABqIAgtAAEQASAAIAs6AAEgBiAFQUBrIAcQAkEBdGoiCC0AACELIAVBQGsgCC0AARABIAIgCzoAASAGIAVBKGogBxACQQF0aiIILQAAIQsgBUEoaiAILQABEAEgBCALOgABIAYgBUEQaiAHEAJBAXRqIggtAAAhCyAFQRBqIAgtAAEQASADIAs6AAEgA0ECaiEDIARBAmohBCACQQJqIQIgAEECaiEAIAkgBUHYAGoQDUVxIAVBQGsQDUVxIAVBKGoQDUVxIAVBEGoQDUVxIQkMAQsLIAQgDUsgAiAMS3INAEFsIQkgACAKSw0BIApBfWohCQNAIAVB2ABqEAQgACAJT3JFBEAgBiAFQdgAaiAHEAJBAXRqIggtAAAhCyAFQdgAaiAILQABEAEgACALOgAAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAASAAQQJqIQAMAQsLA0AgBUHYAGoQBCAAIApPckUEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCwNAIAAgCkkEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCyAMQX1qIQADQCAFQUBrEAQgAiAAT3JFBEAgBiAFQUBrIAcQAkEBdGoiCi0AACEJIAVBQGsgCi0AARABIAIgCToAACAGIAVBQGsgBxACQQF0aiIKLQAAIQkgBUFAayAKLQABEAEgAiAJOgABIAJBAmohAgwBCwsDQCAFQUBrEAQgAiAMT3JFBEAgBiAFQUBrIAcQAkEBdGoiAC0AACEKIAVBQGsgAC0AARABIAIgCjoAACACQQFqIQIMAQsLA0AgAiAMSQRAIAYgBUFAayAHEAJBAXRqIgAtAAAhCiAFQUBrIAAtAAEQASACIAo6AAAgAkEBaiECDAELCyANQX1qIQADQCAFQShqEAQgBCAAT3JFBEAgBiAFQShqIAcQAkEBdGoiAi0AACEKIAVBKGogAi0AARABIAQgCjoAACAGIAVBKGogBxACQQF0aiICLQAAIQogBUEoaiACLQABEAEgBCAKOgABIARBAmohBAwBCwsDQCAFQShqEAQgBCANT3JFBEAgBiAFQShqIAcQAkEBdGoiAC0AACECIAVBKGogAC0AARABIAQgAjoAACAEQQFqIQQMAQsLA0AgBCANSQRAIAYgBUEoaiAHEAJBAXRqIgAtAAAhAiAFQShqIAAtAAEQASAEIAI6AAAgBEEBaiEEDAELCwNAIAVBEGoQBCADIA9PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIAYgBUEQaiAHEAJBAXRqIgAtAAAhAiAFQRBqIAAtAAEQASADIAI6AAEgA0ECaiEDDAELCwNAIAVBEGoQBCADIA5PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIANBAWohAwwBCwsDQCADIA5JBEAgBiAFQRBqIAcQAkEBdGoiAC0AACECIAVBEGogAC0AARABIAMgAjoAACADQQFqIQMMAQsLIAFBbCAFQdgAahAKIAVBQGsQCnEgBUEoahAKcSAFQRBqEApxGyEJDAELQWwhCQsgBUHwAGokACAJC8oCAQR/IwBBIGsiBSQAIAUgBBAOIAUtAAIhByAFQQhqIAIgAxAGIgIQA0UEQCAEQQRqIQIgACABaiIDQX1qIQQDQCAFQQhqEAQgACAET3JFBEAgAiAFQQhqIAcQAkEBdGoiBi0AACEIIAVBCGogBi0AARABIAAgCDoAACACIAVBCGogBxACQQF0aiIGLQAAIQggBUEIaiAGLQABEAEgACAIOgABIABBAmohAAwBCwsDQCAFQQhqEAQgACADT3JFBEAgAiAFQQhqIAcQAkEBdGoiBC0AACEGIAVBCGogBC0AARABIAAgBjoAACAAQQFqIQAMAQsLA0AgACADT0UEQCACIAVBCGogBxACQQF0aiIELQAAIQYgBUEIaiAELQABEAEgACAGOgAAIABBAWohAAwBCwsgAUFsIAVBCGoQChshAgsgBUEgaiQAIAILtgMBCX8jAEEQayIGJAAgBkEANgIMIAZBADYCCEFUIQQCQAJAIANBQGsiDCADIAZBCGogBkEMaiABIAIQMSICEAMNACAGQQRqIAAQDiAGKAIMIgcgBi0ABEEBaksNASAAQQRqIQogBkEAOgAFIAYgBzoABiAAIAYoAgQ2AgAgB0EBaiEJQQEhBANAIAQgCUkEQCADIARBAnRqIgEoAgAhACABIAU2AgAgACAEQX9qdCAFaiEFIARBAWohBAwBCwsgB0EBaiEHQQAhBSAGKAIIIQkDQCAFIAlGDQEgAyAFIAxqLQAAIgRBAnRqIgBBASAEdEEBdSILIAAoAgAiAWoiADYCACAHIARrIQhBACEEAkAgC0EDTQRAA0AgBCALRg0CIAogASAEakEBdGoiACAIOgABIAAgBToAACAEQQFqIQQMAAALAAsDQCABIABPDQEgCiABQQF0aiIEIAg6AAEgBCAFOgAAIAQgCDoAAyAEIAU6AAIgBCAIOgAFIAQgBToABCAEIAg6AAcgBCAFOgAGIAFBBGohAQwAAAsACyAFQQFqIQUMAAALAAsgAiEECyAGQRBqJAAgBAutAQECfwJAQYQgKAIAIABHIAAoAgBBAXYiAyABa0F4aiICQXhxQQhHcgR/IAIFIAMQJ0UNASACQQhqC0EQSQ0AIAAgACgCACICQQFxIAAgAWpBD2pBeHEiASAAa0EBdHI2AgAgASAANgIEIAEgASgCAEEBcSAAIAJBAXZqIAFrIgJBAXRyNgIAQYQgIAEgAkH/////B3FqQQRqQYQgKAIAIABGGyABNgIAIAEQJQsLygIBBX8CQAJAAkAgAEEIIABBCEsbZ0EfcyAAaUEBR2oiAUEESSAAIAF2cg0AIAFBAnRB/B5qKAIAIgJFDQADQCACQXhqIgMoAgBBAXZBeGoiBSAATwRAIAIgBUEIIAVBCEsbZ0Efc0ECdEGAH2oiASgCAEYEQCABIAIoAgQ2AgALDAMLIARBHksNASAEQQFqIQQgAigCBCICDQALC0EAIQMgAUEgTw0BA0AgAUECdEGAH2ooAgAiAkUEQCABQR5LIQIgAUEBaiEBIAJFDQEMAwsLIAIgAkF4aiIDKAIAQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgBGBEAgASACKAIENgIACwsgAigCACIBBEAgASACKAIENgIECyACKAIEIgEEQCABIAIoAgA2AgALIAMgAygCAEEBcjYCACADIAAQNwsgAwvhCwINfwV+IwBB8ABrIgckACAHIAAoAvDhASIINgJcIAEgAmohDSAIIAAoAoDiAWohDwJAAkAgBUUEQCABIQQMAQsgACgCxOABIRAgACgCwOABIREgACgCvOABIQ4gAEEBNgKM4QFBACEIA0AgCEEDRwRAIAcgCEECdCICaiAAIAJqQazQAWooAgA2AkQgCEEBaiEIDAELC0FsIQwgB0EYaiADIAQQBhADDQEgB0EsaiAHQRhqIAAoAgAQEyAHQTRqIAdBGGogACgCCBATIAdBPGogB0EYaiAAKAIEEBMgDUFgaiESIAEhBEEAIQwDQCAHKAIwIAcoAixBA3RqKQIAIhRCEIinQf8BcSEIIAcoAkAgBygCPEEDdGopAgAiFUIQiKdB/wFxIQsgBygCOCAHKAI0QQN0aikCACIWQiCIpyEJIBVCIIghFyAUQiCIpyECAkAgFkIQiKdB/wFxIgNBAk8EQAJAIAZFIANBGUlyRQRAIAkgB0EYaiADQSAgBygCHGsiCiAKIANLGyIKEAUgAyAKayIDdGohCSAHQRhqEAQaIANFDQEgB0EYaiADEAUgCWohCQwBCyAHQRhqIAMQBSAJaiEJIAdBGGoQBBoLIAcpAkQhGCAHIAk2AkQgByAYNwNIDAELAkAgA0UEQCACBEAgBygCRCEJDAMLIAcoAkghCQwBCwJAAkAgB0EYakEBEAUgCSACRWpqIgNBA0YEQCAHKAJEQX9qIgMgA0VqIQkMAQsgA0ECdCAHaigCRCIJIAlFaiEJIANBAUYNAQsgByAHKAJINgJMCwsgByAHKAJENgJIIAcgCTYCRAsgF6chAyALBEAgB0EYaiALEAUgA2ohAwsgCCALakEUTwRAIAdBGGoQBBoLIAgEQCAHQRhqIAgQBSACaiECCyAHQRhqEAQaIAcgB0EYaiAUQhiIp0H/AXEQCCAUp0H//wNxajYCLCAHIAdBGGogFUIYiKdB/wFxEAggFadB//8DcWo2AjwgB0EYahAEGiAHIAdBGGogFkIYiKdB/wFxEAggFqdB//8DcWo2AjQgByACNgJgIAcoAlwhCiAHIAk2AmggByADNgJkAkACQAJAIAQgAiADaiILaiASSw0AIAIgCmoiEyAPSw0AIA0gBGsgC0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdBKGogACgCBBATQQAhBCAHQeAAaiEMIAdB5ABqIQoDQCAHQShqEARBAksgBCAXTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEJIAcoAkggBygCREEDdGopAgAiH0IgiKchCCAeQiCIISAgHUIgiKchAgJAIB9CEIinQf8BcSIDQQJPBEACQCAGRSADQRlJckUEQCAIIAdBKGogA0EgIAcoAixrIg0gDSADSxsiDRAFIAMgDWsiA3RqIQggB0EoahAEGiADRQ0BIAdBKGogAxAFIAhqIQgMAQsgB0EoaiADEAUgCGohCCAHQShqEAQaCyAHKQJUISEgByAINgJUIAcgITcDWAwBCwJAIANFBEAgAgRAIAcoAlQhCAwDCyAHKAJYIQgMAQsCQAJAIAdBKGpBARAFIAggAkVqaiIDQQNGBEAgBygCVEF/aiIDIANFaiEIDAELIANBAnQgB2ooAlQiCCAIRWohCCADQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAg2AlQLICCnIQMgCQRAIAdBKGogCRAFIANqIQMLIAkgC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgAmohAgsgB0EoahAEGiAHIAcoAmggAmoiCSADajYCaCAKIAwgCCAJSxsoAgAhDSAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogB0EoaiAfQhiIp0H/AXEQCCEOIAdB8ABqIARBBHRqIgsgCSANaiAIazYCDCALIAg2AgggCyADNgIEIAsgAjYCACAHIA4gH6dB//8DcWo2AkQgBEEBaiEEDAELCyAEIBdIDQEgEkFgaiEYIAdB4ABqIRogB0HkAGohGyABIQMDQCAHQShqEARBAksgBCAFTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEIIAcoAkggBygCREEDdGopAgAiH0IgiKchCSAeQiCIISAgHUIgiKchDAJAIB9CEIinQf8BcSICQQJPBEACQCAGRSACQRlJckUEQCAJIAdBKGogAkEgIAcoAixrIgogCiACSxsiChAFIAIgCmsiAnRqIQkgB0EoahAEGiACRQ0BIAdBKGogAhAFIAlqIQkMAQsgB0EoaiACEAUgCWohCSAHQShqEAQaCyAHKQJUISEgByAJNgJUIAcgITcDWAwBCwJAIAJFBEAgDARAIAcoAlQhCQwDCyAHKAJYIQkMAQsCQAJAIAdBKGpBARAFIAkgDEVqaiICQQNGBEAgBygCVEF/aiICIAJFaiEJDAELIAJBAnQgB2ooAlQiCSAJRWohCSACQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAk2AlQLICCnIRQgCARAIAdBKGogCBAFIBRqIRQLIAggC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgDGohDAsgB0EoahAEGiAHIAcoAmggDGoiGSAUajYCaCAbIBogCSAZSxsoAgAhHCAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogByAHQShqIB9CGIinQf8BcRAIIB+nQf//A3FqNgJEIAcgB0HwAGogBEEDcUEEdGoiDSkDCCIdNwPIASAHIA0pAwAiHjcDwAECQAJAAkAgBygCvAEiDiAepyICaiIWIBNLDQAgAyAHKALEASIKIAJqIgtqIBhLDQAgEiADayALQSBqTw0BCyAHIAcpA8gBNwMQIAcgBykDwAE3AwggAyASIAdBCGogB0G8AWogEyAPIBUgERAeIQsMAQsgAiADaiEIIAMgDhAHIAJBEU8EQCADQRBqIQIDQCACIA5BEGoiDhAHIAJBEGoiAiAISQ0ACwsgCCAdpyIOayECIAcgFjYCvAEgDiAIIA9rSwRAIA4gCCAVa0sEQEFsIQsMAgsgESACIA9rIgJqIhYgCmogEU0EQCAIIBYgChAPGgwCCyAIIBZBACACaxAPIQggByACIApqIgo2AsQBIAggAmshCCAPIQILIA5BEE8EQCAIIApqIQoDQCAIIAIQByACQRBqIQIgCEEQaiIIIApJDQALDAELAkAgDkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgDkECdCIKQcAeaigCAGoiAhAXIAIgCkHgHmooAgBrIQIgBygCxAEhCgwBCyAIIAIQDAsgCkEJSQ0AIAggCmohCiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAKSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAKSQ0ACwsgCxADBEAgCyEQDAQFIA0gDDYCACANIBkgHGogCWs2AgwgDSAJNgIIIA0gFDYCBCAEQQFqIQQgAyALaiEDDAILAAsLIAQgBUgNASAEIBdrIQtBACEEA0AgCyAFSARAIAcgB0HwAGogC0EDcUEEdGoiAikDCCIdNwPIASAHIAIpAwAiHjcDwAECQAJAAkAgBygCvAEiDCAepyICaiIKIBNLDQAgAyAHKALEASIJIAJqIhBqIBhLDQAgEiADayAQQSBqTw0BCyAHIAcpA8gBNwMgIAcgBykDwAE3AxggAyASIAdBGGogB0G8AWogEyAPIBUgERAeIRAMAQsgAiADaiEIIAMgDBAHIAJBEU8EQCADQRBqIQIDQCACIAxBEGoiDBAHIAJBEGoiAiAISQ0ACwsgCCAdpyIGayECIAcgCjYCvAEgBiAIIA9rSwRAIAYgCCAVa0sEQEFsIRAMAgsgESACIA9rIgJqIgwgCWogEU0EQCAIIAwgCRAPGgwCCyAIIAxBACACaxAPIQggByACIAlqIgk2AsQBIAggAmshCCAPIQILIAZBEE8EQCAIIAlqIQYDQCAIIAIQByACQRBqIQIgCEEQaiIIIAZJDQALDAELAkAgBkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgBkECdCIGQcAeaigCAGoiAhAXIAIgBkHgHmooAgBrIQIgBygCxAEhCQwBCyAIIAIQDAsgCUEJSQ0AIAggCWohBiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAGSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAGSQ0ACwsgEBADDQMgC0EBaiELIAMgEGohAwwBCwsDQCAEQQNHBEAgACAEQQJ0IgJqQazQAWogAiAHaigCVDYCACAEQQFqIQQMAQsLIAcoArwBIQgLQbp/IRAgEyAIayIAIBIgA2tLDQAgAwR/IAMgCCAAEAsgAGoFQQALIAFrIRALIAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY0AAQMyIFEAMiBg0AIANBHzYCfCADIANB/ABqIANB+ABqIAQgBCAFaiAGGyIEIAEgAmoiAiAEaxAVIgUQAw0AIAMoAnwiBkEfSw0AIAMoAngiB0EJTw0AIABBiCBqIAMgBkGAC0GADCAHEBggA0E0NgJ8IAMgA0H8AGogA0H4AGogBCAFaiIEIAIgBGsQFSIFEAMNACADKAJ8IgZBNEsNACADKAJ4IgdBCk8NACAAQZAwaiADIAZBgA1B4A4gBxAYIANBIzYCfCADIANB/ABqIANB+ABqIAQgBWoiBCACIARrEBUiBRADDQAgAygCfCIGQSNLDQAgAygCeCIHQQpPDQAgACADIAZBwBBB0BEgBxAYIAQgBWoiBEEMaiIFIAJLDQAgAiAFayEFQQAhAgNAIAJBA0cEQCAEKAAAIgZBf2ogBU8NAiAAIAJBAnRqQZzQAWogBjYCACACQQFqIQIgBEEEaiEEDAELCyAEIAFrIQgLIANBgAFqJAAgCAtGAQN/IABBCGohAyAAKAIEIQJBACEAA0AgACACdkUEQCABIAMgAEEDdGotAAJBFktqIQEgAEEBaiEADAELCyABQQggAmt0C4YDAQV/Qbh/IQcCQCADRQ0AIAItAAAiBEUEQCABQQA2AgBBAUG4fyADQQFGGw8LAn8gAkEBaiIFIARBGHRBGHUiBkF/Sg0AGiAGQX9GBEAgA0EDSA0CIAUvAABBgP4BaiEEIAJBA2oMAQsgA0ECSA0BIAItAAEgBEEIdHJBgIB+aiEEIAJBAmoLIQUgASAENgIAIAVBAWoiASACIANqIgNLDQBBbCEHIABBEGogACAFLQAAIgVBBnZBI0EJIAEgAyABa0HAEEHQEUHwEiAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBmCBqIABBCGogBUEEdkEDcUEfQQggASABIAZqIAgbIgEgAyABa0GAC0GADEGAFyAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBoDBqIABBBGogBUECdkEDcUE0QQkgASABIAZqIAgbIgEgAyABa0GADUHgDkGQGSAAKAKM4QEgACgCnOIBIAQQHyIAEAMNACAAIAFqIAJrIQcLIAcLrQMBCn8jAEGABGsiCCQAAn9BUiACQf8BSw0AGkFUIANBDEsNABogAkEBaiELIABBBGohCUGAgAQgA0F/anRBEHUhCkEAIQJBASEEQQEgA3QiB0F/aiIMIQUDQCACIAtGRQRAAkAgASACQQF0Ig1qLwEAIgZB//8DRgRAIAkgBUECdGogAjoAAiAFQX9qIQVBASEGDAELIARBACAKIAZBEHRBEHVKGyEECyAIIA1qIAY7AQAgAkEBaiECDAELCyAAIAQ7AQIgACADOwEAIAdBA3YgB0EBdmpBA2ohBkEAIQRBACECA0AgBCALRkUEQCABIARBAXRqLgEAIQpBACEAA0AgACAKTkUEQCAJIAJBAnRqIAQ6AAIDQCACIAZqIAxxIgIgBUsNAAsgAEEBaiEADAELCyAEQQFqIQQMAQsLQX8gAg0AGkEAIQIDfyACIAdGBH9BAAUgCCAJIAJBAnRqIgAtAAJBAXRqIgEgAS8BACIBQQFqOwEAIAAgAyABEBRrIgU6AAMgACABIAVB/wFxdCAHazsBACACQQFqIQIMAQsLCyEFIAhBgARqJAAgBQvjBgEIf0FsIQcCQCACQQNJDQACQAJAAkACQCABLQAAIgNBA3EiCUEBaw4DAwEAAgsgACgCiOEBDQBBYg8LIAJBBUkNAkEDIQYgASgAACEFAn8CQAJAIANBAnZBA3EiCEF+aiIEQQFNBEAgBEEBaw0BDAILIAVBDnZB/wdxIQQgBUEEdkH/B3EhAyAIRQwCCyAFQRJ2IQRBBCEGIAVBBHZB//8AcSEDQQAMAQsgBUEEdkH//w9xIgNBgIAISw0DIAEtAARBCnQgBUEWdnIhBEEFIQZBAAshBSAEIAZqIgogAksNAgJAIANBgQZJDQAgACgCnOIBRQ0AQQAhAgNAIAJBg4ABSw0BIAJBQGshAgwAAAsACwJ/IAlBA0YEQCABIAZqIQEgAEHw4gFqIQIgACgCDCEGIAUEQCACIAMgASAEIAYQXwwCCyACIAMgASAEIAYQXQwBCyAAQbjQAWohAiABIAZqIQEgAEHw4gFqIQYgAEGo0ABqIQggBQRAIAggBiADIAEgBCACEF4MAQsgCCAGIAMgASAEIAIQXAsQAw0CIAAgAzYCgOIBIABBATYCiOEBIAAgAEHw4gFqNgLw4QEgCUECRgRAIAAgAEGo0ABqNgIMCyAAIANqIgBBiOMBakIANwAAIABBgOMBakIANwAAIABB+OIBakIANwAAIABB8OIBakIANwAAIAoPCwJ/AkACQAJAIANBAnZBA3FBf2oiBEECSw0AIARBAWsOAgACAQtBASEEIANBA3YMAgtBAiEEIAEvAABBBHYMAQtBAyEEIAEQIUEEdgsiAyAEaiIFQSBqIAJLBEAgBSACSw0CIABB8OIBaiABIARqIAMQCyEBIAAgAzYCgOIBIAAgATYC8OEBIAEgA2oiAEIANwAYIABCADcAECAAQgA3AAggAEIANwAAIAUPCyAAIAM2AoDiASAAIAEgBGo2AvDhASAFDwsCfwJAAkACQCADQQJ2QQNxQX9qIgRBAksNACAEQQFrDgIAAgELQQEhByADQQN2DAILQQIhByABLwAAQQR2DAELIAJBBEkgARAhIgJBj4CAAUtyDQFBAyEHIAJBBHYLIQIgAEHw4gFqIAEgB2otAAAgAkEgahAQIQEgACACNgKA4gEgACABNgLw4QEgB0EBaiEHCyAHC0sAIABC+erQ0OfJoeThADcDICAAQgA3AxggAELP1tO+0ser2UI3AxAgAELW64Lu6v2J9eAANwMIIABCADcDACAAQShqQQBBKBAQGgviAgICfwV+IABBKGoiASAAKAJIaiECAn4gACkDACIDQiBaBEAgACkDECIEQgeJIAApAwgiBUIBiXwgACkDGCIGQgyJfCAAKQMgIgdCEol8IAUQGSAEEBkgBhAZIAcQGQwBCyAAKQMYQsXP2bLx5brqJ3wLIAN8IQMDQCABQQhqIgAgAk0EQEIAIAEpAAAQCSADhUIbiUKHla+vmLbem55/fkLj3MqV/M7y9YV/fCEDIAAhAQwBCwsCQCABQQRqIgAgAksEQCABIQAMAQsgASgAAK1Ch5Wvr5i23puef34gA4VCF4lCz9bTvtLHq9lCfkL5893xmfaZqxZ8IQMLA0AgACACSQRAIAAxAABCxc/ZsvHluuonfiADhUILiUKHla+vmLbem55/fiEDIABBAWohAAwBCwsgA0IhiCADhULP1tO+0ser2UJ+IgNCHYggA4VC+fPd8Zn2masWfiIDQiCIIAOFC+8CAgJ/BH4gACAAKQMAIAKtfDcDAAJAAkAgACgCSCIDIAJqIgRBH00EQCABRQ0BIAAgA2pBKGogASACECAgACgCSCACaiEEDAELIAEgAmohAgJ/IAMEQCAAQShqIgQgA2ogAUEgIANrECAgACAAKQMIIAQpAAAQCTcDCCAAIAApAxAgACkAMBAJNwMQIAAgACkDGCAAKQA4EAk3AxggACAAKQMgIABBQGspAAAQCTcDICAAKAJIIQMgAEEANgJIIAEgA2tBIGohAQsgAUEgaiACTQsEQCACQWBqIQMgACkDICEFIAApAxghBiAAKQMQIQcgACkDCCEIA0AgCCABKQAAEAkhCCAHIAEpAAgQCSEHIAYgASkAEBAJIQYgBSABKQAYEAkhBSABQSBqIgEgA00NAAsgACAFNwMgIAAgBjcDGCAAIAc3AxAgACAINwMICyABIAJPDQEgAEEoaiABIAIgAWsiBBAgCyAAIAQ2AkgLCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQEBogAwVBun8LCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQCxogAwVBun8LC6gCAQZ/IwBBEGsiByQAIABB2OABaikDAEKAgIAQViEIQbh/IQUCQCAEQf//B0sNACAAIAMgBBBCIgUQAyIGDQAgACgCnOIBIQkgACAHQQxqIAMgAyAFaiAGGyIKIARBACAFIAYbayIGEEAiAxADBEAgAyEFDAELIAcoAgwhBCABRQRAQbp/IQUgBEEASg0BCyAGIANrIQUgAyAKaiEDAkAgCQRAIABBADYCnOIBDAELAkACQAJAIARBBUgNACAAQdjgAWopAwBCgICACFgNAAwBCyAAQQA2ApziAQwBCyAAKAIIED8hBiAAQQA2ApziASAGQRRPDQELIAAgASACIAMgBSAEIAgQOSEFDAELIAAgASACIAMgBSAEIAgQOiEFCyAHQRBqJAAgBQtnACAAQdDgAWogASACIAAoAuzhARAuIgEQAwRAIAEPC0G4fyECAkAgAQ0AIABB7OABaigCACIBBEBBYCECIAAoApjiASABRw0BC0EAIQIgAEHw4AFqKAIARQ0AIABBkOEBahBDCyACCycBAX8QVyIERQRAQUAPCyAEIAAgASACIAMgBBBLEE8hACAEEFYgAAs/AQF/AkACQAJAIAAoAqDiAUEBaiIBQQJLDQAgAUEBaw4CAAECCyAAEDBBAA8LIABBADYCoOIBCyAAKAKU4gELvAMCB38BfiMAQRBrIgkkAEG4fyEGAkAgBCgCACIIQQVBCSAAKALs4QEiBRtJDQAgAygCACIHQQFBBSAFGyAFEC8iBRADBEAgBSEGDAELIAggBUEDakkNACAAIAcgBRBJIgYQAw0AIAEgAmohCiAAQZDhAWohCyAIIAVrIQIgBSAHaiEHIAEhBQNAIAcgAiAJECwiBhADDQEgAkF9aiICIAZJBEBBuH8hBgwCCyAJKAIAIghBAksEQEFsIQYMAgsgB0EDaiEHAn8CQAJAAkAgCEEBaw4CAgABCyAAIAUgCiAFayAHIAYQSAwCCyAFIAogBWsgByAGEEcMAQsgBSAKIAVrIActAAAgCSgCCBBGCyIIEAMEQCAIIQYMAgsgACgC8OABBEAgCyAFIAgQRQsgAiAGayECIAYgB2ohByAFIAhqIQUgCSgCBEUNAAsgACkD0OABIgxCf1IEQEFsIQYgDCAFIAFrrFINAQsgACgC8OABBEBBaiEGIAJBBEkNASALEEQhDCAHKAAAIAynRw0BIAdBBGohByACQXxqIQILIAMgBzYCACAEIAI2AgAgBSABayEGCyAJQRBqJAAgBgsuACAAECsCf0EAQQAQAw0AGiABRSACRXJFBEBBYiAAIAEgAhA9EAMNARoLQQALCzcAIAEEQCAAIAAoAsTgASABKAIEIAEoAghqRzYCnOIBCyAAECtBABADIAFFckUEQCAAIAEQWwsL0QIBB38jAEEQayIGJAAgBiAENgIIIAYgAzYCDCAFBEAgBSgCBCEKIAUoAgghCQsgASEIAkACQANAIAAoAuzhARAWIQsCQANAIAQgC0kNASADKAAAQXBxQdDUtMIBRgRAIAMgBBAiIgcQAw0EIAQgB2shBCADIAdqIQMMAQsLIAYgAzYCDCAGIAQ2AggCQCAFBEAgACAFEE5BACEHQQAQA0UNAQwFCyAAIAogCRBNIgcQAw0ECyAAIAgQUCAMQQFHQQAgACAIIAIgBkEMaiAGQQhqEEwiByIDa0EAIAMQAxtBCkdyRQRAQbh/IQcMBAsgBxADDQMgAiAHayECIAcgCGohCEEBIQwgBigCDCEDIAYoAgghBAwBCwsgBiADNgIMIAYgBDYCCEG4fyEHIAQNASAIIAFrIQcMAQsgBiADNgIMIAYgBDYCCAsgBkEQaiQAIAcLRgECfyABIAAoArjgASICRwRAIAAgAjYCxOABIAAgATYCuOABIAAoArzgASEDIAAgATYCvOABIAAgASADIAJrajYCwOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEEdCAAbiECCyAAQQh2IgEgAkEYbCIAQYwIaigCAGwgAEGICGooAgBqIgJBA3YgAmogAEGACGooAgAgAEGECGooAgAgAWxqSQs3ACAAIAMgBCAFQYAQEDMiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQMgVBuH8LC78DAQN/IwBBIGsiBSQAIAVBCGogAiADEAYiAhADRQRAIAAgAWoiB0F9aiEGIAUgBBAOIARBBGohAiAFLQACIQMDQEEAIAAgBkkgBUEIahAEGwRAIAAgAiAFQQhqIAMQAkECdGoiBC8BADsAACAFQQhqIAQtAAIQASAAIAQtAANqIgQgAiAFQQhqIAMQAkECdGoiAC8BADsAACAFQQhqIAAtAAIQASAEIAAtAANqIQAMAQUgB0F+aiEEA0AgBUEIahAEIAAgBEtyRQRAIAAgAiAFQQhqIAMQAkECdGoiBi8BADsAACAFQQhqIAYtAAIQASAAIAYtAANqIQAMAQsLA0AgACAES0UEQCAAIAIgBUEIaiADEAJBAnRqIgYvAQA7AAAgBUEIaiAGLQACEAEgACAGLQADaiEADAELCwJAIAAgB08NACAAIAIgBUEIaiADEAIiA0ECdGoiAC0AADoAACAALQADQQFGBEAgBUEIaiAALQACEAEMAQsgBSgCDEEfSw0AIAVBCGogAiADQQJ0ai0AAhABIAUoAgxBIUkNACAFQSA2AgwLIAFBbCAFQQhqEAobIQILCwsgBUEgaiQAIAILkgIBBH8jAEFAaiIJJAAgCSADQTQQCyEDAkAgBEECSA0AIAMgBEECdGooAgAhCSADQTxqIAgQIyADQQE6AD8gAyACOgA+QQAhBCADKAI8IQoDQCAEIAlGDQEgACAEQQJ0aiAKNgEAIARBAWohBAwAAAsAC0EAIQkDQCAGIAlGRQRAIAMgBSAJQQF0aiIKLQABIgtBAnRqIgwoAgAhBCADQTxqIAotAABBCHQgCGpB//8DcRAjIANBAjoAPyADIAcgC2siCiACajoAPiAEQQEgASAKa3RqIQogAygCPCELA0AgACAEQQJ0aiALNgEAIARBAWoiBCAKSQ0ACyAMIAo2AgAgCUEBaiEJDAELCyADQUBrJAALowIBCX8jAEHQAGsiCSQAIAlBEGogBUE0EAsaIAcgBmshDyAHIAFrIRADQAJAIAMgCkcEQEEBIAEgByACIApBAXRqIgYtAAEiDGsiCGsiC3QhDSAGLQAAIQ4gCUEQaiAMQQJ0aiIMKAIAIQYgCyAPTwRAIAAgBkECdGogCyAIIAUgCEE0bGogCCAQaiIIQQEgCEEBShsiCCACIAQgCEECdGooAgAiCEEBdGogAyAIayAHIA4QYyAGIA1qIQgMAgsgCUEMaiAOECMgCUEBOgAPIAkgCDoADiAGIA1qIQggCSgCDCELA0AgBiAITw0CIAAgBkECdGogCzYBACAGQQFqIQYMAAALAAsgCUHQAGokAA8LIAwgCDYCACAKQQFqIQoMAAALAAs0ACAAIAMgBCAFEDYiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQNAVBuH8LCyMAIAA/AEEQdGtB//8DakEQdkAAQX9GBEBBAA8LQQAQAEEBCzsBAX8gAgRAA0AgACABIAJBgCAgAkGAIEkbIgMQCyEAIAFBgCBqIQEgAEGAIGohACACIANrIgINAAsLCwYAIAAQAwsLqBUJAEGICAsNAQAAAAEAAAACAAAAAgBBoAgLswYBAAAAAQAAAAIAAAACAAAAJgAAAIIAAAAhBQAASgAAAGcIAAAmAAAAwAEAAIAAAABJBQAASgAAAL4IAAApAAAALAIAAIAAAABJBQAASgAAAL4IAAAvAAAAygIAAIAAAACKBQAASgAAAIQJAAA1AAAAcwMAAIAAAACdBQAASgAAAKAJAAA9AAAAgQMAAIAAAADrBQAASwAAAD4KAABEAAAAngMAAIAAAABNBgAASwAAAKoKAABLAAAAswMAAIAAAADBBgAATQAAAB8NAABNAAAAUwQAAIAAAAAjCAAAUQAAAKYPAABUAAAAmQQAAIAAAABLCQAAVwAAALESAABYAAAA2gQAAIAAAABvCQAAXQAAACMUAABUAAAARQUAAIAAAABUCgAAagAAAIwUAABqAAAArwUAAIAAAAB2CQAAfAAAAE4QAAB8AAAA0gIAAIAAAABjBwAAkQAAAJAHAACSAAAAAAAAAAEAAAABAAAABQAAAA0AAAAdAAAAPQAAAH0AAAD9AAAA/QEAAP0DAAD9BwAA/Q8AAP0fAAD9PwAA/X8AAP3/AAD9/wEA/f8DAP3/BwD9/w8A/f8fAP3/PwD9/38A/f//AP3//wH9//8D/f//B/3//w/9//8f/f//P/3//38AAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAABQAAAAVAAAAFgAAABcAAAAYAAAAGQAAABoAAAAbAAAAHAAAAB0AAAAeAAAAHwAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAANAAAADgAAAA8AAAAQAAAAEQAAABIAAAATAAAAFAAAABUAAAAWAAAAFwAAABgAAAAZAAAAGgAAABsAAAAcAAAAHQAAAB4AAAAfAAAAIAAAACEAAAAiAAAAIwAAACUAAAAnAAAAKQAAACsAAAAvAAAAMwAAADsAAABDAAAAUwAAAGMAAACDAAAAAwEAAAMCAAADBAAAAwgAAAMQAAADIAAAA0AAAAOAAAADAAEAQeAPC1EBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAA0AAAAOAAAADwAAABAAQcQQC4sBAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABIAAAAUAAAAFgAAABgAAAAcAAAAIAAAACgAAAAwAAAAQAAAAIAAAAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAAAAQBBkBIL5gQBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAAAEAAAAEAAAACAAAAAAAAAABAAEBBgAAAAAAAAQAAAAAEAAABAAAAAAgAAAFAQAAAAAAAAUDAAAAAAAABQQAAAAAAAAFBgAAAAAAAAUHAAAAAAAABQkAAAAAAAAFCgAAAAAAAAUMAAAAAAAABg4AAAAAAAEFEAAAAAAAAQUUAAAAAAABBRYAAAAAAAIFHAAAAAAAAwUgAAAAAAAEBTAAAAAgAAYFQAAAAAAABwWAAAAAAAAIBgABAAAAAAoGAAQAAAAADAYAEAAAIAAABAAAAAAAAAAEAQAAAAAAAAUCAAAAIAAABQQAAAAAAAAFBQAAACAAAAUHAAAAAAAABQgAAAAgAAAFCgAAAAAAAAULAAAAAAAABg0AAAAgAAEFEAAAAAAAAQUSAAAAIAABBRYAAAAAAAIFGAAAACAAAwUgAAAAAAADBSgAAAAAAAYEQAAAABAABgRAAAAAIAAHBYAAAAAAAAkGAAIAAAAACwYACAAAMAAABAAAAAAQAAAEAQAAACAAAAUCAAAAIAAABQMAAAAgAAAFBQAAACAAAAUGAAAAIAAABQgAAAAgAAAFCQAAACAAAAULAAAAIAAABQwAAAAAAAAGDwAAACAAAQUSAAAAIAABBRQAAAAgAAIFGAAAACAAAgUcAAAAIAADBSgAAAAgAAQFMAAAAAAAEAYAAAEAAAAPBgCAAAAAAA4GAEAAAAAADQYAIABBgBcLhwIBAAEBBQAAAAAAAAUAAAAAAAAGBD0AAAAAAAkF/QEAAAAADwX9fwAAAAAVBf3/HwAAAAMFBQAAAAAABwR9AAAAAAAMBf0PAAAAABIF/f8DAAAAFwX9/38AAAAFBR0AAAAAAAgE/QAAAAAADgX9PwAAAAAUBf3/DwAAAAIFAQAAABAABwR9AAAAAAALBf0HAAAAABEF/f8BAAAAFgX9/z8AAAAEBQ0AAAAQAAgE/QAAAAAADQX9HwAAAAATBf3/BwAAAAEFAQAAABAABgQ9AAAAAAAKBf0DAAAAABAF/f8AAAAAHAX9//8PAAAbBf3//wcAABoF/f//AwAAGQX9//8BAAAYBf3//wBBkBkLhgQBAAEBBgAAAAAAAAYDAAAAAAAABAQAAAAgAAAFBQAAAAAAAAUGAAAAAAAABQgAAAAAAAAFCQAAAAAAAAULAAAAAAAABg0AAAAAAAAGEAAAAAAAAAYTAAAAAAAABhYAAAAAAAAGGQAAAAAAAAYcAAAAAAAABh8AAAAAAAAGIgAAAAAAAQYlAAAAAAABBikAAAAAAAIGLwAAAAAAAwY7AAAAAAAEBlMAAAAAAAcGgwAAAAAACQYDAgAAEAAABAQAAAAAAAAEBQAAACAAAAUGAAAAAAAABQcAAAAgAAAFCQAAAAAAAAUKAAAAAAAABgwAAAAAAAAGDwAAAAAAAAYSAAAAAAAABhUAAAAAAAAGGAAAAAAAAAYbAAAAAAAABh4AAAAAAAAGIQAAAAAAAQYjAAAAAAABBicAAAAAAAIGKwAAAAAAAwYzAAAAAAAEBkMAAAAAAAUGYwAAAAAACAYDAQAAIAAABAQAAAAwAAAEBAAAABAAAAQFAAAAIAAABQcAAAAgAAAFCAAAACAAAAUKAAAAIAAABQsAAAAAAAAGDgAAAAAAAAYRAAAAAAAABhQAAAAAAAAGFwAAAAAAAAYaAAAAAAAABh0AAAAAAAAGIAAAAAAAEAYDAAEAAAAPBgOAAAAAAA4GA0AAAAAADQYDIAAAAAAMBgMQAAAAAAsGAwgAAAAACgYDBABBpB0L2QEBAAAAAwAAAAcAAAAPAAAAHwAAAD8AAAB/AAAA/wAAAP8BAAD/AwAA/wcAAP8PAAD/HwAA/z8AAP9/AAD//wAA//8BAP//AwD//wcA//8PAP//HwD//z8A//9/AP///wD///8B////A////wf///8P////H////z////9/AAAAAAEAAAACAAAABAAAAAAAAAACAAAABAAAAAgAAAAAAAAAAQAAAAIAAAABAAAABAAAAAQAAAAEAAAABAAAAAgAAAAIAAAACAAAAAcAAAAIAAAACQAAAAoAAAALAEGgIAsDwBBQ"},"./node_modules/super-three/examples/jsm/lights/LightProbeGenerator.js":(l,d,c)=>{c.r(d),c.d(d,{LightProbeGenerator:()=>m});var h=c("./node_modules/super-three/build/three.module.js");class m{static fromCubeTexture(v){let y=0;const x=new h.Vector3,C=new h.Vector3,g=new h.Color,b=[0,0,0,0,0,0,0,0,0],_=new h.SphericalHarmonics3,S=_.coefficients;for(let P=0;P<6;P++){const O=v.image[P],D=O.width,L=O.height,N=document.createElement("canvas");N.width=D,N.height=L;const H=N.getContext("2d");H.drawImage(O,0,0,D,L);const J=H.getImageData(0,0,D,L),K=J.data,se=J.width,ae=2/se;for(let ee=0,ne=K.length;ee<ne;ee+=4){g.setRGB(K[ee]/255,K[ee+1]/255,K[ee+2]/255),p(g,v.encoding);const X=ee/4,W=-1+(X%se+.5)*ae,ce=1-(Math.floor(X/se)+.5)*ae;switch(P){case 0:x.set(-1,ce,-W);break;case 1:x.set(1,ce,W);break;case 2:x.set(-W,1,-ce);break;case 3:x.set(-W,-1,ce);break;case 4:x.set(-W,ce,1);break;case 5:x.set(W,ce,-1);break}const he=x.lengthSq(),xe=4/(Math.sqrt(he)*he);y+=xe,C.copy(x).normalize(),h.SphericalHarmonics3.getBasisAt(C,b);for(let ve=0;ve<9;ve++)S[ve].x+=b[ve]*g.r*xe,S[ve].y+=b[ve]*g.g*xe,S[ve].z+=b[ve]*g.b*xe}}const R=4*Math.PI/y;for(let P=0;P<9;P++)S[P].x*=R,S[P].y*=R,S[P].z*=R;return new h.LightProbe(_)}static fromCubeRenderTarget(v,y){let x=0;const C=new h.Vector3,g=new h.Vector3,b=new h.Color,_=[0,0,0,0,0,0,0,0,0],S=new h.SphericalHarmonics3,R=S.coefficients;for(let O=0;O<6;O++){const D=y.width,L=new Uint8Array(D*D*4);v.readRenderTargetPixels(y,0,0,D,D,L,O);const N=2/D;for(let H=0,J=L.length;H<J;H+=4){b.setRGB(L[H]/255,L[H+1]/255,L[H+2]/255),p(b,y.texture.encoding);const K=H/4,se=-1+(K%D+.5)*N,ae=1-(Math.floor(K/D)+.5)*N;switch(O){case 0:C.set(1,ae,-se);break;case 1:C.set(-1,ae,se);break;case 2:C.set(se,1,-ae);break;case 3:C.set(se,-1,ae);break;case 4:C.set(se,ae,1);break;case 5:C.set(-se,ae,-1);break}const ee=C.lengthSq(),ne=4/(Math.sqrt(ee)*ee);x+=ne,g.copy(C).normalize(),h.SphericalHarmonics3.getBasisAt(g,_);for(let X=0;X<9;X++)R[X].x+=_[X]*b.r*ne,R[X].y+=_[X]*b.g*ne,R[X].z+=_[X]*b.b*ne}}const P=4*Math.PI/x;for(let O=0;O<9;O++)R[O].x*=P,R[O].y*=P,R[O].z*=P;return new h.LightProbe(S)}}function p(A,v){switch(v){case h.sRGBEncoding:A.convertSRGBToLinear();break;case h.LinearEncoding:break;default:console.warn("WARNING: LightProbeGenerator convertColorToLinear() encountered an unsupported encoding.");break}return A}},"./node_modules/super-three/examples/jsm/loaders/DRACOLoader.js":(l,d,c)=>{c.r(d),c.d(d,{DRACOLoader:()=>p});var h=c("./node_modules/super-three/build/three.module.js");const m=new WeakMap;class p extends h.Loader{constructor(y){super(y),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(y){return this.decoderPath=y,this}setDecoderConfig(y){return this.decoderConfig=y,this}setWorkerLimit(y){return this.workerLimit=y,this}load(y,x,C,g){const b=new h.FileLoader(this.manager);b.setPath(this.path),b.setResponseType("arraybuffer"),b.setRequestHeader(this.requestHeader),b.setWithCredentials(this.withCredentials),b.load(y,_=>{this.decodeDracoFile(_,x).catch(g)},C,g)}decodeDracoFile(y,x,C,g){const b={attributeIDs:C||this.defaultAttributeIDs,attributeTypes:g||this.defaultAttributeTypes,useUniqueIDs:!!C};return this.decodeGeometry(y,b).then(x)}decodeGeometry(y,x){const C=JSON.stringify(x);if(m.has(y)){const R=m.get(y);if(R.key===C)return R.promise;if(y.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let g;const b=this.workerNextTaskID++,_=y.byteLength,S=this._getWorker(b,_).then(R=>(g=R,new Promise((P,O)=>{g._callbacks[b]={resolve:P,reject:O},g.postMessage({type:"decode",id:b,taskConfig:x,buffer:y},[y])}))).then(R=>this._createGeometry(R.geometry));return S.catch(()=>!0).then(()=>{g&&b&&this._releaseTask(g,b)}),m.set(y,{key:C,promise:S}),S}_createGeometry(y){const x=new h.BufferGeometry;y.index&&x.setIndex(new h.BufferAttribute(y.index.array,1));for(let C=0;C<y.attributes.length;C++){const g=y.attributes[C],b=g.name,_=g.array,S=g.itemSize;x.setAttribute(b,new h.BufferAttribute(_,S))}return x}_loadLibrary(y,x){const C=new h.FileLoader(this.manager);return C.setPath(this.decoderPath),C.setResponseType(x),C.setWithCredentials(this.withCredentials),new Promise((g,b)=>{C.load(y,g,void 0,b)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const y=typeof WebAssembly!="object"||this.decoderConfig.type==="js",x=[];return y?x.push(this._loadLibrary("draco_decoder.js","text")):(x.push(this._loadLibrary("draco_wasm_wrapper.js","text")),x.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(x).then(C=>{const g=C[0];y||(this.decoderConfig.wasmBinary=C[1]);const b=A.toString(),_=["/* draco decoder */",g,"","/* worker */",b.substring(b.indexOf("{")+1,b.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([_]))}),this.decoderPending}_getWorker(y,x){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const g=new Worker(this.workerSourceURL);g._callbacks={},g._taskCosts={},g._taskLoad=0,g.postMessage({type:"init",decoderConfig:this.decoderConfig}),g.onmessage=function(b){const _=b.data;switch(_.type){case"decode":g._callbacks[_.id].resolve(_);break;case"error":g._callbacks[_.id].reject(_);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+_.type+'"')}},this.workerPool.push(g)}else this.workerPool.sort(function(g,b){return g._taskLoad>b._taskLoad?-1:1});const C=this.workerPool[this.workerPool.length-1];return C._taskCosts[y]=x,C._taskLoad+=x,C})}_releaseTask(y,x){y._taskLoad-=y._taskCosts[x],delete y._callbacks[x],delete y._taskCosts[x]}debug(){console.log("Task load: ",this.workerPool.map(y=>y._taskLoad))}dispose(){for(let y=0;y<this.workerPool.length;++y)this.workerPool[y].terminate();return this.workerPool.length=0,this}}function A(){let v,y;onmessage=function(_){const S=_.data;switch(S.type){case"init":v=S.decoderConfig,y=new Promise(function(O){v.onModuleLoaded=function(D){O({draco:D})},DracoDecoderModule(v)});break;case"decode":const R=S.buffer,P=S.taskConfig;y.then(O=>{const D=O.draco,L=new D.Decoder,N=new D.DecoderBuffer;N.Init(new Int8Array(R),R.byteLength);try{const H=x(D,L,N,P),J=H.attributes.map(K=>K.array.buffer);H.index&&J.push(H.index.array.buffer),self.postMessage({type:"decode",id:S.id,geometry:H},J)}catch(H){console.error(H),self.postMessage({type:"error",id:S.id,error:H.message})}finally{D.destroy(N),D.destroy(L)}});break}};function x(_,S,R,P){const O=P.attributeIDs,D=P.attributeTypes;let L,N;const H=S.GetEncodedGeometryType(R);if(H===_.TRIANGULAR_MESH)L=new _.Mesh,N=S.DecodeBufferToMesh(R,L);else if(H===_.POINT_CLOUD)L=new _.PointCloud,N=S.DecodeBufferToPointCloud(R,L);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!N.ok()||L.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+N.error_msg());const J={index:null,attributes:[]};for(const K in O){const se=self[D[K]];let ae,ee;if(P.useUniqueIDs)ee=O[K],ae=S.GetAttributeByUniqueId(L,ee);else{if(ee=S.GetAttributeId(L,_[O[K]]),ee===-1)continue;ae=S.GetAttribute(L,ee)}J.attributes.push(g(_,S,L,K,se,ae))}return H===_.TRIANGULAR_MESH&&(J.index=C(_,S,L)),_.destroy(L),J}function C(_,S,R){const O=R.num_faces()*3,D=O*4,L=_._malloc(D);S.GetTrianglesUInt32Array(R,D,L);const N=new Uint32Array(_.HEAPF32.buffer,L,O).slice();return _._free(L),{array:N,itemSize:1}}function g(_,S,R,P,O,D){const L=D.num_components(),H=R.num_points()*L,J=H*O.BYTES_PER_ELEMENT,K=b(_,O),se=_._malloc(J);S.GetAttributeDataArrayForAllPoints(R,D,K,J,se);const ae=new O(_.HEAPF32.buffer,se,H).slice();return _._free(se),{name:P,array:ae,itemSize:L}}function b(_,S){switch(S){case Float32Array:return _.DT_FLOAT32;case Int8Array:return _.DT_INT8;case Int16Array:return _.DT_INT16;case Int32Array:return _.DT_INT32;case Uint8Array:return _.DT_UINT8;case Uint16Array:return _.DT_UINT16;case Uint32Array:return _.DT_UINT32}}}},"./node_modules/super-three/examples/jsm/loaders/GLTFLoader.js":(l,d,c)=>{c.r(d),c.d(d,{GLTFLoader:()=>m});var h=c("./node_modules/super-three/build/three.module.js");class m extends h.Loader{constructor(ye){super(ye),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(me){return new C(me)}),this.register(function(me){return new O(me)}),this.register(function(me){return new D(me)}),this.register(function(me){return new b(me)}),this.register(function(me){return new _(me)}),this.register(function(me){return new S(me)}),this.register(function(me){return new R(me)}),this.register(function(me){return new x(me)}),this.register(function(me){return new P(me)}),this.register(function(me){return new g(me)}),this.register(function(me){return new v(me)}),this.register(function(me){return new L(me)}),this.register(function(me){return new N(me)})}load(ye,me,Re,Se){const Be=this;let Ee;this.resourcePath!==""?Ee=this.resourcePath:this.path!==""?Ee=this.path:Ee=h.LoaderUtils.extractUrlBase(ye),this.manager.itemStart(ye);const Xe=function(Oe){Se?Se(Oe):console.error(Oe),Be.manager.itemError(ye),Be.manager.itemEnd(ye)},fe=new h.FileLoader(this.manager);fe.setPath(this.path),fe.setResponseType("arraybuffer"),fe.setRequestHeader(this.requestHeader),fe.setWithCredentials(this.withCredentials),fe.load(ye,function(Oe){try{Be.parse(Oe,Ee,function($e){me($e),Be.manager.itemEnd(ye)},Xe)}catch($e){Xe($e)}},Re,Xe)}setDRACOLoader(ye){return this.dracoLoader=ye,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(ye){return this.ktx2Loader=ye,this}setMeshoptDecoder(ye){return this.meshoptDecoder=ye,this}register(ye){return this.pluginCallbacks.indexOf(ye)===-1&&this.pluginCallbacks.push(ye),this}unregister(ye){return this.pluginCallbacks.indexOf(ye)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(ye),1),this}parse(ye,me,Re,Se){let Be;const Ee={},Xe={};if(typeof ye=="string")Be=JSON.parse(ye);else if(ye instanceof ArrayBuffer)if(h.LoaderUtils.decodeText(new Uint8Array(ye,0,4))===H){try{Ee[A.KHR_BINARY_GLTF]=new se(ye)}catch($e){Se&&Se($e);return}Be=JSON.parse(Ee[A.KHR_BINARY_GLTF].content)}else Be=JSON.parse(h.LoaderUtils.decodeText(new Uint8Array(ye)));else Be=ye;if(Be.asset===void 0||Be.asset.version[0]<2){Se&&Se(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const fe=new An(Be,{path:me||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});fe.fileLoader.setRequestHeader(this.requestHeader);for(let Oe=0;Oe<this.pluginCallbacks.length;Oe++){const $e=this.pluginCallbacks[Oe](fe);Xe[$e.name]=$e,Ee[$e.name]=!0}if(Be.extensionsUsed)for(let Oe=0;Oe<Be.extensionsUsed.length;++Oe){const $e=Be.extensionsUsed[Oe],le=Be.extensionsRequired||[];switch($e){case A.KHR_MATERIALS_UNLIT:Ee[$e]=new y;break;case A.KHR_DRACO_MESH_COMPRESSION:Ee[$e]=new ae(Be,this.dracoLoader);break;case A.KHR_TEXTURE_TRANSFORM:Ee[$e]=new ee;break;case A.KHR_MESH_QUANTIZATION:Ee[$e]=new ne;break;default:le.indexOf($e)>=0&&Xe[$e]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+$e+'".')}}fe.setExtensions(Ee),fe.setPlugins(Xe),fe.parse(Re,Se)}parseAsync(ye,me){const Re=this;return new Promise(function(Se,Be){Re.parse(ye,me,Se,Be)})}}function p(){let qe={};return{get:function(ye){return qe[ye]},add:function(ye,me){qe[ye]=me},remove:function(ye){delete qe[ye]},removeAll:function(){qe={}}}}const A={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class v{constructor(ye){this.parser=ye,this.name=A.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const ye=this.parser,me=this.parser.json.nodes||[];for(let Re=0,Se=me.length;Re<Se;Re++){const Be=me[Re];Be.extensions&&Be.extensions[this.name]&&Be.extensions[this.name].light!==void 0&&ye._addNodeRef(this.cache,Be.extensions[this.name].light)}}_loadLight(ye){const me=this.parser,Re="light:"+ye;let Se=me.cache.get(Re);if(Se)return Se;const Be=me.json,fe=((Be.extensions&&Be.extensions[this.name]||{}).lights||[])[ye];let Oe;const $e=new h.Color(16777215);fe.color!==void 0&&$e.fromArray(fe.color);const le=fe.range!==void 0?fe.range:0;switch(fe.type){case"directional":Oe=new h.DirectionalLight($e),Oe.target.position.set(0,0,-1),Oe.add(Oe.target);break;case"point":Oe=new h.PointLight($e),Oe.distance=le;break;case"spot":Oe=new h.SpotLight($e),Oe.distance=le,fe.spot=fe.spot||{},fe.spot.innerConeAngle=fe.spot.innerConeAngle!==void 0?fe.spot.innerConeAngle:0,fe.spot.outerConeAngle=fe.spot.outerConeAngle!==void 0?fe.spot.outerConeAngle:Math.PI/4,Oe.angle=fe.spot.outerConeAngle,Oe.penumbra=1-fe.spot.innerConeAngle/fe.spot.outerConeAngle,Oe.target.position.set(0,0,-1),Oe.add(Oe.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+fe.type)}return Oe.position.set(0,0,0),Oe.decay=2,ct(Oe,fe),fe.intensity!==void 0&&(Oe.intensity=fe.intensity),Oe.name=me.createUniqueName(fe.name||"light_"+ye),Se=Promise.resolve(Oe),me.cache.add(Re,Se),Se}getDependency(ye,me){if(ye==="light")return this._loadLight(me)}createNodeAttachment(ye){const me=this,Re=this.parser,Be=Re.json.nodes[ye],Xe=(Be.extensions&&Be.extensions[this.name]||{}).light;return Xe===void 0?null:this._loadLight(Xe).then(function(fe){return Re._getNodeRef(me.cache,Xe,fe)})}}class y{constructor(){this.name=A.KHR_MATERIALS_UNLIT}getMaterialType(){return h.MeshBasicMaterial}extendParams(ye,me,Re){const Se=[];ye.color=new h.Color(1,1,1),ye.opacity=1;const Be=me.pbrMetallicRoughness;if(Be){if(Array.isArray(Be.baseColorFactor)){const Ee=Be.baseColorFactor;ye.color.fromArray(Ee),ye.opacity=Ee[3]}Be.baseColorTexture!==void 0&&Se.push(Re.assignTexture(ye,"map",Be.baseColorTexture,h.sRGBEncoding))}return Promise.all(Se)}}class x{constructor(ye){this.parser=ye,this.name=A.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(ye,me){const Se=this.parser.json.materials[ye];if(!Se.extensions||!Se.extensions[this.name])return Promise.resolve();const Be=Se.extensions[this.name].emissiveStrength;return Be!==void 0&&(me.emissiveIntensity=Be),Promise.resolve()}}class C{constructor(ye){this.parser=ye,this.name=A.KHR_MATERIALS_CLEARCOAT}getMaterialType(ye){const Re=this.parser.json.materials[ye];return!Re.extensions||!Re.extensions[this.name]?null:h.MeshPhysicalMaterial}extendMaterialParams(ye,me){const Re=this.parser,Se=Re.json.materials[ye];if(!Se.extensions||!Se.extensions[this.name])return Promise.resolve();const Be=[],Ee=Se.extensions[this.name];if(Ee.clearcoatFactor!==void 0&&(me.clearcoat=Ee.clearcoatFactor),Ee.clearcoatTexture!==void 0&&Be.push(Re.assignTexture(me,"clearcoatMap",Ee.clearcoatTexture)),Ee.clearcoatRoughnessFactor!==void 0&&(me.clearcoatRoughness=Ee.clearcoatRoughnessFactor),Ee.clearcoatRoughnessTexture!==void 0&&Be.push(Re.assignTexture(me,"clearcoatRoughnessMap",Ee.clearcoatRoughnessTexture)),Ee.clearcoatNormalTexture!==void 0&&(Be.push(Re.assignTexture(me,"clearcoatNormalMap",Ee.clearcoatNormalTexture)),Ee.clearcoatNormalTexture.scale!==void 0)){const Xe=Ee.clearcoatNormalTexture.scale;me.clearcoatNormalScale=new h.Vector2(Xe,Xe)}return Promise.all(Be)}}class g{constructor(ye){this.parser=ye,this.name=A.KHR_MATERIALS_IRIDESCENCE}getMaterialType(ye){const Re=this.parser.json.materials[ye];return!Re.extensions||!Re.extensions[this.name]?null:h.MeshPhysicalMaterial}extendMaterialParams(ye,me){const Re=this.parser,Se=Re.json.materials[ye];if(!Se.extensions||!Se.extensions[this.name])return Promise.resolve();const Be=[],Ee=Se.extensions[this.name];return Ee.iridescenceFactor!==void 0&&(me.iridescence=Ee.iridescenceFactor),Ee.iridescenceTexture!==void 0&&Be.push(Re.assignTexture(me,"iridescenceMap",Ee.iridescenceTexture)),Ee.iridescenceIor!==void 0&&(me.iridescenceIOR=Ee.iridescenceIor),me.iridescenceThicknessRange===void 0&&(me.iridescenceThicknessRange=[100,400]),Ee.iridescenceThicknessMinimum!==void 0&&(me.iridescenceThicknessRange[0]=Ee.iridescenceThicknessMinimum),Ee.iridescenceThicknessMaximum!==void 0&&(me.iridescenceThicknessRange[1]=Ee.iridescenceThicknessMaximum),Ee.iridescenceThicknessTexture!==void 0&&Be.push(Re.assignTexture(me,"iridescenceThicknessMap",Ee.iridescenceThicknessTexture)),Promise.all(Be)}}class b{constructor(ye){this.parser=ye,this.name=A.KHR_MATERIALS_SHEEN}getMaterialType(ye){const Re=this.parser.json.materials[ye];return!Re.extensions||!Re.extensions[this.name]?null:h.MeshPhysicalMaterial}extendMaterialParams(ye,me){const Re=this.parser,Se=Re.json.materials[ye];if(!Se.extensions||!Se.extensions[this.name])return Promise.resolve();const Be=[];me.sheenColor=new h.Color(0,0,0),me.sheenRoughness=0,me.sheen=1;const Ee=Se.extensions[this.name];return Ee.sheenColorFactor!==void 0&&me.sheenColor.fromArray(Ee.sheenColorFactor),Ee.sheenRoughnessFactor!==void 0&&(me.sheenRoughness=Ee.sheenRoughnessFactor),Ee.sheenColorTexture!==void 0&&Be.push(Re.assignTexture(me,"sheenColorMap",Ee.sheenColorTexture,h.sRGBEncoding)),Ee.sheenRoughnessTexture!==void 0&&Be.push(Re.assignTexture(me,"sheenRoughnessMap",Ee.sheenRoughnessTexture)),Promise.all(Be)}}class _{constructor(ye){this.parser=ye,this.name=A.KHR_MATERIALS_TRANSMISSION}getMaterialType(ye){const Re=this.parser.json.materials[ye];return!Re.extensions||!Re.extensions[this.name]?null:h.MeshPhysicalMaterial}extendMaterialParams(ye,me){const Re=this.parser,Se=Re.json.materials[ye];if(!Se.extensions||!Se.extensions[this.name])return Promise.resolve();const Be=[],Ee=Se.extensions[this.name];return Ee.transmissionFactor!==void 0&&(me.transmission=Ee.transmissionFactor),Ee.transmissionTexture!==void 0&&Be.push(Re.assignTexture(me,"transmissionMap",Ee.transmissionTexture)),Promise.all(Be)}}class S{constructor(ye){this.parser=ye,this.name=A.KHR_MATERIALS_VOLUME}getMaterialType(ye){const Re=this.parser.json.materials[ye];return!Re.extensions||!Re.extensions[this.name]?null:h.MeshPhysicalMaterial}extendMaterialParams(ye,me){const Re=this.parser,Se=Re.json.materials[ye];if(!Se.extensions||!Se.extensions[this.name])return Promise.resolve();const Be=[],Ee=Se.extensions[this.name];me.thickness=Ee.thicknessFactor!==void 0?Ee.thicknessFactor:0,Ee.thicknessTexture!==void 0&&Be.push(Re.assignTexture(me,"thicknessMap",Ee.thicknessTexture)),me.attenuationDistance=Ee.attenuationDistance||1/0;const Xe=Ee.attenuationColor||[1,1,1];return me.attenuationColor=new h.Color(Xe[0],Xe[1],Xe[2]),Promise.all(Be)}}class R{constructor(ye){this.parser=ye,this.name=A.KHR_MATERIALS_IOR}getMaterialType(ye){const Re=this.parser.json.materials[ye];return!Re.extensions||!Re.extensions[this.name]?null:h.MeshPhysicalMaterial}extendMaterialParams(ye,me){const Se=this.parser.json.materials[ye];if(!Se.extensions||!Se.extensions[this.name])return Promise.resolve();const Be=Se.extensions[this.name];return me.ior=Be.ior!==void 0?Be.ior:1.5,Promise.resolve()}}class P{constructor(ye){this.parser=ye,this.name=A.KHR_MATERIALS_SPECULAR}getMaterialType(ye){const Re=this.parser.json.materials[ye];return!Re.extensions||!Re.extensions[this.name]?null:h.MeshPhysicalMaterial}extendMaterialParams(ye,me){const Re=this.parser,Se=Re.json.materials[ye];if(!Se.extensions||!Se.extensions[this.name])return Promise.resolve();const Be=[],Ee=Se.extensions[this.name];me.specularIntensity=Ee.specularFactor!==void 0?Ee.specularFactor:1,Ee.specularTexture!==void 0&&Be.push(Re.assignTexture(me,"specularIntensityMap",Ee.specularTexture));const Xe=Ee.specularColorFactor||[1,1,1];return me.specularColor=new h.Color(Xe[0],Xe[1],Xe[2]),Ee.specularColorTexture!==void 0&&Be.push(Re.assignTexture(me,"specularColorMap",Ee.specularColorTexture,h.sRGBEncoding)),Promise.all(Be)}}class O{constructor(ye){this.parser=ye,this.name=A.KHR_TEXTURE_BASISU}loadTexture(ye){const me=this.parser,Re=me.json,Se=Re.textures[ye];if(!Se.extensions||!Se.extensions[this.name])return null;const Be=Se.extensions[this.name],Ee=me.options.ktx2Loader;if(!Ee){if(Re.extensionsRequired&&Re.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return me.loadTextureImage(ye,Be.source,Ee)}}class D{constructor(ye){this.parser=ye,this.name=A.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(ye){const me=this.name,Re=this.parser,Se=Re.json,Be=Se.textures[ye];if(!Be.extensions||!Be.extensions[me])return null;const Ee=Be.extensions[me],Xe=Se.images[Ee.source];let fe=Re.textureLoader;if(Xe.uri){const Oe=Re.options.manager.getHandler(Xe.uri);Oe!==null&&(fe=Oe)}return this.detectSupport().then(function(Oe){if(Oe)return Re.loadTextureImage(ye,Ee.source,fe);if(Se.extensionsRequired&&Se.extensionsRequired.indexOf(me)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return Re.loadTexture(ye)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(ye){const me=new Image;me.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",me.onload=me.onerror=function(){ye(me.height===1)}})),this.isSupported}}class L{constructor(ye){this.name=A.EXT_MESHOPT_COMPRESSION,this.parser=ye}loadBufferView(ye){const me=this.parser.json,Re=me.bufferViews[ye];if(Re.extensions&&Re.extensions[this.name]){const Se=Re.extensions[this.name],Be=this.parser.getDependency("buffer",Se.buffer),Ee=this.parser.options.meshoptDecoder;if(!Ee||!Ee.supported){if(me.extensionsRequired&&me.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Be.then(function(Xe){const fe=Se.byteOffset||0,Oe=Se.byteLength||0,$e=Se.count,le=Se.byteStride,Q=new Uint8Array(Xe,fe,Oe);return Ee.decodeGltfBufferAsync?Ee.decodeGltfBufferAsync($e,le,Q,Se.mode,Se.filter).then(function(Z){return Z.buffer}):Ee.ready.then(function(){const Z=new ArrayBuffer($e*le);return Ee.decodeGltfBuffer(new Uint8Array(Z),$e,le,Q,Se.mode,Se.filter),Z})})}else return null}}class N{constructor(ye){this.name=A.EXT_MESH_GPU_INSTANCING,this.parser=ye}createNodeMesh(ye){const me=this.parser.json,Re=me.nodes[ye];if(!Re.extensions||!Re.extensions[this.name]||Re.mesh===void 0)return null;const Se=me.meshes[Re.mesh];for(const Oe of Se.primitives)if(Oe.mode!==he.TRIANGLES&&Oe.mode!==he.TRIANGLE_STRIP&&Oe.mode!==he.TRIANGLE_FAN&&Oe.mode!==void 0)return null;const Ee=Re.extensions[this.name].attributes,Xe=[],fe={};for(const Oe in Ee)Xe.push(this.parser.getDependency("accessor",Ee[Oe]).then($e=>(fe[Oe]=$e,fe[Oe])));return Xe.length<1?null:(Xe.push(this.parser.createNodeMesh(ye)),Promise.all(Xe).then(Oe=>{const $e=Oe.pop(),le=$e.isGroup?$e.children:[$e],Q=Oe[0].count,Z=[];for(const Ie of le){const Ae=new h.Matrix4,Te=new h.Vector3,Ve=new h.Quaternion,Tt=new h.Vector3(1,1,1),Ht=new h.InstancedMesh(Ie.geometry,Ie.material,Q);for(let nn=0;nn<Q;nn++)fe.TRANSLATION&&Te.fromBufferAttribute(fe.TRANSLATION,nn),fe.ROTATION&&Ve.fromBufferAttribute(fe.ROTATION,nn),fe.SCALE&&Tt.fromBufferAttribute(fe.SCALE,nn),Ht.setMatrixAt(nn,Ae.compose(Te,Ve,Tt));for(const nn in fe)nn!=="TRANSLATION"&&nn!=="ROTATION"&&nn!=="SCALE"&&Ie.geometry.setAttribute(nn,fe[nn]);h.Object3D.prototype.copy.call(Ht,Ie),Ht.frustumCulled=!1,this.parser.assignFinalMaterial(Ht),Z.push(Ht)}return $e.isGroup?($e.clear(),$e.add(...Z),$e):Z[0]}))}}const H="glTF",J=12,K={JSON:1313821514,BIN:5130562};class se{constructor(ye){this.name=A.KHR_BINARY_GLTF,this.content=null,this.body=null;const me=new DataView(ye,0,J);if(this.header={magic:h.LoaderUtils.decodeText(new Uint8Array(ye.slice(0,4))),version:me.getUint32(4,!0),length:me.getUint32(8,!0)},this.header.magic!==H)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const Re=this.header.length-J,Se=new DataView(ye,J);let Be=0;for(;Be<Re;){const Ee=Se.getUint32(Be,!0);Be+=4;const Xe=Se.getUint32(Be,!0);if(Be+=4,Xe===K.JSON){const fe=new Uint8Array(ye,J+Be,Ee);this.content=h.LoaderUtils.decodeText(fe)}else if(Xe===K.BIN){const fe=J+Be;this.body=ye.slice(fe,fe+Ee)}Be+=Ee}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class ae{constructor(ye,me){if(!me)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=A.KHR_DRACO_MESH_COMPRESSION,this.json=ye,this.dracoLoader=me,this.dracoLoader.preload()}decodePrimitive(ye,me){const Re=this.json,Se=this.dracoLoader,Be=ye.extensions[this.name].bufferView,Ee=ye.extensions[this.name].attributes,Xe={},fe={},Oe={};for(const $e in Ee){const le=rt[$e]||$e.toLowerCase();Xe[le]=Ee[$e]}for(const $e in ye.attributes){const le=rt[$e]||$e.toLowerCase();if(Ee[$e]!==void 0){const Q=Re.accessors[ye.attributes[$e]],Z=xe[Q.componentType];Oe[le]=Z.name,fe[le]=Q.normalized===!0}}return me.getDependency("bufferView",Be).then(function($e){return new Promise(function(le){Se.decodeDracoFile($e,function(Q){for(const Z in Q.attributes){const Ie=Q.attributes[Z],Ae=fe[Z];Ae!==void 0&&(Ie.normalized=Ae)}le(Q)},Xe,Oe)})})}}class ee{constructor(){this.name=A.KHR_TEXTURE_TRANSFORM}extendTexture(ye,me){return me.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),me.offset===void 0&&me.rotation===void 0&&me.scale===void 0||(ye=ye.clone(),me.offset!==void 0&&ye.offset.fromArray(me.offset),me.rotation!==void 0&&(ye.rotation=me.rotation),me.scale!==void 0&&ye.repeat.fromArray(me.scale),ye.needsUpdate=!0),ye}}class ne{constructor(){this.name=A.KHR_MESH_QUANTIZATION}}class X extends h.Interpolant{constructor(ye,me,Re,Se){super(ye,me,Re,Se)}copySampleValue_(ye){const me=this.resultBuffer,Re=this.sampleValues,Se=this.valueSize,Be=ye*Se*3+Se;for(let Ee=0;Ee!==Se;Ee++)me[Ee]=Re[Be+Ee];return me}interpolate_(ye,me,Re,Se){const Be=this.resultBuffer,Ee=this.sampleValues,Xe=this.valueSize,fe=Xe*2,Oe=Xe*3,$e=Se-me,le=(Re-me)/$e,Q=le*le,Z=Q*le,Ie=ye*Oe,Ae=Ie-Oe,Te=-2*Z+3*Q,Ve=Z-Q,Tt=1-Te,Ht=Ve-Q+le;for(let nn=0;nn!==Xe;nn++){const cn=Ee[Ae+nn+Xe],Xn=Ee[Ae+nn+fe]*$e,cr=Ee[Ie+nn+Xe],Ni=Ee[Ie+nn]*$e;Be[nn]=Tt*cn+Ht*Xn+Te*cr+Ve*Ni}return Be}}const W=new h.Quaternion;class ce extends X{interpolate_(ye,me,Re,Se){const Be=super.interpolate_(ye,me,Re,Se);return W.fromArray(Be).normalize().toArray(Be),Be}}const he={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},xe={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},ve={9728:h.NearestFilter,9729:h.LinearFilter,9984:h.NearestMipmapNearestFilter,9985:h.LinearMipmapNearestFilter,9986:h.NearestMipmapLinearFilter,9987:h.LinearMipmapLinearFilter},Fe={33071:h.ClampToEdgeWrapping,33648:h.MirroredRepeatWrapping,10497:h.RepeatWrapping},je={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},rt={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},He={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Ot={CUBICSPLINE:void 0,LINEAR:h.InterpolateLinear,STEP:h.InterpolateDiscrete},xt={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function gt(qe){return qe.DefaultMaterial===void 0&&(qe.DefaultMaterial=new h.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:h.FrontSide})),qe.DefaultMaterial}function It(qe,ye,me){for(const Re in me.extensions)qe[Re]===void 0&&(ye.userData.gltfExtensions=ye.userData.gltfExtensions||{},ye.userData.gltfExtensions[Re]=me.extensions[Re])}function ct(qe,ye){ye.extras!==void 0&&(typeof ye.extras=="object"?Object.assign(qe.userData,ye.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+ye.extras))}function ut(qe,ye,me){let Re=!1,Se=!1,Be=!1;for(let Oe=0,$e=ye.length;Oe<$e;Oe++){const le=ye[Oe];if(le.POSITION!==void 0&&(Re=!0),le.NORMAL!==void 0&&(Se=!0),le.COLOR_0!==void 0&&(Be=!0),Re&&Se&&Be)break}if(!Re&&!Se&&!Be)return Promise.resolve(qe);const Ee=[],Xe=[],fe=[];for(let Oe=0,$e=ye.length;Oe<$e;Oe++){const le=ye[Oe];if(Re){const Q=le.POSITION!==void 0?me.getDependency("accessor",le.POSITION):qe.attributes.position;Ee.push(Q)}if(Se){const Q=le.NORMAL!==void 0?me.getDependency("accessor",le.NORMAL):qe.attributes.normal;Xe.push(Q)}if(Be){const Q=le.COLOR_0!==void 0?me.getDependency("accessor",le.COLOR_0):qe.attributes.color;fe.push(Q)}}return Promise.all([Promise.all(Ee),Promise.all(Xe),Promise.all(fe)]).then(function(Oe){const $e=Oe[0],le=Oe[1],Q=Oe[2];return Re&&(qe.morphAttributes.position=$e),Se&&(qe.morphAttributes.normal=le),Be&&(qe.morphAttributes.color=Q),qe.morphTargetsRelative=!0,qe})}function Ct(qe,ye){if(qe.updateMorphTargets(),ye.weights!==void 0)for(let me=0,Re=ye.weights.length;me<Re;me++)qe.morphTargetInfluences[me]=ye.weights[me];if(ye.extras&&Array.isArray(ye.extras.targetNames)){const me=ye.extras.targetNames;if(qe.morphTargetInfluences.length===me.length){qe.morphTargetDictionary={};for(let Re=0,Se=me.length;Re<Se;Re++)qe.morphTargetDictionary[me[Re]]=Re}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function qt(qe){const ye=qe.extensions&&qe.extensions[A.KHR_DRACO_MESH_COMPRESSION];let me;return ye?me="draco:"+ye.bufferView+":"+ye.indices+":"+Ft(ye.attributes):me=qe.indices+":"+Ft(qe.attributes)+":"+qe.mode,me}function Ft(qe){let ye="";const me=Object.keys(qe).sort();for(let Re=0,Se=me.length;Re<Se;Re++)ye+=me[Re]+":"+qe[me[Re]]+";";return ye}function un(qe){switch(qe){case Int8Array:return .007874015748031496;case Uint8Array:return .00392156862745098;case Int16Array:return 3051850947599719e-20;case Uint16Array:return 15259021896696422e-21;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function fn(qe){return qe.search(/\.jpe?g($|\?)/i)>0||qe.search(/^data\:image\/jpeg/)===0?"image/jpeg":qe.search(/\.webp($|\?)/i)>0||qe.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}class An{constructor(ye={},me={}){this.json=ye,this.extensions={},this.plugins={},this.options=me,this.cache=new p,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let Re=!1,Se=!1,Be=-1;typeof navigator<"u"&&(Re=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,Se=navigator.userAgent.indexOf("Firefox")>-1,Be=Se?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||Re||Se&&Be<98?this.textureLoader=new h.TextureLoader(this.options.manager):this.textureLoader=new h.ImageBitmapLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new h.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(ye){this.extensions=ye}setPlugins(ye){this.plugins=ye}parse(ye,me){const Re=this,Se=this.json,Be=this.extensions;this.cache.removeAll(),this._invokeAll(function(Ee){return Ee._markDefs&&Ee._markDefs()}),Promise.all(this._invokeAll(function(Ee){return Ee.beforeRoot&&Ee.beforeRoot()})).then(function(){return Promise.all([Re.getDependencies("scene"),Re.getDependencies("animation"),Re.getDependencies("camera")])}).then(function(Ee){const Xe={scene:Ee[0][Se.scene||0],scenes:Ee[0],animations:Ee[1],cameras:Ee[2],asset:Se.asset,parser:Re,userData:{}};It(Be,Xe,Se),ct(Xe,Se),Promise.all(Re._invokeAll(function(fe){return fe.afterRoot&&fe.afterRoot(Xe)})).then(function(){ye(Xe)})}).catch(me)}_markDefs(){const ye=this.json.nodes||[],me=this.json.skins||[],Re=this.json.meshes||[];for(let Se=0,Be=me.length;Se<Be;Se++){const Ee=me[Se].joints;for(let Xe=0,fe=Ee.length;Xe<fe;Xe++)ye[Ee[Xe]].isBone=!0}for(let Se=0,Be=ye.length;Se<Be;Se++){const Ee=ye[Se];Ee.mesh!==void 0&&(this._addNodeRef(this.meshCache,Ee.mesh),Ee.skin!==void 0&&(Re[Ee.mesh].isSkinnedMesh=!0)),Ee.camera!==void 0&&this._addNodeRef(this.cameraCache,Ee.camera)}}_addNodeRef(ye,me){me!==void 0&&(ye.refs[me]===void 0&&(ye.refs[me]=ye.uses[me]=0),ye.refs[me]++)}_getNodeRef(ye,me,Re){if(ye.refs[me]<=1)return Re;const Se=Re.clone(),Be=(Ee,Xe)=>{const fe=this.associations.get(Ee);fe!=null&&this.associations.set(Xe,fe);for(const[Oe,$e]of Ee.children.entries())Be($e,Xe.children[Oe])};return Be(Re,Se),Se.name+="_instance_"+ye.uses[me]++,Se}_invokeOne(ye){const me=Object.values(this.plugins);me.push(this);for(let Re=0;Re<me.length;Re++){const Se=ye(me[Re]);if(Se)return Se}return null}_invokeAll(ye){const me=Object.values(this.plugins);me.unshift(this);const Re=[];for(let Se=0;Se<me.length;Se++){const Be=ye(me[Se]);Be&&Re.push(Be)}return Re}getDependency(ye,me){const Re=ye+":"+me;let Se=this.cache.get(Re);if(!Se){switch(ye){case"scene":Se=this.loadScene(me);break;case"node":Se=this.loadNode(me);break;case"mesh":Se=this._invokeOne(function(Be){return Be.loadMesh&&Be.loadMesh(me)});break;case"accessor":Se=this.loadAccessor(me);break;case"bufferView":Se=this._invokeOne(function(Be){return Be.loadBufferView&&Be.loadBufferView(me)});break;case"buffer":Se=this.loadBuffer(me);break;case"material":Se=this._invokeOne(function(Be){return Be.loadMaterial&&Be.loadMaterial(me)});break;case"texture":Se=this._invokeOne(function(Be){return Be.loadTexture&&Be.loadTexture(me)});break;case"skin":Se=this.loadSkin(me);break;case"animation":Se=this._invokeOne(function(Be){return Be.loadAnimation&&Be.loadAnimation(me)});break;case"camera":Se=this.loadCamera(me);break;default:if(Se=this._invokeOne(function(Be){return Be!=this&&Be.getDependency&&Be.getDependency(ye,me)}),!Se)throw new Error("Unknown type: "+ye);break}this.cache.add(Re,Se)}return Se}getDependencies(ye){let me=this.cache.get(ye);if(!me){const Re=this,Se=this.json[ye+(ye==="mesh"?"es":"s")]||[];me=Promise.all(Se.map(function(Be,Ee){return Re.getDependency(ye,Ee)})),this.cache.add(ye,me)}return me}loadBuffer(ye){const me=this.json.buffers[ye],Re=this.fileLoader;if(me.type&&me.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+me.type+" buffer type is not supported.");if(me.uri===void 0&&ye===0)return Promise.resolve(this.extensions[A.KHR_BINARY_GLTF].body);const Se=this.options;return new Promise(function(Be,Ee){Re.load(h.LoaderUtils.resolveURL(me.uri,Se.path),Be,void 0,function(){Ee(new Error('THREE.GLTFLoader: Failed to load buffer "'+me.uri+'".'))})})}loadBufferView(ye){const me=this.json.bufferViews[ye];return this.getDependency("buffer",me.buffer).then(function(Re){const Se=me.byteLength||0,Be=me.byteOffset||0;return Re.slice(Be,Be+Se)})}loadAccessor(ye){const me=this,Re=this.json,Se=this.json.accessors[ye];if(Se.bufferView===void 0&&Se.sparse===void 0){const Ee=je[Se.type],Xe=xe[Se.componentType],fe=Se.normalized===!0,Oe=new Xe(Se.count*Ee);return Promise.resolve(new h.BufferAttribute(Oe,Ee,fe))}const Be=[];return Se.bufferView!==void 0?Be.push(this.getDependency("bufferView",Se.bufferView)):Be.push(null),Se.sparse!==void 0&&(Be.push(this.getDependency("bufferView",Se.sparse.indices.bufferView)),Be.push(this.getDependency("bufferView",Se.sparse.values.bufferView))),Promise.all(Be).then(function(Ee){const Xe=Ee[0],fe=je[Se.type],Oe=xe[Se.componentType],$e=Oe.BYTES_PER_ELEMENT,le=$e*fe,Q=Se.byteOffset||0,Z=Se.bufferView!==void 0?Re.bufferViews[Se.bufferView].byteStride:void 0,Ie=Se.normalized===!0;let Ae,Te;if(Z&&Z!==le){const Ve=Math.floor(Q/Z),Tt="InterleavedBuffer:"+Se.bufferView+":"+Se.componentType+":"+Ve+":"+Se.count;let Ht=me.cache.get(Tt);Ht||(Ae=new Oe(Xe,Ve*Z,Se.count*Z/$e),Ht=new h.InterleavedBuffer(Ae,Z/$e),me.cache.add(Tt,Ht)),Te=new h.InterleavedBufferAttribute(Ht,fe,Q%Z/$e,Ie)}else Xe===null?Ae=new Oe(Se.count*fe):Ae=new Oe(Xe,Q,Se.count*fe),Te=new h.BufferAttribute(Ae,fe,Ie);if(Se.sparse!==void 0){const Ve=je.SCALAR,Tt=xe[Se.sparse.indices.componentType],Ht=Se.sparse.indices.byteOffset||0,nn=Se.sparse.values.byteOffset||0,cn=new Tt(Ee[1],Ht,Se.sparse.count*Ve),Xn=new Oe(Ee[2],nn,Se.sparse.count*fe);Xe!==null&&(Te=new h.BufferAttribute(Te.array.slice(),Te.itemSize,Te.normalized));for(let cr=0,Ni=cn.length;cr<Ni;cr++){const or=cn[cr];if(Te.setX(or,Xn[cr*fe]),fe>=2&&Te.setY(or,Xn[cr*fe+1]),fe>=3&&Te.setZ(or,Xn[cr*fe+2]),fe>=4&&Te.setW(or,Xn[cr*fe+3]),fe>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return Te})}loadTexture(ye){const me=this.json,Re=this.options,Be=me.textures[ye].source,Ee=me.images[Be];let Xe=this.textureLoader;if(Ee.uri){const fe=Re.manager.getHandler(Ee.uri);fe!==null&&(Xe=fe)}return this.loadTextureImage(ye,Be,Xe)}loadTextureImage(ye,me,Re){const Se=this,Be=this.json,Ee=Be.textures[ye],Xe=Be.images[me],fe=(Xe.uri||Xe.bufferView)+":"+Ee.sampler;if(this.textureCache[fe])return this.textureCache[fe];const Oe=this.loadImageSource(me,Re).then(function($e){$e.flipY=!1,$e.name=Ee.name||Xe.name||"";const Q=(Be.samplers||{})[Ee.sampler]||{};return $e.magFilter=ve[Q.magFilter]||h.LinearFilter,$e.minFilter=ve[Q.minFilter]||h.LinearMipmapLinearFilter,$e.wrapS=Fe[Q.wrapS]||h.RepeatWrapping,$e.wrapT=Fe[Q.wrapT]||h.RepeatWrapping,Se.associations.set($e,{textures:ye}),$e}).catch(function(){return null});return this.textureCache[fe]=Oe,Oe}loadImageSource(ye,me){const Re=this,Se=this.json,Be=this.options;if(this.sourceCache[ye]!==void 0)return this.sourceCache[ye].then(le=>le.clone());const Ee=Se.images[ye],Xe=self.URL||self.webkitURL;let fe=Ee.uri||"",Oe=!1;if(Ee.bufferView!==void 0)fe=Re.getDependency("bufferView",Ee.bufferView).then(function(le){Oe=!0;const Q=new Blob([le],{type:Ee.mimeType});return fe=Xe.createObjectURL(Q),fe});else if(Ee.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+ye+" is missing URI and bufferView");const $e=Promise.resolve(fe).then(function(le){return new Promise(function(Q,Z){let Ie=Q;me.isImageBitmapLoader===!0&&(Ie=function(Ae){const Te=new h.Texture(Ae);Te.needsUpdate=!0,Q(Te)}),me.load(h.LoaderUtils.resolveURL(le,Be.path),Ie,void 0,Z)})}).then(function(le){return Oe===!0&&Xe.revokeObjectURL(fe),le.userData.mimeType=Ee.mimeType||fn(Ee.uri),le}).catch(function(le){throw console.error("THREE.GLTFLoader: Couldn't load texture",fe),le});return this.sourceCache[ye]=$e,$e}assignTexture(ye,me,Re,Se){const Be=this;return this.getDependency("texture",Re.index).then(function(Ee){if(!Ee)return null;if(Re.texCoord!==void 0&&Re.texCoord!=0&&!(me==="aoMap"&&Re.texCoord==1)&&console.warn("THREE.GLTFLoader: Custom UV set "+Re.texCoord+" for texture "+me+" not yet supported."),Be.extensions[A.KHR_TEXTURE_TRANSFORM]){const Xe=Re.extensions!==void 0?Re.extensions[A.KHR_TEXTURE_TRANSFORM]:void 0;if(Xe){const fe=Be.associations.get(Ee);Ee=Be.extensions[A.KHR_TEXTURE_TRANSFORM].extendTexture(Ee,Xe),Be.associations.set(Ee,fe)}}return Se!==void 0&&(Ee.encoding=Se),ye[me]=Ee,Ee})}assignFinalMaterial(ye){const me=ye.geometry;let Re=ye.material;const Se=me.attributes.tangent===void 0,Be=me.attributes.color!==void 0,Ee=me.attributes.normal===void 0;if(ye.isPoints){const Xe="PointsMaterial:"+Re.uuid;let fe=this.cache.get(Xe);fe||(fe=new h.PointsMaterial,h.Material.prototype.copy.call(fe,Re),fe.color.copy(Re.color),fe.map=Re.map,fe.sizeAttenuation=!1,this.cache.add(Xe,fe)),Re=fe}else if(ye.isLine){const Xe="LineBasicMaterial:"+Re.uuid;let fe=this.cache.get(Xe);fe||(fe=new h.LineBasicMaterial,h.Material.prototype.copy.call(fe,Re),fe.color.copy(Re.color),this.cache.add(Xe,fe)),Re=fe}if(Se||Be||Ee){let Xe="ClonedMaterial:"+Re.uuid+":";Se&&(Xe+="derivative-tangents:"),Be&&(Xe+="vertex-colors:"),Ee&&(Xe+="flat-shading:");let fe=this.cache.get(Xe);fe||(fe=Re.clone(),Be&&(fe.vertexColors=!0),Ee&&(fe.flatShading=!0),Se&&(fe.normalScale&&(fe.normalScale.y*=-1),fe.clearcoatNormalScale&&(fe.clearcoatNormalScale.y*=-1)),this.cache.add(Xe,fe),this.associations.set(fe,this.associations.get(Re))),Re=fe}Re.aoMap&&me.attributes.uv2===void 0&&me.attributes.uv!==void 0&&me.setAttribute("uv2",me.attributes.uv),ye.material=Re}getMaterialType(){return h.MeshStandardMaterial}loadMaterial(ye){const me=this,Re=this.json,Se=this.extensions,Be=Re.materials[ye];let Ee;const Xe={},fe=Be.extensions||{},Oe=[];if(fe[A.KHR_MATERIALS_UNLIT]){const le=Se[A.KHR_MATERIALS_UNLIT];Ee=le.getMaterialType(),Oe.push(le.extendParams(Xe,Be,me))}else{const le=Be.pbrMetallicRoughness||{};if(Xe.color=new h.Color(1,1,1),Xe.opacity=1,Array.isArray(le.baseColorFactor)){const Q=le.baseColorFactor;Xe.color.fromArray(Q),Xe.opacity=Q[3]}le.baseColorTexture!==void 0&&Oe.push(me.assignTexture(Xe,"map",le.baseColorTexture,h.sRGBEncoding)),Xe.metalness=le.metallicFactor!==void 0?le.metallicFactor:1,Xe.roughness=le.roughnessFactor!==void 0?le.roughnessFactor:1,le.metallicRoughnessTexture!==void 0&&(Oe.push(me.assignTexture(Xe,"metalnessMap",le.metallicRoughnessTexture)),Oe.push(me.assignTexture(Xe,"roughnessMap",le.metallicRoughnessTexture))),Ee=this._invokeOne(function(Q){return Q.getMaterialType&&Q.getMaterialType(ye)}),Oe.push(Promise.all(this._invokeAll(function(Q){return Q.extendMaterialParams&&Q.extendMaterialParams(ye,Xe)})))}Be.doubleSided===!0&&(Xe.side=h.DoubleSide);const $e=Be.alphaMode||xt.OPAQUE;if($e===xt.BLEND?(Xe.transparent=!0,Xe.depthWrite=!1):(Xe.transparent=!1,$e===xt.MASK&&(Xe.alphaTest=Be.alphaCutoff!==void 0?Be.alphaCutoff:.5)),Be.normalTexture!==void 0&&Ee!==h.MeshBasicMaterial&&(Oe.push(me.assignTexture(Xe,"normalMap",Be.normalTexture)),Xe.normalScale=new h.Vector2(1,1),Be.normalTexture.scale!==void 0)){const le=Be.normalTexture.scale;Xe.normalScale.set(le,le)}return Be.occlusionTexture!==void 0&&Ee!==h.MeshBasicMaterial&&(Oe.push(me.assignTexture(Xe,"aoMap",Be.occlusionTexture)),Be.occlusionTexture.strength!==void 0&&(Xe.aoMapIntensity=Be.occlusionTexture.strength)),Be.emissiveFactor!==void 0&&Ee!==h.MeshBasicMaterial&&(Xe.emissive=new h.Color().fromArray(Be.emissiveFactor)),Be.emissiveTexture!==void 0&&Ee!==h.MeshBasicMaterial&&Oe.push(me.assignTexture(Xe,"emissiveMap",Be.emissiveTexture,h.sRGBEncoding)),Promise.all(Oe).then(function(){const le=new Ee(Xe);return Be.name&&(le.name=Be.name),ct(le,Be),me.associations.set(le,{materials:ye}),Be.extensions&&It(Se,le,Be),le})}createUniqueName(ye){const me=h.PropertyBinding.sanitizeNodeName(ye||"");let Re=me;for(let Se=1;this.nodeNamesUsed[Re];++Se)Re=me+"_"+Se;return this.nodeNamesUsed[Re]=!0,Re}loadGeometries(ye){const me=this,Re=this.extensions,Se=this.primitiveCache;function Be(Xe){return Re[A.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(Xe,me).then(function(fe){return ze(fe,Xe,me)})}const Ee=[];for(let Xe=0,fe=ye.length;Xe<fe;Xe++){const Oe=ye[Xe],$e=qt(Oe),le=Se[$e];if(le)Ee.push(le.promise);else{let Q;Oe.extensions&&Oe.extensions[A.KHR_DRACO_MESH_COMPRESSION]?Q=Be(Oe):Q=ze(new h.BufferGeometry,Oe,me),Se[$e]={primitive:Oe,promise:Q},Ee.push(Q)}}return Promise.all(Ee)}loadMesh(ye){const me=this,Re=this.json,Se=this.extensions,Be=Re.meshes[ye],Ee=Be.primitives,Xe=[];for(let fe=0,Oe=Ee.length;fe<Oe;fe++){const $e=Ee[fe].material===void 0?gt(this.cache):this.getDependency("material",Ee[fe].material);Xe.push($e)}return Xe.push(me.loadGeometries(Ee)),Promise.all(Xe).then(function(fe){const Oe=fe.slice(0,fe.length-1),$e=fe[fe.length-1],le=[];for(let Z=0,Ie=$e.length;Z<Ie;Z++){const Ae=$e[Z],Te=Ee[Z];let Ve;const Tt=Oe[Z];if(Te.mode===he.TRIANGLES||Te.mode===he.TRIANGLE_STRIP||Te.mode===he.TRIANGLE_FAN||Te.mode===void 0)Ve=Be.isSkinnedMesh===!0?new h.SkinnedMesh(Ae,Tt):new h.Mesh(Ae,Tt),Ve.isSkinnedMesh===!0&&!Ve.geometry.attributes.skinWeight.normalized&&Ve.normalizeSkinWeights(),Te.mode===he.TRIANGLE_STRIP?Ve.geometry=Pe(Ve.geometry,h.TriangleStripDrawMode):Te.mode===he.TRIANGLE_FAN&&(Ve.geometry=Pe(Ve.geometry,h.TriangleFanDrawMode));else if(Te.mode===he.LINES)Ve=new h.LineSegments(Ae,Tt);else if(Te.mode===he.LINE_STRIP)Ve=new h.Line(Ae,Tt);else if(Te.mode===he.LINE_LOOP)Ve=new h.LineLoop(Ae,Tt);else if(Te.mode===he.POINTS)Ve=new h.Points(Ae,Tt);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+Te.mode);Object.keys(Ve.geometry.morphAttributes).length>0&&Ct(Ve,Be),Ve.name=me.createUniqueName(Be.name||"mesh_"+ye),ct(Ve,Be),Te.extensions&&It(Se,Ve,Te),me.assignFinalMaterial(Ve),le.push(Ve)}for(let Z=0,Ie=le.length;Z<Ie;Z++)me.associations.set(le[Z],{meshes:ye,primitives:Z});if(le.length===1)return le[0];const Q=new h.Group;me.associations.set(Q,{meshes:ye});for(let Z=0,Ie=le.length;Z<Ie;Z++)Q.add(le[Z]);return Q})}loadCamera(ye){let me;const Re=this.json.cameras[ye],Se=Re[Re.type];if(!Se){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return Re.type==="perspective"?me=new h.PerspectiveCamera(h.MathUtils.radToDeg(Se.yfov),Se.aspectRatio||1,Se.znear||1,Se.zfar||2e6):Re.type==="orthographic"&&(me=new h.OrthographicCamera(-Se.xmag,Se.xmag,Se.ymag,-Se.ymag,Se.znear,Se.zfar)),Re.name&&(me.name=this.createUniqueName(Re.name)),ct(me,Re),Promise.resolve(me)}loadSkin(ye){const me=this.json.skins[ye],Re=[];for(let Se=0,Be=me.joints.length;Se<Be;Se++)Re.push(this.getDependency("node",me.joints[Se]));return me.inverseBindMatrices!==void 0?Re.push(this.getDependency("accessor",me.inverseBindMatrices)):Re.push(null),Promise.all(Re).then(function(Se){const Be=Se.pop(),Ee=Se,Xe=[],fe=[];for(let Oe=0,$e=Ee.length;Oe<$e;Oe++){const le=Ee[Oe];if(le){Xe.push(le);const Q=new h.Matrix4;Be!==null&&Q.fromArray(Be.array,Oe*16),fe.push(Q)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',me.joints[Oe])}return new h.Skeleton(Xe,fe)})}loadAnimation(ye){const Re=this.json.animations[ye],Se=[],Be=[],Ee=[],Xe=[],fe=[];for(let Oe=0,$e=Re.channels.length;Oe<$e;Oe++){const le=Re.channels[Oe],Q=Re.samplers[le.sampler],Z=le.target,Ie=Z.node,Ae=Re.parameters!==void 0?Re.parameters[Q.input]:Q.input,Te=Re.parameters!==void 0?Re.parameters[Q.output]:Q.output;Se.push(this.getDependency("node",Ie)),Be.push(this.getDependency("accessor",Ae)),Ee.push(this.getDependency("accessor",Te)),Xe.push(Q),fe.push(Z)}return Promise.all([Promise.all(Se),Promise.all(Be),Promise.all(Ee),Promise.all(Xe),Promise.all(fe)]).then(function(Oe){const $e=Oe[0],le=Oe[1],Q=Oe[2],Z=Oe[3],Ie=Oe[4],Ae=[];for(let Ve=0,Tt=$e.length;Ve<Tt;Ve++){const Ht=$e[Ve],nn=le[Ve],cn=Q[Ve],Xn=Z[Ve],cr=Ie[Ve];if(Ht===void 0)continue;Ht.updateMatrix();let Ni;switch(He[cr.path]){case He.weights:Ni=h.NumberKeyframeTrack;break;case He.rotation:Ni=h.QuaternionKeyframeTrack;break;case He.position:case He.scale:default:Ni=h.VectorKeyframeTrack;break}const or=Ht.name?Ht.name:Ht.uuid,bi=Xn.interpolation!==void 0?Ot[Xn.interpolation]:h.InterpolateLinear,vn=[];He[cr.path]===He.weights?Ht.traverse(function(ln){ln.morphTargetInfluences&&vn.push(ln.name?ln.name:ln.uuid)}):vn.push(or);let Nt=cn.array;if(cn.normalized){const ln=un(Nt.constructor),ei=new Float32Array(Nt.length);for(let yn=0,De=Nt.length;yn<De;yn++)ei[yn]=Nt[yn]*ln;Nt=ei}for(let ln=0,ei=vn.length;ln<ei;ln++){const yn=new Ni(vn[ln]+"."+He[cr.path],nn.array,Nt,bi);Xn.interpolation==="CUBICSPLINE"&&(yn.createInterpolant=function(st){const At=this instanceof h.QuaternionKeyframeTrack?ce:X;return new At(this.times,this.values,this.getValueSize()/3,st)},yn.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),Ae.push(yn)}}const Te=Re.name?Re.name:"animation_"+ye;return new h.AnimationClip(Te,void 0,Ae)})}createNodeMesh(ye){const me=this.json,Re=this,Se=me.nodes[ye];return Se.mesh===void 0?null:Re.getDependency("mesh",Se.mesh).then(function(Be){const Ee=Re._getNodeRef(Re.meshCache,Se.mesh,Be);return Se.weights!==void 0&&Ee.traverse(function(Xe){if(Xe.isMesh)for(let fe=0,Oe=Se.weights.length;fe<Oe;fe++)Xe.morphTargetInfluences[fe]=Se.weights[fe]}),Ee})}loadNode(ye){const me=this.json,Re=this.extensions,Se=this,Be=me.nodes[ye],Ee=Be.name?Se.createUniqueName(Be.name):"";return function(){const Xe=[],fe=Se._invokeOne(function(Oe){return Oe.createNodeMesh&&Oe.createNodeMesh(ye)});return fe&&Xe.push(fe),Be.camera!==void 0&&Xe.push(Se.getDependency("camera",Be.camera).then(function(Oe){return Se._getNodeRef(Se.cameraCache,Be.camera,Oe)})),Se._invokeAll(function(Oe){return Oe.createNodeAttachment&&Oe.createNodeAttachment(ye)}).forEach(function(Oe){Xe.push(Oe)}),Promise.all(Xe)}().then(function(Xe){let fe;if(Be.isBone===!0?fe=new h.Bone:Xe.length>1?fe=new h.Group:Xe.length===1?fe=Xe[0]:fe=new h.Object3D,fe!==Xe[0])for(let Oe=0,$e=Xe.length;Oe<$e;Oe++)fe.add(Xe[Oe]);if(Be.name&&(fe.userData.name=Be.name,fe.name=Ee),ct(fe,Be),Be.extensions&&It(Re,fe,Be),Be.matrix!==void 0){const Oe=new h.Matrix4;Oe.fromArray(Be.matrix),fe.applyMatrix4(Oe)}else Be.translation!==void 0&&fe.position.fromArray(Be.translation),Be.rotation!==void 0&&fe.quaternion.fromArray(Be.rotation),Be.scale!==void 0&&fe.scale.fromArray(Be.scale);return Se.associations.has(fe)||Se.associations.set(fe,{}),Se.associations.get(fe).nodes=ye,fe})}loadScene(ye){const me=this.json,Re=this.extensions,Se=this.json.scenes[ye],Be=this,Ee=new h.Group;Se.name&&(Ee.name=Be.createUniqueName(Se.name)),ct(Ee,Se),Se.extensions&&It(Re,Ee,Se);const Xe=Se.nodes||[],fe=[];for(let Oe=0,$e=Xe.length;Oe<$e;Oe++)fe.push(Bn(Xe[Oe],Ee,me,Be));return Promise.all(fe).then(function(){const Oe=$e=>{const le=new Map;for(const[Q,Z]of Be.associations)(Q instanceof h.Material||Q instanceof h.Texture)&&le.set(Q,Z);return $e.traverse(Q=>{const Z=Be.associations.get(Q);Z!=null&&le.set(Q,Z)}),le};return Be.associations=Oe(Ee),Ee})}}function Bn(qe,ye,me,Re){const Se=me.nodes[qe];return Re.getDependency("node",qe).then(function(Be){return Se.skin===void 0?Be:Re.getDependency("skin",Se.skin).then(function(Ee){return Be.traverse(function(Xe){Xe.isSkinnedMesh&&Xe.bind(Ee,Xe.matrixWorld)}),Be})}).then(function(Be){ye.add(Be);const Ee=[];if(Se.children){const Xe=Se.children;for(let fe=0,Oe=Xe.length;fe<Oe;fe++){const $e=Xe[fe];Ee.push(Bn($e,Be,me,Re))}}return Promise.all(Ee)})}function ci(qe,ye,me){const Re=ye.attributes,Se=new h.Box3;if(Re.POSITION!==void 0){const Xe=me.json.accessors[Re.POSITION],fe=Xe.min,Oe=Xe.max;if(fe!==void 0&&Oe!==void 0){if(Se.set(new h.Vector3(fe[0],fe[1],fe[2]),new h.Vector3(Oe[0],Oe[1],Oe[2])),Xe.normalized){const $e=un(xe[Xe.componentType]);Se.min.multiplyScalar($e),Se.max.multiplyScalar($e)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const Be=ye.targets;if(Be!==void 0){const Xe=new h.Vector3,fe=new h.Vector3;for(let Oe=0,$e=Be.length;Oe<$e;Oe++){const le=Be[Oe];if(le.POSITION!==void 0){const Q=me.json.accessors[le.POSITION],Z=Q.min,Ie=Q.max;if(Z!==void 0&&Ie!==void 0){if(fe.setX(Math.max(Math.abs(Z[0]),Math.abs(Ie[0]))),fe.setY(Math.max(Math.abs(Z[1]),Math.abs(Ie[1]))),fe.setZ(Math.max(Math.abs(Z[2]),Math.abs(Ie[2]))),Q.normalized){const Ae=un(xe[Q.componentType]);fe.multiplyScalar(Ae)}Xe.max(fe)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}Se.expandByVector(Xe)}qe.boundingBox=Se;const Ee=new h.Sphere;Se.getCenter(Ee.center),Ee.radius=Se.min.distanceTo(Se.max)/2,qe.boundingSphere=Ee}function ze(qe,ye,me){const Re=ye.attributes,Se=[];function Be(Ee,Xe){return me.getDependency("accessor",Ee).then(function(fe){qe.setAttribute(Xe,fe)})}for(const Ee in Re){const Xe=rt[Ee]||Ee.toLowerCase();Xe in qe.attributes||Se.push(Be(Re[Ee],Xe))}if(ye.indices!==void 0&&!qe.index){const Ee=me.getDependency("accessor",ye.indices).then(function(Xe){qe.setIndex(Xe)});Se.push(Ee)}return ct(qe,ye),ci(qe,ye,me),Promise.all(Se).then(function(){return ye.targets!==void 0?ut(qe,ye.targets,me):qe})}function Pe(qe,ye){let me=qe.getIndex();if(me===null){const Ee=[],Xe=qe.getAttribute("position");if(Xe!==void 0){for(let fe=0;fe<Xe.count;fe++)Ee.push(fe);qe.setIndex(Ee),me=qe.getIndex()}else return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),qe}const Re=me.count-2,Se=[];if(ye===h.TriangleFanDrawMode)for(let Ee=1;Ee<=Re;Ee++)Se.push(me.getX(0)),Se.push(me.getX(Ee)),Se.push(me.getX(Ee+1));else for(let Ee=0;Ee<Re;Ee++)Ee%2===0?(Se.push(me.getX(Ee)),Se.push(me.getX(Ee+1)),Se.push(me.getX(Ee+2))):(Se.push(me.getX(Ee+2)),Se.push(me.getX(Ee+1)),Se.push(me.getX(Ee)));Se.length/3!==Re&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const Be=qe.clone();return Be.setIndex(Se),Be}},"./node_modules/super-three/examples/jsm/loaders/KTX2Loader.js":(l,d,c)=>{c.r(d),c.d(d,{KTX2Loader:()=>C});var h=c("./node_modules/super-three/build/three.module.js"),m=c("./node_modules/super-three/examples/jsm/utils/WorkerPool.js"),p=c("./node_modules/super-three/examples/jsm/libs/ktx-parse.module.js"),A=c("./node_modules/super-three/examples/jsm/libs/zstddec.module.js");const v=new WeakMap;let y=0,x;class C extends h.Loader{constructor(P){super(P),this.transcoderPath="",this.transcoderBinary=null,this.transcoderPending=null,this.workerPool=new m.WorkerPool,this.workerSourceURL="",this.workerConfig=null,typeof MSC_TRANSCODER<"u"&&console.warn('THREE.KTX2Loader: Please update to latest "basis_transcoder". "msc_basis_transcoder" is no longer supported in three.js r125+.')}setTranscoderPath(P){return this.transcoderPath=P,this}setWorkerLimit(P){return this.workerPool.setWorkerLimit(P),this}detectSupport(P){return this.workerConfig={astcSupported:P.extensions.has("WEBGL_compressed_texture_astc"),etc1Supported:P.extensions.has("WEBGL_compressed_texture_etc1"),etc2Supported:P.extensions.has("WEBGL_compressed_texture_etc"),dxtSupported:P.extensions.has("WEBGL_compressed_texture_s3tc"),bptcSupported:P.extensions.has("EXT_texture_compression_bptc"),pvrtcSupported:P.extensions.has("WEBGL_compressed_texture_pvrtc")||P.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")},P.capabilities.isWebGL2&&(this.workerConfig.etc1Supported=!1),this}init(){if(!this.transcoderPending){const P=new h.FileLoader(this.manager);P.setPath(this.transcoderPath),P.setWithCredentials(this.withCredentials);const O=P.loadAsync("basis_transcoder.js"),D=new h.FileLoader(this.manager);D.setPath(this.transcoderPath),D.setResponseType("arraybuffer"),D.setWithCredentials(this.withCredentials);const L=D.loadAsync("basis_transcoder.wasm");this.transcoderPending=Promise.all([O,L]).then(([N,H])=>{const J=C.BasisWorker.toString(),K=["/* constants */","let _EngineFormat = "+JSON.stringify(C.EngineFormat),"let _TranscoderFormat = "+JSON.stringify(C.TranscoderFormat),"let _BasisFormat = "+JSON.stringify(C.BasisFormat),"/* basis_transcoder.js */",N,"/* worker */",J.substring(J.indexOf("{")+1,J.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([K])),this.transcoderBinary=H,this.workerPool.setWorkerCreator(()=>{const se=new Worker(this.workerSourceURL),ae=this.transcoderBinary.slice(0);return se.postMessage({type:"init",config:this.workerConfig,transcoderBinary:ae},[ae]),se})}),y>0&&console.warn("THREE.KTX2Loader: Multiple active KTX2 loaders may cause performance issues. Use a single KTX2Loader instance, or call .dispose() on old instances."),y++}return this.transcoderPending}load(P,O,D,L){if(this.workerConfig===null)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");const N=new h.FileLoader(this.manager);N.setResponseType("arraybuffer"),N.setWithCredentials(this.withCredentials),N.load(P,H=>{if(v.has(H))return v.get(H).promise.then(O).catch(L);this._createTexture(H).then(J=>O?O(J):null).catch(L)},D,L)}_createTextureFrom(P,O){const{mipmaps:D,width:L,height:N,format:H,type:J,error:K,dfdTransferFn:se,dfdFlags:ae}=P;if(J==="error")return Promise.reject(K);const ee=O.layerCount>1?new h.CompressedArrayTexture(D,L,N,O.layerCount,H,h.UnsignedByteType):new h.CompressedTexture(D,L,N,H,h.UnsignedByteType);return ee.minFilter=D.length===1?h.LinearFilter:h.LinearMipmapLinearFilter,ee.magFilter=h.LinearFilter,ee.generateMipmaps=!1,ee.needsUpdate=!0,ee.encoding=se===p.KHR_DF_TRANSFER_SRGB?h.sRGBEncoding:h.LinearEncoding,ee.premultiplyAlpha=!!(ae&p.KHR_DF_FLAG_ALPHA_PREMULTIPLIED),ee}async _createTexture(P,O={}){const D=(0,p.read)(new Uint8Array(P));if(D.vkFormat!==p.VK_FORMAT_UNDEFINED)return S(D);const L=O,N=this.init().then(()=>this.workerPool.postMessage({type:"transcode",buffer:P,taskConfig:L},[P])).then(H=>this._createTextureFrom(H.data,D));return v.set(P,{promise:N}),N}dispose(){return this.workerPool.dispose(),this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),y--,this}}C.BasisFormat={ETC1S:0,UASTC_4x4:1},C.TranscoderFormat={ETC1:0,ETC2:1,BC1:2,BC3:3,BC4:4,BC5:5,BC7_M6_OPAQUE_ONLY:6,BC7_M5:7,PVRTC1_4_RGB:8,PVRTC1_4_RGBA:9,ASTC_4x4:10,ATC_RGB:11,ATC_RGBA_INTERPOLATED_ALPHA:12,RGBA32:13,RGB565:14,BGR565:15,RGBA4444:16},C.EngineFormat={RGBAFormat:h.RGBAFormat,RGBA_ASTC_4x4_Format:h.RGBA_ASTC_4x4_Format,RGBA_BPTC_Format:h.RGBA_BPTC_Format,RGBA_ETC2_EAC_Format:h.RGBA_ETC2_EAC_Format,RGBA_PVRTC_4BPPV1_Format:h.RGBA_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT5_Format:h.RGBA_S3TC_DXT5_Format,RGB_ETC1_Format:h.RGB_ETC1_Format,RGB_ETC2_Format:h.RGB_ETC2_Format,RGB_PVRTC_4BPPV1_Format:h.RGB_PVRTC_4BPPV1_Format,RGB_S3TC_DXT1_Format:h.RGB_S3TC_DXT1_Format},C.BasisWorker=function(){let R,P,O;const D=_EngineFormat,L=_TranscoderFormat,N=_BasisFormat;self.addEventListener("message",function(W){const ce=W.data;switch(ce.type){case"init":R=ce.config,H(ce.transcoderBinary);break;case"transcode":P.then(()=>{try{const{width:he,height:xe,hasAlpha:ve,mipmaps:Fe,format:je,dfdTransferFn:rt,dfdFlags:He}=J(ce.buffer),Ot=[];for(let xt=0;xt<Fe.length;++xt)Ot.push(Fe[xt].data.buffer);self.postMessage({type:"transcode",id:ce.id,width:he,height:xe,hasAlpha:ve,mipmaps:Fe,format:je,dfdTransferFn:rt,dfdFlags:He},Ot)}catch(he){console.error(he),self.postMessage({type:"error",id:ce.id,error:he.message})}});break}});function H(W){P=new Promise(ce=>{O={wasmBinary:W,onRuntimeInitialized:ce},BASIS(O)}).then(()=>{O.initializeBasis(),O.KTX2File===void 0&&console.warn("THREE.KTX2Loader: Please update Basis Universal transcoder.")})}function J(W){const ce=new O.KTX2File(new Uint8Array(W));function he(){ce.close(),ce.delete()}if(!ce.isValid())throw he(),new Error("THREE.KTX2Loader:	Invalid or unsupported .ktx2 file");const xe=ce.isUASTC()?N.UASTC_4x4:N.ETC1S,ve=ce.getWidth(),Fe=ce.getHeight(),je=ce.getLayers()||1,rt=ce.getLevels(),He=ce.getHasAlpha(),Ot=ce.getDFDTransferFunc(),xt=ce.getDFDFlags(),{transcoderFormat:gt,engineFormat:It}=ee(xe,ve,Fe,He);if(!ve||!Fe||!rt)throw he(),new Error("THREE.KTX2Loader:	Invalid texture");if(!ce.startTranscoding())throw he(),new Error("THREE.KTX2Loader: .startTranscoding failed");const ct=[];for(let ut=0;ut<rt;ut++){const Ct=[];let qt,Ft;for(let un=0;un<je;un++){const fn=ce.getImageLevelInfo(ut,un,0);qt=fn.origWidth,Ft=fn.origHeight;const An=new Uint8Array(ce.getImageTranscodedSizeInBytes(ut,un,0,gt));if(!ce.transcodeImage(An,ut,un,0,gt,0,-1,-1))throw he(),new Error("THREE.KTX2Loader: .transcodeImage failed.");Ct.push(An)}ct.push({data:X(Ct),width:qt,height:Ft})}return he(),{width:ve,height:Fe,hasAlpha:He,mipmaps:ct,format:It,dfdTransferFn:Ot,dfdFlags:xt}}const K=[{if:"astcSupported",basisFormat:[N.UASTC_4x4],transcoderFormat:[L.ASTC_4x4,L.ASTC_4x4],engineFormat:[D.RGBA_ASTC_4x4_Format,D.RGBA_ASTC_4x4_Format],priorityETC1S:1/0,priorityUASTC:1,needsPowerOfTwo:!1},{if:"bptcSupported",basisFormat:[N.ETC1S,N.UASTC_4x4],transcoderFormat:[L.BC7_M5,L.BC7_M5],engineFormat:[D.RGBA_BPTC_Format,D.RGBA_BPTC_Format],priorityETC1S:3,priorityUASTC:2,needsPowerOfTwo:!1},{if:"dxtSupported",basisFormat:[N.ETC1S,N.UASTC_4x4],transcoderFormat:[L.BC1,L.BC3],engineFormat:[D.RGB_S3TC_DXT1_Format,D.RGBA_S3TC_DXT5_Format],priorityETC1S:4,priorityUASTC:5,needsPowerOfTwo:!1},{if:"etc2Supported",basisFormat:[N.ETC1S,N.UASTC_4x4],transcoderFormat:[L.ETC1,L.ETC2],engineFormat:[D.RGB_ETC2_Format,D.RGBA_ETC2_EAC_Format],priorityETC1S:1,priorityUASTC:3,needsPowerOfTwo:!1},{if:"etc1Supported",basisFormat:[N.ETC1S,N.UASTC_4x4],transcoderFormat:[L.ETC1],engineFormat:[D.RGB_ETC1_Format],priorityETC1S:2,priorityUASTC:4,needsPowerOfTwo:!1},{if:"pvrtcSupported",basisFormat:[N.ETC1S,N.UASTC_4x4],transcoderFormat:[L.PVRTC1_4_RGB,L.PVRTC1_4_RGBA],engineFormat:[D.RGB_PVRTC_4BPPV1_Format,D.RGBA_PVRTC_4BPPV1_Format],priorityETC1S:5,priorityUASTC:6,needsPowerOfTwo:!0}],se=K.sort(function(W,ce){return W.priorityETC1S-ce.priorityETC1S}),ae=K.sort(function(W,ce){return W.priorityUASTC-ce.priorityUASTC});function ee(W,ce,he,xe){let ve,Fe;const je=W===N.ETC1S?se:ae;for(let rt=0;rt<je.length;rt++){const He=je[rt];if(R[He.if]&&He.basisFormat.includes(W)&&!(xe&&He.transcoderFormat.length<2)&&!(He.needsPowerOfTwo&&!(ne(ce)&&ne(he))))return ve=He.transcoderFormat[xe?1:0],Fe=He.engineFormat[xe?1:0],{transcoderFormat:ve,engineFormat:Fe}}return console.warn("THREE.KTX2Loader: No suitable compressed texture format found. Decoding to RGBA32."),ve=L.RGBA32,Fe=D.RGBAFormat,{transcoderFormat:ve,engineFormat:Fe}}function ne(W){return W<=2?!0:(W&W-1)===0&&W!==0}function X(W){let ce=0;for(const ve of W)ce+=ve.byteLength;const he=new Uint8Array(ce);let xe=0;for(const ve of W)he.set(ve,xe),xe+=ve.byteLength;return he}};const g={[p.VK_FORMAT_R32G32B32A32_SFLOAT]:h.RGBAFormat,[p.VK_FORMAT_R16G16B16A16_SFLOAT]:h.RGBAFormat,[p.VK_FORMAT_R8G8B8A8_UNORM]:h.RGBAFormat,[p.VK_FORMAT_R8G8B8A8_SRGB]:h.RGBAFormat,[p.VK_FORMAT_R32G32_SFLOAT]:h.RGFormat,[p.VK_FORMAT_R16G16_SFLOAT]:h.RGFormat,[p.VK_FORMAT_R8G8_UNORM]:h.RGFormat,[p.VK_FORMAT_R8G8_SRGB]:h.RGFormat,[p.VK_FORMAT_R32_SFLOAT]:h.RedFormat,[p.VK_FORMAT_R16_SFLOAT]:h.RedFormat,[p.VK_FORMAT_R8_SRGB]:h.RedFormat,[p.VK_FORMAT_R8_UNORM]:h.RedFormat},b={[p.VK_FORMAT_R32G32B32A32_SFLOAT]:h.FloatType,[p.VK_FORMAT_R16G16B16A16_SFLOAT]:h.HalfFloatType,[p.VK_FORMAT_R8G8B8A8_UNORM]:h.UnsignedByteType,[p.VK_FORMAT_R8G8B8A8_SRGB]:h.UnsignedByteType,[p.VK_FORMAT_R32G32_SFLOAT]:h.FloatType,[p.VK_FORMAT_R16G16_SFLOAT]:h.HalfFloatType,[p.VK_FORMAT_R8G8_UNORM]:h.UnsignedByteType,[p.VK_FORMAT_R8G8_SRGB]:h.UnsignedByteType,[p.VK_FORMAT_R32_SFLOAT]:h.FloatType,[p.VK_FORMAT_R16_SFLOAT]:h.HalfFloatType,[p.VK_FORMAT_R8_SRGB]:h.UnsignedByteType,[p.VK_FORMAT_R8_UNORM]:h.UnsignedByteType},_={[p.VK_FORMAT_R8G8B8A8_SRGB]:h.sRGBEncoding,[p.VK_FORMAT_R8G8_SRGB]:h.sRGBEncoding,[p.VK_FORMAT_R8_SRGB]:h.sRGBEncoding};async function S(R){const{vkFormat:P,pixelWidth:O,pixelHeight:D,pixelDepth:L}=R;if(g[P]===void 0)throw new Error("THREE.KTX2Loader: Unsupported vkFormat.");const N=R.levels[0];let H,J;if(R.supercompressionScheme===p.KHR_SUPERCOMPRESSION_NONE)H=N.levelData;else if(R.supercompressionScheme===p.KHR_SUPERCOMPRESSION_ZSTD)x||(x=new Promise(async se=>{const ae=new A.ZSTDDecoder;await ae.init(),se(ae)})),H=(await x).decode(N.levelData,N.uncompressedByteLength);else throw new Error("THREE.KTX2Loader: Unsupported supercompressionScheme.");b[P]===h.FloatType?J=new Float32Array(H.buffer,H.byteOffset,H.byteLength/Float32Array.BYTES_PER_ELEMENT):b[P]===h.HalfFloatType?J=new Uint16Array(H.buffer,H.byteOffset,H.byteLength/Uint16Array.BYTES_PER_ELEMENT):J=H;const K=L===0?new h.DataTexture(J,O,D):new h.Data3DTexture(J,O,D,L);return K.type=b[P],K.format=g[P],K.encoding=_[P]||h.LinearEncoding,K.needsUpdate=!0,Promise.resolve(K)}},"./node_modules/super-three/examples/jsm/loaders/MTLLoader.js":(l,d,c)=>{c.r(d),c.d(d,{MTLLoader:()=>m});var h=c("./node_modules/super-three/build/three.module.js");class m extends h.Loader{constructor(v){super(v)}load(v,y,x,C){const g=this,b=this.path===""?h.LoaderUtils.extractUrlBase(v):this.path,_=new h.FileLoader(this.manager);_.setPath(this.path),_.setRequestHeader(this.requestHeader),_.setWithCredentials(this.withCredentials),_.load(v,function(S){try{y(g.parse(S,b))}catch(R){C?C(R):console.error(R),g.manager.itemError(v)}},x,C)}setMaterialOptions(v){return this.materialOptions=v,this}parse(v,y){const x=v.split(`
`);let C={};const g=/\s+/,b={};for(let S=0;S<x.length;S++){let R=x[S];if(R=R.trim(),R.length===0||R.charAt(0)==="#")continue;const P=R.indexOf(" ");let O=P>=0?R.substring(0,P):R;O=O.toLowerCase();let D=P>=0?R.substring(P+1):"";if(D=D.trim(),O==="newmtl")C={name:D},b[D]=C;else if(O==="ka"||O==="kd"||O==="ks"||O==="ke"){const L=D.split(g,3);C[O]=[parseFloat(L[0]),parseFloat(L[1]),parseFloat(L[2])]}else C[O]=D}const _=new p(this.resourcePath||y,this.materialOptions);return _.setCrossOrigin(this.crossOrigin),_.setManager(this.manager),_.setMaterials(b),_}}class p{constructor(v="",y={}){this.baseUrl=v,this.options=y,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.crossOrigin="anonymous",this.side=this.options.side!==void 0?this.options.side:h.FrontSide,this.wrap=this.options.wrap!==void 0?this.options.wrap:h.RepeatWrapping}setCrossOrigin(v){return this.crossOrigin=v,this}setManager(v){this.manager=v}setMaterials(v){this.materialsInfo=this.convert(v),this.materials={},this.materialsArray=[],this.nameLookup={}}convert(v){if(!this.options)return v;const y={};for(const x in v){const C=v[x],g={};y[x]=g;for(const b in C){let _=!0,S=C[b];const R=b.toLowerCase();switch(R){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(S=[S[0]/255,S[1]/255,S[2]/255]),this.options&&this.options.ignoreZeroRGBs&&S[0]===0&&S[1]===0&&S[2]===0&&(_=!1);break}_&&(g[R]=S)}}return y}preload(){for(const v in this.materialsInfo)this.create(v)}getIndex(v){return this.nameLookup[v]}getAsArray(){let v=0;for(const y in this.materialsInfo)this.materialsArray[v]=this.create(y),this.nameLookup[y]=v,v++;return this.materialsArray}create(v){return this.materials[v]===void 0&&this.createMaterial_(v),this.materials[v]}createMaterial_(v){const y=this,x=this.materialsInfo[v],C={name:v,side:this.side};function g(_,S){return typeof S!="string"||S===""?"":/^https?:\/\//i.test(S)?S:_+S}function b(_,S){if(C[_])return;const R=y.getTextureParams(S,C),P=y.loadTexture(g(y.baseUrl,R.url));P.repeat.copy(R.scale),P.offset.copy(R.offset),P.wrapS=y.wrap,P.wrapT=y.wrap,(_==="map"||_==="emissiveMap")&&(P.encoding=h.sRGBEncoding),C[_]=P}for(const _ in x){const S=x[_];let R;if(S!=="")switch(_.toLowerCase()){case"kd":C.color=new h.Color().fromArray(S).convertSRGBToLinear();break;case"ks":C.specular=new h.Color().fromArray(S).convertSRGBToLinear();break;case"ke":C.emissive=new h.Color().fromArray(S).convertSRGBToLinear();break;case"map_kd":b("map",S);break;case"map_ks":b("specularMap",S);break;case"map_ke":b("emissiveMap",S);break;case"norm":b("normalMap",S);break;case"map_bump":case"bump":b("bumpMap",S);break;case"map_d":b("alphaMap",S),C.transparent=!0;break;case"ns":C.shininess=parseFloat(S);break;case"d":R=parseFloat(S),R<1&&(C.opacity=R,C.transparent=!0);break;case"tr":R=parseFloat(S),this.options&&this.options.invertTrProperty&&(R=1-R),R>0&&(C.opacity=1-R,C.transparent=!0);break}}return this.materials[v]=new h.MeshPhongMaterial(C),this.materials[v]}getTextureParams(v,y){const x={scale:new h.Vector2(1,1),offset:new h.Vector2(0,0)},C=v.split(/\s+/);let g;return g=C.indexOf("-bm"),g>=0&&(y.bumpScale=parseFloat(C[g+1]),C.splice(g,2)),g=C.indexOf("-s"),g>=0&&(x.scale.set(parseFloat(C[g+1]),parseFloat(C[g+2])),C.splice(g,4)),g=C.indexOf("-o"),g>=0&&(x.offset.set(parseFloat(C[g+1]),parseFloat(C[g+2])),C.splice(g,4)),x.url=C.join(" ").trim(),x}loadTexture(v,y,x,C,g){const b=this.manager!==void 0?this.manager:h.DefaultLoadingManager;let _=b.getHandler(v);_===null&&(_=new h.TextureLoader(b)),_.setCrossOrigin&&_.setCrossOrigin(this.crossOrigin);const S=_.load(v,x,C,g);return y!==void 0&&(S.mapping=y),S}}},"./node_modules/super-three/examples/jsm/loaders/OBJLoader.js":(l,d,c)=>{c.r(d),c.d(d,{OBJLoader:()=>P});var h=c("./node_modules/super-three/build/three.module.js");const m=/^[og]\s*(.+)?/,p=/^mtllib /,A=/^usemtl /,v=/^usemap /,y=/\s+/,x=new h.Vector3,C=new h.Vector3,g=new h.Vector3,b=new h.Vector3,_=new h.Vector3,S=new h.Color;function R(){const O={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(D,L){if(this.object&&this.object.fromDeclaration===!1){this.object.name=D,this.object.fromDeclaration=L!==!1;return}const N=this.object&&typeof this.object.currentMaterial=="function"?this.object.currentMaterial():void 0;if(this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0),this.object={name:D||"",fromDeclaration:L!==!1,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(H,J){const K=this._finalize(!1);K&&(K.inherited||K.groupCount<=0)&&this.materials.splice(K.index,1);const se={index:this.materials.length,name:H||"",mtllib:Array.isArray(J)&&J.length>0?J[J.length-1]:"",smooth:K!==void 0?K.smooth:this.smooth,groupStart:K!==void 0?K.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(ae){const ee={index:typeof ae=="number"?ae:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return ee.clone=this.clone.bind(ee),ee}};return this.materials.push(se),se},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(H){const J=this.currentMaterial();if(J&&J.groupEnd===-1&&(J.groupEnd=this.geometry.vertices.length/3,J.groupCount=J.groupEnd-J.groupStart,J.inherited=!1),H&&this.materials.length>1)for(let K=this.materials.length-1;K>=0;K--)this.materials[K].groupCount<=0&&this.materials.splice(K,1);return H&&this.materials.length===0&&this.materials.push({name:"",smooth:this.smooth}),J}},N&&N.name&&typeof N.clone=="function"){const H=N.clone(0);H.inherited=!0,this.object.materials.push(H)}this.objects.push(this.object)},finalize:function(){this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0)},parseVertexIndex:function(D,L){const N=parseInt(D,10);return(N>=0?N-1:N+L/3)*3},parseNormalIndex:function(D,L){const N=parseInt(D,10);return(N>=0?N-1:N+L/3)*3},parseUVIndex:function(D,L){const N=parseInt(D,10);return(N>=0?N-1:N+L/2)*2},addVertex:function(D,L,N){const H=this.vertices,J=this.object.geometry.vertices;J.push(H[D+0],H[D+1],H[D+2]),J.push(H[L+0],H[L+1],H[L+2]),J.push(H[N+0],H[N+1],H[N+2])},addVertexPoint:function(D){const L=this.vertices;this.object.geometry.vertices.push(L[D+0],L[D+1],L[D+2])},addVertexLine:function(D){const L=this.vertices;this.object.geometry.vertices.push(L[D+0],L[D+1],L[D+2])},addNormal:function(D,L,N){const H=this.normals,J=this.object.geometry.normals;J.push(H[D+0],H[D+1],H[D+2]),J.push(H[L+0],H[L+1],H[L+2]),J.push(H[N+0],H[N+1],H[N+2])},addFaceNormal:function(D,L,N){const H=this.vertices,J=this.object.geometry.normals;x.fromArray(H,D),C.fromArray(H,L),g.fromArray(H,N),_.subVectors(g,C),b.subVectors(x,C),_.cross(b),_.normalize(),J.push(_.x,_.y,_.z),J.push(_.x,_.y,_.z),J.push(_.x,_.y,_.z)},addColor:function(D,L,N){const H=this.colors,J=this.object.geometry.colors;H[D]!==void 0&&J.push(H[D+0],H[D+1],H[D+2]),H[L]!==void 0&&J.push(H[L+0],H[L+1],H[L+2]),H[N]!==void 0&&J.push(H[N+0],H[N+1],H[N+2])},addUV:function(D,L,N){const H=this.uvs,J=this.object.geometry.uvs;J.push(H[D+0],H[D+1]),J.push(H[L+0],H[L+1]),J.push(H[N+0],H[N+1])},addDefaultUV:function(){const D=this.object.geometry.uvs;D.push(0,0),D.push(0,0),D.push(0,0)},addUVLine:function(D){const L=this.uvs;this.object.geometry.uvs.push(L[D+0],L[D+1])},addFace:function(D,L,N,H,J,K,se,ae,ee){const ne=this.vertices.length;let X=this.parseVertexIndex(D,ne),W=this.parseVertexIndex(L,ne),ce=this.parseVertexIndex(N,ne);if(this.addVertex(X,W,ce),this.addColor(X,W,ce),se!==void 0&&se!==""){const he=this.normals.length;X=this.parseNormalIndex(se,he),W=this.parseNormalIndex(ae,he),ce=this.parseNormalIndex(ee,he),this.addNormal(X,W,ce)}else this.addFaceNormal(X,W,ce);if(H!==void 0&&H!==""){const he=this.uvs.length;X=this.parseUVIndex(H,he),W=this.parseUVIndex(J,he),ce=this.parseUVIndex(K,he),this.addUV(X,W,ce),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(D){this.object.geometry.type="Points";const L=this.vertices.length;for(let N=0,H=D.length;N<H;N++){const J=this.parseVertexIndex(D[N],L);this.addVertexPoint(J),this.addColor(J)}},addLineGeometry:function(D,L){this.object.geometry.type="Line";const N=this.vertices.length,H=this.uvs.length;for(let J=0,K=D.length;J<K;J++)this.addVertexLine(this.parseVertexIndex(D[J],N));for(let J=0,K=L.length;J<K;J++)this.addUVLine(this.parseUVIndex(L[J],H))}};return O.startObject("",!1),O}class P extends h.Loader{constructor(D){super(D),this.materials=null}load(D,L,N,H){const J=this,K=new h.FileLoader(this.manager);K.setPath(this.path),K.setRequestHeader(this.requestHeader),K.setWithCredentials(this.withCredentials),K.load(D,function(se){try{L(J.parse(se))}catch(ae){H?H(ae):console.error(ae),J.manager.itemError(D)}},N,H)}setMaterials(D){return this.materials=D,this}parse(D){const L=new R;D.indexOf(`\r
`)!==-1&&(D=D.replace(/\r\n/g,`
`)),D.indexOf(`\\
`)!==-1&&(D=D.replace(/\\\n/g,""));const N=D.split(`
`);let H=[];for(let se=0,ae=N.length;se<ae;se++){const ee=N[se].trimStart();if(ee.length===0)continue;const ne=ee.charAt(0);if(ne!=="#")if(ne==="v"){const X=ee.split(y);switch(X[0]){case"v":L.vertices.push(parseFloat(X[1]),parseFloat(X[2]),parseFloat(X[3])),X.length>=7?(S.setRGB(parseFloat(X[4]),parseFloat(X[5]),parseFloat(X[6])).convertSRGBToLinear(),L.colors.push(S.r,S.g,S.b)):L.colors.push(void 0,void 0,void 0);break;case"vn":L.normals.push(parseFloat(X[1]),parseFloat(X[2]),parseFloat(X[3]));break;case"vt":L.uvs.push(parseFloat(X[1]),parseFloat(X[2]));break}}else if(ne==="f"){const W=ee.slice(1).trim().split(y),ce=[];for(let xe=0,ve=W.length;xe<ve;xe++){const Fe=W[xe];if(Fe.length>0){const je=Fe.split("/");ce.push(je)}}const he=ce[0];for(let xe=1,ve=ce.length-1;xe<ve;xe++){const Fe=ce[xe],je=ce[xe+1];L.addFace(he[0],Fe[0],je[0],he[1],Fe[1],je[1],he[2],Fe[2],je[2])}}else if(ne==="l"){const X=ee.substring(1).trim().split(" ");let W=[];const ce=[];if(ee.indexOf("/")===-1)W=X;else for(let he=0,xe=X.length;he<xe;he++){const ve=X[he].split("/");ve[0]!==""&&W.push(ve[0]),ve[1]!==""&&ce.push(ve[1])}L.addLineGeometry(W,ce)}else if(ne==="p"){const W=ee.slice(1).trim().split(" ");L.addPointGeometry(W)}else if((H=m.exec(ee))!==null){const X=(" "+H[0].slice(1).trim()).slice(1);L.startObject(X)}else if(A.test(ee))L.object.startMaterial(ee.substring(7).trim(),L.materialLibraries);else if(p.test(ee))L.materialLibraries.push(ee.substring(7).trim());else if(v.test(ee))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if(ne==="s"){if(H=ee.split(" "),H.length>1){const W=H[1].trim().toLowerCase();L.object.smooth=W!=="0"&&W!=="off"}else L.object.smooth=!0;const X=L.object.currentMaterial();X&&(X.smooth=L.object.smooth)}else{if(ee==="\0")continue;console.warn('THREE.OBJLoader: Unexpected line: "'+ee+'"')}}L.finalize();const J=new h.Group;if(J.materialLibraries=[].concat(L.materialLibraries),!(L.objects.length===1&&L.objects[0].geometry.vertices.length===0)===!0)for(let se=0,ae=L.objects.length;se<ae;se++){const ee=L.objects[se],ne=ee.geometry,X=ee.materials,W=ne.type==="Line",ce=ne.type==="Points";let he=!1;if(ne.vertices.length===0)continue;const xe=new h.BufferGeometry;xe.setAttribute("position",new h.Float32BufferAttribute(ne.vertices,3)),ne.normals.length>0&&xe.setAttribute("normal",new h.Float32BufferAttribute(ne.normals,3)),ne.colors.length>0&&(he=!0,xe.setAttribute("color",new h.Float32BufferAttribute(ne.colors,3))),ne.hasUVIndices===!0&&xe.setAttribute("uv",new h.Float32BufferAttribute(ne.uvs,2));const ve=[];for(let je=0,rt=X.length;je<rt;je++){const He=X[je],Ot=He.name+"_"+He.smooth+"_"+he;let xt=L.materials[Ot];if(this.materials!==null){if(xt=this.materials.create(He.name),W&&xt&&!(xt instanceof h.LineBasicMaterial)){const gt=new h.LineBasicMaterial;h.Material.prototype.copy.call(gt,xt),gt.color.copy(xt.color),xt=gt}else if(ce&&xt&&!(xt instanceof h.PointsMaterial)){const gt=new h.PointsMaterial({size:10,sizeAttenuation:!1});h.Material.prototype.copy.call(gt,xt),gt.color.copy(xt.color),gt.map=xt.map,xt=gt}}xt===void 0&&(W?xt=new h.LineBasicMaterial:ce?xt=new h.PointsMaterial({size:1,sizeAttenuation:!1}):xt=new h.MeshPhongMaterial,xt.name=He.name,xt.flatShading=!He.smooth,xt.vertexColors=he,L.materials[Ot]=xt),ve.push(xt)}let Fe;if(ve.length>1){for(let je=0,rt=X.length;je<rt;je++){const He=X[je];xe.addGroup(He.groupStart,He.groupCount,je)}W?Fe=new h.LineSegments(xe,ve):ce?Fe=new h.Points(xe,ve):Fe=new h.Mesh(xe,ve)}else W?Fe=new h.LineSegments(xe,ve[0]):ce?Fe=new h.Points(xe,ve[0]):Fe=new h.Mesh(xe,ve[0]);Fe.name=ee.name,J.add(Fe)}else if(L.vertices.length>0){const se=new h.PointsMaterial({size:1,sizeAttenuation:!1}),ae=new h.BufferGeometry;ae.setAttribute("position",new h.Float32BufferAttribute(L.vertices,3)),L.colors.length>0&&L.colors[0]!==void 0&&(ae.setAttribute("color",new h.Float32BufferAttribute(L.colors,3)),se.vertexColors=!0);const ee=new h.Points(ae,se);J.add(ee)}return J}}},"./node_modules/super-three/examples/jsm/utils/BufferGeometryUtils.js":(l,d,c)=>{c.r(d),c.d(d,{computeMikkTSpaceTangents:()=>p,computeMorphedAttributes:()=>R,computeTangents:()=>m,deepCloneAttribute:()=>y,deinterleaveAttribute:()=>C,deinterleaveGeometry:()=>g,estimateBytesUsed:()=>b,interleaveAttributes:()=>x,mergeBufferAttributes:()=>v,mergeBufferGeometries:()=>A,mergeGroups:()=>P,mergeVertices:()=>_,toCreasedNormals:()=>O,toTrianglesDrawMode:()=>S});var h=c("./node_modules/super-three/build/three.module.js");function m(){throw new Error("BufferGeometryUtils: computeTangents renamed to computeMikkTSpaceTangents.")}function p(D,L,N=!0){if(!L||!L.isReady)throw new Error("BufferGeometryUtils: Initialized MikkTSpace library required.");if(!D.hasAttribute("position")||!D.hasAttribute("normal")||!D.hasAttribute("uv"))throw new Error('BufferGeometryUtils: Tangents require "position", "normal", and "uv" attributes.');function H(se){if(se.normalized||se.isInterleavedBufferAttribute){const ae=new Float32Array(se.getCount()*se.itemSize);for(let ee=0,ne=0;ee<se.getCount();ee++)ae[ne++]=se.getX(ee),ae[ne++]=se.getY(ee),se.itemSize>2&&(ae[ne++]=se.getZ(ee));return ae}return se.array instanceof Float32Array?se.array:new Float32Array(se.array)}const J=D.index?D.toNonIndexed():D,K=L.generateTangents(H(J.attributes.position),H(J.attributes.normal),H(J.attributes.uv));if(N)for(let se=3;se<K.length;se+=4)K[se]*=-1;return J.setAttribute("tangent",new h.BufferAttribute(K,4)),D!==J&&D.copy(J),D}function A(D,L=!1){const N=D[0].index!==null,H=new Set(Object.keys(D[0].attributes)),J=new Set(Object.keys(D[0].morphAttributes)),K={},se={},ae=D[0].morphTargetsRelative,ee=new h.BufferGeometry;let ne=0;for(let X=0;X<D.length;++X){const W=D[X];let ce=0;if(N!==(W.index!==null))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+X+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(const he in W.attributes){if(!H.has(he))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+X+'. All geometries must have compatible attributes; make sure "'+he+'" attribute exists among all geometries, or in none of them.'),null;K[he]===void 0&&(K[he]=[]),K[he].push(W.attributes[he]),ce++}if(ce!==H.size)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+X+". Make sure all geometries have the same number of attributes."),null;if(ae!==W.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+X+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(const he in W.morphAttributes){if(!J.has(he))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+X+".  .morphAttributes must be consistent throughout all geometries."),null;se[he]===void 0&&(se[he]=[]),se[he].push(W.morphAttributes[he])}if(L){let he;if(N)he=W.index.count;else if(W.attributes.position!==void 0)he=W.attributes.position.count;else return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+X+". The geometry must have either an index or a position attribute"),null;ee.addGroup(ne,he,X),ne+=he}}if(N){let X=0;const W=[];for(let ce=0;ce<D.length;++ce){const he=D[ce].index;for(let xe=0;xe<he.count;++xe)W.push(he.getX(xe)+X);X+=D[ce].attributes.position.count}ee.setIndex(W)}for(const X in K){const W=v(K[X]);if(!W)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+X+" attribute."),null;ee.setAttribute(X,W)}for(const X in se){const W=se[X][0].length;if(W===0)break;ee.morphAttributes=ee.morphAttributes||{},ee.morphAttributes[X]=[];for(let ce=0;ce<W;++ce){const he=[];for(let ve=0;ve<se[X].length;++ve)he.push(se[X][ve][ce]);const xe=v(he);if(!xe)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+X+" morphAttribute."),null;ee.morphAttributes[X].push(xe)}}return ee}function v(D){let L,N,H,J=0;for(let ae=0;ae<D.length;++ae){const ee=D[ae];if(ee.isInterleavedBufferAttribute)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. InterleavedBufferAttributes are not supported."),null;if(L===void 0&&(L=ee.array.constructor),L!==ee.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(N===void 0&&(N=ee.itemSize),N!==ee.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(H===void 0&&(H=ee.normalized),H!==ee.normalized)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;J+=ee.array.length}const K=new L(J);let se=0;for(let ae=0;ae<D.length;++ae)K.set(D[ae].array,se),se+=D[ae].array.length;return new h.BufferAttribute(K,N,H)}function y(D){return D.isInstancedInterleavedBufferAttribute||D.isInterleavedBufferAttribute?C(D):D.isInstancedBufferAttribute?new h.InstancedBufferAttribute().copy(D):new h.BufferAttribute().copy(D)}function x(D){let L,N=0,H=0;for(let ne=0,X=D.length;ne<X;++ne){const W=D[ne];if(L===void 0&&(L=W.array.constructor),L!==W.array.constructor)return console.error("AttributeBuffers of different types cannot be interleaved"),null;N+=W.array.length,H+=W.itemSize}const J=new h.InterleavedBuffer(new L(N),H);let K=0;const se=[],ae=["getX","getY","getZ","getW"],ee=["setX","setY","setZ","setW"];for(let ne=0,X=D.length;ne<X;ne++){const W=D[ne],ce=W.itemSize,he=W.count,xe=new h.InterleavedBufferAttribute(J,ce,K,W.normalized);se.push(xe),K+=ce;for(let ve=0;ve<he;ve++)for(let Fe=0;Fe<ce;Fe++)xe[ee[Fe]](ve,W[ae[Fe]](ve))}return se}function C(D){const L=D.data.array.constructor,N=D.count,H=D.itemSize,J=D.normalized,K=new L(N*H);let se;D.isInstancedInterleavedBufferAttribute?se=new h.InstancedBufferAttribute(K,H,J,D.meshPerAttribute):se=new h.BufferAttribute(K,H,J);for(let ae=0;ae<N;ae++)se.setX(ae,D.getX(ae)),H>=2&&se.setY(ae,D.getY(ae)),H>=3&&se.setZ(ae,D.getZ(ae)),H>=4&&se.setW(ae,D.getW(ae));return se}function g(D){const L=D.attributes,N=D.morphTargets,H=new Map;for(const J in L){const K=L[J];K.isInterleavedBufferAttribute&&(H.has(K)||H.set(K,C(K)),L[J]=H.get(K))}for(const J in N){const K=N[J];K.isInterleavedBufferAttribute&&(H.has(K)||H.set(K,C(K)),N[J]=H.get(K))}}function b(D){let L=0;for(const H in D.attributes){const J=D.getAttribute(H);L+=J.count*J.itemSize*J.array.BYTES_PER_ELEMENT}const N=D.getIndex();return L+=N?N.count*N.itemSize*N.array.BYTES_PER_ELEMENT:0,L}function _(D,L=1e-4){L=Math.max(L,Number.EPSILON);const N={},H=D.getIndex(),J=D.getAttribute("position"),K=H?H.count:J.count;let se=0;const ae=Object.keys(D.attributes),ee={},ne={},X=[],W=["getX","getY","getZ","getW"],ce=["setX","setY","setZ","setW"];for(let Fe=0,je=ae.length;Fe<je;Fe++){const rt=ae[Fe],He=D.attributes[rt];ee[rt]=new h.BufferAttribute(new He.array.constructor(He.count*He.itemSize),He.itemSize,He.normalized);const Ot=D.morphAttributes[rt];Ot&&(ne[rt]=new h.BufferAttribute(new Ot.array.constructor(Ot.count*Ot.itemSize),Ot.itemSize,Ot.normalized))}const he=Math.log10(1/L),xe=Math.pow(10,he);for(let Fe=0;Fe<K;Fe++){const je=H?H.getX(Fe):Fe;let rt="";for(let He=0,Ot=ae.length;He<Ot;He++){const xt=ae[He],gt=D.getAttribute(xt),It=gt.itemSize;for(let ct=0;ct<It;ct++)rt+=`${~~(gt[W[ct]](je)*xe)},`}if(rt in N)X.push(N[rt]);else{for(let He=0,Ot=ae.length;He<Ot;He++){const xt=ae[He],gt=D.getAttribute(xt),It=D.morphAttributes[xt],ct=gt.itemSize,ut=ee[xt],Ct=ne[xt];for(let qt=0;qt<ct;qt++){const Ft=W[qt],un=ce[qt];if(ut[un](se,gt[Ft](je)),It)for(let fn=0,An=It.length;fn<An;fn++)Ct[fn][un](se,It[fn][Ft](je))}}N[rt]=se,X.push(se),se++}}const ve=D.clone();for(const Fe in D.attributes){const je=ee[Fe];if(ve.setAttribute(Fe,new h.BufferAttribute(je.array.slice(0,se*je.itemSize),je.itemSize,je.normalized)),Fe in ne)for(let rt=0;rt<ne[Fe].length;rt++){const He=ne[Fe][rt];ve.morphAttributes[Fe][rt]=new h.BufferAttribute(He.array.slice(0,se*He.itemSize),He.itemSize,He.normalized)}}return ve.setIndex(X),ve}function S(D,L){if(L===h.TrianglesDrawMode)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),D;if(L===h.TriangleFanDrawMode||L===h.TriangleStripDrawMode){let N=D.getIndex();if(N===null){const se=[],ae=D.getAttribute("position");if(ae!==void 0){for(let ee=0;ee<ae.count;ee++)se.push(ee);D.setIndex(se),N=D.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),D}const H=N.count-2,J=[];if(L===h.TriangleFanDrawMode)for(let se=1;se<=H;se++)J.push(N.getX(0)),J.push(N.getX(se)),J.push(N.getX(se+1));else for(let se=0;se<H;se++)se%2===0?(J.push(N.getX(se)),J.push(N.getX(se+1)),J.push(N.getX(se+2))):(J.push(N.getX(se+2)),J.push(N.getX(se+1)),J.push(N.getX(se)));J.length/3!==H&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const K=D.clone();return K.setIndex(J),K.clearGroups(),K}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",L),D}function R(D){if(D.geometry.isBufferGeometry!==!0)return console.error("THREE.BufferGeometryUtils: Geometry is not of type BufferGeometry."),null;const L=new h.Vector3,N=new h.Vector3,H=new h.Vector3,J=new h.Vector3,K=new h.Vector3,se=new h.Vector3,ae=new h.Vector3,ee=new h.Vector3,ne=new h.Vector3;function X(Pe,qe,ye,me,Re,Se,Be,Ee){L.fromBufferAttribute(qe,Re),N.fromBufferAttribute(qe,Se),H.fromBufferAttribute(qe,Be);const Xe=Pe.morphTargetInfluences;if(ye&&Xe){ae.set(0,0,0),ee.set(0,0,0),ne.set(0,0,0);for(let fe=0,Oe=ye.length;fe<Oe;fe++){const $e=Xe[fe],le=ye[fe];$e!==0&&(J.fromBufferAttribute(le,Re),K.fromBufferAttribute(le,Se),se.fromBufferAttribute(le,Be),me?(ae.addScaledVector(J,$e),ee.addScaledVector(K,$e),ne.addScaledVector(se,$e)):(ae.addScaledVector(J.sub(L),$e),ee.addScaledVector(K.sub(N),$e),ne.addScaledVector(se.sub(H),$e)))}L.add(ae),N.add(ee),H.add(ne)}Pe.isSkinnedMesh&&(Pe.boneTransform(Re,L),Pe.boneTransform(Se,N),Pe.boneTransform(Be,H)),Ee[Re*3+0]=L.x,Ee[Re*3+1]=L.y,Ee[Re*3+2]=L.z,Ee[Se*3+0]=N.x,Ee[Se*3+1]=N.y,Ee[Se*3+2]=N.z,Ee[Be*3+0]=H.x,Ee[Be*3+1]=H.y,Ee[Be*3+2]=H.z}const W=D.geometry,ce=D.material;let he,xe,ve;const Fe=W.index,je=W.attributes.position,rt=W.morphAttributes.position,He=W.morphTargetsRelative,Ot=W.attributes.normal,xt=W.morphAttributes.position,gt=W.groups,It=W.drawRange;let ct,ut,Ct,qt,Ft,un,fn;const An=new Float32Array(je.count*je.itemSize),Bn=new Float32Array(Ot.count*Ot.itemSize);if(Fe!==null)if(Array.isArray(ce))for(ct=0,Ct=gt.length;ct<Ct;ct++)for(Ft=gt[ct],un=Math.max(Ft.start,It.start),fn=Math.min(Ft.start+Ft.count,It.start+It.count),ut=un,qt=fn;ut<qt;ut+=3)he=Fe.getX(ut),xe=Fe.getX(ut+1),ve=Fe.getX(ut+2),X(D,je,rt,He,he,xe,ve,An),X(D,Ot,xt,He,he,xe,ve,Bn);else for(un=Math.max(0,It.start),fn=Math.min(Fe.count,It.start+It.count),ct=un,Ct=fn;ct<Ct;ct+=3)he=Fe.getX(ct),xe=Fe.getX(ct+1),ve=Fe.getX(ct+2),X(D,je,rt,He,he,xe,ve,An),X(D,Ot,xt,He,he,xe,ve,Bn);else if(Array.isArray(ce))for(ct=0,Ct=gt.length;ct<Ct;ct++)for(Ft=gt[ct],un=Math.max(Ft.start,It.start),fn=Math.min(Ft.start+Ft.count,It.start+It.count),ut=un,qt=fn;ut<qt;ut+=3)he=ut,xe=ut+1,ve=ut+2,X(D,je,rt,He,he,xe,ve,An),X(D,Ot,xt,He,he,xe,ve,Bn);else for(un=Math.max(0,It.start),fn=Math.min(je.count,It.start+It.count),ct=un,Ct=fn;ct<Ct;ct+=3)he=ct,xe=ct+1,ve=ct+2,X(D,je,rt,He,he,xe,ve,An),X(D,Ot,xt,He,he,xe,ve,Bn);const ci=new h.Float32BufferAttribute(An,3),ze=new h.Float32BufferAttribute(Bn,3);return{positionAttribute:je,normalAttribute:Ot,morphedPositionAttribute:ci,morphedNormalAttribute:ze}}function P(D){if(D.groups.length===0)return console.warn("THREE.BufferGeometryUtils.mergeGroups(): No groups are defined. Nothing to merge."),D;let L=D.groups;if(L=L.sort((se,ae)=>se.materialIndex!==ae.materialIndex?se.materialIndex-ae.materialIndex:se.start-ae.start),D.getIndex()===null){const se=D.getAttribute("position"),ae=[];for(let ee=0;ee<se.count;ee+=3)ae.push(ee,ee+1,ee+2);D.setIndex(ae)}const N=D.getIndex(),H=[];for(let se=0;se<L.length;se++){const ae=L[se],ee=ae.start,ne=ee+ae.count;for(let X=ee;X<ne;X++)H.push(N.getX(X))}D.dispose(),D.setIndex(H);let J=0;for(let se=0;se<L.length;se++){const ae=L[se];ae.start=J,J+=ae.count}let K=L[0];D.groups=[K];for(let se=1;se<L.length;se++){const ae=L[se];K.materialIndex===ae.materialIndex?K.count+=ae.count:(K=ae,D.groups.push(K))}return D}function O(D,L=Math.PI/3){const N=Math.cos(L),H=(1+1e-10)*100,J=[new h.Vector3,new h.Vector3,new h.Vector3],K=new h.Vector3,se=new h.Vector3,ae=new h.Vector3,ee=new h.Vector3;function ne(ve){const Fe=~~(ve.x*H),je=~~(ve.y*H),rt=~~(ve.z*H);return`${Fe},${je},${rt}`}const X=D.toNonIndexed(),W=X.attributes.position,ce={};for(let ve=0,Fe=W.count/3;ve<Fe;ve++){const je=3*ve,rt=J[0].fromBufferAttribute(W,je+0),He=J[1].fromBufferAttribute(W,je+1),Ot=J[2].fromBufferAttribute(W,je+2);K.subVectors(Ot,He),se.subVectors(rt,He);const xt=new h.Vector3().crossVectors(K,se).normalize();for(let gt=0;gt<3;gt++){const It=J[gt],ct=ne(It);ct in ce||(ce[ct]=[]),ce[ct].push(xt)}}const he=new Float32Array(W.count*3),xe=new h.BufferAttribute(he,3,!1);for(let ve=0,Fe=W.count/3;ve<Fe;ve++){const je=3*ve,rt=J[0].fromBufferAttribute(W,je+0),He=J[1].fromBufferAttribute(W,je+1),Ot=J[2].fromBufferAttribute(W,je+2);K.subVectors(Ot,He),se.subVectors(rt,He),ae.crossVectors(K,se).normalize();for(let xt=0;xt<3;xt++){const gt=J[xt],It=ne(gt),ct=ce[It];ee.set(0,0,0);for(let ut=0,Ct=ct.length;ut<Ct;ut++){const qt=ct[ut];ae.dot(qt)>N&&ee.add(qt)}ee.normalize(),xe.setXYZ(je+xt,ee.x,ee.y,ee.z)}}return X.setAttribute("normal",xe),X}},"./node_modules/super-three/examples/jsm/utils/WorkerPool.js":(l,d,c)=>{c.r(d),c.d(d,{WorkerPool:()=>h});class h{constructor(p=4){this.pool=p,this.queue=[],this.workers=[],this.workersResolve=[],this.workerStatus=0}_initWorker(p){if(!this.workers[p]){const A=this.workerCreator();A.addEventListener("message",this._onMessage.bind(this,p)),this.workers[p]=A}}_getIdleWorker(){for(let p=0;p<this.pool;p++)if(!(this.workerStatus&1<<p))return p;return-1}_onMessage(p,A){const v=this.workersResolve[p];if(v&&v(A),this.queue.length){const{resolve:y,msg:x,transfer:C}=this.queue.shift();this.workersResolve[p]=y,this.workers[p].postMessage(x,C)}else this.workerStatus^=1<<p}setWorkerCreator(p){this.workerCreator=p}setWorkerLimit(p){this.pool=p}postMessage(p,A){return new Promise(v=>{const y=this._getIdleWorker();y!==-1?(this._initWorker(y),this.workerStatus|=1<<y,this.workersResolve[y]=v,this.workers[y].postMessage(p,A)):this.queue.push({resolve:v,msg:p,transfer:A})})}dispose(){this.workers.forEach(p=>p.terminate()),this.workersResolve.length=0,this.workers.length=0,this.queue.length=0,this.workerStatus=0}}},"./package.json":l=>{l.exports=JSON.parse('{"name":"aframe","version":"1.4.1","description":"A web framework for building virtual reality experiences.","homepage":"https://aframe.io/","main":"dist/aframe-master.js","scripts":{"dev":"cross-env INSPECTOR_VERSION=dev webpack serve --port 8080","dist":"node scripts/updateVersionLog.js && npm run dist:min && npm run dist:max","dist:max":"webpack --config webpack.config.js","dist:min":"webpack --config webpack.prod.config.js","docs":"markserv --dir docs --port 9001","preghpages":"node ./scripts/preghpages.js","ghpages":"ghpages -p gh-pages/","lint":"semistandard -v | snazzy","lint:fix":"semistandard --fix","precommit":"npm run lint","prepush":"node scripts/testOnlyCheck.js","prerelease":"node scripts/release.js 1.3.0 1.4.0","start":"npm run dev","start:https":"npm run dev -- --server-type https","test":"karma start ./tests/karma.conf.js","test:docs":"node scripts/docsLint.js","test:firefox":"npm test -- --browsers Firefox","test:chrome":"npm test -- --browsers Chrome","test:nobrowser":"NO_BROWSER=true npm test","test:node":"mocha --ui tdd tests/node"},"repository":"aframevr/aframe","license":"MIT","files":["dist/*","docs/**/*","src/**/*","vendor/**/*"],"dependencies":{"buffer":"^6.0.3","custom-event-polyfill":"^1.0.6","debug":"ngokevin/debug#noTimestamp","deep-assign":"^2.0.0","@ungap/custom-elements":"^1.1.0","load-bmfont":"^1.2.3","object-assign":"^4.0.1","present":"0.0.6","promise-polyfill":"^3.1.0","super-animejs":"^3.1.0","super-three":"^0.147.1","three-bmfont-text":"dmarcos/three-bmfont-text#21d017046216e318362c48abd1a48bddfb6e0733","webvr-polyfill":"^0.10.12"},"devDependencies":{"@babel/core":"^7.17.10","babel-loader":"^8.2.5","babel-plugin-istanbul":"^6.1.1","chai":"^4.3.6","chai-shallow-deep-equal":"^1.4.0","chalk":"^1.1.3","cross-env":"^7.0.3","css-loader":"^6.7.1","ghpages":"0.0.8","git-rev":"^0.2.1","glob":"^8.0.3","husky":"^0.11.7","jsdom":"^20.0.0","karma":"^6.4.0","karma-chai-shallow-deep-equal":"0.0.4","karma-chrome-launcher":"^3.1.1","karma-coverage":"^2.2.0","karma-env-preprocessor":"^0.1.1","karma-firefox-launcher":"^2.1.2","karma-mocha":"^2.0.1","karma-mocha-reporter":"^2.2.5","karma-sinon-chai":"^2.0.2","karma-webpack":"^5.0.0","markserv":"github:sukima/markserv#feature/fix-broken-websoketio-link","mocha":"^10.0.0","replace-in-file":"^2.5.3","semistandard":"^9.0.0","shelljs":"^0.7.7","shx":"^0.2.2","sinon":"<12.0.0","sinon-chai":"^3.7.0","snazzy":"^5.0.0","style-loader":"^3.3.1","too-wordy":"ngokevin/too-wordy","webpack":"^5.73.0","webpack-cli":"^4.10.0","webpack-dev-server":"^4.11.0","webpack-merge":"^5.8.0","write-good":"^1.0.8"},"link":true,"semistandard":{"ignore":["build/**","dist/**","examples/**/shaders/*.js","**/vendor/**"]},"keywords":["3d","aframe","cardboard","components","oculus","three","three.js","rift","vive","vr","web-components","webvr"],"engines":{"node":">= 4.6.0","npm":">= 2.15.9"}}')}},r={};function o(l){var d=r[l];if(d!==void 0)return d.exports;var c=r[l]={id:l,exports:{}};return t[l].call(c.exports,c,c.exports,o),c.exports}o.m=t,o.n=l=>{var d=l&&l.__esModule?()=>l.default:()=>l;return o.d(d,{a:d}),d},o.d=(l,d)=>{for(var c in d)o.o(d,c)&&!o.o(l,c)&&Object.defineProperty(l,c,{enumerable:!0,get:d[c]})},o.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),o.o=(l,d)=>Object.prototype.hasOwnProperty.call(l,d),o.r=l=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},o.b=document.baseURI||self.location.href,o.nc=void 0;var a=o("./src/index.js");return a})())})(cW);AFRAME.registerComponent("three-ar",{schema:{takeOverCamera:{default:!0},cameraUserHeight:{default:!1}},init:function(){this.posePosition=new THREE.Vector3,this.poseQuaternion=new THREE.Quaternion,this.poseEuler=new THREE.Euler(0,0,0,"YXZ"),this.poseRotation=new THREE.Vector3,this.projectionMatrix=new THREE.Matrix4,this.onceSceneLoaded=this.onceSceneLoaded.bind(this),this.el.sceneEl.hasLoaded?setTimeout(this.onceSceneLoaded):this.el.sceneEl.addEventListener("loaded",this.onceSceneLoaded)},tick:function(i,e){if(!(!this.arDisplay||!this.arDisplay.getFrameData)){this.arView&&this.arView.render(),this.frameData||(this.frameData=new VRFrameData),this.arDisplay.getFrameData(this.frameData),this.posePosition.fromArray(this.frameData.pose.position),this.poseQuaternion.fromArray(this.frameData.pose.orientation),this.poseEuler.setFromQuaternion(this.poseQuaternion),this.poseRotation.set(THREE.Math.RAD2DEG*this.poseEuler.x,THREE.Math.RAD2DEG*this.poseEuler.y,THREE.Math.RAD2DEG*this.poseEuler.z),this.arCamera&&this.data.cameraUserHeight&&(this.posePosition.y+=this.arCamera.el.components.camera.data.userHeight);var t=this.posePosition.x||this.posePosition.y||this.posePosition.z||this.poseQuaternion.x||this.poseQuaternion.y||this.poseQuaternion.z;t?this.poseLost!==!1&&(this.poseLost=!1,this.el.emit("poseFound")):this.poseLost!==!0&&(this.poseLost=!0,this.el.emit("poseLost",!1)),this.projectionMatrix.fromArray(this.frameData.leftProjectionMatrix)}},takeOverCamera:function(i){this.arCamera=i,i.isARPerspectiveCamera=!0,i.vrDisplay=this.arDisplay,i.el.setAttribute("ar-camera","enabled",!0)},onceSceneLoaded:function(){var i=this;window.addEventListener("ardisplayconnect",function(){i.arDisplay||i.checkForARDisplay()}),this.checkForARDisplay()},checkForARDisplay:function(){var i=this;THREE.ARUtils.getARDisplay().then(function(e){if(i.arDisplay=e,!!e){var t=i.el.sceneEl;i.data.takeOverCamera&&setTimeout(function(){i.takeOverCamera(t.camera)}),t.renderer.alpha=!0,t.renderer.autoClearColor=THREE.ARUtils.isARKit(e)&&!window.WebARonARKitSendsCameraFrames,t.renderer.autoClearDepth=!0,i.arView=new THREE.ARView(e,t.renderer)}})},getPosition:function(){return!this.arDisplay||!this.arDisplay.getFrameData?null:this.posePosition},getOrientation:function(){return!this.arDisplay||!this.arDisplay.getFrameData?null:this.poseQuaternion},getRotation:function(){return!this.arDisplay||!this.arDisplay.getFrameData?null:this.poseRotation},getProjectionMatrix:function(){return!this.arDisplay||!this.arDisplay.getFrameData?null:this.projectionMatrix},hitAR:function(){var i=new THREE.Matrix4,e=new THREE.Vector3,t=new THREE.Quaternion,r=new THREE.Vector3,o=new THREE.Vector3;return function(a,l,d,c){if(!this.arDisplay||!this.arDisplay.hitTest)return[];for(var h=this.arDisplay.hitTest(a,l),m=[],p=0;h&&p<h.length;p++)i.fromArray(h[0].modelMatrix),i.decompose(e,t,r),c.object3D.getWorldPosition(o),m.push({distance:e.distanceTo(o),point:e,object:d&&d.object3D||this.el.sceneEl.object3D});return m}}()});AFRAME.registerComponent("mozilla-xr-ar",{schema:{takeOverCamera:{default:!0},cameraUserHeight:{default:!1}},init:function(){this.onInit=this.onInit.bind(this),this.onWatch=this.onWatch.bind(this),this.poseMatrix=new THREE.Matrix4,this.posePosition=new THREE.Vector3,this.poseQuaternion=new THREE.Quaternion,this.poseEuler=new THREE.Euler(0,0,0,"YXZ"),this.poseRotation=new THREE.Vector3,this.projectionMatrix=new THREE.Matrix4,this.viewMatrix=new THREE.Matrix4,this.onceSceneLoaded=this.onceSceneLoaded.bind(this),this.el.sceneEl.hasLoaded?(console.log("mozilla-xr-ar: hasLoaded, setTimeout"),setTimeout(this.onceSceneLoaded)):(console.log("mozilla-xr-ar: !hasLoaded, addEventListener"),this.el.sceneEl.addEventListener("loaded",this.onceSceneLoaded)),this.planes_=new Map,this.anchors_=new Map},takeOverCamera:function(i){this.arCamera=i,i.el.setAttribute("ar-camera","enabled",!0)},onceSceneLoaded:function(){if(!(!window.webkit||!window.webkit.messageHandlers)&&window.webkit.messageHandlers.initAR){setTimeout(function(){var e=AFRAME.scenes[0];e.canvas.style.position="absolute !important",e.canvas.style.width="100% !important",e.canvas.style.height="100% !important",setTimeout(function(){e.resize()})},1e3),window["arkitCallback0"]=this.onInit,window["arkitCallback1"]=this.onWatch;var i={options:{ui:{browser:!0,points:!0,focus:!1,rec:!0,rec_time:!0,mic:!1,build:!1,plane:!0,warnings:!0,anchors:!1,debug:!0,statistics:!1}},callback:"arkitCallback0"};window.webkit.messageHandlers.initAR.postMessage(i)}},checkForARDisplay:function(){if(!(!window.webkit||!window.webkit.messageHandlers)&&window.webkit.messageHandlers.watchAR){this.arDisplay=!0;var i={options:{location:!0,camera:!0,objects:!0,light_intensity:!0},callback:"arkitCallback1"};window.arkitWindowResize=function(){setTimeout(function(){AFRAME.scenes[0].resize()},100)},window.webkit.messageHandlers.watchAR.postMessage(i);var e=this,t=e.el.sceneEl;e.data.takeOverCamera&&setTimeout(function(){e.takeOverCamera(t.camera)}),t.renderer.setPixelRatio(1),t.renderer.autoClear=!1,t.renderer.setClearColor("#000",0),t.renderer.alpha=!0}},onInit:function(i){this.checkForARDisplay()},onWatch:function(i){this.frameData=i,this.handleFrame(i)},handleFrame:function(i){this.el.sceneEl,this.poseMatrix.fromArray(i.camera_transform),this.poseMatrix.decompose(this.posePosition,this.poseQuaternion,this.poseRotation),this.poseEuler.setFromQuaternion(this.poseQuaternion),this.poseRotation.set(THREE.Math.RAD2DEG*this.poseEuler.x,THREE.Math.RAD2DEG*this.poseEuler.y,THREE.Math.RAD2DEG*this.poseEuler.z),this.projectionMatrix.fromArray(i.projection_camera),this.viewMatrix.fromArray(i.camera_view),this.arCamera&&this.data.cameraUserHeight&&(this.posePosition.y+=this.arCamera.el.components.camera.data.userHeight);var e=this.posePosition.x||this.posePosition.y||this.posePosition.z||this.poseQuaternion.x||this.poseQuaternion.y||this.poseQuaternion.z;e?this.poseLost!==!1&&(this.poseLost=!1,this.el.emit("poseFound")):this.poseLost!==!0&&(this.poseLost=!0,this.el.emit("poseLost",!1));var t;if(i.newObjects&&i.newObjects.length)for(t=0;t<i.newObjects.length;t++){var r=i.newObjects[t];r.h_plane_center?this.planes_.set(r.uuid,{id:r.uuid,center:r.h_plane_center,extent:[r.h_plane_extent.x,r.h_plane_extent.z],modelMatrix:r.transform}):this.anchors_.set(r.uuid,{id:r.uuid,modelMatrix:r.transform})}if(i.removedObjects&&i.removedObjects.length)for(t=0;t<i.removedObjects.length;t++){var r=i.removedObjects[t];r.h_plane_center?this.planes_.delete(r.uuid):this.anchors_.delete(r.uuid)}if(i.objects&&i.objects.length)for(t=0;t<i.objects.length;t++){var r=i.objects[t];if(r.h_plane_center){var o=this.planes_.get(r.uuid);o?(o.center=r.h_plane_center,o.extent=[r.h_plane_extent.x,r.h_plane_extent.z],o.transform=r.transform):this.planes_.set(r.uuid,{id:r.uuid,center:r.h_plane_center,extent:[r.h_plane_extent.x,r.h_plane_extent.z],transform:r.transform})}else{var a=this.anchors_.get(r.uuid);a?a.transform=r.transform:this.anchors_.set(r.uuid,{id:r.uuid,transform:r.transform})}}},getPosition:function(){return this.arDisplay?this.posePosition:null},getOrientation:function(){return this.arDisplay?this.poseQuaternion:null},getRotation:function(){return this.arDisplay?this.poseRotation:null},getProjectionMatrix:function(){return this.arDisplay?this.projectionMatrix:null},getPlanes:function(){return Array.from(this.planes_.values())},hitTestNoAnchor:function(){function i(){return this.modelMatrix=new Float32Array(16),this}var e={rayStart:new THREE.Vector3,rayEnd:new THREE.Vector3,cameraPosition:new THREE.Vector3,cameraQuaternion:new THREE.Quaternion,projViewMatrix:new THREE.Matrix4,worldRayStart:new THREE.Vector3,worldRayEnd:new THREE.Vector3,worldRayDir:new THREE.Vector3,planeMatrix:new THREE.Matrix4,planeMatrixInverse:new THREE.Matrix4,planeExtent:new THREE.Vector3,planePosition:new THREE.Vector3,planeCenter:new THREE.Vector3,planeNormal:new THREE.Vector3,planeIntersection:new THREE.Vector3,planeIntersectionLocal:new THREE.Vector3,planeHit:new THREE.Matrix4},t=function(){var o=new THREE.Vector3;return function(a,l,d,c){var h=a.dot(c);return o.subVectors(l,d),o.dot(a)/h}}(),r=function(o,a){e.planeMatrix.fromArray(o.modelMatrix),e.planeIntersection.setFromMatrixPosition(e.planeMatrix);var l=e.planeIntersection.distanceTo(e.cameraPosition);e.planeMatrix.fromArray(a.modelMatrix),e.planeIntersection.setFromMatrixPosition(e.planeMatrix);var d=e.planeIntersection.distanceTo(e.cameraPosition);return l<d?-1:1};return function(o,a){if(o<0||o>1||a<0||a>1)throw new Error("hitTest - x and y values must be normalized [0,1]!");var l=[],d=this.getPlanes();if(!d||d.length==0)return l;e.rayStart.set(2*o-1,2*(1-a)-1,0),e.rayEnd.set(2*o-1,2*(1-a)-1,1),e.planeMatrix.multiplyMatrices(this.projectionMatrix,this.viewMatrix),e.projViewMatrix.getInverse(e.planeMatrix),e.worldRayStart.copy(e.rayStart).applyMatrix4(e.projViewMatrix),e.worldRayEnd.copy(e.rayEnd).applyMatrix4(e.projViewMatrix),e.worldRayDir.subVectors(e.worldRayEnd,e.worldRayStart).normalize();for(var c=0;c<d.length;c++){var h=d[c];e.planeMatrix.fromArray(h.modelMatrix),e.planeCenter.set(0,0,0),e.planePosition.copy(e.planeCenter).applyMatrix4(e.planeMatrix),e.planeNormal.set(0,1,0);var m=t(e.planeNormal,e.planePosition,e.worldRayStart,e.worldRayDir);if(!(m<0)){e.planeIntersectionLocal.copy(e.worldRayDir).multiplyScalar(m),e.planeIntersection.addVectors(e.worldRayStart,e.planeIntersectionLocal),e.planeExtent.set(h.extent[0],0,h.extent[1]),e.planeMatrixInverse.getInverse(e.planeMatrix),e.planeIntersectionLocal.copy(e.planeIntersection).applyMatrix4(e.planeMatrixInverse);var p=.0075;if(!(Math.abs(e.planeIntersectionLocal.x)>e.planeExtent.x/2+p)&&!(Math.abs(e.planeIntersectionLocal.z)>e.planeExtent.z/2+p)){e.planeHit.makeTranslation(e.planeIntersection.x,e.planeIntersection.y,e.planeIntersection.z);for(var A=new i,v=0;v<16;v++)A.modelMatrix[v]=e.planeHit.elements[v];A.i=c,l.push(A)}}}return l.sort(r),l}}(),hitAR:function(){var i=new THREE.Matrix4,e=new THREE.Vector3,t=new THREE.Quaternion,r=new THREE.Vector3,o=new THREE.Vector3;return function(a,l,d,c){if(!this.arDisplay)return[];for(var h=this.hitTestNoAnchor(a,l),m=[],p=0;h&&p<h.length;p++)i.fromArray(h[0].modelMatrix),i.decompose(e,t,r),c.object3D.getWorldPosition(o),m.push({distance:e.distanceTo(o),point:e,object:d&&d.object3D||this.el.sceneEl.object3D});return m}}()});AFRAME.registerComponent("ar-planes",{getPlaneSource:function(){var i;return this.planeSource||(i=this.el.sceneEl.components["three-ar"],i&&i.arDisplay&&(this.planeSource=i.arDisplay)),this.planeSource||(i=this.el.sceneEl.components["mozilla-xr-ar"],i&&i.arDisplay&&(this.planeSource=i)),this.planeSource},getPlanes:function(){var i=this.getPlaneSource();if(!(!i||!i.getPlanes))return i.getPlanes()},init:function(){this.planes={},this.anchorsAdded=[],this.anchorsAddedDetail={type:"added",anchors:this.anchorsAdded},this.anchorsUpdated=[],this.anchorsUpdatedDetail={type:"updated",anchors:this.anchorsUpdated},this.anchorsRemoved=[],this.anchorsRemovedDetail={type:"removed",anchors:this.anchorsRemoved}},tick:function(i,e){var t=new THREE.Vector3(1,1,1);new THREE.Vector3;var r=new THREE.Matrix4,o=new THREE.Vector3;new THREE.Vector3;var a=new THREE.Quaternion;return new THREE.Euler(0,0,0,"YXZ"),function(l,d){var c=this.getPlanes();if(c){var h=[],m=[],p=[],A={},v;for(v=0;c&&v<c.length;v++){var y=c[v],_,x=(y.identifier!==void 0?y.identifier:y.id).toString(),C=y.timestamp;A[x]=!0;var g=!this.planes[x],b=C!==void 0;if(!(!g&&b&&C===this.planes[x].timestamp)){var _={identifier:x};if(C!==void 0&&(_.timestamp=C),y.modelMatrix||y.transform?_.modelMatrix=y.modelMatrix||y.transform:(o.fromArray(y.position),a.fromArray(y.orientation),t.set(1,1,1),r.compose(o,a,t),_.modelMatrix=r.elements.slice()),_.extent=y.extent,y.center&&(_.center=y.center),y.polygon?_.vertices=y.polygon:y.vertices&&(_.vertices=y.vertices),g)h.push(_);else if(b)m.push(_);else{if(AFRAME.utils.deepEqual(_,this.planes[x]))continue;m.push(_)}b?this.planes[x]=_:(this.planes[x]={identifier:_.identifier,modelMatrix:_.modelMatrix.slice(),extent:_.extent.slice()},_.vertices&&(this.planes[x].vertices=_.vertices.slice()))}}var S=this;Object.keys(S.planes).forEach(function(R){A[R]||(p.push(S.planes[R]),delete S.planes[R])}),this.anchorsAdded=h,h.length>0&&(this.anchorsAddedDetail.anchors=h,this.el.emit("anchorsadded",this.anchorsAddedDetail)),this.anchorsUpdated=m,m.length>0&&(this.anchorsUpdatedDetail.anchors=m,this.el.emit("anchorsupdated",this.anchorsUpdatedDetail)),this.anchorsRemoved=p,p.length>0&&(this.anchorsRemovedDetail.anchors=p,this.el.emit("anchorsremoved",this.anchorsRemovedDetail))}}}()});AFRAME.registerComponent("ar",{schema:{takeOverCamera:{default:!0},cameraUserHeight:{default:!1},hideUI:{default:!0}},dependencies:["three-ar","mozilla-xr-ar","ar-planes"],init:function(){this.el.setAttribute("three-ar",{takeOverCamera:this.data.takeOverCamera,cameraUserHeight:this.data.cameraUserHeight}),this.el.setAttribute("mozilla-xr-ar",{takeOverCamera:this.data.takeOverCamera,cameraUserHeight:this.data.cameraUserHeight}),this.data.hideUI&&this.el.sceneEl.setAttribute("vr-mode-ui",{enabled:!1}),document.head.insertAdjacentHTML("beforeend","<style>html,body {background-color: transparent !important;}</style>")}});AFRAME.registerComponent("ar-camera",{schema:{enabled:{default:!0}},init:function(){this.wasLookControlsEnabled=this.el.getAttribute("look-controls","enabled")},update:function(i){(!i||i.enabled!==this.data.enabled)&&(this.data.enabled?(this.wasLookControlsEnabled=this.el.getAttribute("look-controls","enabled"),this.el.setAttribute("look-controls","enabled",!1)):this.el.setAttribute("look-controls","enabled",this.wasLookControlsEnabled===!0))},tick:function(i,e){if(this.data.enabled){var t=this.checkWhichAR();t&&(this.el.setAttribute("position",t.getPosition()),this.el.setAttribute("rotation",t.getRotation()),this.el.sceneEl.is("vr-mode")||(this.el.components.camera.camera.projectionMatrix=t.getProjectionMatrix()))}},checkWhichAR:function(){if(!this.whichar){var i=this.el.sceneEl.components["three-ar"];if((!i||!i.arDisplay)&&(i=this.el.sceneEl.components["mozilla-xr-ar"]),!i||!i.arDisplay)return;this.whichar=i}return this.whichar}});AFRAME.registerComponent("ar-raycaster",{dependencies:["raycaster"],schema:{x:{default:.5},y:{default:.5},el:{type:"selector"}},init:function(){this.raycaster=this.el.components.raycaster.raycaster,this.raycasterIntersectObjects=this.raycaster.intersectObjects.bind(this.raycaster),this.raycaster.intersectObjects=this.intersectObjects.bind(this)},update:function(i){this.data.el||this.el.sceneEl.object3D.el||(this.el.sceneEl.object3D.el=this.el.sceneEl)},intersectObjects:function(i,e){var t=this.raycasterIntersectObjects(i,e);return t.concat(this.hitAR())},hitAR:function(){var i=this.checkWhichAR();if(!i||!i.arDisplay)return[];var e=this.data.x,t=this.data.y;return arguments.length>=2&&(e=arguments[0],t=arguments[1]),i.hitAR(e,t,this.data.el,this.el)},checkWhichAR:function(){if(!this.whichar){var i=this.el.sceneEl.components["three-ar"];if((!i||!i.arDisplay)&&(i=this.el.sceneEl.components["mozilla-xr-ar"]),!i||!i.arDisplay)return;this.whichar=i}return this.whichar}});class uW extends mc{constructor(e,t){super(),this.index=e,this.controller=t.xr.getController(e),this.grip=t.xr.getControllerGrip(e),this.hand=t.xr.getHand(e),this.grip.userData.name="grip",this.controller.userData.name="controller",this.hand.userData.name="hand",this.visible=!1,this.add(this.controller,this.grip,this.hand),this._onConnected=this._onConnected.bind(this),this._onDisconnected=this._onDisconnected.bind(this),this.controller.addEventListener("connected",this._onConnected),this.controller.addEventListener("disconnected",this._onDisconnected)}_onConnected(e){e.fake||(this.visible=!0,this.inputSource=e.data,this.dispatchEvent(e))}_onDisconnected(e){e.fake||(this.visible=!1,this.dispatchEvent(e))}dispose(){this.controller.removeEventListener("connected",this._onConnected),this.controller.removeEventListener("disconnected",this._onDisconnected)}}var rR,sR;const hW=i=>Array.from(new Set(i)),fc=typeof window<"u"&&((rR=window.document)!=null&&rR.createElement||((sR=window.navigator)==null?void 0:sR.product)==="ReactNative")?Zt.useLayoutEffect:Zt.useEffect;function If(i){const e=Zt.useRef(i);return fc(()=>void(e.current=i),[i]),e}function lm(i,e,{handedness:t}={}){const r=If(e),o=ul(a=>a.controllers);fc(()=>{const a=o.map(l=>{if(t&&l.inputSource.handedness!==t)return;const d=c=>r.current({nativeEvent:c,target:l});return l.controller.addEventListener(i,d),()=>l.controller.removeEventListener(i,d)});return()=>a.forEach(l=>l==null?void 0:l())},[o,t,i])}const oR=new ki;function dW({children:i}){const e=cl(p=>p.events),t=cl(p=>p.get),r=cl(p=>p.raycaster),o=ul(p=>p.controllers),a=ul(p=>p.interactions),l=ul(p=>p.hoverState),d=ul(p=>p.hasInteraction),c=ul(p=>p.getInteraction),h=Zt.useCallback(p=>{const A=Array.from(a.keys());return oR.identity().extractRotation(p.matrixWorld),r.ray.origin.setFromMatrixPosition(p.matrixWorld),r.ray.direction.set(0,0,-1).applyMatrix4(oR),r.intersectObjects(A,!0)},[a,r]);kM(()=>{if(a.size!==0)for(const p of o){const A=l[p.inputSource.handedness],v=new Set;let y=h(p.controller);if(e.filter)y=e.filter(y,t());else{const x=y.find(C=>C==null?void 0:C.object);x&&(y=[x])}for(const x of y){let C=x.object;for(;C;){if(d(C,"onHover")&&!A.has(C)){const b=c(C,"onHover");for(const _ of b)_({target:p,intersection:x,intersections:y})}const g=c(C,"onMove");g==null||g.forEach(b=>b({target:p,intersection:x,intersections:y})),A.set(C,x),v.add(C.id),C=C.parent}}for(const x of A.keys())if(!v.has(x.id)){A.delete(x);const C=c(x,"onBlur");if(!C)continue;for(const g of C)g({target:p,intersections:y})}}});const m=Zt.useCallback(p=>A=>{const v=l[A.target.inputSource.handedness],y=Array.from(new Set(v.values()));a.forEach((x,C)=>{var g,b,_;if(v.has(C)){if(!x[p])return;for(const S of x[p])(g=S.current)==null||g.call(S,{target:A.target,intersection:v.get(C),intersections:y})}else if(p==="onSelect"&&x.onSelectMissed)for(const S of x.onSelectMissed)(b=S.current)==null||b.call(S,{target:A.target,intersections:y});else if(p==="onSqueeze"&&x.onSqueezeMissed)for(const S of x.onSqueezeMissed)(_=S.current)==null||_.call(S,{target:A.target,intersections:y})})},[l,a]);return lm("select",m("onSelect")),lm("selectstart",m("onSelectStart")),lm("selectend",m("onSelectEnd")),lm("squeeze",m("onSqueeze")),lm("squeezeend",m("onSqueezeEnd")),lm("squeezestart",m("onSqueezeStart")),Zt.createElement(Zt.Fragment,null,i)}function ac(i,e,t){const r=ul(l=>l.addInteraction),o=ul(l=>l.removeInteraction),a=If(t);fc(()=>{const l=i.current;if(!(!l||!a.current))return r(l,e,a),()=>o(l,e,a)},[i,e,r,o])}const fW=Zt.forwardRef(function({onHover:e,onBlur:t,onSelectStart:r,onSelectEnd:o,onSelectMissed:a,onSelect:l,onSqueezeStart:d,onSqueezeEnd:c,onSqueezeMissed:h,onSqueeze:m,onMove:p,children:A},v){const y=Zt.useRef(null);return Zt.useImperativeHandle(v,()=>y.current),ac(y,"onHover",e),ac(y,"onBlur",t),ac(y,"onSelectStart",r),ac(y,"onSelectEnd",o),ac(y,"onSelectMissed",a),ac(y,"onSelect",l),ac(y,"onSqueezeStart",d),ac(y,"onSqueezeEnd",c),ac(y,"onSqueezeMissed",h),ac(y,"onSqueeze",m),ac(y,"onMove",p),Zt.createElement("group",{ref:y},A)});Zt.forwardRef(function({onSelectStart:e,onSelectEnd:t,children:r,...o},a){const l=Zt.useRef(),d=Zt.useRef(null),c=Zt.useMemo(()=>new ki,[]);return Zt.useImperativeHandle(a,()=>d.current),kM(()=>{const h=l.current,m=d.current;h&&(m.applyMatrix4(c),m.applyMatrix4(h.matrixWorld),m.updateMatrixWorld(),c.copy(h.matrixWorld).invert())}),Zt.createElement(fW,{ref:d,onSelectStart:h=>{l.current=h.target.controller,c.copy(h.target.controller.matrixWorld).invert(),e==null||e(h)},onSelectEnd:h=>{h.target.controller===l.current&&(l.current=void 0),t==null||t(h)},...o},r)});const zP=Zt.createContext(null),Nf=FM((i,e)=>({set:i,get:e,session:null,referenceSpaceType:null}));function pW({foveation:i=0,frameRate:e=void 0,referenceSpace:t="local-floor",onSessionStart:r,onSessionEnd:o,onVisibilityChange:a,onInputSourcesChange:l,children:d}){const c=cl(_=>_.gl),h=cl(_=>_.camera),m=ul(_=>_.player),p=ul(_=>_.get),A=ul(_=>_.set),v=ul(_=>_.session),y=ul(_=>_.controllers),x=If(r),C=If(o),g=If(a),b=If(l);return fc(()=>{const _=[0,1].map(S=>{const R=new uW(S,c),P=()=>A(D=>({controllers:[...D.controllers,R]})),O=()=>A(D=>({controllers:D.controllers.filter(L=>L!==R)}));return R.addEventListener("connected",P),R.addEventListener("disconnected",O),()=>{R.removeEventListener("connected",P),R.removeEventListener("disconnected",O)}});return()=>_.forEach(S=>S())},[c,A]),fc(()=>Nf.subscribe(({session:_})=>A(()=>({session:_}))),[c.xr,A]),fc(()=>{c.xr.setFoveation(i),A(()=>({foveation:i}))},[c.xr,i,A]),fc(()=>{var _;try{e&&((_=v==null?void 0:v.updateTargetFrameRate)==null||_.call(v,e))}catch{}A(()=>({frameRate:e}))},[v,e,A]),fc(()=>{const _=Nf.getState();c.xr.setReferenceSpaceType(t),A(()=>({referenceSpace:t})),_.set({referenceSpaceType:t})},[c.xr,t,A]),fc(()=>{if(!v)return void c.xr.setSession(null);const _=O=>{var D;A(()=>({isPresenting:!0})),(D=x.current)==null||D.call(x,{nativeEvent:{...O,target:v},target:v})},S=O=>{var D;A(()=>({isPresenting:!1,session:null})),Nf.setState(()=>({session:null})),(D=C.current)==null||D.call(C,{nativeEvent:{...O,target:v},target:v})},R=O=>{var D;(D=g.current)==null||D.call(g,{nativeEvent:O,target:v})},P=O=>{var D;const L=Object.values(v.inputSources).some(N=>N.hand);A(()=>({isHandTracking:L})),(D=b.current)==null||D.call(b,{nativeEvent:O,target:v})};return c.xr.addEventListener("sessionstart",_),c.xr.addEventListener("sessionend",S),v.addEventListener("visibilitychange",R),v.addEventListener("inputsourceschange",P),c.xr.setSession(v).then(()=>{c.xr.setFoveation(p().foveation)}),()=>{c.xr.removeEventListener("sessionstart",_),c.xr.removeEventListener("sessionend",S),v.removeEventListener("visibilitychange",R),v.removeEventListener("inputsourceschange",P)}},[v,c.xr,A,p]),Zt.createElement(dW,null,Zt.createElement("primitive",{object:m},Zt.createElement("primitive",{object:h}),y.map(_=>Zt.createElement("primitive",{key:_.index,object:_}))),d)}function mW(i){const e=Zt.useMemo(()=>FM((t,r)=>({set:t,get:r,controllers:[],isPresenting:!1,isHandTracking:!1,player:new mc,session:null,foveation:0,referenceSpace:"local-floor",hoverState:{left:new Map,right:new Map,none:new Map},interactions:new Map,hasInteraction(o,a){var l;return!!((l=r().interactions.get(o))!=null&&l[a].some(d=>d.current))},getInteraction(o,a){var l;return(l=r().interactions.get(o))==null?void 0:l[a].reduce((d,c)=>(c.current&&d.push(c.current),d),[])},addInteraction(o,a,l){const d=r().interactions;d.has(o)||d.set(o,{onHover:[],onBlur:[],onSelect:[],onSelectEnd:[],onSelectStart:[],onSelectMissed:[],onSqueeze:[],onSqueezeEnd:[],onSqueezeStart:[],onSqueezeMissed:[],onMove:[]}),d.get(o)[a].push(l)},removeInteraction(o,a,l){const d=r().interactions.get(o);if(d){const c=d[a].indexOf(l);c!==-1&&d[a].splice(c,1)}}})),[]);return Zt.createElement(zP.Provider,{value:e},Zt.createElement(pW,{...i}))}const gW=(i,e)=>{var t;if(!(!i&&!e))return i&&!e?{optionalFeatures:[i]}:i&&e?{...e,optionalFeatures:hW([...(t=e.optionalFeatures)!=null?t:[],i])}:e},AW=async(i,e)=>{const t=Nf.getState();if(t.session){console.warn("@react-three/xr: session already started, please stop it first");return}const r=gW(t.referenceSpaceType,e),o=await navigator.xr.requestSession(i,r);return t.set(()=>({session:o})),o},vW=async()=>{const i=Nf.getState();if(!i.session){console.warn("@react-three/xr: no session to stop, please start it first");return}await i.session.end(),i.set({session:null})},yW=async(i,{sessionInit:e,enterOnly:t,exitOnly:r}={})=>{const o=Nf.getState();if(!(o.session&&t)&&!(!o.session&&r))return o.session?await vW():await AW(i,e)},xW=(i,e,t)=>{switch(i){case"entered":return`Exit ${e}`;case"exited":return`Enter ${e}`;case"unsupported":default:switch(t){case"https":return"HTTPS needed";case"security":return`${e} blocked`;case"unknown":default:return`${e} unsupported`}}},GP=Zt.forwardRef(function({mode:e,sessionInit:t,enterOnly:r=!1,exitOnly:o=!1,onClick:a,onError:l,children:d,...c},h){const[m,p]=Zt.useState("exited"),[A,v]=Zt.useState("unknown"),y=xW(m,e,A),x=e==="inline"?e:`immersive-${e.toLowerCase()}`,C=If(l);fc(()=>{if(!(navigator!=null&&navigator.xr))return void p("unsupported");navigator.xr.isSessionSupported(x).then(b=>{if(b)p("exited");else{const _=location.protocol==="https:";p("unsupported"),v(_?"unknown":"https")}}).catch(b=>{p("unsupported"),"name"in b&&b.name==="SecurityError"?v("security"):v("unknown")})},[x]),fc(()=>Nf.subscribe(b=>{b.session?p("entered"):m!=="unsupported"&&p("exited")}),[m]);const g=Zt.useCallback(async b=>{a==null||a(b);try{yW(x,{sessionInit:t,enterOnly:r,exitOnly:o})}catch(_){const S=C.current;if(S&&_ instanceof Error)S(_);else throw _}},[a,x,t,r,o,C]);return Zt.createElement("button",{...c,ref:h,onClick:m==="unsupported"?a:g},typeof d=="function"?d(m):d??y)}),HP={position:"absolute",bottom:"24px",left:"50%",transform:"translateX(-50%)",padding:"12px 24px",border:"1px solid white",borderRadius:"4px",background:"rgba(0, 0, 0, 0.1)",color:"white",font:"normal 0.8125rem sans-serif",outline:"none",zIndex:99999,cursor:"pointer"},EW=Zt.forwardRef(({style:i=HP,sessionInit:e={domOverlay:typeof document<"u"?{root:document.body}:void 0,optionalFeatures:["hit-test","dom-overlay","dom-overlay-for-handheld-ar"]},children:t,...r},o)=>Zt.createElement(GP,{...r,ref:o,mode:"AR",style:i,sessionInit:e},t));Zt.forwardRef(({style:i=HP,sessionInit:e={optionalFeatures:["local-floor","bounded-floor","hand-tracking","layers"]},children:t,...r},o)=>Zt.createElement(GP,{...r,ref:o,mode:"VR",style:i,sessionInit:e},t));function ul(i=t=>t,e){const t=Zt.useContext(zP);if(!t)throw new Error("useXR must be used within an <XR /> component!");return t(i,e)}const aR=({color:i,material:e,metall:t,isArVisible:r})=>{const o=Zt.useRef(),a=ax(BQ,"https://myassetsfordev.s3.eu-north-1.amazonaws.com/backpack.glb"),[l,d,c,h,m,p,A,v,y,x,C,g,b,_,S]=ax(bM,["https://myassetsfordev.s3.eu-north-1.amazonaws.com/denim_baseColor.jpg","https://myassetsfordev.s3.eu-north-1.amazonaws.com/denim_normal.jpg","https://myassetsfordev.s3.eu-north-1.amazonaws.com/denim_occlusionRoughnessMetallic.jpg","https://myassetsfordev.s3.eu-north-1.amazonaws.com/fabric_baseColor.jpg","https://myassetsfordev.s3.eu-north-1.amazonaws.com/fabric_normal.jpg","https://myassetsfordev.s3.eu-north-1.amazonaws.com/fabric_occlusionRoughnessMetallic.jpg","https://myassetsfordev.s3.eu-north-1.amazonaws.com/leather_baseColor.jpg","https://myassetsfordev.s3.eu-north-1.amazonaws.com/leather_normal.jpg","https://myassetsfordev.s3.eu-north-1.amazonaws.com/leather_occlusionRoughnessMetallic.jpg","https://myassetsfordev.s3.eu-north-1.amazonaws.com/metall_baseColor.jpg","https://myassetsfordev.s3.eu-north-1.amazonaws.com/metall_normal.jpg","https://myassetsfordev.s3.eu-north-1.amazonaws.com/metall_occlusionRoughnessMetallic.jpg","https://myassetsfordev.s3.eu-north-1.amazonaws.com/strap_baseColor.jpg","https://myassetsfordev.s3.eu-north-1.amazonaws.com/strap_normal.jpg","https://myassetsfordev.s3.eu-north-1.amazonaws.com/strap_occlusionRoughnessMetallic.jpg"]),R=a.nodes.Mesh,P=a.nodes.Mesh_1,O=a.nodes.Mesh_2;l.flipY=!1,d.flipY=!1,c.flipY=!1,h.flipY=!1,m.flipY=!1,p.flipY=!1,A.flipY=!1,v.flipY=!1,y.flipY=!1,x.flipY=!1,C.flipY=!1,g.flipY=!1,b.flipY=!1,_.flipY=!1,S.flipY=!1;const D=new su({map:l,normalMap:d,aoMap:c,roughnessMap:c,metalnessMap:c}),L=new su({map:h,normalMap:m,aoMap:p,roughnessMap:p,metalnessMap:p}),N=new su({map:A,normalMap:v,aoMap:y,roughnessMap:y,metalnessMap:y}),H=new su({map:x,normalMap:C,aoMap:g,roughnessMap:g,metalnessMap:g,metalness:1,roughness:.2}),J=new su({map:b,normalMap:_,aoMap:S,roughnessMap:S,metalnessMap:S});switch(e){case"leather":R.material=N;break;case"denim":R.material=D;break;case"fabric":R.material=L;break;default:R.material=N;break}switch(P.material=H,t){case"silver":P.material.color=new Rn("#fff");break;case"black":P.material.color=new Rn("#000");break;case"gold":P.material.color=new Rn("#dab901");break;default:P.material.color=new Rn("#fff");break}return O.material=J,R.material.color=new Rn(i),O.material.color=new Rn(i),Ga(R1,{children:[r&&Ga(R1,{children:[sr(EW,{}),Ga(NP,{children:[sr("ambientLight",{intensity:.7}),sr("pointLight",{position:[10,10,10]}),sr(mW,{children:sr("primitive",{object:a.scene,scale:[5,5,5],rotation:[0,-1,0]})})]})]}),!r&&sr("group",{ref:o,position:[0,-.2,0],children:sr("primitive",{object:a.scene,scale:[1,1,1]})})]})};var _W=Object.defineProperty,cx=Object.getOwnPropertySymbols,VP=Object.prototype.hasOwnProperty,QP=Object.prototype.propertyIsEnumerable,lR=(i,e,t)=>e in i?_W(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,wW=(i,e)=>{for(var t in e||(e={}))VP.call(e,t)&&lR(i,t,e[t]);if(cx)for(var t of cx(e))QP.call(e,t)&&lR(i,t,e[t]);return i},CW=(i,e)=>{var t={};for(var r in i)VP.call(i,r)&&e.indexOf(r)<0&&(t[r]=i[r]);if(i!=null&&cx)for(var r of cx(i))e.indexOf(r)<0&&QP.call(i,r)&&(t[r]=i[r]);return t};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Xf;(i=>{const e=class{constructor(c,h,m,p){if(this.version=c,this.errorCorrectionLevel=h,this.modules=[],this.isFunction=[],c<e.MIN_VERSION||c>e.MAX_VERSION)throw new RangeError("Version value out of range");if(p<-1||p>7)throw new RangeError("Mask value out of range");this.size=c*4+17;let A=[];for(let y=0;y<this.size;y++)A.push(!1);for(let y=0;y<this.size;y++)this.modules.push(A.slice()),this.isFunction.push(A.slice());this.drawFunctionPatterns();const v=this.addEccAndInterleave(m);if(this.drawCodewords(v),p==-1){let y=1e9;for(let x=0;x<8;x++){this.applyMask(x),this.drawFormatBits(x);const C=this.getPenaltyScore();C<y&&(p=x,y=C),this.applyMask(x)}}a(0<=p&&p<=7),this.mask=p,this.applyMask(p),this.drawFormatBits(p),this.isFunction=[]}static encodeText(c,h){const m=i.QrSegment.makeSegments(c);return e.encodeSegments(m,h)}static encodeBinary(c,h){const m=i.QrSegment.makeBytes(c);return e.encodeSegments([m],h)}static encodeSegments(c,h,m=1,p=40,A=-1,v=!0){if(!(e.MIN_VERSION<=m&&m<=p&&p<=e.MAX_VERSION)||A<-1||A>7)throw new RangeError("Invalid value");let y,x;for(y=m;;y++){const _=e.getNumDataCodewords(y,h)*8,S=d.getTotalBits(c,y);if(S<=_){x=S;break}if(y>=p)throw new RangeError("Data too long")}for(const _ of[e.Ecc.MEDIUM,e.Ecc.QUARTILE,e.Ecc.HIGH])v&&x<=e.getNumDataCodewords(y,_)*8&&(h=_);let C=[];for(const _ of c){r(_.mode.modeBits,4,C),r(_.numChars,_.mode.numCharCountBits(y),C);for(const S of _.getData())C.push(S)}a(C.length==x);const g=e.getNumDataCodewords(y,h)*8;a(C.length<=g),r(0,Math.min(4,g-C.length),C),r(0,(8-C.length%8)%8,C),a(C.length%8==0);for(let _=236;C.length<g;_^=253)r(_,8,C);let b=[];for(;b.length*8<C.length;)b.push(0);return C.forEach((_,S)=>b[S>>>3]|=_<<7-(S&7)),new e(y,h,b,A)}getModule(c,h){return 0<=c&&c<this.size&&0<=h&&h<this.size&&this.modules[h][c]}getModules(){return this.modules}drawFunctionPatterns(){for(let m=0;m<this.size;m++)this.setFunctionModule(6,m,m%2==0),this.setFunctionModule(m,6,m%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const c=this.getAlignmentPatternPositions(),h=c.length;for(let m=0;m<h;m++)for(let p=0;p<h;p++)m==0&&p==0||m==0&&p==h-1||m==h-1&&p==0||this.drawAlignmentPattern(c[m],c[p]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(c){const h=this.errorCorrectionLevel.formatBits<<3|c;let m=h;for(let A=0;A<10;A++)m=m<<1^(m>>>9)*1335;const p=(h<<10|m)^21522;a(p>>>15==0);for(let A=0;A<=5;A++)this.setFunctionModule(8,A,o(p,A));this.setFunctionModule(8,7,o(p,6)),this.setFunctionModule(8,8,o(p,7)),this.setFunctionModule(7,8,o(p,8));for(let A=9;A<15;A++)this.setFunctionModule(14-A,8,o(p,A));for(let A=0;A<8;A++)this.setFunctionModule(this.size-1-A,8,o(p,A));for(let A=8;A<15;A++)this.setFunctionModule(8,this.size-15+A,o(p,A));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let c=this.version;for(let m=0;m<12;m++)c=c<<1^(c>>>11)*7973;const h=this.version<<12|c;a(h>>>18==0);for(let m=0;m<18;m++){const p=o(h,m),A=this.size-11+m%3,v=Math.floor(m/3);this.setFunctionModule(A,v,p),this.setFunctionModule(v,A,p)}}drawFinderPattern(c,h){for(let m=-4;m<=4;m++)for(let p=-4;p<=4;p++){const A=Math.max(Math.abs(p),Math.abs(m)),v=c+p,y=h+m;0<=v&&v<this.size&&0<=y&&y<this.size&&this.setFunctionModule(v,y,A!=2&&A!=4)}}drawAlignmentPattern(c,h){for(let m=-2;m<=2;m++)for(let p=-2;p<=2;p++)this.setFunctionModule(c+p,h+m,Math.max(Math.abs(p),Math.abs(m))!=1)}setFunctionModule(c,h,m){this.modules[h][c]=m,this.isFunction[h][c]=!0}addEccAndInterleave(c){const h=this.version,m=this.errorCorrectionLevel;if(c.length!=e.getNumDataCodewords(h,m))throw new RangeError("Invalid argument");const p=e.NUM_ERROR_CORRECTION_BLOCKS[m.ordinal][h],A=e.ECC_CODEWORDS_PER_BLOCK[m.ordinal][h],v=Math.floor(e.getNumRawDataModules(h)/8),y=p-v%p,x=Math.floor(v/p);let C=[];const g=e.reedSolomonComputeDivisor(A);for(let _=0,S=0;_<p;_++){let R=c.slice(S,S+x-A+(_<y?0:1));S+=R.length;const P=e.reedSolomonComputeRemainder(R,g);_<y&&R.push(0),C.push(R.concat(P))}let b=[];for(let _=0;_<C[0].length;_++)C.forEach((S,R)=>{(_!=x-A||R>=y)&&b.push(S[_])});return a(b.length==v),b}drawCodewords(c){if(c.length!=Math.floor(e.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let h=0;for(let m=this.size-1;m>=1;m-=2){m==6&&(m=5);for(let p=0;p<this.size;p++)for(let A=0;A<2;A++){const v=m-A,x=(m+1&2)==0?this.size-1-p:p;!this.isFunction[x][v]&&h<c.length*8&&(this.modules[x][v]=o(c[h>>>3],7-(h&7)),h++)}}a(h==c.length*8)}applyMask(c){if(c<0||c>7)throw new RangeError("Mask value out of range");for(let h=0;h<this.size;h++)for(let m=0;m<this.size;m++){let p;switch(c){case 0:p=(m+h)%2==0;break;case 1:p=h%2==0;break;case 2:p=m%3==0;break;case 3:p=(m+h)%3==0;break;case 4:p=(Math.floor(m/3)+Math.floor(h/2))%2==0;break;case 5:p=m*h%2+m*h%3==0;break;case 6:p=(m*h%2+m*h%3)%2==0;break;case 7:p=((m+h)%2+m*h%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[h][m]&&p&&(this.modules[h][m]=!this.modules[h][m])}}getPenaltyScore(){let c=0;for(let A=0;A<this.size;A++){let v=!1,y=0,x=[0,0,0,0,0,0,0];for(let C=0;C<this.size;C++)this.modules[A][C]==v?(y++,y==5?c+=e.PENALTY_N1:y>5&&c++):(this.finderPenaltyAddHistory(y,x),v||(c+=this.finderPenaltyCountPatterns(x)*e.PENALTY_N3),v=this.modules[A][C],y=1);c+=this.finderPenaltyTerminateAndCount(v,y,x)*e.PENALTY_N3}for(let A=0;A<this.size;A++){let v=!1,y=0,x=[0,0,0,0,0,0,0];for(let C=0;C<this.size;C++)this.modules[C][A]==v?(y++,y==5?c+=e.PENALTY_N1:y>5&&c++):(this.finderPenaltyAddHistory(y,x),v||(c+=this.finderPenaltyCountPatterns(x)*e.PENALTY_N3),v=this.modules[C][A],y=1);c+=this.finderPenaltyTerminateAndCount(v,y,x)*e.PENALTY_N3}for(let A=0;A<this.size-1;A++)for(let v=0;v<this.size-1;v++){const y=this.modules[A][v];y==this.modules[A][v+1]&&y==this.modules[A+1][v]&&y==this.modules[A+1][v+1]&&(c+=e.PENALTY_N2)}let h=0;for(const A of this.modules)h=A.reduce((v,y)=>v+(y?1:0),h);const m=this.size*this.size,p=Math.ceil(Math.abs(h*20-m*10)/m)-1;return a(0<=p&&p<=9),c+=p*e.PENALTY_N4,a(0<=c&&c<=2568888),c}getAlignmentPatternPositions(){if(this.version==1)return[];{const c=Math.floor(this.version/7)+2,h=this.version==32?26:Math.ceil((this.version*4+4)/(c*2-2))*2;let m=[6];for(let p=this.size-7;m.length<c;p-=h)m.splice(1,0,p);return m}}static getNumRawDataModules(c){if(c<e.MIN_VERSION||c>e.MAX_VERSION)throw new RangeError("Version number out of range");let h=(16*c+128)*c+64;if(c>=2){const m=Math.floor(c/7)+2;h-=(25*m-10)*m-55,c>=7&&(h-=36)}return a(208<=h&&h<=29648),h}static getNumDataCodewords(c,h){return Math.floor(e.getNumRawDataModules(c)/8)-e.ECC_CODEWORDS_PER_BLOCK[h.ordinal][c]*e.NUM_ERROR_CORRECTION_BLOCKS[h.ordinal][c]}static reedSolomonComputeDivisor(c){if(c<1||c>255)throw new RangeError("Degree out of range");let h=[];for(let p=0;p<c-1;p++)h.push(0);h.push(1);let m=1;for(let p=0;p<c;p++){for(let A=0;A<h.length;A++)h[A]=e.reedSolomonMultiply(h[A],m),A+1<h.length&&(h[A]^=h[A+1]);m=e.reedSolomonMultiply(m,2)}return h}static reedSolomonComputeRemainder(c,h){let m=h.map(p=>0);for(const p of c){const A=p^m.shift();m.push(0),h.forEach((v,y)=>m[y]^=e.reedSolomonMultiply(v,A))}return m}static reedSolomonMultiply(c,h){if(c>>>8||h>>>8)throw new RangeError("Byte out of range");let m=0;for(let p=7;p>=0;p--)m=m<<1^(m>>>7)*285,m^=(h>>>p&1)*c;return a(m>>>8==0),m}finderPenaltyCountPatterns(c){const h=c[1];a(h<=this.size*3);const m=h>0&&c[2]==h&&c[3]==h*3&&c[4]==h&&c[5]==h;return(m&&c[0]>=h*4&&c[6]>=h?1:0)+(m&&c[6]>=h*4&&c[0]>=h?1:0)}finderPenaltyTerminateAndCount(c,h,m){return c&&(this.finderPenaltyAddHistory(h,m),h=0),h+=this.size,this.finderPenaltyAddHistory(h,m),this.finderPenaltyCountPatterns(m)}finderPenaltyAddHistory(c,h){h[0]==0&&(c+=this.size),h.pop(),h.unshift(c)}};let t=e;t.MIN_VERSION=1,t.MAX_VERSION=40,t.PENALTY_N1=3,t.PENALTY_N2=3,t.PENALTY_N3=40,t.PENALTY_N4=10,t.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],t.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],i.QrCode=t;function r(c,h,m){if(h<0||h>31||c>>>h)throw new RangeError("Value out of range");for(let p=h-1;p>=0;p--)m.push(c>>>p&1)}function o(c,h){return(c>>>h&1)!=0}function a(c){if(!c)throw new Error("Assertion error")}const l=class{constructor(c,h,m){if(this.mode=c,this.numChars=h,this.bitData=m,h<0)throw new RangeError("Invalid argument");this.bitData=m.slice()}static makeBytes(c){let h=[];for(const m of c)r(m,8,h);return new l(l.Mode.BYTE,c.length,h)}static makeNumeric(c){if(!l.isNumeric(c))throw new RangeError("String contains non-numeric characters");let h=[];for(let m=0;m<c.length;){const p=Math.min(c.length-m,3);r(parseInt(c.substr(m,p),10),p*3+1,h),m+=p}return new l(l.Mode.NUMERIC,c.length,h)}static makeAlphanumeric(c){if(!l.isAlphanumeric(c))throw new RangeError("String contains unencodable characters in alphanumeric mode");let h=[],m;for(m=0;m+2<=c.length;m+=2){let p=l.ALPHANUMERIC_CHARSET.indexOf(c.charAt(m))*45;p+=l.ALPHANUMERIC_CHARSET.indexOf(c.charAt(m+1)),r(p,11,h)}return m<c.length&&r(l.ALPHANUMERIC_CHARSET.indexOf(c.charAt(m)),6,h),new l(l.Mode.ALPHANUMERIC,c.length,h)}static makeSegments(c){return c==""?[]:l.isNumeric(c)?[l.makeNumeric(c)]:l.isAlphanumeric(c)?[l.makeAlphanumeric(c)]:[l.makeBytes(l.toUtf8ByteArray(c))]}static makeEci(c){let h=[];if(c<0)throw new RangeError("ECI assignment value out of range");if(c<1<<7)r(c,8,h);else if(c<1<<14)r(2,2,h),r(c,14,h);else if(c<1e6)r(6,3,h),r(c,21,h);else throw new RangeError("ECI assignment value out of range");return new l(l.Mode.ECI,0,h)}static isNumeric(c){return l.NUMERIC_REGEX.test(c)}static isAlphanumeric(c){return l.ALPHANUMERIC_REGEX.test(c)}getData(){return this.bitData.slice()}static getTotalBits(c,h){let m=0;for(const p of c){const A=p.mode.numCharCountBits(h);if(p.numChars>=1<<A)return 1/0;m+=4+A+p.bitData.length}return m}static toUtf8ByteArray(c){c=encodeURI(c);let h=[];for(let m=0;m<c.length;m++)c.charAt(m)!="%"?h.push(c.charCodeAt(m)):(h.push(parseInt(c.substr(m+1,2),16)),m+=2);return h}};let d=l;d.NUMERIC_REGEX=/^[0-9]*$/,d.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,d.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",i.QrSegment=d})(Xf||(Xf={}));(i=>{(e=>{const t=class{constructor(o,a){this.ordinal=o,this.formatBits=a}};let r=t;r.LOW=new t(0,1),r.MEDIUM=new t(1,0),r.QUARTILE=new t(2,3),r.HIGH=new t(3,2),e.Ecc=r})(i.QrCode||(i.QrCode={}))})(Xf||(Xf={}));(i=>{(e=>{const t=class{constructor(o,a){this.modeBits=o,this.numBitsCharCount=a}numCharCountBits(o){return this.numBitsCharCount[Math.floor((o+7)/17)]}};let r=t;r.NUMERIC=new t(1,[10,12,14]),r.ALPHANUMERIC=new t(2,[9,11,13]),r.BYTE=new t(4,[8,16,16]),r.KANJI=new t(8,[8,10,12]),r.ECI=new t(7,[0,0,0]),e.Mode=r})(i.QrSegment||(i.QrSegment={}))})(Xf||(Xf={}));var kA=Xf;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var MW={L:kA.QrCode.Ecc.LOW,M:kA.QrCode.Ecc.MEDIUM,Q:kA.QrCode.Ecc.QUARTILE,H:kA.QrCode.Ecc.HIGH},bW=128,SW="L",TW="#FFFFFF",IW="#000000",RW=!1,WP=4,BW=.1;function LW(i,e=0){const t=[];return i.forEach(function(r,o){let a=null;r.forEach(function(l,d){if(!l&&a!==null){t.push(`M${a+e} ${o+e}h${d-a}v1H${a+e}z`),a=null;return}if(d===r.length-1){if(!l)return;a===null?t.push(`M${d+e},${o+e} h1v1H${d+e}z`):t.push(`M${a+e},${o+e} h${d+1-a}v1H${a+e}z`);return}l&&a===null&&(a=d)})}),t.join("")}function DW(i,e){return i.slice().map((t,r)=>r<e.y||r>=e.y+e.h?t:t.map((o,a)=>a<e.x||a>=e.x+e.w?o:!1))}function PW(i,e,t,r){if(r==null)return null;const o=t?WP:0,a=i.length+o*2,l=Math.floor(e*BW),d=a/e,c=(r.width||l)*d,h=(r.height||l)*d,m=r.x==null?i.length/2-c/2:r.x*d,p=r.y==null?i.length/2-h/2:r.y*d;let A=null;if(r.excavate){let v=Math.floor(m),y=Math.floor(p),x=Math.ceil(c+m-v),C=Math.ceil(h+p-y);A={x:v,y,w:x,h:C}}return{x:m,y:p,h,w:c,excavation:A}}(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})();function OW(i){const e=i,{value:t,size:r=bW,level:o=SW,bgColor:a=TW,fgColor:l=IW,includeMargin:d=RW,imageSettings:c}=e,h=CW(e,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]);let m=kA.QrCode.encodeText(t,MW[o]).getModules();const p=d?WP:0,A=m.length+p*2,v=PW(m,r,d,c);let y=null;c!=null&&v!=null&&(v.excavation!=null&&(m=DW(m,v.excavation)),y=BA.createElement("image",{xlinkHref:c.src,height:v.h,width:v.w,x:v.x+p,y:v.y+p,preserveAspectRatio:"none"}));const x=LW(m,p);return BA.createElement("svg",wW({height:r,width:r,viewBox:`0 0 ${A} ${A}`},h),BA.createElement("path",{fill:a,d:`M0,0 h${A}v${A}H0z`,shapeRendering:"crispEdges"}),BA.createElement("path",{fill:l,d:x,shapeRendering:"crispEdges"}),y)}function FW(){const i=Zt.useRef(),[e,t]=Zt.useState("#8B4513"),[r,o]=Zt.useState("leather"),[a,l]=Zt.useState("silver"),[d,c]=Zt.useState(!1),h=y=>{t(y)},m=y=>{o(y)},p=y=>{l(y)};return Ga(R1,{children:[sr("div",{className:"title",children:"Choose your backpack in WebAR"}),Ga("div",{className:"controls_container",children:[Ga("div",{className:"color-buttons",children:[sr("div",{children:"Color"}),sr("button",{className:"button",style:{backgroundColor:"#8B4513"},title:"Brown",onClick:()=>h("#8B4513")}),sr("button",{className:"button",style:{backgroundColor:"#393535"},title:"Black",onClick:()=>h("#393535")}),sr("button",{className:"button",style:{backgroundColor:"#12569b"},title:"Blue",onClick:()=>h("#12569b")})]}),Ga("div",{className:"material-buttons",children:[sr("div",{children:"Material"}),sr("button",{className:"button button--leather",title:"Leather",onClick:()=>m("leather")}),sr("button",{className:"button button--fabric",title:"Fabric",onClick:()=>m("fabric")}),sr("button",{className:"button button--denim",title:"Denim",onClick:()=>m("denim")})]}),Ga("div",{className:"metall-buttons",children:[sr("div",{children:"Metall"}),sr("button",{className:"button button--silver",title:"Silver",onClick:()=>p("silver")}),sr("button",{className:"button button--gold",title:"Gold",onClick:()=>p("gold")}),sr("button",{className:"button button--black",title:"Black",onClick:()=>p("black")})]})]}),Ga("div",{className:"body_container",children:[d&&Ga("div",{className:"canvas",children:[sr("h2",{children:" AR"}),sr("ambientLight",{intensity:.7}),sr("directionalLight",{position:[14,12,25],intensity:1}),sr(aR,{color:e,material:r,metall:a,isArVisible:d})]}),!d&&Ga(R1,{children:[sr("div",{className:"canvas",children:Ga(NP,{camera:{position:[.35,.2,.35]},children:[sr(RQ,{}),sr("ambientLight",{intensity:.7}),sr("directionalLight",{position:[14,12,25],intensity:1}),sr("group",{ref:i,children:sr(aR,{color:e,material:r,metall:a,isArVisible:d})})]})}),Ga("div",{className:"qr_container",children:[sr("div",{children:" Try it on mobile"}),sr("div",{className:"qr_box",children:sr(OW,{value:"https://paulvoron.github.io/ar-test/"})})]}),Ga("div",{className:"ar_container",children:[sr("div",{children:" Try it in AR"}),sr("button",{className:"ar_button",onClick:()=>{c(!0)},children:"AR"})]})]})]}),d&&sr("button",{className:"ar_button ar_button--back",onClick:()=>{c(!1)},children:"Back to web"}),sr("p",{children:"Developed by Pavlo Voronin, 2023"})]})}f2.createRoot(document.getElementById("root")).render(sr(BA.StrictMode,{children:sr(FW,{})}));
